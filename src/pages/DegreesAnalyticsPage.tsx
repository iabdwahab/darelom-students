function DegreesAnalyticsPage() {
  const data = [
    {
      grade: 'الأولى',
      subjects_analytics: [
        {
          subject_name: 'قاعة البحث والمكتبة (عام)',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 299,
            subject_succeed_students_percentage: '86.42',
          },
          subject_degree: {
            total_degree: 26406,
            average_degree: '76.32',
          },
        },
        {
          subject_name: 'التفكير النقدي: الاسس والمهارات',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 317,
            subject_succeed_students_percentage: '91.62',
          },
          subject_degree: {
            total_degree: 24928,
            average_degree: '72.05',
          },
        },
        {
          subject_name: 'النحو1',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 250,
            subject_succeed_students_percentage: '72.25',
          },
          subject_degree: {
            total_degree: 19882,
            average_degree: '57.46',
          },
        },
        {
          subject_name: 'تصريف الأفعال',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 274,
            subject_succeed_students_percentage: '79.19',
          },
          subject_degree: {
            total_degree: 22485,
            average_degree: '64.99',
          },
        },
        {
          subject_name: 'الأدب فى العصر الجاهلى',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 258,
            subject_succeed_students_percentage: '74.57',
          },
          subject_degree: {
            total_degree: 19005,
            average_degree: '54.93',
          },
        },
        {
          subject_name: 'نصوص من العصر الجاهلى',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 264,
            subject_succeed_students_percentage: '76.30',
          },
          subject_degree: {
            total_degree: 19667,
            average_degree: '56.84',
          },
        },
        {
          subject_name: 'البلاغة العربية',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 289,
            subject_succeed_students_percentage: '83.53',
          },
          subject_degree: {
            total_degree: 22193,
            average_degree: '64.14',
          },
        },
        {
          subject_name: 'النقد الأدبى القديم',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 259,
            subject_succeed_students_percentage: '74.86',
          },
          subject_degree: {
            total_degree: 19279,
            average_degree: '55.72',
          },
        },
        {
          subject_name: 'علم اللغة',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 303,
            subject_succeed_students_percentage: '87.57',
          },
          subject_degree: {
            total_degree: 23283,
            average_degree: '67.29',
          },
        },
        {
          subject_name: 'القرآن الكريم والعبادات',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 255,
            subject_succeed_students_percentage: '73.70',
          },
          subject_degree: {
            total_degree: 18583,
            average_degree: '53.71',
          },
        },
        {
          subject_name: 'السيرة النبوية وتاريخ الراشدين',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 267,
            subject_succeed_students_percentage: '77.17',
          },
          subject_degree: {
            total_degree: 20323,
            average_degree: '58.74',
          },
        },
        {
          subject_name: 'الأخلاق و الفلسفة العامة',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 269,
            subject_succeed_students_percentage: '77.75',
          },
          subject_degree: {
            total_degree: 18783,
            average_degree: '54.29',
          },
        },
        {
          subject_name: 'تدريبات نحوية',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 286,
            subject_succeed_students_percentage: '82.66',
          },
          subject_degree: {
            total_degree: 22399,
            average_degree: '64.74',
          },
        },
        {
          subject_name: 'اللغة الأوربية',
          subject_students: {
            subject_students_count: 346,
            subject_succeed_students_count: 263,
            subject_succeed_students_percentage: '76.01',
          },
          subject_degree: {
            total_degree: 20155,
            average_degree: '58.25',
          },
        },
      ],
    },
    {
      grade: 'الثانية',
      subjects_analytics: [
        {
          subject_name: 'قاعة البحث والمكتبة (النحو واللغة)',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 403,
            subject_succeed_students_percentage: '92.64',
          },
          subject_degree: {
            total_degree: 31282,
            average_degree: '71.91',
          },
        },
        {
          subject_name: 'ريادة الأعمال',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 425,
            subject_succeed_students_percentage: '97.70',
          },
          subject_degree: {
            total_degree: 31332,
            average_degree: '72.03',
          },
        },
        {
          subject_name: 'النحو2',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 353,
            subject_succeed_students_percentage: '81.15',
          },
          subject_degree: {
            total_degree: 25644,
            average_degree: '58.95',
          },
        },
        {
          subject_name: 'تدربيات لغوية',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 412,
            subject_succeed_students_percentage: '94.71',
          },
          subject_degree: {
            total_degree: 34904,
            average_degree: '80.24',
          },
        },
        {
          subject_name: 'الأدب فى عصر صدر الإسلام وبنى أمية',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 357,
            subject_succeed_students_percentage: '82.07',
          },
          subject_degree: {
            total_degree: 25122,
            average_degree: '57.75',
          },
        },
        {
          subject_name: 'اللغات السامية والشرقية',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 376,
            subject_succeed_students_percentage: '86.44',
          },
          subject_degree: {
            total_degree: 28866,
            average_degree: '66.36',
          },
        },
        {
          subject_name: 'التاريخ الأموى والعباسى',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 406,
            subject_succeed_students_percentage: '93.33',
          },
          subject_degree: {
            total_degree: 32239,
            average_degree: '74.11',
          },
        },
        {
          subject_name: 'النظم والأسلوبية',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 366,
            subject_succeed_students_percentage: '84.14',
          },
          subject_degree: {
            total_degree: 26398,
            average_degree: '60.69',
          },
        },
        {
          subject_name: 'العقيدة والمنطق ومناهج البحث',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 363,
            subject_succeed_students_percentage: '83.45',
          },
          subject_degree: {
            total_degree: 24676,
            average_degree: '56.73',
          },
        },
        {
          subject_name: 'القران الكريم والأحول الشخصية',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 396,
            subject_succeed_students_percentage: '91.03',
          },
          subject_degree: {
            total_degree: 28663,
            average_degree: '65.89',
          },
        },
        {
          subject_name: 'نصوص من الأدب الإسلامى والأموى',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 374,
            subject_succeed_students_percentage: '85.98',
          },
          subject_degree: {
            total_degree: 25702,
            average_degree: '59.09',
          },
        },
        {
          subject_name: 'المعاجم وعلم الأصوات',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 401,
            subject_succeed_students_percentage: '92.18',
          },
          subject_degree: {
            total_degree: 31956,
            average_degree: '73.46',
          },
        },
        {
          subject_name: 'بلاغة القرآن',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 381,
            subject_succeed_students_percentage: '87.59',
          },
          subject_degree: {
            total_degree: 29567,
            average_degree: '67.97',
          },
        },
        {
          subject_name: 'الصرف والعروض1',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 358,
            subject_succeed_students_percentage: '82.30',
          },
          subject_degree: {
            total_degree: 26885,
            average_degree: '61.80',
          },
        },
        {
          subject_name: 'اللغة الأوربية',
          subject_students: {
            subject_students_count: 435,
            subject_succeed_students_count: 378,
            subject_succeed_students_percentage: '86.90',
          },
          subject_degree: {
            total_degree: 27527,
            average_degree: '63.28',
          },
        },
      ],
    },
    {
      grade: 'الثالثة',
      subjects_analytics: [
        {
          subject_name: 'اللغة العبرية/اللغة الفارسية',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 414,
            subject_succeed_students_percentage: '67.65',
          },
          subject_degree: {
            total_degree: 33216,
            average_degree: '54.27',
          },
        },
        {
          subject_name: 'اللغة الأوربية',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 463,
            subject_succeed_students_percentage: '75.65',
          },
          subject_degree: {
            total_degree: 36086,
            average_degree: '58.96',
          },
        },
        {
          subject_name: 'قاعة البحث والمكتبة(الأدب والنقد)',
          subject_students: {
            subject_students_count: 575,
            subject_succeed_students_count: 490,
            subject_succeed_students_percentage: '85.22',
          },
          subject_degree: {
            total_degree: 40473,
            average_degree: '70.39',
          },
        },
        {
          subject_name: 'القضايا المجتمعية',
          subject_students: {
            subject_students_count: 367,
            subject_succeed_students_count: 356,
            subject_succeed_students_percentage: '97.00',
          },
          subject_degree: {
            total_degree: 26718,
            average_degree: '72.80',
          },
        },
        {
          subject_name: 'النحو3',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 407,
            subject_succeed_students_percentage: '66.50',
          },
          subject_degree: {
            total_degree: 29667,
            average_degree: '48.48',
          },
        },
        {
          subject_name: 'الصرف والعروض2',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 410,
            subject_succeed_students_percentage: '66.99',
          },
          subject_degree: {
            total_degree: 30766,
            average_degree: '50.27',
          },
        },
        {
          subject_name: 'الأدب العباسى والاندلسى',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 415,
            subject_succeed_students_percentage: '67.81',
          },
          subject_degree: {
            total_degree: 30677,
            average_degree: '50.13',
          },
        },
        {
          subject_name: 'نصوص أدبية من العصر العباسى والأندلسى',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 438,
            subject_succeed_students_percentage: '71.57',
          },
          subject_degree: {
            total_degree: 36515,
            average_degree: '59.67',
          },
        },
        {
          subject_name: 'علم الدلالة وعلم اللغة الحاسوبي',
          subject_students: {
            subject_students_count: 575,
            subject_succeed_students_count: 433,
            subject_succeed_students_percentage: '75.30',
          },
          subject_degree: {
            total_degree: 30442,
            average_degree: '52.94',
          },
        },
        {
          subject_name: 'الأدب المقارن ونظرية الأدب',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 426,
            subject_succeed_students_percentage: '69.61',
          },
          subject_degree: {
            total_degree: 31450,
            average_degree: '51.39',
          },
        },
        {
          subject_name: 'علوم القرآن والسنة',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 448,
            subject_succeed_students_percentage: '73.20',
          },
          subject_degree: {
            total_degree: 34668,
            average_degree: '56.65',
          },
        },
        {
          subject_name: 'التفسير والحديث',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 447,
            subject_succeed_students_percentage: '73.04',
          },
          subject_degree: {
            total_degree: 32153,
            average_degree: '52.54',
          },
        },
        {
          subject_name: 'علم الكلام والفلسفة الإسلامية',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 423,
            subject_succeed_students_percentage: '69.12',
          },
          subject_degree: {
            total_degree: 29500,
            average_degree: '48.20',
          },
        },
        {
          subject_name: 'تاريخ مصر الإسلامية والمغرب والأندلس',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 410,
            subject_succeed_students_percentage: '66.99',
          },
          subject_degree: {
            total_degree: 28216,
            average_degree: '46.10',
          },
        },
        {
          subject_name: 'تدربيات أدبية',
          subject_students: {
            subject_students_count: 612,
            subject_succeed_students_count: 495,
            subject_succeed_students_percentage: '80.88',
          },
          subject_degree: {
            total_degree: 40195,
            average_degree: '65.68',
          },
        },
      ],
    },
    {
      grade: 'الرابعة',
      subjects_analytics: [
        {
          subject_name: 'النحو4',
          subject_students: {
            subject_students_count: 1030,
            subject_succeed_students_count: 558,
            subject_succeed_students_percentage: '54.17',
          },
          subject_degree: {
            total_degree: 42274,
            average_degree: '41.04',
          },
        },
        {
          subject_name: 'اللغة الأوربية والترجمة 4',
          subject_students: {
            subject_students_count: 789,
            subject_succeed_students_count: 670,
            subject_succeed_students_percentage: '84.92',
          },
          subject_degree: {
            total_degree: 46817,
            average_degree: '59.34',
          },
        },
        {
          subject_name: 'الصرف والقافية',
          subject_students: {
            subject_students_count: 1030,
            subject_succeed_students_count: 532,
            subject_succeed_students_percentage: '51.65',
          },
          subject_degree: {
            total_degree: 40616,
            average_degree: '39.43',
          },
        },
        {
          subject_name: 'الاتجاهات اللغوية الحديثة وقضايا العربية المعاصرة',
          subject_students: {
            subject_students_count: 789,
            subject_succeed_students_count: 561,
            subject_succeed_students_percentage: '71.10',
          },
          subject_degree: {
            total_degree: 40812,
            average_degree: '51.73',
          },
        },
        {
          subject_name: 'الأدب العربى الحديث',
          subject_students: {
            subject_students_count: 1030,
            subject_succeed_students_count: 567,
            subject_succeed_students_percentage: '55.05',
          },
          subject_degree: {
            total_degree: 41078,
            average_degree: '39.88',
          },
        },
        {
          subject_name: 'الحروب الصلبيية وت.الشرق الاسلامى',
          subject_students: {
            subject_students_count: 1030,
            subject_succeed_students_count: 571,
            subject_succeed_students_percentage: '55.44',
          },
          subject_degree: {
            total_degree: 41444,
            average_degree: '40.24',
          },
        },
        {
          subject_name: 'التصوف والفكر الإسلامى الحديث',
          subject_students: {
            subject_students_count: 1030,
            subject_succeed_students_count: 703,
            subject_succeed_students_percentage: '68.25',
          },
          subject_degree: {
            total_degree: 49856,
            average_degree: '48.40',
          },
        },
        {
          subject_name: 'أصول الفقه',
          subject_students: {
            subject_students_count: 789,
            subject_succeed_students_count: 573,
            subject_succeed_students_percentage: '72.62',
          },
          subject_degree: {
            total_degree: 39914,
            average_degree: '50.59',
          },
        },
        {
          subject_name: 'تدريبات بلاغية',
          subject_students: {
            subject_students_count: 789,
            subject_succeed_students_count: 707,
            subject_succeed_students_percentage: '89.61',
          },
          subject_degree: {
            total_degree: 52675,
            average_degree: '66.76',
          },
        },
        {
          subject_name: 'الحضارة والنظم الإسلامية',
          subject_students: {
            subject_students_count: 1030,
            subject_succeed_students_count: 580,
            subject_succeed_students_percentage: '56.31',
          },
          subject_degree: {
            total_degree: 42662,
            average_degree: '41.42',
          },
        },
        {
          subject_name: 'اللغة (العبرية/الفارسية) والترجمة',
          subject_students: {
            subject_students_count: 789,
            subject_succeed_students_count: 645,
            subject_succeed_students_percentage: '81.75',
          },
          subject_degree: {
            total_degree: 48101,
            average_degree: '60.96',
          },
        },
        {
          subject_name: 'نصوص من الأدب العربي الحديث',
          subject_students: {
            subject_students_count: 789,
            subject_succeed_students_count: 564,
            subject_succeed_students_percentage: '71.48',
          },
          subject_degree: {
            total_degree: 39627,
            average_degree: '50.22',
          },
        },
        {
          subject_name: 'النقد الأدبي الحديث',
          subject_students: {
            subject_students_count: 789,
            subject_succeed_students_count: 602,
            subject_succeed_students_percentage: '76.30',
          },
          subject_degree: {
            total_degree: 41405,
            average_degree: '52.48',
          },
        },
        {
          subject_name: 'قاعة البحث والمكتبة العلوم الإسلامية',
          subject_students: {
            subject_students_count: 789,
            subject_succeed_students_count: 696,
            subject_succeed_students_percentage: '88.21',
          },
          subject_degree: {
            total_degree: 52815,
            average_degree: '66.94',
          },
        },
      ],
    },
  ];

  return (
    <main className=" py-3" dir="rtl">
      {/* Page Title */}
      <div className="text-center mx-auto border-bottom mb-5" style={{ width: 'fit-content' }}>
        <h2 className="fs-4">تحليل نتائج الطلاب للعام الدراسي 2025</h2>
        <p className="text-danger mt-1  fs-6">[ميزة تجربيبة]</p>
      </div>

      <div>
        <p className="my-4 " style={{ textAlign: 'justify' }}>
          - يرجى الانتباه إلى أن بعض المواد في الفرقة الرابعة يشترك فيها طلاب اللائحة الجديدة مع
          طلاب اللائحة القديمة، وأغلب طلاب اللائحة القديمة لا يحضرون الامتحانات، أو نتائجهم تكون
          ضعيفة بعض الشيء؛ فيوثر هذا الأمر على النتيجة الإجمالية.
        </p>
      </div>

      {/* Grades Accordion */}
      <div className="accordion" id="gradesAccordion">
        {data.map((item, gradeIndex) => {
          return (
            <div className="accordion-item mb-3 border" key={gradeIndex}>
              <h2 className="accordion-header" id={`heading${gradeIndex}`}>
                <button
                  className={`accordion-button ${gradeIndex !== 0 ? 'collapsed' : ''}`}
                  type="button"
                  data-bs-toggle="collapse"
                  data-bs-target={`#collapse${gradeIndex}`}
                  aria-expanded={gradeIndex === 0}
                  aria-controls={`collapse${gradeIndex}`}
                >
                  <span className="fw-bold fs-5">📊 إحصائيات المواد - الفرقة {item.grade}</span>
                  <span className="badge mx-2 bg-primary ms-2">
                    {item.subjects_analytics.length} مادة
                  </span>
                </button>
              </h2>
              <div
                id={`collapse${gradeIndex}`}
                className={`accordion-collapse collapse ${gradeIndex === 0 ? 'show' : ''}`}
                aria-labelledby={`heading${gradeIndex}`}
                data-bs-parent="#gradesAccordion"
              >
                <div className="accordion-body">
                  <div className="row g-4">
                    {item.subjects_analytics.map((subject, idx) => {
                      const percentage = parseFloat(
                        subject.subject_students.subject_succeed_students_percentage,
                      );

                      let progressClass = 'bg-danger';
                      if (percentage >= 85) progressClass = 'bg-success';
                      else if (percentage >= 70) progressClass = 'bg-info';

                      return (
                        <div className="col-md-6 col-lg-4" key={idx}>
                          <div className="card shadow-sm h-100 subject-card">
                            <div className="card-body d-flex flex-column justify-content-between">
                              <h5 className="card-title fw-bold mb-3">{subject.subject_name}</h5>

                              <table className="table table-sm table-borderless mb-3">
                                <tbody>
                                  <tr>
                                    <td>📌 عدد الطلاب:</td>
                                    <td className="text-end fw-bold">
                                      {subject.subject_students.subject_students_count}
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>✅ الناجحون:</td>
                                    <td className="text-end fw-bold text-success">
                                      {subject.subject_students.subject_succeed_students_count}
                                    </td>
                                  </tr>
                                  <tr>
                                    <td>📈 نسبة الناجحين:</td>
                                    <td className="text-end fw-bold">{percentage}%</td>
                                  </tr>
                                  <tr>
                                    <td>⚖️ متوسط الدرجات:</td>
                                    <td className="text-end fw-bold">
                                      {subject.subject_degree.average_degree}
                                    </td>
                                  </tr>
                                </tbody>
                              </table>

                              <div className="progress" style={{ height: '20px' }}>
                                <div
                                  className={`progress-bar ${progressClass}`}
                                  role="progressbar"
                                  style={{ width: `${percentage}%` }}
                                  aria-valuenow={percentage}
                                  aria-valuemin={0}
                                  aria-valuemax={100}
                                >
                                  {percentage}%
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      );
                    })}
                  </div>
                </div>
              </div>
            </div>
          );
        })}
      </div>

      {/* Hover effect */}
      <style>{`
        .subject-card:hover {
          transform: translateY(-5px);
          transition: 0.3s ease;
        }
      `}</style>
    </main>
  );
}
export default DegreesAnalyticsPage;
