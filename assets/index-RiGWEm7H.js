function PE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function OE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var NE={exports:{}},of={},DE={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _c=Symbol.for("react.element"),y1=Symbol.for("react.portal"),w1=Symbol.for("react.fragment"),E1=Symbol.for("react.strict_mode"),T1=Symbol.for("react.profiler"),S1=Symbol.for("react.provider"),b1=Symbol.for("react.context"),I1=Symbol.for("react.forward_ref"),A1=Symbol.for("react.suspense"),k1=Symbol.for("react.memo"),C1=Symbol.for("react.lazy"),ry=Symbol.iterator;function R1(t){return t===null||typeof t!="object"?null:(t=ry&&t[ry]||t["@@iterator"],typeof t=="function"?t:null)}var LE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jE=Object.assign,ME={};function yl(t,e,n){this.props=t,this.context=e,this.refs=ME,this.updater=n||LE}yl.prototype.isReactComponent={};yl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function VE(){}VE.prototype=yl.prototype;function Ug(t,e,n){this.props=t,this.context=e,this.refs=ME,this.updater=n||LE}var Bg=Ug.prototype=new VE;Bg.constructor=Ug;jE(Bg,yl.prototype);Bg.isPureReactComponent=!0;var iy=Array.isArray,FE=Object.prototype.hasOwnProperty,zg={current:null},$E={key:!0,ref:!0,__self:!0,__source:!0};function UE(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)FE.call(e,r)&&!$E.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_c,type:t,key:s,ref:o,props:i,_owner:zg.current}}function P1(t,e){return{$$typeof:_c,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qg(t){return typeof t=="object"&&t!==null&&t.$$typeof===_c}function x1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sy=/\/+/g;function mp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?x1(""+t.key):e.toString(36)}function zh(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _c:case y1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+mp(o,0):r,iy(i)?(n="",t!=null&&(n=t.replace(sy,"$&/")+"/"),zh(i,e,n,"",function(c){return c})):i!=null&&(qg(i)&&(i=P1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",iy(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+mp(s,a);o+=zh(s,e,n,l,i)}else if(l=R1(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+mp(s,a++),o+=zh(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ph(t,e,n){if(t==null)return t;var r=[],i=0;return zh(t,r,"","",function(s){return e.call(n,s,i++)}),r}function O1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tn={current:null},qh={transition:null},N1={ReactCurrentDispatcher:Tn,ReactCurrentBatchConfig:qh,ReactCurrentOwner:zg};function BE(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:ph,forEach:function(t,e,n){ph(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ph(t,function(){e++}),e},toArray:function(t){return ph(t,function(e){return e})||[]},only:function(t){if(!qg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=yl;Pe.Fragment=w1;Pe.Profiler=T1;Pe.PureComponent=Ug;Pe.StrictMode=E1;Pe.Suspense=A1;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N1;Pe.act=BE;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jE({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=zg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)FE.call(e,l)&&!$E.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:_c,type:t.type,key:i,ref:s,props:r,_owner:o}};Pe.createContext=function(t){return t={$$typeof:b1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:S1,_context:t},t.Consumer=t};Pe.createElement=UE;Pe.createFactory=function(t){var e=UE.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:I1,render:t}};Pe.isValidElement=qg;Pe.lazy=function(t){return{$$typeof:C1,_payload:{_status:-1,_result:t},_init:O1}};Pe.memo=function(t,e){return{$$typeof:k1,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=qh.transition;qh.transition={};try{t()}finally{qh.transition=e}};Pe.unstable_act=BE;Pe.useCallback=function(t,e){return Tn.current.useCallback(t,e)};Pe.useContext=function(t){return Tn.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return Tn.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return Tn.current.useEffect(t,e)};Pe.useId=function(){return Tn.current.useId()};Pe.useImperativeHandle=function(t,e,n){return Tn.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return Tn.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return Tn.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return Tn.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return Tn.current.useReducer(t,e,n)};Pe.useRef=function(t){return Tn.current.useRef(t)};Pe.useState=function(t){return Tn.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return Tn.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return Tn.current.useTransition()};Pe.version="18.3.1";DE.exports=Pe;var U=DE.exports;const D1=xE(U),L1=PE({__proto__:null,default:D1},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1=U,M1=Symbol.for("react.element"),V1=Symbol.for("react.fragment"),F1=Object.prototype.hasOwnProperty,$1=j1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,U1={key:!0,ref:!0,__self:!0,__source:!0};function zE(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)F1.call(e,r)&&!U1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:M1,type:t,key:s,ref:o,props:i,_owner:$1.current}}of.Fragment=V1;of.jsx=zE;of.jsxs=zE;NE.exports=of;var v=NE.exports,hm={},qE={exports:{}},tr={},HE={exports:{}},WE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,oe){var ce=X.length;X.push(oe);e:for(;0<ce;){var Ae=ce-1>>>1,Te=X[Ae];if(0<i(Te,oe))X[Ae]=oe,X[ce]=Te,ce=Ae;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var oe=X[0],ce=X.pop();if(ce!==oe){X[0]=ce;e:for(var Ae=0,Te=X.length,H=Te>>>1;Ae<H;){var $e=2*(Ae+1)-1,ze=X[$e],Qe=$e+1,Ze=X[Qe];if(0>i(ze,ce))Qe<Te&&0>i(Ze,ze)?(X[Ae]=Ze,X[Qe]=ce,Ae=Qe):(X[Ae]=ze,X[$e]=ce,Ae=$e);else if(Qe<Te&&0>i(Ze,ce))X[Ae]=Ze,X[Qe]=ce,Ae=Qe;else break e}}return oe}function i(X,oe){var ce=X.sortIndex-oe.sortIndex;return ce!==0?ce:X.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],h=1,p=null,g=3,y=!1,C=!1,R=!1,O=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(X){for(var oe=n(c);oe!==null;){if(oe.callback===null)r(c);else if(oe.startTime<=X)r(c),oe.sortIndex=oe.expirationTime,e(l,oe);else break;oe=n(c)}}function D(X){if(R=!1,S(X),!C)if(n(l)!==null)C=!0,Ge(B);else{var oe=n(c);oe!==null&&ye(D,oe.startTime-X)}}function B(X,oe){C=!1,R&&(R=!1,A(w),w=-1),y=!0;var ce=g;try{for(S(oe),p=n(l);p!==null&&(!(p.expirationTime>oe)||X&&!N());){var Ae=p.callback;if(typeof Ae=="function"){p.callback=null,g=p.priorityLevel;var Te=Ae(p.expirationTime<=oe);oe=t.unstable_now(),typeof Te=="function"?p.callback=Te:p===n(l)&&r(l),S(oe)}else r(l);p=n(l)}if(p!==null)var H=!0;else{var $e=n(c);$e!==null&&ye(D,$e.startTime-oe),H=!1}return H}finally{p=null,g=ce,y=!1}}var x=!1,I=null,w=-1,b=5,k=-1;function N(){return!(t.unstable_now()-k<b)}function V(){if(I!==null){var X=t.unstable_now();k=X;var oe=!0;try{oe=I(!0,X)}finally{oe?P():(x=!1,I=null)}}else x=!1}var P;if(typeof T=="function")P=function(){T(V)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Ke=ge.port2;ge.port1.onmessage=V,P=function(){Ke.postMessage(null)}}else P=function(){O(V,0)};function Ge(X){I=X,x||(x=!0,P())}function ye(X,oe){w=O(function(){X(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){C||y||(C=!0,Ge(B))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var oe=3;break;default:oe=g}var ce=g;g=oe;try{return X()}finally{g=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ce=g;g=X;try{return oe()}finally{g=ce}},t.unstable_scheduleCallback=function(X,oe,ce){var Ae=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ae+ce:Ae):ce=Ae,X){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=ce+Te,X={id:h++,callback:oe,priorityLevel:X,startTime:ce,expirationTime:Te,sortIndex:-1},ce>Ae?(X.sortIndex=ce,e(c,X),n(l)===null&&X===n(c)&&(R?(A(w),w=-1):R=!0,ye(D,ce-Ae))):(X.sortIndex=Te,e(l,X),C||y||(C=!0,Ge(B))),X},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(X){var oe=g;return function(){var ce=g;g=oe;try{return X.apply(this,arguments)}finally{g=ce}}}})(WE);HE.exports=WE;var B1=HE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1=U,Jn=B1;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var KE=new Set,$u={};function ta(t,e){Za(t,e),Za(t+"Capture",e)}function Za(t,e){for($u[t]=e,t=0;t<e.length;t++)KE.add(e[t])}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dm=Object.prototype.hasOwnProperty,q1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oy={},ay={};function H1(t){return dm.call(ay,t)?!0:dm.call(oy,t)?!1:q1.test(t)?ay[t]=!0:(oy[t]=!0,!1)}function W1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function K1(t,e,n,r){if(e===null||typeof e>"u"||W1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Sn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gt[t]=new Sn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gt[e]=new Sn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gt[t]=new Sn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gt[t]=new Sn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gt[t]=new Sn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gt[t]=new Sn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gt[t]=new Sn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gt[t]=new Sn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gt[t]=new Sn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hg=/[\-:]([a-z])/g;function Wg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hg,Wg);Gt[e]=new Sn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hg,Wg);Gt[e]=new Sn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hg,Wg);Gt[e]=new Sn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!1,!1)});Gt.xlinkHref=new Sn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gt[t]=new Sn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Kg(t,e,n,r){var i=Gt.hasOwnProperty(e)?Gt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(K1(e,n,i,r)&&(n=null),r||i===null?H1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ns=z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mh=Symbol.for("react.element"),Ra=Symbol.for("react.portal"),Pa=Symbol.for("react.fragment"),Gg=Symbol.for("react.strict_mode"),fm=Symbol.for("react.profiler"),GE=Symbol.for("react.provider"),QE=Symbol.for("react.context"),Qg=Symbol.for("react.forward_ref"),pm=Symbol.for("react.suspense"),mm=Symbol.for("react.suspense_list"),Jg=Symbol.for("react.memo"),ws=Symbol.for("react.lazy"),JE=Symbol.for("react.offscreen"),ly=Symbol.iterator;function Gl(t){return t===null||typeof t!="object"?null:(t=ly&&t[ly]||t["@@iterator"],typeof t=="function"?t:null)}var vt=Object.assign,gp;function au(t){if(gp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gp=e&&e[1]||""}return`
`+gp+t}var vp=!1;function _p(t,e){if(!t||vp)return"";vp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{vp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?au(t):""}function G1(t){switch(t.tag){case 5:return au(t.type);case 16:return au("Lazy");case 13:return au("Suspense");case 19:return au("SuspenseList");case 0:case 2:case 15:return t=_p(t.type,!1),t;case 11:return t=_p(t.type.render,!1),t;case 1:return t=_p(t.type,!0),t;default:return""}}function gm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Pa:return"Fragment";case Ra:return"Portal";case fm:return"Profiler";case Gg:return"StrictMode";case pm:return"Suspense";case mm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QE:return(t.displayName||"Context")+".Consumer";case GE:return(t._context.displayName||"Context")+".Provider";case Qg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jg:return e=t.displayName||null,e!==null?e:gm(t.type)||"Memo";case ws:e=t._payload,t=t._init;try{return gm(t(e))}catch{}}return null}function Q1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gm(e);case 8:return e===Gg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function YE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function J1(t){var e=YE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gh(t){t._valueTracker||(t._valueTracker=J1(t))}function XE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=YE(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vm(t,e){var n=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ZE(t,e){e=e.checked,e!=null&&Kg(t,"checked",e,!1)}function _m(t,e){ZE(t,e);var n=qs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ym(t,e.type,n):e.hasOwnProperty("defaultValue")&&ym(t,e.type,qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ym(t,e,n){(e!=="number"||dd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var lu=Array.isArray;function za(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(lu(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qs(n)}}function eT(t,e){var n=qs(e.value),r=qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var vh,nT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(vh=vh||document.createElement("div"),vh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Uu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var yu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y1=["Webkit","ms","Moz","O"];Object.keys(yu).forEach(function(t){Y1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yu[e]=yu[t]})});function rT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||yu.hasOwnProperty(t)&&yu[t]?(""+e).trim():e+"px"}function iT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=rT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var X1=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tm(t,e){if(e){if(X1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bm=null;function Yg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Im=null,qa=null,Ha=null;function fy(t){if(t=Ec(t)){if(typeof Im!="function")throw Error(J(280));var e=t.stateNode;e&&(e=hf(e),Im(t.stateNode,t.type,e))}}function sT(t){qa?Ha?Ha.push(t):Ha=[t]:qa=t}function oT(){if(qa){var t=qa,e=Ha;if(Ha=qa=null,fy(t),e)for(t=0;t<e.length;t++)fy(e[t])}}function aT(t,e){return t(e)}function lT(){}var yp=!1;function uT(t,e,n){if(yp)return t(e,n);yp=!0;try{return aT(t,e,n)}finally{yp=!1,(qa!==null||Ha!==null)&&(lT(),oT())}}function Bu(t,e){var n=t.stateNode;if(n===null)return null;var r=hf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Am=!1;if(Ki)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){Am=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{Am=!1}function Z1(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var wu=!1,fd=null,pd=!1,km=null,eC={onError:function(t){wu=!0,fd=t}};function tC(t,e,n,r,i,s,o,a,l){wu=!1,fd=null,Z1.apply(eC,arguments)}function nC(t,e,n,r,i,s,o,a,l){if(tC.apply(this,arguments),wu){if(wu){var c=fd;wu=!1,fd=null}else throw Error(J(198));pd||(pd=!0,km=c)}}function na(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function py(t){if(na(t)!==t)throw Error(J(188))}function rC(t){var e=t.alternate;if(!e){if(e=na(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return py(i),t;if(s===r)return py(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function hT(t){return t=rC(t),t!==null?dT(t):null}function dT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=dT(t);if(e!==null)return e;t=t.sibling}return null}var fT=Jn.unstable_scheduleCallback,my=Jn.unstable_cancelCallback,iC=Jn.unstable_shouldYield,sC=Jn.unstable_requestPaint,St=Jn.unstable_now,oC=Jn.unstable_getCurrentPriorityLevel,Xg=Jn.unstable_ImmediatePriority,pT=Jn.unstable_UserBlockingPriority,md=Jn.unstable_NormalPriority,aC=Jn.unstable_LowPriority,mT=Jn.unstable_IdlePriority,af=null,li=null;function lC(t){if(li&&typeof li.onCommitFiberRoot=="function")try{li.onCommitFiberRoot(af,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:hC,uC=Math.log,cC=Math.LN2;function hC(t){return t>>>=0,t===0?32:31-(uC(t)/cC|0)|0}var _h=64,yh=4194304;function uu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=uu(a):(s&=o,s!==0&&(r=uu(s)))}else o=n&~i,o!==0?r=uu(o):s!==0&&(r=uu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zr(e),i=1<<n,r|=t[n],e&=~i;return r}function dC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=dC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Cm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gT(){var t=_h;return _h<<=1,!(_h&4194240)&&(_h=64),t}function wp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function yc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function pC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Zg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var qe=0;function vT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _T,ev,yT,wT,ET,Rm=!1,wh=[],Ns=null,Ds=null,Ls=null,zu=new Map,qu=new Map,Ss=[],mC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gy(t,e){switch(t){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":Ls=null;break;case"pointerover":case"pointerout":zu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qu.delete(e.pointerId)}}function Jl(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ec(e),e!==null&&ev(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function gC(t,e,n,r,i){switch(e){case"focusin":return Ns=Jl(Ns,t,e,n,r,i),!0;case"dragenter":return Ds=Jl(Ds,t,e,n,r,i),!0;case"mouseover":return Ls=Jl(Ls,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return zu.set(s,Jl(zu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qu.set(s,Jl(qu.get(s)||null,t,e,n,r,i)),!0}return!1}function TT(t){var e=Co(t.target);if(e!==null){var n=na(e);if(n!==null){if(e=n.tag,e===13){if(e=cT(n),e!==null){t.blockedOn=e,ET(t.priority,function(){yT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Hh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bm=r,n.target.dispatchEvent(r),bm=null}else return e=Ec(n),e!==null&&ev(e),t.blockedOn=n,!1;e.shift()}return!0}function vy(t,e,n){Hh(t)&&n.delete(e)}function vC(){Rm=!1,Ns!==null&&Hh(Ns)&&(Ns=null),Ds!==null&&Hh(Ds)&&(Ds=null),Ls!==null&&Hh(Ls)&&(Ls=null),zu.forEach(vy),qu.forEach(vy)}function Yl(t,e){t.blockedOn===e&&(t.blockedOn=null,Rm||(Rm=!0,Jn.unstable_scheduleCallback(Jn.unstable_NormalPriority,vC)))}function Hu(t){function e(i){return Yl(i,t)}if(0<wh.length){Yl(wh[0],t);for(var n=1;n<wh.length;n++){var r=wh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ns!==null&&Yl(Ns,t),Ds!==null&&Yl(Ds,t),Ls!==null&&Yl(Ls,t),zu.forEach(e),qu.forEach(e),n=0;n<Ss.length;n++)r=Ss[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ss.length&&(n=Ss[0],n.blockedOn===null);)TT(n),n.blockedOn===null&&Ss.shift()}var Wa=ns.ReactCurrentBatchConfig,vd=!0;function _C(t,e,n,r){var i=qe,s=Wa.transition;Wa.transition=null;try{qe=1,tv(t,e,n,r)}finally{qe=i,Wa.transition=s}}function yC(t,e,n,r){var i=qe,s=Wa.transition;Wa.transition=null;try{qe=4,tv(t,e,n,r)}finally{qe=i,Wa.transition=s}}function tv(t,e,n,r){if(vd){var i=Pm(t,e,n,r);if(i===null)Pp(t,e,r,_d,n),gy(t,r);else if(gC(i,t,e,n,r))r.stopPropagation();else if(gy(t,r),e&4&&-1<mC.indexOf(t)){for(;i!==null;){var s=Ec(i);if(s!==null&&_T(s),s=Pm(t,e,n,r),s===null&&Pp(t,e,r,_d,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pp(t,e,r,null,n)}}var _d=null;function Pm(t,e,n,r){if(_d=null,t=Yg(r),t=Co(t),t!==null)if(e=na(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _d=t,null}function ST(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(oC()){case Xg:return 1;case pT:return 4;case md:case aC:return 16;case mT:return 536870912;default:return 16}default:return 16}}var Ps=null,nv=null,Wh=null;function bT(){if(Wh)return Wh;var t,e=nv,n=e.length,r,i="value"in Ps?Ps.value:Ps.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Wh=i.slice(t,1<r?1-r:void 0)}function Kh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Eh(){return!0}function _y(){return!1}function nr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Eh:_y,this.isPropagationStopped=_y,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Eh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Eh)},persist:function(){},isPersistent:Eh}),e}var wl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rv=nr(wl),wc=vt({},wl,{view:0,detail:0}),wC=nr(wc),Ep,Tp,Xl,lf=vt({},wc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xl&&(Xl&&t.type==="mousemove"?(Ep=t.screenX-Xl.screenX,Tp=t.screenY-Xl.screenY):Tp=Ep=0,Xl=t),Ep)},movementY:function(t){return"movementY"in t?t.movementY:Tp}}),yy=nr(lf),EC=vt({},lf,{dataTransfer:0}),TC=nr(EC),SC=vt({},wc,{relatedTarget:0}),Sp=nr(SC),bC=vt({},wl,{animationName:0,elapsedTime:0,pseudoElement:0}),IC=nr(bC),AC=vt({},wl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kC=nr(AC),CC=vt({},wl,{data:0}),wy=nr(CC),RC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xC[t])?!!e[t]:!1}function iv(){return OC}var NC=vt({},wc,{key:function(t){if(t.key){var e=RC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Kh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iv,charCode:function(t){return t.type==="keypress"?Kh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Kh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DC=nr(NC),LC=vt({},lf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ey=nr(LC),jC=vt({},wc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iv}),MC=nr(jC),VC=vt({},wl,{propertyName:0,elapsedTime:0,pseudoElement:0}),FC=nr(VC),$C=vt({},lf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UC=nr($C),BC=[9,13,27,32],sv=Ki&&"CompositionEvent"in window,Eu=null;Ki&&"documentMode"in document&&(Eu=document.documentMode);var zC=Ki&&"TextEvent"in window&&!Eu,IT=Ki&&(!sv||Eu&&8<Eu&&11>=Eu),Ty=" ",Sy=!1;function AT(t,e){switch(t){case"keyup":return BC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xa=!1;function qC(t,e){switch(t){case"compositionend":return kT(e);case"keypress":return e.which!==32?null:(Sy=!0,Ty);case"textInput":return t=e.data,t===Ty&&Sy?null:t;default:return null}}function HC(t,e){if(xa)return t==="compositionend"||!sv&&AT(t,e)?(t=bT(),Wh=nv=Ps=null,xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return IT&&e.locale!=="ko"?null:e.data;default:return null}}var WC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function by(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!WC[t.type]:e==="textarea"}function CT(t,e,n,r){sT(r),e=yd(e,"onChange"),0<e.length&&(n=new rv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Tu=null,Wu=null;function KC(t){FT(t,0)}function uf(t){var e=Da(t);if(XE(e))return t}function GC(t,e){if(t==="change")return e}var RT=!1;if(Ki){var bp;if(Ki){var Ip="oninput"in document;if(!Ip){var Iy=document.createElement("div");Iy.setAttribute("oninput","return;"),Ip=typeof Iy.oninput=="function"}bp=Ip}else bp=!1;RT=bp&&(!document.documentMode||9<document.documentMode)}function Ay(){Tu&&(Tu.detachEvent("onpropertychange",PT),Wu=Tu=null)}function PT(t){if(t.propertyName==="value"&&uf(Wu)){var e=[];CT(e,Wu,t,Yg(t)),uT(KC,e)}}function QC(t,e,n){t==="focusin"?(Ay(),Tu=e,Wu=n,Tu.attachEvent("onpropertychange",PT)):t==="focusout"&&Ay()}function JC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uf(Wu)}function YC(t,e){if(t==="click")return uf(e)}function XC(t,e){if(t==="input"||t==="change")return uf(e)}function ZC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hr=typeof Object.is=="function"?Object.is:ZC;function Ku(t,e){if(Hr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!dm.call(e,i)||!Hr(t[i],e[i]))return!1}return!0}function ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cy(t,e){var n=ky(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ky(n)}}function xT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OT(){for(var t=window,e=dd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dd(t.document)}return e}function ov(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function eR(t){var e=OT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xT(n.ownerDocument.documentElement,n)){if(r!==null&&ov(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Cy(n,s);var o=Cy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var tR=Ki&&"documentMode"in document&&11>=document.documentMode,Oa=null,xm=null,Su=null,Om=!1;function Ry(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Om||Oa==null||Oa!==dd(r)||(r=Oa,"selectionStart"in r&&ov(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Su&&Ku(Su,r)||(Su=r,r=yd(xm,"onSelect"),0<r.length&&(e=new rv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Oa)))}function Th(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Na={animationend:Th("Animation","AnimationEnd"),animationiteration:Th("Animation","AnimationIteration"),animationstart:Th("Animation","AnimationStart"),transitionend:Th("Transition","TransitionEnd")},Ap={},NT={};Ki&&(NT=document.createElement("div").style,"AnimationEvent"in window||(delete Na.animationend.animation,delete Na.animationiteration.animation,delete Na.animationstart.animation),"TransitionEvent"in window||delete Na.transitionend.transition);function cf(t){if(Ap[t])return Ap[t];if(!Na[t])return t;var e=Na[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in NT)return Ap[t]=e[n];return t}var DT=cf("animationend"),LT=cf("animationiteration"),jT=cf("animationstart"),MT=cf("transitionend"),VT=new Map,Py="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(t,e){VT.set(t,e),ta(e,[t])}for(var kp=0;kp<Py.length;kp++){var Cp=Py[kp],nR=Cp.toLowerCase(),rR=Cp[0].toUpperCase()+Cp.slice(1);Xs(nR,"on"+rR)}Xs(DT,"onAnimationEnd");Xs(LT,"onAnimationIteration");Xs(jT,"onAnimationStart");Xs("dblclick","onDoubleClick");Xs("focusin","onFocus");Xs("focusout","onBlur");Xs(MT,"onTransitionEnd");Za("onMouseEnter",["mouseout","mouseover"]);Za("onMouseLeave",["mouseout","mouseover"]);Za("onPointerEnter",["pointerout","pointerover"]);Za("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iR=new Set("cancel close invalid load scroll toggle".split(" ").concat(cu));function xy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,nC(r,e,void 0,t),t.currentTarget=null}function FT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;xy(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;xy(i,a,c),s=l}}}if(pd)throw t=km,pd=!1,km=null,t}function ot(t,e){var n=e[Mm];n===void 0&&(n=e[Mm]=new Set);var r=t+"__bubble";n.has(r)||($T(e,t,2,!1),n.add(r))}function Rp(t,e,n){var r=0;e&&(r|=4),$T(n,t,r,e)}var Sh="_reactListening"+Math.random().toString(36).slice(2);function Gu(t){if(!t[Sh]){t[Sh]=!0,KE.forEach(function(n){n!=="selectionchange"&&(iR.has(n)||Rp(n,!1,t),Rp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Sh]||(e[Sh]=!0,Rp("selectionchange",!1,e))}}function $T(t,e,n,r){switch(ST(e)){case 1:var i=_C;break;case 4:i=yC;break;default:i=tv}n=i.bind(null,e,n,t),i=void 0,!Am||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Co(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}uT(function(){var c=s,h=Yg(n),p=[];e:{var g=VT.get(t);if(g!==void 0){var y=rv,C=t;switch(t){case"keypress":if(Kh(n)===0)break e;case"keydown":case"keyup":y=DC;break;case"focusin":C="focus",y=Sp;break;case"focusout":C="blur",y=Sp;break;case"beforeblur":case"afterblur":y=Sp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=TC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=MC;break;case DT:case LT:case jT:y=IC;break;case MT:y=FC;break;case"scroll":y=wC;break;case"wheel":y=UC;break;case"copy":case"cut":case"paste":y=kC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ey}var R=(e&4)!==0,O=!R&&t==="scroll",A=R?g!==null?g+"Capture":null:g;R=[];for(var T=c,S;T!==null;){S=T;var D=S.stateNode;if(S.tag===5&&D!==null&&(S=D,A!==null&&(D=Bu(T,A),D!=null&&R.push(Qu(T,D,S)))),O)break;T=T.return}0<R.length&&(g=new y(g,C,null,n,h),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==bm&&(C=n.relatedTarget||n.fromElement)&&(Co(C)||C[Gi]))break e;if((y||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,y?(C=n.relatedTarget||n.toElement,y=c,C=C?Co(C):null,C!==null&&(O=na(C),C!==O||C.tag!==5&&C.tag!==6)&&(C=null)):(y=null,C=c),y!==C)){if(R=yy,D="onMouseLeave",A="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(R=Ey,D="onPointerLeave",A="onPointerEnter",T="pointer"),O=y==null?g:Da(y),S=C==null?g:Da(C),g=new R(D,T+"leave",y,n,h),g.target=O,g.relatedTarget=S,D=null,Co(h)===c&&(R=new R(A,T+"enter",C,n,h),R.target=S,R.relatedTarget=O,D=R),O=D,y&&C)t:{for(R=y,A=C,T=0,S=R;S;S=_a(S))T++;for(S=0,D=A;D;D=_a(D))S++;for(;0<T-S;)R=_a(R),T--;for(;0<S-T;)A=_a(A),S--;for(;T--;){if(R===A||A!==null&&R===A.alternate)break t;R=_a(R),A=_a(A)}R=null}else R=null;y!==null&&Oy(p,g,y,R,!1),C!==null&&O!==null&&Oy(p,O,C,R,!0)}}e:{if(g=c?Da(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var B=GC;else if(by(g))if(RT)B=XC;else{B=JC;var x=QC}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=YC);if(B&&(B=B(t,c))){CT(p,B,n,h);break e}x&&x(t,g,c),t==="focusout"&&(x=g._wrapperState)&&x.controlled&&g.type==="number"&&ym(g,"number",g.value)}switch(x=c?Da(c):window,t){case"focusin":(by(x)||x.contentEditable==="true")&&(Oa=x,xm=c,Su=null);break;case"focusout":Su=xm=Oa=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,Ry(p,n,h);break;case"selectionchange":if(tR)break;case"keydown":case"keyup":Ry(p,n,h)}var I;if(sv)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else xa?AT(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(IT&&n.locale!=="ko"&&(xa||w!=="onCompositionStart"?w==="onCompositionEnd"&&xa&&(I=bT()):(Ps=h,nv="value"in Ps?Ps.value:Ps.textContent,xa=!0)),x=yd(c,w),0<x.length&&(w=new wy(w,t,null,n,h),p.push({event:w,listeners:x}),I?w.data=I:(I=kT(n),I!==null&&(w.data=I)))),(I=zC?qC(t,n):HC(t,n))&&(c=yd(c,"onBeforeInput"),0<c.length&&(h=new wy("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:c}),h.data=I))}FT(p,e)})}function Qu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yd(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bu(t,n),s!=null&&r.unshift(Qu(t,s,i)),s=Bu(t,e),s!=null&&r.push(Qu(t,s,i))),t=t.return}return r}function _a(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Oy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Bu(n,s),l!=null&&o.unshift(Qu(n,l,a))):i||(l=Bu(n,s),l!=null&&o.push(Qu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var sR=/\r\n?/g,oR=/\u0000|\uFFFD/g;function Ny(t){return(typeof t=="string"?t:""+t).replace(sR,`
`).replace(oR,"")}function bh(t,e,n){if(e=Ny(e),Ny(t)!==e&&n)throw Error(J(425))}function wd(){}var Nm=null,Dm=null;function Lm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jm=typeof setTimeout=="function"?setTimeout:void 0,aR=typeof clearTimeout=="function"?clearTimeout:void 0,Dy=typeof Promise=="function"?Promise:void 0,lR=typeof queueMicrotask=="function"?queueMicrotask:typeof Dy<"u"?function(t){return Dy.resolve(null).then(t).catch(uR)}:jm;function uR(t){setTimeout(function(){throw t})}function xp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Hu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Hu(e)}function js(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ly(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var El=Math.random().toString(36).slice(2),oi="__reactFiber$"+El,Ju="__reactProps$"+El,Gi="__reactContainer$"+El,Mm="__reactEvents$"+El,cR="__reactListeners$"+El,hR="__reactHandles$"+El;function Co(t){var e=t[oi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Gi]||n[oi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ly(t);t!==null;){if(n=t[oi])return n;t=Ly(t)}return e}t=n,n=t.parentNode}return null}function Ec(t){return t=t[oi]||t[Gi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Da(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function hf(t){return t[Ju]||null}var Vm=[],La=-1;function Zs(t){return{current:t}}function lt(t){0>La||(t.current=Vm[La],Vm[La]=null,La--)}function nt(t,e){La++,Vm[La]=t.current,t.current=e}var Hs={},an=Zs(Hs),On=Zs(!1),Fo=Hs;function el(t,e){var n=t.type.contextTypes;if(!n)return Hs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Nn(t){return t=t.childContextTypes,t!=null}function Ed(){lt(On),lt(an)}function jy(t,e,n){if(an.current!==Hs)throw Error(J(168));nt(an,e),nt(On,n)}function UT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,Q1(t)||"Unknown",i));return vt({},n,r)}function Td(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hs,Fo=an.current,nt(an,t),nt(On,On.current),!0}function My(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=UT(t,e,Fo),r.__reactInternalMemoizedMergedChildContext=t,lt(On),lt(an),nt(an,t)):lt(On),nt(On,n)}var ji=null,df=!1,Op=!1;function BT(t){ji===null?ji=[t]:ji.push(t)}function dR(t){df=!0,BT(t)}function eo(){if(!Op&&ji!==null){Op=!0;var t=0,e=qe;try{var n=ji;for(qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ji=null,df=!1}catch(i){throw ji!==null&&(ji=ji.slice(t+1)),fT(Xg,eo),i}finally{qe=e,Op=!1}}return null}var ja=[],Ma=0,Sd=null,bd=0,dr=[],fr=0,$o=null,Mi=1,Vi="";function To(t,e){ja[Ma++]=bd,ja[Ma++]=Sd,Sd=t,bd=e}function zT(t,e,n){dr[fr++]=Mi,dr[fr++]=Vi,dr[fr++]=$o,$o=t;var r=Mi;t=Vi;var i=32-zr(r)-1;r&=~(1<<i),n+=1;var s=32-zr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Mi=1<<32-zr(e)+i|n<<i|r,Vi=s+t}else Mi=1<<s|n<<i|r,Vi=t}function av(t){t.return!==null&&(To(t,1),zT(t,1,0))}function lv(t){for(;t===Sd;)Sd=ja[--Ma],ja[Ma]=null,bd=ja[--Ma],ja[Ma]=null;for(;t===$o;)$o=dr[--fr],dr[fr]=null,Vi=dr[--fr],dr[fr]=null,Mi=dr[--fr],dr[fr]=null}var Wn=null,Hn=null,ht=!1,Ur=null;function qT(t,e){var n=mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wn=t,Hn=js(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wn=t,Hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$o!==null?{id:Mi,overflow:Vi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wn=t,Hn=null,!0):!1;default:return!1}}function Fm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $m(t){if(ht){var e=Hn;if(e){var n=e;if(!Vy(t,e)){if(Fm(t))throw Error(J(418));e=js(n.nextSibling);var r=Wn;e&&Vy(t,e)?qT(r,n):(t.flags=t.flags&-4097|2,ht=!1,Wn=t)}}else{if(Fm(t))throw Error(J(418));t.flags=t.flags&-4097|2,ht=!1,Wn=t}}}function Fy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wn=t}function Ih(t){if(t!==Wn)return!1;if(!ht)return Fy(t),ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lm(t.type,t.memoizedProps)),e&&(e=Hn)){if(Fm(t))throw HT(),Error(J(418));for(;e;)qT(t,e),e=js(e.nextSibling)}if(Fy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Hn=js(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Hn=null}}else Hn=Wn?js(t.stateNode.nextSibling):null;return!0}function HT(){for(var t=Hn;t;)t=js(t.nextSibling)}function tl(){Hn=Wn=null,ht=!1}function uv(t){Ur===null?Ur=[t]:Ur.push(t)}var fR=ns.ReactCurrentBatchConfig;function Zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Ah(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function $y(t){var e=t._init;return e(t._payload)}function WT(t){function e(A,T){if(t){var S=A.deletions;S===null?(A.deletions=[T],A.flags|=16):S.push(T)}}function n(A,T){if(!t)return null;for(;T!==null;)e(A,T),T=T.sibling;return null}function r(A,T){for(A=new Map;T!==null;)T.key!==null?A.set(T.key,T):A.set(T.index,T),T=T.sibling;return A}function i(A,T){return A=$s(A,T),A.index=0,A.sibling=null,A}function s(A,T,S){return A.index=S,t?(S=A.alternate,S!==null?(S=S.index,S<T?(A.flags|=2,T):S):(A.flags|=2,T)):(A.flags|=1048576,T)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function a(A,T,S,D){return T===null||T.tag!==6?(T=Fp(S,A.mode,D),T.return=A,T):(T=i(T,S),T.return=A,T)}function l(A,T,S,D){var B=S.type;return B===Pa?h(A,T,S.props.children,D,S.key):T!==null&&(T.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===ws&&$y(B)===T.type)?(D=i(T,S.props),D.ref=Zl(A,T,S),D.return=A,D):(D=ed(S.type,S.key,S.props,null,A.mode,D),D.ref=Zl(A,T,S),D.return=A,D)}function c(A,T,S,D){return T===null||T.tag!==4||T.stateNode.containerInfo!==S.containerInfo||T.stateNode.implementation!==S.implementation?(T=$p(S,A.mode,D),T.return=A,T):(T=i(T,S.children||[]),T.return=A,T)}function h(A,T,S,D,B){return T===null||T.tag!==7?(T=jo(S,A.mode,D,B),T.return=A,T):(T=i(T,S),T.return=A,T)}function p(A,T,S){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Fp(""+T,A.mode,S),T.return=A,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case mh:return S=ed(T.type,T.key,T.props,null,A.mode,S),S.ref=Zl(A,null,T),S.return=A,S;case Ra:return T=$p(T,A.mode,S),T.return=A,T;case ws:var D=T._init;return p(A,D(T._payload),S)}if(lu(T)||Gl(T))return T=jo(T,A.mode,S,null),T.return=A,T;Ah(A,T)}return null}function g(A,T,S,D){var B=T!==null?T.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return B!==null?null:a(A,T,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case mh:return S.key===B?l(A,T,S,D):null;case Ra:return S.key===B?c(A,T,S,D):null;case ws:return B=S._init,g(A,T,B(S._payload),D)}if(lu(S)||Gl(S))return B!==null?null:h(A,T,S,D,null);Ah(A,S)}return null}function y(A,T,S,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(S)||null,a(T,A,""+D,B);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case mh:return A=A.get(D.key===null?S:D.key)||null,l(T,A,D,B);case Ra:return A=A.get(D.key===null?S:D.key)||null,c(T,A,D,B);case ws:var x=D._init;return y(A,T,S,x(D._payload),B)}if(lu(D)||Gl(D))return A=A.get(S)||null,h(T,A,D,B,null);Ah(T,D)}return null}function C(A,T,S,D){for(var B=null,x=null,I=T,w=T=0,b=null;I!==null&&w<S.length;w++){I.index>w?(b=I,I=null):b=I.sibling;var k=g(A,I,S[w],D);if(k===null){I===null&&(I=b);break}t&&I&&k.alternate===null&&e(A,I),T=s(k,T,w),x===null?B=k:x.sibling=k,x=k,I=b}if(w===S.length)return n(A,I),ht&&To(A,w),B;if(I===null){for(;w<S.length;w++)I=p(A,S[w],D),I!==null&&(T=s(I,T,w),x===null?B=I:x.sibling=I,x=I);return ht&&To(A,w),B}for(I=r(A,I);w<S.length;w++)b=y(I,A,w,S[w],D),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?w:b.key),T=s(b,T,w),x===null?B=b:x.sibling=b,x=b);return t&&I.forEach(function(N){return e(A,N)}),ht&&To(A,w),B}function R(A,T,S,D){var B=Gl(S);if(typeof B!="function")throw Error(J(150));if(S=B.call(S),S==null)throw Error(J(151));for(var x=B=null,I=T,w=T=0,b=null,k=S.next();I!==null&&!k.done;w++,k=S.next()){I.index>w?(b=I,I=null):b=I.sibling;var N=g(A,I,k.value,D);if(N===null){I===null&&(I=b);break}t&&I&&N.alternate===null&&e(A,I),T=s(N,T,w),x===null?B=N:x.sibling=N,x=N,I=b}if(k.done)return n(A,I),ht&&To(A,w),B;if(I===null){for(;!k.done;w++,k=S.next())k=p(A,k.value,D),k!==null&&(T=s(k,T,w),x===null?B=k:x.sibling=k,x=k);return ht&&To(A,w),B}for(I=r(A,I);!k.done;w++,k=S.next())k=y(I,A,w,k.value,D),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?w:k.key),T=s(k,T,w),x===null?B=k:x.sibling=k,x=k);return t&&I.forEach(function(V){return e(A,V)}),ht&&To(A,w),B}function O(A,T,S,D){if(typeof S=="object"&&S!==null&&S.type===Pa&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case mh:e:{for(var B=S.key,x=T;x!==null;){if(x.key===B){if(B=S.type,B===Pa){if(x.tag===7){n(A,x.sibling),T=i(x,S.props.children),T.return=A,A=T;break e}}else if(x.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===ws&&$y(B)===x.type){n(A,x.sibling),T=i(x,S.props),T.ref=Zl(A,x,S),T.return=A,A=T;break e}n(A,x);break}else e(A,x);x=x.sibling}S.type===Pa?(T=jo(S.props.children,A.mode,D,S.key),T.return=A,A=T):(D=ed(S.type,S.key,S.props,null,A.mode,D),D.ref=Zl(A,T,S),D.return=A,A=D)}return o(A);case Ra:e:{for(x=S.key;T!==null;){if(T.key===x)if(T.tag===4&&T.stateNode.containerInfo===S.containerInfo&&T.stateNode.implementation===S.implementation){n(A,T.sibling),T=i(T,S.children||[]),T.return=A,A=T;break e}else{n(A,T);break}else e(A,T);T=T.sibling}T=$p(S,A.mode,D),T.return=A,A=T}return o(A);case ws:return x=S._init,O(A,T,x(S._payload),D)}if(lu(S))return C(A,T,S,D);if(Gl(S))return R(A,T,S,D);Ah(A,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,T!==null&&T.tag===6?(n(A,T.sibling),T=i(T,S),T.return=A,A=T):(n(A,T),T=Fp(S,A.mode,D),T.return=A,A=T),o(A)):n(A,T)}return O}var nl=WT(!0),KT=WT(!1),Id=Zs(null),Ad=null,Va=null,cv=null;function hv(){cv=Va=Ad=null}function dv(t){var e=Id.current;lt(Id),t._currentValue=e}function Um(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ka(t,e){Ad=t,cv=Va=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xn=!0),t.firstContext=null)}function yr(t){var e=t._currentValue;if(cv!==t)if(t={context:t,memoizedValue:e,next:null},Va===null){if(Ad===null)throw Error(J(308));Va=t,Ad.dependencies={lanes:0,firstContext:t}}else Va=Va.next=t;return e}var Ro=null;function fv(t){Ro===null?Ro=[t]:Ro.push(t)}function GT(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,fv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Qi(t,r)}function Qi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Es=!1;function pv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ms(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Qi(t,n)}return i=r.interleaved,i===null?(e.next=e,fv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Qi(t,n)}function Gh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zg(t,n)}}function Uy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function kd(t,e,n,r){var i=t.updateQueue;Es=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,h=c=l=null,a=s;do{var g=a.lane,y=a.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var C=t,R=a;switch(g=e,y=n,R.tag){case 1:if(C=R.payload,typeof C=="function"){p=C.call(y,p,g);break e}p=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=R.payload,g=typeof C=="function"?C.call(y,p,g):C,g==null)break e;p=vt({},p,g);break e;case 2:Es=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,l=p):h=h.next=y,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(l=p),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Bo|=o,t.lanes=o,t.memoizedState=p}}function By(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var Tc={},ui=Zs(Tc),Yu=Zs(Tc),Xu=Zs(Tc);function Po(t){if(t===Tc)throw Error(J(174));return t}function mv(t,e){switch(nt(Xu,e),nt(Yu,t),nt(ui,Tc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Em(e,t)}lt(ui),nt(ui,e)}function rl(){lt(ui),lt(Yu),lt(Xu)}function JT(t){Po(Xu.current);var e=Po(ui.current),n=Em(e,t.type);e!==n&&(nt(Yu,t),nt(ui,n))}function gv(t){Yu.current===t&&(lt(ui),lt(Yu))}var mt=Zs(0);function Cd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Np=[];function vv(){for(var t=0;t<Np.length;t++)Np[t]._workInProgressVersionPrimary=null;Np.length=0}var Qh=ns.ReactCurrentDispatcher,Dp=ns.ReactCurrentBatchConfig,Uo=0,gt=null,xt=null,Ft=null,Rd=!1,bu=!1,Zu=0,pR=0;function Xt(){throw Error(J(321))}function _v(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hr(t[n],e[n]))return!1;return!0}function yv(t,e,n,r,i,s){if(Uo=s,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Qh.current=t===null||t.memoizedState===null?_R:yR,t=n(r,i),bu){s=0;do{if(bu=!1,Zu=0,25<=s)throw Error(J(301));s+=1,Ft=xt=null,e.updateQueue=null,Qh.current=wR,t=n(r,i)}while(bu)}if(Qh.current=Pd,e=xt!==null&&xt.next!==null,Uo=0,Ft=xt=gt=null,Rd=!1,e)throw Error(J(300));return t}function wv(){var t=Zu!==0;return Zu=0,t}function si(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?gt.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function wr(){if(xt===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=xt.next;var e=Ft===null?gt.memoizedState:Ft.next;if(e!==null)Ft=e,xt=t;else{if(t===null)throw Error(J(310));xt=t,t={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},Ft===null?gt.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function ec(t,e){return typeof e=="function"?e(t):e}function Lp(t){var e=wr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=xt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var h=c.lane;if((Uo&h)===h)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,gt.lanes|=h,Bo|=h}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Hr(r,e.memoizedState)||(xn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gt.lanes|=s,Bo|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jp(t){var e=wr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Hr(s,e.memoizedState)||(xn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function YT(){}function XT(t,e){var n=gt,r=wr(),i=e(),s=!Hr(r.memoizedState,i);if(s&&(r.memoizedState=i,xn=!0),r=r.queue,Ev(tS.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ft!==null&&Ft.memoizedState.tag&1){if(n.flags|=2048,tc(9,eS.bind(null,n,r,i,e),void 0,null),$t===null)throw Error(J(349));Uo&30||ZT(n,e,i)}return i}function ZT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function eS(t,e,n,r){e.value=n,e.getSnapshot=r,nS(e)&&rS(t)}function tS(t,e,n){return n(function(){nS(e)&&rS(t)})}function nS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hr(t,n)}catch{return!0}}function rS(t){var e=Qi(t,1);e!==null&&qr(e,t,1,-1)}function zy(t){var e=si();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ec,lastRenderedState:t},e.queue=t,t=t.dispatch=vR.bind(null,gt,t),[e.memoizedState,t]}function tc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iS(){return wr().memoizedState}function Jh(t,e,n,r){var i=si();gt.flags|=t,i.memoizedState=tc(1|e,n,void 0,r===void 0?null:r)}function ff(t,e,n,r){var i=wr();r=r===void 0?null:r;var s=void 0;if(xt!==null){var o=xt.memoizedState;if(s=o.destroy,r!==null&&_v(r,o.deps)){i.memoizedState=tc(e,n,s,r);return}}gt.flags|=t,i.memoizedState=tc(1|e,n,s,r)}function qy(t,e){return Jh(8390656,8,t,e)}function Ev(t,e){return ff(2048,8,t,e)}function sS(t,e){return ff(4,2,t,e)}function oS(t,e){return ff(4,4,t,e)}function aS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lS(t,e,n){return n=n!=null?n.concat([t]):null,ff(4,4,aS.bind(null,e,t),n)}function Tv(){}function uS(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_v(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cS(t,e){var n=wr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&_v(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hS(t,e,n){return Uo&21?(Hr(n,e)||(n=gT(),gt.lanes|=n,Bo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xn=!0),t.memoizedState=n)}function mR(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var r=Dp.transition;Dp.transition={};try{t(!1),e()}finally{qe=n,Dp.transition=r}}function dS(){return wr().memoizedState}function gR(t,e,n){var r=Fs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fS(t))pS(e,n);else if(n=GT(t,e,n,r),n!==null){var i=yn();qr(n,t,r,i),mS(n,e,r)}}function vR(t,e,n){var r=Fs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fS(t))pS(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Hr(a,o)){var l=e.interleaved;l===null?(i.next=i,fv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=GT(t,e,i,r),n!==null&&(i=yn(),qr(n,t,r,i),mS(n,e,r))}}function fS(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function pS(t,e){bu=Rd=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zg(t,n)}}var Pd={readContext:yr,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useInsertionEffect:Xt,useLayoutEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useMutableSource:Xt,useSyncExternalStore:Xt,useId:Xt,unstable_isNewReconciler:!1},_R={readContext:yr,useCallback:function(t,e){return si().memoizedState=[t,e===void 0?null:e],t},useContext:yr,useEffect:qy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Jh(4194308,4,aS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Jh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jh(4,2,t,e)},useMemo:function(t,e){var n=si();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=si();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=gR.bind(null,gt,t),[r.memoizedState,t]},useRef:function(t){var e=si();return t={current:t},e.memoizedState=t},useState:zy,useDebugValue:Tv,useDeferredValue:function(t){return si().memoizedState=t},useTransition:function(){var t=zy(!1),e=t[0];return t=mR.bind(null,t[1]),si().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gt,i=si();if(ht){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),$t===null)throw Error(J(349));Uo&30||ZT(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,qy(tS.bind(null,r,s,t),[t]),r.flags|=2048,tc(9,eS.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=si(),e=$t.identifierPrefix;if(ht){var n=Vi,r=Mi;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=pR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yR={readContext:yr,useCallback:uS,useContext:yr,useEffect:Ev,useImperativeHandle:lS,useInsertionEffect:sS,useLayoutEffect:oS,useMemo:cS,useReducer:Lp,useRef:iS,useState:function(){return Lp(ec)},useDebugValue:Tv,useDeferredValue:function(t){var e=wr();return hS(e,xt.memoizedState,t)},useTransition:function(){var t=Lp(ec)[0],e=wr().memoizedState;return[t,e]},useMutableSource:YT,useSyncExternalStore:XT,useId:dS,unstable_isNewReconciler:!1},wR={readContext:yr,useCallback:uS,useContext:yr,useEffect:Ev,useImperativeHandle:lS,useInsertionEffect:sS,useLayoutEffect:oS,useMemo:cS,useReducer:jp,useRef:iS,useState:function(){return jp(ec)},useDebugValue:Tv,useDeferredValue:function(t){var e=wr();return xt===null?e.memoizedState=t:hS(e,xt.memoizedState,t)},useTransition:function(){var t=jp(ec)[0],e=wr().memoizedState;return[t,e]},useMutableSource:YT,useSyncExternalStore:XT,useId:dS,unstable_isNewReconciler:!1};function Mr(t,e){if(t&&t.defaultProps){e=vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pf={isMounted:function(t){return(t=t._reactInternals)?na(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=yn(),i=Fs(t),s=zi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ms(t,s,i),e!==null&&(qr(e,t,i,r),Gh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=yn(),i=Fs(t),s=zi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ms(t,s,i),e!==null&&(qr(e,t,i,r),Gh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=yn(),r=Fs(t),i=zi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ms(t,i,r),e!==null&&(qr(e,t,r,n),Gh(e,t,r))}};function Hy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ku(n,r)||!Ku(i,s):!0}function gS(t,e,n){var r=!1,i=Hs,s=e.contextType;return typeof s=="object"&&s!==null?s=yr(s):(i=Nn(e)?Fo:an.current,r=e.contextTypes,s=(r=r!=null)?el(t,i):Hs),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Wy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pf.enqueueReplaceState(e,e.state,null)}function zm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},pv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yr(s):(s=Nn(e)?Fo:an.current,i.context=el(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Bm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&pf.enqueueReplaceState(i,i.state,null),kd(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function il(t,e){try{var n="",r=e;do n+=G1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Mp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ER=typeof WeakMap=="function"?WeakMap:Map;function vS(t,e,n){n=zi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Od||(Od=!0,eg=r),qm(t,e)},n}function _S(t,e,n){n=zi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){qm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){qm(t,e),typeof r!="function"&&(Vs===null?Vs=new Set([this]):Vs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ky(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ER;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=LR.bind(null,t,e,n),e.then(t,t))}function Gy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zi(-1,1),e.tag=2,Ms(n,e,1))),n.lanes|=1),t)}var TR=ns.ReactCurrentOwner,xn=!1;function _n(t,e,n,r){e.child=t===null?KT(e,null,n,r):nl(e,t.child,n,r)}function Jy(t,e,n,r,i){n=n.render;var s=e.ref;return Ka(e,i),r=yv(t,e,n,r,s,i),n=wv(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ji(t,e,i)):(ht&&n&&av(e),e.flags|=1,_n(t,e,r,i),e.child)}function Yy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Pv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,yS(t,e,s,r,i)):(t=ed(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ku,n(o,r)&&t.ref===e.ref)return Ji(t,e,i)}return e.flags|=1,t=$s(s,r),t.ref=e.ref,t.return=e,e.child=t}function yS(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ku(s,r)&&t.ref===e.ref)if(xn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(xn=!0);else return e.lanes=t.lanes,Ji(t,e,i)}return Hm(t,e,n,r,i)}function wS(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt($a,Bn),Bn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt($a,Bn),Bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,nt($a,Bn),Bn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,nt($a,Bn),Bn|=r;return _n(t,e,i,n),e.child}function ES(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hm(t,e,n,r,i){var s=Nn(n)?Fo:an.current;return s=el(e,s),Ka(e,i),n=yv(t,e,n,r,s,i),r=wv(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ji(t,e,i)):(ht&&r&&av(e),e.flags|=1,_n(t,e,n,i),e.child)}function Xy(t,e,n,r,i){if(Nn(n)){var s=!0;Td(e)}else s=!1;if(Ka(e,i),e.stateNode===null)Yh(t,e),gS(e,n,r),zm(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=yr(c):(c=Nn(n)?Fo:an.current,c=el(e,c));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Wy(e,o,r,c),Es=!1;var g=e.memoizedState;o.state=g,kd(e,r,o,i),l=e.memoizedState,a!==r||g!==l||On.current||Es?(typeof h=="function"&&(Bm(e,n,h,r),l=e.memoizedState),(a=Es||Hy(e,n,a,r,g,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,QT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Mr(e.type,a),o.props=c,p=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=yr(l):(l=Nn(n)?Fo:an.current,l=el(e,l));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==l)&&Wy(e,o,r,l),Es=!1,g=e.memoizedState,o.state=g,kd(e,r,o,i);var C=e.memoizedState;a!==p||g!==C||On.current||Es?(typeof y=="function"&&(Bm(e,n,y,r),C=e.memoizedState),(c=Es||Hy(e,n,c,r,g,C,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,C,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,C,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),o.props=r,o.state=C,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Wm(t,e,n,r,s,i)}function Wm(t,e,n,r,i,s){ES(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&My(e,n,!1),Ji(t,e,s);r=e.stateNode,TR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=nl(e,t.child,null,s),e.child=nl(e,null,a,s)):_n(t,e,a,s),e.memoizedState=r.state,i&&My(e,n,!0),e.child}function TS(t){var e=t.stateNode;e.pendingContext?jy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jy(t,e.context,!1),mv(t,e.containerInfo)}function Zy(t,e,n,r,i){return tl(),uv(i),e.flags|=256,_n(t,e,n,r),e.child}var Km={dehydrated:null,treeContext:null,retryLane:0};function Gm(t){return{baseLanes:t,cachePool:null,transitions:null}}function SS(t,e,n){var r=e.pendingProps,i=mt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),nt(mt,i&1),t===null)return $m(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=vf(o,r,0,null),t=jo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Gm(n),e.memoizedState=Km,t):Sv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return SR(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=$s(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=$s(a,s):(s=jo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Gm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Km,r}return s=t.child,t=s.sibling,r=$s(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sv(t,e){return e=vf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kh(t,e,n,r){return r!==null&&uv(r),nl(e,t.child,null,n),t=Sv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Mp(Error(J(422))),kh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=vf({mode:"visible",children:r.children},i,0,null),s=jo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&nl(e,t.child,null,o),e.child.memoizedState=Gm(o),e.memoizedState=Km,s);if(!(e.mode&1))return kh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(J(419)),r=Mp(s,r,void 0),kh(t,e,o,r)}if(a=(o&t.childLanes)!==0,xn||a){if(r=$t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Qi(t,i),qr(r,t,i,-1))}return Rv(),r=Mp(Error(J(421))),kh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=jR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Hn=js(i.nextSibling),Wn=e,ht=!0,Ur=null,t!==null&&(dr[fr++]=Mi,dr[fr++]=Vi,dr[fr++]=$o,Mi=t.id,Vi=t.overflow,$o=e),e=Sv(e,r.children),e.flags|=4096,e)}function ew(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Um(t.return,e,n)}function Vp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function bS(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(_n(t,e,r.children,n),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ew(t,n,e);else if(t.tag===19)ew(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(mt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cd(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cd(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vp(e,!0,n,null,s);break;case"together":Vp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Yh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ji(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=$s(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$s(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bR(t,e,n){switch(e.tag){case 3:TS(e),tl();break;case 5:JT(e);break;case 1:Nn(e.type)&&Td(e);break;case 4:mv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;nt(Id,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(mt,mt.current&1),e.flags|=128,null):n&e.child.childLanes?SS(t,e,n):(nt(mt,mt.current&1),t=Ji(t,e,n),t!==null?t.sibling:null);nt(mt,mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return bS(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),nt(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,wS(t,e,n)}return Ji(t,e,n)}var IS,Qm,AS,kS;IS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qm=function(){};AS=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Po(ui.current);var s=null;switch(n){case"input":i=vm(t,i),r=vm(t,r),s=[];break;case"select":i=vt({},i,{value:void 0}),r=vt({},r,{value:void 0}),s=[];break;case"textarea":i=wm(t,i),r=wm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=wd)}Tm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&($u.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&($u.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ot("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};kS=function(t,e,n,r){n!==r&&(e.flags|=4)};function eu(t,e){if(!ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function IR(t,e,n){var r=e.pendingProps;switch(lv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return Nn(e.type)&&Ed(),Zt(e),null;case 3:return r=e.stateNode,rl(),lt(On),lt(an),vv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ih(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ur!==null&&(rg(Ur),Ur=null))),Qm(t,e),Zt(e),null;case 5:gv(e);var i=Po(Xu.current);if(n=e.type,t!==null&&e.stateNode!=null)AS(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return Zt(e),null}if(t=Po(ui.current),Ih(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[oi]=e,r[Ju]=s,t=(e.mode&1)!==0,n){case"dialog":ot("cancel",r),ot("close",r);break;case"iframe":case"object":case"embed":ot("load",r);break;case"video":case"audio":for(i=0;i<cu.length;i++)ot(cu[i],r);break;case"source":ot("error",r);break;case"img":case"image":case"link":ot("error",r),ot("load",r);break;case"details":ot("toggle",r);break;case"input":uy(r,s),ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ot("invalid",r);break;case"textarea":hy(r,s),ot("invalid",r)}Tm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&bh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&bh(r.textContent,a,t),i=["children",""+a]):$u.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ot("scroll",r)}switch(n){case"input":gh(r),cy(r,s,!0);break;case"textarea":gh(r),dy(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=wd)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[oi]=e,t[Ju]=r,IS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Sm(n,r),n){case"dialog":ot("cancel",t),ot("close",t),i=r;break;case"iframe":case"object":case"embed":ot("load",t),i=r;break;case"video":case"audio":for(i=0;i<cu.length;i++)ot(cu[i],t);i=r;break;case"source":ot("error",t),i=r;break;case"img":case"image":case"link":ot("error",t),ot("load",t),i=r;break;case"details":ot("toggle",t),i=r;break;case"input":uy(t,r),i=vm(t,r),ot("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=vt({},r,{value:void 0}),ot("invalid",t);break;case"textarea":hy(t,r),i=wm(t,r),ot("invalid",t);break;default:i=r}Tm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?iT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Uu(t,l):typeof l=="number"&&Uu(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&($u.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ot("scroll",t):l!=null&&Kg(t,s,l,o))}switch(n){case"input":gh(t),cy(t,r,!1);break;case"textarea":gh(t),dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?za(t,!!r.multiple,s,!1):r.defaultValue!=null&&za(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=wd)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)kS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=Po(Xu.current),Po(ui.current),Ih(e)){if(r=e.stateNode,n=e.memoizedProps,r[oi]=e,(s=r.nodeValue!==n)&&(t=Wn,t!==null))switch(t.tag){case 3:bh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&bh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[oi]=e,e.stateNode=r}return Zt(e),null;case 13:if(lt(mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ht&&Hn!==null&&e.mode&1&&!(e.flags&128))HT(),tl(),e.flags|=98560,s=!1;else if(s=Ih(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[oi]=e}else tl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),s=!1}else Ur!==null&&(rg(Ur),Ur=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mt.current&1?Nt===0&&(Nt=3):Rv())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return rl(),Qm(t,e),t===null&&Gu(e.stateNode.containerInfo),Zt(e),null;case 10:return dv(e.type._context),Zt(e),null;case 17:return Nn(e.type)&&Ed(),Zt(e),null;case 19:if(lt(mt),s=e.memoizedState,s===null)return Zt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)eu(s,!1);else{if(Nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cd(t),o!==null){for(e.flags|=128,eu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(mt,mt.current&1|2),e.child}t=t.sibling}s.tail!==null&&St()>sl&&(e.flags|=128,r=!0,eu(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cd(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),eu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ht)return Zt(e),null}else 2*St()-s.renderingStartTime>sl&&n!==1073741824&&(e.flags|=128,r=!0,eu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=St(),e.sibling=null,n=mt.current,nt(mt,r?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return Cv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Bn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function AR(t,e){switch(lv(e),e.tag){case 1:return Nn(e.type)&&Ed(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rl(),lt(On),lt(an),vv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gv(e),null;case 13:if(lt(mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));tl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(mt),null;case 4:return rl(),null;case 10:return dv(e.type._context),null;case 22:case 23:return Cv(),null;case 24:return null;default:return null}}var Ch=!1,rn=!1,kR=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Fa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(t,e,r)}else n.current=null}function Jm(t,e,n){try{n()}catch(r){yt(t,e,r)}}var tw=!1;function CR(t,e){if(Nm=vd,t=OT(),ov(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,h=0,p=t,g=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)g=p,p=y;for(;;){if(p===t)break t;if(g===n&&++c===i&&(a=o),g===s&&++h===r&&(l=o),(y=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dm={focusedElem:t,selectionRange:n},vd=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var R=C.memoizedProps,O=C.memoizedState,A=e.stateNode,T=A.getSnapshotBeforeUpdate(e.elementType===e.type?R:Mr(e.type,R),O);A.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(D){yt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return C=tw,tw=!1,C}function Iu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Jm(e,n,s)}i=i.next}while(i!==r)}}function mf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ym(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function CS(t){var e=t.alternate;e!==null&&(t.alternate=null,CS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[oi],delete e[Ju],delete e[Mm],delete e[cR],delete e[hR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function RS(t){return t.tag===5||t.tag===3||t.tag===4}function nw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||RS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=wd));else if(r!==4&&(t=t.child,t!==null))for(Xm(t,e,n),t=t.sibling;t!==null;)Xm(t,e,n),t=t.sibling}function Zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zm(t,e,n),t=t.sibling;t!==null;)Zm(t,e,n),t=t.sibling}var zt=null,Vr=!1;function gs(t,e,n){for(n=n.child;n!==null;)PS(t,e,n),n=n.sibling}function PS(t,e,n){if(li&&typeof li.onCommitFiberUnmount=="function")try{li.onCommitFiberUnmount(af,n)}catch{}switch(n.tag){case 5:rn||Fa(n,e);case 6:var r=zt,i=Vr;zt=null,gs(t,e,n),zt=r,Vr=i,zt!==null&&(Vr?(t=zt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(Vr?(t=zt,n=n.stateNode,t.nodeType===8?xp(t.parentNode,n):t.nodeType===1&&xp(t,n),Hu(t)):xp(zt,n.stateNode));break;case 4:r=zt,i=Vr,zt=n.stateNode.containerInfo,Vr=!0,gs(t,e,n),zt=r,Vr=i;break;case 0:case 11:case 14:case 15:if(!rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Jm(n,e,o),i=i.next}while(i!==r)}gs(t,e,n);break;case 1:if(!rn&&(Fa(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){yt(n,e,a)}gs(t,e,n);break;case 21:gs(t,e,n);break;case 22:n.mode&1?(rn=(r=rn)||n.memoizedState!==null,gs(t,e,n),rn=r):gs(t,e,n);break;default:gs(t,e,n)}}function rw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new kR),e.forEach(function(r){var i=MR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:zt=a.stateNode,Vr=!1;break e;case 3:zt=a.stateNode.containerInfo,Vr=!0;break e;case 4:zt=a.stateNode.containerInfo,Vr=!0;break e}a=a.return}if(zt===null)throw Error(J(160));PS(s,o,i),zt=null,Vr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){yt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)xS(e,t),e=e.sibling}function xS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lr(e,t),ii(t),r&4){try{Iu(3,t,t.return),mf(3,t)}catch(R){yt(t,t.return,R)}try{Iu(5,t,t.return)}catch(R){yt(t,t.return,R)}}break;case 1:Lr(e,t),ii(t),r&512&&n!==null&&Fa(n,n.return);break;case 5:if(Lr(e,t),ii(t),r&512&&n!==null&&Fa(n,n.return),t.flags&32){var i=t.stateNode;try{Uu(i,"")}catch(R){yt(t,t.return,R)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ZE(i,s),Sm(a,o);var c=Sm(a,s);for(o=0;o<l.length;o+=2){var h=l[o],p=l[o+1];h==="style"?iT(i,p):h==="dangerouslySetInnerHTML"?nT(i,p):h==="children"?Uu(i,p):Kg(i,h,p,c)}switch(a){case"input":_m(i,s);break;case"textarea":eT(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?za(i,!!s.multiple,y,!1):g!==!!s.multiple&&(s.defaultValue!=null?za(i,!!s.multiple,s.defaultValue,!0):za(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ju]=s}catch(R){yt(t,t.return,R)}}break;case 6:if(Lr(e,t),ii(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(R){yt(t,t.return,R)}}break;case 3:if(Lr(e,t),ii(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Hu(e.containerInfo)}catch(R){yt(t,t.return,R)}break;case 4:Lr(e,t),ii(t);break;case 13:Lr(e,t),ii(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Av=St())),r&4&&rw(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(rn=(c=rn)||h,Lr(e,t),rn=c):Lr(e,t),ii(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ne=t,h=t.child;h!==null;){for(p=ne=h;ne!==null;){switch(g=ne,y=g.child,g.tag){case 0:case 11:case 14:case 15:Iu(4,g,g.return);break;case 1:Fa(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(R){yt(r,n,R)}}break;case 5:Fa(g,g.return);break;case 22:if(g.memoizedState!==null){sw(p);continue}}y!==null?(y.return=g,ne=y):sw(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=rT("display",o))}catch(R){yt(t,t.return,R)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(R){yt(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Lr(e,t),ii(t),r&4&&rw(t);break;case 21:break;default:Lr(e,t),ii(t)}}function ii(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(RS(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Uu(i,""),r.flags&=-33);var s=nw(t);Zm(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nw(t);Xm(t,a,o);break;default:throw Error(J(161))}}catch(l){yt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function RR(t,e,n){ne=t,OS(t)}function OS(t,e,n){for(var r=(t.mode&1)!==0;ne!==null;){var i=ne,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ch;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||rn;a=Ch;var c=rn;if(Ch=o,(rn=l)&&!c)for(ne=i;ne!==null;)o=ne,l=o.child,o.tag===22&&o.memoizedState!==null?ow(i):l!==null?(l.return=o,ne=l):ow(i);for(;s!==null;)ne=s,OS(s),s=s.sibling;ne=i,Ch=a,rn=c}iw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ne=s):iw(t)}}function iw(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:rn||mf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!rn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&By(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}By(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Hu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}rn||e.flags&512&&Ym(e)}catch(g){yt(e,e.return,g)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function sw(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function ow(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mf(4,e)}catch(l){yt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){yt(e,i,l)}}var s=e.return;try{Ym(e)}catch(l){yt(e,s,l)}break;case 5:var o=e.return;try{Ym(e)}catch(l){yt(e,o,l)}}}catch(l){yt(e,e.return,l)}if(e===t){ne=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ne=a;break}ne=e.return}}var PR=Math.ceil,xd=ns.ReactCurrentDispatcher,bv=ns.ReactCurrentOwner,gr=ns.ReactCurrentBatchConfig,Ve=0,$t=null,At=null,Wt=0,Bn=0,$a=Zs(0),Nt=0,nc=null,Bo=0,gf=0,Iv=0,Au=null,Rn=null,Av=0,sl=1/0,Di=null,Od=!1,eg=null,Vs=null,Rh=!1,xs=null,Nd=0,ku=0,tg=null,Xh=-1,Zh=0;function yn(){return Ve&6?St():Xh!==-1?Xh:Xh=St()}function Fs(t){return t.mode&1?Ve&2&&Wt!==0?Wt&-Wt:fR.transition!==null?(Zh===0&&(Zh=gT()),Zh):(t=qe,t!==0||(t=window.event,t=t===void 0?16:ST(t.type)),t):1}function qr(t,e,n,r){if(50<ku)throw ku=0,tg=null,Error(J(185));yc(t,n,r),(!(Ve&2)||t!==$t)&&(t===$t&&(!(Ve&2)&&(gf|=n),Nt===4&&bs(t,Wt)),Dn(t,r),n===1&&Ve===0&&!(e.mode&1)&&(sl=St()+500,df&&eo()))}function Dn(t,e){var n=t.callbackNode;fC(t,e);var r=gd(t,t===$t?Wt:0);if(r===0)n!==null&&my(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&my(n),e===1)t.tag===0?dR(aw.bind(null,t)):BT(aw.bind(null,t)),lR(function(){!(Ve&6)&&eo()}),n=null;else{switch(vT(r)){case 1:n=Xg;break;case 4:n=pT;break;case 16:n=md;break;case 536870912:n=mT;break;default:n=md}n=$S(n,NS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function NS(t,e){if(Xh=-1,Zh=0,Ve&6)throw Error(J(327));var n=t.callbackNode;if(Ga()&&t.callbackNode!==n)return null;var r=gd(t,t===$t?Wt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Dd(t,r);else{e=r;var i=Ve;Ve|=2;var s=LS();($t!==t||Wt!==e)&&(Di=null,sl=St()+500,Lo(t,e));do try{NR();break}catch(a){DS(t,a)}while(!0);hv(),xd.current=s,Ve=i,At!==null?e=0:($t=null,Wt=0,e=Nt)}if(e!==0){if(e===2&&(i=Cm(t),i!==0&&(r=i,e=ng(t,i))),e===1)throw n=nc,Lo(t,0),bs(t,r),Dn(t,St()),n;if(e===6)bs(t,r);else{if(i=t.current.alternate,!(r&30)&&!xR(i)&&(e=Dd(t,r),e===2&&(s=Cm(t),s!==0&&(r=s,e=ng(t,s))),e===1))throw n=nc,Lo(t,0),bs(t,r),Dn(t,St()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:So(t,Rn,Di);break;case 3:if(bs(t,r),(r&130023424)===r&&(e=Av+500-St(),10<e)){if(gd(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){yn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=jm(So.bind(null,t,Rn,Di),e);break}So(t,Rn,Di);break;case 4:if(bs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PR(r/1960))-r,10<r){t.timeoutHandle=jm(So.bind(null,t,Rn,Di),r);break}So(t,Rn,Di);break;case 5:So(t,Rn,Di);break;default:throw Error(J(329))}}}return Dn(t,St()),t.callbackNode===n?NS.bind(null,t):null}function ng(t,e){var n=Au;return t.current.memoizedState.isDehydrated&&(Lo(t,e).flags|=256),t=Dd(t,e),t!==2&&(e=Rn,Rn=n,e!==null&&rg(e)),t}function rg(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function xR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Hr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bs(t,e){for(e&=~Iv,e&=~gf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),r=1<<n;t[n]=-1,e&=~r}}function aw(t){if(Ve&6)throw Error(J(327));Ga();var e=gd(t,0);if(!(e&1))return Dn(t,St()),null;var n=Dd(t,e);if(t.tag!==0&&n===2){var r=Cm(t);r!==0&&(e=r,n=ng(t,r))}if(n===1)throw n=nc,Lo(t,0),bs(t,e),Dn(t,St()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,So(t,Rn,Di),Dn(t,St()),null}function kv(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(sl=St()+500,df&&eo())}}function zo(t){xs!==null&&xs.tag===0&&!(Ve&6)&&Ga();var e=Ve;Ve|=1;var n=gr.transition,r=qe;try{if(gr.transition=null,qe=1,t)return t()}finally{qe=r,gr.transition=n,Ve=e,!(Ve&6)&&eo()}}function Cv(){Bn=$a.current,lt($a)}function Lo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,aR(n)),At!==null)for(n=At.return;n!==null;){var r=n;switch(lv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ed();break;case 3:rl(),lt(On),lt(an),vv();break;case 5:gv(r);break;case 4:rl();break;case 13:lt(mt);break;case 19:lt(mt);break;case 10:dv(r.type._context);break;case 22:case 23:Cv()}n=n.return}if($t=t,At=t=$s(t.current,null),Wt=Bn=e,Nt=0,nc=null,Iv=gf=Bo=0,Rn=Au=null,Ro!==null){for(e=0;e<Ro.length;e++)if(n=Ro[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ro=null}return t}function DS(t,e){do{var n=At;try{if(hv(),Qh.current=Pd,Rd){for(var r=gt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rd=!1}if(Uo=0,Ft=xt=gt=null,bu=!1,Zu=0,bv.current=null,n===null||n.return===null){Nt=1,nc=e,At=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,h=a,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Gy(o);if(y!==null){y.flags&=-257,Qy(y,o,a,s,e),y.mode&1&&Ky(s,c,e),e=y,l=c;var C=e.updateQueue;if(C===null){var R=new Set;R.add(l),e.updateQueue=R}else C.add(l);break e}else{if(!(e&1)){Ky(s,c,e),Rv();break e}l=Error(J(426))}}else if(ht&&a.mode&1){var O=Gy(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),Qy(O,o,a,s,e),uv(il(l,a));break e}}s=l=il(l,a),Nt!==4&&(Nt=2),Au===null?Au=[s]:Au.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=vS(s,l,e);Uy(s,A);break e;case 1:a=l;var T=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof T.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Vs===null||!Vs.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=_S(s,a,e);Uy(s,D);break e}}s=s.return}while(s!==null)}MS(n)}catch(B){e=B,At===n&&n!==null&&(At=n=n.return);continue}break}while(!0)}function LS(){var t=xd.current;return xd.current=Pd,t===null?Pd:t}function Rv(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),$t===null||!(Bo&268435455)&&!(gf&268435455)||bs($t,Wt)}function Dd(t,e){var n=Ve;Ve|=2;var r=LS();($t!==t||Wt!==e)&&(Di=null,Lo(t,e));do try{OR();break}catch(i){DS(t,i)}while(!0);if(hv(),Ve=n,xd.current=r,At!==null)throw Error(J(261));return $t=null,Wt=0,Nt}function OR(){for(;At!==null;)jS(At)}function NR(){for(;At!==null&&!iC();)jS(At)}function jS(t){var e=FS(t.alternate,t,Bn);t.memoizedProps=t.pendingProps,e===null?MS(t):At=e,bv.current=null}function MS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AR(n,e),n!==null){n.flags&=32767,At=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,At=null;return}}else if(n=IR(n,e,Bn),n!==null){At=n;return}if(e=e.sibling,e!==null){At=e;return}At=e=t}while(e!==null);Nt===0&&(Nt=5)}function So(t,e,n){var r=qe,i=gr.transition;try{gr.transition=null,qe=1,DR(t,e,n,r)}finally{gr.transition=i,qe=r}return null}function DR(t,e,n,r){do Ga();while(xs!==null);if(Ve&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(pC(t,s),t===$t&&(At=$t=null,Wt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rh||(Rh=!0,$S(md,function(){return Ga(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gr.transition,gr.transition=null;var o=qe;qe=1;var a=Ve;Ve|=4,bv.current=null,CR(t,n),xS(n,t),eR(Dm),vd=!!Nm,Dm=Nm=null,t.current=n,RR(n),sC(),Ve=a,qe=o,gr.transition=s}else t.current=n;if(Rh&&(Rh=!1,xs=t,Nd=i),s=t.pendingLanes,s===0&&(Vs=null),lC(n.stateNode),Dn(t,St()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Od)throw Od=!1,t=eg,eg=null,t;return Nd&1&&t.tag!==0&&Ga(),s=t.pendingLanes,s&1?t===tg?ku++:(ku=0,tg=t):ku=0,eo(),null}function Ga(){if(xs!==null){var t=vT(Nd),e=gr.transition,n=qe;try{if(gr.transition=null,qe=16>t?16:t,xs===null)var r=!1;else{if(t=xs,xs=null,Nd=0,Ve&6)throw Error(J(331));var i=Ve;for(Ve|=4,ne=t.current;ne!==null;){var s=ne,o=s.child;if(ne.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ne=c;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:Iu(8,h,s)}var p=h.child;if(p!==null)p.return=h,ne=p;else for(;ne!==null;){h=ne;var g=h.sibling,y=h.return;if(CS(h),h===c){ne=null;break}if(g!==null){g.return=y,ne=g;break}ne=y}}}var C=s.alternate;if(C!==null){var R=C.child;if(R!==null){C.child=null;do{var O=R.sibling;R.sibling=null,R=O}while(R!==null)}}ne=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ne=o;else e:for(;ne!==null;){if(s=ne,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Iu(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,ne=A;break e}ne=s.return}}var T=t.current;for(ne=T;ne!==null;){o=ne;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ne=S;else e:for(o=T;ne!==null;){if(a=ne,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mf(9,a)}}catch(B){yt(a,a.return,B)}if(a===o){ne=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,ne=D;break e}ne=a.return}}if(Ve=i,eo(),li&&typeof li.onPostCommitFiberRoot=="function")try{li.onPostCommitFiberRoot(af,t)}catch{}r=!0}return r}finally{qe=n,gr.transition=e}}return!1}function lw(t,e,n){e=il(n,e),e=vS(t,e,1),t=Ms(t,e,1),e=yn(),t!==null&&(yc(t,1,e),Dn(t,e))}function yt(t,e,n){if(t.tag===3)lw(t,t,n);else for(;e!==null;){if(e.tag===3){lw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Vs===null||!Vs.has(r))){t=il(n,t),t=_S(e,t,1),e=Ms(e,t,1),t=yn(),e!==null&&(yc(e,1,t),Dn(e,t));break}}e=e.return}}function LR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&n,$t===t&&(Wt&n)===n&&(Nt===4||Nt===3&&(Wt&130023424)===Wt&&500>St()-Av?Lo(t,0):Iv|=n),Dn(t,e)}function VS(t,e){e===0&&(t.mode&1?(e=yh,yh<<=1,!(yh&130023424)&&(yh=4194304)):e=1);var n=yn();t=Qi(t,e),t!==null&&(yc(t,e,n),Dn(t,n))}function jR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),VS(t,n)}function MR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),VS(t,n)}var FS;FS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||On.current)xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xn=!1,bR(t,e,n);xn=!!(t.flags&131072)}else xn=!1,ht&&e.flags&1048576&&zT(e,bd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Yh(t,e),t=e.pendingProps;var i=el(e,an.current);Ka(e,n),i=yv(null,e,r,t,i,n);var s=wv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Nn(r)?(s=!0,Td(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pv(e),i.updater=pf,e.stateNode=i,i._reactInternals=e,zm(e,r,t,n),e=Wm(null,e,r,!0,s,n)):(e.tag=0,ht&&s&&av(e),_n(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Yh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=FR(r),t=Mr(r,t),i){case 0:e=Hm(null,e,r,t,n);break e;case 1:e=Xy(null,e,r,t,n);break e;case 11:e=Jy(null,e,r,t,n);break e;case 14:e=Yy(null,e,r,Mr(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mr(r,i),Hm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mr(r,i),Xy(t,e,r,i,n);case 3:e:{if(TS(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,QT(t,e),kd(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=il(Error(J(423)),e),e=Zy(t,e,r,n,i);break e}else if(r!==i){i=il(Error(J(424)),e),e=Zy(t,e,r,n,i);break e}else for(Hn=js(e.stateNode.containerInfo.firstChild),Wn=e,ht=!0,Ur=null,n=KT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(tl(),r===i){e=Ji(t,e,n);break e}_n(t,e,r,n)}e=e.child}return e;case 5:return JT(e),t===null&&$m(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Lm(r,i)?o=null:s!==null&&Lm(r,s)&&(e.flags|=32),ES(t,e),_n(t,e,o,n),e.child;case 6:return t===null&&$m(e),null;case 13:return SS(t,e,n);case 4:return mv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=nl(e,null,r,n):_n(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mr(r,i),Jy(t,e,r,i,n);case 7:return _n(t,e,e.pendingProps,n),e.child;case 8:return _n(t,e,e.pendingProps.children,n),e.child;case 12:return _n(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,nt(Id,r._currentValue),r._currentValue=o,s!==null)if(Hr(s.value,o)){if(s.children===i.children&&!On.current){e=Ji(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=zi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?l.next=l:(l.next=h.next,h.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Um(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Um(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}_n(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ka(e,n),i=yr(i),r=r(i),e.flags|=1,_n(t,e,r,n),e.child;case 14:return r=e.type,i=Mr(r,e.pendingProps),i=Mr(r.type,i),Yy(t,e,r,i,n);case 15:return yS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mr(r,i),Yh(t,e),e.tag=1,Nn(r)?(t=!0,Td(e)):t=!1,Ka(e,n),gS(e,r,i),zm(e,r,i,n),Wm(null,e,r,!0,t,n);case 19:return bS(t,e,n);case 22:return wS(t,e,n)}throw Error(J(156,e.tag))};function $S(t,e){return fT(t,e)}function VR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,e,n,r){return new VR(t,e,n,r)}function Pv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function FR(t){if(typeof t=="function")return Pv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qg)return 11;if(t===Jg)return 14}return 2}function $s(t,e){var n=t.alternate;return n===null?(n=mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ed(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Pv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Pa:return jo(n.children,i,s,e);case Gg:o=8,i|=8;break;case fm:return t=mr(12,n,e,i|2),t.elementType=fm,t.lanes=s,t;case pm:return t=mr(13,n,e,i),t.elementType=pm,t.lanes=s,t;case mm:return t=mr(19,n,e,i),t.elementType=mm,t.lanes=s,t;case JE:return vf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case GE:o=10;break e;case QE:o=9;break e;case Qg:o=11;break e;case Jg:o=14;break e;case ws:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=mr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function jo(t,e,n,r){return t=mr(7,t,r,e),t.lanes=n,t}function vf(t,e,n,r){return t=mr(22,t,r,e),t.elementType=JE,t.lanes=n,t.stateNode={isHidden:!1},t}function Fp(t,e,n){return t=mr(6,t,null,e),t.lanes=n,t}function $p(t,e,n){return e=mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $R(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wp(0),this.expirationTimes=wp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function xv(t,e,n,r,i,s,o,a,l){return t=new $R(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=mr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pv(s),t}function UR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ra,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function US(t){if(!t)return Hs;t=t._reactInternals;e:{if(na(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Nn(n))return UT(t,n,e)}return e}function BS(t,e,n,r,i,s,o,a,l){return t=xv(n,r,!0,t,i,s,o,a,l),t.context=US(null),n=t.current,r=yn(),i=Fs(n),s=zi(r,i),s.callback=e??null,Ms(n,s,i),t.current.lanes=i,yc(t,i,r),Dn(t,r),t}function _f(t,e,n,r){var i=e.current,s=yn(),o=Fs(i);return n=US(n),e.context===null?e.context=n:e.pendingContext=n,e=zi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ms(i,e,o),t!==null&&(qr(t,i,o,s),Gh(t,i,o)),o}function Ld(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ov(t,e){uw(t,e),(t=t.alternate)&&uw(t,e)}function BR(){return null}var zS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Nv(t){this._internalRoot=t}yf.prototype.render=Nv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));_f(t,e,null,null)};yf.prototype.unmount=Nv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;zo(function(){_f(null,t,null,null)}),e[Gi]=null}};function yf(t){this._internalRoot=t}yf.prototype.unstable_scheduleHydration=function(t){if(t){var e=wT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ss.length&&e!==0&&e<Ss[n].priority;n++);Ss.splice(n,0,t),n===0&&TT(t)}};function Dv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cw(){}function zR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Ld(o);s.call(c)}}var o=BS(e,r,t,0,null,!1,!1,"",cw);return t._reactRootContainer=o,t[Gi]=o.current,Gu(t.nodeType===8?t.parentNode:t),zo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Ld(l);a.call(c)}}var l=xv(t,0,!1,null,null,!1,!1,"",cw);return t._reactRootContainer=l,t[Gi]=l.current,Gu(t.nodeType===8?t.parentNode:t),zo(function(){_f(e,l,n,r)}),l}function Ef(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ld(o);a.call(l)}}_f(e,o,t,i)}else o=zR(n,e,t,i,r);return Ld(o)}_T=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uu(e.pendingLanes);n!==0&&(Zg(e,n|1),Dn(e,St()),!(Ve&6)&&(sl=St()+500,eo()))}break;case 13:zo(function(){var r=Qi(t,1);if(r!==null){var i=yn();qr(r,t,1,i)}}),Ov(t,1)}};ev=function(t){if(t.tag===13){var e=Qi(t,134217728);if(e!==null){var n=yn();qr(e,t,134217728,n)}Ov(t,134217728)}};yT=function(t){if(t.tag===13){var e=Fs(t),n=Qi(t,e);if(n!==null){var r=yn();qr(n,t,e,r)}Ov(t,e)}};wT=function(){return qe};ET=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};Im=function(t,e,n){switch(e){case"input":if(_m(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=hf(r);if(!i)throw Error(J(90));XE(r),_m(r,i)}}}break;case"textarea":eT(t,n);break;case"select":e=n.value,e!=null&&za(t,!!n.multiple,e,!1)}};aT=kv;lT=zo;var qR={usingClientEntryPoint:!1,Events:[Ec,Da,hf,sT,oT,kv]},tu={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},HR={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ns.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hT(t),t===null?null:t.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||BR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{af=Ph.inject(HR),li=Ph}catch{}}tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qR;tr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dv(e))throw Error(J(200));return UR(t,e,null,n)};tr.createRoot=function(t,e){if(!Dv(t))throw Error(J(299));var n=!1,r="",i=zS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=xv(t,1,!1,null,null,n,!1,r,i),t[Gi]=e.current,Gu(t.nodeType===8?t.parentNode:t),new Nv(e)};tr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=hT(e),t=t===null?null:t.stateNode,t};tr.flushSync=function(t){return zo(t)};tr.hydrate=function(t,e,n){if(!wf(e))throw Error(J(200));return Ef(null,t,e,!0,n)};tr.hydrateRoot=function(t,e,n){if(!Dv(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=zS;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=BS(e,null,t,1,n??null,i,!1,s,o),t[Gi]=e.current,Gu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new yf(e)};tr.render=function(t,e,n){if(!wf(e))throw Error(J(200));return Ef(null,t,e,!1,n)};tr.unmountComponentAtNode=function(t){if(!wf(t))throw Error(J(40));return t._reactRootContainer?(zo(function(){Ef(null,null,t,!1,function(){t._reactRootContainer=null,t[Gi]=null})}),!0):!1};tr.unstable_batchedUpdates=kv;tr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wf(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Ef(t,e,n,!1,r)};tr.version="18.3.1-next-f1338f8080-20240426";function qS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(qS)}catch(t){console.error(t)}}qS(),qE.exports=tr;var Lv=qE.exports;const WR=xE(Lv),KR=PE({__proto__:null,default:WR},[Lv]);var hw=Lv;hm.createRoot=hw.createRoot,hm.hydrateRoot=hw.hydrateRoot;var dw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},GR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},WS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4;let g=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(g=64)),r.push(n[h],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(HS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||p==null)throw new QR;const g=s<<2|a>>4;if(r.push(g),c!==64){const y=a<<4&240|c>>2;if(r.push(y),p!==64){const C=c<<6&192|p;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class QR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JR=function(t){const e=HS(t);return WS.encodeByteArray(e,!0)},jd=function(t){return JR(t).replace(/\./g,"")},KS=function(t){try{return WS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=()=>YR().__FIREBASE_DEFAULTS__,ZR=()=>{if(typeof process>"u"||typeof dw>"u")return;const t=dw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},eP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&KS(t[1]);return e&&JSON.parse(e)},Tf=()=>{try{return XR()||ZR()||eP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},GS=t=>{var e,n;return(n=(e=Tf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tP=t=>{const e=GS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},QS=()=>{var t;return(t=Tf())===null||t===void 0?void 0:t.config},JS=t=>{var e;return(e=Tf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nP=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jd(JSON.stringify(n)),jd(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function iP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function sP(){var t;const e=(t=Tf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function oP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aP(){const t=ln();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function lP(){return!sP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XS(){try{return typeof indexedDB=="object"}catch{return!1}}function ZS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function uP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="FirebaseError";class Gr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=cP,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ra.prototype.create)}}class ra{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?hP(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gr(i,a,r)}}function hP(t,e){return t.replace(dP,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const dP=/\{\$([^}]+)}/g;function fP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function rc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(fw(s)&&fw(o)){if(!rc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function du(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function pP(t,e){const n=new mP(t,e);return n.subscribe.bind(n)}class mP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");gP(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Up),i.error===void 0&&(i.error=Up),i.complete===void 0&&(i.complete=Up);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Up(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=1e3,_P=2,yP=4*60*60*1e3,wP=.5;function pw(t,e=vP,n=_P){const r=e*Math.pow(n,t),i=Math.round(wP*r*(Math.random()-.5)*2);return Math.min(yP,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){return t&&t._delegate?t._delegate:t}class Wr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new nP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(SP(e))try{this.getOrInitializeService({instanceIdentifier:bo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bo){return this.instances.has(e)}getOptions(e=bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=bo){return this.component?this.component.multipleInstances?e:bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TP(t){return t===bo?void 0:t}function SP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new EP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const IP={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},AP=De.INFO,kP={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},CP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=kP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sf{constructor(e){this.name=e,this._logLevel=AP,this._logHandler=CP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const RP=(t,e)=>e.some(n=>t instanceof n);let mw,gw;function PP(){return mw||(mw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xP(){return gw||(gw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eb=new WeakMap,ig=new WeakMap,tb=new WeakMap,Bp=new WeakMap,jv=new WeakMap;function OP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Us(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&eb.set(n,t)}).catch(()=>{}),jv.set(e,t),e}function NP(t){if(ig.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ig.set(t,e)}let sg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ig.get(t);if(e==="objectStoreNames")return t.objectStoreNames||tb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Us(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DP(t){sg=t(sg)}function LP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zp(this),e,...n);return tb.set(r,e.sort?e.sort():[e]),Us(r)}:xP().includes(t)?function(...e){return t.apply(zp(this),e),Us(eb.get(this))}:function(...e){return Us(t.apply(zp(this),e))}}function jP(t){return typeof t=="function"?LP(t):(t instanceof IDBTransaction&&NP(t),RP(t,PP())?new Proxy(t,sg):t)}function Us(t){if(t instanceof IDBRequest)return OP(t);if(Bp.has(t))return Bp.get(t);const e=jP(t);return e!==t&&(Bp.set(t,e),jv.set(e,t)),e}const zp=t=>jv.get(t);function nb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Us(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Us(o.result),l.oldVersion,l.newVersion,Us(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const MP=["get","getKey","getAll","getAllKeys","count"],VP=["put","add","delete","clear"],qp=new Map;function vw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(qp.get(e))return qp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=VP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||MP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return qp.set(e,s),s}DP(t=>({...t,get:(e,n,r)=>vw(e,n)||t.get(e,n,r),has:(e,n)=>!!vw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($P(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $P(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const og="@firebase/app",_w="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Sf("@firebase/app"),UP="@firebase/app-compat",BP="@firebase/analytics-compat",zP="@firebase/analytics",qP="@firebase/app-check-compat",HP="@firebase/app-check",WP="@firebase/auth",KP="@firebase/auth-compat",GP="@firebase/database",QP="@firebase/database-compat",JP="@firebase/functions",YP="@firebase/functions-compat",XP="@firebase/installations",ZP="@firebase/installations-compat",ex="@firebase/messaging",tx="@firebase/messaging-compat",nx="@firebase/performance",rx="@firebase/performance-compat",ix="@firebase/remote-config",sx="@firebase/remote-config-compat",ox="@firebase/storage",ax="@firebase/storage-compat",lx="@firebase/firestore",ux="@firebase/vertexai-preview",cx="@firebase/firestore-compat",hx="firebase",dx="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="[DEFAULT]",fx={[og]:"fire-core",[UP]:"fire-core-compat",[zP]:"fire-analytics",[BP]:"fire-analytics-compat",[HP]:"fire-app-check",[qP]:"fire-app-check-compat",[WP]:"fire-auth",[KP]:"fire-auth-compat",[GP]:"fire-rtdb",[QP]:"fire-rtdb-compat",[JP]:"fire-fn",[YP]:"fire-fn-compat",[XP]:"fire-iid",[ZP]:"fire-iid-compat",[ex]:"fire-fcm",[tx]:"fire-fcm-compat",[nx]:"fire-perf",[rx]:"fire-perf-compat",[ix]:"fire-rc",[sx]:"fire-rc-compat",[ox]:"fire-gcs",[ax]:"fire-gcs-compat",[lx]:"fire-fst",[cx]:"fire-fst-compat",[ux]:"fire-vertex","fire-js":"fire-js",[hx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md=new Map,px=new Map,lg=new Map;function yw(t,e){try{t.container.addComponent(e)}catch(n){Yi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gi(t){const e=t.name;if(lg.has(e))return Yi.debug(`There were multiple attempts to register component ${e}.`),!1;lg.set(e,t);for(const n of Md.values())yw(n,t);for(const n of px.values())yw(n,t);return!0}function ia(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ai(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bs=new ra("app","Firebase",mx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tl=dx;function rb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ag,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Bs.create("bad-app-name",{appName:String(i)});if(n||(n=QS()),!n)throw Bs.create("no-options");const s=Md.get(i);if(s){if(rc(n,s.options)&&rc(r,s.config))return s;throw Bs.create("duplicate-app",{appName:i})}const o=new bP(i);for(const l of lg.values())o.addComponent(l);const a=new gx(n,r,o);return Md.set(i,a),a}function Mv(t=ag){const e=Md.get(t);if(!e&&t===ag&&QS())return rb();if(!e)throw Bs.create("no-app",{appName:t});return e}function vr(t,e,n){var r;let i=(r=fx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yi.warn(a.join(" "));return}gi(new Wr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="firebase-heartbeat-database",_x=1,ic="firebase-heartbeat-store";let Hp=null;function ib(){return Hp||(Hp=nb(vx,_x,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ic)}catch(n){console.warn(n)}}}}).catch(t=>{throw Bs.create("idb-open",{originalErrorMessage:t.message})})),Hp}async function yx(t){try{const n=(await ib()).transaction(ic),r=await n.objectStore(ic).get(sb(t));return await n.done,r}catch(e){if(e instanceof Gr)Yi.warn(e.message);else{const n=Bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Yi.warn(n.message)}}}async function ww(t,e){try{const r=(await ib()).transaction(ic,"readwrite");await r.objectStore(ic).put(e,sb(t)),await r.done}catch(n){if(n instanceof Gr)Yi.warn(n.message);else{const r=Bs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Yi.warn(r.message)}}}function sb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=1024,Ex=30*24*60*60*1e3;class Tx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ew();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Ex}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Yi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ew(),{heartbeatsToSend:r,unsentEntries:i}=Sx(this._heartbeatsCache.heartbeats),s=jd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Yi.warn(n),""}}}function Ew(){return new Date().toISOString().substring(0,10)}function Sx(t,e=wx){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Tw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Tw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XS()?ZS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yx(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ww(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return ww(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Tw(t){return jd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t){gi(new Wr("platform-logger",e=>new FP(e),"PRIVATE")),gi(new Wr("heartbeat",e=>new Tx(e),"PRIVATE")),vr(og,_w,t),vr(og,_w,"esm2017"),vr("fire-js","")}Ix("");function Vv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function ob(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ax=ob,ab=new ra("auth","Firebase",ob());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd=new Sf("@firebase/auth");function kx(t,...e){Vd.logLevel<=De.WARN&&Vd.warn(`Auth (${Tl}): ${t}`,...e)}function td(t,...e){Vd.logLevel<=De.ERROR&&Vd.error(`Auth (${Tl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(t,...e){throw Fv(t,...e)}function ci(t,...e){return Fv(t,...e)}function lb(t,e,n){const r=Object.assign(Object.assign({},Ax()),{[e]:n});return new ra("auth","Firebase",r).create(e,{appName:t.name})}function qi(t){return lb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Fv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ab.create(t,...e)}function me(t,e,...n){if(!t)throw Fv(e,...n)}function Fi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw td(e),new Error(e)}function Xi(t,e){t||Fi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Cx(){return Sw()==="http:"||Sw()==="https:"}function Sw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Cx()||YS()||"connection"in navigator)?navigator.onLine:!0}function Px(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xi(n>e,"Short delay should be less than long delay!"),this.isMobile=iP()||oP()}get(){return Rx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $v(t,e){Xi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=new bc(3e4,6e4);function to(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function no(t,e,n,r,i={}){return cb(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Sc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),ub.fetch()(hb(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function cb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},xx),e);try{const i=new Dx(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw xh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw xh(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw xh(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw xh(t,"user-disabled",o);const h=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw lb(t,h,c);Kr(t,h)}}catch(i){if(i instanceof Gr)throw i;Kr(t,"network-request-failed",{message:String(i)})}}async function Ic(t,e,n,r,i={}){const s=await no(t,e,n,r,i);return"mfaPendingCredential"in s&&Kr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function hb(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?$v(t.config,i):`${t.config.apiScheme}://${i}`}function Nx(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Dx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ci(this.auth,"network-request-failed")),Ox.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=ci(t,e,r);return i.customData._tokenResponse=n,i}function bw(t){return t!==void 0&&t.enterprise!==void 0}class Lx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Nx(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function jx(t,e){return no(t,"GET","/v2/recaptchaConfig",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(t,e){return no(t,"POST","/v1/accounts:delete",e)}async function db(t,e){return no(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Vx(t,e=!1){const n=un(t),r=await n.getIdToken(e),i=Uv(r);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Cu(Wp(i.auth_time)),issuedAtTime:Cu(Wp(i.iat)),expirationTime:Cu(Wp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wp(t){return Number(t)*1e3}function Uv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return td("JWT malformed, contained fewer than 3 sections"),null;try{const i=KS(n);return i?JSON.parse(i):(td("Failed to decode base64 JWT payload"),null)}catch(i){return td("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Iw(t){const e=Uv(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gr&&Fx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Fx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cu(this.lastLoginAt),this.creationTime=Cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await sc(t,db(n,{idToken:r}));me(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fb(s.providerUserInfo):[],a=Bx(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new cg(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function Ux(t){const e=un(t);await Fd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Bx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fb(t){return t.map(e=>{var{providerId:n}=e,r=Vv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(t,e){const n=await cb(t,{},async()=>{const r=Sc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=hb(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ub.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function qx(t,e){return no(t,"POST","/v2/accounts:revokeToken",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Iw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=Iw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await zx(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Qa;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Qa,this.toJSON())}_performRefresh(){return Fi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class $i{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Vv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $x(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await sc(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Vx(this,e)}reload(){return Ux(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new $i(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ai(this.auth.app))return Promise.reject(qi(this.auth));const e=await this.getIdToken();return await sc(this,Mx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,h;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,O=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,A=(c=n.createdAt)!==null&&c!==void 0?c:void 0,T=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:S,emailVerified:D,isAnonymous:B,providerData:x,stsTokenManager:I}=n;me(S&&I,e,"internal-error");const w=Qa.fromJSON(this.name,I);me(typeof S=="string",e,"internal-error"),vs(p,e.name),vs(g,e.name),me(typeof D=="boolean",e,"internal-error"),me(typeof B=="boolean",e,"internal-error"),vs(y,e.name),vs(C,e.name),vs(R,e.name),vs(O,e.name),vs(A,e.name),vs(T,e.name);const b=new $i({uid:S,auth:e,email:g,emailVerified:D,displayName:p,isAnonymous:B,photoURL:C,phoneNumber:y,tenantId:R,stsTokenManager:w,createdAt:A,lastLoginAt:T});return x&&Array.isArray(x)&&(b.providerData=x.map(k=>Object.assign({},k))),O&&(b._redirectEventId=O),b}static async _fromIdTokenResponse(e,n,r=!1){const i=new Qa;i.updateFromServerResponse(n);const s=new $i({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fd(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?fb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Qa;a.updateFromIdToken(r);const l=new $i({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new cg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw=new Map;function Ui(t){Xi(t instanceof Function,"Expected a class definition");let e=Aw.get(t);return e?(Xi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Aw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}pb.type="NONE";const kw=pb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(t,e,n){return`firebase:${t}:${e}:${n}`}class Ja{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=nd(this.userKey,i.apiKey,s),this.fullPersistenceKey=nd("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$i._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ja(Ui(kw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Ui(kw);const o=nd(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const p=$i._fromJSON(e,h);c!==s&&(a=p),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ja(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ja(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_b(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wb(e))return"Blackberry";if(Eb(e))return"Webos";if(gb(e))return"Safari";if((e.includes("chrome/")||vb(e))&&!e.includes("edge/"))return"Chrome";if(yb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mb(t=ln()){return/firefox\//i.test(t)}function gb(t=ln()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vb(t=ln()){return/crios\//i.test(t)}function _b(t=ln()){return/iemobile/i.test(t)}function yb(t=ln()){return/android/i.test(t)}function wb(t=ln()){return/blackberry/i.test(t)}function Eb(t=ln()){return/webos/i.test(t)}function Bv(t=ln()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Hx(t=ln()){var e;return Bv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Wx(){return aP()&&document.documentMode===10}function Tb(t=ln()){return Bv(t)||yb(t)||Eb(t)||wb(t)||/windows phone/i.test(t)||_b(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(t,e=[]){let n;switch(t){case"Browser":n=Cw(ln());break;case"Worker":n=`${Cw(ln())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(t,e={}){return no(t,"GET","/v2/passwordPolicy",to(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=6;class Jx{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Qx,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Rw(this),this.idTokenSubscription=new Rw(this),this.beforeStateQueue=new Kx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ab,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ui(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await db(this,{idToken:e}),r=await $i._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ai(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Px()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ai(this.app))return Promise.reject(qi(this));const n=e?un(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ai(this.app)?Promise.reject(qi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ai(this.app)?Promise.reject(qi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Gx(this),n=new Jx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ra("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await qx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ui(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[Ui(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Sb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&kx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function sa(t){return un(t)}class Rw{constructor(e){this.auth=e,this.observer=null,this.addObserver=pP(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xx(t){bf=t}function bb(t){return bf.loadJS(t)}function Zx(){return bf.recaptchaEnterpriseScript}function eO(){return bf.gapiScript}function tO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const nO="recaptcha-enterprise",rO="NO_RECAPTCHA";class iO{constructor(e){this.type=nO,this.auth=sa(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{jx(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Lx(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;bw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(rO)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&bw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Zx();l.length!==0&&(l+=a),bb(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Pw(t,e,n,r=!1){const i=new iO(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function hg(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Pw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Pw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sO(t,e){const n=ia(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(rc(s,e??{}))return i;Kr(i,"already-initialized")}return n.initialize({options:e})}function oO(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function aO(t,e,n){const r=sa(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=Ib(e),{host:o,port:a}=lO(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),uO()}function Ib(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function lO(t){const e=Ib(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:xw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:xw(o)}}}function xw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function uO(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fi("not implemented")}_getIdTokenResponse(e){return Fi("not implemented")}_linkToIdToken(e,n){return Fi("not implemented")}_getReauthenticationResolver(e){return Fi("not implemented")}}async function cO(t,e){return no(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hO(t,e){return Ic(t,"POST","/v1/accounts:signInWithPassword",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dO(t,e){return Ic(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}async function fO(t,e){return Ic(t,"POST","/v1/accounts:signInWithEmailLink",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc extends zv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new oc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new oc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hg(e,n,"signInWithPassword",hO);case"emailLink":return dO(e,{email:this._email,oobCode:this._password});default:Kr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hg(e,r,"signUpPassword",cO);case"emailLink":return fO(e,{idToken:n,email:this._email,oobCode:this._password});default:Kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t,e){return Ic(t,"POST","/v1/accounts:signInWithIdp",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="http://localhost";class qo extends zv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new qo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Kr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Vv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new qo(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ya(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ya(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ya(e,n)}buildRequest(){const e={requestUri:pO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gO(t){const e=hu(du(t)).link,n=e?hu(du(e)).deep_link_id:null,r=hu(du(t)).deep_link_id;return(r?hu(du(r)).link:null)||r||n||e||t}class qv{constructor(e){var n,r,i,s,o,a;const l=hu(du(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(r=l.oobCode)!==null&&r!==void 0?r:null,p=mO((i=l.mode)!==null&&i!==void 0?i:null);me(c&&h&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=gO(e);try{return new qv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.providerId=Sl.PROVIDER_ID}static credential(e,n){return oc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qv.parseLink(n);return me(r,"argument-error"),oc._fromEmailAndCode(e,r.code,r.tenantId)}}Sl.PROVIDER_ID="password";Sl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Sl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends Ab{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends Ac{constructor(){super("facebook.com")}static credential(e){return qo._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.FACEBOOK_SIGN_IN_METHOD="facebook.com";Is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As extends Ac{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return qo._fromParams({providerId:As.PROVIDER_ID,signInMethod:As.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return As.credentialFromTaggedObject(e)}static credentialFromError(e){return As.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return As.credential(n,r)}catch{return null}}}As.GOOGLE_SIGN_IN_METHOD="google.com";As.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks extends Ac{constructor(){super("github.com")}static credential(e){return qo._fromParams({providerId:ks.PROVIDER_ID,signInMethod:ks.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ks.credentialFromTaggedObject(e)}static credentialFromError(e){return ks.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ks.credential(e.oauthAccessToken)}catch{return null}}}ks.GITHUB_SIGN_IN_METHOD="github.com";ks.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Ac{constructor(){super("twitter.com")}static credential(e,n){return qo._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Cs.credential(n,r)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(t,e){return Ic(t,"POST","/v1/accounts:signUp",to(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await $i._fromIdTokenResponse(e,r,i),o=Ow(r);return new Ho({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Ow(r);return new Ho({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Ow(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d extends Gr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$d.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $d(e,n,r,i)}}function kb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$d._fromErrorAndOperation(t,s,e,r):s})}async function _O(t,e,n=!1){const r=await sc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ho._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yO(t,e,n=!1){const{auth:r}=t;if(ai(r.app))return Promise.reject(qi(r));const i="reauthenticate";try{const s=await sc(t,kb(r,i,e,t),n);me(s.idToken,r,"internal-error");const o=Uv(s.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),Ho._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Kr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cb(t,e,n=!1){if(ai(t.app))return Promise.reject(qi(t));const r="signIn",i=await kb(t,r,e),s=await Ho._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function wO(t,e){return Cb(sa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rb(t){const e=sa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function EO(t,e,n){if(ai(t.app))return Promise.reject(qi(t));const r=sa(t),o=await hg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",vO).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Rb(t),l}),a=await Ho._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function TO(t,e,n){return ai(t.app)?Promise.reject(qi(t)):wO(un(t),Sl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Rb(t),r})}function SO(t,e,n,r){return un(t).onIdTokenChanged(e,n,r)}function bO(t,e,n){return un(t).beforeAuthStateChanged(e,n)}function Pb(t,e,n,r){return un(t).onAuthStateChanged(e,n,r)}function IO(t){return un(t).signOut()}const Ud="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ud,"1"),this.storage.removeItem(Ud),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO=1e3,kO=10;class Ob extends xb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Wx()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kO):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},AO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ob.type="LOCAL";const CO=Ob;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb extends xb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Nb.type="SESSION";const Db=Nb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new If(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await RO(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}If.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Hv("",20);i.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(){return window}function xO(t){hi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(){return typeof hi().WorkerGlobalScope<"u"&&typeof hi().importScripts=="function"}async function OO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function DO(){return Lb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="firebaseLocalStorageDb",LO=1,Bd="firebaseLocalStorage",Mb="fbase_key";class kc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Af(t,e){return t.transaction([Bd],e?"readwrite":"readonly").objectStore(Bd)}function jO(){const t=indexedDB.deleteDatabase(jb);return new kc(t).toPromise()}function dg(){const t=indexedDB.open(jb,LO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Bd,{keyPath:Mb})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Bd)?e(r):(r.close(),await jO(),e(await dg()))})})}async function Nw(t,e,n){const r=Af(t,!0).put({[Mb]:e,value:n});return new kc(r).toPromise()}async function MO(t,e){const n=Af(t,!1).get(e),r=await new kc(n).toPromise();return r===void 0?null:r.value}function Dw(t,e){const n=Af(t,!0).delete(e);return new kc(n).toPromise()}const VO=800,FO=3;class Vb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await dg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>FO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Lb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=If._getInstance(DO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await OO(),!this.activeServiceWorker)return;this.sender=new PO(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await dg();return await Nw(e,Ud,"1"),await Dw(e,Ud),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Nw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Af(i,!1).getAll();return new kc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vb.type="LOCAL";const $O=Vb;new bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t,e){return e?Ui(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv extends zv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ya(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ya(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BO(t){return Cb(t.auth,new Wv(t),t.bypassAuthState)}function zO(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),yO(n,new Wv(t),t.bypassAuthState)}async function qO(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),_O(n,new Wv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BO;case"linkViaPopup":case"linkViaRedirect":return qO;case"reauthViaPopup":case"reauthViaRedirect":return zO;default:Kr(this.auth,"internal-error")}}resolve(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new bc(2e3,1e4);class Ua extends Fb{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ua.currentPopupAction&&Ua.currentPopupAction.cancel(),Ua.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Xi(this.filter.length===1,"Popup operations only handle one event");const e=Hv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ci(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ci(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ua.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ci(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HO.get())};e()}}Ua.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="pendingRedirect",rd=new Map;class KO extends Fb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=rd.get(this.auth._key());if(!e){try{const r=await GO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}rd.set(this.auth._key(),e)}return this.bypassAuthState||rd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GO(t,e){const n=YO(e),r=JO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function QO(t,e){rd.set(t._key(),e)}function JO(t){return Ui(t._redirectPersistence)}function YO(t){return nd(WO,t.config.apiKey,t.name)}async function XO(t,e,n=!1){if(ai(t.app))return Promise.reject(qi(t));const r=sa(t),i=UO(r,e),o=await new KO(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=10*60*1e3;class eN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$b(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ci(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lw(e))}saveEventToCache(e){this.cachedEventUids.add(Lw(e)),this.lastProcessedEventTime=Date.now()}}function Lw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $b({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $b(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e={}){return no(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iN=/^https?/;async function sN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nN(t);for(const n of e)try{if(oN(n))return}catch{}Kr(t,"unauthorized-domain")}function oN(t){const e=ug(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iN.test(n))return!1;if(rN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new bc(3e4,6e4);function jw(){const t=hi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lN(t){return new Promise((e,n)=>{var r,i,s;function o(){jw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jw(),n(ci(t,"network-request-failed"))},timeout:aN.get()})}if(!((i=(r=hi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=hi().gapi)===null||s===void 0)&&s.load)o();else{const a=tO("iframefcb");return hi()[a]=()=>{gapi.load?o():n(ci(t,"network-request-failed"))},bb(`${eO()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw id=null,e})}let id=null;function uN(t){return id=id||lN(t),id}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new bc(5e3,15e3),hN="__/auth/iframe",dN="emulator/auth/iframe",fN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mN(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$v(e,dN):`https://${t.config.authDomain}/${hN}`,r={apiKey:e.apiKey,appName:t.name,v:Tl},i=pN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Sc(r).slice(1)}`}async function gN(t){const e=await uN(t),n=hi().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:mN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=ci(t,"network-request-failed"),a=hi().setTimeout(()=>{s(o)},cN.get());function l(){hi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_N=500,yN=600,wN="_blank",EN="http://localhost";class Mw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function TN(t,e,n,r=_N,i=yN){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},vN),{width:r.toString(),height:i.toString(),top:s,left:o}),c=ln().toLowerCase();n&&(a=vb(c)?wN:n),mb(c)&&(e=e||EN,l.scrollbars="yes");const h=Object.entries(l).reduce((g,[y,C])=>`${g}${y}=${C},`,"");if(Hx(c)&&a!=="_self")return SN(e||"",a),new Mw(null);const p=window.open(e||"",a,h);me(p,t,"popup-blocked");try{p.focus()}catch{}return new Mw(p)}function SN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="__/auth/handler",IN="emulator/auth/handler",AN=encodeURIComponent("fac");async function Vw(t,e,n,r,i,s){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Tl,eventId:i};if(e instanceof Ab){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",fP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof Ac){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),c=l?`#${AN}=${encodeURIComponent(l)}`:"";return`${kN(t)}?${Sc(a).slice(1)}${c}`}function kN({config:t}){return t.emulator?$v(t,IN):`https://${t.authDomain}/${bN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="webStorageSupport";class CN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Db,this._completeRedirectFn=XO,this._overrideRedirectResult=QO}async _openPopup(e,n,r,i){var s;Xi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Vw(e,n,r,ug(),i);return TN(e,o,Hv())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Vw(e,n,r,ug(),i);return xO(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Xi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gN(e),r=new eN(e);return n.register("authEvent",i=>(me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kp,{type:Kp},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Kp];o!==void 0&&n(!!o),Kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Tb()||gb()||Bv()}}const RN=CN;var Fw="@firebase/auth",$w="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ON(t){gi(new Wr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Sb(t)},c=new Yx(r,i,s,l);return oO(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gi(new Wr("auth-internal",e=>{const n=sa(e.getProvider("auth").getImmediate());return(r=>new PN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(Fw,$w,xN(t)),vr(Fw,$w,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=5*60,DN=JS("authIdTokenMaxAge")||NN;let Uw=null;const LN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>DN)return;const i=n==null?void 0:n.token;Uw!==i&&(Uw=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jN(t=Mv()){const e=ia(t,"auth");if(e.isInitialized())return e.getImmediate();const n=sO(t,{popupRedirectResolver:RN,persistence:[$O,CO,Db]}),r=JS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=LN(s.toString());bO(n,o,()=>o(n.currentUser)),SO(n,a=>o(a))}}const i=GS("auth");return i&&aO(n,`http://${i}`),n}function MN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Xx({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=ci("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",MN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ON("Browser");var VN="firebase",FN="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(VN,FN,"app");var Bw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mo,Ub;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,w){function b(){}b.prototype=w.prototype,I.D=w.prototype,I.prototype=new b,I.prototype.constructor=I,I.C=function(k,N,V){for(var P=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)P[ge-2]=arguments[ge];return w.prototype[N].apply(k,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,w,b){b||(b=0);var k=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)k[N]=w.charCodeAt(b++)|w.charCodeAt(b++)<<8|w.charCodeAt(b++)<<16|w.charCodeAt(b++)<<24;else for(N=0;16>N;++N)k[N]=w[b++]|w[b++]<<8|w[b++]<<16|w[b++]<<24;w=I.g[0],b=I.g[1],N=I.g[2];var V=I.g[3],P=w+(V^b&(N^V))+k[0]+3614090360&4294967295;w=b+(P<<7&4294967295|P>>>25),P=V+(N^w&(b^N))+k[1]+3905402710&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(b^V&(w^b))+k[2]+606105819&4294967295,N=V+(P<<17&4294967295|P>>>15),P=b+(w^N&(V^w))+k[3]+3250441966&4294967295,b=N+(P<<22&4294967295|P>>>10),P=w+(V^b&(N^V))+k[4]+4118548399&4294967295,w=b+(P<<7&4294967295|P>>>25),P=V+(N^w&(b^N))+k[5]+1200080426&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(b^V&(w^b))+k[6]+2821735955&4294967295,N=V+(P<<17&4294967295|P>>>15),P=b+(w^N&(V^w))+k[7]+4249261313&4294967295,b=N+(P<<22&4294967295|P>>>10),P=w+(V^b&(N^V))+k[8]+1770035416&4294967295,w=b+(P<<7&4294967295|P>>>25),P=V+(N^w&(b^N))+k[9]+2336552879&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(b^V&(w^b))+k[10]+4294925233&4294967295,N=V+(P<<17&4294967295|P>>>15),P=b+(w^N&(V^w))+k[11]+2304563134&4294967295,b=N+(P<<22&4294967295|P>>>10),P=w+(V^b&(N^V))+k[12]+1804603682&4294967295,w=b+(P<<7&4294967295|P>>>25),P=V+(N^w&(b^N))+k[13]+4254626195&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(b^V&(w^b))+k[14]+2792965006&4294967295,N=V+(P<<17&4294967295|P>>>15),P=b+(w^N&(V^w))+k[15]+1236535329&4294967295,b=N+(P<<22&4294967295|P>>>10),P=w+(N^V&(b^N))+k[1]+4129170786&4294967295,w=b+(P<<5&4294967295|P>>>27),P=V+(b^N&(w^b))+k[6]+3225465664&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^b&(V^w))+k[11]+643717713&4294967295,N=V+(P<<14&4294967295|P>>>18),P=b+(V^w&(N^V))+k[0]+3921069994&4294967295,b=N+(P<<20&4294967295|P>>>12),P=w+(N^V&(b^N))+k[5]+3593408605&4294967295,w=b+(P<<5&4294967295|P>>>27),P=V+(b^N&(w^b))+k[10]+38016083&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^b&(V^w))+k[15]+3634488961&4294967295,N=V+(P<<14&4294967295|P>>>18),P=b+(V^w&(N^V))+k[4]+3889429448&4294967295,b=N+(P<<20&4294967295|P>>>12),P=w+(N^V&(b^N))+k[9]+568446438&4294967295,w=b+(P<<5&4294967295|P>>>27),P=V+(b^N&(w^b))+k[14]+3275163606&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^b&(V^w))+k[3]+4107603335&4294967295,N=V+(P<<14&4294967295|P>>>18),P=b+(V^w&(N^V))+k[8]+1163531501&4294967295,b=N+(P<<20&4294967295|P>>>12),P=w+(N^V&(b^N))+k[13]+2850285829&4294967295,w=b+(P<<5&4294967295|P>>>27),P=V+(b^N&(w^b))+k[2]+4243563512&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^b&(V^w))+k[7]+1735328473&4294967295,N=V+(P<<14&4294967295|P>>>18),P=b+(V^w&(N^V))+k[12]+2368359562&4294967295,b=N+(P<<20&4294967295|P>>>12),P=w+(b^N^V)+k[5]+4294588738&4294967295,w=b+(P<<4&4294967295|P>>>28),P=V+(w^b^N)+k[8]+2272392833&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^b)+k[11]+1839030562&4294967295,N=V+(P<<16&4294967295|P>>>16),P=b+(N^V^w)+k[14]+4259657740&4294967295,b=N+(P<<23&4294967295|P>>>9),P=w+(b^N^V)+k[1]+2763975236&4294967295,w=b+(P<<4&4294967295|P>>>28),P=V+(w^b^N)+k[4]+1272893353&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^b)+k[7]+4139469664&4294967295,N=V+(P<<16&4294967295|P>>>16),P=b+(N^V^w)+k[10]+3200236656&4294967295,b=N+(P<<23&4294967295|P>>>9),P=w+(b^N^V)+k[13]+681279174&4294967295,w=b+(P<<4&4294967295|P>>>28),P=V+(w^b^N)+k[0]+3936430074&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^b)+k[3]+3572445317&4294967295,N=V+(P<<16&4294967295|P>>>16),P=b+(N^V^w)+k[6]+76029189&4294967295,b=N+(P<<23&4294967295|P>>>9),P=w+(b^N^V)+k[9]+3654602809&4294967295,w=b+(P<<4&4294967295|P>>>28),P=V+(w^b^N)+k[12]+3873151461&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^b)+k[15]+530742520&4294967295,N=V+(P<<16&4294967295|P>>>16),P=b+(N^V^w)+k[2]+3299628645&4294967295,b=N+(P<<23&4294967295|P>>>9),P=w+(N^(b|~V))+k[0]+4096336452&4294967295,w=b+(P<<6&4294967295|P>>>26),P=V+(b^(w|~N))+k[7]+1126891415&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~b))+k[14]+2878612391&4294967295,N=V+(P<<15&4294967295|P>>>17),P=b+(V^(N|~w))+k[5]+4237533241&4294967295,b=N+(P<<21&4294967295|P>>>11),P=w+(N^(b|~V))+k[12]+1700485571&4294967295,w=b+(P<<6&4294967295|P>>>26),P=V+(b^(w|~N))+k[3]+2399980690&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~b))+k[10]+4293915773&4294967295,N=V+(P<<15&4294967295|P>>>17),P=b+(V^(N|~w))+k[1]+2240044497&4294967295,b=N+(P<<21&4294967295|P>>>11),P=w+(N^(b|~V))+k[8]+1873313359&4294967295,w=b+(P<<6&4294967295|P>>>26),P=V+(b^(w|~N))+k[15]+4264355552&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~b))+k[6]+2734768916&4294967295,N=V+(P<<15&4294967295|P>>>17),P=b+(V^(N|~w))+k[13]+1309151649&4294967295,b=N+(P<<21&4294967295|P>>>11),P=w+(N^(b|~V))+k[4]+4149444226&4294967295,w=b+(P<<6&4294967295|P>>>26),P=V+(b^(w|~N))+k[11]+3174756917&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~b))+k[2]+718787259&4294967295,N=V+(P<<15&4294967295|P>>>17),P=b+(V^(N|~w))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+V&4294967295}r.prototype.u=function(I,w){w===void 0&&(w=I.length);for(var b=w-this.blockSize,k=this.B,N=this.h,V=0;V<w;){if(N==0)for(;V<=b;)i(this,I,V),V+=this.blockSize;if(typeof I=="string"){for(;V<w;)if(k[N++]=I.charCodeAt(V++),N==this.blockSize){i(this,k),N=0;break}}else for(;V<w;)if(k[N++]=I[V++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=w},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;var b=8*this.o;for(w=I.length-8;w<I.length;++w)I[w]=b&255,b/=256;for(this.u(I),I=Array(16),w=b=0;4>w;++w)for(var k=0;32>k;k+=8)I[b++]=this.g[w]>>>k&255;return I};function s(I,w){var b=a;return Object.prototype.hasOwnProperty.call(b,I)?b[I]:b[I]=w(I)}function o(I,w){this.h=w;for(var b=[],k=!0,N=I.length-1;0<=N;N--){var V=I[N]|0;k&&V==w||(b[N]=V,k=!1)}this.g=b}var a={};function l(I){return-128<=I&&128>I?s(I,function(w){return new o([w|0],0>w?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return O(c(-I));for(var w=[],b=1,k=0;I>=b;k++)w[k]=I/b|0,b*=4294967296;return new o(w,0)}function h(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return O(h(I.substring(1),w));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=c(Math.pow(w,8)),k=p,N=0;N<I.length;N+=8){var V=Math.min(8,I.length-N),P=parseInt(I.substring(N,N+V),w);8>V?(V=c(Math.pow(w,V)),k=k.j(V).add(c(P))):(k=k.j(b),k=k.add(c(P)))}return k}var p=l(0),g=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(R(this))return-O(this).m();for(var I=0,w=1,b=0;b<this.g.length;b++){var k=this.i(b);I+=(0<=k?k:4294967296+k)*w,w*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C(this))return"0";if(R(this))return"-"+O(this).toString(I);for(var w=c(Math.pow(I,6)),b=this,k="";;){var N=D(b,w).g;b=A(b,N.j(w));var V=((0<b.g.length?b.g[0]:b.h)>>>0).toString(I);if(b=N,C(b))return V+k;for(;6>V.length;)V="0"+V;k=V+k}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function C(I){if(I.h!=0)return!1;for(var w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function R(I){return I.h==-1}t.l=function(I){return I=A(this,I),R(I)?-1:C(I)?0:1};function O(I){for(var w=I.g.length,b=[],k=0;k<w;k++)b[k]=~I.g[k];return new o(b,~I.h).add(g)}t.abs=function(){return R(this)?O(this):this},t.add=function(I){for(var w=Math.max(this.g.length,I.g.length),b=[],k=0,N=0;N<=w;N++){var V=k+(this.i(N)&65535)+(I.i(N)&65535),P=(V>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);k=P>>>16,V&=65535,P&=65535,b[N]=P<<16|V}return new o(b,b[b.length-1]&-2147483648?-1:0)};function A(I,w){return I.add(O(w))}t.j=function(I){if(C(this)||C(I))return p;if(R(this))return R(I)?O(this).j(O(I)):O(O(this).j(I));if(R(I))return O(this.j(O(I)));if(0>this.l(y)&&0>I.l(y))return c(this.m()*I.m());for(var w=this.g.length+I.g.length,b=[],k=0;k<2*w;k++)b[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<I.g.length;N++){var V=this.i(k)>>>16,P=this.i(k)&65535,ge=I.i(N)>>>16,Ke=I.i(N)&65535;b[2*k+2*N]+=P*Ke,T(b,2*k+2*N),b[2*k+2*N+1]+=V*Ke,T(b,2*k+2*N+1),b[2*k+2*N+1]+=P*ge,T(b,2*k+2*N+1),b[2*k+2*N+2]+=V*ge,T(b,2*k+2*N+2)}for(k=0;k<w;k++)b[k]=b[2*k+1]<<16|b[2*k];for(k=w;k<2*w;k++)b[k]=0;return new o(b,0)};function T(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function S(I,w){this.g=I,this.h=w}function D(I,w){if(C(w))throw Error("division by zero");if(C(I))return new S(p,p);if(R(I))return w=D(O(I),w),new S(O(w.g),O(w.h));if(R(w))return w=D(I,O(w)),new S(O(w.g),w.h);if(30<I.g.length){if(R(I)||R(w))throw Error("slowDivide_ only works with positive integers.");for(var b=g,k=w;0>=k.l(I);)b=B(b),k=B(k);var N=x(b,1),V=x(k,1);for(k=x(k,2),b=x(b,2);!C(k);){var P=V.add(k);0>=P.l(I)&&(N=N.add(b),V=P),k=x(k,1),b=x(b,1)}return w=A(I,N.j(w)),new S(N,w)}for(N=p;0<=I.l(w);){for(b=Math.max(1,Math.floor(I.m()/w.m())),k=Math.ceil(Math.log(b)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),V=c(b),P=V.j(w);R(P)||0<P.l(I);)b-=k,V=c(b),P=V.j(w);C(V)&&(V=g),N=N.add(V),I=A(I,P)}return new S(N,I)}t.A=function(I){return D(this,I).h},t.and=function(I){for(var w=Math.max(this.g.length,I.g.length),b=[],k=0;k<w;k++)b[k]=this.i(k)&I.i(k);return new o(b,this.h&I.h)},t.or=function(I){for(var w=Math.max(this.g.length,I.g.length),b=[],k=0;k<w;k++)b[k]=this.i(k)|I.i(k);return new o(b,this.h|I.h)},t.xor=function(I){for(var w=Math.max(this.g.length,I.g.length),b=[],k=0;k<w;k++)b[k]=this.i(k)^I.i(k);return new o(b,this.h^I.h)};function B(I){for(var w=I.g.length+1,b=[],k=0;k<w;k++)b[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(b,I.h)}function x(I,w){var b=w>>5;w%=32;for(var k=I.g.length-b,N=[],V=0;V<k;V++)N[V]=0<w?I.i(V+b)>>>w|I.i(V+b+1)<<32-w:I.i(V+b);return new o(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ub=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Mo=o}).apply(typeof Bw<"u"?Bw:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bb,zb,fu,qb,sd,fg,Hb,Wb,Kb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var m=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var $=u[E];if(!($ in m))break e;m=m[$]}u=u[u.length-1],E=m[u],f=f(E),f!=E&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,E=!1,$={next:function(){if(!E&&m<u.length){var q=m++;return{value:f(q,u[q]),done:!1}}return E=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}i("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function c(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function p(u,f,m){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,E),u.apply(f,$)}}return function(){return u.apply(f,arguments)}}function g(u,f,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var E=m.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function C(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(E,$,q){for(var Z=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)Z[Le-2]=arguments[Le];return f.prototype[$].apply(E,Z)}}function R(u){const f=u.length;if(0<f){const m=Array(f);for(let E=0;E<f;E++)m[E]=u[E];return m}return[]}function O(u,f){for(let m=1;m<arguments.length;m++){const E=arguments[m];if(l(E)){const $=u.length||0,q=E.length||0;u.length=$+q;for(let Z=0;Z<q;Z++)u[$+Z]=E[Z]}else u.push(E)}}class A{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(u){return/^[\s\xa0]*$/.test(u)}function S(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function D(u){return D[" "](u),u}D[" "]=function(){};var B=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function x(u,f,m){for(const E in u)f.call(m,u[E],E,u)}function I(u,f){for(const m in u)f.call(void 0,u[m],m,u)}function w(u){const f={};for(const m in u)f[m]=u[m];return f}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(u,f){let m,E;for(let $=1;$<arguments.length;$++){E=arguments[$];for(m in E)u[m]=E[m];for(let q=0;q<b.length;q++)m=b[q],Object.prototype.hasOwnProperty.call(E,m)&&(u[m]=E[m])}}function N(u){var f=1;u=u.split(":");const m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function V(u){a.setTimeout(()=>{throw u},0)}function P(){var u=oe;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class ge{constructor(){this.h=this.g=null}add(f,m){const E=Ke.get();E.set(f,m),this.h?this.h.next=E:this.g=E,this.h=E}}var Ke=new A(()=>new Ge,u=>u.reset());class Ge{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,X=!1,oe=new ge,ce=()=>{const u=a.Promise.resolve(void 0);ye=()=>{u.then(Ae)}};var Ae=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(m){V(m)}var f=Ke;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}X=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function ze(u,f){if(H.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(B){e:{try{D(f.nodeName);var $=!0;break e}catch{}$=!1}$||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Qe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ze.aa.h.call(this)}}C(ze,H);var Qe={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Ze="closure_listenable_"+(1e6*Math.random()|0),kt=0;function Ct(u,f,m,E,$){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!E,this.ha=$,this.key=++kt,this.da=this.fa=!1}function rr(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function re(u){this.src=u,this.g={},this.h=0}re.prototype.add=function(u,f,m,E,$){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var Z=Jt(u,f,E,$);return-1<Z?(f=u[Z],m||(f.fa=!1)):(f=new Ct(f,this.src,q,!!E,$),f.fa=m,u.push(f)),f};function et(u,f){var m=f.type;if(m in u.g){var E=u.g[m],$=Array.prototype.indexOf.call(E,f,void 0),q;(q=0<=$)&&Array.prototype.splice.call(E,$,1),q&&(rr(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Jt(u,f,m,E){for(var $=0;$<u.length;++$){var q=u[$];if(!q.da&&q.listener==f&&q.capture==!!m&&q.ha==E)return $}return-1}var Jr="closure_lm_"+(1e6*Math.random()|0),bi={};function Rt(u,f,m,E,$){if(Array.isArray(f)){for(var q=0;q<f.length;q++)Rt(u,f[q],m,E,$);return null}return m=jn(m),u&&u[Ze]?u.K(f,m,c(E)?!!E.capture:!!E,$):Ii(u,f,m,!1,E,$)}function Ii(u,f,m,E,$,q){if(!f)throw Error("Invalid event type");var Z=c($)?!!$.capture:!!$,Le=Yr(u);if(Le||(u[Jr]=Le=new re(u)),m=Le.add(f,m,E,Z,q),m.proxy)return m;if(E=Tr(),m.proxy=E,E.src=u,E.listener=m,u.addEventListener)$e||($=Z),$===void 0&&($=!1),u.addEventListener(f.toString(),E,$);else if(u.attachEvent)u.attachEvent(Sr(f.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return m}function Tr(){function u(m){return f.call(u.src,u.listener,m)}const f=is;return u}function bn(u,f,m,E,$){if(Array.isArray(f))for(var q=0;q<f.length;q++)bn(u,f[q],m,E,$);else E=c(E)?!!E.capture:!!E,m=jn(m),u&&u[Ze]?(u=u.i,f=String(f).toString(),f in u.g&&(q=u.g[f],m=Jt(q,m,E,$),-1<m&&(rr(q[m]),Array.prototype.splice.call(q,m,1),q.length==0&&(delete u.g[f],u.h--)))):u&&(u=Yr(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Jt(f,m,E,$)),(m=-1<u?f[u]:null)&&cn(m))}function cn(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[Ze])et(f.i,u);else{var m=u.type,E=u.proxy;f.removeEventListener?f.removeEventListener(m,E,u.capture):f.detachEvent?f.detachEvent(Sr(m),E):f.addListener&&f.removeListener&&f.removeListener(E),(m=Yr(f))?(et(m,u),m.h==0&&(m.src=null,f[Jr]=null)):rr(u)}}}function Sr(u){return u in bi?bi[u]:bi[u]="on"+u}function is(u,f){if(u.da)u=!0;else{f=new ze(f,this);var m=u.listener,E=u.ha||u.src;u.fa&&cn(u),u=m.call(E,f)}return u}function Yr(u){return u=u[Jr],u instanceof re?u:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function jn(u){return typeof u=="function"?u:(u[hn]||(u[hn]=function(f){return u.handleEvent(f)}),u[hn])}function ut(){Te.call(this),this.i=new re(this),this.M=this,this.F=null}C(ut,Te),ut.prototype[Ze]=!0,ut.prototype.removeEventListener=function(u,f,m,E){bn(this,u,f,m,E)};function Je(u,f){var m,E=u.F;if(E)for(m=[];E;E=E.F)m.push(E);if(u=u.M,E=f.type||f,typeof f=="string")f=new H(f,u);else if(f instanceof H)f.target=f.target||u;else{var $=f;f=new H(E,u),k(f,$)}if($=!0,m)for(var q=m.length-1;0<=q;q--){var Z=f.g=m[q];$=rt(Z,E,!0,f)&&$}if(Z=f.g=u,$=rt(Z,E,!0,f)&&$,$=rt(Z,E,!1,f)&&$,m)for(q=0;q<m.length;q++)Z=f.g=m[q],$=rt(Z,E,!1,f)&&$}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],E=0;E<m.length;E++)rr(m[E]);delete u.g[f],u.h--}}this.F=null},ut.prototype.K=function(u,f,m,E){return this.i.add(String(u),f,!1,m,E)},ut.prototype.L=function(u,f,m,E){return this.i.add(String(u),f,!0,m,E)};function rt(u,f,m,E){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var $=!0,q=0;q<f.length;++q){var Z=f[q];if(Z&&!Z.da&&Z.capture==m){var Le=Z.listener,Et=Z.ha||Z.src;Z.fa&&et(u.i,Z),$=Le.call(Et,E)!==!1&&$}}return $&&!E.defaultPrevented}function dn(u,f,m){if(typeof u=="function")m&&(u=g(u,m));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function br(u){u.g=dn(()=>{u.g=null,u.i&&(u.i=!1,br(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class Mn extends Te{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:br(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function In(u){Te.call(this),this.h=u,this.g={}}C(In,Te);var Yt=[];function oo(u){x(u.g,function(f,m){this.g.hasOwnProperty(m)&&cn(f)},u),u.g={}}In.prototype.N=function(){In.aa.N.call(this),oo(this)},In.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xr=a.JSON.stringify,ca=a.JSON.parse,Nl=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ss(){}ss.prototype.h=null;function Ai(u){return u.h||(u.h=u.i())}function ao(){}var Ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ar(){H.call(this,"d")}C(Ar,H);function ir(){H.call(this,"c")}C(ir,H);var sr={},os=null;function as(){return os=os||new ut}sr.La="serverreachability";function lo(u){H.call(this,sr.La,u)}C(lo,H);function or(u){const f=as();Je(f,new lo(f))}sr.STAT_EVENT="statevent";function ki(u,f){H.call(this,sr.STAT_EVENT,u),this.stat=f}C(ki,H);function ct(u){const f=as();Je(f,new ki(f,u))}sr.Ma="timingevent";function Zr(u,f){H.call(this,sr.Ma,u),this.size=f}C(Zr,H);function j(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function F(){this.g=!0}F.prototype.xa=function(){this.g=!1};function z(u,f,m,E,$,q){u.info(function(){if(u.g)if(q)for(var Z="",Le=q.split("&"),Et=0;Et<Le.length;Et++){var Oe=Le[Et].split("=");if(1<Oe.length){var Lt=Oe[0];Oe=Oe[1];var jt=Lt.split("_");Z=2<=jt.length&&jt[1]=="type"?Z+(Lt+"="+Oe+"&"):Z+(Lt+"=redacted&")}}else Z=null;else Z=q;return"XMLHTTP REQ ("+E+") [attempt "+$+"]: "+f+`
`+m+`
`+Z})}function W(u,f,m,E,$,q,Z){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+$+"]: "+f+`
`+m+`
`+q+" "+Z})}function te(u,f,m,E){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+he(u,m)+(E?" "+E:"")})}function ie(u,f){u.info(function(){return"TIMEOUT: "+f})}F.prototype.info=function(){};function he(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var E=m[u];if(!(2>E.length)){var $=E[1];if(Array.isArray($)&&!(1>$.length)){var q=$[0];if(q!="noop"&&q!="stop"&&q!="close")for(var Z=1;Z<$.length;Z++)$[Z]=""}}}}return Xr(m)}catch{return f}}var Y={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ve={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},le;function ue(){}C(ue,ss),ue.prototype.g=function(){return new XMLHttpRequest},ue.prototype.i=function(){return{}},le=new ue;function ke(u,f,m,E){this.j=u,this.i=f,this.l=m,this.R=E||1,this.U=new In(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ce}function Ce(){this.i=null,this.g="",this.h=!1}var Me={},Se={};function it(u,f,m){u.L=1,u.v=Ci(ur(f)),u.m=m,u.P=!0,st(u,null)}function st(u,f){u.F=Date.now(),Vn(u),u.A=ur(u.v);var m=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Jc(m.i,"t",E),u.C=0,m=u.j.J,u.h=new Ce,u.g=ql(u.j,m?f:null,!u.m),0<u.O&&(u.M=new Mn(g(u.Y,u,u.g),u.O)),f=u.U,m=u.g,E=u.ca;var $="readystatechange";Array.isArray($)||($&&(Yt[0]=$.toString()),$=Yt);for(var q=0;q<$.length;q++){var Z=Rt(m,$[q],E||f.handleEvent,!1,f.h||f);if(!Z)break;f.g[Z.key]=Z}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),or(),z(u.i,u.u,u.A,u.l,u.R,u.m)}ke.prototype.ca=function(u){u=u.target;const f=this.M;f&&xr(u)==3?f.j():this.Y(u)},ke.prototype.Y=function(u){try{if(u==this.g)e:{const jt=xr(this.g);var f=this.g.Ba();const ps=this.g.Z();if(!(3>jt)&&(jt!=3||this.g&&(this.h.h||this.g.oa()||nh(this.g)))){this.J||jt!=4||f==7||(f==8||0>=ps?or(3):or(2)),lr(this);var m=this.g.Z();this.X=m;t:if(kr(this)){var E=nh(this.g);u="";var $=E.length,q=xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fn(this),Pt(this);var Z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<$;f++)this.h.h=!0,u+=this.h.i.decode(E[f],{stream:!(q&&f==$-1)});E.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=m==200,W(this.i,this.u,this.A,this.l,this.R,jt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,Et=this.g;if((Le=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Le)){var Oe=Le;break t}}Oe=null}if(m=Oe)te(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ei(this,m);else{this.o=!1,this.s=3,ct(12),fn(this),Pt(this);break e}}if(this.P){m=!0;let Bt;for(;!this.J&&this.C<Z.length;)if(Bt=ar(this,Z),Bt==Se){jt==4&&(this.s=4,ct(14),m=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==Me){this.s=4,ct(15),te(this.i,this.l,Z,"[Invalid Chunk]"),m=!1;break}else te(this.i,this.l,Bt,null),ei(this,Bt);if(kr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),jt!=4||Z.length!=0||this.h.h||(this.s=1,ct(16),m=!1),this.o=this.o&&m,!m)te(this.i,this.l,Z,"[Invalid Chunked Response]"),fn(this),Pt(this);else if(0<Z.length&&!this.W){this.W=!0;var Lt=this.j;Lt.g==this&&Lt.ba&&!Lt.M&&(Lt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Bl(Lt),Lt.M=!0,ct(11))}}else te(this.i,this.l,Z,null),ei(this,Z);jt==4&&fn(this),this.o&&!this.J&&(jt==4?ah(this.j,this):(this.o=!1,Vn(this)))}else up(this.g),m==400&&0<Z.indexOf("Unknown SID")?(this.s=3,ct(12)):(this.s=0,ct(13)),fn(this),Pt(this)}}}catch{}finally{}};function kr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function ar(u,f){var m=u.C,E=f.indexOf(`
`,m);return E==-1?Se:(m=Number(f.substring(m,E)),isNaN(m)?Me:(E+=1,E+m>f.length?Se:(f=f.slice(E,E+m),u.C=E+m,f)))}ke.prototype.cancel=function(){this.J=!0,fn(this)};function Vn(u){u.S=Date.now()+u.I,Cr(u,u.I)}function Cr(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=j(g(u.ba,u),f)}function lr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ke.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ie(this.i,this.A),this.L!=2&&(or(),ct(17)),fn(this),this.s=2,Pt(this)):Cr(this,this.S-u)};function Pt(u){u.j.G==0||u.J||ah(u.j,u)}function fn(u){lr(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,oo(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function ei(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Ue(m.h,u))){if(!u.K&&Ue(m.h,u)&&m.G==3){try{var E=m.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var $=E;if($[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)va(m),ma(m);else break e;Ul(m),ct(18)}}else m.za=$[1],0<m.za-m.T&&37500>$[2]&&m.F&&m.v==0&&!m.C&&(m.C=j(g(m.Za,m),6e3));if(1>=wt(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Or(m,11)}else if((u.K||m.g==u)&&va(m),!T(f))for($=m.Da.g.parse(f),f=0;f<$.length;f++){let Oe=$[f];if(m.T=Oe[0],Oe=Oe[1],m.G==2)if(Oe[0]=="c"){m.K=Oe[1],m.ia=Oe[2];const Lt=Oe[3];Lt!=null&&(m.la=Lt,m.j.info("VER="+m.la));const jt=Oe[4];jt!=null&&(m.Aa=jt,m.j.info("SVER="+m.Aa));const ps=Oe[5];ps!=null&&typeof ps=="number"&&0<ps&&(E=1.5*ps,m.L=E,m.j.info("backChannelRequestTimeoutMs_="+E)),E=m;const Bt=u.g;if(Bt){const hr=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hr){var q=E.h;q.g||hr.indexOf("spdy")==-1&&hr.indexOf("quic")==-1&&hr.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(pn(q,q.h),q.h=null))}if(E.D){const Hl=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;Hl&&(E.ya=Hl,He(E.I,E.D,Hl))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),E=m;var Z=u;if(E.qa=zl(E,E.J?E.ia:null,E.W),Z.K){uo(E.h,Z);var Le=Z,Et=E.L;Et&&(Le.I=Et),Le.B&&(lr(Le),Vn(Le)),E.g=Z}else sh(E);0<m.i.length&&ga(m)}else Oe[0]!="stop"&&Oe[0]!="close"||Or(m,7);else m.G==3&&(Oe[0]=="stop"||Oe[0]=="close"?Oe[0]=="stop"?Or(m,7):$l(m):Oe[0]!="noop"&&m.l&&m.l.ta(Oe),m.v=0)}}or(4)}catch{}}var Fn=class{constructor(u,f){this.g=u,this.map=f}};function pe(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ye(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function wt(u){return u.h?1:u.g?u.g.size:0}function Ue(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function pn(u,f){u.g?u.g.add(f):u.h=f}function uo(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}pe.prototype.cancel=function(){if(this.i=ha(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ha(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const m of u.g.values())f=f.concat(m.D);return f}return R(u.i)}function rp(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var f=[],m=u.length,E=0;E<m;E++)f.push(u[E]);return f}f=[],m=0;for(E in u)f[m++]=u[E];return f}function ip(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(const E in u)f[m++]=E;return f}}}function Bc(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=ip(u),E=rp(u),$=E.length,q=0;q<$;q++)f.call(void 0,E[q],m&&m[q],u)}var zc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $n(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var E=u[m].indexOf("="),$=null;if(0<=E){var q=u[m].substring(0,E);$=u[m].substring(E+1)}else q=u[m];f(q,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function ti(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ti){this.h=u.h,co(this,u.j),this.o=u.o,this.g=u.g,da(this,u.s),this.l=u.l;var f=u.i,m=new ni;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),qc(this,m),this.m=u.m}else u&&(f=String(u).match(zc))?(this.h=!1,co(this,f[1]||"",!0),this.o=ho(f[2]||""),this.g=ho(f[3]||"",!0),da(this,f[4]),this.l=ho(f[5]||"",!0),qc(this,f[6]||"",!0),this.m=ho(f[7]||"")):(this.h=!1,this.i=new ni(null,this.h))}ti.prototype.toString=function(){var u=[],f=this.j;f&&u.push(fo(f,Wc,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(fo(f,Wc,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(fo(m,m.charAt(0)=="/"?Kc:sp,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",fo(m,Qc)),u.join("")};function ur(u){return new ti(u)}function co(u,f,m){u.j=m?ho(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function da(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function qc(u,f,m){f instanceof ni?(u.i=f,Yc(u.i,u.h)):(m||(f=fo(f,Gc)),u.i=new ni(f,u.h))}function He(u,f,m){u.i.set(f,m)}function Ci(u){return He(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ho(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fo(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,Hc),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Hc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Wc=/[#\/\?@]/g,sp=/[#\?:]/g,Kc=/[#\?]/g,Gc=/[#\?@]/g,Qc=/#/g;function ni(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function Rr(u){u.g||(u.g=new Map,u.h=0,u.i&&$n(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}t=ni.prototype,t.add=function(u,f){Rr(this),this.i=null,u=ls(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function fa(u,f){Rr(u),f=ls(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function mn(u,f){return Rr(u),f=ls(u,f),u.g.has(f)}t.forEach=function(u,f){Rr(this),this.g.forEach(function(m,E){m.forEach(function($){u.call(f,$,E,this)},this)},this)},t.na=function(){Rr(this);const u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let E=0;E<f.length;E++){const $=u[E];for(let q=0;q<$.length;q++)m.push(f[E])}return m},t.V=function(u){Rr(this);let f=[];if(typeof u=="string")mn(this,u)&&(f=f.concat(this.g.get(ls(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},t.set=function(u,f){return Rr(this),this.i=null,u=ls(this,u),mn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Jc(u,f,m){fa(u,f),0<m.length&&(u.i=null,u.g.set(ls(u,f),R(m)),u.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var E=f[m];const q=encodeURIComponent(String(E)),Z=this.V(E);for(E=0;E<Z.length;E++){var $=q;Z[E]!==""&&($+="="+encodeURIComponent(String(Z[E]))),u.push($)}}return this.i=u.join("&")};function ls(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function Yc(u,f){f&&!u.j&&(Rr(u),u.i=null,u.g.forEach(function(m,E){var $=E.toLowerCase();E!=$&&(fa(this,E),Jc(this,$,m))},u)),u.j=f}function Xc(u,f){const m=new F;if(a.Image){const E=new Image;E.onload=y(ri,m,"TestLoadImage: loaded",!0,f,E),E.onerror=y(ri,m,"TestLoadImage: error",!1,f,E),E.onabort=y(ri,m,"TestLoadImage: abort",!1,f,E),E.ontimeout=y(ri,m,"TestLoadImage: timeout",!1,f,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else f(!1)}function op(u,f){const m=new F,E=new AbortController,$=setTimeout(()=>{E.abort(),ri(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:E.signal}).then(q=>{clearTimeout($),q.ok?ri(m,"TestPingServer: ok",!0,f):ri(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout($),ri(m,"TestPingServer: error",!1,f)})}function ri(u,f,m,E,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),E(m)}catch{}}function ap(){this.g=new Nl}function lp(u,f,m){const E=m||"";try{Bc(u,function($,q){let Z=$;c($)&&(Z=Xr($)),f.push(E+q+"="+encodeURIComponent(Z))})}catch($){throw f.push(E+"type="+encodeURIComponent("_badmap")),$}}function po(u){this.l=u.Ub||null,this.j=u.eb||!1}C(po,ss),po.prototype.g=function(){return new pa(this.l,this.j)},po.prototype.i=function(u){return function(){return u}}({});function pa(u,f){ut.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(pa,ut),t=pa.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ri(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,us(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?us(this):Ri(this),this.readyState==3&&Dl(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,us(this))},t.Qa=function(u){this.g&&(this.response=u,us(this))},t.ga=function(){this.g&&us(this)};function us(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ri(u)}t.setRequestHeader=function(u,f){this.u.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Ri(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(pa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Zc(u){let f="";return x(u,function(m,E){f+=E,f+=":",f+=m,f+=`\r
`}),f}function Ll(u,f,m){e:{for(E in m){var E=!1;break e}E=!0}E||(m=Zc(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):He(u,f,m))}function Be(u){ut.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Be,ut);var Pr=/^https?$/i,eh=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,f,m,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():le.g(),this.v=this.o?Ai(this.o):Ai(le),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(q){th(this,q);return}if(u=m||"",m=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var $ in E)m.set($,E[$]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const q of E.keys())m.set(q,E.get(q));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(m.keys()).find(q=>q.toLowerCase()=="content-type"),$=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(eh,f,void 0))||E||$||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,Z]of m)this.g.setRequestHeader(q,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vl(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){th(this,q)}};function th(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,jl(u),mo(u)}function jl(u){u.A||(u.A=!0,Je(u,"complete"),Je(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Je(this,"complete"),Je(this,"abort"),mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mo(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ml(this):this.bb())},t.bb=function(){Ml(this)};function Ml(u){if(u.h&&typeof o<"u"&&(!u.v[1]||xr(u)!=4||u.Z()!=2)){if(u.u&&xr(u)==4)dn(u.Ea,0,u);else if(Je(u,"readystatechange"),xr(u)==4){u.h=!1;try{const Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var E;if(E=Z===0){var $=String(u.D).match(zc)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),E=!Pr.test($?$.toLowerCase():"")}m=E}if(m)Je(u,"complete"),Je(u,"success");else{u.m=6;try{var q=2<xr(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",jl(u)}}finally{mo(u)}}}}function mo(u,f){if(u.g){Vl(u);const m=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||Je(u,"ready");try{m.onreadystatechange=E}catch{}}}function Vl(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function xr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<xr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),ca(f)}};function nh(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function up(u){const f={};u=(u.g&&2<=xr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(T(u[E]))continue;var m=N(u[E]);const $=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const q=f[$]||[];f[$]=q,q.push(m)}I(f,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cs(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function Fl(u){this.Aa=0,this.i=[],this.j=new F,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cs("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cs("baseRetryDelayMs",5e3,u),this.cb=cs("retryDelaySeedMs",1e4,u),this.Wa=cs("forwardChannelMaxRetries",2,u),this.wa=cs("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new pe(u&&u.concurrentRequestLimit),this.Da=new ap,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Fl.prototype,t.la=8,t.G=1,t.connect=function(u,f,m,E){ct(0),this.W=u,this.H=f||{},m&&E!==void 0&&(this.H.OSID=m,this.H.OAID=E),this.F=this.X,this.I=zl(this,null,this.W),ga(this)};function $l(u){if(rh(u),u.G==3){var f=u.U++,m=ur(u.I);if(He(m,"SID",u.K),He(m,"RID",f),He(m,"TYPE","terminate"),hs(u,m),f=new ke(u,u.j,f),f.L=2,f.v=Ci(ur(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=ql(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Vn(f)}go(u)}function ma(u){u.g&&(Bl(u),u.g.cancel(),u.g=null)}function rh(u){ma(u),u.u&&(a.clearTimeout(u.u),u.u=null),va(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ga(u){if(!Ye(u.h)&&!u.s){u.s=!0;var f=u.Ga;ye||ce(),X||(ye(),X=!0),oe.add(f,u),u.B=0}}function cp(u,f){return wt(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=j(g(u.Ga,u,f),lh(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const $=new ke(this,this.j,u);let q=this.o;if(this.S&&(q?(q=w(q),k(q,this.S)):q=this.S),this.m!==null||this.O||($.H=q,q=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var E=this.i[m];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=ih(this,$,f),m=ur(this.I),He(m,"RID",u),He(m,"CVER",22),this.D&&He(m,"X-HTTP-Session-Id",this.D),hs(this,m),q&&(this.O?f="headers="+encodeURIComponent(String(Zc(q)))+"&"+f:this.m&&Ll(m,this.m,q)),pn(this.h,$),this.Ua&&He(m,"TYPE","init"),this.P?(He(m,"$req",f),He(m,"SID","null"),$.T=!0,it($,m,null)):it($,m,f),this.G=2}}else this.G==3&&(u?cr(this,u):this.i.length==0||Ye(this.h)||cr(this))};function cr(u,f){var m;f?m=f.l:m=u.U++;const E=ur(u.I);He(E,"SID",u.K),He(E,"RID",m),He(E,"AID",u.T),hs(u,E),u.m&&u.o&&Ll(E,u.m,u.o),m=new ke(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=ih(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),pn(u.h,m),it(m,E,f)}function hs(u,f){u.H&&x(u.H,function(m,E){He(f,E,m)}),u.l&&Bc({},function(m,E){He(f,E,m)})}function ih(u,f,m){m=Math.min(u.i.length,m);var E=u.l?g(u.l.Na,u.l,u):null;e:{var $=u.i;let q=-1;for(;;){const Z=["count="+m];q==-1?0<m?(q=$[0].g,Z.push("ofs="+q)):q=0:Z.push("ofs="+q);let Le=!0;for(let Et=0;Et<m;Et++){let Oe=$[Et].g;const Lt=$[Et].map;if(Oe-=q,0>Oe)q=Math.max(0,$[Et].g-100),Le=!1;else try{lp(Lt,Z,"req"+Oe+"_")}catch{E&&E(Lt)}}if(Le){E=Z.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,E}function sh(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;ye||ce(),X||(ye(),X=!0),oe.add(f,u),u.v=0}}function Ul(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=j(g(u.Fa,u),lh(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,oh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=j(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ct(10),ma(this),oh(this))};function Bl(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function oh(u){u.g=new ke(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=ur(u.qa);He(f,"RID","rpc"),He(f,"SID",u.K),He(f,"AID",u.T),He(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&He(f,"TO",u.ja),He(f,"TYPE","xmlhttp"),hs(u,f),u.m&&u.o&&Ll(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=Ci(ur(f)),m.m=null,m.P=!0,st(m,u)}t.Za=function(){this.C!=null&&(this.C=null,ma(this),Ul(this),ct(19))};function va(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function ah(u,f){var m=null;if(u.g==f){va(u),Bl(u),u.g=null;var E=2}else if(Ue(u.h,f))m=f.D,uo(u.h,f),E=1;else return;if(u.G!=0){if(f.o)if(E==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var $=u.B;E=as(),Je(E,new Zr(E,m)),ga(u)}else sh(u);else if($=f.s,$==3||$==0&&0<f.X||!(E==1&&cp(u,f)||E==2&&Ul(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),$){case 1:Or(u,5);break;case 4:Or(u,10);break;case 3:Or(u,6);break;default:Or(u,2)}}}function lh(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Or(u,f){if(u.j.info("Error code "+f),f==2){var m=g(u.fb,u),E=u.Xa;const $=!E;E=new ti(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||co(E,"https"),Ci(E),$?Xc(E.toString(),m):op(E.toString(),m)}else ct(2);u.G=0,u.l&&u.l.sa(f),go(u),rh(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function go(u){if(u.G=0,u.ka=[],u.l){const f=ha(u.h);(f.length!=0||u.i.length!=0)&&(O(u.ka,f),O(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function zl(u,f,m){var E=m instanceof ti?ur(m):new ti(m);if(E.g!="")f&&(E.g=f+"."+E.g),da(E,E.s);else{var $=a.location;E=$.protocol,f=f?f+"."+$.hostname:$.hostname,$=+$.port;var q=new ti(null);E&&co(q,E),f&&(q.g=f),$&&da(q,$),m&&(q.l=m),E=q}return m=u.D,f=u.ya,m&&f&&He(E,m,f),He(E,"VER",u.la),hs(u,E),E}function ql(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Be(new po({eb:m})):new Be(u.pa),f.Ha(u.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ds(){}t=ds.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function fs(){}fs.prototype.g=function(u,f){return new gn(u,f)};function gn(u,f){ut.call(this),this.g=new Fl(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!T(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new An(this)}C(gn,ut),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){$l(this.g)},gn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Xr(u),u=m);f.i.push(new Fn(f.Ya++,u)),f.G==3&&ga(f)},gn.prototype.N=function(){this.g.l=null,delete this.j,$l(this.g),delete this.g,gn.aa.N.call(this)};function uh(u){Ar.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}C(uh,Ar);function ch(){ir.call(this),this.status=1}C(ch,ir);function An(u){this.g=u}C(An,ds),An.prototype.ua=function(){Je(this.g,"a")},An.prototype.ta=function(u){Je(this.g,new uh(u))},An.prototype.sa=function(u){Je(this.g,new ch)},An.prototype.ra=function(){Je(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,Kb=function(){return new fs},Wb=function(){return as()},Hb=sr,fg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Y.NO_ERROR=0,Y.TIMEOUT=8,Y.HTTP_ERROR=6,sd=Y,ve.COMPLETE="complete",qb=ve,ao.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",ut.prototype.listen=ut.prototype.K,fu=ao,zb=po,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,Bb=Be}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const zw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new Sf("@firebase/firestore");function nu(){return Wo.logLevel}function ae(t,...e){if(Wo.logLevel<=De.DEBUG){const n=e.map(Kv);Wo.debug(`Firestore (${bl}): ${t}`,...n)}}function Zi(t,...e){if(Wo.logLevel<=De.ERROR){const n=e.map(Kv);Wo.error(`Firestore (${bl}): ${t}`,...n)}}function ol(t,...e){if(Wo.logLevel<=De.WARN){const n=e.map(Kv);Wo.warn(`Firestore (${bl}): ${t}`,...n)}}function Kv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${bl}) INTERNAL ASSERTION FAILED: `+t;throw Zi(e),new Error(e)}function Xe(t,e){t||_e()}function Ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends Gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $N{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class UN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BN{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Xe(typeof r.accessToken=="string"),new Gb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xe(e===null||typeof e=="string"),new nn(e)}}class zN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class qN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new zN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class HN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class WN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xe(typeof n.token=="string"),this.R=n.token,new HN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=KN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function al(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new de(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Dt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.timestamp=e}static fromTimestamp(e){return new we(e)}static min(){return new we(new Dt(0,0))}static max(){return new we(new Dt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(),r===void 0?r=e.length-n:r>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ac.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ac?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class dt extends ac{construct(e,n,r){return new dt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new de(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new dt(n)}static emptyPath(){return new dt([])}}const GN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends ac{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return GN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ht(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new de(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new de(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new de(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new de(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(dt.fromString(e))}static fromName(e){return new fe(dt.fromString(e).popFirst(5))}static empty(){return new fe(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new dt(e.slice()))}}function QN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=we.fromTimestamp(r===1e9?new Dt(n+1,0):new Dt(n,r));return new Ws(i,fe.empty(),e)}function JN(t){return new Ws(t.readTime,t.key,-1)}class Ws{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ws(we.min(),fe.empty(),-1)}static max(){return new Ws(we.max(),fe.empty(),-1)}}function YN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ZN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==XN)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new Q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function eD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Rc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Gv.oe=-1;function kf(t){return t==null}function zd(t){return t===0&&1/t==-1/0}function tD(t){return typeof t=="number"&&Number.isInteger(t)&&!zd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Il(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||qt.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,qt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Nh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Nh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Nh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Nh(this.root,e,this.comparator,!0)}}class Nh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??qt.RED,this.left=i??qt.EMPTY,this.right=s??qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new qt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return qt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}qt.EMPTY=null,qt.RED=!0,qt.BLACK=!1;qt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,r,i,s){return this}insert(e,n,r){return new qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Hw(this.data.getIterator())}getIteratorFrom(e){return new Hw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class Hw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Br([])}unionWith(e){let n=new Kt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Br(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return al(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Yb("Invalid base64 string: "+s):s}}(e);return new Qt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Qt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const nD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ks(t){if(Xe(!!t),typeof t=="string"){let e=0;const n=nD.exec(t);if(Xe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(t.seconds),nanos:Tt(t.nanos)}}function Tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ko(t){return typeof t=="string"?Qt.fromBase64String(t):Qt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jv(t){const e=t.mapValue.fields.__previous_value__;return Qv(e)?Jv(e):e}function lc(t){const e=Ks(t.mapValue.fields.__local_write_time__.timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class uc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new uc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Go(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qv(t)?4:sD(t)?9007199254740991:iD(t)?10:11:_e()}function vi(t,e){if(t===e)return!0;const n=Go(t);if(n!==Go(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return lc(t).isEqual(lc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ks(i.timestampValue),a=Ks(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ko(i.bytesValue).isEqual(Ko(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Tt(i.geoPointValue.latitude)===Tt(s.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Tt(i.integerValue)===Tt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Tt(i.doubleValue),a=Tt(s.doubleValue);return o===a?zd(o)===zd(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return al(t.arrayValue.values||[],e.arrayValue.values||[],vi);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(qw(o)!==qw(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!vi(o[l],a[l])))return!1;return!0}(t,e);default:return _e()}}function cc(t,e){return(t.values||[]).find(n=>vi(n,e))!==void 0}function ll(t,e){if(t===e)return 0;const n=Go(t),r=Go(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Tt(s.integerValue||s.doubleValue),l=Tt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Ww(t.timestampValue,e.timestampValue);case 4:return Ww(lc(t),lc(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ko(s),l=Ko(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=Fe(a[c],l[c]);if(h!==0)return h}return Fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Fe(Tt(s.latitude),Tt(o.latitude));return a!==0?a:Fe(Tt(s.longitude),Tt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Kw(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,h;const p=s.fields||{},g=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,C=(l=g.value)===null||l===void 0?void 0:l.arrayValue,R=Fe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:Kw(y,C)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Dh.mapValue&&o===Dh.mapValue)return 0;if(s===Dh.mapValue)return 1;if(o===Dh.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const g=Fe(l[p],h[p]);if(g!==0)return g;const y=ll(a[l[p]],c[h[p]]);if(y!==0)return y}return Fe(l.length,h.length)}(t.mapValue,e.mapValue);default:throw _e()}}function Ww(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Ks(t),r=Ks(e),i=Fe(n.seconds,r.seconds);return i!==0?i:Fe(n.nanos,r.nanos)}function Kw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ll(n[i],r[i]);if(s)return s}return Fe(n.length,r.length)}function ul(t){return pg(t)}function pg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ks(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ko(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=pg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${pg(n.fields[o])}`;return i+"}"}(t.mapValue):_e()}function mg(t){return!!t&&"integerValue"in t}function Yv(t){return!!t&&"arrayValue"in t}function Gw(t){return!!t&&"nullValue"in t}function Qw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function od(t){return!!t&&"mapValue"in t}function iD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ru(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Il(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ru(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ru(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this.value=e}static empty(){return new pr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!od(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ru(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ru(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());od(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];od(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Il(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new pr(Ru(this.value))}}function Xb(t){const e=[];return Il(t.fields,(n,r)=>{const i=new Ht([n]);if(od(r)){const s=Xb(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Br(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new sn(e,0,we.min(),we.min(),we.min(),pr.empty(),0)}static newFoundDocument(e,n,r,i){return new sn(e,1,n,we.min(),r,i,0)}static newNoDocument(e,n){return new sn(e,2,n,we.min(),we.min(),pr.empty(),0)}static newUnknownDocument(e,n){return new sn(e,3,n,we.min(),we.min(),pr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,n){this.position=e,this.inclusive=n}}function Jw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=ll(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Yw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{constructor(e,n="asc"){this.field=e,this.dir=n}}function oD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{}class Ot extends Zb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lD(e,n,r):n==="array-contains"?new hD(e,r):n==="in"?new dD(e,r):n==="not-in"?new fD(e,r):n==="array-contains-any"?new pD(e,r):new Ot(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uD(e,r):new cD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ll(n,this.value)):n!==null&&Go(this.value)===Go(n)&&this.matchesComparison(ll(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends Zb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new _i(e,n)}matches(e){return eI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eI(t){return t.op==="and"}function tI(t){return aD(t)&&eI(t)}function aD(t){for(const e of t.filters)if(e instanceof _i)return!1;return!0}function gg(t){if(t instanceof Ot)return t.field.canonicalString()+t.op.toString()+ul(t.value);if(tI(t))return t.filters.map(e=>gg(e)).join(",");{const e=t.filters.map(n=>gg(n)).join(",");return`${t.op}(${e})`}}function nI(t,e){return t instanceof Ot?function(r,i){return i instanceof Ot&&r.op===i.op&&r.field.isEqual(i.field)&&vi(r.value,i.value)}(t,e):t instanceof _i?function(r,i){return i instanceof _i&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&nI(o,i.filters[a]),!0):!1}(t,e):void _e()}function rI(t){return t instanceof Ot?function(n){return`${n.field.canonicalString()} ${n.op} ${ul(n.value)}`}(t):t instanceof _i?function(n){return n.op.toString()+" {"+n.getFilters().map(rI).join(" ,")+"}"}(t):"Filter"}class lD extends Ot{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class uD extends Ot{constructor(e,n){super(e,"in",n),this.keys=iI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cD extends Ot{constructor(e,n){super(e,"not-in",n),this.keys=iI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function iI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class hD extends Ot{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Yv(n)&&cc(n.arrayValue,this.value)}}class dD extends Ot{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&cc(this.value.arrayValue,n)}}class fD extends Ot{constructor(e,n){super(e,"not-in",n)}matches(e){if(cc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!cc(this.value.arrayValue,n)}}class pD extends Ot{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Yv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>cc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Xw(t,e=null,n=[],r=[],i=null,s=null,o=null){return new mD(t,e,n,r,i,s,o)}function Xv(t){const e=Ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>gg(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),kf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ul(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ul(r)).join(",")),e.ue=n}return e.ue}function Zv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!nI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Yw(t.startAt,e.startAt)&&Yw(t.endAt,e.endAt)}function vg(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function gD(t,e,n,r,i,s,o,a){return new Cf(t,e,n,r,i,s,o,a)}function e_(t){return new Cf(t)}function Zw(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vD(t){return t.collectionGroup!==null}function Pu(t){const e=Ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Kt(Ht.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Hd(s,r))}),n.has(Ht.keyField().canonicalString())||e.ce.push(new Hd(Ht.keyField(),r))}return e.ce}function di(t){const e=Ee(t);return e.le||(e.le=_D(e,Pu(t))),e.le}function _D(t,e){if(t.limitType==="F")return Xw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Hd(i.field,s)});const n=t.endAt?new qd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qd(t.startAt.position,t.startAt.inclusive):null;return Xw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function _g(t,e,n){return new Cf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Rf(t,e){return Zv(di(t),di(e))&&t.limitType===e.limitType}function sI(t){return`${Xv(di(t))}|lt:${t.limitType}`}function ba(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>rI(i)).join(", ")}]`),kf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ul(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ul(i)).join(",")),`Target(${r})`}(di(t))}; limitType=${t.limitType})`}function Pf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Pu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=Jw(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Pu(r),i)||r.endAt&&!function(o,a,l){const c=Jw(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Pu(r),i))}(t,e)}function yD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function oI(t){return(e,n)=>{let r=!1;for(const i of Pu(t)){const s=wD(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function wD(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?ll(l,c):_e()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Il(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Jb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=new _t(fe.comparator);function es(){return ED}const aI=new _t(fe.comparator);function pu(...t){let e=aI;for(const n of t)e=e.insert(n.key,n);return e}function lI(t){let e=aI;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xo(){return xu()}function uI(){return xu()}function xu(){return new Al(t=>t.toString(),(t,e)=>t.isEqual(e))}const TD=new _t(fe.comparator),SD=new Kt(fe.comparator);function xe(...t){let e=SD;for(const n of t)e=e.add(n);return e}const bD=new Kt(Fe);function ID(){return bD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zd(e)?"-0":e}}function cI(t){return{integerValue:""+t}}function AD(t,e){return tD(e)?cI(e):t_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(){this._=void 0}}function kD(t,e,n){return t instanceof Wd?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Qv(s)&&(s=Jv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof hc?dI(t,e):t instanceof dc?fI(t,e):function(i,s){const o=hI(i,s),a=e0(o)+e0(i.Pe);return mg(o)&&mg(i.Pe)?cI(a):t_(i.serializer,a)}(t,e)}function CD(t,e,n){return t instanceof hc?dI(t,e):t instanceof dc?fI(t,e):n}function hI(t,e){return t instanceof Kd?function(r){return mg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Wd extends xf{}class hc extends xf{constructor(e){super(),this.elements=e}}function dI(t,e){const n=pI(e);for(const r of t.elements)n.some(i=>vi(i,r))||n.push(r);return{arrayValue:{values:n}}}class dc extends xf{constructor(e){super(),this.elements=e}}function fI(t,e){let n=pI(e);for(const r of t.elements)n=n.filter(i=>!vi(i,r));return{arrayValue:{values:n}}}class Kd extends xf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function e0(t){return Tt(t.integerValue||t.doubleValue)}function pI(t){return Yv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function RD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof hc&&i instanceof hc||r instanceof dc&&i instanceof dc?al(r.elements,i.elements,vi):r instanceof Kd&&i instanceof Kd?vi(r.Pe,i.Pe):r instanceof Wd&&i instanceof Wd}(t.transform,e.transform)}class PD{constructor(e,n){this.version=e,this.transformResults=n}}class fi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fi}static exists(e){return new fi(void 0,e)}static updateTime(e){return new fi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ad(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Of{}function mI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vI(t.key,fi.none()):new Pc(t.key,t.data,fi.none());{const n=t.data,r=pr.empty();let i=new Kt(Ht.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new oa(t.key,r,new Br(i.toArray()),fi.none())}}function xD(t,e,n){t instanceof Pc?function(i,s,o){const a=i.value.clone(),l=n0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof oa?function(i,s,o){if(!ad(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=n0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(gI(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ou(t,e,n,r){return t instanceof Pc?function(s,o,a,l){if(!ad(s.precondition,o))return a;const c=s.value.clone(),h=r0(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof oa?function(s,o,a,l){if(!ad(s.precondition,o))return a;const c=r0(s.fieldTransforms,l,o),h=o.data;return h.setAll(gI(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return ad(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function OD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=hI(r.transform,i||null);s!=null&&(n===null&&(n=pr.empty()),n.set(r.field,s))}return n||null}function t0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&al(r,i,(s,o)=>RD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Pc extends Of{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class oa extends Of{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function gI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function n0(t,e,n){const r=new Map;Xe(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,CD(o,a,n[i]))}return r}function r0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,kD(s,o,e))}return r}class vI extends Of{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ND extends Of{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&xD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ou(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=uI();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=mI(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&al(this.mutations,e.mutations,(n,r)=>t0(n,r))&&al(this.baseMutations,e.baseMutations,(n,r)=>t0(n,r))}}class n_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Xe(e.mutations.length===r.length);let i=function(){return TD}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,je;function MD(t){switch(t){default:return _e();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function _I(t){if(t===void 0)return Zi("GRPC error has no .code"),G.UNKNOWN;switch(t){case bt.OK:return G.OK;case bt.CANCELLED:return G.CANCELLED;case bt.UNKNOWN:return G.UNKNOWN;case bt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case bt.INTERNAL:return G.INTERNAL;case bt.UNAVAILABLE:return G.UNAVAILABLE;case bt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case bt.NOT_FOUND:return G.NOT_FOUND;case bt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case bt.ABORTED:return G.ABORTED;case bt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case bt.DATA_LOSS:return G.DATA_LOSS;default:return _e()}}(je=bt||(bt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD=new Mo([4294967295,4294967295],0);function i0(t){const e=VD().encode(t),n=new Ub;return n.update(e),new Uint8Array(n.digest())}function s0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Mo([n,r],0),new Mo([i,s],0)]}class r_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new mu(`Invalid padding: ${n}`);if(r<0)throw new mu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new mu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new mu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Mo.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Mo.fromNumber(r)));return i.compare(FD)===1&&(i=new Mo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=i0(e),[r,i]=s0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new r_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=i0(e),[r,i]=s0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class mu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Nf(we.min(),i,new _t(Fe),es(),xe())}}class xc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xc(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ld{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class yI{constructor(e,n){this.targetId=e,this.me=n}}class wI{constructor(e,n,r=Qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class o0{constructor(){this.fe=0,this.ge=l0(),this.pe=Qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),n=xe(),r=xe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:_e()}}),new xc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=l0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $D{constructor(e){this.Le=e,this.Be=new Map,this.ke=es(),this.qe=a0(),this.Qe=new _t(Fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(vg(s))if(r===0){const o=new fe(s.path);this.Ue(n,o,sn.newNoDocument(o,we.min()))}else Xe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ko(r).toUint8Array()}catch(l){if(l instanceof Yb)return ol("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new r_(o,i,s)}catch(l){return ol(l instanceof mu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&vg(a.target)){const l=new fe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,sn.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=xe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Nf(e,n,this.Qe,this.ke,r);return this.ke=es(),this.qe=a0(),this.Qe=new _t(Fe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new o0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Kt(Fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new o0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function a0(){return new _t(fe.comparator)}function l0(){return new _t(fe.comparator)}const UD={asc:"ASCENDING",desc:"DESCENDING"},BD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zD={and:"AND",or:"OR"};class qD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yg(t,e){return t.useProto3Json||kf(e)?e:{value:e}}function Gd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function EI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HD(t,e){return Gd(t,e.toTimestamp())}function pi(t){return Xe(!!t),we.fromTimestamp(function(n){const r=Ks(n);return new Dt(r.seconds,r.nanos)}(t))}function i_(t,e){return wg(t,e).canonicalString()}function wg(t,e){const n=function(i){return new dt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function TI(t){const e=dt.fromString(t);return Xe(kI(e)),e}function Eg(t,e){return i_(t.databaseId,e.path)}function Gp(t,e){const n=TI(e);if(n.get(1)!==t.databaseId.projectId)throw new de(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new de(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(bI(n))}function SI(t,e){return i_(t.databaseId,e)}function WD(t){const e=TI(t);return e.length===4?dt.emptyPath():bI(e)}function Tg(t){return new dt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bI(t){return Xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function u0(t,e,n){return{name:Eg(t,e),fields:n.value.mapValue.fields}}function KD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Xe(h===void 0||typeof h=="string"),Qt.fromBase64String(h||"")):(Xe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Qt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?G.UNKNOWN:_I(c.code);return new de(h,c.message||"")}(o);n=new wI(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Gp(t,r.document.name),s=pi(r.document.updateTime),o=r.document.createTime?pi(r.document.createTime):we.min(),a=new pr({mapValue:{fields:r.document.fields}}),l=sn.newFoundDocument(i,s,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new ld(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Gp(t,r.document),s=r.readTime?pi(r.readTime):we.min(),o=sn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ld([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Gp(t,r.document),s=r.removedTargetIds||[];n=new ld([],s,i,null)}else{if(!("filter"in e))return _e();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new jD(i,s),a=r.targetId;n=new yI(a,o)}}return n}function GD(t,e){let n;if(e instanceof Pc)n={update:u0(t,e.key,e.value)};else if(e instanceof vI)n={delete:Eg(t,e.key)};else if(e instanceof oa)n={update:u0(t,e.key,e.data),updateMask:rL(e.fieldMask)};else{if(!(e instanceof ND))return _e();n={verify:Eg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Wd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Kd)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw _e()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:HD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:_e()}(t,e.precondition)),n}function QD(t,e){return t&&t.length>0?(Xe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?pi(i.updateTime):pi(s);return o.isEqual(we.min())&&(o=pi(s)),new PD(o,i.transformResults||[])}(n,e))):[]}function JD(t,e){return{documents:[SI(t,e.path)]}}function YD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=SI(t,i);const s=function(c){if(c.length!==0)return AI(_i.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:Ia(g.field),direction:eL(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=yg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function XD(t){let e=WD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Xe(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const g=II(p);return g instanceof _i&&tI(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(C){return new Hd(Aa(C.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,kf(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(p){const g=!!p.before,y=p.values||[];return new qd(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const g=!p.before,y=p.values||[];return new qd(y,g)}(n.endAt)),gD(e,i,o,s,a,"F",l,c)}function ZD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function II(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Aa(n.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Aa(n.unaryFilter.field);return Ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Aa(n.unaryFilter.field);return Ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Aa(n.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):t.fieldFilter!==void 0?function(n){return Ot.create(Aa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return _i.create(n.compositeFilter.filters.map(r=>II(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(t):_e()}function eL(t){return UD[t]}function tL(t){return BD[t]}function nL(t){return zD[t]}function Ia(t){return{fieldPath:t.canonicalString()}}function Aa(t){return Ht.fromServerFormat(t.fieldPath)}function AI(t){return t instanceof Ot?function(n){if(n.op==="=="){if(Qw(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NAN"}};if(Gw(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qw(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NOT_NAN"}};if(Gw(n.value))return{unaryFilter:{field:Ia(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ia(n.field),op:tL(n.op),value:n.value}}}(t):t instanceof _i?function(n){const r=n.getFilters().map(i=>AI(i));return r.length===1?r[0]:{compositeFilter:{op:nL(n.op),filters:r}}}(t):_e()}function rL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function kI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n,r,i,s=we.min(),o=we.min(),a=Qt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.ct=e}}function sL(t){const e=XD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?_g(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(){this.un=new aL}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Ws.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Ws.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class aL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Kt(dt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Kt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new cl(0)}static kn(){return new cl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.changes=new Al(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ou(r.mutation,i,Br.empty(),Dt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const i=xo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=pu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=es();const o=xu(),a=function(){return xu()}();return n.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof oa)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Ou(h.mutation,c,h.mutation.getFieldMask(),Dt.now())):o.set(c.key,Br.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var p;return a.set(c,new uL(h,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=xu();let i=new _t((o,a)=>o-a),s=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let h=r.get(l)||Br.empty();h=a.applyToLocalView(c,h),r.set(l,h);const p=(i.get(a.batchId)||xe()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=uI();h.forEach(g=>{if(!s.has(g)){const y=mI(n.get(g),r.get(g));y!==null&&p.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Q.resolve(xo());let a=-1,l=s;return o.next(c=>Q.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,xe())).next(h=>({batchId:a,changes:lI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=pu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=pu();return this.indexManager.getCollectionParents(e,s).next(a=>Q.forEach(a,l=>{const c=function(p,g){return new Cf(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,sn.newInvalidDocument(h)))});let a=pu();return o.forEach((l,c)=>{const h=s.get(l);h!==void 0&&Ou(h.mutation,c,Br.empty(),Dt.now()),Pf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:pi(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:sL(i.bundledQuery),readTime:pi(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.overlays=new _t(fe.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xo();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=xo(),s=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new _t((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=xo(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=xo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return Q.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new LD(n,r));let s=this.Ir.get(n);s===void 0&&(s=xe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(){this.Tr=new Kt(Vt.Er),this.dr=new Kt(Vt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Vt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Vt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fe(new dt([])),r=new Vt(n,e),i=new Vt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fe(new dt([])),r=new Vt(n,e),i=new Vt(n,e+1);let s=xe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Vt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Vt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fe.comparator(e.key,n.key)||Fe(e.wr,n.wr)}static Ar(e,n){return Fe(e.wr,n.wr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Kt(Vt.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new DD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Vt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Vt(n,0),i=new Vt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Kt(Fe);return n.forEach(i=>{const s=new Vt(i,0),o=new Vt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;fe.isDocumentKey(s)||(s=s.child(""));const o=new Vt(new fe(s),0);let a=new Kt(Fe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),Q.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Q.forEach(n.mutations,i=>{const s=new Vt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Vt(n,0),i=this.br.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.Mr=e,this.docs=function(){return new _t(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():sn.newInvalidDocument(n))}getEntries(e,n){let r=es();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sn.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=es();const o=n.path,a=new fe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||YN(JN(h),r)<=0||(i.has(h.key)||Pf(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){_e()}Or(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new gL(this)}getSize(e){return Q.resolve(this.size)}}class gL extends lL{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e){this.persistence=e,this.Nr=new Al(n=>Xv(n),Zv),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.Lr=0,this.Br=new s_,this.targetCount=0,this.kr=cl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new cl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Gv(0),this.Kr=!1,this.Kr=!0,this.$r=new fL,this.referenceDelegate=e(this),this.Ur=new vL(this),this.indexManager=new oL,this.remoteDocumentCache=function(i){return new mL(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new iL(n),this.Gr=new hL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new pL(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const i=new yL(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class yL extends ZN{constructor(e){super(),this.currentSequenceNumber=e}}class o_{constructor(e){this.persistence=e,this.Jr=new s_,this.Yr=null}static Zr(e){return new o_(e)}get Xr(){if(this.Yr)return this.Yr;throw _e()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{const i=fe.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,we.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=xe(),i=xe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new a_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return lP()?8:eD(ln())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new wL;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(nu()<=De.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",ba(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(nu()<=De.DEBUG&&ae("QueryEngine","Query:",ba(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(nu()<=De.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",ba(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(n))):Q.resolve())}Yi(e,n){if(Zw(n))return Q.resolve(null);let r=di(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=_g(n,null,"F"),r=di(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=xe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,_g(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return Zw(n)||i.isEqual(we.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Q.resolve(null):(nu()<=De.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ba(n)),this.rs(e,o,n,QN(i,-1)).next(a=>a))})}ts(e,n){let r=new Kt(oI(e));return n.forEach((i,s)=>{Pf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return nu()<=De.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",ba(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ws.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new _t(Fe),this._s=new Al(s=>Xv(s),Zv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cL(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function SL(t,e,n,r){return new TL(t,e,n,r)}async function CI(t,e){const n=Ee(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=xe();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function bL(t,e){const n=Ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,g=p.keys();let y=Q.resolve();return g.forEach(C=>{y=y.next(()=>h.getEntry(l,C)).next(R=>{const O=c.docVersions.get(C);Xe(O!==null),R.version.compareTo(O)<0&&(p.applyToRemoteDocument(R,c),R.isValidDocument()&&(R.setReadTime(c.commitVersion),h.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=xe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function RI(t){const e=Ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function IL(t,e){const n=Ee(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,p)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Qt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(R,O,A){return R.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(g,y,h)&&a.push(n.Ur.updateTargetData(s,y))});let l=es(),c=xe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(AL(s,o,e.documentUpdates).next(h=>{l=h.Ps,c=h.Is})),!r.isEqual(we.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return Q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function AL(t,e,n){let r=xe(),i=xe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=es();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(we.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ae("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function kL(t,e){const n=Ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function CL(t,e){const n=Ee(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Os(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Sg(t,e,n){const r=Ee(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Rc(o))throw o;ae("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function c0(t,e,n){const r=Ee(t);let i=we.min(),s=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const p=Ee(l),g=p._s.get(h);return g!==void 0?Q.resolve(p.os.get(g)):p.Ur.getTargetData(c,h)}(r,o,di(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:we.min(),n?s:xe())).next(a=>(RL(r,yD(e),a),{documents:a,Ts:s})))}function RL(t,e,n){let r=t.us.get(e)||we.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class h0{constructor(){this.activeTargetIds=ID()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class PL{constructor(){this.so=new h0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new h0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ae("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ae("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=null;function Qp(){return Lh===null?Lh=function(){return 268435456+Math.round(2147483648*Math.random())}():Lh++,"0x"+Lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class DL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=Qp(),l=this.xo(n,r.toUriEncodedString());ae("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(h=>(ae("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ol("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=OL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=Qp();return new Promise((o,a)=>{const l=new Bb;l.setWithCredentials(!0),l.listenOnce(qb.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case sd.NO_ERROR:const h=l.getResponseJson();ae(en,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case sd.TIMEOUT:ae(en,`RPC '${e}' ${s} timed out`),a(new de(G.DEADLINE_EXCEEDED,"Request time out"));break;case sd.HTTP_ERROR:const p=l.getStatus();if(ae(en,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const C=function(O){const A=O.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(A)>=0?A:G.UNKNOWN}(y.status);a(new de(C,y.message))}else a(new de(G.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new de(G.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{ae(en,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ae(en,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=Qp(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kb(),a=Wb(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new zb({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ae(en,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);let g=!1,y=!1;const C=new NL({Io:O=>{y?ae(en,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(g||(ae(en,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ae(en,`RPC '${e}' stream ${i} sending:`,O),p.send(O))},To:()=>p.close()}),R=(O,A,T)=>{O.listen(A,S=>{try{T(S)}catch(D){setTimeout(()=>{throw D},0)}})};return R(p,fu.EventType.OPEN,()=>{y||(ae(en,`RPC '${e}' stream ${i} transport opened.`),C.yo())}),R(p,fu.EventType.CLOSE,()=>{y||(y=!0,ae(en,`RPC '${e}' stream ${i} transport closed`),C.So())}),R(p,fu.EventType.ERROR,O=>{y||(y=!0,ol(en,`RPC '${e}' stream ${i} transport errored:`,O),C.So(new de(G.UNAVAILABLE,"The operation could not be completed")))}),R(p,fu.EventType.MESSAGE,O=>{var A;if(!y){const T=O.data[0];Xe(!!T);const S=T,D=S.error||((A=S[0])===null||A===void 0?void 0:A.error);if(D){ae(en,`RPC '${e}' stream ${i} received error:`,D);const B=D.status;let x=function(b){const k=bt[b];if(k!==void 0)return _I(k)}(B),I=D.message;x===void 0&&(x=G.INTERNAL,I="Unknown error status: "+B+" with message "+D.message),y=!0,C.So(new de(x,I)),p.close()}else ae(en,`RPC '${e}' stream ${i} received:`,T),C.bo(T)}}),R(a,Hb.STAT_EVENT,O=>{O.stat===fg.PROXY?ae(en,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===fg.NOPROXY&&ae(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function Jp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t){return new qD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new PI(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Zi(n.toString()),Zi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new de(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ae("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ae("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LL extends xI{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=KD(this.serializer,e),r=function(s){if(!("targetChange"in s))return we.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?pi(o.readTime):we.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Tg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=vg(l)?{documents:JD(s,l)}:{query:YD(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=EI(s,o.resumeToken);const c=yg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(we.min())>0){a.readTime=Gd(s,o.snapshotVersion.toTimestamp());const c=yg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=ZD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Tg(this.serializer),n.removeTarget=e,this.a_(n)}}class jL extends xI{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,Xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=QD(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Tg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>GD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new de(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,wg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new de(G.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,wg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new de(G.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Zi(n),this.D_=!1):ae("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{aa(this)&&(ae("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Ee(l);c.L_.add(4),await Oc(c),c.q_.set("Unknown"),c.L_.delete(4),await Lf(c)}(this))})}),this.q_=new VL(r,i)}}async function Lf(t){if(aa(t))for(const e of t.B_)await e(!0)}async function Oc(t){for(const e of t.B_)await e(!1)}function OI(t,e){const n=Ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),h_(n)?c_(n):kl(n).r_()&&u_(n,e))}function l_(t,e){const n=Ee(t),r=kl(n);n.N_.delete(e),r.r_()&&NI(n,e),n.N_.size===0&&(r.r_()?r.o_():aa(n)&&n.q_.set("Unknown"))}function u_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}kl(t).A_(e)}function NI(t,e){t.Q_.xe(e),kl(t).R_(e)}function c_(t){t.Q_=new $D({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),kl(t).start(),t.q_.v_()}function h_(t){return aa(t)&&!kl(t).n_()&&t.N_.size>0}function aa(t){return Ee(t).L_.size===0}function DI(t){t.Q_=void 0}async function $L(t){t.q_.set("Online")}async function UL(t){t.N_.forEach((e,n)=>{u_(t,e)})}async function BL(t,e){DI(t),h_(t)?(t.q_.M_(e),c_(t)):t.q_.set("Unknown")}async function zL(t,e,n){if(t.q_.set("Online"),e instanceof wI&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){ae("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qd(t,r)}else if(e instanceof ld?t.Q_.Ke(e):e instanceof yI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(we.min()))try{const r=await RI(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(Qt.EMPTY_BYTE_STRING,h.snapshotVersion)),NI(s,l);const p=new Os(h.target,l,c,h.sequenceNumber);u_(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ae("RemoteStore","Failed to raise snapshot:",r),await Qd(t,r)}}async function Qd(t,e,n){if(!Rc(e))throw e;t.L_.add(1),await Oc(t),t.q_.set("Offline"),n||(n=()=>RI(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Lf(t)})}function LI(t,e){return e().catch(n=>Qd(t,n,e))}async function jf(t){const e=Ee(t),n=Gs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;qL(e);)try{const i=await kL(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,HL(e,i)}catch(i){await Qd(e,i)}jI(e)&&MI(e)}function qL(t){return aa(t)&&t.O_.length<10}function HL(t,e){t.O_.push(e);const n=Gs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function jI(t){return aa(t)&&!Gs(t).n_()&&t.O_.length>0}function MI(t){Gs(t).start()}async function WL(t){Gs(t).p_()}async function KL(t){const e=Gs(t);for(const n of t.O_)e.m_(n.mutations)}async function GL(t,e,n){const r=t.O_.shift(),i=n_.from(r,e,n);await LI(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await jf(t)}async function QL(t,e){e&&Gs(t).V_&&await async function(r,i){if(function(o){return MD(o)&&o!==G.ABORTED}(i.code)){const s=r.O_.shift();Gs(r).s_(),await LI(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await jf(r)}}(t,e),jI(t)&&MI(t)}async function f0(t,e){const n=Ee(t);n.asyncQueue.verifyOperationInProgress(),ae("RemoteStore","RemoteStore received new credentials");const r=aa(n);n.L_.add(3),await Oc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Lf(n)}async function JL(t,e){const n=Ee(t);e?(n.L_.delete(2),await Lf(n)):e||(n.L_.add(2),await Oc(n),n.q_.set("Unknown"))}function kl(t){return t.K_||(t.K_=function(n,r,i){const s=Ee(n);return s.w_(),new LL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:$L.bind(null,t),Ro:UL.bind(null,t),mo:BL.bind(null,t),d_:zL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),h_(t)?c_(t):t.q_.set("Unknown")):(await t.K_.stop(),DI(t))})),t.K_}function Gs(t){return t.U_||(t.U_=function(n,r,i){const s=Ee(n);return s.w_(),new jL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:WL.bind(null,t),mo:QL.bind(null,t),f_:KL.bind(null,t),g_:GL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await jf(t)):(await t.U_.stop(),t.O_.length>0&&(ae("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new d_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function f_(t,e){if(Zi("AsyncQueue",`${e}: ${t}`),Rc(t))return new de(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=pu(),this.sortedSet=new _t(this.comparator)}static emptySet(e){return new Xa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(){this.W_=new _t(fe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):_e():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class hl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new hl(e,n,Xa.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class XL{constructor(){this.queries=m0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=Ee(n),s=i.queries;i.queries=m0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new de(G.ABORTED,"Firestore shutting down"))}}function m0(){return new Al(t=>sI(t),Rf)}async function VI(t,e){const n=Ee(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new YL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=f_(o,`Initialization of query '${ba(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&p_(n)}async function FI(t,e){const n=Ee(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function ZL(t,e){const n=Ee(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&p_(n)}function ej(t,e,n){const r=Ee(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function p_(t){t.Y_.forEach(e=>{e.next()})}var bg,g0;(g0=bg||(bg={})).ea="default",g0.Cache="cache";class $I{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new hl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=hl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==bg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.key=e}}class BI{constructor(e){this.key=e}}class tj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=oI(e),this.Ra=new Xa(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new p0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),y=Pf(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let O=!1;g&&y?g.data.isEqual(y.data)?C!==R&&(r.track({type:3,doc:y}),O=!0):this.ga(g,y)||(r.track({type:2,doc:y}),O=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),O=!0):g&&!y&&(r.track({type:1,doc:g}),O=!0,(l||c)&&(a=!0)),O&&(y?(o=o.add(y),s=R?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,p)=>function(y,C){const R=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return R(y)-R(C)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new hl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new p0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new BI(r))}),this.da.forEach(r=>{e.has(r)||n.push(new UI(r))}),n}ba(e){this.Ta=e.Ts,this.da=xe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return hl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rj{constructor(e){this.key=e,this.va=!1}}class ij{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Al(a=>sI(a),Rf),this.Ma=new Map,this.xa=new Set,this.Oa=new _t(fe.comparator),this.Na=new Map,this.La=new s_,this.Ba={},this.ka=new Map,this.qa=cl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function sj(t,e,n=!0){const r=GI(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await zI(r,e,n,!0),i}async function oj(t,e){const n=GI(t);await zI(n,e,!0,!1)}async function zI(t,e,n,r){const i=await CL(t.localStore,di(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await aj(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&OI(t.remoteStore,i),a}async function aj(t,e,n,r,i){t.Ka=(p,g,y)=>async function(R,O,A,T){let S=O.view.ma(A);S.ns&&(S=await c0(R.localStore,O.query,!1).then(({documents:I})=>O.view.ma(I,S)));const D=T&&T.targetChanges.get(O.targetId),B=T&&T.targetMismatches.get(O.targetId)!=null,x=O.view.applyChanges(S,R.isPrimaryClient,D,B);return _0(R,O.targetId,x.wa),x.snapshot}(t,p,g,y);const s=await c0(t.localStore,e,!0),o=new tj(e,s.Ts),a=o.ma(s.documents),l=xc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);_0(t,n,c.wa);const h=new nj(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function lj(t,e,n){const r=Ee(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Rf(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Sg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&l_(r.remoteStore,i.targetId),Ig(r,i.targetId)}).catch(Cc)):(Ig(r,i.targetId),await Sg(r.localStore,i.targetId,!0))}async function uj(t,e){const n=Ee(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),l_(n.remoteStore,r.targetId))}async function cj(t,e,n){const r=vj(t);try{const i=await function(o,a){const l=Ee(o),c=Dt.now(),h=a.reduce((y,C)=>y.add(C.key),xe());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let C=es(),R=xe();return l.cs.getEntries(y,h).next(O=>{C=O,C.forEach((A,T)=>{T.isValidDocument()||(R=R.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,C)).next(O=>{p=O;const A=[];for(const T of a){const S=OD(T,p.get(T.key).overlayedDocument);S!=null&&A.push(new oa(T.key,S,Xb(S.value.mapValue),fi.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,A,a)}).next(O=>{g=O;const A=O.applyToLocalDocumentSet(p,R);return l.documentOverlayCache.saveOverlays(y,O.batchId,A)})}).then(()=>({batchId:g.batchId,changes:lI(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new _t(Fe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Nc(r,i.changes),await jf(r.remoteStore)}catch(i){const s=f_(i,"Failed to persist write");n.reject(s)}}async function qI(t,e){const n=Ee(t);try{const r=await IL(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Xe(o.va):i.removedDocuments.size>0&&(Xe(o.va),o.va=!1))}),await Nc(n,r,e)}catch(r){await Cc(r)}}function v0(t,e,n){const r=Ee(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Ee(o);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const g of p.j_)g.Z_(a)&&(c=!0)}),c&&p_(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function hj(t,e,n){const r=Ee(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new _t(fe.comparator);o=o.insert(s,sn.newNoDocument(s,we.min()));const a=xe().add(s),l=new Nf(we.min(),new Map,new _t(Fe),o,a);await qI(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),m_(r)}else await Sg(r.localStore,e,!1).then(()=>Ig(r,e,n)).catch(Cc)}async function dj(t,e){const n=Ee(t),r=e.batch.batchId;try{const i=await bL(n.localStore,e);WI(n,r,null),HI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nc(n,i)}catch(i){await Cc(i)}}async function fj(t,e,n){const r=Ee(t);try{const i=await function(o,a){const l=Ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Xe(p!==null),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);WI(r,e,n),HI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nc(r,i)}catch(i){await Cc(i)}}function HI(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function WI(t,e,n){const r=Ee(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ig(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||KI(t,r)})}function KI(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(l_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),m_(t))}function _0(t,e,n){for(const r of n)r instanceof UI?(t.La.addReference(r.key,e),pj(t,r)):r instanceof BI?(ae("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||KI(t,r.key)):_e()}function pj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ae("SyncEngine","New document in limbo: "+n),t.xa.add(r),m_(t))}function m_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fe(dt.fromString(e)),r=t.qa.next();t.Na.set(r,new rj(n)),t.Oa=t.Oa.insert(n,r),OI(t.remoteStore,new Os(di(e_(n.path)),r,"TargetPurposeLimboResolution",Gv.oe))}}async function Nc(t,e,n){const r=Ee(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){i.push(c);const p=a_.Wi(l.targetId,c);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const h=Ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Q.forEach(c,g=>Q.forEach(g.$i,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>Q.forEach(g.Ui,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Rc(p))throw p;ae("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const g=p.targetId;if(!p.fromCache){const y=h.os.get(g),C=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(C);h.os=h.os.insert(g,R)}}}(r.localStore,s))}async function mj(t,e){const n=Ee(t);if(!n.currentUser.isEqual(e)){ae("SyncEngine","User change. New user:",e.toKey());const r=await CI(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new de(G.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nc(n,r.hs)}}function gj(t,e){const n=Ee(t),r=n.Na.get(e);if(r&&r.va)return xe().add(r.key);{let i=xe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function GI(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=qI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hj.bind(null,e),e.Ca.d_=ZL.bind(null,e.eventManager),e.Ca.$a=ej.bind(null,e.eventManager),e}function vj(t){const e=Ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fj.bind(null,e),e}class y0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Df(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return SL(this.persistence,new EL,e.initialUser,this.serializer)}createPersistence(e){return new _L(o_.Zr,this.serializer)}createSharedClientState(e){return new PL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _j{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>v0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mj.bind(null,this.syncEngine),await JL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new XL}()}createDatastore(e){const n=Df(e.databaseInfo.databaseId),r=function(s){return new DL(s)}(e.databaseInfo);return function(s,o,a,l){return new ML(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new FL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>v0(this.syncEngine,n,0),function(){return d0.D()?new d0:new xL}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,h){const p=new ij(i,s,o,a,l,c);return h&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Ee(i);ae("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Oc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Zi("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=Qb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{ae("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ae("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new de(G.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=f_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yp(t,e){t.asyncQueue.verifyOperationInProgress(),ae("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await CI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function w0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ej(t);ae("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>f0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>f0(e.remoteStore,i)),t._onlineComponents=e}function wj(t){return t.name==="FirebaseError"?t.code===G.FAILED_PRECONDITION||t.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Ej(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae("FirestoreClient","Using user provided OfflineComponentProvider");try{await Yp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!wj(n))throw n;ol("Error using user provided cache. Falling back to memory cache: "+n),await Yp(t,new y0)}}else ae("FirestoreClient","Using default OfflineComponentProvider"),await Yp(t,new y0);return t._offlineComponents}async function JI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae("FirestoreClient","Using user provided OnlineComponentProvider"),await w0(t,t._uninitializedComponentsProvider._online)):(ae("FirestoreClient","Using default OnlineComponentProvider"),await w0(t,new _j))),t._onlineComponents}function Tj(t){return JI(t).then(e=>e.syncEngine)}async function YI(t){const e=await JI(t),n=e.eventManager;return n.onListen=sj.bind(null,e.syncEngine),n.onUnlisten=lj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uj.bind(null,e.syncEngine),n}function Sj(t,e,n={}){const r=new Hi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new QI({next:g=>{o.enqueueAndForget(()=>FI(s,p));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new de(G.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?c.reject(new de(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new $I(e_(a.path),h,{includeMetadataChanges:!0,_a:!0});return VI(s,p)}(await YI(t),t.asyncQueue,e,n,r)),r.promise}function bj(t,e,n={}){const r=new Hi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const h=new QI({next:g=>{o.enqueueAndForget(()=>FI(s,p)),g.fromCache&&l.source==="server"?c.reject(new de(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new $I(a,h,{includeMetadataChanges:!0,_a:!0});return VI(s,p)}(await YI(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t,e,n){if(!n)throw new de(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Ij(t,e,n,r){if(e===!0&&r===!0)throw new de(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function T0(t){if(!fe.isDocumentKey(t))throw new de(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S0(t){if(fe.isDocumentKey(t))throw new de(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function g_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function Qs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new de(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=g_(t);throw new de(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new de(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new de(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ij("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new de(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new de(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $N;switch(r.type){case"firstParty":return new qN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new de(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=E0.get(n);r&&(ae("ComponentProvider","Removing Datastore"),E0.delete(n),r.terminate())}(this),Promise.resolve()}}function Aj(t,e,n,r={}){var i;const s=(t=Qs(t,Mf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=nn.MOCK_USER;else{a=rP(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new de(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new nn(c)}t._authCredentials=new UN(new Gb(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Vf(this.firestore,e,this._query)}}class Kn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class zs extends Vf{constructor(e,n,r){super(e,n,e_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new fe(e))}withConverter(e){return new zs(this.firestore,e,this._path)}}function Ff(t,e,...n){if(t=un(t),ZI("collection","path",e),t instanceof Mf){const r=dt.fromString(e,...n);return S0(r),new zs(t,null,r)}{if(!(t instanceof Kn||t instanceof zs))throw new de(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return S0(r),new zs(t.firestore,null,r)}}function yi(t,e,...n){if(t=un(t),arguments.length===1&&(e=Qb.newId()),ZI("doc","path",e),t instanceof Mf){const r=dt.fromString(e,...n);return T0(r),new Kn(t,null,new fe(r))}{if(!(t instanceof Kn||t instanceof zs))throw new de(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(dt.fromString(e,...n));return T0(r),new Kn(t.firestore,t instanceof zs?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new PI(this,"async_queue_retry"),this.Eu=()=>{const n=Jp();n&&ae("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=Jp();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=Jp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new Hi;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Rc(e))throw e;ae("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Zi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=d_.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&_e()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Dc extends Mf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new kj}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||eA(this),this._firestoreClient.terminate()}}function Cj(t,e){const n=Mv(),r="(default)",i=ia(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=tP("firestore");s&&Aj(i,...s)}return i}function v_(t){return t._firestoreClient||eA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function eA(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,h){return new rD(a,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XI(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new yj(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dl(Qt.fromBase64String(e))}catch(n){throw new de(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new dl(Qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj=/^__.*__$/;class Pj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new oa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Pc(e,this.data,n,this.fieldTransforms)}}function nA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class E_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new E_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Jd(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(nA(this.wu)&&Rj.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class xj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Df(e)}Nu(e,n,r,i=!1){return new E_({wu:e,methodName:n,Ou:r,path:Ht.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rA(t){const e=t._freezeSettings(),n=Df(t._databaseId);return new xj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function iA(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);lA("Data must be an object, but it was:",o,r);const a=oA(r,o);let l,c;if(s.merge)l=new Br(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const g=Oj(e,p,n);if(!o.contains(g))throw new de(G.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Dj(h,g)||h.push(g)}l=new Br(h),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new Pj(new pr(a),l,c)}function sA(t,e){if(aA(t=un(t)))return lA("Unsupported field value:",e,t),oA(t,e);if(t instanceof tA)return function(r,i){if(!nA(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=sA(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=un(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Dt.fromDate(r);return{timestampValue:Gd(i.serializer,s)}}if(r instanceof Dt){const s=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gd(i.serializer,s)}}if(r instanceof y_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof dl)return{bytesValue:EI(i.serializer,r._byteString)};if(r instanceof Kn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:i_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof w_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return t_(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${g_(r)}`)}(t,e)}function oA(t,e){const n={};return Jb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Il(t,(r,i)=>{const s=sA(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function aA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dt||t instanceof y_||t instanceof dl||t instanceof Kn||t instanceof tA||t instanceof w_)}function lA(t,e,n){if(!aA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=g_(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function Oj(t,e,n){if((e=un(e))instanceof __)return e._internalPath;if(typeof e=="string")return uA(t,e);throw Jd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Nj=new RegExp("[~\\*/\\[\\]]");function uA(t,e,n){if(e.search(Nj)>=0)throw Jd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new __(...e.split("."))._internalPath}catch{throw Jd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Jd(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new de(G.INVALID_ARGUMENT,a+t+l)}function Dj(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(hA("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Lj extends cA{data(){return super.data()}}function hA(t,e){return typeof e=="string"?uA(t,e):e instanceof __?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new de(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Mj{convertValue(e,n="none"){switch(Go(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ko(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Il(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Tt(o.doubleValue));return new w_(s)}convertGeoPoint(e){return new y_(Tt(e.latitude),Tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(lc(e));default:return null}}convertTimestamp(e){const n=Ks(e);return new Dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=dt.fromString(e);Xe(kI(r));const i=new uc(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||Zi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fA extends cA{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(hA("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ud extends fA{data(e={}){return super.data(e)}}class Vj{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new gu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ud(this._firestore,this._userDataWriter,r.key,r,new gu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ud(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ud(i._firestore,i._userDataWriter,a.doc.key,a.doc,new gu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:Fj(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Fj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){t=Qs(t,Kn);const e=Qs(t.firestore,Dc);return Sj(v_(e),t._key).then(n=>Bj(e,t,n))}class pA extends Mj{constructor(e){super(),this.firestore=e}convertBytes(e){return new dl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,n)}}function $j(t){t=Qs(t,Vf);const e=Qs(t.firestore,Dc),n=v_(e),r=new pA(e);return jj(t._query),bj(n,t._query).then(i=>new Vj(e,r,t,i))}function Uj(t,e,n){t=Qs(t,Kn);const r=Qs(t.firestore,Dc),i=dA(t.converter,e);return mA(r,[iA(rA(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,fi.none())])}function T_(t,e){const n=Qs(t.firestore,Dc),r=yi(t),i=dA(t.converter,e);return mA(n,[iA(rA(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,fi.exists(!1))]).then(()=>r)}function mA(t,e){return function(r,i){const s=new Hi;return r.asyncQueue.enqueueAndForget(async()=>cj(await Tj(r),i,s)),s.promise}(v_(t),e)}function Bj(t,e,n){const r=n.docs.get(e._key),i=new pA(t);return new fA(t,i,e._key,r,new gu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){bl=i})(Tl),gi(new Wr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Dc(new BN(r.getProvider("auth-internal")),new WN(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new de(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uc(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),vr(zw,"4.7.1",e),vr(zw,"4.7.1","esm2017")})();const gA="@firebase/installations",S_="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=1e4,_A=`w:${S_}`,yA="FIS_v2",zj="https://firebaseinstallations.googleapis.com/v1",qj=60*60*1e3,Hj="installations",Wj="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Qo=new ra(Hj,Wj,Kj);function wA(t){return t instanceof Gr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA({projectId:t}){return`${zj}/projects/${t}/installations`}function TA(t){return{token:t.token,requestStatus:2,expiresIn:Qj(t.expiresIn),creationTime:Date.now()}}async function SA(t,e){const r=(await e.json()).error;return Qo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function bA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Gj(t,{refreshToken:e}){const n=bA(t);return n.append("Authorization",Jj(e)),n}async function IA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Qj(t){return Number(t.replace("s","000"))}function Jj(t){return`${yA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yj({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=EA(t),i=bA(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:yA,appId:t.appId,sdkVersion:_A},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await IA(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:TA(c.authToken)}}else throw await SA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=/^[cdef][\w-]{21}$/,Ag="";function eM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=tM(t);return Zj.test(n)?n:Ag}catch{return Ag}}function tM(t){return Xj(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new Map;function CA(t,e){const n=$f(t);RA(n,e),nM(n,e)}function RA(t,e){const n=kA.get(t);if(n)for(const r of n)r(e)}function nM(t,e){const n=rM();n&&n.postMessage({key:t,fid:e}),iM()}let Oo=null;function rM(){return!Oo&&"BroadcastChannel"in self&&(Oo=new BroadcastChannel("[Firebase] FID Change"),Oo.onmessage=t=>{RA(t.data.key,t.data.fid)}),Oo}function iM(){kA.size===0&&Oo&&(Oo.close(),Oo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM="firebase-installations-database",oM=1,Jo="firebase-installations-store";let Xp=null;function b_(){return Xp||(Xp=nb(sM,oM,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Jo)}}})),Xp}async function Yd(t,e){const n=$f(t),i=(await b_()).transaction(Jo,"readwrite"),s=i.objectStore(Jo),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&CA(t,e.fid),e}async function PA(t){const e=$f(t),r=(await b_()).transaction(Jo,"readwrite");await r.objectStore(Jo).delete(e),await r.done}async function Uf(t,e){const n=$f(t),i=(await b_()).transaction(Jo,"readwrite"),s=i.objectStore(Jo),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&CA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I_(t){let e;const n=await Uf(t.appConfig,r=>{const i=aM(r),s=lM(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Ag?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function aM(t){const e=t||{fid:eM(),registrationStatus:0};return xA(e)}function lM(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Qo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=uM(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:cM(t)}:{installationEntry:e}}async function uM(t,e){try{const n=await Yj(t,e);return Yd(t.appConfig,n)}catch(n){throw wA(n)&&n.customData.serverCode===409?await PA(t.appConfig):await Yd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function cM(t){let e=await I0(t.appConfig);for(;e.registrationStatus===1;)await AA(100),e=await I0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await I_(t);return r||n}return e}function I0(t){return Uf(t,e=>{if(!e)throw Qo.create("installation-not-found");return xA(e)})}function xA(t){return hM(t)?{fid:t.fid,registrationStatus:0}:t}function hM(t){return t.registrationStatus===1&&t.registrationTime+vA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM({appConfig:t,heartbeatServiceProvider:e},n){const r=fM(t,n),i=Gj(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:_A,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await IA(()=>fetch(r,a));if(l.ok){const c=await l.json();return TA(c)}else throw await SA("Generate Auth Token",l)}function fM(t,{fid:e}){return`${EA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A_(t,e=!1){let n;const r=await Uf(t.appConfig,s=>{if(!OA(s))throw Qo.create("not-registered");const o=s.authToken;if(!e&&gM(o))return s;if(o.requestStatus===1)return n=pM(t,e),s;{if(!navigator.onLine)throw Qo.create("app-offline");const a=_M(s);return n=mM(t,a),a}});return n?await n:r.authToken}async function pM(t,e){let n=await A0(t.appConfig);for(;n.authToken.requestStatus===1;)await AA(100),n=await A0(t.appConfig);const r=n.authToken;return r.requestStatus===0?A_(t,e):r}function A0(t){return Uf(t,e=>{if(!OA(e))throw Qo.create("not-registered");const n=e.authToken;return yM(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function mM(t,e){try{const n=await dM(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Yd(t.appConfig,r),n}catch(n){if(wA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await PA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Yd(t.appConfig,r)}throw n}}function OA(t){return t!==void 0&&t.registrationStatus===2}function gM(t){return t.requestStatus===2&&!vM(t)}function vM(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+qj}function _M(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function yM(t){return t.requestStatus===1&&t.requestTime+vA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(t){const e=t,{installationEntry:n,registrationPromise:r}=await I_(e);return r?r.catch(console.error):A_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EM(t,e=!1){const n=t;return await TM(n),(await A_(n,e)).token}async function TM(t){const{registrationPromise:e}=await I_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(t){if(!t||!t.options)throw Zp("App Configuration");if(!t.name)throw Zp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Zp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Zp(t){return Qo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="installations",bM="installations-internal",IM=t=>{const e=t.getProvider("app").getImmediate(),n=SM(e),r=ia(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},AM=t=>{const e=t.getProvider("app").getImmediate(),n=ia(e,NA).getImmediate();return{getId:()=>wM(n),getToken:i=>EM(n,i)}};function kM(){gi(new Wr(NA,IM,"PUBLIC")),gi(new Wr(bM,AM,"PRIVATE"))}kM();vr(gA,S_);vr(gA,S_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xd="analytics",CM="firebase_id",RM="origin",PM=60*1e3,xM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",k_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new Sf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gn=new ra("analytics","Analytics",OM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){if(!t.startsWith(k_)){const e=Gn.create("invalid-gtag-resource",{gtagURL:t});return Ln.warn(e.message),""}return t}function DA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function DM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function LM(t,e){const n=DM("firebase-js-sdk-policy",{createScriptURL:NM}),r=document.createElement("script"),i=`${k_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function jM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function MM(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await DA(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Ln.error(a)}t("config",i,s)}async function VM(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await DA(n);for(const l of o){const c=a.find(p=>p.measurementId===l),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ln.error(s)}}function FM(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await VM(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await MM(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Ln.error(a)}}return i}function $M(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=FM(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function UM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(k_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BM=30,zM=1e3;class qM{constructor(e={},n=zM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const LA=new qM;function HM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function WM(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:HM(r)},s=xM.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Gn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function KM(t,e=LA,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Gn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Gn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new JM;return setTimeout(async()=>{a.abort()},PM),jA({appId:r,apiKey:i,measurementId:s},o,a,e)}async function jA(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=LA){var s;const{appId:o,measurementId:a}=t;try{await GM(r,e)}catch(l){if(a)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await WM(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!QM(c)){if(i.deleteThrottleMetadata(o),a)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?pw(n,i.intervalMillis,BM):pw(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,p),Ln.debug(`Calling attemptFetch again in ${h} millis`),jA(t,p,r,i)}}function GM(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QM(t){if(!(t instanceof Gr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class JM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function YM(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XM(){if(XS())try{await ZS()}catch(t){return Ln.warn(Gn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ln.warn(Gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function ZM(t,e,n,r,i,s,o){var a;const l=KM(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Ln.error(y)),e.push(l);const c=XM().then(y=>{if(y)return r.getId()}),[h,p]=await Promise.all([l,c]);UM(s)||LM(s,h.measurementId),i("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[RM]="firebase",g.update=!0,p!=null&&(g[CM]=p),i("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.app=e}_delete(){return delete Nu[this.app.options.appId],Promise.resolve()}}let Nu={},k0=[];const C0={};let em="dataLayer",t2="gtag",R0,MA,P0=!1;function n2(){const t=[];if(YS()&&t.push("This is a browser extension environment."),uP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Gn.create("invalid-analytics-context",{errorInfo:e});Ln.warn(n.message)}}function r2(t,e,n){n2();const r=t.options.appId;if(!r)throw Gn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gn.create("no-api-key");if(Nu[r]!=null)throw Gn.create("already-exists",{id:r});if(!P0){jM(em);const{wrappedGtag:s,gtagCore:o}=$M(Nu,k0,C0,em,t2);MA=s,R0=o,P0=!0}return Nu[r]=ZM(t,k0,C0,e,R0,em,n),new e2(t)}function i2(t=Mv()){t=un(t);const e=ia(t,Xd);return e.isInitialized()?e.getImmediate():s2(t)}function s2(t,e={}){const n=ia(t,Xd);if(n.isInitialized()){const i=n.getImmediate();if(rc(e,n.getOptions()))return i;throw Gn.create("already-initialized")}return n.initialize({options:e})}function o2(t,e,n,r){t=un(t),YM(MA,Nu[t.app.options.appId],e,n,r).catch(i=>Ln.error(i))}const x0="@firebase/analytics",O0="0.10.7";function a2(){gi(new Wr(Xd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return r2(r,i,n)},"PUBLIC")),gi(new Wr("analytics-internal",t,"PRIVATE")),vr(x0,O0),vr(x0,O0,"esm2017");function t(e){try{const n=e.getProvider(Xd).getImmediate();return{logEvent:(r,i,s)=>o2(n,r,i,s)}}catch(n){throw Gn.create("interop-component-reg-failed",{reason:n})}}}a2();const l2={apiKey:"AIzaSyDR27NVCQmVwVNZfNXVGpLKSsJj8f2Filg",authDomain:"darelom-students.firebaseapp.com",projectId:"darelom-students",storageBucket:"darelom-students.appspot.com",messagingSenderId:"993473208393",appId:"1:993473208393:web:294652795108cc161c5f98",measurementId:"G-1K85RQXZQ1"},u2=rb(l2),Yn=Cj(),Lc=jN();i2(u2);/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pt(){return pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pt.apply(this,arguments)}var It;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(It||(It={}));const N0="popstate";function c2(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=rs(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),fc("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:Xo(s))}function r(i,s){Yo(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return d2(e,n,r,t)}function Ie(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Yo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function h2(){return Math.random().toString(36).substr(2,8)}function D0(t,e){return{usr:t.state,key:t.key,idx:e}}function fc(t,e,n,r){return n===void 0&&(n=null),pt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?rs(e):e,{state:n,key:e&&e.key||r||h2()})}function Xo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function rs(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function d2(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=It.Pop,l=null,c=h();c==null&&(c=0,o.replaceState(pt({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function p(){a=It.Pop;let O=h(),A=O==null?null:O-c;c=O,l&&l({action:a,location:R.location,delta:A})}function g(O,A){a=It.Push;let T=fc(R.location,O,A);n&&n(T,O),c=h()+1;let S=D0(T,c),D=R.createHref(T);try{o.pushState(S,"",D)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(D)}s&&l&&l({action:a,location:R.location,delta:1})}function y(O,A){a=It.Replace;let T=fc(R.location,O,A);n&&n(T,O),c=h();let S=D0(T,c),D=R.createHref(T);o.replaceState(S,"",D),s&&l&&l({action:a,location:R.location,delta:0})}function C(O){let A=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof O=="string"?O:Xo(O);return T=T.replace(/ $/,"%20"),Ie(A,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,A)}let R={get action(){return a},get location(){return t(i,o)},listen(O){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(N0,p),l=O,()=>{i.removeEventListener(N0,p),l=null}},createHref(O){return e(i,O)},createURL:C,encodeLocation(O){let A=C(O);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:g,replace:y,go(O){return o.go(O)}};return R}var We;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(We||(We={}));const f2=new Set(["lazy","caseSensitive","path","id","index","children"]);function p2(t){return t.index===!0}function pc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Ie(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ie(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),p2(i)){let l=pt({},i,e(i),{id:a});return r[a]=l,l}else{let l=pt({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=pc(i.children,e,o,r)),l}})}function Ao(t,e,n){return n===void 0&&(n="/"),cd(t,e,n,!1)}function cd(t,e,n,r){let i=typeof e=="string"?rs(e):e,s=Cl(i.pathname||"/",n);if(s==null)return null;let o=VA(t);g2(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=k2(s);a=I2(o[l],c,r)}return a}function m2(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function VA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ie(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Wi([r,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Ie(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),VA(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:S2(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of FA(s.path))i(s,o,l)}),e}function FA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=FA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function g2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:b2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const v2=/^:[\w-]+$/,_2=3,y2=2,w2=1,E2=10,T2=-2,L0=t=>t==="*";function S2(t,e){let n=t.split("/"),r=n.length;return n.some(L0)&&(r+=T2),e&&(r+=y2),n.filter(i=>!L0(i)).reduce((i,s)=>i+(v2.test(s)?_2:s===""?w2:E2),r)}function b2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function I2(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",p=j0({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},h),g=l.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=j0({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},h)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Wi([s,p.pathname]),pathnameBase:P2(Wi([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Wi([s,p.pathnameBase]))}return o}function j0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=A2(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,h,p)=>{let{paramName:g,isOptional:y}=h;if(g==="*"){let R=a[p]||"";o=s.slice(0,s.length-R.length).replace(/(.)\/+$/,"$1")}const C=a[p];return y&&!C?c[g]=void 0:c[g]=(C||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function A2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Yo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function k2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yo(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Cl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function C2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?rs(t):t;return{pathname:n?n.startsWith("/")?n:R2(n,e):e,search:x2(r),hash:O2(i)}}function R2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function tm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $A(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bf(t,e){let n=$A(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=rs(t):(i=pt({},t),Ie(!i.pathname||!i.pathname.includes("?"),tm("?","pathname","search",i)),Ie(!i.pathname||!i.pathname.includes("#"),tm("#","pathname","hash",i)),Ie(!i.search||!i.search.includes("#"),tm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}a=p>=0?e[p]:"/"}let l=C2(i,a),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||h)&&(l.pathname+="/"),l}const Wi=t=>t.join("/").replace(/\/\/+/g,"/"),P2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),x2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,O2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Zd{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function qf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const UA=["post","put","patch","delete"],N2=new Set(UA),D2=["get",...UA],L2=new Set(D2),j2=new Set([301,302,303,307,308]),M2=new Set([307,308]),nm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},V2={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ru={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},C_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,F2=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),BA="remix-router-transitions";function $2(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ie(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let j=t.detectErrorBoundary;i=F=>({hasErrorBoundary:j(F)})}else i=F2;let s={},o=pc(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||H2,h=t.unstable_patchRoutesOnMiss,p=pt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,y=new Set,C=null,R=null,O=null,A=t.hydrationData!=null,T=Ao(o,t.history.location,l),S=null;if(T==null&&!h){let j=vn(404,{pathname:t.history.location.pathname}),{matches:F,route:z}=W0(o);T=F,S={[z.id]:j}}T&&!t.hydrationData&&or(T,o,t.history.location.pathname).active&&(T=null);let D;if(T)if(T.some(j=>j.route.lazy))D=!1;else if(!T.some(j=>j.route.loader))D=!0;else if(p.v7_partialHydration){let j=t.hydrationData?t.hydrationData.loaderData:null,F=t.hydrationData?t.hydrationData.errors:null,z=W=>W.route.loader?typeof W.route.loader=="function"&&W.route.loader.hydrate===!0?!1:j&&j[W.route.id]!==void 0||F&&F[W.route.id]!==void 0:!0;if(F){let W=T.findIndex(te=>F[te.route.id]!==void 0);D=T.slice(0,W+1).every(z)}else D=T.every(z)}else D=t.hydrationData!=null;else if(D=!1,T=[],p.v7_partialHydration){let j=or(null,o,t.history.location.pathname);j.active&&j.matches&&(T=j.matches)}let B,x={historyAction:t.history.action,location:t.history.location,matches:T,initialized:D,navigation:nm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||S,fetchers:new Map,blockers:new Map},I=It.Pop,w=!1,b,k=!1,N=new Map,V=null,P=!1,ge=!1,Ke=[],Ge=new Set,ye=new Map,X=0,oe=-1,ce=new Map,Ae=new Set,Te=new Map,H=new Map,$e=new Set,ze=new Map,Qe=new Map,Ze=new Map,kt=!1;function Ct(){if(g=t.history.listen(j=>{let{action:F,location:z,delta:W}=j;if(kt){kt=!1;return}Yo(Qe.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=ao({currentLocation:x.location,nextLocation:z,historyAction:F});if(te&&W!=null){kt=!0,t.history.go(W*-1),Ai(te,{state:"blocked",location:z,proceed(){Ai(te,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),t.history.go(W)},reset(){let ie=new Map(x.blockers);ie.set(te,ru),et({blockers:ie})}});return}return Rt(F,z)}),n){iV(e,N);let j=()=>sV(e,N);e.addEventListener("pagehide",j),V=()=>e.removeEventListener("pagehide",j)}return x.initialized||Rt(It.Pop,x.location,{initialHydration:!0}),B}function rr(){g&&g(),V&&V(),y.clear(),b&&b.abort(),x.fetchers.forEach((j,F)=>Mn(F)),x.blockers.forEach((j,F)=>ss(F))}function re(j){return y.add(j),()=>y.delete(j)}function et(j,F){F===void 0&&(F={}),x=pt({},x,j);let z=[],W=[];p.v7_fetcherPersist&&x.fetchers.forEach((te,ie)=>{te.state==="idle"&&($e.has(ie)?W.push(ie):z.push(ie))}),[...y].forEach(te=>te(x,{deletedFetchers:W,unstable_viewTransitionOpts:F.viewTransitionOpts,unstable_flushSync:F.flushSync===!0})),p.v7_fetcherPersist&&(z.forEach(te=>x.fetchers.delete(te)),W.forEach(te=>Mn(te)))}function Jt(j,F,z){var W,te;let{flushSync:ie}=z===void 0?{}:z,he=x.actionData!=null&&x.navigation.formMethod!=null&&Fr(x.navigation.formMethod)&&x.navigation.state==="loading"&&((W=j.state)==null?void 0:W._isRedirect)!==!0,Y;F.actionData?Object.keys(F.actionData).length>0?Y=F.actionData:Y=null:he?Y=x.actionData:Y=null;let ve=F.loaderData?q0(x.loaderData,F.loaderData,F.matches||[],F.errors):x.loaderData,le=x.blockers;le.size>0&&(le=new Map(le),le.forEach((Ce,Me)=>le.set(Me,ru)));let ue=w===!0||x.navigation.formMethod!=null&&Fr(x.navigation.formMethod)&&((te=j.state)==null?void 0:te._isRedirect)!==!0;a&&(o=a,a=void 0),P||I===It.Pop||(I===It.Push?t.history.push(j,j.state):I===It.Replace&&t.history.replace(j,j.state));let ke;if(I===It.Pop){let Ce=N.get(x.location.pathname);Ce&&Ce.has(j.pathname)?ke={currentLocation:x.location,nextLocation:j}:N.has(j.pathname)&&(ke={currentLocation:j,nextLocation:x.location})}else if(k){let Ce=N.get(x.location.pathname);Ce?Ce.add(j.pathname):(Ce=new Set([j.pathname]),N.set(x.location.pathname,Ce)),ke={currentLocation:x.location,nextLocation:j}}et(pt({},F,{actionData:Y,loaderData:ve,historyAction:I,location:j,initialized:!0,navigation:nm,revalidation:"idle",restoreScrollPosition:lo(j,F.matches||x.matches),preventScrollReset:ue,blockers:le}),{viewTransitionOpts:ke,flushSync:ie===!0}),I=It.Pop,w=!1,k=!1,P=!1,ge=!1,Ke=[]}async function Jr(j,F){if(typeof j=="number"){t.history.go(j);return}let z=kg(x.location,x.matches,l,p.v7_prependBasename,j,p.v7_relativeSplatPath,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:W,submission:te,error:ie}=M0(p.v7_normalizeFormMethod,!1,z,F),he=x.location,Y=fc(x.location,W,F&&F.state);Y=pt({},Y,t.history.encodeLocation(Y));let ve=F&&F.replace!=null?F.replace:void 0,le=It.Push;ve===!0?le=It.Replace:ve===!1||te!=null&&Fr(te.formMethod)&&te.formAction===x.location.pathname+x.location.search&&(le=It.Replace);let ue=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,ke=(F&&F.unstable_flushSync)===!0,Ce=ao({currentLocation:he,nextLocation:Y,historyAction:le});if(Ce){Ai(Ce,{state:"blocked",location:Y,proceed(){Ai(Ce,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),Jr(j,F)},reset(){let Me=new Map(x.blockers);Me.set(Ce,ru),et({blockers:Me})}});return}return await Rt(le,Y,{submission:te,pendingError:ie,preventScrollReset:ue,replace:F&&F.replace,enableViewTransition:F&&F.unstable_viewTransition,flushSync:ke})}function bi(){if(Je(),et({revalidation:"loading"}),x.navigation.state!=="submitting"){if(x.navigation.state==="idle"){Rt(x.historyAction,x.location,{startUninterruptedRevalidation:!0});return}Rt(I||x.historyAction,x.navigation.location,{overrideNavigation:x.navigation})}}async function Rt(j,F,z){b&&b.abort(),b=null,I=j,P=(z&&z.startUninterruptedRevalidation)===!0,as(x.location,x.matches),w=(z&&z.preventScrollReset)===!0,k=(z&&z.enableViewTransition)===!0;let W=a||o,te=z&&z.overrideNavigation,ie=Ao(W,F,l),he=(z&&z.flushSync)===!0,Y=or(ie,W,F.pathname);if(Y.active&&Y.matches&&(ie=Y.matches),!ie){let{error:Se,notFoundMatches:it,route:st}=Ir(F.pathname);Jt(F,{matches:it,loaderData:{},errors:{[st.id]:Se}},{flushSync:he});return}if(x.initialized&&!ge&&Y2(x.location,F)&&!(z&&z.submission&&Fr(z.submission.formMethod))){Jt(F,{matches:ie},{flushSync:he});return}b=new AbortController;let ve=ya(t.history,F,b.signal,z&&z.submission),le;if(z&&z.pendingError)le=[Ba(ie).route.id,{type:We.error,error:z.pendingError}];else if(z&&z.submission&&Fr(z.submission.formMethod)){let Se=await Ii(ve,F,z.submission,ie,Y.active,{replace:z.replace,flushSync:he});if(Se.shortCircuited)return;if(Se.pendingActionResult){let[it,st]=Se.pendingActionResult;if(zn(st)&&qf(st.error)&&st.error.status===404){b=null,Jt(F,{matches:Se.matches,loaderData:{},errors:{[it]:st.error}});return}}ie=Se.matches||ie,le=Se.pendingActionResult,te=rm(F,z.submission),he=!1,Y.active=!1,ve=ya(t.history,ve.url,ve.signal)}let{shortCircuited:ue,matches:ke,loaderData:Ce,errors:Me}=await Tr(ve,F,ie,Y.active,te,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,he,le);ue||(b=null,Jt(F,pt({matches:ke||ie},H0(le),{loaderData:Ce,errors:Me})))}async function Ii(j,F,z,W,te,ie){ie===void 0&&(ie={}),Je();let he=nV(F,z);if(et({navigation:he},{flushSync:ie.flushSync===!0}),te){let le=await ki(W,F.pathname,j.signal);if(le.type==="aborted")return{shortCircuited:!0};if(le.type==="error"){let{boundaryId:ue,error:ke}=Ar(F.pathname,le);return{matches:le.partialMatches,pendingActionResult:[ue,{type:We.error,error:ke}]}}else if(le.matches)W=le.matches;else{let{notFoundMatches:ue,error:ke,route:Ce}=Ir(F.pathname);return{matches:ue,pendingActionResult:[Ce.id,{type:We.error,error:ke}]}}}let Y,ve=vu(W,F);if(!ve.route.action&&!ve.route.lazy)Y={type:We.error,error:vn(405,{method:j.method,pathname:F.pathname,routeId:ve.route.id})};else if(Y=(await jn("action",j,[ve],W))[0],j.signal.aborted)return{shortCircuited:!0};if(Do(Y)){let le;return ie&&ie.replace!=null?le=ie.replace:le=U0(Y.response.headers.get("Location"),new URL(j.url),l)===x.location.pathname+x.location.search,await hn(j,Y,{submission:z,replace:le}),{shortCircuited:!0}}if(No(Y))throw vn(400,{type:"defer-action"});if(zn(Y)){let le=Ba(W,ve.route.id);return(ie&&ie.replace)!==!0&&(I=It.Push),{matches:W,pendingActionResult:[le.route.id,Y]}}return{matches:W,pendingActionResult:[ve.route.id,Y]}}async function Tr(j,F,z,W,te,ie,he,Y,ve,le,ue){let ke=te||rm(F,ie),Ce=ie||he||J0(ke),Me=!P&&(!p.v7_partialHydration||!ve);if(W){if(Me){let Ye=bn(ue);et(pt({navigation:ke},Ye!==void 0?{actionData:Ye}:{}),{flushSync:le})}let pe=await ki(z,F.pathname,j.signal);if(pe.type==="aborted")return{shortCircuited:!0};if(pe.type==="error"){let{boundaryId:Ye,error:wt}=Ar(F.pathname,pe);return{matches:pe.partialMatches,loaderData:{},errors:{[Ye]:wt}}}else if(pe.matches)z=pe.matches;else{let{error:Ye,notFoundMatches:wt,route:Ue}=Ir(F.pathname);return{matches:wt,loaderData:{},errors:{[Ue.id]:Ye}}}}let Se=a||o,[it,st]=V0(t.history,x,z,Ce,F,p.v7_partialHydration&&ve===!0,p.v7_skipActionErrorRevalidation,ge,Ke,Ge,$e,Te,Ae,Se,l,ue);if(ir(pe=>!(z&&z.some(Ye=>Ye.route.id===pe))||it&&it.some(Ye=>Ye.route.id===pe)),oe=++X,it.length===0&&st.length===0){let pe=Xr();return Jt(F,pt({matches:z,loaderData:{},errors:ue&&zn(ue[1])?{[ue[0]]:ue[1].error}:null},H0(ue),pe?{fetchers:new Map(x.fetchers)}:{}),{flushSync:le}),{shortCircuited:!0}}if(Me){let pe={};if(!W){pe.navigation=ke;let Ye=bn(ue);Ye!==void 0&&(pe.actionData=Ye)}st.length>0&&(pe.fetchers=cn(st)),et(pe,{flushSync:le})}st.forEach(pe=>{ye.has(pe.key)&&Yt(pe.key),pe.controller&&ye.set(pe.key,pe.controller)});let kr=()=>st.forEach(pe=>Yt(pe.key));b&&b.signal.addEventListener("abort",kr);let{loaderResults:ar,fetcherResults:Vn}=await ut(x.matches,z,it,st,j);if(j.signal.aborted)return{shortCircuited:!0};b&&b.signal.removeEventListener("abort",kr),st.forEach(pe=>ye.delete(pe.key));let Cr=K0([...ar,...Vn]);if(Cr){if(Cr.idx>=it.length){let pe=st[Cr.idx-it.length].key;Ae.add(pe)}return await hn(j,Cr.result,{replace:Y}),{shortCircuited:!0}}let{loaderData:lr,errors:Pt}=z0(x,z,it,ar,ue,st,Vn,ze);ze.forEach((pe,Ye)=>{pe.subscribe(wt=>{(wt||pe.done)&&ze.delete(Ye)})}),p.v7_partialHydration&&ve&&x.errors&&Object.entries(x.errors).filter(pe=>{let[Ye]=pe;return!it.some(wt=>wt.route.id===Ye)}).forEach(pe=>{let[Ye,wt]=pe;Pt=Object.assign(Pt||{},{[Ye]:wt})});let fn=Xr(),ei=ca(oe),Fn=fn||ei||st.length>0;return pt({matches:z,loaderData:lr,errors:Pt},Fn?{fetchers:new Map(x.fetchers)}:{})}function bn(j){if(j&&!zn(j[1]))return{[j[0]]:j[1].data};if(x.actionData)return Object.keys(x.actionData).length===0?null:x.actionData}function cn(j){return j.forEach(F=>{let z=x.fetchers.get(F.key),W=iu(void 0,z?z.data:void 0);x.fetchers.set(F.key,W)}),new Map(x.fetchers)}function Sr(j,F,z,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ye.has(j)&&Yt(j);let te=(W&&W.unstable_flushSync)===!0,ie=a||o,he=kg(x.location,x.matches,l,p.v7_prependBasename,z,p.v7_relativeSplatPath,F,W==null?void 0:W.relative),Y=Ao(ie,he,l),ve=or(Y,ie,he);if(ve.active&&ve.matches&&(Y=ve.matches),!Y){dn(j,F,vn(404,{pathname:he}),{flushSync:te});return}let{path:le,submission:ue,error:ke}=M0(p.v7_normalizeFormMethod,!0,he,W);if(ke){dn(j,F,ke,{flushSync:te});return}let Ce=vu(Y,le);if(w=(W&&W.preventScrollReset)===!0,ue&&Fr(ue.formMethod)){is(j,F,le,Ce,Y,ve.active,te,ue);return}Te.set(j,{routeId:F,path:le}),Yr(j,F,le,Ce,Y,ve.active,te,ue)}async function is(j,F,z,W,te,ie,he,Y){Je(),Te.delete(j);function ve(Ue){if(!Ue.route.action&&!Ue.route.lazy){let pn=vn(405,{method:Y.formMethod,pathname:z,routeId:F});return dn(j,F,pn,{flushSync:he}),!0}return!1}if(!ie&&ve(W))return;let le=x.fetchers.get(j);rt(j,rV(Y,le),{flushSync:he});let ue=new AbortController,ke=ya(t.history,z,ue.signal,Y);if(ie){let Ue=await ki(te,z,ke.signal);if(Ue.type==="aborted")return;if(Ue.type==="error"){let{error:pn}=Ar(z,Ue);dn(j,F,pn,{flushSync:he});return}else if(Ue.matches){if(te=Ue.matches,W=vu(te,z),ve(W))return}else{dn(j,F,vn(404,{pathname:z}),{flushSync:he});return}}ye.set(j,ue);let Ce=X,Se=(await jn("action",ke,[W],te))[0];if(ke.signal.aborted){ye.get(j)===ue&&ye.delete(j);return}if(p.v7_fetcherPersist&&$e.has(j)){if(Do(Se)||zn(Se)){rt(j,_s(void 0));return}}else{if(Do(Se))if(ye.delete(j),oe>Ce){rt(j,_s(void 0));return}else return Ae.add(j),rt(j,iu(Y)),hn(ke,Se,{fetcherSubmission:Y});if(zn(Se)){dn(j,F,Se.error);return}}if(No(Se))throw vn(400,{type:"defer-action"});let it=x.navigation.location||x.location,st=ya(t.history,it,ue.signal),kr=a||o,ar=x.navigation.state!=="idle"?Ao(kr,x.navigation.location,l):x.matches;Ie(ar,"Didn't find any matches after fetcher action");let Vn=++X;ce.set(j,Vn);let Cr=iu(Y,Se.data);x.fetchers.set(j,Cr);let[lr,Pt]=V0(t.history,x,ar,Y,it,!1,p.v7_skipActionErrorRevalidation,ge,Ke,Ge,$e,Te,Ae,kr,l,[W.route.id,Se]);Pt.filter(Ue=>Ue.key!==j).forEach(Ue=>{let pn=Ue.key,uo=x.fetchers.get(pn),ha=iu(void 0,uo?uo.data:void 0);x.fetchers.set(pn,ha),ye.has(pn)&&Yt(pn),Ue.controller&&ye.set(pn,Ue.controller)}),et({fetchers:new Map(x.fetchers)});let fn=()=>Pt.forEach(Ue=>Yt(Ue.key));ue.signal.addEventListener("abort",fn);let{loaderResults:ei,fetcherResults:Fn}=await ut(x.matches,ar,lr,Pt,st);if(ue.signal.aborted)return;ue.signal.removeEventListener("abort",fn),ce.delete(j),ye.delete(j),Pt.forEach(Ue=>ye.delete(Ue.key));let pe=K0([...ei,...Fn]);if(pe){if(pe.idx>=lr.length){let Ue=Pt[pe.idx-lr.length].key;Ae.add(Ue)}return hn(st,pe.result)}let{loaderData:Ye,errors:wt}=z0(x,x.matches,lr,ei,void 0,Pt,Fn,ze);if(x.fetchers.has(j)){let Ue=_s(Se.data);x.fetchers.set(j,Ue)}ca(Vn),x.navigation.state==="loading"&&Vn>oe?(Ie(I,"Expected pending action"),b&&b.abort(),Jt(x.navigation.location,{matches:ar,loaderData:Ye,errors:wt,fetchers:new Map(x.fetchers)})):(et({errors:wt,loaderData:q0(x.loaderData,Ye,ar,wt),fetchers:new Map(x.fetchers)}),ge=!1)}async function Yr(j,F,z,W,te,ie,he,Y){let ve=x.fetchers.get(j);rt(j,iu(Y,ve?ve.data:void 0),{flushSync:he});let le=new AbortController,ue=ya(t.history,z,le.signal);if(ie){let Se=await ki(te,z,ue.signal);if(Se.type==="aborted")return;if(Se.type==="error"){let{error:it}=Ar(z,Se);dn(j,F,it,{flushSync:he});return}else if(Se.matches)te=Se.matches,W=vu(te,z);else{dn(j,F,vn(404,{pathname:z}),{flushSync:he});return}}ye.set(j,le);let ke=X,Me=(await jn("loader",ue,[W],te))[0];if(No(Me)&&(Me=await KA(Me,ue.signal,!0)||Me),ye.get(j)===le&&ye.delete(j),!ue.signal.aborted){if($e.has(j)){rt(j,_s(void 0));return}if(Do(Me))if(oe>ke){rt(j,_s(void 0));return}else{Ae.add(j),await hn(ue,Me);return}if(zn(Me)){dn(j,F,Me.error);return}Ie(!No(Me),"Unhandled fetcher deferred data"),rt(j,_s(Me.data))}}async function hn(j,F,z){let{submission:W,fetcherSubmission:te,replace:ie}=z===void 0?{}:z;F.response.headers.has("X-Remix-Revalidate")&&(ge=!0);let he=F.response.headers.get("Location");Ie(he,"Expected a Location header on the redirect Response"),he=U0(he,new URL(j.url),l);let Y=fc(x.location,he,{_isRedirect:!0});if(n){let Me=!1;if(F.response.headers.has("X-Remix-Reload-Document"))Me=!0;else if(C_.test(he)){const Se=t.history.createURL(he);Me=Se.origin!==e.location.origin||Cl(Se.pathname,l)==null}if(Me){ie?e.location.replace(he):e.location.assign(he);return}}b=null;let ve=ie===!0||F.response.headers.has("X-Remix-Replace")?It.Replace:It.Push,{formMethod:le,formAction:ue,formEncType:ke}=x.navigation;!W&&!te&&le&&ue&&ke&&(W=J0(x.navigation));let Ce=W||te;if(M2.has(F.response.status)&&Ce&&Fr(Ce.formMethod))await Rt(ve,Y,{submission:pt({},Ce,{formAction:he}),preventScrollReset:w});else{let Me=rm(Y,W);await Rt(ve,Y,{overrideNavigation:Me,fetcherSubmission:te,preventScrollReset:w})}}async function jn(j,F,z,W){try{let te=await W2(c,j,F,z,W,s,i);return await Promise.all(te.map((ie,he)=>{if(Z2(ie)){let Y=ie.result;return{type:We.redirect,response:Q2(Y,F,z[he].route.id,W,l,p.v7_relativeSplatPath)}}return G2(ie)}))}catch(te){return z.map(()=>({type:We.error,error:te}))}}async function ut(j,F,z,W,te){let[ie,...he]=await Promise.all([z.length?jn("loader",te,z,F):[],...W.map(Y=>{if(Y.matches&&Y.match&&Y.controller){let ve=ya(t.history,Y.path,Y.controller.signal);return jn("loader",ve,[Y.match],Y.matches).then(le=>le[0])}else return Promise.resolve({type:We.error,error:vn(404,{pathname:Y.path})})})]);return await Promise.all([Q0(j,z,ie,ie.map(()=>te.signal),!1,x.loaderData),Q0(j,W.map(Y=>Y.match),he,W.map(Y=>Y.controller?Y.controller.signal:null),!0)]),{loaderResults:ie,fetcherResults:he}}function Je(){ge=!0,Ke.push(...ir()),Te.forEach((j,F)=>{ye.has(F)&&(Ge.add(F),Yt(F))})}function rt(j,F,z){z===void 0&&(z={}),x.fetchers.set(j,F),et({fetchers:new Map(x.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function dn(j,F,z,W){W===void 0&&(W={});let te=Ba(x.matches,F);Mn(j),et({errors:{[te.route.id]:z},fetchers:new Map(x.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function br(j){return p.v7_fetcherPersist&&(H.set(j,(H.get(j)||0)+1),$e.has(j)&&$e.delete(j)),x.fetchers.get(j)||V2}function Mn(j){let F=x.fetchers.get(j);ye.has(j)&&!(F&&F.state==="loading"&&ce.has(j))&&Yt(j),Te.delete(j),ce.delete(j),Ae.delete(j),$e.delete(j),Ge.delete(j),x.fetchers.delete(j)}function In(j){if(p.v7_fetcherPersist){let F=(H.get(j)||0)-1;F<=0?(H.delete(j),$e.add(j)):H.set(j,F)}else Mn(j);et({fetchers:new Map(x.fetchers)})}function Yt(j){let F=ye.get(j);Ie(F,"Expected fetch controller: "+j),F.abort(),ye.delete(j)}function oo(j){for(let F of j){let z=br(F),W=_s(z.data);x.fetchers.set(F,W)}}function Xr(){let j=[],F=!1;for(let z of Ae){let W=x.fetchers.get(z);Ie(W,"Expected fetcher: "+z),W.state==="loading"&&(Ae.delete(z),j.push(z),F=!0)}return oo(j),F}function ca(j){let F=[];for(let[z,W]of ce)if(W<j){let te=x.fetchers.get(z);Ie(te,"Expected fetcher: "+z),te.state==="loading"&&(Yt(z),ce.delete(z),F.push(z))}return oo(F),F.length>0}function Nl(j,F){let z=x.blockers.get(j)||ru;return Qe.get(j)!==F&&Qe.set(j,F),z}function ss(j){x.blockers.delete(j),Qe.delete(j)}function Ai(j,F){let z=x.blockers.get(j)||ru;Ie(z.state==="unblocked"&&F.state==="blocked"||z.state==="blocked"&&F.state==="blocked"||z.state==="blocked"&&F.state==="proceeding"||z.state==="blocked"&&F.state==="unblocked"||z.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+F.state);let W=new Map(x.blockers);W.set(j,F),et({blockers:W})}function ao(j){let{currentLocation:F,nextLocation:z,historyAction:W}=j;if(Qe.size===0)return;Qe.size>1&&Yo(!1,"A router only supports one blocker at a time");let te=Array.from(Qe.entries()),[ie,he]=te[te.length-1],Y=x.blockers.get(ie);if(!(Y&&Y.state==="proceeding")&&he({currentLocation:F,nextLocation:z,historyAction:W}))return ie}function Ir(j){let F=vn(404,{pathname:j}),z=a||o,{matches:W,route:te}=W0(z);return ir(),{notFoundMatches:W,route:te,error:F}}function Ar(j,F){return{boundaryId:Ba(F.partialMatches).route.id,error:vn(400,{type:"route-discovery",pathname:j,message:F.error!=null&&"message"in F.error?F.error:String(F.error)})}}function ir(j){let F=[];return ze.forEach((z,W)=>{(!j||j(W))&&(z.cancel(),F.push(W),ze.delete(W))}),F}function sr(j,F,z){if(C=j,O=F,R=z||null,!A&&x.navigation===nm){A=!0;let W=lo(x.location,x.matches);W!=null&&et({restoreScrollPosition:W})}return()=>{C=null,O=null,R=null}}function os(j,F){return R&&R(j,F.map(W=>m2(W,x.loaderData)))||j.key}function as(j,F){if(C&&O){let z=os(j,F);C[z]=O()}}function lo(j,F){if(C){let z=os(j,F),W=C[z];if(typeof W=="number")return W}return null}function or(j,F,z){if(h)if(j){let W=j[j.length-1].route;if(W.path&&(W.path==="*"||W.path.endsWith("/*")))return{active:!0,matches:cd(F,z,l,!0)}}else return{active:!0,matches:cd(F,z,l,!0)||[]};return{active:!1,matches:null}}async function ki(j,F,z){let W=j,te=W.length>0?W[W.length-1].route:null;for(;;){let ie=a==null,he=a||o;try{await q2(h,F,W,he,s,i,Ze,z)}catch(ue){return{type:"error",error:ue,partialMatches:W}}finally{ie&&(o=[...o])}if(z.aborted)return{type:"aborted"};let Y=Ao(he,F,l),ve=!1;if(Y){let ue=Y[Y.length-1].route;if(ue.index)return{type:"success",matches:Y};if(ue.path&&ue.path.length>0)if(ue.path==="*")ve=!0;else return{type:"success",matches:Y}}let le=cd(he,F,l,!0);if(!le||W.map(ue=>ue.route.id).join("-")===le.map(ue=>ue.route.id).join("-"))return{type:"success",matches:ve?Y:null};if(W=le,te=W[W.length-1].route,te.path==="*")return{type:"success",matches:W}}}function ct(j){s={},a=pc(j,i,void 0,s)}function Zr(j,F){let z=a==null;qA(j,F,a||o,s,i),z&&(o=[...o],et({}))}return B={get basename(){return l},get future(){return p},get state(){return x},get routes(){return o},get window(){return e},initialize:Ct,subscribe:re,enableScrollRestoration:sr,navigate:Jr,fetch:Sr,revalidate:bi,createHref:j=>t.history.createHref(j),encodeLocation:j=>t.history.encodeLocation(j),getFetcher:br,deleteFetcher:In,dispose:rr,getBlocker:Nl,deleteBlocker:ss,patchRoutes:Zr,_internalFetchControllers:ye,_internalActiveDeferreds:ze,_internalSetRoutes:ct},B}function U2(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function kg(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let p of e)if(l.push(p),p.route.id===o){c=p;break}}else l=e,c=e[e.length-1];let h=zf(i||".",Bf(l,s),Cl(t.pathname,n)||t.pathname,a==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!R_(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Wi([n,h.pathname])),Xo(h)}function M0(t,e,n,r){if(!r||!U2(r))return{path:n};if(r.formMethod&&!tV(r.formMethod))return{path:n,error:vn(405,{method:r.formMethod})};let i=()=>({path:n,error:vn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=HA(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Fr(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,C)=>{let[R,O]=C;return""+y+R+"="+O+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!Fr(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}Ie(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Cg(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Cg(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=B0(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=B0(l)}catch{return i()}let h={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Fr(h.formMethod))return{path:n,submission:h};let p=rs(n);return e&&p.search&&R_(p.search)&&l.append("index",""),p.search="?"+l,{path:Xo(p),submission:h}}function B2(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function V0(t,e,n,r,i,s,o,a,l,c,h,p,g,y,C,R){let O=R?zn(R[1])?R[1].error:R[1].data:void 0,A=t.createURL(e.location),T=t.createURL(i),S=R&&zn(R[1])?R[0]:void 0,D=S?B2(n,S):n,B=R?R[1].statusCode:void 0,x=o&&B&&B>=400,I=D.filter((b,k)=>{let{route:N}=b;if(N.lazy)return!0;if(N.loader==null)return!1;if(s)return typeof N.loader!="function"||N.loader.hydrate?!0:e.loaderData[N.id]===void 0&&(!e.errors||e.errors[N.id]===void 0);if(z2(e.loaderData,e.matches[k],b)||l.some(ge=>ge===b.route.id))return!0;let V=e.matches[k],P=b;return F0(b,pt({currentUrl:A,currentParams:V.params,nextUrl:T,nextParams:P.params},r,{actionResult:O,actionStatus:B,defaultShouldRevalidate:x?!1:a||A.pathname+A.search===T.pathname+T.search||A.search!==T.search||zA(V,P)}))}),w=[];return p.forEach((b,k)=>{if(s||!n.some(Ke=>Ke.route.id===b.routeId)||h.has(k))return;let N=Ao(y,b.path,C);if(!N){w.push({key:k,routeId:b.routeId,path:b.path,matches:null,match:null,controller:null});return}let V=e.fetchers.get(k),P=vu(N,b.path),ge=!1;g.has(k)?ge=!1:c.has(k)?(c.delete(k),ge=!0):V&&V.state!=="idle"&&V.data===void 0?ge=a:ge=F0(P,pt({currentUrl:A,currentParams:e.matches[e.matches.length-1].params,nextUrl:T,nextParams:n[n.length-1].params},r,{actionResult:O,actionStatus:B,defaultShouldRevalidate:x?!1:a})),ge&&w.push({key:k,routeId:b.routeId,path:b.path,matches:N,match:P,controller:new AbortController})}),[I,w]}function z2(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function zA(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function F0(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function q2(t,e,n,r,i,s,o,a){let l=[e,...n.map(c=>c.route.id)].join("-");try{let c=o.get(l);c||(c=t({path:e,matches:n,patch:(h,p)=>{a.aborted||qA(h,p,r,i,s)}}),o.set(l,c)),c&&X2(c)&&await c}finally{o.delete(l)}}function qA(t,e,n,r,i){if(t){var s;let o=r[t];Ie(o,"No route found to patch children into: routeId = "+t);let a=pc(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=pc(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function $0(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Ie(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";Yo(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!f2.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,pt({},e(i),{lazy:void 0}))}function H2(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function W2(t,e,n,r,i,s,o,a){let l=r.reduce((p,g)=>p.add(g.route.id),new Set),c=new Set,h=await t({matches:i.map(p=>{let g=l.has(p.route.id);return pt({},p,{shouldLoad:g,resolve:C=>(c.add(p.route.id),g?K2(e,n,p,s,o,C,a):Promise.resolve({type:We.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(p=>Ie(c.has(p.route.id),'`match.resolve()` was not called for route id "'+p.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((p,g)=>l.has(i[g].route.id))}async function K2(t,e,n,r,i,s,o){let a,l,c=h=>{let p,g=new Promise((R,O)=>p=O);l=()=>p(),e.signal.addEventListener("abort",l);let y=R=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...R!==void 0?[R]:[]),C;return s?C=s(R=>y(R)):C=(async()=>{try{return{type:"data",result:await y()}}catch(R){return{type:"error",result:R}}})(),Promise.race([C,g])};try{let h=n.route[t];if(n.route.lazy)if(h){let p,[g]=await Promise.all([c(h).catch(y=>{p=y}),$0(n.route,i,r)]);if(p!==void 0)throw p;a=g}else if(await $0(n.route,i,r),h=n.route[t],h)a=await c(h);else if(t==="action"){let p=new URL(e.url),g=p.pathname+p.search;throw vn(405,{method:e.method,pathname:g,routeId:n.route.id})}else return{type:We.data,result:void 0};else if(h)a=await c(h);else{let p=new URL(e.url),g=p.pathname+p.search;throw vn(404,{pathname:g})}Ie(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:We.error,result:h}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function G2(t){let{result:e,type:n}=t;if(WA(e)){let c;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(h){return{type:We.error,error:h}}return n===We.error?{type:We.error,error:new Zd(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:We.data,data:c,statusCode:e.status,headers:e.headers}}if(n===We.error){if(G0(e)){var r;if(e.data instanceof Error){var i;return{type:We.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new Zd(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:We.error,error:e,statusCode:qf(e)?e.status:void 0}}if(eV(e)){var s,o;return{type:We.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(G0(e)){var a,l;return{type:We.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:We.data,data:e}}function Q2(t,e,n,r,i,s){let o=t.headers.get("Location");if(Ie(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!C_.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=kg(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function U0(t,e,n){if(C_.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Cl(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function ya(t,e,n,r){let i=t.createURL(HA(e)).toString(),s={signal:n};if(r&&Fr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Cg(r.formData):s.body=r.formData}return new Request(i,s)}function Cg(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function B0(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function J2(t,e,n,r,i,s){let o={},a=null,l,c=!1,h={},p=r&&zn(r[1])?r[1].error:void 0;return n.forEach((g,y)=>{let C=e[y].route.id;if(Ie(!Do(g),"Cannot handle redirect results in processLoaderData"),zn(g)){let R=g.error;p!==void 0&&(R=p,p=void 0),a=a||{};{let O=Ba(t,C);a[O.route.id]==null&&(a[O.route.id]=R)}o[C]=void 0,c||(c=!0,l=qf(g.error)?g.error.status:500),g.headers&&(h[C]=g.headers)}else No(g)?(i.set(C,g.deferredData),o[C]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!c&&(l=g.statusCode),g.headers&&(h[C]=g.headers)):(o[C]=g.data,g.statusCode&&g.statusCode!==200&&!c&&(l=g.statusCode),g.headers&&(h[C]=g.headers))}),p!==void 0&&r&&(a={[r[0]]:p},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:h}}function z0(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=J2(e,n,r,i,a);for(let h=0;h<s.length;h++){let{key:p,match:g,controller:y}=s[h];Ie(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let C=o[h];if(!(y&&y.signal.aborted))if(zn(C)){let R=Ba(t.matches,g==null?void 0:g.route.id);c&&c[R.route.id]||(c=pt({},c,{[R.route.id]:C.error})),t.fetchers.delete(p)}else if(Do(C))Ie(!1,"Unhandled fetcher revalidation redirect");else if(No(C))Ie(!1,"Unhandled fetcher deferred data");else{let R=_s(C.data);t.fetchers.set(p,R)}}return{loaderData:l,errors:c}}function q0(t,e,n,r){let i=pt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function H0(t){return t?zn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ba(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function W0(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function vn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Zd(t||500,a,new Error(l),!0)}function K0(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Do(n))return{result:n,idx:e}}}function HA(t){let e=typeof t=="string"?rs(t):t;return Xo(pt({},e,{hash:""}))}function Y2(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function X2(t){return typeof t=="object"&&t!=null&&"then"in t}function Z2(t){return WA(t.result)&&j2.has(t.result.status)}function No(t){return t.type===We.deferred}function zn(t){return t.type===We.error}function Do(t){return(t&&t.type)===We.redirect}function G0(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function eV(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function WA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function tV(t){return L2.has(t.toLowerCase())}function Fr(t){return N2.has(t.toLowerCase())}async function Q0(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(p=>p.route.id===l.route.id),h=c!=null&&!zA(c,l)&&(s&&s[l.route.id])!==void 0;if(No(a)&&(i||h)){let p=r[o];Ie(p,"Expected an AbortSignal for revalidating fetcher deferred result"),await KA(a,p,i).then(g=>{g&&(n[o]=g||n[o])})}}}async function KA(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:We.data,data:t.deferredData.unwrappedData}}catch(i){return{type:We.error,error:i}}return{type:We.data,data:t.deferredData.data}}}function R_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function vu(t,e){let n=typeof e=="string"?rs(e).search:e.search;if(t[t.length-1].route.index&&R_(n||""))return t[t.length-1];let r=$A(t);return r[r.length-1]}function J0(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function rm(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function nV(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function iu(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function rV(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function _s(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function iV(t,e){try{let n=t.sessionStorage.getItem(BA);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function sV(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(BA,JSON.stringify(n))}catch(r){Yo(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ef(){return ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ef.apply(this,arguments)}const Hf=U.createContext(null),GA=U.createContext(null),ro=U.createContext(null),P_=U.createContext(null),Ei=U.createContext({outlet:null,matches:[],isDataRoute:!1}),QA=U.createContext(null);function oV(t,e){let{relative:n}=e===void 0?{}:e;Rl()||Ie(!1);let{basename:r,navigator:i}=U.useContext(ro),{hash:s,pathname:o,search:a}=YA(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Wi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Rl(){return U.useContext(P_)!=null}function Ti(){return Rl()||Ie(!1),U.useContext(P_).location}function JA(t){U.useContext(ro).static||U.useLayoutEffect(t)}function Ut(){let{isDataRoute:t}=U.useContext(Ei);return t?wV():aV()}function aV(){Rl()||Ie(!1);let t=U.useContext(Hf),{basename:e,future:n,navigator:r}=U.useContext(ro),{matches:i}=U.useContext(Ei),{pathname:s}=Ti(),o=JSON.stringify(Bf(i,n.v7_relativeSplatPath)),a=U.useRef(!1);return JA(()=>{a.current=!0}),U.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=zf(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Wi([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,s,t])}const lV=U.createContext(null);function uV(t){let e=U.useContext(Ei).outlet;return e&&U.createElement(lV.Provider,{value:t},e)}function Qr(){let{matches:t}=U.useContext(Ei),e=t[t.length-1];return e?e.params:{}}function YA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=U.useContext(ro),{matches:i}=U.useContext(Ei),{pathname:s}=Ti(),o=JSON.stringify(Bf(i,r.v7_relativeSplatPath));return U.useMemo(()=>zf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function cV(t,e,n,r){Rl()||Ie(!1);let{navigator:i}=U.useContext(ro),{matches:s}=U.useContext(Ei),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Ti(),h;h=c;let p=h.pathname||"/",g=p;if(l!=="/"){let R=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(R.length).join("/")}let y=Ao(t,{pathname:g});return mV(y&&y.map(R=>Object.assign({},R,{params:Object.assign({},a,R.params),pathname:Wi([l,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?l:Wi([l,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),s,n,r)}function hV(){let t=yV(),e=qf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:i},n):null,null)}const dV=U.createElement(hV,null);class fV extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(Ei.Provider,{value:this.props.routeContext},U.createElement(QA.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function pV(t){let{routeContext:e,match:n,children:r}=t,i=U.useContext(Hf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(Ei.Provider,{value:e},r)}function mV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let h=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);h>=0||Ie(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=h),p.route.id){let{loaderData:g,errors:y}=n,C=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||C){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let y,C=!1,R=null,O=null;n&&(y=a&&p.route.id?a[p.route.id]:void 0,R=p.route.errorElement||dV,l&&(c<0&&g===0?(C=!0,O=null):c===g&&(C=!0,O=p.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,g+1)),T=()=>{let S;return y?S=R:C?S=O:p.route.Component?S=U.createElement(p.route.Component,null):p.route.element?S=p.route.element:S=h,U.createElement(pV,{match:p,routeContext:{outlet:h,matches:A,isDataRoute:n!=null},children:S})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?U.createElement(fV,{location:n.location,revalidation:n.revalidation,component:R,error:y,children:T(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):T()},null)}var XA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(XA||{}),tf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tf||{});function gV(t){let e=U.useContext(Hf);return e||Ie(!1),e}function vV(t){let e=U.useContext(GA);return e||Ie(!1),e}function _V(t){let e=U.useContext(Ei);return e||Ie(!1),e}function ZA(t){let e=_V(),n=e.matches[e.matches.length-1];return n.route.id||Ie(!1),n.route.id}function yV(){var t;let e=U.useContext(QA),n=vV(tf.UseRouteError),r=ZA(tf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function wV(){let{router:t}=gV(XA.UseNavigateStable),e=ZA(tf.UseNavigateStable),n=U.useRef(!1);return JA(()=>{n.current=!0}),U.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,ef({fromRouteId:e},s)))},[t,e])}function Y0(t){let{to:e,replace:n,state:r,relative:i}=t;Rl()||Ie(!1);let{future:s,static:o}=U.useContext(ro),{matches:a}=U.useContext(Ei),{pathname:l}=Ti(),c=Ut(),h=zf(e,Bf(a,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(h);return U.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:i}),[c,p,i,n,r]),null}function EV(t){return uV(t.context)}function at(t){Ie(!1)}function TV(t){let{basename:e="/",children:n=null,location:r,navigationType:i=It.Pop,navigator:s,static:o=!1,future:a}=t;Rl()&&Ie(!1);let l=e.replace(/^\/*/,"/"),c=U.useMemo(()=>({basename:l,navigator:s,static:o,future:ef({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=rs(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:C="default"}=r,R=U.useMemo(()=>{let O=Cl(h,l);return O==null?null:{location:{pathname:O,search:p,hash:g,state:y,key:C},navigationType:i}},[l,h,p,g,y,C,i]);return R==null?null:U.createElement(ro.Provider,{value:c},U.createElement(P_.Provider,{children:n,value:R}))}new Promise(()=>{});function Rg(t,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(t,(r,i)=>{if(!U.isValidElement(r))return;let s=[...e,i];if(r.type===U.Fragment){n.push.apply(n,Rg(r.props.children,s));return}r.type!==at&&Ie(!1),!r.props.index||!r.props.children||Ie(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rg(r.props.children,s)),n.push(o)}),n}function SV(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:U.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:U.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:U.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mc(){return mc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mc.apply(this,arguments)}function bV(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IV(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function AV(t,e){return t.button===0&&(!e||e==="_self")&&!IV(t)}const kV=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],CV="6";try{window.__reactRouterVersion=CV}catch{}function RV(t,e){return $2({basename:void 0,future:mc({},void 0,{v7_prependBasename:!0}),history:c2({window:void 0}),hydrationData:PV(),routes:t,mapRouteProperties:SV,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function PV(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=mc({},e,{errors:xV(e.errors)})),e}function xV(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Zd(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const OV=U.createContext({isTransitioning:!1}),NV=U.createContext(new Map),DV="startTransition",X0=L1[DV],LV="flushSync",Z0=KR[LV];function jV(t){X0?X0(t):t()}function su(t){Z0?Z0(t):t()}let MV=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function VV(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=U.useState(n.state),[o,a]=U.useState(),[l,c]=U.useState({isTransitioning:!1}),[h,p]=U.useState(),[g,y]=U.useState(),[C,R]=U.useState(),O=U.useRef(new Map),{v7_startTransition:A}=r||{},T=U.useCallback(w=>{A?jV(w):w()},[A]),S=U.useCallback((w,b)=>{let{deletedFetchers:k,unstable_flushSync:N,unstable_viewTransitionOpts:V}=b;k.forEach(ge=>O.current.delete(ge)),w.fetchers.forEach((ge,Ke)=>{ge.data!==void 0&&O.current.set(Ke,ge.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!V||P){N?su(()=>s(w)):T(()=>s(w));return}if(N){su(()=>{g&&(h&&h.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let ge=n.window.document.startViewTransition(()=>{su(()=>s(w))});ge.finished.finally(()=>{su(()=>{p(void 0),y(void 0),a(void 0),c({isTransitioning:!1})})}),su(()=>y(ge));return}g?(h&&h.resolve(),g.skipTransition(),R({state:w,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(a(w),c({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,g,h,O,T]);U.useLayoutEffect(()=>n.subscribe(S),[n,S]),U.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new MV)},[l]),U.useEffect(()=>{if(h&&o&&n.window){let w=o,b=h.promise,k=n.window.document.startViewTransition(async()=>{T(()=>s(w)),await b});k.finished.finally(()=>{p(void 0),y(void 0),a(void 0),c({isTransitioning:!1})}),y(k)}},[T,o,h,n.window]),U.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,g,i.location,o]),U.useEffect(()=>{!l.isTransitioning&&C&&(a(C.state),c({isTransitioning:!0,flushSync:!1,currentLocation:C.currentLocation,nextLocation:C.nextLocation}),R(void 0))},[l.isTransitioning,C]),U.useEffect(()=>{},[]);let D=U.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,b,k)=>n.navigate(w,{state:b,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(w,b,k)=>n.navigate(w,{replace:!0,state:b,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[n]),B=n.basename||"/",x=U.useMemo(()=>({router:n,navigator:D,static:!1,basename:B}),[n,D,B]),I=U.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return U.createElement(U.Fragment,null,U.createElement(Hf.Provider,{value:x},U.createElement(GA.Provider,{value:i},U.createElement(NV.Provider,{value:O.current},U.createElement(OV.Provider,{value:l},U.createElement(TV,{basename:B,location:i.location,navigationType:i.historyAction,navigator:D,future:I},i.initialized||n.future.v7_partialHydration?U.createElement(FV,{routes:n.routes,future:n.future,state:i}):e))))),null)}const FV=U.memo($V);function $V(t){let{routes:e,future:n,state:r}=t;return cV(e,void 0,r,n)}const UV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",BV=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ys=U.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:h,unstable_viewTransition:p}=e,g=bV(e,kV),{basename:y}=U.useContext(ro),C,R=!1;if(typeof c=="string"&&BV.test(c)&&(C=c,UV))try{let S=new URL(window.location.href),D=c.startsWith("//")?new URL(S.protocol+c):new URL(c),B=Cl(D.pathname,y);D.origin===S.origin&&B!=null?c=B+D.search+D.hash:R=!0}catch{}let O=oV(c,{relative:i}),A=zV(c,{replace:o,state:a,target:l,preventScrollReset:h,relative:i,unstable_viewTransition:p});function T(S){r&&r(S),S.defaultPrevented||A(S)}return U.createElement("a",mc({},g,{href:C||O,onClick:R||s?r:T,ref:n,target:l}))});var eE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eE||(eE={}));var tE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tE||(tE={}));function zV(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Ut(),c=Ti(),h=YA(t,{relative:o});return U.useCallback(p=>{if(AV(p,n)){p.preventDefault();let g=r!==void 0?r:Xo(c)===Xo(h);l(t,{replace:g,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,h,r,i,n,t,s,o,a])}var qV={exports:{}},wn="top",Xn="bottom",Zn="right",En="left",Wf="auto",Pl=[wn,Xn,Zn,En],Zo="start",fl="end",ek="clippingParents",x_="viewport",ka="popper",tk="reference",Pg=Pl.reduce(function(t,e){return t.concat([e+"-"+Zo,e+"-"+fl])},[]),O_=[].concat(Pl,[Wf]).reduce(function(t,e){return t.concat([e,e+"-"+Zo,e+"-"+fl])},[]),nk="beforeRead",rk="read",ik="afterRead",sk="beforeMain",ok="main",ak="afterMain",lk="beforeWrite",uk="write",ck="afterWrite",hk=[nk,rk,ik,sk,ok,ak,lk,uk,ck];function wi(t){return t?(t.nodeName||"").toLowerCase():null}function er(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ea(t){var e=er(t).Element;return t instanceof e||t instanceof Element}function _r(t){var e=er(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function N_(t){if(typeof ShadowRoot>"u")return!1;var e=er(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function HV(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!_r(s)||!wi(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function WV(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!_r(i)||!wi(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const D_={name:"applyStyles",enabled:!0,phase:"write",fn:HV,effect:WV,requires:["computeStyles"]};function mi(t){return t.split("-")[0]}var Vo=Math.max,nf=Math.min,pl=Math.round;function xg(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function dk(){return!/^((?!chrome|android).)*safari/i.test(xg())}function ml(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&_r(t)&&(i=t.offsetWidth>0&&pl(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&pl(r.height)/t.offsetHeight||1);var o=ea(t)?er(t):window,a=o.visualViewport,l=!dk()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,h=(r.top+(l&&a?a.offsetTop:0))/s,p=r.width/i,g=r.height/s;return{width:p,height:g,top:h,right:c+p,bottom:h+g,left:c,x:c,y:h}}function L_(t){var e=ml(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function fk(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&N_(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function ts(t){return er(t).getComputedStyle(t)}function KV(t){return["table","td","th"].indexOf(wi(t))>=0}function io(t){return((ea(t)?t.ownerDocument:t.document)||window.document).documentElement}function Kf(t){return wi(t)==="html"?t:t.assignedSlot||t.parentNode||(N_(t)?t.host:null)||io(t)}function nE(t){return!_r(t)||ts(t).position==="fixed"?null:t.offsetParent}function GV(t){var e=/firefox/i.test(xg()),n=/Trident/i.test(xg());if(n&&_r(t)){var r=ts(t);if(r.position==="fixed")return null}var i=Kf(t);for(N_(i)&&(i=i.host);_r(i)&&["html","body"].indexOf(wi(i))<0;){var s=ts(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function jc(t){for(var e=er(t),n=nE(t);n&&KV(n)&&ts(n).position==="static";)n=nE(n);return n&&(wi(n)==="html"||wi(n)==="body"&&ts(n).position==="static")?e:n||GV(t)||e}function j_(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Du(t,e,n){return Vo(t,nf(e,n))}function QV(t,e,n){var r=Du(t,e,n);return r>n?n:r}function pk(){return{top:0,right:0,bottom:0,left:0}}function mk(t){return Object.assign({},pk(),t)}function gk(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var JV=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,mk(typeof e!="number"?e:gk(e,Pl))};function YV(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=mi(n.placement),l=j_(a),c=[En,Zn].indexOf(a)>=0,h=c?"height":"width";if(!(!s||!o)){var p=JV(i.padding,n),g=L_(s),y=l==="y"?wn:En,C=l==="y"?Xn:Zn,R=n.rects.reference[h]+n.rects.reference[l]-o[l]-n.rects.popper[h],O=o[l]-n.rects.reference[l],A=jc(s),T=A?l==="y"?A.clientHeight||0:A.clientWidth||0:0,S=R/2-O/2,D=p[y],B=T-g[h]-p[C],x=T/2-g[h]/2+S,I=Du(D,x,B),w=l;n.modifiersData[r]=(e={},e[w]=I,e.centerOffset=I-x,e)}}function XV(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||fk(e.elements.popper,i)&&(e.elements.arrow=i))}const vk={name:"arrow",enabled:!0,phase:"main",fn:YV,effect:XV,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gl(t){return t.split("-")[1]}var ZV={top:"auto",right:"auto",bottom:"auto",left:"auto"};function eF(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:pl(n*i)/i||0,y:pl(r*i)/i||0}}function rE(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,h=t.roundOffsets,p=t.isFixed,g=o.x,y=g===void 0?0:g,C=o.y,R=C===void 0?0:C,O=typeof h=="function"?h({x:y,y:R}):{x:y,y:R};y=O.x,R=O.y;var A=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),S=En,D=wn,B=window;if(c){var x=jc(n),I="clientHeight",w="clientWidth";if(x===er(n)&&(x=io(n),ts(x).position!=="static"&&a==="absolute"&&(I="scrollHeight",w="scrollWidth")),x=x,i===wn||(i===En||i===Zn)&&s===fl){D=Xn;var b=p&&x===B&&B.visualViewport?B.visualViewport.height:x[I];R-=b-r.height,R*=l?1:-1}if(i===En||(i===wn||i===Xn)&&s===fl){S=Zn;var k=p&&x===B&&B.visualViewport?B.visualViewport.width:x[w];y-=k-r.width,y*=l?1:-1}}var N=Object.assign({position:a},c&&ZV),V=h===!0?eF({x:y,y:R},er(n)):{x:y,y:R};if(y=V.x,R=V.y,l){var P;return Object.assign({},N,(P={},P[D]=T?"0":"",P[S]=A?"0":"",P.transform=(B.devicePixelRatio||1)<=1?"translate("+y+"px, "+R+"px)":"translate3d("+y+"px, "+R+"px, 0)",P))}return Object.assign({},N,(e={},e[D]=T?R+"px":"",e[S]=A?y+"px":"",e.transform="",e))}function tF(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:mi(e.placement),variation:gl(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,rE(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,rE(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const M_={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:tF,data:{}};var jh={passive:!0};function nF(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=er(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(h){h.addEventListener("scroll",n.update,jh)}),a&&l.addEventListener("resize",n.update,jh),function(){s&&c.forEach(function(h){h.removeEventListener("scroll",n.update,jh)}),a&&l.removeEventListener("resize",n.update,jh)}}const V_={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:nF,data:{}};var rF={left:"right",right:"left",bottom:"top",top:"bottom"};function hd(t){return t.replace(/left|right|bottom|top/g,function(e){return rF[e]})}var iF={start:"end",end:"start"};function iE(t){return t.replace(/start|end/g,function(e){return iF[e]})}function F_(t){var e=er(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function $_(t){return ml(io(t)).left+F_(t).scrollLeft}function sF(t,e){var n=er(t),r=io(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=dk();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+$_(t),y:l}}function oF(t){var e,n=io(t),r=F_(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Vo(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Vo(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+$_(t),l=-r.scrollTop;return ts(i||n).direction==="rtl"&&(a+=Vo(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function U_(t){var e=ts(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function _k(t){return["html","body","#document"].indexOf(wi(t))>=0?t.ownerDocument.body:_r(t)&&U_(t)?t:_k(Kf(t))}function Lu(t,e){var n;e===void 0&&(e=[]);var r=_k(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=er(r),o=i?[s].concat(s.visualViewport||[],U_(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Lu(Kf(o)))}function Og(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function aF(t,e){var n=ml(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function sE(t,e,n){return e===x_?Og(sF(t,n)):ea(e)?aF(e,n):Og(oF(io(t)))}function lF(t){var e=Lu(Kf(t)),n=["absolute","fixed"].indexOf(ts(t).position)>=0,r=n&&_r(t)?jc(t):t;return ea(r)?e.filter(function(i){return ea(i)&&fk(i,r)&&wi(i)!=="body"}):[]}function uF(t,e,n,r){var i=e==="clippingParents"?lF(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var h=sE(t,c,r);return l.top=Vo(h.top,l.top),l.right=nf(h.right,l.right),l.bottom=nf(h.bottom,l.bottom),l.left=Vo(h.left,l.left),l},sE(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function yk(t){var e=t.reference,n=t.element,r=t.placement,i=r?mi(r):null,s=r?gl(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case wn:l={x:o,y:e.y-n.height};break;case Xn:l={x:o,y:e.y+e.height};break;case Zn:l={x:e.x+e.width,y:a};break;case En:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?j_(i):null;if(c!=null){var h=c==="y"?"height":"width";switch(s){case Zo:l[c]=l[c]-(e[h]/2-n[h]/2);break;case fl:l[c]=l[c]+(e[h]/2-n[h]/2);break}}return l}function vl(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?ek:a,c=n.rootBoundary,h=c===void 0?x_:c,p=n.elementContext,g=p===void 0?ka:p,y=n.altBoundary,C=y===void 0?!1:y,R=n.padding,O=R===void 0?0:R,A=mk(typeof O!="number"?O:gk(O,Pl)),T=g===ka?tk:ka,S=t.rects.popper,D=t.elements[C?T:g],B=uF(ea(D)?D:D.contextElement||io(t.elements.popper),l,h,o),x=ml(t.elements.reference),I=yk({reference:x,element:S,strategy:"absolute",placement:i}),w=Og(Object.assign({},S,I)),b=g===ka?w:x,k={top:B.top-b.top+A.top,bottom:b.bottom-B.bottom+A.bottom,left:B.left-b.left+A.left,right:b.right-B.right+A.right},N=t.modifiersData.offset;if(g===ka&&N){var V=N[i];Object.keys(k).forEach(function(P){var ge=[Zn,Xn].indexOf(P)>=0?1:-1,Ke=[wn,Xn].indexOf(P)>=0?"y":"x";k[P]+=V[Ke]*ge})}return k}function cF(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?O_:l,h=gl(r),p=h?a?Pg:Pg.filter(function(C){return gl(C)===h}):Pl,g=p.filter(function(C){return c.indexOf(C)>=0});g.length===0&&(g=p);var y=g.reduce(function(C,R){return C[R]=vl(t,{placement:R,boundary:i,rootBoundary:s,padding:o})[mi(R)],C},{});return Object.keys(y).sort(function(C,R){return y[C]-y[R]})}function hF(t){if(mi(t)===Wf)return[];var e=hd(t);return[iE(t),e,iE(e)]}function dF(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,h=n.boundary,p=n.rootBoundary,g=n.altBoundary,y=n.flipVariations,C=y===void 0?!0:y,R=n.allowedAutoPlacements,O=e.options.placement,A=mi(O),T=A===O,S=l||(T||!C?[hd(O)]:hF(O)),D=[O].concat(S).reduce(function($e,ze){return $e.concat(mi(ze)===Wf?cF(e,{placement:ze,boundary:h,rootBoundary:p,padding:c,flipVariations:C,allowedAutoPlacements:R}):ze)},[]),B=e.rects.reference,x=e.rects.popper,I=new Map,w=!0,b=D[0],k=0;k<D.length;k++){var N=D[k],V=mi(N),P=gl(N)===Zo,ge=[wn,Xn].indexOf(V)>=0,Ke=ge?"width":"height",Ge=vl(e,{placement:N,boundary:h,rootBoundary:p,altBoundary:g,padding:c}),ye=ge?P?Zn:En:P?Xn:wn;B[Ke]>x[Ke]&&(ye=hd(ye));var X=hd(ye),oe=[];if(s&&oe.push(Ge[V]<=0),a&&oe.push(Ge[ye]<=0,Ge[X]<=0),oe.every(function($e){return $e})){b=N,w=!1;break}I.set(N,oe)}if(w)for(var ce=C?3:1,Ae=function(ze){var Qe=D.find(function(Ze){var kt=I.get(Ze);if(kt)return kt.slice(0,ze).every(function(Ct){return Ct})});if(Qe)return b=Qe,"break"},Te=ce;Te>0;Te--){var H=Ae(Te);if(H==="break")break}e.placement!==b&&(e.modifiersData[r]._skip=!0,e.placement=b,e.reset=!0)}}const wk={name:"flip",enabled:!0,phase:"main",fn:dF,requiresIfExists:["offset"],data:{_skip:!1}};function oE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function aE(t){return[wn,Zn,Xn,En].some(function(e){return t[e]>=0})}function fF(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=vl(e,{elementContext:"reference"}),a=vl(e,{altBoundary:!0}),l=oE(o,r),c=oE(a,i,s),h=aE(l),p=aE(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:h,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":p})}const Ek={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:fF};function pF(t,e,n){var r=mi(t),i=[En,wn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[En,Zn].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function mF(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=O_.reduce(function(h,p){return h[p]=pF(p,e.rects,s),h},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const Tk={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:mF};function gF(t){var e=t.state,n=t.name;e.modifiersData[n]=yk({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const B_={name:"popperOffsets",enabled:!0,phase:"read",fn:gF,data:{}};function vF(t){return t==="x"?"y":"x"}function _F(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,h=n.altBoundary,p=n.padding,g=n.tether,y=g===void 0?!0:g,C=n.tetherOffset,R=C===void 0?0:C,O=vl(e,{boundary:l,rootBoundary:c,padding:p,altBoundary:h}),A=mi(e.placement),T=gl(e.placement),S=!T,D=j_(A),B=vF(D),x=e.modifiersData.popperOffsets,I=e.rects.reference,w=e.rects.popper,b=typeof R=="function"?R(Object.assign({},e.rects,{placement:e.placement})):R,k=typeof b=="number"?{mainAxis:b,altAxis:b}:Object.assign({mainAxis:0,altAxis:0},b),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(x){if(s){var P,ge=D==="y"?wn:En,Ke=D==="y"?Xn:Zn,Ge=D==="y"?"height":"width",ye=x[D],X=ye+O[ge],oe=ye-O[Ke],ce=y?-w[Ge]/2:0,Ae=T===Zo?I[Ge]:w[Ge],Te=T===Zo?-w[Ge]:-I[Ge],H=e.elements.arrow,$e=y&&H?L_(H):{width:0,height:0},ze=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:pk(),Qe=ze[ge],Ze=ze[Ke],kt=Du(0,I[Ge],$e[Ge]),Ct=S?I[Ge]/2-ce-kt-Qe-k.mainAxis:Ae-kt-Qe-k.mainAxis,rr=S?-I[Ge]/2+ce+kt+Ze+k.mainAxis:Te+kt+Ze+k.mainAxis,re=e.elements.arrow&&jc(e.elements.arrow),et=re?D==="y"?re.clientTop||0:re.clientLeft||0:0,Jt=(P=N==null?void 0:N[D])!=null?P:0,Jr=ye+Ct-Jt-et,bi=ye+rr-Jt,Rt=Du(y?nf(X,Jr):X,ye,y?Vo(oe,bi):oe);x[D]=Rt,V[D]=Rt-ye}if(a){var Ii,Tr=D==="x"?wn:En,bn=D==="x"?Xn:Zn,cn=x[B],Sr=B==="y"?"height":"width",is=cn+O[Tr],Yr=cn-O[bn],hn=[wn,En].indexOf(A)!==-1,jn=(Ii=N==null?void 0:N[B])!=null?Ii:0,ut=hn?is:cn-I[Sr]-w[Sr]-jn+k.altAxis,Je=hn?cn+I[Sr]+w[Sr]-jn-k.altAxis:Yr,rt=y&&hn?QV(ut,cn,Je):Du(y?ut:is,cn,y?Je:Yr);x[B]=rt,V[B]=rt-cn}e.modifiersData[r]=V}}const Sk={name:"preventOverflow",enabled:!0,phase:"main",fn:_F,requiresIfExists:["offset"]};function yF(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function wF(t){return t===er(t)||!_r(t)?F_(t):yF(t)}function EF(t){var e=t.getBoundingClientRect(),n=pl(e.width)/t.offsetWidth||1,r=pl(e.height)/t.offsetHeight||1;return n!==1||r!==1}function TF(t,e,n){n===void 0&&(n=!1);var r=_r(e),i=_r(e)&&EF(e),s=io(e),o=ml(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((wi(e)!=="body"||U_(s))&&(a=wF(e)),_r(e)?(l=ml(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=$_(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function SF(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function bF(t){var e=SF(t);return hk.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function IF(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function AF(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var lE={placement:"bottom",modifiers:[],strategy:"absolute"};function uE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Gf(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?lE:i;return function(a,l,c){c===void 0&&(c=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},lE,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],g=!1,y={state:h,setOptions:function(A){var T=typeof A=="function"?A(h.options):A;R(),h.options=Object.assign({},s,h.options,T),h.scrollParents={reference:ea(a)?Lu(a):a.contextElement?Lu(a.contextElement):[],popper:Lu(l)};var S=bF(AF([].concat(r,h.options.modifiers)));return h.orderedModifiers=S.filter(function(D){return D.enabled}),C(),y.update()},forceUpdate:function(){if(!g){var A=h.elements,T=A.reference,S=A.popper;if(uE(T,S)){h.rects={reference:TF(T,jc(S),h.options.strategy==="fixed"),popper:L_(S)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(k){return h.modifiersData[k.name]=Object.assign({},k.data)});for(var D=0;D<h.orderedModifiers.length;D++){if(h.reset===!0){h.reset=!1,D=-1;continue}var B=h.orderedModifiers[D],x=B.fn,I=B.options,w=I===void 0?{}:I,b=B.name;typeof x=="function"&&(h=x({state:h,options:w,name:b,instance:y})||h)}}}},update:IF(function(){return new Promise(function(O){y.forceUpdate(),O(h)})}),destroy:function(){R(),g=!0}};if(!uE(a,l))return y;y.setOptions(c).then(function(O){!g&&c.onFirstUpdate&&c.onFirstUpdate(O)});function C(){h.orderedModifiers.forEach(function(O){var A=O.name,T=O.options,S=T===void 0?{}:T,D=O.effect;if(typeof D=="function"){var B=D({state:h,name:A,instance:y,options:S}),x=function(){};p.push(B||x)}})}function R(){p.forEach(function(O){return O()}),p=[]}return y}}var kF=Gf(),CF=[V_,B_,M_,D_],RF=Gf({defaultModifiers:CF}),PF=[V_,B_,M_,D_,Tk,wk,Sk,vk,Ek],xF=Gf({defaultModifiers:PF});const OF=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ak,afterRead:ik,afterWrite:ck,applyStyles:D_,arrow:vk,auto:Wf,basePlacements:Pl,beforeMain:sk,beforeRead:nk,beforeWrite:lk,bottom:Xn,clippingParents:ek,computeStyles:M_,createPopper:xF,createPopperBase:kF,createPopperLite:RF,detectOverflow:vl,end:fl,eventListeners:V_,flip:wk,hide:Ek,left:En,main:ok,modifierPhases:hk,offset:Tk,placements:O_,popper:ka,popperGenerator:Gf,popperOffsets:B_,preventOverflow:Sk,read:rk,reference:tk,right:Zn,start:Zo,top:wn,variationPlacements:Pg,viewport:x_,write:uk},Symbol.toStringTag,{value:"Module"})),NF=OE(OF);/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r(NF)})(Qn,function(n){function r(M){const d=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(M){for(const _ in M)if(_!=="default"){const L=Object.getOwnPropertyDescriptor(M,_);Object.defineProperty(d,_,L.get?L:{enumerable:!0,get:()=>M[_]})}}return d.default=M,Object.freeze(d)}const i=r(n),s=new Map,o={set(M,d,_){s.has(M)||s.set(M,new Map);const L=s.get(M);L.has(d)||L.size===0?L.set(d,_):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(L.keys())[0]}.`)},get:(M,d)=>s.has(M)&&s.get(M).get(d)||null,remove(M,d){if(!s.has(M))return;const _=s.get(M);_.delete(d),_.size===0&&s.delete(M)}},a="transitionend",l=M=>(M&&window.CSS&&window.CSS.escape&&(M=M.replace(/#([^\s"#']+)/g,(d,_)=>`#${CSS.escape(_)}`)),M),c=M=>{M.dispatchEvent(new Event(a))},h=M=>!(!M||typeof M!="object")&&(M.jquery!==void 0&&(M=M[0]),M.nodeType!==void 0),p=M=>h(M)?M.jquery?M[0]:M:typeof M=="string"&&M.length>0?document.querySelector(l(M)):null,g=M=>{if(!h(M)||M.getClientRects().length===0)return!1;const d=getComputedStyle(M).getPropertyValue("visibility")==="visible",_=M.closest("details:not([open])");if(!_)return d;if(_!==M){const L=M.closest("summary");if(L&&L.parentNode!==_||L===null)return!1}return d},y=M=>!M||M.nodeType!==Node.ELEMENT_NODE||!!M.classList.contains("disabled")||(M.disabled!==void 0?M.disabled:M.hasAttribute("disabled")&&M.getAttribute("disabled")!=="false"),C=M=>{if(!document.documentElement.attachShadow)return null;if(typeof M.getRootNode=="function"){const d=M.getRootNode();return d instanceof ShadowRoot?d:null}return M instanceof ShadowRoot?M:M.parentNode?C(M.parentNode):null},R=()=>{},O=M=>{M.offsetHeight},A=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,T=[],S=()=>document.documentElement.dir==="rtl",D=M=>{var d;d=()=>{const _=A();if(_){const L=M.NAME,K=_.fn[L];_.fn[L]=M.jQueryInterface,_.fn[L].Constructor=M,_.fn[L].noConflict=()=>(_.fn[L]=K,M.jQueryInterface)}},document.readyState==="loading"?(T.length||document.addEventListener("DOMContentLoaded",()=>{for(const _ of T)_()}),T.push(d)):d()},B=(M,d=[],_=M)=>typeof M=="function"?M(...d):_,x=(M,d,_=!0)=>{if(!_)return void B(M);const L=(se=>{if(!se)return 0;let{transitionDuration:Ne,transitionDelay:ft}=window.getComputedStyle(se);const kn=Number.parseFloat(Ne),Un=Number.parseFloat(ft);return kn||Un?(Ne=Ne.split(",")[0],ft=ft.split(",")[0],1e3*(Number.parseFloat(Ne)+Number.parseFloat(ft))):0})(d)+5;let K=!1;const ee=({target:se})=>{se===d&&(K=!0,d.removeEventListener(a,ee),B(M))};d.addEventListener(a,ee),setTimeout(()=>{K||c(d)},L)},I=(M,d,_,L)=>{const K=M.length;let ee=M.indexOf(d);return ee===-1?!_&&L?M[K-1]:M[0]:(ee+=_?1:-1,L&&(ee=(ee+K)%K),M[Math.max(0,Math.min(ee,K-1))])},w=/[^.]*(?=\..*)\.|.*/,b=/\..*/,k=/::\d+$/,N={};let V=1;const P={mouseenter:"mouseover",mouseleave:"mouseout"},ge=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ke(M,d){return d&&`${d}::${V++}`||M.uidEvent||V++}function Ge(M){const d=Ke(M);return M.uidEvent=d,N[d]=N[d]||{},N[d]}function ye(M,d,_=null){return Object.values(M).find(L=>L.callable===d&&L.delegationSelector===_)}function X(M,d,_){const L=typeof d=="string",K=L?_:d||_;let ee=Te(M);return ge.has(ee)||(ee=M),[L,K,ee]}function oe(M,d,_,L,K){if(typeof d!="string"||!M)return;let[ee,se,Ne]=X(d,_,L);d in P&&(se=(yo=>function(Dr){if(!Dr.relatedTarget||Dr.relatedTarget!==Dr.delegateTarget&&!Dr.delegateTarget.contains(Dr.relatedTarget))return yo.call(this,Dr)})(se));const ft=Ge(M),kn=ft[Ne]||(ft[Ne]={}),Un=ye(kn,se,ee?_:null);if(Un)return void(Un.oneOff=Un.oneOff&&K);const Nr=Ke(se,d.replace(w,"")),Pi=ee?function(xi,yo,Dr){return function Kl(fh){const v1=xi.querySelectorAll(yo);for(let{target:wo}=fh;wo&&wo!==this;wo=wo.parentNode)for(const _1 of v1)if(_1===wo)return $e(fh,{delegateTarget:wo}),Kl.oneOff&&H.off(xi,fh.type,yo,Dr),Dr.apply(wo,[fh])}}(M,_,se):function(xi,yo){return function Dr(Kl){return $e(Kl,{delegateTarget:xi}),Dr.oneOff&&H.off(xi,Kl.type,yo),yo.apply(xi,[Kl])}}(M,se);Pi.delegationSelector=ee?_:null,Pi.callable=se,Pi.oneOff=K,Pi.uidEvent=Nr,kn[Nr]=Pi,M.addEventListener(Ne,Pi,ee)}function ce(M,d,_,L,K){const ee=ye(d[_],L,K);ee&&(M.removeEventListener(_,ee,!!K),delete d[_][ee.uidEvent])}function Ae(M,d,_,L){const K=d[_]||{};for(const[ee,se]of Object.entries(K))ee.includes(L)&&ce(M,d,_,se.callable,se.delegationSelector)}function Te(M){return M=M.replace(b,""),P[M]||M}const H={on(M,d,_,L){oe(M,d,_,L,!1)},one(M,d,_,L){oe(M,d,_,L,!0)},off(M,d,_,L){if(typeof d!="string"||!M)return;const[K,ee,se]=X(d,_,L),Ne=se!==d,ft=Ge(M),kn=ft[se]||{},Un=d.startsWith(".");if(ee===void 0){if(Un)for(const Nr of Object.keys(ft))Ae(M,ft,Nr,d.slice(1));for(const[Nr,Pi]of Object.entries(kn)){const xi=Nr.replace(k,"");Ne&&!d.includes(xi)||ce(M,ft,se,Pi.callable,Pi.delegationSelector)}}else{if(!Object.keys(kn).length)return;ce(M,ft,se,ee,K?_:null)}},trigger(M,d,_){if(typeof d!="string"||!M)return null;const L=A();let K=null,ee=!0,se=!0,Ne=!1;d!==Te(d)&&L&&(K=L.Event(d,_),L(M).trigger(K),ee=!K.isPropagationStopped(),se=!K.isImmediatePropagationStopped(),Ne=K.isDefaultPrevented());const ft=$e(new Event(d,{bubbles:ee,cancelable:!0}),_);return Ne&&ft.preventDefault(),se&&M.dispatchEvent(ft),ft.defaultPrevented&&K&&K.preventDefault(),ft}};function $e(M,d={}){for(const[_,L]of Object.entries(d))try{M[_]=L}catch{Object.defineProperty(M,_,{configurable:!0,get:()=>L})}return M}function ze(M){if(M==="true")return!0;if(M==="false")return!1;if(M===Number(M).toString())return Number(M);if(M===""||M==="null")return null;if(typeof M!="string")return M;try{return JSON.parse(decodeURIComponent(M))}catch{return M}}function Qe(M){return M.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}const Ze={setDataAttribute(M,d,_){M.setAttribute(`data-bs-${Qe(d)}`,_)},removeDataAttribute(M,d){M.removeAttribute(`data-bs-${Qe(d)}`)},getDataAttributes(M){if(!M)return{};const d={},_=Object.keys(M.dataset).filter(L=>L.startsWith("bs")&&!L.startsWith("bsConfig"));for(const L of _){let K=L.replace(/^bs/,"");K=K.charAt(0).toLowerCase()+K.slice(1,K.length),d[K]=ze(M.dataset[L])}return d},getDataAttribute:(M,d)=>ze(M.getAttribute(`data-bs-${Qe(d)}`))};class kt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(d){return d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d}_mergeConfigObj(d,_){const L=h(_)?Ze.getDataAttribute(_,"config"):{};return{...this.constructor.Default,...typeof L=="object"?L:{},...h(_)?Ze.getDataAttributes(_):{},...typeof d=="object"?d:{}}}_typeCheckConfig(d,_=this.constructor.DefaultType){for(const[K,ee]of Object.entries(_)){const se=d[K],Ne=h(se)?"element":(L=se)==null?`${L}`:Object.prototype.toString.call(L).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(Ne))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${K}" provided type "${Ne}" but expected type "${ee}".`)}var L}}class Ct extends kt{constructor(d,_){super(),(d=p(d))&&(this._element=d,this._config=this._getConfig(_),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),H.off(this._element,this.constructor.EVENT_KEY);for(const d of Object.getOwnPropertyNames(this))this[d]=null}_queueCallback(d,_,L=!0){x(d,_,L)}_getConfig(d){return d=this._mergeConfigObj(d,this._element),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}static getInstance(d){return o.get(p(d),this.DATA_KEY)}static getOrCreateInstance(d,_={}){return this.getInstance(d)||new this(d,typeof _=="object"?_:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(d){return`${d}${this.EVENT_KEY}`}}const rr=M=>{let d=M.getAttribute("data-bs-target");if(!d||d==="#"){let _=M.getAttribute("href");if(!_||!_.includes("#")&&!_.startsWith("."))return null;_.includes("#")&&!_.startsWith("#")&&(_=`#${_.split("#")[1]}`),d=_&&_!=="#"?_.trim():null}return d?d.split(",").map(_=>l(_)).join(","):null},re={find:(M,d=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(d,M)),findOne:(M,d=document.documentElement)=>Element.prototype.querySelector.call(d,M),children:(M,d)=>[].concat(...M.children).filter(_=>_.matches(d)),parents(M,d){const _=[];let L=M.parentNode.closest(d);for(;L;)_.push(L),L=L.parentNode.closest(d);return _},prev(M,d){let _=M.previousElementSibling;for(;_;){if(_.matches(d))return[_];_=_.previousElementSibling}return[]},next(M,d){let _=M.nextElementSibling;for(;_;){if(_.matches(d))return[_];_=_.nextElementSibling}return[]},focusableChildren(M){const d=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(_=>`${_}:not([tabindex^="-"])`).join(",");return this.find(d,M).filter(_=>!y(_)&&g(_))},getSelectorFromElement(M){const d=rr(M);return d&&re.findOne(d)?d:null},getElementFromSelector(M){const d=rr(M);return d?re.findOne(d):null},getMultipleElementsFromSelector(M){const d=rr(M);return d?re.find(d):[]}},et=(M,d="hide")=>{const _=`click.dismiss${M.EVENT_KEY}`,L=M.NAME;H.on(document,_,`[data-bs-dismiss="${L}"]`,function(K){if(["A","AREA"].includes(this.tagName)&&K.preventDefault(),y(this))return;const ee=re.getElementFromSelector(this)||this.closest(`.${L}`);M.getOrCreateInstance(ee)[d]()})},Jt=".bs.alert",Jr=`close${Jt}`,bi=`closed${Jt}`;class Rt extends Ct{static get NAME(){return"alert"}close(){if(H.trigger(this._element,Jr).defaultPrevented)return;this._element.classList.remove("show");const d=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,d)}_destroyElement(){this._element.remove(),H.trigger(this._element,bi),this.dispose()}static jQueryInterface(d){return this.each(function(){const _=Rt.getOrCreateInstance(this);if(typeof d=="string"){if(_[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);_[d](this)}})}}et(Rt,"close"),D(Rt);const Ii='[data-bs-toggle="button"]';class Tr extends Ct{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(d){return this.each(function(){const _=Tr.getOrCreateInstance(this);d==="toggle"&&_[d]()})}}H.on(document,"click.bs.button.data-api",Ii,M=>{M.preventDefault();const d=M.target.closest(Ii);Tr.getOrCreateInstance(d).toggle()}),D(Tr);const bn=".bs.swipe",cn=`touchstart${bn}`,Sr=`touchmove${bn}`,is=`touchend${bn}`,Yr=`pointerdown${bn}`,hn=`pointerup${bn}`,jn={endCallback:null,leftCallback:null,rightCallback:null},ut={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Je extends kt{constructor(d,_){super(),this._element=d,d&&Je.isSupported()&&(this._config=this._getConfig(_),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return jn}static get DefaultType(){return ut}static get NAME(){return"swipe"}dispose(){H.off(this._element,bn)}_start(d){this._supportPointerEvents?this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX):this._deltaX=d.touches[0].clientX}_end(d){this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX-this._deltaX),this._handleSwipe(),B(this._config.endCallback)}_move(d){this._deltaX=d.touches&&d.touches.length>1?0:d.touches[0].clientX-this._deltaX}_handleSwipe(){const d=Math.abs(this._deltaX);if(d<=40)return;const _=d/this._deltaX;this._deltaX=0,_&&B(_>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(H.on(this._element,Yr,d=>this._start(d)),H.on(this._element,hn,d=>this._end(d)),this._element.classList.add("pointer-event")):(H.on(this._element,cn,d=>this._start(d)),H.on(this._element,Sr,d=>this._move(d)),H.on(this._element,is,d=>this._end(d)))}_eventIsPointerPenTouch(d){return this._supportPointerEvents&&(d.pointerType==="pen"||d.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const rt=".bs.carousel",dn=".data-api",br="next",Mn="prev",In="left",Yt="right",oo=`slide${rt}`,Xr=`slid${rt}`,ca=`keydown${rt}`,Nl=`mouseenter${rt}`,ss=`mouseleave${rt}`,Ai=`dragstart${rt}`,ao=`load${rt}${dn}`,Ir=`click${rt}${dn}`,Ar="carousel",ir="active",sr=".active",os=".carousel-item",as=sr+os,lo={ArrowLeft:Yt,ArrowRight:In},or={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ki={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ct extends Ct{constructor(d,_){super(d,_),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=re.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ar&&this.cycle()}static get Default(){return or}static get DefaultType(){return ki}static get NAME(){return"carousel"}next(){this._slide(br)}nextWhenVisible(){!document.hidden&&g(this._element)&&this.next()}prev(){this._slide(Mn)}pause(){this._isSliding&&c(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?H.one(this._element,Xr,()=>this.cycle()):this.cycle())}to(d){const _=this._getItems();if(d>_.length-1||d<0)return;if(this._isSliding)return void H.one(this._element,Xr,()=>this.to(d));const L=this._getItemIndex(this._getActive());if(L===d)return;const K=d>L?br:Mn;this._slide(K,_[d])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(d){return d.defaultInterval=d.interval,d}_addEventListeners(){this._config.keyboard&&H.on(this._element,ca,d=>this._keydown(d)),this._config.pause==="hover"&&(H.on(this._element,Nl,()=>this.pause()),H.on(this._element,ss,()=>this._maybeEnableCycle())),this._config.touch&&Je.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const _ of re.find(".carousel-item img",this._element))H.on(_,Ai,L=>L.preventDefault());const d={leftCallback:()=>this._slide(this._directionToOrder(In)),rightCallback:()=>this._slide(this._directionToOrder(Yt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Je(this._element,d)}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;const _=lo[d.key];_&&(d.preventDefault(),this._slide(this._directionToOrder(_)))}_getItemIndex(d){return this._getItems().indexOf(d)}_setActiveIndicatorElement(d){if(!this._indicatorsElement)return;const _=re.findOne(sr,this._indicatorsElement);_.classList.remove(ir),_.removeAttribute("aria-current");const L=re.findOne(`[data-bs-slide-to="${d}"]`,this._indicatorsElement);L&&(L.classList.add(ir),L.setAttribute("aria-current","true"))}_updateInterval(){const d=this._activeElement||this._getActive();if(!d)return;const _=Number.parseInt(d.getAttribute("data-bs-interval"),10);this._config.interval=_||this._config.defaultInterval}_slide(d,_=null){if(this._isSliding)return;const L=this._getActive(),K=d===br,ee=_||I(this._getItems(),L,K,this._config.wrap);if(ee===L)return;const se=this._getItemIndex(ee),Ne=Nr=>H.trigger(this._element,Nr,{relatedTarget:ee,direction:this._orderToDirection(d),from:this._getItemIndex(L),to:se});if(Ne(oo).defaultPrevented||!L||!ee)return;const ft=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(se),this._activeElement=ee;const kn=K?"carousel-item-start":"carousel-item-end",Un=K?"carousel-item-next":"carousel-item-prev";ee.classList.add(Un),O(ee),L.classList.add(kn),ee.classList.add(kn),this._queueCallback(()=>{ee.classList.remove(kn,Un),ee.classList.add(ir),L.classList.remove(ir,Un,kn),this._isSliding=!1,Ne(Xr)},L,this._isAnimated()),ft&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return re.findOne(as,this._element)}_getItems(){return re.find(os,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(d){return S()?d===In?Mn:br:d===In?br:Mn}_orderToDirection(d){return S()?d===Mn?In:Yt:d===Mn?Yt:In}static jQueryInterface(d){return this.each(function(){const _=ct.getOrCreateInstance(this,d);if(typeof d!="number"){if(typeof d=="string"){if(_[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);_[d]()}}else _.to(d)})}}H.on(document,Ir,"[data-bs-slide], [data-bs-slide-to]",function(M){const d=re.getElementFromSelector(this);if(!d||!d.classList.contains(Ar))return;M.preventDefault();const _=ct.getOrCreateInstance(d),L=this.getAttribute("data-bs-slide-to");return L?(_.to(L),void _._maybeEnableCycle()):Ze.getDataAttribute(this,"slide")==="next"?(_.next(),void _._maybeEnableCycle()):(_.prev(),void _._maybeEnableCycle())}),H.on(window,ao,()=>{const M=re.find('[data-bs-ride="carousel"]');for(const d of M)ct.getOrCreateInstance(d)}),D(ct);const Zr=".bs.collapse",j=`show${Zr}`,F=`shown${Zr}`,z=`hide${Zr}`,W=`hidden${Zr}`,te=`click${Zr}.data-api`,ie="show",he="collapse",Y="collapsing",ve=`:scope .${he} .${he}`,le='[data-bs-toggle="collapse"]',ue={parent:null,toggle:!0},ke={parent:"(null|element)",toggle:"boolean"};class Ce extends Ct{constructor(d,_){super(d,_),this._isTransitioning=!1,this._triggerArray=[];const L=re.find(le);for(const K of L){const ee=re.getSelectorFromElement(K),se=re.find(ee).filter(Ne=>Ne===this._element);ee!==null&&se.length&&this._triggerArray.push(K)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ue}static get DefaultType(){return ke}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let d=[];if(this._config.parent&&(d=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(K=>K!==this._element).map(K=>Ce.getOrCreateInstance(K,{toggle:!1}))),d.length&&d[0]._isTransitioning||H.trigger(this._element,j).defaultPrevented)return;for(const K of d)K.hide();const _=this._getDimension();this._element.classList.remove(he),this._element.classList.add(Y),this._element.style[_]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const L=`scroll${_[0].toUpperCase()+_.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he,ie),this._element.style[_]="",H.trigger(this._element,F)},this._element,!0),this._element.style[_]=`${this._element[L]}px`}hide(){if(this._isTransitioning||!this._isShown()||H.trigger(this._element,z).defaultPrevented)return;const d=this._getDimension();this._element.style[d]=`${this._element.getBoundingClientRect()[d]}px`,O(this._element),this._element.classList.add(Y),this._element.classList.remove(he,ie);for(const _ of this._triggerArray){const L=re.getElementFromSelector(_);L&&!this._isShown(L)&&this._addAriaAndCollapsedClass([_],!1)}this._isTransitioning=!0,this._element.style[d]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he),H.trigger(this._element,W)},this._element,!0)}_isShown(d=this._element){return d.classList.contains(ie)}_configAfterMerge(d){return d.toggle=!!d.toggle,d.parent=p(d.parent),d}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const d=this._getFirstLevelChildren(le);for(const _ of d){const L=re.getElementFromSelector(_);L&&this._addAriaAndCollapsedClass([_],this._isShown(L))}}_getFirstLevelChildren(d){const _=re.find(ve,this._config.parent);return re.find(d,this._config.parent).filter(L=>!_.includes(L))}_addAriaAndCollapsedClass(d,_){if(d.length)for(const L of d)L.classList.toggle("collapsed",!_),L.setAttribute("aria-expanded",_)}static jQueryInterface(d){const _={};return typeof d=="string"&&/show|hide/.test(d)&&(_.toggle=!1),this.each(function(){const L=Ce.getOrCreateInstance(this,_);if(typeof d=="string"){if(L[d]===void 0)throw new TypeError(`No method named "${d}"`);L[d]()}})}}H.on(document,te,le,function(M){(M.target.tagName==="A"||M.delegateTarget&&M.delegateTarget.tagName==="A")&&M.preventDefault();for(const d of re.getMultipleElementsFromSelector(this))Ce.getOrCreateInstance(d,{toggle:!1}).toggle()}),D(Ce);const Me="dropdown",Se=".bs.dropdown",it=".data-api",st="ArrowUp",kr="ArrowDown",ar=`hide${Se}`,Vn=`hidden${Se}`,Cr=`show${Se}`,lr=`shown${Se}`,Pt=`click${Se}${it}`,fn=`keydown${Se}${it}`,ei=`keyup${Se}${it}`,Fn="show",pe='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ye=`${pe}.${Fn}`,wt=".dropdown-menu",Ue=S()?"top-end":"top-start",pn=S()?"top-start":"top-end",uo=S()?"bottom-end":"bottom-start",ha=S()?"bottom-start":"bottom-end",rp=S()?"left-start":"right-start",ip=S()?"right-start":"left-start",Bc={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},zc={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class $n extends Ct{constructor(d,_){super(d,_),this._popper=null,this._parent=this._element.parentNode,this._menu=re.next(this._element,wt)[0]||re.prev(this._element,wt)[0]||re.findOne(wt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Bc}static get DefaultType(){return zc}static get NAME(){return Me}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const d={relatedTarget:this._element};if(!H.trigger(this._element,Cr,d).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const _ of[].concat(...document.body.children))H.on(_,"mouseover",R);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Fn),this._element.classList.add(Fn),H.trigger(this._element,lr,d)}}hide(){if(y(this._element)||!this._isShown())return;const d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(d){if(!H.trigger(this._element,ar,d).defaultPrevented){if("ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))H.off(_,"mouseover",R);this._popper&&this._popper.destroy(),this._menu.classList.remove(Fn),this._element.classList.remove(Fn),this._element.setAttribute("aria-expanded","false"),Ze.removeDataAttribute(this._menu,"popper"),H.trigger(this._element,Vn,d)}}_getConfig(d){if(typeof(d=super._getConfig(d)).reference=="object"&&!h(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError(`${Me.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return d}_createPopper(){if(i===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let d=this._element;this._config.reference==="parent"?d=this._parent:h(this._config.reference)?d=p(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);const _=this._getPopperConfig();this._popper=i.createPopper(d,this._menu,_)}_isShown(){return this._menu.classList.contains(Fn)}_getPlacement(){const d=this._parent;if(d.classList.contains("dropend"))return rp;if(d.classList.contains("dropstart"))return ip;if(d.classList.contains("dropup-center"))return"top";if(d.classList.contains("dropdown-center"))return"bottom";const _=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains("dropup")?_?pn:Ue:_?ha:uo}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(_=>Number.parseInt(_,10)):typeof d=="function"?_=>d(_,this._element):d}_getPopperConfig(){const d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ze.setDataAttribute(this._menu,"popper","static"),d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...B(this._config.popperConfig,[d])}}_selectMenuItem({key:d,target:_}){const L=re.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(K=>g(K));L.length&&I(L,_,d===kr,!L.includes(_)).focus()}static jQueryInterface(d){return this.each(function(){const _=$n.getOrCreateInstance(this,d);if(typeof d=="string"){if(_[d]===void 0)throw new TypeError(`No method named "${d}"`);_[d]()}})}static clearMenus(d){if(d.button===2||d.type==="keyup"&&d.key!=="Tab")return;const _=re.find(Ye);for(const L of _){const K=$n.getInstance(L);if(!K||K._config.autoClose===!1)continue;const ee=d.composedPath(),se=ee.includes(K._menu);if(ee.includes(K._element)||K._config.autoClose==="inside"&&!se||K._config.autoClose==="outside"&&se||K._menu.contains(d.target)&&(d.type==="keyup"&&d.key==="Tab"||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;const Ne={relatedTarget:K._element};d.type==="click"&&(Ne.clickEvent=d),K._completeHide(Ne)}}static dataApiKeydownHandler(d){const _=/input|textarea/i.test(d.target.tagName),L=d.key==="Escape",K=[st,kr].includes(d.key);if(!K&&!L||_&&!L)return;d.preventDefault();const ee=this.matches(pe)?this:re.prev(this,pe)[0]||re.next(this,pe)[0]||re.findOne(pe,d.delegateTarget.parentNode),se=$n.getOrCreateInstance(ee);if(K)return d.stopPropagation(),se.show(),void se._selectMenuItem(d);se._isShown()&&(d.stopPropagation(),se.hide(),ee.focus())}}H.on(document,fn,pe,$n.dataApiKeydownHandler),H.on(document,fn,wt,$n.dataApiKeydownHandler),H.on(document,Pt,$n.clearMenus),H.on(document,ei,$n.clearMenus),H.on(document,Pt,pe,function(M){M.preventDefault(),$n.getOrCreateInstance(this).toggle()}),D($n);const ti="backdrop",ur="show",co=`mousedown.bs.${ti}`,da={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},qc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class He extends kt{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return da}static get DefaultType(){return qc}static get NAME(){return ti}show(d){if(!this._config.isVisible)return void B(d);this._append();const _=this._getElement();this._config.isAnimated&&O(_),_.classList.add(ur),this._emulateAnimation(()=>{B(d)})}hide(d){this._config.isVisible?(this._getElement().classList.remove(ur),this._emulateAnimation(()=>{this.dispose(),B(d)})):B(d)}dispose(){this._isAppended&&(H.off(this._element,co),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add("fade"),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=p(d.rootElement),d}_append(){if(this._isAppended)return;const d=this._getElement();this._config.rootElement.append(d),H.on(d,co,()=>{B(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){x(d,this._getElement(),this._config.isAnimated)}}const Ci=".bs.focustrap",ho=`focusin${Ci}`,fo=`keydown.tab${Ci}`,Hc="backward",Wc={autofocus:!0,trapElement:null},sp={autofocus:"boolean",trapElement:"element"};class Kc extends kt{constructor(d){super(),this._config=this._getConfig(d),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Wc}static get DefaultType(){return sp}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),H.off(document,Ci),H.on(document,ho,d=>this._handleFocusin(d)),H.on(document,fo,d=>this._handleKeydown(d)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,H.off(document,Ci))}_handleFocusin(d){const{trapElement:_}=this._config;if(d.target===document||d.target===_||_.contains(d.target))return;const L=re.focusableChildren(_);L.length===0?_.focus():this._lastTabNavDirection===Hc?L[L.length-1].focus():L[0].focus()}_handleKeydown(d){d.key==="Tab"&&(this._lastTabNavDirection=d.shiftKey?Hc:"forward")}}const Gc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Qc=".sticky-top",ni="padding-right",Rr="margin-right";class fa{constructor(){this._element=document.body}getWidth(){const d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){const d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ni,_=>_+d),this._setElementAttributes(Gc,ni,_=>_+d),this._setElementAttributes(Qc,Rr,_=>_-d)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ni),this._resetElementAttributes(Gc,ni),this._resetElementAttributes(Qc,Rr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,_,L){const K=this.getWidth();this._applyManipulationCallback(d,ee=>{if(ee!==this._element&&window.innerWidth>ee.clientWidth+K)return;this._saveInitialAttribute(ee,_);const se=window.getComputedStyle(ee).getPropertyValue(_);ee.style.setProperty(_,`${L(Number.parseFloat(se))}px`)})}_saveInitialAttribute(d,_){const L=d.style.getPropertyValue(_);L&&Ze.setDataAttribute(d,_,L)}_resetElementAttributes(d,_){this._applyManipulationCallback(d,L=>{const K=Ze.getDataAttribute(L,_);K!==null?(Ze.removeDataAttribute(L,_),L.style.setProperty(_,K)):L.style.removeProperty(_)})}_applyManipulationCallback(d,_){if(h(d))_(d);else for(const L of re.find(d,this._element))_(L)}}const mn=".bs.modal",Jc=`hide${mn}`,ls=`hidePrevented${mn}`,Yc=`hidden${mn}`,Xc=`show${mn}`,op=`shown${mn}`,ri=`resize${mn}`,ap=`click.dismiss${mn}`,lp=`mousedown.dismiss${mn}`,po=`keydown.dismiss${mn}`,pa=`click${mn}.data-api`,Dl="modal-open",us="show",Ri="modal-static",Zc={backdrop:!0,focus:!0,keyboard:!0},Ll={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Be extends Ct{constructor(d,_){super(d,_),this._dialog=re.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new fa,this._addEventListeners()}static get Default(){return Zc}static get DefaultType(){return Ll}static get NAME(){return"modal"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||H.trigger(this._element,Xc,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Dl),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){this._isShown&&!this._isTransitioning&&(H.trigger(this._element,Jc).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(us),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){H.off(window,mn),H.off(this._dialog,mn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new He({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Kc({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const _=re.findOne(".modal-body",this._dialog);_&&(_.scrollTop=0),O(this._element),this._element.classList.add(us),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,H.trigger(this._element,op,{relatedTarget:d})},this._dialog,this._isAnimated())}_addEventListeners(){H.on(this._element,po,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),H.on(window,ri,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),H.on(this._element,lp,d=>{H.one(this._element,ap,_=>{this._element===d.target&&this._element===_.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Dl),this._resetAdjustments(),this._scrollBar.reset(),H.trigger(this._element,Yc)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(H.trigger(this._element,ls).defaultPrevented)return;const d=this._element.scrollHeight>document.documentElement.clientHeight,_=this._element.style.overflowY;_==="hidden"||this._element.classList.contains(Ri)||(d||(this._element.style.overflowY="hidden"),this._element.classList.add(Ri),this._queueCallback(()=>{this._element.classList.remove(Ri),this._queueCallback(()=>{this._element.style.overflowY=_},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,_=this._scrollBar.getWidth(),L=_>0;if(L&&!d){const K=S()?"paddingLeft":"paddingRight";this._element.style[K]=`${_}px`}if(!L&&d){const K=S()?"paddingRight":"paddingLeft";this._element.style[K]=`${_}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,_){return this.each(function(){const L=Be.getOrCreateInstance(this,d);if(typeof d=="string"){if(L[d]===void 0)throw new TypeError(`No method named "${d}"`);L[d](_)}})}}H.on(document,pa,'[data-bs-toggle="modal"]',function(M){const d=re.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&M.preventDefault(),H.one(d,Xc,L=>{L.defaultPrevented||H.one(d,Yc,()=>{g(this)&&this.focus()})});const _=re.findOne(".modal.show");_&&Be.getInstance(_).hide(),Be.getOrCreateInstance(d).toggle(this)}),et(Be),D(Be);const Pr=".bs.offcanvas",eh=".data-api",th=`load${Pr}${eh}`,jl="show",Ml="showing",mo="hiding",Vl=".offcanvas.show",xr=`show${Pr}`,nh=`shown${Pr}`,up=`hide${Pr}`,cs=`hidePrevented${Pr}`,Fl=`hidden${Pr}`,$l=`resize${Pr}`,ma=`click${Pr}${eh}`,rh=`keydown.dismiss${Pr}`,ga={backdrop:!0,keyboard:!0,scroll:!1},cp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class cr extends Ct{constructor(d,_){super(d,_),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ga}static get DefaultType(){return cp}static get NAME(){return"offcanvas"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||H.trigger(this._element,xr,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new fa().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ml),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(jl),this._element.classList.remove(Ml),H.trigger(this._element,nh,{relatedTarget:d})},this._element,!0))}hide(){this._isShown&&(H.trigger(this._element,up).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(mo),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(jl,mo),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new fa().reset(),H.trigger(this._element,Fl)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const d=!!this._config.backdrop;return new He({className:"offcanvas-backdrop",isVisible:d,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:d?()=>{this._config.backdrop!=="static"?this.hide():H.trigger(this._element,cs)}:null})}_initializeFocusTrap(){return new Kc({trapElement:this._element})}_addEventListeners(){H.on(this._element,rh,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():H.trigger(this._element,cs))})}static jQueryInterface(d){return this.each(function(){const _=cr.getOrCreateInstance(this,d);if(typeof d=="string"){if(_[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);_[d](this)}})}}H.on(document,ma,'[data-bs-toggle="offcanvas"]',function(M){const d=re.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this))return;H.one(d,Fl,()=>{g(this)&&this.focus()});const _=re.findOne(Vl);_&&_!==d&&cr.getInstance(_).hide(),cr.getOrCreateInstance(d).toggle(this)}),H.on(window,th,()=>{for(const M of re.find(Vl))cr.getOrCreateInstance(M).show()}),H.on(window,$l,()=>{for(const M of re.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(M).position!=="fixed"&&cr.getOrCreateInstance(M).hide()}),et(cr),D(cr);const hs={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ih=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),sh=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Ul=(M,d)=>{const _=M.nodeName.toLowerCase();return d.includes(_)?!ih.has(_)||!!sh.test(M.nodeValue):d.filter(L=>L instanceof RegExp).some(L=>L.test(_))},Bl={allowList:hs,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},oh={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},va={entry:"(string|element|function|null)",selector:"(string|element)"};class ah extends kt{constructor(d){super(),this._config=this._getConfig(d)}static get Default(){return Bl}static get DefaultType(){return oh}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(d=>this._resolvePossibleFunction(d)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(d){return this._checkContent(d),this._config.content={...this._config.content,...d},this}toHtml(){const d=document.createElement("div");d.innerHTML=this._maybeSanitize(this._config.template);for(const[K,ee]of Object.entries(this._config.content))this._setContent(d,ee,K);const _=d.children[0],L=this._resolvePossibleFunction(this._config.extraClass);return L&&_.classList.add(...L.split(" ")),_}_typeCheckConfig(d){super._typeCheckConfig(d),this._checkContent(d.content)}_checkContent(d){for(const[_,L]of Object.entries(d))super._typeCheckConfig({selector:_,entry:L},va)}_setContent(d,_,L){const K=re.findOne(L,d);K&&((_=this._resolvePossibleFunction(_))?h(_)?this._putElementInTemplate(p(_),K):this._config.html?K.innerHTML=this._maybeSanitize(_):K.textContent=_:K.remove())}_maybeSanitize(d){return this._config.sanitize?function(_,L,K){if(!_.length)return _;if(K&&typeof K=="function")return K(_);const ee=new window.DOMParser().parseFromString(_,"text/html"),se=[].concat(...ee.body.querySelectorAll("*"));for(const Ne of se){const ft=Ne.nodeName.toLowerCase();if(!Object.keys(L).includes(ft)){Ne.remove();continue}const kn=[].concat(...Ne.attributes),Un=[].concat(L["*"]||[],L[ft]||[]);for(const Nr of kn)Ul(Nr,Un)||Ne.removeAttribute(Nr.nodeName)}return ee.body.innerHTML}(d,this._config.allowList,this._config.sanitizeFn):d}_resolvePossibleFunction(d){return B(d,[this])}_putElementInTemplate(d,_){if(this._config.html)return _.innerHTML="",void _.append(d);_.textContent=d.textContent}}const lh=new Set(["sanitize","allowList","sanitizeFn"]),Or="fade",go="show",zl=".modal",ql="hide.bs.modal",ds="hover",fs="focus",gn={AUTO:"auto",TOP:"top",RIGHT:S()?"left":"right",BOTTOM:"bottom",LEFT:S()?"right":"left"},uh={allowList:hs,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ch={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class An extends Ct{constructor(d,_){if(i===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(d,_),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return uh}static get DefaultType(){return ch}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),H.off(this._element.closest(zl),ql,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const d=H.trigger(this._element,this.constructor.eventName("show")),_=(C(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(d.defaultPrevented||!_)return;this._disposePopper();const L=this._getTipElement();this._element.setAttribute("aria-describedby",L.getAttribute("id"));const{container:K}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(K.append(L),H.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(L),L.classList.add(go),"ontouchstart"in document.documentElement)for(const ee of[].concat(...document.body.children))H.on(ee,"mouseover",R);this._queueCallback(()=>{H.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!H.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(go),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))H.off(d,"mouseover",R);this._activeTrigger.click=!1,this._activeTrigger[fs]=!1,this._activeTrigger[ds]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),H.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(d){const _=this._getTemplateFactory(d).toHtml();if(!_)return null;_.classList.remove(Or,go),_.classList.add(`bs-${this.constructor.NAME}-auto`);const L=(K=>{do K+=Math.floor(1e6*Math.random());while(document.getElementById(K));return K})(this.constructor.NAME).toString();return _.setAttribute("id",L),this._isAnimated()&&_.classList.add(Or),_}setContent(d){this._newContent=d,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(d){return this._templateFactory?this._templateFactory.changeContent(d):this._templateFactory=new ah({...this._config,content:d,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(d){return this.constructor.getOrCreateInstance(d.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Or)}_isShown(){return this.tip&&this.tip.classList.contains(go)}_createPopper(d){const _=B(this._config.placement,[this,d,this._element]),L=gn[_.toUpperCase()];return i.createPopper(this._element,d,this._getPopperConfig(L))}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(_=>Number.parseInt(_,10)):typeof d=="function"?_=>d(_,this._element):d}_resolvePossibleFunction(d){return B(d,[this._element])}_getPopperConfig(d){const _={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:L=>{this._getTipElement().setAttribute("data-popper-placement",L.state.placement)}}]};return{..._,...B(this._config.popperConfig,[_])}}_setListeners(){const d=this._config.trigger.split(" ");for(const _ of d)if(_==="click")H.on(this._element,this.constructor.eventName("click"),this._config.selector,L=>{this._initializeOnDelegatedTarget(L).toggle()});else if(_!=="manual"){const L=_===ds?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),K=_===ds?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");H.on(this._element,L,this._config.selector,ee=>{const se=this._initializeOnDelegatedTarget(ee);se._activeTrigger[ee.type==="focusin"?fs:ds]=!0,se._enter()}),H.on(this._element,K,this._config.selector,ee=>{const se=this._initializeOnDelegatedTarget(ee);se._activeTrigger[ee.type==="focusout"?fs:ds]=se._element.contains(ee.relatedTarget),se._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},H.on(this._element.closest(zl),ql,this._hideModalHandler)}_fixTitle(){const d=this._element.getAttribute("title");d&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",d),this._element.setAttribute("data-bs-original-title",d),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(d,_){clearTimeout(this._timeout),this._timeout=setTimeout(d,_)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(d){const _=Ze.getDataAttributes(this._element);for(const L of Object.keys(_))lh.has(L)&&delete _[L];return d={..._,...typeof d=="object"&&d?d:{}},d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d.container=d.container===!1?document.body:p(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),d}_getDelegateConfig(){const d={};for(const[_,L]of Object.entries(this._config))this.constructor.Default[_]!==L&&(d[_]=L);return d.selector=!1,d.trigger="manual",d}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(d){return this.each(function(){const _=An.getOrCreateInstance(this,d);if(typeof d=="string"){if(_[d]===void 0)throw new TypeError(`No method named "${d}"`);_[d]()}})}}D(An);const u={...An.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},f={...An.DefaultType,content:"(null|string|element|function)"};class m extends An{static get Default(){return u}static get DefaultType(){return f}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(d){return this.each(function(){const _=m.getOrCreateInstance(this,d);if(typeof d=="string"){if(_[d]===void 0)throw new TypeError(`No method named "${d}"`);_[d]()}})}}D(m);const E=".bs.scrollspy",$=`activate${E}`,q=`click${E}`,Z=`load${E}.data-api`,Le="active",Et="[href]",Oe=".nav-link",Lt=`${Oe}, .nav-item > ${Oe}, .list-group-item`,jt={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ps={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Bt extends Ct{constructor(d,_){super(d,_),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return jt}static get DefaultType(){return ps}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const d of this._observableSections.values())this._observer.observe(d)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(d){return d.target=p(d.target)||document.body,d.rootMargin=d.offset?`${d.offset}px 0px -30%`:d.rootMargin,typeof d.threshold=="string"&&(d.threshold=d.threshold.split(",").map(_=>Number.parseFloat(_))),d}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(H.off(this._config.target,q),H.on(this._config.target,q,Et,d=>{const _=this._observableSections.get(d.target.hash);if(_){d.preventDefault();const L=this._rootElement||window,K=_.offsetTop-this._element.offsetTop;if(L.scrollTo)return void L.scrollTo({top:K,behavior:"smooth"});L.scrollTop=K}}))}_getNewObserver(){const d={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(_=>this._observerCallback(_),d)}_observerCallback(d){const _=se=>this._targetLinks.get(`#${se.target.id}`),L=se=>{this._previousScrollData.visibleEntryTop=se.target.offsetTop,this._process(_(se))},K=(this._rootElement||document.documentElement).scrollTop,ee=K>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=K;for(const se of d){if(!se.isIntersecting){this._activeTarget=null,this._clearActiveClass(_(se));continue}const Ne=se.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ee&&Ne){if(L(se),!K)return}else ee||Ne||L(se)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const d=re.find(Et,this._config.target);for(const _ of d){if(!_.hash||y(_))continue;const L=re.findOne(decodeURI(_.hash),this._element);g(L)&&(this._targetLinks.set(decodeURI(_.hash),_),this._observableSections.set(_.hash,L))}}_process(d){this._activeTarget!==d&&(this._clearActiveClass(this._config.target),this._activeTarget=d,d.classList.add(Le),this._activateParents(d),H.trigger(this._element,$,{relatedTarget:d}))}_activateParents(d){if(d.classList.contains("dropdown-item"))re.findOne(".dropdown-toggle",d.closest(".dropdown")).classList.add(Le);else for(const _ of re.parents(d,".nav, .list-group"))for(const L of re.prev(_,Lt))L.classList.add(Le)}_clearActiveClass(d){d.classList.remove(Le);const _=re.find(`${Et}.${Le}`,d);for(const L of _)L.classList.remove(Le)}static jQueryInterface(d){return this.each(function(){const _=Bt.getOrCreateInstance(this,d);if(typeof d=="string"){if(_[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);_[d]()}})}}H.on(window,Z,()=>{for(const M of re.find('[data-bs-spy="scroll"]'))Bt.getOrCreateInstance(M)}),D(Bt);const hr=".bs.tab",Hl=`hide${hr}`,Xk=`hidden${hr}`,Zk=`show${hr}`,e1=`shown${hr}`,t1=`click${hr}`,n1=`keydown${hr}`,r1=`load${hr}`,i1="ArrowLeft",J_="ArrowRight",s1="ArrowUp",Y_="ArrowDown",hp="Home",X_="End",vo="active",Z_="fade",dp="show",ey=".dropdown-toggle",fp=`:not(${ey})`,ty='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',pp=`.nav-link${fp}, .list-group-item${fp}, [role="tab"]${fp}, ${ty}`,o1=`.${vo}[data-bs-toggle="tab"], .${vo}[data-bs-toggle="pill"], .${vo}[data-bs-toggle="list"]`;class _o extends Ct{constructor(d){super(d),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),H.on(this._element,n1,_=>this._keydown(_)))}static get NAME(){return"tab"}show(){const d=this._element;if(this._elemIsActive(d))return;const _=this._getActiveElem(),L=_?H.trigger(_,Hl,{relatedTarget:d}):null;H.trigger(d,Zk,{relatedTarget:_}).defaultPrevented||L&&L.defaultPrevented||(this._deactivate(_,d),this._activate(d,_))}_activate(d,_){d&&(d.classList.add(vo),this._activate(re.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.removeAttribute("tabindex"),d.setAttribute("aria-selected",!0),this._toggleDropDown(d,!0),H.trigger(d,e1,{relatedTarget:_})):d.classList.add(dp)},d,d.classList.contains(Z_)))}_deactivate(d,_){d&&(d.classList.remove(vo),d.blur(),this._deactivate(re.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.setAttribute("aria-selected",!1),d.setAttribute("tabindex","-1"),this._toggleDropDown(d,!1),H.trigger(d,Xk,{relatedTarget:_})):d.classList.remove(dp)},d,d.classList.contains(Z_)))}_keydown(d){if(![i1,J_,s1,Y_,hp,X_].includes(d.key))return;d.stopPropagation(),d.preventDefault();const _=this._getChildren().filter(K=>!y(K));let L;if([hp,X_].includes(d.key))L=_[d.key===hp?0:_.length-1];else{const K=[J_,Y_].includes(d.key);L=I(_,d.target,K,!0)}L&&(L.focus({preventScroll:!0}),_o.getOrCreateInstance(L).show())}_getChildren(){return re.find(pp,this._parent)}_getActiveElem(){return this._getChildren().find(d=>this._elemIsActive(d))||null}_setInitialAttributes(d,_){this._setAttributeIfNotExists(d,"role","tablist");for(const L of _)this._setInitialAttributesOnChild(L)}_setInitialAttributesOnChild(d){d=this._getInnerElement(d);const _=this._elemIsActive(d),L=this._getOuterElement(d);d.setAttribute("aria-selected",_),L!==d&&this._setAttributeIfNotExists(L,"role","presentation"),_||d.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(d,"role","tab"),this._setInitialAttributesOnTargetPanel(d)}_setInitialAttributesOnTargetPanel(d){const _=re.getElementFromSelector(d);_&&(this._setAttributeIfNotExists(_,"role","tabpanel"),d.id&&this._setAttributeIfNotExists(_,"aria-labelledby",`${d.id}`))}_toggleDropDown(d,_){const L=this._getOuterElement(d);if(!L.classList.contains("dropdown"))return;const K=(ee,se)=>{const Ne=re.findOne(ee,L);Ne&&Ne.classList.toggle(se,_)};K(ey,vo),K(".dropdown-menu",dp),L.setAttribute("aria-expanded",_)}_setAttributeIfNotExists(d,_,L){d.hasAttribute(_)||d.setAttribute(_,L)}_elemIsActive(d){return d.classList.contains(vo)}_getInnerElement(d){return d.matches(pp)?d:re.findOne(pp,d)}_getOuterElement(d){return d.closest(".nav-item, .list-group-item")||d}static jQueryInterface(d){return this.each(function(){const _=_o.getOrCreateInstance(this);if(typeof d=="string"){if(_[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);_[d]()}})}}H.on(document,t1,ty,function(M){["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this)||_o.getOrCreateInstance(this).show()}),H.on(window,r1,()=>{for(const M of re.find(o1))_o.getOrCreateInstance(M)}),D(_o);const ms=".bs.toast",a1=`mouseover${ms}`,l1=`mouseout${ms}`,u1=`focusin${ms}`,c1=`focusout${ms}`,h1=`hide${ms}`,d1=`hidden${ms}`,f1=`show${ms}`,p1=`shown${ms}`,ny="hide",hh="show",dh="showing",m1={animation:"boolean",autohide:"boolean",delay:"number"},g1={animation:!0,autohide:!0,delay:5e3};class Wl extends Ct{constructor(d,_){super(d,_),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return g1}static get DefaultType(){return m1}static get NAME(){return"toast"}show(){H.trigger(this._element,f1).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ny),O(this._element),this._element.classList.add(hh,dh),this._queueCallback(()=>{this._element.classList.remove(dh),H.trigger(this._element,p1),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(H.trigger(this._element,h1).defaultPrevented||(this._element.classList.add(dh),this._queueCallback(()=>{this._element.classList.add(ny),this._element.classList.remove(dh,hh),H.trigger(this._element,d1)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(hh),super.dispose()}isShown(){return this._element.classList.contains(hh)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,_){switch(d.type){case"mouseover":case"mouseout":this._hasMouseInteraction=_;break;case"focusin":case"focusout":this._hasKeyboardInteraction=_}if(_)return void this._clearTimeout();const L=d.relatedTarget;this._element===L||this._element.contains(L)||this._maybeScheduleHide()}_setListeners(){H.on(this._element,a1,d=>this._onInteraction(d,!0)),H.on(this._element,l1,d=>this._onInteraction(d,!1)),H.on(this._element,u1,d=>this._onInteraction(d,!0)),H.on(this._element,c1,d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){const _=Wl.getOrCreateInstance(this,d);if(typeof d=="string"){if(_[d]===void 0)throw new TypeError(`No method named "${d}"`);_[d](this)}})}}return et(Wl),D(Wl),{Alert:Rt,Button:Tr,Carousel:ct,Collapse:Ce,Dropdown:$n,Modal:Be,Offcanvas:cr,Popover:m,ScrollSpy:Bt,Tab:_o,Toast:Wl,Tooltip:An}})})(qV);const DF=()=>v.jsx("header",{className:"header text-center border-bottom py-3",children:v.jsx("h1",{className:"fw-bold",children:v.jsx(Ys,{to:"/",className:"text-dark",children:"   "})})}),LF=()=>v.jsx(v.Fragment,{children:v.jsx("div",{className:"subheader bg-dark text-light fs-6",style:{padding:"11px 0"},children:v.jsxs("div",{className:"container-xl text-center",children:["  : ",v.jsx("a",{href:"https://t.me/darelom_students",children:" ."})]})})}),jF=()=>v.jsx("footer",{className:"footer bg-black py-4",children:v.jsxs("div",{className:"container text-center text-light",children:[v.jsxs("div",{className:"d-flex flex-wrap gap-4 gap-sm-5",children:[v.jsxs(cE,{title:" ",children:[v.jsxs(Oi,{children:[v.jsx("span",{children:"  : "}),v.jsx(Ys,{to:"/send_problem",children:"  "}),"."]}),v.jsxs(Oi,{children:[v.jsx("span",{children:" : "}),v.jsx(Ys,{to:"/send_suggestion",children:"  "}),"."]}),v.jsxs(Oi,{children:[v.jsx("span",{children:" : "}),v.jsx("a",{href:"https://t.me/darelom_students",children:" "}),"."]}),v.jsx(Oi,{children:v.jsx("a",{href:"https://github.com/iabdwahab/darelom-students",children:"   GitHub."})})]}),v.jsxs(cE,{title:"  ",children:[v.jsx(Oi,{children:v.jsx("a",{href:"https://iabdwahab.github.io",children:" ."})}),v.jsx(Oi,{children:v.jsx("a",{href:"https://wa.me/+201280552925",children:"WhatsApp."})}),v.jsx(Oi,{children:v.jsx("a",{href:"http://t.me/iabdwahab",children:"Telegram."})}),v.jsx(Oi,{children:v.jsx("a",{href:"https://www.linkedin.com/in/iabdwahab/",children:"LinkedIn."})}),v.jsx(Oi,{children:v.jsx("a",{href:"https://github.com/iabdwahab",children:"GitHub."})})]})]}),v.jsx("hr",{}),v.jsxs("p",{className:"m-0",children:[v.jsx("span",{children:"   : "}),v.jsx("span",{className:"text-warning",children:"  153."})]})]})});function cE({title:t,children:e}){return v.jsxs("div",{className:"text-end",children:[v.jsxs("h4",{className:"mb-3",children:[t,":"]}),e]})}function Oi({children:t}){return v.jsxs("p",{className:"m-0",children:["- ",t]})}const MF=()=>{const{pathname:t}=Ti();U.useEffect(()=>{window.scrollTo(0,0)},[t])},VF=()=>{const[t,e]=U.useState(localStorage.getItem("theme")||"light");function n(){document.documentElement.getAttribute("data-bs-theme")==="dark"?(document.documentElement.setAttribute("data-bs-theme","light"),localStorage.setItem("theme","light"),e("light")):(document.documentElement.setAttribute("data-bs-theme","dark"),localStorage.setItem("theme","dark"),e("dark"))}return v.jsx("button",{className:"btn btn-primary w-100 mt-2 p-2",onClick:n,children:t==="light"?"  []":"  [ ]"})},FF=()=>{const t=Ut(),e=JSON.parse(localStorage.getItem("loggedinUser")),n=JSON.parse(localStorage.getItem("loggedinUserInfo"));async function r(){await IO(Lc),localStorage.setItem("loggedinUser",null),localStorage.setItem("loggedinUserInfo",null),t("/")}return v.jsx("div",{className:"border-bottom",children:v.jsxs("div",{className:"container-xl py-3",children:[e&&v.jsx(v.Fragment,{children:v.jsxs("p",{className:"fs-4",children:[v.jsx("span",{children:" "}),v.jsxs("span",{className:"fw-bold",children:[n.name,"!"]})]})}),n?v.jsxs("div",{className:"d-flex gap-2",children:[v.jsxs("button",{className:`btn btn-primary w-100 p-2 ${!(n!=null&&n.write_permission)&&"disabled"}`,onClick:()=>t(`/${n==null?void 0:n.grade}/send_question_selector`),children:["  ",!(n!=null&&n.write_permission)&&"[  ]"]}),v.jsx("button",{className:"btn btn-danger w-100 p-2",onClick:r,children:" "})]}):v.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t("signin"),children:" "}),v.jsx(VF,{})]})})},Er=({hasText:t=!0})=>v.jsxs("div",{className:"d-block text-center py-4",children:[v.jsx("div",{className:"spinner-border text-primary",role:"status",children:v.jsx("span",{className:"sr-only d-none",children:"..."})}),t?v.jsx("p",{className:"fw-bold fs-5 mt-2",children:"  ."}):""]}),$F=()=>{const[t,e]=U.useState(!0);return U.useEffect(()=>{Pb(Lc,()=>{e(!1)})},[]),v.jsxs("div",{className:"d-flex flex-column min-vh-100",children:[v.jsx(DF,{}),v.jsx(LF,{}),v.jsx(FF,{}),v.jsx("div",{className:"container-xl flex-grow-1 py-3",children:v.jsx("div",{children:t?v.jsx(Er,{}):v.jsx(EV,{})})}),v.jsx(jF,{}),v.jsx(MF,{})]})},UF=({currentStepIndex:t,setCurrentStepIndex:e,selections:n,setSelections:r})=>{function i(){t>0&&(e(t-1),r(n.slice(0,n.length-1)))}const s=t===0;return v.jsx("button",{className:`btn btn-danger ${s?"d-none":"d-block"}`,onClick:i,children:""})},BF=({option:t,stepsList:e,currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})=>{const o=Ut();function a(){if(t.option_data==="test_yourself")return o("/test_yourself");n<e.length-1&&t.will_next?(r(n+1),s([...i,t.option_data])):o(`${i.join("/")}/${t.option_data}`)}const l=`${t.option_text}`;return v.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:a,children:l})},zF=({stepsList:t})=>{var a,l;const e=Ti(),[n,r]=U.useState(((a=e.state)==null?void 0:a.initialStepIndex)||0),[i,s]=U.useState(((l=e.state)==null?void 0:l.selections)||[]),o=t[n];return v.jsxs("div",{children:[v.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[v.jsx("h2",{children:o.title}),v.jsx(UF,{currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})]}),v.jsx("div",{className:"row g-2 my-2",children:o.options.map((c,h)=>{var p;if(n===0||(p=c.availableAt)!=null&&p.includes(i[0]))return v.jsx("div",{className:"col-sm-6",children:v.jsx(BF,{option:c,stepsList:t,currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})},h)})})]})},Si=({children:t,fontSize:e,py:n})=>v.jsx("h2",{className:`fs-${e||4} py-${n||2} fw-medium bg-dark text-center text-light`,children:t}),gc="https://iabdwahab.github.io",qF=[{title:" :",options:[{option_text:" ",option_data:"grade_1",will_next:!0,available:!0},{option_text:" ",option_data:"grade_2",will_next:!0,available:!0},{option_text:" ",option_data:"grade_3",will_next:!0,available:!0},{option_text:" ",option_data:"grade_4",will_next:!0,available:!0},{option_text:" ",option_data:"general_subjects",will_next:!1,available:!0}]},{title:" ",options:[{option_text:" ",option_data:"schedule",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"books",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"lectures_recordings",will_next:!0,availableAt:["grade_1","grade_2","grade_3"]},{option_text:"  -  ",option_data:"test_yourself_students",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"  [ ]",option_data:"test_yourself",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"more_resources",will_next:!0,availableAt:["grade_2"]},{option_text:"",option_data:"explanations",will_next:!1,availableAt:[]},{option_text:"  ",option_data:"final_exams",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]},{title:"  :",options:[{option_text:"  ",option_data:"term_1",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"  ",option_data:"term_2",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]}],HF=()=>v.jsx(v.Fragment,{children:v.jsx(zF,{stepsList:qF})});function on(t){return{grade_1:" ",grade_2:" ",grade_3:" ",grade_4:" ",term_1:"  ",term_2:"  ",nahw:"",sarf:"",english:"",elm_allugha:" ",albalagha:"",adab_gahily:" ",falsafa:"",seera_khoalfaa:"  ",quran_ebadat:" ",naqd_qadim:"  ",nsoos_gahilya:" ",farsy:"",ebry:"",riyadat_aamal:" ",nazm_oslobiya:" ",quran_ahwal:"   ",adab_islamy_omawy:"  ",arood:"",mawarith:"",maajim_aswat:"  ",balaghat_quran:" ",qaet_bahth:" ",nsoos_islamya_omawya:"  ",tareekh_omawy_abasy:"  ",aqida:"",adab_moqaran:" ",adab_abasy_andalusy:"  ",olom_quran:" ",tareekh_misr:"  ",tafseer:"",elm_kalam:" ",nsoos_abasya_andalusya:"  ",ittijahat_lughawiya:" ",adab_hadith:" ",hadara_nozom:" ",tasawof:"",osool_fiqh:" ",horoob_salibiya:" ",nsoos_haditha:"  ",naqd_hadith:"  ",mojalad_tasgilat:"  ",groupped_channel:"  "}[t]}const Mc=()=>v.jsx("button",{className:"btn btn-primary w-100 disabled",children:v.jsx("div",{className:"spinner-border spinner-border-sm",role:"status"})}),WF="modulepreload",KF=function(t){return"/darelom-students/"+t},hE={},Vc=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(a=>{if(a=KF(a),a in hE)return;hE[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":WF,l||(h.as="script",h.crossOrigin=""),h.href=a,o&&h.setAttribute("nonce",o),document.head.appendChild(h),l)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},GF=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Vc(async()=>{const{default:r}=await Promise.resolve().then(()=>xl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class z_ extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class QF extends z_{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class JF extends z_{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class YF extends z_{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ng;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ng||(Ng={}));var XF=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function l(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class ZF{constructor(e,{headers:n={},customFetch:r,region:i=Ng.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=GF(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return XF(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const h=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(C=>{throw new QF(C)}),p=h.headers.get("x-relay-error");if(p&&p==="true")throw new JF(h);if(!h.ok)throw new YF(h);let g=((r=h.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield h.json():g==="application/octet-stream"?y=yield h.blob():g==="text/event-stream"?y=h:g==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null}}catch(i){return{data:null,error:i}}})}}var Pn={},q_={},Qf={},Fc={},Jf={},Yf={},e$=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_l=e$();const t$=_l.fetch,bk=_l.fetch.bind(_l),Ik=_l.Headers,n$=_l.Request,r$=_l.Response,xl=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ik,Request:n$,Response:r$,default:bk,fetch:t$},Symbol.toStringTag,{value:"Module"})),i$=OE(xl);var Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});let s$=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Xf.default=s$;var Ak=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Yf,"__esModule",{value:!0});const o$=Ak(i$),a$=Ak(Xf);let l$=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=o$.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,h=null,p=null,g=s.status,y=s.statusText;if(s.ok){if(this.method!=="HEAD"){const A=await s.text();A===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?h=A:h=JSON.parse(A))}const R=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),O=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");R&&O&&O.length>1&&(p=parseInt(O[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(c={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,p=null,g=406,y="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const R=await s.text();try{c=JSON.parse(R),Array.isArray(c)&&s.status===404&&(h=[],c=null,g=200,y="OK")}catch{s.status===404&&R===""?(g=204,y="No Content"):c={message:R}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,g=200,y="OK"),c&&this.shouldThrowOnError)throw new a$.default(c)}return{error:c,data:h,count:p,status:g,statusText:y}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};Yf.default=l$;var u$=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Jf,"__esModule",{value:!0});const c$=u$(Yf);let h$=class extends c$.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Jf.default=h$;var d$=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Fc,"__esModule",{value:!0});const f$=d$(Jf);let p$=class extends f$.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Fc.default=p$;var m$=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qf,"__esModule",{value:!0});const ou=m$(Fc);let g$=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new ou.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new ou.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,h)=>c.concat(Object.keys(h)),[]);if(l.length>0){const c=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",c.join(","))}}return new ou.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new ou.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ou.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Qf.default=g$;var Zf={},ep={};Object.defineProperty(ep,"__esModule",{value:!0});ep.version=void 0;ep.version="0.0.0-automated";Object.defineProperty(Zf,"__esModule",{value:!0});Zf.DEFAULT_HEADERS=void 0;const v$=ep;Zf.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${v$.version}`};var kk=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(q_,"__esModule",{value:!0});const _$=kk(Qf),y$=kk(Fc),w$=Zf;let E$=class Ck{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},w$.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new _$.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Ck(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([h,p])=>p!==void 0).map(([h,p])=>[h,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([h,p])=>{a.searchParams.append(h,p)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new y$.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};q_.default=E$;var Ol=Qn&&Qn.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.PostgrestError=Pn.PostgrestBuilder=Pn.PostgrestTransformBuilder=Pn.PostgrestFilterBuilder=Pn.PostgrestQueryBuilder=Pn.PostgrestClient=void 0;const Rk=Ol(q_);Pn.PostgrestClient=Rk.default;const Pk=Ol(Qf);Pn.PostgrestQueryBuilder=Pk.default;const xk=Ol(Fc);Pn.PostgrestFilterBuilder=xk.default;const Ok=Ol(Jf);Pn.PostgrestTransformBuilder=Ok.default;const Nk=Ol(Yf);Pn.PostgrestBuilder=Nk.default;const Dk=Ol(Xf);Pn.PostgrestError=Dk.default;var T$=Pn.default={PostgrestClient:Rk.default,PostgrestQueryBuilder:Pk.default,PostgrestFilterBuilder:xk.default,PostgrestTransformBuilder:Ok.default,PostgrestBuilder:Nk.default,PostgrestError:Dk.default};const{PostgrestClient:S$,PostgrestQueryBuilder:oB,PostgrestFilterBuilder:aB,PostgrestTransformBuilder:lB,PostgrestBuilder:uB,PostgrestError:cB}=T$;function b$(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const I$=b$(),A$="2.11.15",k$=`realtime-js/${A$}`,C$="1.0.0",Lk=1e4,R$=1e3;var ju;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(ju||(ju={}));var tn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(tn||(tn={}));var $r;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})($r||($r={}));var Dg;(function(t){t.websocket="websocket"})(Dg||(Dg={}));var ko;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ko||(ko={}));class P${constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class jk{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var tt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(tt||(tt={}));const dE=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=x$(o,t,e,i),s),{})},x$=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?Mk(s,o):Lg(o)},Mk=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return L$(e,n)}switch(t){case tt.bool:return O$(e);case tt.float4:case tt.float8:case tt.int2:case tt.int4:case tt.int8:case tt.numeric:case tt.oid:return N$(e);case tt.json:case tt.jsonb:return D$(e);case tt.timestamp:return j$(e);case tt.abstime:case tt.date:case tt.daterange:case tt.int4range:case tt.int8range:case tt.money:case tt.reltime:case tt.text:case tt.time:case tt.timestamptz:case tt.timetz:case tt.tsrange:case tt.tstzrange:return Lg(e);default:return Lg(e)}},Lg=t=>t,O$=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},N$=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},D$=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},L$=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Mk(e,a))}return t},j$=t=>typeof t=="string"?t.replace(" ","T"):t,Vk=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class im{constructor(e,n,r={},i=Lk){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var fE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(fE||(fE={}));class Mu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mu.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Mu.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Mu.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,h)=>{o[c]||(l[c]=h)}),this.map(o,(c,h)=>{const p=s[c];if(p){const g=h.map(O=>O.presence_ref),y=p.map(O=>O.presence_ref),C=h.filter(O=>y.indexOf(O.presence_ref)<0),R=p.filter(O=>g.indexOf(O.presence_ref)<0);C.length>0&&(a[c]=C),R.length>0&&(l[c]=R)}else a[c]=h}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const h=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),h.length>0){const p=e[a].map(y=>y.presence_ref),g=h.filter(y=>p.indexOf(y.presence_ref)<0);e[a].unshift(...g)}r(a,h,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const h=l.map(p=>p.presence_ref);c=c.filter(p=>h.indexOf(p.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var pE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(pE||(pE={}));var mE;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(mE||(mE={}));var Li;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Li||(Li={}));class H_{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new im(this,$r.join,this.params,this.timeout),this.rejoinTimer=new jk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on($r.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Mu(this),this.broadcastEndpointURL=Vk(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==tn.closed){const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(h=>e==null?void 0:e(Li.CHANNEL_ERROR,h)),this._onClose(()=>e==null?void 0:e(Li.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(h=>h.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){e==null||e(Li.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,C=[];for(let R=0;R<y;R++){const O=g[R],{filter:{event:A,schema:T,table:S,filter:D}}=O,B=h&&h[R];if(B&&B.event===A&&B.schema===T&&B.table===S&&B.filter===D)C.push(Object.assign(Object.assign({},O),{id:B.id}));else{this.unsubscribe(),this.state=tn.errored,e==null||e(Li.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Li.SUBSCRIBED);return}}).receive("error",h=>{this.state=tn.errored,e==null||e(Li.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Li.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=tn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($r.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new im(this,$r.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new im(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:h}=$r;if(r&&[a,l,c,h].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var C,R,O;return((C=y.filter)===null||C===void 0?void 0:C.event)==="*"||((O=(R=y.filter)===null||R===void 0?void 0:R.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===o}).map(y=>y.callback(g,r)):(s=this.bindings[o])===null||s===void 0||s.filter(y=>{var C,R,O,A,T,S;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const D=y.id,B=(C=y.filter)===null||C===void 0?void 0:C.event;return D&&((R=n.ids)===null||R===void 0?void 0:R.includes(D))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((O=n.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))}else{const D=(T=(A=y==null?void 0:y.filter)===null||A===void 0?void 0:A.event)===null||T===void 0?void 0:T.toLocaleLowerCase();return D==="*"||D===((S=n==null?void 0:n.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof g=="object"&&"ids"in g){const C=g.data,{schema:R,table:O,commit_timestamp:A,type:T,errors:S}=C;g=Object.assign(Object.assign({},{schema:R,table:O,commit_timestamp:A,eventType:T,new:{},old:{},errors:S}),this._getPayloadRecords(C))}y.callback(g,r)})}_isClosed(){return this.state===tn.closed}_isJoined(){return this.state===tn.joined}_isJoining(){return this.state===tn.joining}_isLeaving(){return this.state===tn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&H_.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($r.close,{},e)}_onError(e){this._on($r.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=dE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=dE(e.columns,e.old_record)),n}}const gE=()=>{},M$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class V${constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Lk,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gE,this.ref=0,this.logger=gE,this.conn=null,this.sendBuffer=[],this.serializer=new P$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>Vc(async()=>{const{default:l}=await Promise.resolve().then(()=>xl);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${Dg.websocket}`,this.httpEndpoint=Vk(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new jk(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=I$),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:C$}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ju.connecting:return ko.Connecting;case ju.open:return ko.Open;case ju.closing:return ko.Closing;default:return ko.Closed}}isConnected(){return this.connectionState()===ko.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new H_(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:k$};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push($r.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(R$,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger($r.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([M$],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class W_ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Mt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class F$ extends W_{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class jg extends W_{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var $$=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function l(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const Fk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Vc(async()=>{const{default:r}=await Promise.resolve().then(()=>xl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},U$=()=>$$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vc(()=>Promise.resolve().then(()=>xl),void 0)).Response:Response}),Mg=t=>{if(Array.isArray(t))return t.map(n=>Mg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Mg(r)}),e};var la=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function l(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const sm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),B$=(t,e,n)=>la(void 0,void 0,void 0,function*(){const r=yield U$();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new F$(sm(i),t.status||500))}).catch(i=>{e(new jg(sm(i),i))}):e(new jg(sm(t),t))}),z$=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function $c(t,e,n,r,i,s){return la(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,z$(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>B$(l,a,r))})})}function rf(t,e,n,r){return la(this,void 0,void 0,function*(){return $c(t,"GET",e,n,r)})}function Ts(t,e,n,r,i){return la(this,void 0,void 0,function*(){return $c(t,"POST",e,r,i,n)})}function q$(t,e,n,r,i){return la(this,void 0,void 0,function*(){return $c(t,"PUT",e,r,i,n)})}function H$(t,e,n,r){return la(this,void 0,void 0,function*(){return $c(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function $k(t,e,n,r,i){return la(this,void 0,void 0,function*(){return $c(t,"DELETE",e,r,i,n)})}var Cn=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function l(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const W$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class K${constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=Fk(i)}uploadOrUpdate(e,n,r,i){return Cn(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},vE),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),h=this._getFinalPath(c),p=yield this.fetch(`${this.url}/object/${h}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),g=yield p.json();return p.ok?{data:{path:c,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(s){if(Mt(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Cn(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:vE.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType);const p=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:h}),g=yield p.json();return p.ok?{data:{path:s,fullPath:g.Key},error:null}:{data:null,error:g}}catch(l){if(Mt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Cn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Ts(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new W_("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}update(e,n,r){return Cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Cn(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Cn(this,void 0,void 0,function*(){try{return{data:{path:(yield Ts(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Cn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Ts(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Cn(this,void 0,void 0,function*(){try{const i=yield Ts(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}download(e,n){return Cn(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield rf(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Mt(a))return{data:null,error:a};throw a}})}info(e){return Cn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield rf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Mg(r),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}exists(e){return Cn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield H$(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Mt(r)&&r instanceof jg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Cn(this,void 0,void 0,function*(){try{return{data:yield $k(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}list(e,n,r){return Cn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},W$),n),{prefix:e||""});return{data:yield Ts(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Mt(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const G$="2.7.1",Q$={"X-Client-Info":`storage-js/${G$}`};var wa=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function l(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class J${constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},Q$),n),this.fetch=Fk(r)}listBuckets(){return wa(this,void 0,void 0,function*(){try{return{data:yield rf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Mt(e))return{data:null,error:e};throw e}})}getBucket(e){return wa(this,void 0,void 0,function*(){try{return{data:yield rf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return wa(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return wa(this,void 0,void 0,function*(){try{return{data:yield q$(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Mt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return wa(this,void 0,void 0,function*(){try{return{data:yield Ts(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return wa(this,void 0,void 0,function*(){try{return{data:yield $k(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Mt(n))return{data:null,error:n};throw n}})}}class Y$ extends J${constructor(e,n={},r){super(e,n,r)}from(e){return new K$(this.url,this.headers,e,this.fetch)}}const X$="2.50.2";let _u="";typeof Deno<"u"?_u="deno":typeof document<"u"?_u="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_u="react-native":_u="node";const Z$={"X-Client-Info":`supabase-js-${_u}/${X$}`},eU={headers:Z$},tU={schema:"public"},nU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},rU={};var iU=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function l(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const sU=t=>{let e;return t?e=t:typeof fetch>"u"?e=bk:e=fetch,(...n)=>e(...n)},oU=()=>typeof Headers>"u"?Ik:Headers,aU=(t,e,n)=>{const r=sU(n),i=oU();return(s,o)=>iU(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var lU=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function l(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function uU(t){return t.endsWith("/")?t:t+"/"}function cU(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:h,global:p}=e,g={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},h),o),global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>lU(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const Uk="2.70.0",Ca=30*1e3,Vg=3,om=Vg*Ca,hU="http://localhost:9999",dU="supabase.auth.token",fU={"X-Client-Info":`gotrue-js/${Uk}`},Fg="X-Supabase-Api-Version",Bk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,mU=6e5;class K_ extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function be(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class gU extends K_{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function vU(t){return be(t)&&t.name==="AuthApiError"}class zk extends K_{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class so extends K_{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class ys extends so{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function _U(t){return be(t)&&t.name==="AuthSessionMissingError"}class Mh extends so{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vh extends so{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fh extends so{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function yU(t){return be(t)&&t.name==="AuthImplicitGrantRedirectError"}class _E extends so{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class $g extends so{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function am(t){return be(t)&&t.name==="AuthRetryableFetchError"}class yE extends so{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Vu extends so{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const sf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wE=` 	
\r=`.split(""),wU=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<wE.length;e+=1)t[wE[e].charCodeAt(0)]=-2;for(let e=0;e<sf.length;e+=1)t[sf[e].charCodeAt(0)]=e;return t})();function EE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(sf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(sf[r]),e.queuedBits-=6}}function qk(t,e,n){const r=wU[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function TE(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{SU(o,r,n)};for(let o=0;o<t.length;o+=1)qk(t.charCodeAt(o),i,s);return e.join("")}function EU(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function TU(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}EU(r,e)}}function SU(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function bU(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)qk(t.charCodeAt(i),n,r);return new Uint8Array(e)}function IU(t){const e=[];return TU(t,n=>e.push(n)),new Uint8Array(e)}function AU(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>EE(i,n,r)),EE(null,n,r),e.join("")}function kU(t){return Math.round(Date.now()/1e3)+t}function CU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const jr=()=>typeof window<"u"&&typeof document<"u",Eo={tested:!1,writable:!1},Fu=()=>{if(!jr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Eo.tested)return Eo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Eo.tested=!0,Eo.writable=!0}catch{Eo.tested=!0,Eo.writable=!1}return Eo.writable};function RU(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const Hk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>Vc(async()=>{const{default:r}=await Promise.resolve().then(()=>xl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},PU=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Wk=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},$h=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Uh=async(t,e)=>{await t.removeItem(e)};class tp{constructor(){this.promise=new tp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}tp.promiseConstructor=Promise;function lm(t){const e=t.split(".");if(e.length!==3)throw new Vu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!pU.test(e[r]))throw new Vu("JWT not in base64url format");return{header:JSON.parse(TE(e[0])),payload:JSON.parse(TE(e[1])),signature:bU(e[2]),raw:{header:e[0],payload:e[1]}}}async function xU(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function OU(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function NU(t){return("0"+t.toString(16)).substr(-2)}function DU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,NU).join("")}async function LU(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function jU(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await LU(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ea(t,e,n=!1){const r=DU();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await Wk(t,`${e}-code-verifier`,i);const s=await jU(r);return[s,r===s?"plain":"s256"]}const MU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function VU(t){const e=t.headers.get(Fg);if(!e||!e.match(MU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function FU(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function $U(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const UU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ta(t){if(!UU.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var BU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const Io=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zU=[502,503,504];async function SE(t){var e;if(!PU(t))throw new $g(Io(t),0);if(zU.includes(t.status))throw new $g(Io(t),t.status);let n;try{n=await t.json()}catch(s){throw new zk(Io(s),s)}let r;const i=VU(t);if(i&&i.getTime()>=Bk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new yE(Io(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new ys}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new yE(Io(n),t.status,n.weak_password.reasons);throw new gU(Io(n),t.status||500,r)}const qU=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Re(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Fg]||(s[Fg]=Bk["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await HU(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function HU(t,e,n,r,i,s){const o=qU(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new $g(Io(l),0)}if(a.ok||await SE(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await SE(l)}}function Ni(t){var e;let n=null;QU(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=kU(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function bE(t){const e=Ni(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Rs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function WU(t){return{data:t,error:null}}function KU(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=BU(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function GU(t){return t}function QU(t){return t.access_token&&t.refresh_token&&t.expires_in}const um=["global","local","others"];var JU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class YU{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Hk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=um[0]){if(um.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${um.join(", ")}`);try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Rs})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=JU(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:KU,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(be(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Rs})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},h=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:GU});if(h.error)throw h.error;const p=await h.json(),g=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=h.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(C=>{const R=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(C.split(";")[1].split("=")[1]);c[`${O}Page`]=R}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(be(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ta(e);try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Rs})}catch(n){if(be(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ta(e);try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Rs})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ta(e);try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Rs})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ta(e.userId);try{const{data:n,error:r}=await Re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(be(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ta(e.userId),Ta(e.id);try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}}const XU={getItem:t=>Fu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Fu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Fu()&&globalThis.localStorage.removeItem(t)}};function IE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function ZU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Sa={debug:!!(globalThis&&Fu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Kk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class e4 extends Kk{}async function t4(t,e,n){Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Sa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new e4(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Sa.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}ZU();const n4={url:hU,storageKey:dU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function AE(t,e,n){return await n()}class vc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=vc.nextInstanceID,vc.nextInstanceID+=1,this.instanceID>0&&jr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},n4),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new YU({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Hk(i.fetch),this.lock=i.lock||AE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:jr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=t4:this.lock=AE,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Fu()?this.storage=XU:(this.memoryStorage={},this.storage=IE(this.memoryStorage)):(this.memoryStorage={},this.storage=IE(this.memoryStorage)),jr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Uk}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=RU(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),jr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),yU(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return be(n)?{error:n}:{error:new zk("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ni}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(be(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:h,password:p,options:g}=e;let y=null,C=null;this.flowType==="pkce"&&([y,C]=await Ea(this.storage,this.storageKey)),s=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:h,password:p,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:C},xform:Ni})}else if("phone"in e){const{phone:h,password:p,options:g}=e;s=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(i=g==null?void 0:g.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Ni})}else throw new Vh("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(be(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:bE})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:bE})}else throw new Vh("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Mh}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,s,o,a,l,c,h,p,g,y;let C,R;if("message"in e)C=e.message,R=e.signature;else{const{chain:O,wallet:A,statement:T,options:S}=e;let D;if(jr())if(typeof A=="object")D=A;else{const x=window;if("solana"in x&&typeof x.solana=="object"&&("signIn"in x.solana&&typeof x.solana.signIn=="function"||"signMessage"in x.solana&&typeof x.solana.signMessage=="function"))D=x.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=A}const B=new URL((n=S==null?void 0:S.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in D&&D.signIn){const x=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S==null?void 0:S.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),T?{statement:T}:null));let I;if(Array.isArray(x)&&x[0]&&typeof x[0]=="object")I=x[0];else if(x&&typeof x=="object"&&"signedMessage"in x&&"signature"in x)I=x;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in I&&"signature"in I&&(typeof I.signedMessage=="string"||I.signedMessage instanceof Uint8Array)&&I.signature instanceof Uint8Array)C=typeof I.signedMessage=="string"?I.signedMessage:new TextDecoder().decode(I.signedMessage),R=I.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${B.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...T?["",T,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(i=(r=S==null?void 0:S.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=S==null?void 0:S.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((o=S==null?void 0:S.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((a=S==null?void 0:S.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((l=S==null?void 0:S.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((c=S==null?void 0:S.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((p=(h=S==null?void 0:S.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...S.signInWithSolana.resources.map(I=>`- ${I}`)]:[]].join(`
`);const x=await D.signMessage(new TextEncoder().encode(C),"utf8");if(!x||!(x instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=x}}try{const{data:O,error:A}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:AU(R)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ni});if(A)throw A;return!O||!O.session||!O.user?{data:{user:null,session:null},error:new Mh}:(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),{data:Object.assign({},O),error:A})}catch(O){if(be(O))return{data:{user:null,session:null},error:O};throw O}}async _exchangeCodeForSession(e){const n=await $h(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ni});if(await Uh(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Mh}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(be(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ni}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Mh}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,h=null;this.flowType==="pkce"&&([c,h]=await Ea(this.storage,this.storageKey));const{error:p}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:h},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:h}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new Vh("You must provide either an email or phone number.")}catch(a){if(be(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Ni});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(be(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Ea(this.storage,this.storageKey)),await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:WU})}catch(s){if(be(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new ys;const{error:i}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(be(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Re(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Re(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Vh("You must provide either an email or phone number and a type")}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await $h(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<om:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,h)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,h))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Rs}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ys}:await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Rs})})}catch(n){if(be(n))return _U(n)&&(await this._removeSession(),await Uh(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new ys;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Ea(this.storage,this.storageKey));const{data:c,error:h}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Rs});if(h)throw h;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(be(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ys;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=lm(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(be(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new ys;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(be(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!jr())throw new Fh("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fh(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _E("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fh("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _E("No code detected.");const{data:T,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:T.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Fh("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(a);let g=h+p;l&&(g=parseInt(l));const y=g-h;y*1e3<=Ca&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const C=g-p;h-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,g,h):h-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,g,h);const{data:R,error:O}=await this._getUser(s);if(O)throw O;const A={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:g,refresh_token:o,token_type:c,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(r){if(be(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await $h(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(vU(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Uh(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=CU(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Ea(this.storage,this.storageKey,!0));try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(be(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(be(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,h;const{data:p,error:g}=s;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Re(this.fetch,"GET",y,{headers:this.headers,jwt:(h=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return jr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(be(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await OU(async i=>(i>0&&await xU(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ni})),(i,s)=>{const o=200*Math.pow(2,i);return s&&am(s)&&Date.now()+o-r<Ca})}catch(r){if(this._debug(n,"error",r),be(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),jr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await $h(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<om;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${om}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),am(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new ys;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new tp;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new ys;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),be(s)){const o={session:null,error:s};return am(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Wk(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Uh(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&jr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ca);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Ca);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Ca}ms, refresh threshold is ${Vg} ticks`),i<=Vg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Kk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!jr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Ea(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(be(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(be(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(be(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=lm(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const h=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+mU>Date.now()))return r;const{data:i,error:s}=await Re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new Vu("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new Vu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:y,error:C}=await this.getSession();if(C||!y.session)return{data:null,error:C};r=y.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=lm(r);if(FU(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:s,header:i,signature:o},error:null}}const c=$U(i.alg),h=await this.fetchJwk(i.kid,n),p=await crypto.subtle.importKey("jwk",h,c,!0,["verify"]);if(!await crypto.subtle.verify(c,p,o,IU(`${a}.${l}`)))throw new Vu("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(be(r))return{data:null,error:r};throw r}}}vc.nextInstanceID=0;const r4=vc;class i4 extends r4{constructor(e){super(e)}}var s4=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{c(r.next(h))}catch(p){o(p)}}function l(h){try{c(r.throw(h))}catch(p){o(p)}}function c(h){h.done?s(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class o4{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=uU(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,h={db:tU,realtime:rU,auth:Object.assign(Object.assign({},nU),{storageKey:c}),global:eU},p=cU(r??{},h);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=aU(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new S$(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new ZF(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Y$(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return s4(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new i4({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new V$(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const a4=(t,e,n)=>new o4(t,e,n),l4="https://tilyikrjfydofqprandn.supabase.co",u4="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpbHlpa3JqZnlkb2ZxcHJhbmRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMzU3NzksImV4cCI6MjA2NjkxMTc3OX0.dATkafpW2h3BF59iipyHtb8SQQaIqu_I5gycuHu15_k";a4(l4,u4);const c4=()=>v.jsxs("div",{className:"min-vh-100 d-flex flex-column gap-4 justify-content-center align-items-center",children:[v.jsx("h1",{children:"  ."}),v.jsx(Ys,{to:"/",className:"btn btn-primary",children:" "})]}),G_=({grade:t,backFrom:e})=>{const n=Ut();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return v.jsx("button",{className:"btn btn-danger",onClick:r,children:""})};function Bi({text:t,color:e,widthPercentage:n,onClick:r}){return v.jsx("button",{className:`btn btn-${e||"primary"} w-${n||"100"} p-2`,onClick:r,children:t})}const Gk=({pdf:t})=>{const e=Ut(),[n,r]=U.useState(!1);function i(){window.location.href=`https://drive.google.com/uc?export=download&id=${t.book_gdrive_id}`}function s(){e(`/book/${t.book_gdrive_id}`,{state:{book_name:t.book_name}})}return n?v.jsxs("div",{className:"d-flex gap-2",children:[v.jsx(Bi,{text:"",color:"success",onClick:s}),v.jsx(Bi,{text:"",onClick:i}),v.jsx(Bi,{text:"",color:"danger",onClick:()=>r(!1)})]}):v.jsx(Bi,{text:t.book_name,onClick:()=>r(!0)})},ua=()=>{const t=Ut();function e(){t("/")}return v.jsx("button",{className:"btn btn-danger",onClick:e,children:" "})},h4=()=>{const{grade:t,term:e}=Qr(),[n,r]=U.useState([]),[i,s]=U.useState(!0);return U.useEffect(()=>{fetch(`${gc}/darelom-students-data/books/2023_24/books_${t}.json`).then(o=>o.json()).then(o=>{r(o[e]),s(!1)})},[]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[v.jsx("h2",{children:" :"}),v.jsxs("div",{className:"d-flex gap-2",children:[v.jsx(G_,{grade:t,backFrom:"books"}),v.jsx(ua,{})]})]}),v.jsxs(Si,{children:[on(t)," - ",on(e)]}),i?v.jsx(Er,{}):v.jsx("div",{className:"row g-2 my-2",children:n.map((o,a)=>v.jsx("div",{className:"col-sm-6",children:v.jsx(Gk,{pdf:o})},a))})]})};function d4(){const t="btn btn-danger p-2 px-5 w-100",e=Ut();function n(){e(-1)}return v.jsx("button",{className:t,onClick:n,children:""})}const f4=({bookId:t,isIframeLoading:e,setIsIframeLoading:n})=>{const r=`https://drive.google.com/file/d/${t}/preview`,i=`${e&&"d-none"} w-100`,s={height:"500px"};function o(){n(!1)}return v.jsx("iframe",{src:r,onLoad:o,className:i,style:s})},p4=({bookId:t})=>{const e="btn btn-primary p-2 px-5 w-100";function n(){window.location.href=`https://drive.google.com/uc?export=download&id=${t}`}return v.jsx("button",{className:e,onClick:n,children:""})},kE=({children:t})=>v.jsx("div",{className:"col-md-auto col-6",children:t}),CE=()=>{var s;const{bookId:t}=Qr(),n=(s=Ti().state)==null?void 0:s.book_name,[r,i]=U.useState(!0);return v.jsxs(v.Fragment,{children:[v.jsxs(Si,{children:['"',n,'".']}),v.jsxs("div",{className:"my-2 d-flex justify-content-end row gx-2",children:[v.jsx(kE,{children:v.jsx(p4,{bookId:t})}),v.jsx(kE,{children:v.jsx(d4,{})})]}),r&&v.jsx(Er,{}),v.jsx(f4,{bookId:t,isIframeLoading:r,setIsIframeLoading:i})]})},m4=({currentQuestionIndex:t,questionsLength:e})=>{const n=t+1;return v.jsx("div",{className:"d-flex justify-content-between ",children:v.jsxs("p",{className:"mb-0",children:["",v.jsxs("span",{className:"fw-bold",children:[" ",n," "]}),"",v.jsxs("span",{className:"fw-bold",children:[" ",e]}),"."]})})},g4=({questionText:t})=>v.jsx("h3",{className:"bg-black text-light p-2 py-3 text-center my-4 rounded-2 lh-base",children:t});function v4({currentQuestionIndex:t,setCurrentQuestionIndex:e,setIsAnswered:n,answerButtons:r}){function i(){n(!1),e(t+1),r.forEach(s=>{s.disabled=!1,s.classList.remove("btn-danger","btn-success")})}return v.jsx(Bi,{text:"",onClick:i})}function _4({questionsLength:t,score:e}){const n=Ut();function r(){n("/test_yourself/test_result",{state:{result:e,fullMark:t}})}return v.jsx(Bi,{text:" ",onClick:r})}const y4=({children:t})=>v.jsx("div",{className:"modal-header",children:v.jsx("h5",{className:"modal-title text-center w-100",children:t})}),w4=({children:t})=>v.jsx("div",{className:"modal-body pb-1",children:v.jsx("p",{className:"text-center fw-bold",children:t})}),E4=({children:t})=>v.jsx("div",{className:"modal-footer border-0 pt-0",children:t}),T4=({setIsModalOpen:t,answerReason:e})=>v.jsx("div",{className:"modal d-block bg-black bg-opacity-75",tabIndex:"-1",children:v.jsx("div",{className:"modal-dialog modal-dialog-centered",children:v.jsxs("div",{className:"modal-content",children:[v.jsx(y4,{children:'"   "'}),v.jsx(w4,{children:e||"      ."}),v.jsx(E4,{children:v.jsx(Bi,{text:"",color:"danger",onClick:()=>t(!1)})})]})})}),S4=({setIsModalOpen:t})=>v.jsx(Bi,{text:" ",onClick:()=>t(!0)});function b4(t,e,n,r,i,s,o,a){function l(){r.current.forEach(p=>{p.disabled=!0}),h.disabled=!1}n(!0);const c=r.current[s[i].question_answer],h=t.target;e==s[i].question_answer?(h.classList.add("btn-success"),o(a+1),l()):(l(),h.classList.add("btn-danger"),c.classList.add("btn-success"))}const cm=()=>{var D,B,x,I,w,b;const{grade:t,term:e,subject:n}=Qr(),[r,i]=U.useState(!1),[s,o]=U.useState(((D=location.state)==null?void 0:D.currentQuestionIndex)||0),[a,l]=U.useState(0),[c,h]=U.useState([]),[p,g]=U.useState(!1),y=U.useRef([]),[C,R]=U.useState(!0),A=Ti().pathname;function T(k){$j(Ff(Yn,k)).then(N=>{const V=[];N.docs.forEach(P=>{V.push(P.data())}),h(V),R(!1)})}U.useEffect(()=>{A=="/test_yourself/sended_questions"?T("test_yourself/sended_questions"):A==`/${t}/${e}/${n}/test_yourself_students`?T(`${t}/test_yourself_students/questions/${e}/${n}`):fetch(`${gc}/darelom-students-data/questions/test_questions.json`).then(k=>k.json()).then(k=>{h(k),R(!1)})},[]);const S=s>=c.length-1;return v.jsxs(v.Fragment,{children:[v.jsx(Si,{fontSize:"2",children:" "}),C?v.jsx(Er,{}):c.length?v.jsxs("div",{className:"mt-2",children:[v.jsx(m4,{currentQuestionIndex:s,questionsLength:c.length,creatorName:(x=(B=c[s])==null?void 0:B.question_creator)==null?void 0:x.name}),v.jsx(g4,{questionText:(I=c[s])==null?void 0:I.question_text}),v.jsx("div",{className:"row g-2",children:(w=c[s])==null?void 0:w.question_options.map((k,N)=>v.jsx("div",{className:"col-sm-6",children:v.jsx("button",{className:"btn btn-primary w-100 p-2",ref:V=>y.current[N]=V,onClick:V=>b4(V,N,i,y,s,c,l,a),children:k})},N))}),v.jsx("hr",{}),v.jsxs("div",{className:"mt-3 d-flex gap-2",children:[r&&S?v.jsx(_4,{questionsLength:c.length,score:a}):r&&!S&&v.jsx(v4,{currentQuestionIndex:s,setCurrentQuestionIndex:o,setIsAnswered:i,answerButtons:y.current}),r&&v.jsx(S4,{setIsModalOpen:g})]}),p&&v.jsx(T4,{setIsModalOpen:g,answerReason:(b=c[s])==null?void 0:b.answer_reason})]}):v.jsx("p",{className:"text-center fs-2 fw-bold my-2",children:"   ."})]})},I4=()=>{const t=Ti(),{result:e,fullMark:n}=t.state;return v.jsxs(v.Fragment,{children:[v.jsx("h2",{children:" :"}),v.jsxs("p",{className:"text-center fs-1",children:[v.jsxs("span",{className:"fw-bold",children:[e," "]}),"",v.jsxs("span",{className:"fw-bold",children:[" ",n]}),"."]})]})},A4=()=>{const t=Ut(),{grade:e,term:n}=Qr(),[r,i]=U.useState([]),[s,o]=U.useState(!0);return U.useEffect(()=>{async function a(){var h;const c=(h=(await Js(yi(Yn,`${e}/test_yourself_students/questions`,n))).data())==null?void 0:h.subjects;i(c),o(!1)}a()},[]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[v.jsx("h2",{children:" :"}),v.jsxs("div",{className:"d-flex gap-2",children:[v.jsx(G_,{grade:e,backFrom:"test_yourself_students"}),v.jsx(ua,{})]})]}),s?v.jsx(Er,{}):v.jsx("div",{className:"row g-2 my-2",children:r==null?void 0:r.map((a,l)=>v.jsx("div",{className:"col-sm-6",children:v.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/${a}/test_yourself_students`),children:on(a)})},l))})]})},k4=()=>v.jsxs("div",{className:"row g-2",children:[v.jsx("div",{className:"col-sm-6",children:v.jsx(Ys,{to:"term_1",className:"btn btn-primary w-100",children:"  "})}),v.jsx("div",{className:"col-sm-6",children:v.jsx(Ys,{to:"term_2",className:"btn btn-primary w-100",children:"  "})})]}),C4=()=>{const t=Ut(),[e,n]=U.useState(!0),{grade:r,term:i}=Qr(),[s,o]=U.useState([]);return U.useEffect(()=>{Js(yi(Yn,`${r}/test_yourself_students/questions/${i}`)).then(a=>{o(a.data().subjects),n(!1)})},[]),v.jsx(v.Fragment,{children:e?v.jsx(Er,{}):v.jsx("div",{className:"row g-2",children:s.map((a,l)=>v.jsx("div",{className:"col-sm-6",children:v.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t(`/${r}/${i}/${a}/send_question`),children:on(a)})},l))})})},Qk=({formRef:t,children:e})=>v.jsx("form",{className:"mx-auto mt-3 needs-validation",noValidate:!0,style:{maxWidth:"480px"},ref:t,children:e}),qn=({field:t,marginBottom:e=3})=>v.jsx("div",{className:`mb-${e}`,children:t}),Jk=()=>v.jsxs(v.Fragment,{children:[v.jsx("label",{htmlFor:"email-input",className:"form-label fw-bold",children:" :"}),v.jsx("input",{type:"email",className:"form-control",pattern:"^[^@]+@[^@]+\\.[^@]{2,}$",id:"email-input",placeholder:"folan.alfolany@gmail.com","aria-describedby":"emailHelp",required:!0}),v.jsx("div",{className:"invalid-feedback",children:"    ."})]}),Yk=()=>v.jsxs(v.Fragment,{children:[v.jsx("label",{htmlFor:"password-input",className:"form-label fw-bold",children:" :"}),v.jsx("input",{type:"password",placeholder:"_____",minLength:"6",className:"form-control",id:"password-input",autoComplete:"off",required:!0}),v.jsx("div",{className:"invalid-feedback",children:"      6   ."})]}),R4=()=>v.jsxs(v.Fragment,{children:[v.jsx("label",{htmlFor:"name-input",className:"form-label fw-bold",children:":"}),v.jsx("input",{type:"text",className:"form-control",minLength:3,id:"name-input",placeholder:" ",required:!0}),v.jsx("div",{className:"invalid-feedback",children:"     3   ."})]}),P4=()=>v.jsxs(v.Fragment,{children:[v.jsx("label",{className:"fw-bold",children:" :"}),v.jsxs("select",{className:"form-select mt-2",id:"grade-input",required:!0,children:[v.jsx("option",{value:"grade_1",children:" "}),v.jsx("option",{value:"grade_2",children:" "}),v.jsx("option",{value:"grade_3",children:" "}),v.jsx("option",{value:"grade_4",children:" "})]}),v.jsx("div",{className:"invalid-feedback",children:"  ."})]}),Uc=({text:t})=>v.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-bold",children:t}),np=({label:t,placeholder:e,invalidFeedback:n,minLength:r=10,rows:i=4,fontSize:s=5,id:o="textarea-field"})=>v.jsxs(v.Fragment,{children:[v.jsx("label",{className:`fw-bold fs-${s} mb-1`,htmlFor:o,children:t}),v.jsx("textarea",{className:"form-control",id:o,rows:i,placeholder:e,minLength:r,required:!0}),v.jsx("div",{className:"invalid-feedback",children:n})]}),x4=()=>{const t=Ut(),[e,n]=U.useState(!1),[r,i]=U.useState(!1),s=U.useRef(null);return U.useEffect(()=>{const o=s.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{i(!0);const l=a.target["name-input"].value,c=a.target["email-input"].value,h=a.target["grade-input"].value,p=a.target["password-input"].value,g=a.target["textarea-field"].value,C=(await EO(Lc,c,p)).user.uid;await Uj(yi(Yn,"users",C),{name:l,email:c,grade:h,uid:C,message:g,write_permission:!1}),t("/")}catch(l){console.log(l.code),n(!0)}finally{i(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),v.jsxs("div",{children:[v.jsx(Si,{children:"  "}),v.jsxs(Qk,{formRef:s,children:[v.jsx(qn,{field:v.jsx(R4,{})}),v.jsx(qn,{field:v.jsx(Jk,{})}),v.jsx(qn,{field:v.jsx(P4,{})}),v.jsx(qn,{field:v.jsx(np,{placeholder:"    .",label:"    :",fontSize:6,minLength:100,invalidFeedback:"     100   ."})}),v.jsx(qn,{field:v.jsx(Yk,{})}),r?v.jsx(Mc,{}):v.jsx(Uc,{text:"  "}),e&&v.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})]})},Bh=()=>{const t=Ut(),[e,n]=U.useState(!1),[r,i]=U.useState(!1),s=U.useRef(null);return U.useEffect(()=>{const o=s.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{i(!0);const l=a.target["email-input"].value,c=a.target["password-input"].value;await TO(Lc,l,c),t("/")}catch(l){console.log(l.code),n(!0)}finally{i(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),v.jsxs("div",{children:[v.jsx(Si,{children:" "}),v.jsxs(Qk,{formRef:s,children:[v.jsx(qn,{field:v.jsx(Jk,{})}),v.jsx(qn,{field:v.jsx(Yk,{})}),r?v.jsx(Mc,{}):v.jsx(Uc,{text:" "}),e&&v.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]}),v.jsxs("p",{className:"text-center mt-2 fw-bold",children:["    ",v.jsx(Ys,{to:"/signup",children:" "}),"."]})]})},Q_=({formRef:t,children:e})=>v.jsx("form",{className:"mt-3 needs-validation",noValidate:!0,ref:t,children:e}),O4=({optionsRef:t})=>{const e=["","","",""];return v.jsxs(v.Fragment,{children:[v.jsx("label",{className:"fw-bold fs-5 mb-1",children:":"}),v.jsx("div",{className:"row g-2",children:e.map((n,r)=>v.jsx("div",{className:"col-sm-6",children:v.jsx("input",{type:"text",className:"form-control",placeholder:` ${n}.`,ref:i=>t.current[r]=i,required:!0})},r))})]})},N4=()=>v.jsxs(v.Fragment,{children:[v.jsx("label",{className:"fw-bold fs-5 mb-1",children:"  :"}),v.jsxs("select",{className:"form-control",id:"options-input",children:[v.jsx("option",{value:"0",children:"1"}),v.jsx("option",{value:"1",children:"2"}),v.jsx("option",{value:"2",children:"3"}),v.jsx("option",{value:"3",children:"4"})]})]}),D4=()=>v.jsxs(v.Fragment,{children:[v.jsx("label",{className:"fw-bold fs-5 mb-1",children:":"}),v.jsx("input",{type:"text",className:"form-control",placeholder:" .",id:"answer-reason-input"})]}),L4=()=>v.jsx(np,{placeholder:"   .",label:" :",invalidFeedback:"      10   ."}),j4=()=>{const[t,e]=U.useState(!1),[n,r]=U.useState("initial"),{grade:i,term:s,subject:o}=Qr(),a=U.useRef([]),l=U.useRef(null);return U.useEffect(()=>{const c=l.current;c.addEventListener("submit",async h=>{h.preventDefault(),h.stopPropagation();const p=c["textarea-field"].value,g=[],y=Number(c["options-input"].value),C=c["answer-reason-input"].value;if(a.current.forEach(R=>{g.push(R.value)}),c.checkValidity())try{e(!0);const{name:R,uid:O}=JSON.parse(localStorage.getItem("loggedinUserInfo"));await T_(Ff(Yn,`${i}/test_yourself_students/questions/${s}/${o}`),{question_text:p,question_answer:y,question_options:g,answer_reason:C,question_creator:{name:R,uid:O}}),l.current.reset(),c.classList.remove("was-validated"),r("success")}catch(R){console.log(R.code),c.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else c.classList.add("was-validated")})},[]),v.jsxs(v.Fragment,{children:[v.jsx(Si,{children:"  []"}),v.jsxs("p",{className:"text-center mt-2 fw-bold",children:[`${on(i)} - ${on(s)} - ${on(o)}`,"."]}),v.jsxs(Q_,{formRef:l,children:[v.jsx(qn,{field:v.jsx(L4,{})}),v.jsx(qn,{field:v.jsx(O4,{optionsRef:a})}),v.jsx(qn,{field:v.jsx(N4,{})}),v.jsx(qn,{field:v.jsx(D4,{})}),t?v.jsx(Mc,{}):v.jsx(Uc,{text:" "})]}),n==="initial"?null:n==="success"?v.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):v.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},M4=()=>v.jsx(np,{placeholder:"  .",label:":",invalidFeedback:"      10   .",rows:7}),V4=()=>{const[t,e]=U.useState(!1),[n,r]=U.useState("initial"),i=U.useRef(null);return U.useEffect(()=>{const s=i.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();const a=s["textarea-field"].value;if(s.checkValidity())try{e(!0),await T_(Ff(Yn,"suggestions"),{suggestion:a}),i.current.reset(),s.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),s.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else s.classList.add("was-validated")})},[]),v.jsxs(v.Fragment,{children:[v.jsx(Si,{children:" "}),v.jsxs(Q_,{formRef:i,children:[v.jsx(qn,{field:v.jsx(M4,{})}),t?v.jsx(Mc,{}):v.jsx(Uc,{text:" "})]}),n==="initial"?null:n==="success"?v.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):v.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},F4=()=>v.jsx(np,{placeholder:"          .",label:":",invalidFeedback:"      10   .",rows:7}),$4=()=>{const[t,e]=U.useState(!1),[n,r]=U.useState("initial"),i=U.useRef(null);return U.useEffect(()=>{const s=i.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation(),console.log("s");const a=s["textarea-field"].value;if(s.checkValidity())try{e(!0),await T_(Ff(Yn,"problems"),{problem:a}),i.current.reset(),s.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),s.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else s.classList.add("was-validated")})},[]),v.jsxs(v.Fragment,{children:[v.jsx(Si,{children:"  "}),v.jsxs(Q_,{formRef:i,children:[v.jsx(qn,{field:v.jsx(F4,{})}),t?v.jsx(Mc,{}):v.jsx(Uc,{text:" "})]}),n==="initial"?null:n==="success"?v.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):v.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},U4=()=>async(t,e)=>{try{const r=await(await fetch(t)).blob(),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(n){console.log(n)}},B4=()=>{const{grade:t}=Qr(),[e,n]=U.useState(!1),[r,i]=U.useState(!0);let s="",o;t==="exams_schedule"?(s=`${gc}/darelom-students-data/schedule/exams_schedule.jpg`,o="     2025"):(s=`${gc}/darelom-students-data/schedule/${t}.jpg`,o=`  ${on(t)}`);const a=U4();function l(){n(!1),i(!1)}function c(){n(!0),i(!1)}return v.jsxs("div",{className:"container",children:[r?v.jsx(Er,{}):v.jsx(v.Fragment,{children:!e&&v.jsx(v.Fragment,{children:v.jsxs("p",{className:"text-center fw-bold fs-5",children:["  ",on(t),"   ."]})})}),v.jsxs("div",{className:`d-${e?"block":"none"}`,children:[v.jsx("img",{src:s,className:"w-100",alt:"Schecule",onError:l,onLoad:c}),v.jsx("button",{className:"btn btn-primary w-100 mt-3",onClick:()=>a(s,o),children:" "})]})]})},z4=({grade:t,backFrom:e})=>{const n=Ut();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return v.jsx("button",{className:"btn btn-danger",onClick:r,children:""})},q4=()=>{const{grade:t,term:e}=Qr(),[n,r]=U.useState({}),[i,s]=U.useState([]),[o,a]=U.useState(!0);return U.useEffect(()=>{Js(yi(Yn,`${t}/lectures_recordings`)).then(l=>{var h;const c=(h=l.data())==null?void 0:h[e];if(c&&Object.keys(c).length){const p=Object.keys(c);if(p.includes("mojalad_tasgilat")){const g=["mojalad_tasgilat",...p.filter(y=>y!=="mojalad_tasgilat")];s(g)}else s(p);r(c)}a(!1)})},[]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[v.jsx("h2",{children:" :"}),v.jsxs("div",{className:"d-flex gap-2",children:[v.jsx(z4,{grade:t,backFrom:"lectures_recordings"}),v.jsx(ua,{})]})]}),v.jsxs(Si,{children:[on(t)," - ",on(e)]}),o?v.jsx(Er,{}):v.jsx(v.Fragment,{children:Object.keys(n).length?v.jsx("div",{className:"row g-2 my-2",children:i.map((l,c)=>v.jsx("div",{className:"col-sm-6",children:v.jsx(Bi,{text:on(l),onClick:()=>window.location.href=n[l]})},c))}):v.jsx("p",{className:"text-center fw-bold mt-4 fs-4",children:"   ."})})]})},H4=()=>{const t=Ut(),{grade:e,term:n}=Qr(),[r,i]=U.useState([]),[s,o]=U.useState(!0);return U.useEffect(()=>{async function a(){var h;const c=((h=(await Js(yi(Yn,`${e}/more_resources/`))).data())==null?void 0:h[n])||[];i(c),o(!1)}a()},[]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[v.jsx("h2",{children:" :"}),v.jsxs("div",{className:"d-flex gap-2",children:[v.jsx(G_,{grade:e,backFrom:"more_resources"}),v.jsx(ua,{})]})]}),s?v.jsx(Er,{}):v.jsx("div",{className:"row g-2 my-2",children:r!=null&&r.length?r==null?void 0:r.map((a,l)=>v.jsx("div",{className:"col-sm-6",children:v.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/more_resources/${a}`),children:on(a)})},l)):v.jsx("p",{className:"fw-bold text-center fs-3",children:"   ."})})]})},RE=()=>{const t=Ut(),{grade:e,term:n,subject:r}=Qr(),[i,s]=U.useState([]),[o,a]=U.useState(!0);return U.useEffect(()=>{async function l(){var p;let c;e?c=await Js(yi(Yn,`${e}/more_resources/${n}/${r}`)):c=await Js(yi(Yn,`general_subjects/${r}`));const h=((p=c.data())==null?void 0:p.resources)||[];s(h),a(!1)}l()},[]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[v.jsx("h2",{children:" :"}),v.jsxs("div",{className:"d-flex gap-2",children:[v.jsx("button",{className:"btn btn-danger",onClick:()=>t(-1),children:""}),v.jsx(ua,{})]})]}),o?v.jsx(Er,{}):v.jsx("div",{className:"row g-2 my-2",children:i!=null&&i.length?i==null?void 0:i.map((l,c)=>v.jsx("div",{className:"col-sm-6",children:v.jsx(Ys,{className:"btn btn-primary w-100",to:l!=null&&l.isBook?`/book/${l.link}`:l.link,state:{book_name:l.title},children:l.title})},c)):v.jsx("p",{className:"fw-bold text-center fs-3",children:"   ."})})]})},W4=({grade:t,backFrom:e})=>{const n=Ut();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return v.jsx("button",{className:"btn btn-danger",onClick:r,children:""})},K4=()=>{const[t,e]=U.useState(!1),{grade:n,term:r}=Qr(),[i,s]=U.useState([]),[o,a]=U.useState(!0);return U.useEffect(()=>{fetch(`${gc}/darelom-students-data/final_exams/final_exams_${n}.json`).then(l=>l.json()).then(l=>{l[r].length?(s(l[r]),a(!1)):t(!0)}).catch(l=>{e(!0)})},[]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[v.jsx("h2",{children:" :"}),v.jsxs("div",{className:"d-flex gap-2",children:[v.jsx(W4,{grade:n,backFrom:"final_exams"}),v.jsx(ua,{})]})]}),v.jsxs(Si,{children:[on(n)," - ",on(r)]}),t?v.jsx("p",{className:"fw-bold text-center fs-4 mt-4",children:"   ."}):o?v.jsx(Er,{}):v.jsx("div",{className:"row g-2 my-2",children:i.map((l,c)=>v.jsx("div",{className:"col-sm-6",children:v.jsx(Gk,{pdf:l})},c))})]})},G4=()=>{const t=Ut(),[e,n]=U.useState([]),[r,i]=U.useState(!0);return U.useEffect(()=>{async function s(){var l;const a=(l=(await Js(yi(Yn,"general_subjects","subjects"))).data())==null?void 0:l.ids;n(a),i(!1)}s()},[]),v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[v.jsx("h2",{children:" :"}),v.jsx("div",{className:"d-flex gap-2",children:v.jsx(ua,{})})]}),r?v.jsx(Er,{}):v.jsx("div",{className:"row g-2 my-2",children:e==null?void 0:e.map((s,o)=>v.jsx("div",{className:"col-sm-6",children:v.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/general_subjects/${s}`),children:on(s)})},o))})]})};function Q4(){const[t,e]=U.useState(null),[n,r]=U.useState(JSON.parse(localStorage.getItem("loggedInUserInfo")));U.useEffect(()=>{Pb(Lc,async s=>{if(s){const a=(await Js(yi(Yn,`users/${s.uid}`))).data();localStorage.setItem("loggedinUserInfo",JSON.stringify(a)),r(a)}else localStorage.setItem("loggedinUserInfo",JSON.stringify(null)),r(null);e(s),localStorage.setItem("loggedinUser",JSON.stringify(s))})},[]);const i=RV(Rg(v.jsx(v.Fragment,{children:v.jsxs(at,{path:"/",element:v.jsx($F,{}),errorElement:v.jsx(c4,{}),children:[v.jsx(at,{path:"/",element:v.jsx(HF,{})}),v.jsx(at,{path:":grade/books/:term",element:v.jsx(h4,{})}),v.jsx(at,{path:"/book/:bookId",element:v.jsx(CE,{})}),v.jsx(at,{path:":grade/final_exams/:term",element:v.jsx(K4,{})}),v.jsx(at,{path:"/final_exam/:examId",element:v.jsx(CE,{})}),v.jsx(at,{path:":grade/more_resources/:term",element:v.jsx(H4,{})}),v.jsx(at,{path:":grade/:term/more_resources/:subject",element:v.jsx(RE,{})}),v.jsx(at,{path:"/general_subjects",element:v.jsx(G4,{})}),v.jsx(at,{path:"/general_subjects/:subject",element:v.jsx(RE,{})}),v.jsx(at,{path:"/test_yourself",element:v.jsx(cm,{})})," ",v.jsx(at,{path:"/test_yourself/test_result",element:v.jsx(I4,{})}),v.jsx(at,{path:":grade/test_yourself_students/:term",element:v.jsx(A4,{})}),v.jsx(at,{path:"/test_yourself/sended_questions",element:v.jsx(cm,{})}),v.jsx(at,{path:"/:grade/:term/:subject/test_yourself_students",element:v.jsx(cm,{})}),v.jsx(at,{path:"/:grade/send_question_selector",element:n!=null&&n.write_permission?v.jsx(k4,{}):v.jsx(Bh,{})}),v.jsx(at,{path:"/:grade/send_question_selector/:term",element:n!=null&&n.write_permission?v.jsx(C4,{}):v.jsx(Bh,{})}),v.jsx(at,{path:"/:grade/:term/:subject/send_question",element:n!=null&&n.write_permission?v.jsx(j4,{}):v.jsx(Bh,{})}),v.jsx(at,{path:"/signup",element:t?v.jsx(Y0,{to:"/"}):v.jsx(x4,{})}),v.jsx(at,{path:"/signin",element:t?v.jsx(Y0,{to:"/"}):v.jsx(Bh,{})}),v.jsx(at,{path:"/send_suggestion",element:v.jsx(V4,{})}),v.jsx(at,{path:"/send_problem",element:v.jsx($4,{})}),v.jsx(at,{path:"/:grade/schedule",element:v.jsx(B4,{})}),v.jsx(at,{path:"/:grade/lectures_recordings/:term",element:v.jsx(q4,{})})]})})));return v.jsx(VV,{router:i})}hm.createRoot(document.getElementById("root")).render(v.jsx(Q4,{}));document.documentElement.setAttribute("data-bs-theme",localStorage.getItem("theme")||"light");
