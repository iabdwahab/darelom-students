function tb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nb(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function rb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var sb={exports:{}},df={},ib={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sc=Symbol.for("react.element"),Bk=Symbol.for("react.portal"),zk=Symbol.for("react.fragment"),qk=Symbol.for("react.strict_mode"),Hk=Symbol.for("react.profiler"),Wk=Symbol.for("react.provider"),Kk=Symbol.for("react.context"),Gk=Symbol.for("react.forward_ref"),Qk=Symbol.for("react.suspense"),Jk=Symbol.for("react.memo"),Yk=Symbol.for("react.lazy"),Sy=Symbol.iterator;function Xk(t){return t===null||typeof t!="object"?null:(t=Sy&&t[Sy]||t["@@iterator"],typeof t=="function"?t:null)}var ob={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ab=Object.assign,lb={};function Il(t,e,n){this.props=t,this.context=e,this.refs=lb,this.updater=n||ob}Il.prototype.isReactComponent={};Il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ub(){}ub.prototype=Il.prototype;function Ym(t,e,n){this.props=t,this.context=e,this.refs=lb,this.updater=n||ob}var Xm=Ym.prototype=new ub;Xm.constructor=Ym;ab(Xm,Il.prototype);Xm.isPureReactComponent=!0;var xy=Array.isArray,cb=Object.prototype.hasOwnProperty,Zm={current:null},db={key:!0,ref:!0,__self:!0,__source:!0};function hb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)cb.call(e,r)&&!db.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Sc,type:t,key:i,ref:o,props:s,_owner:Zm.current}}function Zk(t,e){return{$$typeof:Sc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function e_(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sc}function eC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ay=/\/+/g;function Tp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?eC(""+t.key):e.toString(36)}function Gd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sc:case Bk:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tp(o,0):r,xy(s)?(n="",t!=null&&(n=t.replace(Ay,"$&/")+"/"),Gd(s,e,n,"",function(c){return c})):s!=null&&(e_(s)&&(s=Zk(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ay,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",xy(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Tp(i,a);o+=Gd(i,e,n,l,s)}else if(l=Xk(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Tp(i,a++),o+=Gd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yd(t,e,n){if(t==null)return t;var r=[],s=0;return Gd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function tC(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kn={current:null},Qd={transition:null},nC={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:Qd,ReactCurrentOwner:Zm};function fb(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:yd,forEach:function(t,e,n){yd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yd(t,function(){e++}),e},toArray:function(t){return yd(t,function(e){return e})||[]},only:function(t){if(!e_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Il;Re.Fragment=zk;Re.Profiler=Hk;Re.PureComponent=Ym;Re.StrictMode=qk;Re.Suspense=Qk;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nC;Re.act=fb;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ab({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Zm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)cb.call(e,l)&&!db.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Sc,type:t.type,key:s,ref:i,props:r,_owner:o}};Re.createContext=function(t){return t={$$typeof:Kk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Wk,_context:t},t.Consumer=t};Re.createElement=hb;Re.createFactory=function(t){var e=hb.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:Gk,render:t}};Re.isValidElement=e_;Re.lazy=function(t){return{$$typeof:Yk,_payload:{_status:-1,_result:t},_init:tC}};Re.memo=function(t,e){return{$$typeof:Jk,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=Qd.transition;Qd.transition={};try{t()}finally{Qd.transition=e}};Re.unstable_act=fb;Re.useCallback=function(t,e){return kn.current.useCallback(t,e)};Re.useContext=function(t){return kn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return kn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return kn.current.useEffect(t,e)};Re.useId=function(){return kn.current.useId()};Re.useImperativeHandle=function(t,e,n){return kn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return kn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return kn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return kn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return kn.current.useReducer(t,e,n)};Re.useRef=function(t){return kn.current.useRef(t)};Re.useState=function(t){return kn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return kn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return kn.current.useTransition()};Re.version="18.3.1";ib.exports=Re;var F=ib.exports;const rC=nb(F),sC=tb({__proto__:null,default:rC},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iC=F,oC=Symbol.for("react.element"),aC=Symbol.for("react.fragment"),lC=Object.prototype.hasOwnProperty,uC=iC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cC={key:!0,ref:!0,__self:!0,__source:!0};function pb(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lC.call(e,r)&&!cC.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:oC,type:t,key:i,ref:o,props:s,_owner:uC.current}}df.Fragment=aC;df.jsx=pb;df.jsxs=pb;sb.exports=df;var h=sb.exports,yg={},gb={exports:{}},or={},mb={exports:{}},_b={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ae){var de=X.length;X.push(ae);e:for(;0<de;){var xe=de-1>>>1,be=X[xe];if(0<s(be,ae))X[xe]=ae,X[de]=be,de=xe;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],de=X.pop();if(de!==ae){X[0]=de;e:for(var xe=0,be=X.length,H=be>>>1;xe<H;){var ze=2*(xe+1)-1,Ke=X[ze],Ze=ze+1,nt=X[Ze];if(0>s(Ke,de))Ze<be&&0>s(nt,Ke)?(X[xe]=nt,X[Ze]=de,xe=Ze):(X[xe]=Ke,X[ze]=de,xe=ze);else if(Ze<be&&0>s(nt,de))X[xe]=nt,X[Ze]=de,xe=Ze;else break e}}return ae}function s(X,ae){var de=X.sortIndex-ae.sortIndex;return de!==0?de:X.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,p=null,m=3,y=!1,I=!1,x=!1,j=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(X){for(var ae=n(c);ae!==null;){if(ae.callback===null)r(c);else if(ae.startTime<=X)r(c),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(c)}}function O(X){if(x=!1,T(X),!I)if(n(l)!==null)I=!0,Xe(B);else{var ae=n(c);ae!==null&&we(O,ae.startTime-X)}}function B(X,ae){I=!1,x&&(x=!1,A(w),w=-1),y=!0;var de=m;try{for(T(ae),p=n(l);p!==null&&(!(p.expirationTime>ae)||X&&!N());){var xe=p.callback;if(typeof xe=="function"){p.callback=null,m=p.priorityLevel;var be=xe(p.expirationTime<=ae);ae=t.unstable_now(),typeof be=="function"?p.callback=be:p===n(l)&&r(l),T(ae)}else r(l);p=n(l)}if(p!==null)var H=!0;else{var ze=n(c);ze!==null&&we(O,ze.startTime-ae),H=!1}return H}finally{p=null,m=de,y=!1}}var R=!1,k=null,w=-1,S=5,C=-1;function N(){return!(t.unstable_now()-C<S)}function V(){if(k!==null){var X=t.unstable_now();C=X;var ae=!0;try{ae=k(!0,X)}finally{ae?P():(R=!1,k=null)}}else R=!1}var P;if(typeof E=="function")P=function(){E(V)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Ye=me.port2;me.port1.onmessage=V,P=function(){Ye.postMessage(null)}}else P=function(){j(V,0)};function Xe(X){k=X,R||(R=!0,P())}function we(X,ae){w=j(function(){X(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){I||y||(I=!0,Xe(B))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var de=m;m=ae;try{return X()}finally{m=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=m;m=X;try{return ae()}finally{m=de}},t.unstable_scheduleCallback=function(X,ae,de){var xe=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?xe+de:xe):de=xe,X){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=de+be,X={id:d++,callback:ae,priorityLevel:X,startTime:de,expirationTime:be,sortIndex:-1},de>xe?(X.sortIndex=de,e(c,X),n(l)===null&&X===n(c)&&(x?(A(w),w=-1):x=!0,we(O,de-xe))):(X.sortIndex=be,e(l,X),I||y||(I=!0,Xe(B))),X},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(X){var ae=m;return function(){var de=m;m=ae;try{return X.apply(this,arguments)}finally{m=de}}}})(_b);mb.exports=_b;var dC=mb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hC=F,nr=dC;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vb=new Set,Ku={};function ra(t,e){rl(t,e),rl(t+"Capture",e)}function rl(t,e){for(Ku[t]=e,t=0;t<e.length;t++)vb.add(e[t])}var Gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wg=Object.prototype.hasOwnProperty,fC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ky={},Cy={};function pC(t){return wg.call(Cy,t)?!0:wg.call(ky,t)?!1:fC.test(t)?Cy[t]=!0:(ky[t]=!0,!1)}function gC(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mC(t,e,n,r){if(e===null||typeof e>"u"||gC(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Cn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xt[t]=new Cn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xt[e]=new Cn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xt[t]=new Cn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xt[t]=new Cn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xt[t]=new Cn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xt[t]=new Cn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xt[t]=new Cn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xt[t]=new Cn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xt[t]=new Cn(t,5,!1,t.toLowerCase(),null,!1,!1)});var t_=/[\-:]([a-z])/g;function n_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(t_,n_);Xt[e]=new Cn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(t_,n_);Xt[e]=new Cn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(t_,n_);Xt[e]=new Cn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xt[t]=new Cn(t,1,!1,t.toLowerCase(),null,!1,!1)});Xt.xlinkHref=new Cn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xt[t]=new Cn(t,1,!1,t.toLowerCase(),null,!0,!0)});function r_(t,e,n,r){var s=Xt.hasOwnProperty(e)?Xt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mC(e,n,s,r)&&(n=null),r||s===null?pC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var oi=hC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wd=Symbol.for("react.element"),ja=Symbol.for("react.portal"),Na=Symbol.for("react.fragment"),s_=Symbol.for("react.strict_mode"),Eg=Symbol.for("react.profiler"),yb=Symbol.for("react.provider"),wb=Symbol.for("react.context"),i_=Symbol.for("react.forward_ref"),bg=Symbol.for("react.suspense"),Tg=Symbol.for("react.suspense_list"),o_=Symbol.for("react.memo"),Si=Symbol.for("react.lazy"),Eb=Symbol.for("react.offscreen"),Ry=Symbol.iterator;function tu(t){return t===null||typeof t!="object"?null:(t=Ry&&t[Ry]||t["@@iterator"],typeof t=="function"?t:null)}var yt=Object.assign,Ip;function gu(t){if(Ip===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ip=e&&e[1]||""}return`
`+Ip+t}var Sp=!1;function xp(t,e){if(!t||Sp)return"";Sp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?gu(t):""}function _C(t){switch(t.tag){case 5:return gu(t.type);case 16:return gu("Lazy");case 13:return gu("Suspense");case 19:return gu("SuspenseList");case 0:case 2:case 15:return t=xp(t.type,!1),t;case 11:return t=xp(t.type.render,!1),t;case 1:return t=xp(t.type,!0),t;default:return""}}function Ig(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Na:return"Fragment";case ja:return"Portal";case Eg:return"Profiler";case s_:return"StrictMode";case bg:return"Suspense";case Tg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wb:return(t.displayName||"Context")+".Consumer";case yb:return(t._context.displayName||"Context")+".Provider";case i_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case o_:return e=t.displayName||null,e!==null?e:Ig(t.type)||"Memo";case Si:e=t._payload,t=t._init;try{return Ig(t(e))}catch{}}return null}function vC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ig(e);case 8:return e===s_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ji(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yC(t){var e=bb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ed(t){t._valueTracker||(t._valueTracker=yC(t))}function Tb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _h(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sg(t,e){var n=e.checked;return yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Py(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ji(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ib(t,e){e=e.checked,e!=null&&r_(t,"checked",e,!1)}function xg(t,e){Ib(t,e);var n=Ji(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ag(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ag(t,e.type,Ji(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ag(t,e,n){(e!=="number"||_h(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mu=Array.isArray;function Wa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ji(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function kg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return yt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ny(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(mu(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ji(n)}}function Sb(t,e){var n=Ji(e.value),r=Ji(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Oy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bd,Ab=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bd=bd||document.createElement("div"),bd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Au={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wC=["Webkit","ms","Moz","O"];Object.keys(Au).forEach(function(t){wC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Au[e]=Au[t]})});function kb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Au.hasOwnProperty(t)&&Au[t]?(""+e).trim():e+"px"}function Cb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=kb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var EC=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rg(t,e){if(e){if(EC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Pg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jg=null;function a_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ng=null,Ka=null,Ga=null;function Dy(t){if(t=kc(t)){if(typeof Ng!="function")throw Error(J(280));var e=t.stateNode;e&&(e=mf(e),Ng(t.stateNode,t.type,e))}}function Rb(t){Ka?Ga?Ga.push(t):Ga=[t]:Ka=t}function Pb(){if(Ka){var t=Ka,e=Ga;if(Ga=Ka=null,Dy(t),e)for(t=0;t<e.length;t++)Dy(e[t])}}function jb(t,e){return t(e)}function Nb(){}var Ap=!1;function Ob(t,e,n){if(Ap)return t(e,n);Ap=!0;try{return jb(t,e,n)}finally{Ap=!1,(Ka!==null||Ga!==null)&&(Nb(),Pb())}}function Qu(t,e){var n=t.stateNode;if(n===null)return null;var r=mf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Og=!1;if(Gs)try{var nu={};Object.defineProperty(nu,"passive",{get:function(){Og=!0}}),window.addEventListener("test",nu,nu),window.removeEventListener("test",nu,nu)}catch{Og=!1}function bC(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ku=!1,vh=null,yh=!1,Dg=null,TC={onError:function(t){ku=!0,vh=t}};function IC(t,e,n,r,s,i,o,a,l){ku=!1,vh=null,bC.apply(TC,arguments)}function SC(t,e,n,r,s,i,o,a,l){if(IC.apply(this,arguments),ku){if(ku){var c=vh;ku=!1,vh=null}else throw Error(J(198));yh||(yh=!0,Dg=c)}}function sa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Db(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ly(t){if(sa(t)!==t)throw Error(J(188))}function xC(t){var e=t.alternate;if(!e){if(e=sa(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ly(s),t;if(i===r)return Ly(s),e;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function Lb(t){return t=xC(t),t!==null?Mb(t):null}function Mb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Mb(t);if(e!==null)return e;t=t.sibling}return null}var Vb=nr.unstable_scheduleCallback,My=nr.unstable_cancelCallback,AC=nr.unstable_shouldYield,kC=nr.unstable_requestPaint,At=nr.unstable_now,CC=nr.unstable_getCurrentPriorityLevel,l_=nr.unstable_ImmediatePriority,Fb=nr.unstable_UserBlockingPriority,wh=nr.unstable_NormalPriority,RC=nr.unstable_LowPriority,$b=nr.unstable_IdlePriority,hf=null,ps=null;function PC(t){if(ps&&typeof ps.onCommitFiberRoot=="function")try{ps.onCommitFiberRoot(hf,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:OC,jC=Math.log,NC=Math.LN2;function OC(t){return t>>>=0,t===0?32:31-(jC(t)/NC|0)|0}var Td=64,Id=4194304;function _u(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=_u(a):(i&=o,i!==0&&(r=_u(i)))}else o=n&~s,o!==0?r=_u(o):i!==0&&(r=_u(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gr(e),s=1<<n,r|=t[n],e&=~s;return r}function DC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Gr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=DC(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Lg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ub(){var t=Td;return Td<<=1,!(Td&4194240)&&(Td=64),t}function kp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function xc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gr(e),t[e]=n}function MC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function u_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ge=0;function Bb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zb,c_,qb,Hb,Wb,Mg=!1,Sd=[],Fi=null,$i=null,Ui=null,Ju=new Map,Yu=new Map,ki=[],VC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vy(t,e){switch(t){case"focusin":case"focusout":Fi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Ui=null;break;case"pointerover":case"pointerout":Ju.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yu.delete(e.pointerId)}}function ru(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=kc(e),e!==null&&c_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FC(t,e,n,r,s){switch(e){case"focusin":return Fi=ru(Fi,t,e,n,r,s),!0;case"dragenter":return $i=ru($i,t,e,n,r,s),!0;case"mouseover":return Ui=ru(Ui,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ju.set(i,ru(Ju.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Yu.set(i,ru(Yu.get(i)||null,t,e,n,r,s)),!0}return!1}function Kb(t){var e=Ro(t.target);if(e!==null){var n=sa(e);if(n!==null){if(e=n.tag,e===13){if(e=Db(n),e!==null){t.blockedOn=e,Wb(t.priority,function(){qb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jg=r,n.target.dispatchEvent(r),jg=null}else return e=kc(n),e!==null&&c_(e),t.blockedOn=n,!1;e.shift()}return!0}function Fy(t,e,n){Jd(t)&&n.delete(e)}function $C(){Mg=!1,Fi!==null&&Jd(Fi)&&(Fi=null),$i!==null&&Jd($i)&&($i=null),Ui!==null&&Jd(Ui)&&(Ui=null),Ju.forEach(Fy),Yu.forEach(Fy)}function su(t,e){t.blockedOn===e&&(t.blockedOn=null,Mg||(Mg=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,$C)))}function Xu(t){function e(s){return su(s,t)}if(0<Sd.length){su(Sd[0],t);for(var n=1;n<Sd.length;n++){var r=Sd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Fi!==null&&su(Fi,t),$i!==null&&su($i,t),Ui!==null&&su(Ui,t),Ju.forEach(e),Yu.forEach(e),n=0;n<ki.length;n++)r=ki[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ki.length&&(n=ki[0],n.blockedOn===null);)Kb(n),n.blockedOn===null&&ki.shift()}var Qa=oi.ReactCurrentBatchConfig,bh=!0;function UC(t,e,n,r){var s=Ge,i=Qa.transition;Qa.transition=null;try{Ge=1,d_(t,e,n,r)}finally{Ge=s,Qa.transition=i}}function BC(t,e,n,r){var s=Ge,i=Qa.transition;Qa.transition=null;try{Ge=4,d_(t,e,n,r)}finally{Ge=s,Qa.transition=i}}function d_(t,e,n,r){if(bh){var s=Vg(t,e,n,r);if(s===null)Vp(t,e,r,Th,n),Vy(t,r);else if(FC(s,t,e,n,r))r.stopPropagation();else if(Vy(t,r),e&4&&-1<VC.indexOf(t)){for(;s!==null;){var i=kc(s);if(i!==null&&zb(i),i=Vg(t,e,n,r),i===null&&Vp(t,e,r,Th,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vp(t,e,r,null,n)}}var Th=null;function Vg(t,e,n,r){if(Th=null,t=a_(r),t=Ro(t),t!==null)if(e=sa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Db(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Th=t,null}function Gb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(CC()){case l_:return 1;case Fb:return 4;case wh:case RC:return 16;case $b:return 536870912;default:return 16}default:return 16}}var Li=null,h_=null,Yd=null;function Qb(){if(Yd)return Yd;var t,e=h_,n=e.length,r,s="value"in Li?Li.value:Li.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Yd=s.slice(t,1<r?1-r:void 0)}function Xd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xd(){return!0}function $y(){return!1}function ar(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xd:$y,this.isPropagationStopped=$y,this}return yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xd)},persist:function(){},isPersistent:xd}),e}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},f_=ar(Sl),Ac=yt({},Sl,{view:0,detail:0}),zC=ar(Ac),Cp,Rp,iu,ff=yt({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:p_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==iu&&(iu&&t.type==="mousemove"?(Cp=t.screenX-iu.screenX,Rp=t.screenY-iu.screenY):Rp=Cp=0,iu=t),Cp)},movementY:function(t){return"movementY"in t?t.movementY:Rp}}),Uy=ar(ff),qC=yt({},ff,{dataTransfer:0}),HC=ar(qC),WC=yt({},Ac,{relatedTarget:0}),Pp=ar(WC),KC=yt({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),GC=ar(KC),QC=yt({},Sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),JC=ar(QC),YC=yt({},Sl,{data:0}),By=ar(YC),XC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eR[t])?!!e[t]:!1}function p_(){return tR}var nR=yt({},Ac,{key:function(t){if(t.key){var e=XC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:p_,charCode:function(t){return t.type==="keypress"?Xd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rR=ar(nR),sR=yt({},ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zy=ar(sR),iR=yt({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:p_}),oR=ar(iR),aR=yt({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),lR=ar(aR),uR=yt({},ff,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cR=ar(uR),dR=[9,13,27,32],g_=Gs&&"CompositionEvent"in window,Cu=null;Gs&&"documentMode"in document&&(Cu=document.documentMode);var hR=Gs&&"TextEvent"in window&&!Cu,Jb=Gs&&(!g_||Cu&&8<Cu&&11>=Cu),qy=" ",Hy=!1;function Yb(t,e){switch(t){case"keyup":return dR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oa=!1;function fR(t,e){switch(t){case"compositionend":return Xb(e);case"keypress":return e.which!==32?null:(Hy=!0,qy);case"textInput":return t=e.data,t===qy&&Hy?null:t;default:return null}}function pR(t,e){if(Oa)return t==="compositionend"||!g_&&Yb(t,e)?(t=Qb(),Yd=h_=Li=null,Oa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jb&&e.locale!=="ko"?null:e.data;default:return null}}var gR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gR[t.type]:e==="textarea"}function Zb(t,e,n,r){Rb(r),e=Ih(e,"onChange"),0<e.length&&(n=new f_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ru=null,Zu=null;function mR(t){cT(t,0)}function pf(t){var e=Ma(t);if(Tb(e))return t}function _R(t,e){if(t==="change")return e}var eT=!1;if(Gs){var jp;if(Gs){var Np="oninput"in document;if(!Np){var Ky=document.createElement("div");Ky.setAttribute("oninput","return;"),Np=typeof Ky.oninput=="function"}jp=Np}else jp=!1;eT=jp&&(!document.documentMode||9<document.documentMode)}function Gy(){Ru&&(Ru.detachEvent("onpropertychange",tT),Zu=Ru=null)}function tT(t){if(t.propertyName==="value"&&pf(Zu)){var e=[];Zb(e,Zu,t,a_(t)),Ob(mR,e)}}function vR(t,e,n){t==="focusin"?(Gy(),Ru=e,Zu=n,Ru.attachEvent("onpropertychange",tT)):t==="focusout"&&Gy()}function yR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pf(Zu)}function wR(t,e){if(t==="click")return pf(e)}function ER(t,e){if(t==="input"||t==="change")return pf(e)}function bR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jr=typeof Object.is=="function"?Object.is:bR;function ec(t,e){if(Jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wg.call(e,s)||!Jr(t[s],e[s]))return!1}return!0}function Qy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jy(t,e){var n=Qy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qy(n)}}function nT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rT(){for(var t=window,e=_h();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_h(t.document)}return e}function m_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TR(t){var e=rT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nT(n.ownerDocument.documentElement,n)){if(r!==null&&m_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Jy(n,i);var o=Jy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IR=Gs&&"documentMode"in document&&11>=document.documentMode,Da=null,Fg=null,Pu=null,$g=!1;function Yy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$g||Da==null||Da!==_h(r)||(r=Da,"selectionStart"in r&&m_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pu&&ec(Pu,r)||(Pu=r,r=Ih(Fg,"onSelect"),0<r.length&&(e=new f_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Da)))}function Ad(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var La={animationend:Ad("Animation","AnimationEnd"),animationiteration:Ad("Animation","AnimationIteration"),animationstart:Ad("Animation","AnimationStart"),transitionend:Ad("Transition","TransitionEnd")},Op={},sT={};Gs&&(sT=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function gf(t){if(Op[t])return Op[t];if(!La[t])return t;var e=La[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sT)return Op[t]=e[n];return t}var iT=gf("animationend"),oT=gf("animationiteration"),aT=gf("animationstart"),lT=gf("transitionend"),uT=new Map,Xy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(t,e){uT.set(t,e),ra(e,[t])}for(var Dp=0;Dp<Xy.length;Dp++){var Lp=Xy[Dp],SR=Lp.toLowerCase(),xR=Lp[0].toUpperCase()+Lp.slice(1);to(SR,"on"+xR)}to(iT,"onAnimationEnd");to(oT,"onAnimationIteration");to(aT,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(lT,"onTransitionEnd");rl("onMouseEnter",["mouseout","mouseover"]);rl("onMouseLeave",["mouseout","mouseover"]);rl("onPointerEnter",["pointerout","pointerover"]);rl("onPointerLeave",["pointerout","pointerover"]);ra("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ra("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ra("onBeforeInput",["compositionend","keypress","textInput","paste"]);ra("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ra("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AR=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function Zy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,SC(r,e,void 0,t),t.currentTarget=null}function cT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Zy(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Zy(s,a,c),i=l}}}if(yh)throw t=Dg,yh=!1,Dg=null,t}function ct(t,e){var n=e[Hg];n===void 0&&(n=e[Hg]=new Set);var r=t+"__bubble";n.has(r)||(dT(e,t,2,!1),n.add(r))}function Mp(t,e,n){var r=0;e&&(r|=4),dT(n,t,r,e)}var kd="_reactListening"+Math.random().toString(36).slice(2);function tc(t){if(!t[kd]){t[kd]=!0,vb.forEach(function(n){n!=="selectionchange"&&(AR.has(n)||Mp(n,!1,t),Mp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kd]||(e[kd]=!0,Mp("selectionchange",!1,e))}}function dT(t,e,n,r){switch(Gb(e)){case 1:var s=UC;break;case 4:s=BC;break;default:s=d_}n=s.bind(null,e,n,t),s=void 0,!Og||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ro(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Ob(function(){var c=i,d=a_(n),p=[];e:{var m=uT.get(t);if(m!==void 0){var y=f_,I=t;switch(t){case"keypress":if(Xd(n)===0)break e;case"keydown":case"keyup":y=rR;break;case"focusin":I="focus",y=Pp;break;case"focusout":I="blur",y=Pp;break;case"beforeblur":case"afterblur":y=Pp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Uy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=HC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=oR;break;case iT:case oT:case aT:y=GC;break;case lT:y=lR;break;case"scroll":y=zC;break;case"wheel":y=cR;break;case"copy":case"cut":case"paste":y=JC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=zy}var x=(e&4)!==0,j=!x&&t==="scroll",A=x?m!==null?m+"Capture":null:m;x=[];for(var E=c,T;E!==null;){T=E;var O=T.stateNode;if(T.tag===5&&O!==null&&(T=O,A!==null&&(O=Qu(E,A),O!=null&&x.push(nc(E,O,T)))),j)break;E=E.return}0<x.length&&(m=new y(m,I,null,n,d),p.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==jg&&(I=n.relatedTarget||n.fromElement)&&(Ro(I)||I[Qs]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(I=n.relatedTarget||n.toElement,y=c,I=I?Ro(I):null,I!==null&&(j=sa(I),I!==j||I.tag!==5&&I.tag!==6)&&(I=null)):(y=null,I=c),y!==I)){if(x=Uy,O="onMouseLeave",A="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=zy,O="onPointerLeave",A="onPointerEnter",E="pointer"),j=y==null?m:Ma(y),T=I==null?m:Ma(I),m=new x(O,E+"leave",y,n,d),m.target=j,m.relatedTarget=T,O=null,Ro(d)===c&&(x=new x(A,E+"enter",I,n,d),x.target=T,x.relatedTarget=j,O=x),j=O,y&&I)t:{for(x=y,A=I,E=0,T=x;T;T=ba(T))E++;for(T=0,O=A;O;O=ba(O))T++;for(;0<E-T;)x=ba(x),E--;for(;0<T-E;)A=ba(A),T--;for(;E--;){if(x===A||A!==null&&x===A.alternate)break t;x=ba(x),A=ba(A)}x=null}else x=null;y!==null&&ew(p,m,y,x,!1),I!==null&&j!==null&&ew(p,j,I,x,!0)}}e:{if(m=c?Ma(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var B=_R;else if(Wy(m))if(eT)B=ER;else{B=yR;var R=vR}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(B=wR);if(B&&(B=B(t,c))){Zb(p,B,n,d);break e}R&&R(t,m,c),t==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&Ag(m,"number",m.value)}switch(R=c?Ma(c):window,t){case"focusin":(Wy(R)||R.contentEditable==="true")&&(Da=R,Fg=c,Pu=null);break;case"focusout":Pu=Fg=Da=null;break;case"mousedown":$g=!0;break;case"contextmenu":case"mouseup":case"dragend":$g=!1,Yy(p,n,d);break;case"selectionchange":if(IR)break;case"keydown":case"keyup":Yy(p,n,d)}var k;if(g_)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Oa?Yb(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Jb&&n.locale!=="ko"&&(Oa||w!=="onCompositionStart"?w==="onCompositionEnd"&&Oa&&(k=Qb()):(Li=d,h_="value"in Li?Li.value:Li.textContent,Oa=!0)),R=Ih(c,w),0<R.length&&(w=new By(w,t,null,n,d),p.push({event:w,listeners:R}),k?w.data=k:(k=Xb(n),k!==null&&(w.data=k)))),(k=hR?fR(t,n):pR(t,n))&&(c=Ih(c,"onBeforeInput"),0<c.length&&(d=new By("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:c}),d.data=k))}cT(p,e)})}function nc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ih(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Qu(t,n),i!=null&&r.unshift(nc(t,i,s)),i=Qu(t,e),i!=null&&r.push(nc(t,i,s))),t=t.return}return r}function ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ew(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Qu(n,i),l!=null&&o.unshift(nc(n,l,a))):s||(l=Qu(n,i),l!=null&&o.push(nc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kR=/\r\n?/g,CR=/\u0000|\uFFFD/g;function tw(t){return(typeof t=="string"?t:""+t).replace(kR,`
`).replace(CR,"")}function Cd(t,e,n){if(e=tw(e),tw(t)!==e&&n)throw Error(J(425))}function Sh(){}var Ug=null,Bg=null;function zg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qg=typeof setTimeout=="function"?setTimeout:void 0,RR=typeof clearTimeout=="function"?clearTimeout:void 0,nw=typeof Promise=="function"?Promise:void 0,PR=typeof queueMicrotask=="function"?queueMicrotask:typeof nw<"u"?function(t){return nw.resolve(null).then(t).catch(jR)}:qg;function jR(t){setTimeout(function(){throw t})}function Fp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Xu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Xu(e)}function Bi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function rw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xl=Math.random().toString(36).slice(2),hs="__reactFiber$"+xl,rc="__reactProps$"+xl,Qs="__reactContainer$"+xl,Hg="__reactEvents$"+xl,NR="__reactListeners$"+xl,OR="__reactHandles$"+xl;function Ro(t){var e=t[hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qs]||n[hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=rw(t);t!==null;){if(n=t[hs])return n;t=rw(t)}return e}t=n,n=t.parentNode}return null}function kc(t){return t=t[hs]||t[Qs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ma(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function mf(t){return t[rc]||null}var Wg=[],Va=-1;function no(t){return{current:t}}function dt(t){0>Va||(t.current=Wg[Va],Wg[Va]=null,Va--)}function ot(t,e){Va++,Wg[Va]=t.current,t.current=e}var Yi={},hn=no(Yi),Vn=no(!1),Uo=Yi;function sl(t,e){var n=t.type.contextTypes;if(!n)return Yi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Fn(t){return t=t.childContextTypes,t!=null}function xh(){dt(Vn),dt(hn)}function sw(t,e,n){if(hn.current!==Yi)throw Error(J(168));ot(hn,e),ot(Vn,n)}function hT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(J(108,vC(t)||"Unknown",s));return yt({},n,r)}function Ah(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Yi,Uo=hn.current,ot(hn,t),ot(Vn,Vn.current),!0}function iw(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=hT(t,e,Uo),r.__reactInternalMemoizedMergedChildContext=t,dt(Vn),dt(hn),ot(hn,t)):dt(Vn),ot(Vn,n)}var Vs=null,_f=!1,$p=!1;function fT(t){Vs===null?Vs=[t]:Vs.push(t)}function DR(t){_f=!0,fT(t)}function ro(){if(!$p&&Vs!==null){$p=!0;var t=0,e=Ge;try{var n=Vs;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vs=null,_f=!1}catch(s){throw Vs!==null&&(Vs=Vs.slice(t+1)),Vb(l_,ro),s}finally{Ge=e,$p=!1}}return null}var Fa=[],$a=0,kh=null,Ch=0,vr=[],yr=0,Bo=null,Fs=1,$s="";function Io(t,e){Fa[$a++]=Ch,Fa[$a++]=kh,kh=t,Ch=e}function pT(t,e,n){vr[yr++]=Fs,vr[yr++]=$s,vr[yr++]=Bo,Bo=t;var r=Fs;t=$s;var s=32-Gr(r)-1;r&=~(1<<s),n+=1;var i=32-Gr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fs=1<<32-Gr(e)+s|n<<s|r,$s=i+t}else Fs=1<<i|n<<s|r,$s=t}function __(t){t.return!==null&&(Io(t,1),pT(t,1,0))}function v_(t){for(;t===kh;)kh=Fa[--$a],Fa[$a]=null,Ch=Fa[--$a],Fa[$a]=null;for(;t===Bo;)Bo=vr[--yr],vr[yr]=null,$s=vr[--yr],vr[yr]=null,Fs=vr[--yr],vr[yr]=null}var Zn=null,Xn=null,pt=!1,Wr=null;function gT(t,e){var n=Er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ow(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zn=t,Xn=Bi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zn=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bo!==null?{id:Fs,overflow:$s}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zn=t,Xn=null,!0):!1;default:return!1}}function Kg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gg(t){if(pt){var e=Xn;if(e){var n=e;if(!ow(t,e)){if(Kg(t))throw Error(J(418));e=Bi(n.nextSibling);var r=Zn;e&&ow(t,e)?gT(r,n):(t.flags=t.flags&-4097|2,pt=!1,Zn=t)}}else{if(Kg(t))throw Error(J(418));t.flags=t.flags&-4097|2,pt=!1,Zn=t}}}function aw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zn=t}function Rd(t){if(t!==Zn)return!1;if(!pt)return aw(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zg(t.type,t.memoizedProps)),e&&(e=Xn)){if(Kg(t))throw mT(),Error(J(418));for(;e;)gT(t,e),e=Bi(e.nextSibling)}if(aw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xn=Bi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=Zn?Bi(t.stateNode.nextSibling):null;return!0}function mT(){for(var t=Xn;t;)t=Bi(t.nextSibling)}function il(){Xn=Zn=null,pt=!1}function y_(t){Wr===null?Wr=[t]:Wr.push(t)}var LR=oi.ReactCurrentBatchConfig;function ou(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Pd(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lw(t){var e=t._init;return e(t._payload)}function _T(t){function e(A,E){if(t){var T=A.deletions;T===null?(A.deletions=[E],A.flags|=16):T.push(E)}}function n(A,E){if(!t)return null;for(;E!==null;)e(A,E),E=E.sibling;return null}function r(A,E){for(A=new Map;E!==null;)E.key!==null?A.set(E.key,E):A.set(E.index,E),E=E.sibling;return A}function s(A,E){return A=Wi(A,E),A.index=0,A.sibling=null,A}function i(A,E,T){return A.index=T,t?(T=A.alternate,T!==null?(T=T.index,T<E?(A.flags|=2,E):T):(A.flags|=2,E)):(A.flags|=1048576,E)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function a(A,E,T,O){return E===null||E.tag!==6?(E=Kp(T,A.mode,O),E.return=A,E):(E=s(E,T),E.return=A,E)}function l(A,E,T,O){var B=T.type;return B===Na?d(A,E,T.props.children,O,T.key):E!==null&&(E.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Si&&lw(B)===E.type)?(O=s(E,T.props),O.ref=ou(A,E,T),O.return=A,O):(O=ih(T.type,T.key,T.props,null,A.mode,O),O.ref=ou(A,E,T),O.return=A,O)}function c(A,E,T,O){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=Gp(T,A.mode,O),E.return=A,E):(E=s(E,T.children||[]),E.return=A,E)}function d(A,E,T,O,B){return E===null||E.tag!==7?(E=Vo(T,A.mode,O,B),E.return=A,E):(E=s(E,T),E.return=A,E)}function p(A,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Kp(""+E,A.mode,T),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case wd:return T=ih(E.type,E.key,E.props,null,A.mode,T),T.ref=ou(A,null,E),T.return=A,T;case ja:return E=Gp(E,A.mode,T),E.return=A,E;case Si:var O=E._init;return p(A,O(E._payload),T)}if(mu(E)||tu(E))return E=Vo(E,A.mode,T,null),E.return=A,E;Pd(A,E)}return null}function m(A,E,T,O){var B=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return B!==null?null:a(A,E,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case wd:return T.key===B?l(A,E,T,O):null;case ja:return T.key===B?c(A,E,T,O):null;case Si:return B=T._init,m(A,E,B(T._payload),O)}if(mu(T)||tu(T))return B!==null?null:d(A,E,T,O,null);Pd(A,T)}return null}function y(A,E,T,O,B){if(typeof O=="string"&&O!==""||typeof O=="number")return A=A.get(T)||null,a(E,A,""+O,B);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case wd:return A=A.get(O.key===null?T:O.key)||null,l(E,A,O,B);case ja:return A=A.get(O.key===null?T:O.key)||null,c(E,A,O,B);case Si:var R=O._init;return y(A,E,T,R(O._payload),B)}if(mu(O)||tu(O))return A=A.get(T)||null,d(E,A,O,B,null);Pd(E,O)}return null}function I(A,E,T,O){for(var B=null,R=null,k=E,w=E=0,S=null;k!==null&&w<T.length;w++){k.index>w?(S=k,k=null):S=k.sibling;var C=m(A,k,T[w],O);if(C===null){k===null&&(k=S);break}t&&k&&C.alternate===null&&e(A,k),E=i(C,E,w),R===null?B=C:R.sibling=C,R=C,k=S}if(w===T.length)return n(A,k),pt&&Io(A,w),B;if(k===null){for(;w<T.length;w++)k=p(A,T[w],O),k!==null&&(E=i(k,E,w),R===null?B=k:R.sibling=k,R=k);return pt&&Io(A,w),B}for(k=r(A,k);w<T.length;w++)S=y(k,A,w,T[w],O),S!==null&&(t&&S.alternate!==null&&k.delete(S.key===null?w:S.key),E=i(S,E,w),R===null?B=S:R.sibling=S,R=S);return t&&k.forEach(function(N){return e(A,N)}),pt&&Io(A,w),B}function x(A,E,T,O){var B=tu(T);if(typeof B!="function")throw Error(J(150));if(T=B.call(T),T==null)throw Error(J(151));for(var R=B=null,k=E,w=E=0,S=null,C=T.next();k!==null&&!C.done;w++,C=T.next()){k.index>w?(S=k,k=null):S=k.sibling;var N=m(A,k,C.value,O);if(N===null){k===null&&(k=S);break}t&&k&&N.alternate===null&&e(A,k),E=i(N,E,w),R===null?B=N:R.sibling=N,R=N,k=S}if(C.done)return n(A,k),pt&&Io(A,w),B;if(k===null){for(;!C.done;w++,C=T.next())C=p(A,C.value,O),C!==null&&(E=i(C,E,w),R===null?B=C:R.sibling=C,R=C);return pt&&Io(A,w),B}for(k=r(A,k);!C.done;w++,C=T.next())C=y(k,A,w,C.value,O),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?w:C.key),E=i(C,E,w),R===null?B=C:R.sibling=C,R=C);return t&&k.forEach(function(V){return e(A,V)}),pt&&Io(A,w),B}function j(A,E,T,O){if(typeof T=="object"&&T!==null&&T.type===Na&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case wd:e:{for(var B=T.key,R=E;R!==null;){if(R.key===B){if(B=T.type,B===Na){if(R.tag===7){n(A,R.sibling),E=s(R,T.props.children),E.return=A,A=E;break e}}else if(R.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Si&&lw(B)===R.type){n(A,R.sibling),E=s(R,T.props),E.ref=ou(A,R,T),E.return=A,A=E;break e}n(A,R);break}else e(A,R);R=R.sibling}T.type===Na?(E=Vo(T.props.children,A.mode,O,T.key),E.return=A,A=E):(O=ih(T.type,T.key,T.props,null,A.mode,O),O.ref=ou(A,E,T),O.return=A,A=O)}return o(A);case ja:e:{for(R=T.key;E!==null;){if(E.key===R)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(A,E.sibling),E=s(E,T.children||[]),E.return=A,A=E;break e}else{n(A,E);break}else e(A,E);E=E.sibling}E=Gp(T,A.mode,O),E.return=A,A=E}return o(A);case Si:return R=T._init,j(A,E,R(T._payload),O)}if(mu(T))return I(A,E,T,O);if(tu(T))return x(A,E,T,O);Pd(A,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(A,E.sibling),E=s(E,T),E.return=A,A=E):(n(A,E),E=Kp(T,A.mode,O),E.return=A,A=E),o(A)):n(A,E)}return j}var ol=_T(!0),vT=_T(!1),Rh=no(null),Ph=null,Ua=null,w_=null;function E_(){w_=Ua=Ph=null}function b_(t){var e=Rh.current;dt(Rh),t._currentValue=e}function Qg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ja(t,e){Ph=t,w_=Ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mn=!0),t.firstContext=null)}function Sr(t){var e=t._currentValue;if(w_!==t)if(t={context:t,memoizedValue:e,next:null},Ua===null){if(Ph===null)throw Error(J(308));Ua=t,Ph.dependencies={lanes:0,firstContext:t}}else Ua=Ua.next=t;return e}var Po=null;function T_(t){Po===null?Po=[t]:Po.push(t)}function yT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,T_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Js(t,r)}function Js(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xi=!1;function I_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Js(t,n)}return s=r.interleaved,s===null?(e.next=e,T_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Js(t,n)}function Zd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,u_(t,n)}}function uw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jh(t,e,n,r){var s=t.updateQueue;xi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(i!==null){var p=s.baseState;o=0,d=c=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,x=a;switch(m=e,y=n,x.tag){case 1:if(I=x.payload,typeof I=="function"){p=I.call(y,p,m);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=x.payload,m=typeof I=="function"?I.call(y,p,m):I,m==null)break e;p=yt({},p,m);break e;case 2:xi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=p):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);qo|=o,t.lanes=o,t.memoizedState=p}}function cw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var Cc={},gs=no(Cc),sc=no(Cc),ic=no(Cc);function jo(t){if(t===Cc)throw Error(J(174));return t}function S_(t,e){switch(ot(ic,e),ot(sc,t),ot(gs,Cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cg(e,t)}dt(gs),ot(gs,e)}function al(){dt(gs),dt(sc),dt(ic)}function ET(t){jo(ic.current);var e=jo(gs.current),n=Cg(e,t.type);e!==n&&(ot(sc,t),ot(gs,n))}function x_(t){sc.current===t&&(dt(gs),dt(sc))}var _t=no(0);function Nh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Up=[];function A_(){for(var t=0;t<Up.length;t++)Up[t]._workInProgressVersionPrimary=null;Up.length=0}var eh=oi.ReactCurrentDispatcher,Bp=oi.ReactCurrentBatchConfig,zo=0,vt=null,Mt=null,qt=null,Oh=!1,ju=!1,oc=0,MR=0;function sn(){throw Error(J(321))}function k_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jr(t[n],e[n]))return!1;return!0}function C_(t,e,n,r,s,i){if(zo=i,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,eh.current=t===null||t.memoizedState===null?UR:BR,t=n(r,s),ju){i=0;do{if(ju=!1,oc=0,25<=i)throw Error(J(301));i+=1,qt=Mt=null,e.updateQueue=null,eh.current=zR,t=n(r,s)}while(ju)}if(eh.current=Dh,e=Mt!==null&&Mt.next!==null,zo=0,qt=Mt=vt=null,Oh=!1,e)throw Error(J(300));return t}function R_(){var t=oc!==0;return oc=0,t}function ds(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?vt.memoizedState=qt=t:qt=qt.next=t,qt}function xr(){if(Mt===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var e=qt===null?vt.memoizedState:qt.next;if(e!==null)qt=e,Mt=t;else{if(t===null)throw Error(J(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},qt===null?vt.memoizedState=qt=t:qt=qt.next=t}return qt}function ac(t,e){return typeof e=="function"?e(t):e}function zp(t){var e=xr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Mt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var d=c.lane;if((zo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,vt.lanes|=d,qo|=d}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,Jr(r,e.memoizedState)||(Mn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,vt.lanes|=i,qo|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qp(t){var e=xr(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Jr(i,e.memoizedState)||(Mn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function bT(){}function TT(t,e){var n=vt,r=xr(),s=e(),i=!Jr(r.memoizedState,s);if(i&&(r.memoizedState=s,Mn=!0),r=r.queue,P_(xT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||qt!==null&&qt.memoizedState.tag&1){if(n.flags|=2048,lc(9,ST.bind(null,n,r,s,e),void 0,null),Ht===null)throw Error(J(349));zo&30||IT(n,e,s)}return s}function IT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ST(t,e,n,r){e.value=n,e.getSnapshot=r,AT(e)&&kT(t)}function xT(t,e,n){return n(function(){AT(e)&&kT(t)})}function AT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jr(t,n)}catch{return!0}}function kT(t){var e=Js(t,1);e!==null&&Qr(e,t,1,-1)}function dw(t){var e=ds();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ac,lastRenderedState:t},e.queue=t,t=t.dispatch=$R.bind(null,vt,t),[e.memoizedState,t]}function lc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function CT(){return xr().memoizedState}function th(t,e,n,r){var s=ds();vt.flags|=t,s.memoizedState=lc(1|e,n,void 0,r===void 0?null:r)}function vf(t,e,n,r){var s=xr();r=r===void 0?null:r;var i=void 0;if(Mt!==null){var o=Mt.memoizedState;if(i=o.destroy,r!==null&&k_(r,o.deps)){s.memoizedState=lc(e,n,i,r);return}}vt.flags|=t,s.memoizedState=lc(1|e,n,i,r)}function hw(t,e){return th(8390656,8,t,e)}function P_(t,e){return vf(2048,8,t,e)}function RT(t,e){return vf(4,2,t,e)}function PT(t,e){return vf(4,4,t,e)}function jT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NT(t,e,n){return n=n!=null?n.concat([t]):null,vf(4,4,jT.bind(null,e,t),n)}function j_(){}function OT(t,e){var n=xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&k_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function DT(t,e){var n=xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&k_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function LT(t,e,n){return zo&21?(Jr(n,e)||(n=Ub(),vt.lanes|=n,qo|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mn=!0),t.memoizedState=n)}function VR(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=Bp.transition;Bp.transition={};try{t(!1),e()}finally{Ge=n,Bp.transition=r}}function MT(){return xr().memoizedState}function FR(t,e,n){var r=Hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},VT(t))FT(e,n);else if(n=yT(t,e,n,r),n!==null){var s=In();Qr(n,t,r,s),$T(n,e,r)}}function $R(t,e,n){var r=Hi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(VT(t))FT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Jr(a,o)){var l=e.interleaved;l===null?(s.next=s,T_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=yT(t,e,s,r),n!==null&&(s=In(),Qr(n,t,r,s),$T(n,e,r))}}function VT(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function FT(t,e){ju=Oh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function $T(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,u_(t,n)}}var Dh={readContext:Sr,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},UR={readContext:Sr,useCallback:function(t,e){return ds().memoizedState=[t,e===void 0?null:e],t},useContext:Sr,useEffect:hw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,th(4194308,4,jT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return th(4194308,4,t,e)},useInsertionEffect:function(t,e){return th(4,2,t,e)},useMemo:function(t,e){var n=ds();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ds();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FR.bind(null,vt,t),[r.memoizedState,t]},useRef:function(t){var e=ds();return t={current:t},e.memoizedState=t},useState:dw,useDebugValue:j_,useDeferredValue:function(t){return ds().memoizedState=t},useTransition:function(){var t=dw(!1),e=t[0];return t=VR.bind(null,t[1]),ds().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vt,s=ds();if(pt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Ht===null)throw Error(J(349));zo&30||IT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,hw(xT.bind(null,r,i,t),[t]),r.flags|=2048,lc(9,ST.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ds(),e=Ht.identifierPrefix;if(pt){var n=$s,r=Fs;n=(r&~(1<<32-Gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=oc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=MR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BR={readContext:Sr,useCallback:OT,useContext:Sr,useEffect:P_,useImperativeHandle:NT,useInsertionEffect:RT,useLayoutEffect:PT,useMemo:DT,useReducer:zp,useRef:CT,useState:function(){return zp(ac)},useDebugValue:j_,useDeferredValue:function(t){var e=xr();return LT(e,Mt.memoizedState,t)},useTransition:function(){var t=zp(ac)[0],e=xr().memoizedState;return[t,e]},useMutableSource:bT,useSyncExternalStore:TT,useId:MT,unstable_isNewReconciler:!1},zR={readContext:Sr,useCallback:OT,useContext:Sr,useEffect:P_,useImperativeHandle:NT,useInsertionEffect:RT,useLayoutEffect:PT,useMemo:DT,useReducer:qp,useRef:CT,useState:function(){return qp(ac)},useDebugValue:j_,useDeferredValue:function(t){var e=xr();return Mt===null?e.memoizedState=t:LT(e,Mt.memoizedState,t)},useTransition:function(){var t=qp(ac)[0],e=xr().memoizedState;return[t,e]},useMutableSource:bT,useSyncExternalStore:TT,useId:MT,unstable_isNewReconciler:!1};function Br(t,e){if(t&&t.defaultProps){e=yt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:yt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yf={isMounted:function(t){return(t=t._reactInternals)?sa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=In(),s=Hi(t),i=Hs(r,s);i.payload=e,n!=null&&(i.callback=n),e=zi(t,i,s),e!==null&&(Qr(e,t,s,r),Zd(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=In(),s=Hi(t),i=Hs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zi(t,i,s),e!==null&&(Qr(e,t,s,r),Zd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=In(),r=Hi(t),s=Hs(n,r);s.tag=2,e!=null&&(s.callback=e),e=zi(t,s,r),e!==null&&(Qr(e,t,r,n),Zd(e,t,r))}};function fw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ec(n,r)||!ec(s,i):!0}function UT(t,e,n){var r=!1,s=Yi,i=e.contextType;return typeof i=="object"&&i!==null?i=Sr(i):(s=Fn(e)?Uo:hn.current,r=e.contextTypes,i=(r=r!=null)?sl(t,s):Yi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function pw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yf.enqueueReplaceState(e,e.state,null)}function Yg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},I_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Sr(i):(i=Fn(e)?Uo:hn.current,s.context=sl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Jg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yf.enqueueReplaceState(s,s.state,null),jh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ll(t,e){try{var n="",r=e;do n+=_C(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qR=typeof WeakMap=="function"?WeakMap:Map;function BT(t,e,n){n=Hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mh||(Mh=!0,lm=r),Xg(t,e)},n}function zT(t,e,n){n=Hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xg(t,e),typeof r!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function gw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qR;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sP.bind(null,t,e,n),e.then(t,t))}function mw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _w(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hs(-1,1),e.tag=2,zi(n,e,1))),n.lanes|=1),t)}var HR=oi.ReactCurrentOwner,Mn=!1;function Tn(t,e,n,r){e.child=t===null?vT(e,null,n,r):ol(e,t.child,n,r)}function vw(t,e,n,r,s){n=n.render;var i=e.ref;return Ja(e,s),r=C_(t,e,n,r,i,s),n=R_(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ys(t,e,s)):(pt&&n&&__(e),e.flags|=1,Tn(t,e,r,s),e.child)}function yw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!$_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qT(t,e,i,r,s)):(t=ih(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ec,n(o,r)&&t.ref===e.ref)return Ys(t,e,s)}return e.flags|=1,t=Wi(i,r),t.ref=e.ref,t.return=e,e.child=t}function qT(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ec(i,r)&&t.ref===e.ref)if(Mn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Mn=!0);else return e.lanes=t.lanes,Ys(t,e,s)}return Zg(t,e,n,r,s)}function HT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(za,Qn),Qn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ot(za,Qn),Qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ot(za,Qn),Qn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ot(za,Qn),Qn|=r;return Tn(t,e,s,n),e.child}function WT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zg(t,e,n,r,s){var i=Fn(n)?Uo:hn.current;return i=sl(e,i),Ja(e,s),n=C_(t,e,n,r,i,s),r=R_(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ys(t,e,s)):(pt&&r&&__(e),e.flags|=1,Tn(t,e,n,s),e.child)}function ww(t,e,n,r,s){if(Fn(n)){var i=!0;Ah(e)}else i=!1;if(Ja(e,s),e.stateNode===null)nh(t,e),UT(e,n,r),Yg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Sr(c):(c=Fn(n)?Uo:hn.current,c=sl(e,c));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&pw(e,o,r,c),xi=!1;var m=e.memoizedState;o.state=m,jh(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Vn.current||xi?(typeof d=="function"&&(Jg(e,n,d,r),l=e.memoizedState),(a=xi||fw(e,n,a,r,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,wT(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Br(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sr(l):(l=Fn(n)?Uo:hn.current,l=sl(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&pw(e,o,r,l),xi=!1,m=e.memoizedState,o.state=m,jh(e,r,o,s);var I=e.memoizedState;a!==p||m!==I||Vn.current||xi?(typeof y=="function"&&(Jg(e,n,y,r),I=e.memoizedState),(c=xi||fw(e,n,c,r,m,I,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return em(t,e,n,r,i,s)}function em(t,e,n,r,s,i){WT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&iw(e,n,!1),Ys(t,e,i);r=e.stateNode,HR.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ol(e,t.child,null,i),e.child=ol(e,null,a,i)):Tn(t,e,a,i),e.memoizedState=r.state,s&&iw(e,n,!0),e.child}function KT(t){var e=t.stateNode;e.pendingContext?sw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sw(t,e.context,!1),S_(t,e.containerInfo)}function Ew(t,e,n,r,s){return il(),y_(s),e.flags|=256,Tn(t,e,n,r),e.child}var tm={dehydrated:null,treeContext:null,retryLane:0};function nm(t){return{baseLanes:t,cachePool:null,transitions:null}}function GT(t,e,n){var r=e.pendingProps,s=_t.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ot(_t,s&1),t===null)return Gg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bf(o,r,0,null),t=Vo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=nm(n),e.memoizedState=tm,t):N_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return WR(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Wi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Wi(a,i):(i=Vo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?nm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=tm,r}return i=t.child,t=i.sibling,r=Wi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function N_(t,e){return e=bf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jd(t,e,n,r){return r!==null&&y_(r),ol(e,t.child,null,n),t=N_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WR(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Hp(Error(J(422))),jd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bf({mode:"visible",children:r.children},s,0,null),i=Vo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ol(e,t.child,null,o),e.child.memoizedState=nm(o),e.memoizedState=tm,i);if(!(e.mode&1))return jd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(J(419)),r=Hp(i,r,void 0),jd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Mn||a){if(r=Ht,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Js(t,s),Qr(r,t,s,-1))}return F_(),r=Hp(Error(J(421))),jd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xn=Bi(s.nextSibling),Zn=e,pt=!0,Wr=null,t!==null&&(vr[yr++]=Fs,vr[yr++]=$s,vr[yr++]=Bo,Fs=t.id,$s=t.overflow,Bo=e),e=N_(e,r.children),e.flags|=4096,e)}function bw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qg(t.return,e,n)}function Wp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function QT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tn(t,e,r.children,n),r=_t.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bw(t,n,e);else if(t.tag===19)bw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ot(_t,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Nh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Wp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Nh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Wp(e,!0,n,null,i);break;case"together":Wp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ys(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qo|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Wi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function KR(t,e,n){switch(e.tag){case 3:KT(e),il();break;case 5:ET(e);break;case 1:Fn(e.type)&&Ah(e);break;case 4:S_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ot(Rh,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ot(_t,_t.current&1),e.flags|=128,null):n&e.child.childLanes?GT(t,e,n):(ot(_t,_t.current&1),t=Ys(t,e,n),t!==null?t.sibling:null);ot(_t,_t.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ot(_t,_t.current),r)break;return null;case 22:case 23:return e.lanes=0,HT(t,e,n)}return Ys(t,e,n)}var JT,rm,YT,XT;JT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rm=function(){};YT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,jo(gs.current);var i=null;switch(n){case"input":s=Sg(t,s),r=Sg(t,r),i=[];break;case"select":s=yt({},s,{value:void 0}),r=yt({},r,{value:void 0}),i=[];break;case"textarea":s=kg(t,s),r=kg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sh)}Rg(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ku.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ku.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ct("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};XT=function(t,e,n,r){n!==r&&(e.flags|=4)};function au(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function on(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GR(t,e,n){var r=e.pendingProps;switch(v_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(e),null;case 1:return Fn(e.type)&&xh(),on(e),null;case 3:return r=e.stateNode,al(),dt(Vn),dt(hn),A_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(dm(Wr),Wr=null))),rm(t,e),on(e),null;case 5:x_(e);var s=jo(ic.current);if(n=e.type,t!==null&&e.stateNode!=null)YT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return on(e),null}if(t=jo(gs.current),Rd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hs]=e,r[rc]=i,t=(e.mode&1)!==0,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(s=0;s<vu.length;s++)ct(vu[s],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":Py(r,i),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ct("invalid",r);break;case"textarea":Ny(r,i),ct("invalid",r)}Rg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),s=["children",""+a]):Ku.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ct("scroll",r)}switch(n){case"input":Ed(r),jy(r,i,!0);break;case"textarea":Ed(r),Oy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hs]=e,t[rc]=r,JT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pg(n,r),n){case"dialog":ct("cancel",t),ct("close",t),s=r;break;case"iframe":case"object":case"embed":ct("load",t),s=r;break;case"video":case"audio":for(s=0;s<vu.length;s++)ct(vu[s],t);s=r;break;case"source":ct("error",t),s=r;break;case"img":case"image":case"link":ct("error",t),ct("load",t),s=r;break;case"details":ct("toggle",t),s=r;break;case"input":Py(t,r),s=Sg(t,r),ct("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=yt({},r,{value:void 0}),ct("invalid",t);break;case"textarea":Ny(t,r),s=kg(t,r),ct("invalid",t);break;default:s=r}Rg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Cb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ab(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Gu(t,l):typeof l=="number"&&Gu(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ku.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ct("scroll",t):l!=null&&r_(t,i,l,o))}switch(n){case"input":Ed(t),jy(t,r,!1);break;case"textarea":Ed(t),Oy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ji(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Wa(t,!!r.multiple,i,!1):r.defaultValue!=null&&Wa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return on(e),null;case 6:if(t&&e.stateNode!=null)XT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=jo(ic.current),jo(gs.current),Rd(e)){if(r=e.stateNode,n=e.memoizedProps,r[hs]=e,(i=r.nodeValue!==n)&&(t=Zn,t!==null))switch(t.tag){case 3:Cd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=e,e.stateNode=r}return on(e),null;case 13:if(dt(_t),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&Xn!==null&&e.mode&1&&!(e.flags&128))mT(),il(),e.flags|=98560,i=!1;else if(i=Rd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[hs]=e}else il(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;on(e),i=!1}else Wr!==null&&(dm(Wr),Wr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||_t.current&1?Vt===0&&(Vt=3):F_())),e.updateQueue!==null&&(e.flags|=4),on(e),null);case 4:return al(),rm(t,e),t===null&&tc(e.stateNode.containerInfo),on(e),null;case 10:return b_(e.type._context),on(e),null;case 17:return Fn(e.type)&&xh(),on(e),null;case 19:if(dt(_t),i=e.memoizedState,i===null)return on(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)au(i,!1);else{if(Vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Nh(t),o!==null){for(e.flags|=128,au(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ot(_t,_t.current&1|2),e.child}t=t.sibling}i.tail!==null&&At()>ul&&(e.flags|=128,r=!0,au(i,!1),e.lanes=4194304)}else{if(!r)if(t=Nh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),au(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pt)return on(e),null}else 2*At()-i.renderingStartTime>ul&&n!==1073741824&&(e.flags|=128,r=!0,au(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=At(),e.sibling=null,n=_t.current,ot(_t,r?n&1|2:n&1),e):(on(e),null);case 22:case 23:return V_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qn&1073741824&&(on(e),e.subtreeFlags&6&&(e.flags|=8192)):on(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function QR(t,e){switch(v_(e),e.tag){case 1:return Fn(e.type)&&xh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return al(),dt(Vn),dt(hn),A_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x_(e),null;case 13:if(dt(_t),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));il()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dt(_t),null;case 4:return al(),null;case 10:return b_(e.type._context),null;case 22:case 23:return V_(),null;case 24:return null;default:return null}}var Nd=!1,cn=!1,JR=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(t,e,r)}else n.current=null}function sm(t,e,n){try{n()}catch(r){bt(t,e,r)}}var Tw=!1;function YR(t,e){if(Ug=bh,t=rT(),m_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,p=t,m=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++d===r&&(l=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bg={focusedElem:t,selectionRange:n},bh=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var x=I.memoizedProps,j=I.memoizedState,A=e.stateNode,E=A.getSnapshotBeforeUpdate(e.elementType===e.type?x:Br(e.type,x),j);A.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(O){bt(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return I=Tw,Tw=!1,I}function Nu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&sm(e,n,i)}s=s.next}while(s!==r)}}function wf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function im(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ZT(t){var e=t.alternate;e!==null&&(t.alternate=null,ZT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hs],delete e[rc],delete e[Hg],delete e[NR],delete e[OR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eI(t){return t.tag===5||t.tag===3||t.tag===4}function Iw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function om(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sh));else if(r!==4&&(t=t.child,t!==null))for(om(t,e,n),t=t.sibling;t!==null;)om(t,e,n),t=t.sibling}function am(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(am(t,e,n),t=t.sibling;t!==null;)am(t,e,n),t=t.sibling}var Kt=null,zr=!1;function Ei(t,e,n){for(n=n.child;n!==null;)tI(t,e,n),n=n.sibling}function tI(t,e,n){if(ps&&typeof ps.onCommitFiberUnmount=="function")try{ps.onCommitFiberUnmount(hf,n)}catch{}switch(n.tag){case 5:cn||Ba(n,e);case 6:var r=Kt,s=zr;Kt=null,Ei(t,e,n),Kt=r,zr=s,Kt!==null&&(zr?(t=Kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(zr?(t=Kt,n=n.stateNode,t.nodeType===8?Fp(t.parentNode,n):t.nodeType===1&&Fp(t,n),Xu(t)):Fp(Kt,n.stateNode));break;case 4:r=Kt,s=zr,Kt=n.stateNode.containerInfo,zr=!0,Ei(t,e,n),Kt=r,zr=s;break;case 0:case 11:case 14:case 15:if(!cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sm(n,e,o),s=s.next}while(s!==r)}Ei(t,e,n);break;case 1:if(!cn&&(Ba(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){bt(n,e,a)}Ei(t,e,n);break;case 21:Ei(t,e,n);break;case 22:n.mode&1?(cn=(r=cn)||n.memoizedState!==null,Ei(t,e,n),cn=r):Ei(t,e,n);break;default:Ei(t,e,n)}}function Sw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new JR),e.forEach(function(r){var s=oP.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $r(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Kt=a.stateNode,zr=!1;break e;case 3:Kt=a.stateNode.containerInfo,zr=!0;break e;case 4:Kt=a.stateNode.containerInfo,zr=!0;break e}a=a.return}if(Kt===null)throw Error(J(160));tI(i,o,s),Kt=null,zr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){bt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nI(e,t),e=e.sibling}function nI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($r(e,t),cs(t),r&4){try{Nu(3,t,t.return),wf(3,t)}catch(x){bt(t,t.return,x)}try{Nu(5,t,t.return)}catch(x){bt(t,t.return,x)}}break;case 1:$r(e,t),cs(t),r&512&&n!==null&&Ba(n,n.return);break;case 5:if($r(e,t),cs(t),r&512&&n!==null&&Ba(n,n.return),t.flags&32){var s=t.stateNode;try{Gu(s,"")}catch(x){bt(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ib(s,i),Pg(a,o);var c=Pg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?Cb(s,p):d==="dangerouslySetInnerHTML"?Ab(s,p):d==="children"?Gu(s,p):r_(s,d,p,c)}switch(a){case"input":xg(s,i);break;case"textarea":Sb(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Wa(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Wa(s,!!i.multiple,i.defaultValue,!0):Wa(s,!!i.multiple,i.multiple?[]:"",!1))}s[rc]=i}catch(x){bt(t,t.return,x)}}break;case 6:if($r(e,t),cs(t),r&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){bt(t,t.return,x)}}break;case 3:if($r(e,t),cs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xu(e.containerInfo)}catch(x){bt(t,t.return,x)}break;case 4:$r(e,t),cs(t);break;case 13:$r(e,t),cs(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(L_=At())),r&4&&Sw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(cn=(c=cn)||d,$r(e,t),cn=c):$r(e,t),cs(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(re=t,d=t.child;d!==null;){for(p=re=d;re!==null;){switch(m=re,y=m.child,m.tag){case 0:case 11:case 14:case 15:Nu(4,m,m.return);break;case 1:Ba(m,m.return);var I=m.stateNode;if(typeof I.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(x){bt(r,n,x)}}break;case 5:Ba(m,m.return);break;case 22:if(m.memoizedState!==null){Aw(p);continue}}y!==null?(y.return=m,re=y):Aw(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kb("display",o))}catch(x){bt(t,t.return,x)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(x){bt(t,t.return,x)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:$r(e,t),cs(t),r&4&&Sw(t);break;case 21:break;default:$r(e,t),cs(t)}}function cs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eI(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gu(s,""),r.flags&=-33);var i=Iw(t);am(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Iw(t);om(t,a,o);break;default:throw Error(J(161))}}catch(l){bt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XR(t,e,n){re=t,rI(t)}function rI(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Nd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||cn;a=Nd;var c=cn;if(Nd=o,(cn=l)&&!c)for(re=s;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?kw(s):l!==null?(l.return=o,re=l):kw(s);for(;i!==null;)re=i,rI(i),i=i.sibling;re=s,Nd=a,cn=c}xw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):xw(t)}}function xw(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||wf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Br(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&cw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Xu(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}cn||e.flags&512&&im(e)}catch(m){bt(e,e.return,m)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Aw(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function kw(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wf(4,e)}catch(l){bt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){bt(e,s,l)}}var i=e.return;try{im(e)}catch(l){bt(e,i,l)}break;case 5:var o=e.return;try{im(e)}catch(l){bt(e,o,l)}}}catch(l){bt(e,e.return,l)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var ZR=Math.ceil,Lh=oi.ReactCurrentDispatcher,O_=oi.ReactCurrentOwner,br=oi.ReactCurrentBatchConfig,$e=0,Ht=null,Rt=null,Jt=0,Qn=0,za=no(0),Vt=0,uc=null,qo=0,Ef=0,D_=0,Ou=null,Dn=null,L_=0,ul=1/0,Ls=null,Mh=!1,lm=null,qi=null,Od=!1,Mi=null,Vh=0,Du=0,um=null,rh=-1,sh=0;function In(){return $e&6?At():rh!==-1?rh:rh=At()}function Hi(t){return t.mode&1?$e&2&&Jt!==0?Jt&-Jt:LR.transition!==null?(sh===0&&(sh=Ub()),sh):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:Gb(t.type)),t):1}function Qr(t,e,n,r){if(50<Du)throw Du=0,um=null,Error(J(185));xc(t,n,r),(!($e&2)||t!==Ht)&&(t===Ht&&(!($e&2)&&(Ef|=n),Vt===4&&Ci(t,Jt)),$n(t,r),n===1&&$e===0&&!(e.mode&1)&&(ul=At()+500,_f&&ro()))}function $n(t,e){var n=t.callbackNode;LC(t,e);var r=Eh(t,t===Ht?Jt:0);if(r===0)n!==null&&My(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&My(n),e===1)t.tag===0?DR(Cw.bind(null,t)):fT(Cw.bind(null,t)),PR(function(){!($e&6)&&ro()}),n=null;else{switch(Bb(r)){case 1:n=l_;break;case 4:n=Fb;break;case 16:n=wh;break;case 536870912:n=$b;break;default:n=wh}n=dI(n,sI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sI(t,e){if(rh=-1,sh=0,$e&6)throw Error(J(327));var n=t.callbackNode;if(Ya()&&t.callbackNode!==n)return null;var r=Eh(t,t===Ht?Jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fh(t,r);else{e=r;var s=$e;$e|=2;var i=oI();(Ht!==t||Jt!==e)&&(Ls=null,ul=At()+500,Mo(t,e));do try{nP();break}catch(a){iI(t,a)}while(!0);E_(),Lh.current=i,$e=s,Rt!==null?e=0:(Ht=null,Jt=0,e=Vt)}if(e!==0){if(e===2&&(s=Lg(t),s!==0&&(r=s,e=cm(t,s))),e===1)throw n=uc,Mo(t,0),Ci(t,r),$n(t,At()),n;if(e===6)Ci(t,r);else{if(s=t.current.alternate,!(r&30)&&!eP(s)&&(e=Fh(t,r),e===2&&(i=Lg(t),i!==0&&(r=i,e=cm(t,i))),e===1))throw n=uc,Mo(t,0),Ci(t,r),$n(t,At()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:So(t,Dn,Ls);break;case 3:if(Ci(t,r),(r&130023424)===r&&(e=L_+500-At(),10<e)){if(Eh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){In(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=qg(So.bind(null,t,Dn,Ls),e);break}So(t,Dn,Ls);break;case 4:if(Ci(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Gr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZR(r/1960))-r,10<r){t.timeoutHandle=qg(So.bind(null,t,Dn,Ls),r);break}So(t,Dn,Ls);break;case 5:So(t,Dn,Ls);break;default:throw Error(J(329))}}}return $n(t,At()),t.callbackNode===n?sI.bind(null,t):null}function cm(t,e){var n=Ou;return t.current.memoizedState.isDehydrated&&(Mo(t,e).flags|=256),t=Fh(t,e),t!==2&&(e=Dn,Dn=n,e!==null&&dm(e)),t}function dm(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function eP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ci(t,e){for(e&=~D_,e&=~Ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gr(e),r=1<<n;t[n]=-1,e&=~r}}function Cw(t){if($e&6)throw Error(J(327));Ya();var e=Eh(t,0);if(!(e&1))return $n(t,At()),null;var n=Fh(t,e);if(t.tag!==0&&n===2){var r=Lg(t);r!==0&&(e=r,n=cm(t,r))}if(n===1)throw n=uc,Mo(t,0),Ci(t,e),$n(t,At()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,So(t,Dn,Ls),$n(t,At()),null}function M_(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(ul=At()+500,_f&&ro())}}function Ho(t){Mi!==null&&Mi.tag===0&&!($e&6)&&Ya();var e=$e;$e|=1;var n=br.transition,r=Ge;try{if(br.transition=null,Ge=1,t)return t()}finally{Ge=r,br.transition=n,$e=e,!($e&6)&&ro()}}function V_(){Qn=za.current,dt(za)}function Mo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RR(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(v_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xh();break;case 3:al(),dt(Vn),dt(hn),A_();break;case 5:x_(r);break;case 4:al();break;case 13:dt(_t);break;case 19:dt(_t);break;case 10:b_(r.type._context);break;case 22:case 23:V_()}n=n.return}if(Ht=t,Rt=t=Wi(t.current,null),Jt=Qn=e,Vt=0,uc=null,D_=Ef=qo=0,Dn=Ou=null,Po!==null){for(e=0;e<Po.length;e++)if(n=Po[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Po=null}return t}function iI(t,e){do{var n=Rt;try{if(E_(),eh.current=Dh,Oh){for(var r=vt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Oh=!1}if(zo=0,qt=Mt=vt=null,ju=!1,oc=0,O_.current=null,n===null||n.return===null){Vt=1,uc=e,Rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Jt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=mw(o);if(y!==null){y.flags&=-257,_w(y,o,a,i,e),y.mode&1&&gw(i,c,e),e=y,l=c;var I=e.updateQueue;if(I===null){var x=new Set;x.add(l),e.updateQueue=x}else I.add(l);break e}else{if(!(e&1)){gw(i,c,e),F_();break e}l=Error(J(426))}}else if(pt&&a.mode&1){var j=mw(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),_w(j,o,a,i,e),y_(ll(l,a));break e}}i=l=ll(l,a),Vt!==4&&(Vt=2),Ou===null?Ou=[i]:Ou.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var A=BT(i,l,e);uw(i,A);break e;case 1:a=l;var E=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(qi===null||!qi.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=zT(i,a,e);uw(i,O);break e}}i=i.return}while(i!==null)}lI(n)}catch(B){e=B,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function oI(){var t=Lh.current;return Lh.current=Dh,t===null?Dh:t}function F_(){(Vt===0||Vt===3||Vt===2)&&(Vt=4),Ht===null||!(qo&268435455)&&!(Ef&268435455)||Ci(Ht,Jt)}function Fh(t,e){var n=$e;$e|=2;var r=oI();(Ht!==t||Jt!==e)&&(Ls=null,Mo(t,e));do try{tP();break}catch(s){iI(t,s)}while(!0);if(E_(),$e=n,Lh.current=r,Rt!==null)throw Error(J(261));return Ht=null,Jt=0,Vt}function tP(){for(;Rt!==null;)aI(Rt)}function nP(){for(;Rt!==null&&!AC();)aI(Rt)}function aI(t){var e=cI(t.alternate,t,Qn);t.memoizedProps=t.pendingProps,e===null?lI(t):Rt=e,O_.current=null}function lI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QR(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Vt=6,Rt=null;return}}else if(n=GR(n,e,Qn),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Vt===0&&(Vt=5)}function So(t,e,n){var r=Ge,s=br.transition;try{br.transition=null,Ge=1,rP(t,e,n,r)}finally{br.transition=s,Ge=r}return null}function rP(t,e,n,r){do Ya();while(Mi!==null);if($e&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(MC(t,i),t===Ht&&(Rt=Ht=null,Jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Od||(Od=!0,dI(wh,function(){return Ya(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=br.transition,br.transition=null;var o=Ge;Ge=1;var a=$e;$e|=4,O_.current=null,YR(t,n),nI(n,t),TR(Bg),bh=!!Ug,Bg=Ug=null,t.current=n,XR(n),kC(),$e=a,Ge=o,br.transition=i}else t.current=n;if(Od&&(Od=!1,Mi=t,Vh=s),i=t.pendingLanes,i===0&&(qi=null),PC(n.stateNode),$n(t,At()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Mh)throw Mh=!1,t=lm,lm=null,t;return Vh&1&&t.tag!==0&&Ya(),i=t.pendingLanes,i&1?t===um?Du++:(Du=0,um=t):Du=0,ro(),null}function Ya(){if(Mi!==null){var t=Bb(Vh),e=br.transition,n=Ge;try{if(br.transition=null,Ge=16>t?16:t,Mi===null)var r=!1;else{if(t=Mi,Mi=null,Vh=0,$e&6)throw Error(J(331));var s=$e;for($e|=4,re=t.current;re!==null;){var i=re,o=i.child;if(re.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(re=c;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:Nu(8,d,i)}var p=d.child;if(p!==null)p.return=d,re=p;else for(;re!==null;){d=re;var m=d.sibling,y=d.return;if(ZT(d),d===c){re=null;break}if(m!==null){m.return=y,re=m;break}re=y}}}var I=i.alternate;if(I!==null){var x=I.child;if(x!==null){I.child=null;do{var j=x.sibling;x.sibling=null,x=j}while(x!==null)}}re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,re=o;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Nu(9,i,i.return)}var A=i.sibling;if(A!==null){A.return=i.return,re=A;break e}re=i.return}}var E=t.current;for(re=E;re!==null;){o=re;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,re=T;else e:for(o=E;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wf(9,a)}}catch(B){bt(a,a.return,B)}if(a===o){re=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,re=O;break e}re=a.return}}if($e=s,ro(),ps&&typeof ps.onPostCommitFiberRoot=="function")try{ps.onPostCommitFiberRoot(hf,t)}catch{}r=!0}return r}finally{Ge=n,br.transition=e}}return!1}function Rw(t,e,n){e=ll(n,e),e=BT(t,e,1),t=zi(t,e,1),e=In(),t!==null&&(xc(t,1,e),$n(t,e))}function bt(t,e,n){if(t.tag===3)Rw(t,t,n);else for(;e!==null;){if(e.tag===3){Rw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qi===null||!qi.has(r))){t=ll(n,t),t=zT(e,t,1),e=zi(e,t,1),t=In(),e!==null&&(xc(e,1,t),$n(e,t));break}}e=e.return}}function sP(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=In(),t.pingedLanes|=t.suspendedLanes&n,Ht===t&&(Jt&n)===n&&(Vt===4||Vt===3&&(Jt&130023424)===Jt&&500>At()-L_?Mo(t,0):D_|=n),$n(t,e)}function uI(t,e){e===0&&(t.mode&1?(e=Id,Id<<=1,!(Id&130023424)&&(Id=4194304)):e=1);var n=In();t=Js(t,e),t!==null&&(xc(t,e,n),$n(t,n))}function iP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uI(t,n)}function oP(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),uI(t,n)}var cI;cI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vn.current)Mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mn=!1,KR(t,e,n);Mn=!!(t.flags&131072)}else Mn=!1,pt&&e.flags&1048576&&pT(e,Ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nh(t,e),t=e.pendingProps;var s=sl(e,hn.current);Ja(e,n),s=C_(null,e,r,t,s,n);var i=R_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(r)?(i=!0,Ah(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,I_(e),s.updater=yf,e.stateNode=s,s._reactInternals=e,Yg(e,r,t,n),e=em(null,e,r,!0,i,n)):(e.tag=0,pt&&i&&__(e),Tn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lP(r),t=Br(r,t),s){case 0:e=Zg(null,e,r,t,n);break e;case 1:e=ww(null,e,r,t,n);break e;case 11:e=vw(null,e,r,t,n);break e;case 14:e=yw(null,e,r,Br(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Br(r,s),Zg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Br(r,s),ww(t,e,r,s,n);case 3:e:{if(KT(e),t===null)throw Error(J(387));r=e.pendingProps,i=e.memoizedState,s=i.element,wT(t,e),jh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ll(Error(J(423)),e),e=Ew(t,e,r,n,s);break e}else if(r!==s){s=ll(Error(J(424)),e),e=Ew(t,e,r,n,s);break e}else for(Xn=Bi(e.stateNode.containerInfo.firstChild),Zn=e,pt=!0,Wr=null,n=vT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(il(),r===s){e=Ys(t,e,n);break e}Tn(t,e,r,n)}e=e.child}return e;case 5:return ET(e),t===null&&Gg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,zg(r,s)?o=null:i!==null&&zg(r,i)&&(e.flags|=32),WT(t,e),Tn(t,e,o,n),e.child;case 6:return t===null&&Gg(e),null;case 13:return GT(t,e,n);case 4:return S_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ol(e,null,r,n):Tn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Br(r,s),vw(t,e,r,s,n);case 7:return Tn(t,e,e.pendingProps,n),e.child;case 8:return Tn(t,e,e.pendingProps.children,n),e.child;case 12:return Tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ot(Rh,r._currentValue),r._currentValue=o,i!==null)if(Jr(i.value,o)){if(i.children===s.children&&!Vn.current){e=Ys(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Hs(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Qg(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ja(e,n),s=Sr(s),r=r(s),e.flags|=1,Tn(t,e,r,n),e.child;case 14:return r=e.type,s=Br(r,e.pendingProps),s=Br(r.type,s),yw(t,e,r,s,n);case 15:return qT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Br(r,s),nh(t,e),e.tag=1,Fn(r)?(t=!0,Ah(e)):t=!1,Ja(e,n),UT(e,r,s),Yg(e,r,s,n),em(null,e,r,!0,t,n);case 19:return QT(t,e,n);case 22:return HT(t,e,n)}throw Error(J(156,e.tag))};function dI(t,e){return Vb(t,e)}function aP(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(t,e,n,r){return new aP(t,e,n,r)}function $_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lP(t){if(typeof t=="function")return $_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===i_)return 11;if(t===o_)return 14}return 2}function Wi(t,e){var n=t.alternate;return n===null?(n=Er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ih(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")$_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Na:return Vo(n.children,s,i,e);case s_:o=8,s|=8;break;case Eg:return t=Er(12,n,e,s|2),t.elementType=Eg,t.lanes=i,t;case bg:return t=Er(13,n,e,s),t.elementType=bg,t.lanes=i,t;case Tg:return t=Er(19,n,e,s),t.elementType=Tg,t.lanes=i,t;case Eb:return bf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yb:o=10;break e;case wb:o=9;break e;case i_:o=11;break e;case o_:o=14;break e;case Si:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Er(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Vo(t,e,n,r){return t=Er(7,t,r,e),t.lanes=n,t}function bf(t,e,n,r){return t=Er(22,t,r,e),t.elementType=Eb,t.lanes=n,t.stateNode={isHidden:!1},t}function Kp(t,e,n){return t=Er(6,t,null,e),t.lanes=n,t}function Gp(t,e,n){return e=Er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uP(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kp(0),this.expirationTimes=kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function U_(t,e,n,r,s,i,o,a,l){return t=new uP(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Er(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},I_(i),t}function cP(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hI(t){if(!t)return Yi;t=t._reactInternals;e:{if(sa(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Fn(n))return hT(t,n,e)}return e}function fI(t,e,n,r,s,i,o,a,l){return t=U_(n,r,!0,t,s,i,o,a,l),t.context=hI(null),n=t.current,r=In(),s=Hi(n),i=Hs(r,s),i.callback=e??null,zi(n,i,s),t.current.lanes=s,xc(t,s,r),$n(t,r),t}function Tf(t,e,n,r){var s=e.current,i=In(),o=Hi(s);return n=hI(n),e.context===null?e.context=n:e.pendingContext=n,e=Hs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zi(s,e,o),t!==null&&(Qr(t,s,o,i),Zd(t,s,o)),o}function $h(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Pw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function B_(t,e){Pw(t,e),(t=t.alternate)&&Pw(t,e)}function dP(){return null}var pI=typeof reportError=="function"?reportError:function(t){console.error(t)};function z_(t){this._internalRoot=t}If.prototype.render=z_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));Tf(t,e,null,null)};If.prototype.unmount=z_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ho(function(){Tf(null,t,null,null)}),e[Qs]=null}};function If(t){this._internalRoot=t}If.prototype.unstable_scheduleHydration=function(t){if(t){var e=Hb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ki.length&&e!==0&&e<ki[n].priority;n++);ki.splice(n,0,t),n===0&&Kb(t)}};function q_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function jw(){}function hP(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=$h(o);i.call(c)}}var o=fI(e,r,t,0,null,!1,!1,"",jw);return t._reactRootContainer=o,t[Qs]=o.current,tc(t.nodeType===8?t.parentNode:t),Ho(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=$h(l);a.call(c)}}var l=U_(t,0,!1,null,null,!1,!1,"",jw);return t._reactRootContainer=l,t[Qs]=l.current,tc(t.nodeType===8?t.parentNode:t),Ho(function(){Tf(e,l,n,r)}),l}function xf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=$h(o);a.call(l)}}Tf(e,o,t,s)}else o=hP(n,e,t,s,r);return $h(o)}zb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_u(e.pendingLanes);n!==0&&(u_(e,n|1),$n(e,At()),!($e&6)&&(ul=At()+500,ro()))}break;case 13:Ho(function(){var r=Js(t,1);if(r!==null){var s=In();Qr(r,t,1,s)}}),B_(t,1)}};c_=function(t){if(t.tag===13){var e=Js(t,134217728);if(e!==null){var n=In();Qr(e,t,134217728,n)}B_(t,134217728)}};qb=function(t){if(t.tag===13){var e=Hi(t),n=Js(t,e);if(n!==null){var r=In();Qr(n,t,e,r)}B_(t,e)}};Hb=function(){return Ge};Wb=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Ng=function(t,e,n){switch(e){case"input":if(xg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=mf(r);if(!s)throw Error(J(90));Tb(r),xg(r,s)}}}break;case"textarea":Sb(t,n);break;case"select":e=n.value,e!=null&&Wa(t,!!n.multiple,e,!1)}};jb=M_;Nb=Ho;var fP={usingClientEntryPoint:!1,Events:[kc,Ma,mf,Rb,Pb,M_]},lu={findFiberByHostInstance:Ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pP={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lb(t),t===null?null:t.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||dP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{hf=Dd.inject(pP),ps=Dd}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fP;or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q_(e))throw Error(J(200));return cP(t,e,null,n)};or.createRoot=function(t,e){if(!q_(t))throw Error(J(299));var n=!1,r="",s=pI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=U_(t,1,!1,null,null,n,!1,r,s),t[Qs]=e.current,tc(t.nodeType===8?t.parentNode:t),new z_(e)};or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=Lb(e),t=t===null?null:t.stateNode,t};or.flushSync=function(t){return Ho(t)};or.hydrate=function(t,e,n){if(!Sf(e))throw Error(J(200));return xf(null,t,e,!0,n)};or.hydrateRoot=function(t,e,n){if(!q_(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=pI;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fI(e,null,t,1,n??null,s,!1,i,o),t[Qs]=e.current,tc(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new If(e)};or.render=function(t,e,n){if(!Sf(e))throw Error(J(200));return xf(null,t,e,!1,n)};or.unmountComponentAtNode=function(t){if(!Sf(t))throw Error(J(40));return t._reactRootContainer?(Ho(function(){xf(null,null,t,!1,function(){t._reactRootContainer=null,t[Qs]=null})}),!0):!1};or.unstable_batchedUpdates=M_;or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sf(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return xf(t,e,n,!1,r)};or.version="18.3.1-next-f1338f8080-20240426";function gI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gI)}catch(t){console.error(t)}}gI(),gb.exports=or;var H_=gb.exports;const gP=nb(H_),mP=tb({__proto__:null,default:gP},[H_]);var Nw=H_;yg.createRoot=Nw.createRoot,yg.hydrateRoot=Nw.hydrateRoot;var Ow={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_P=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},_I={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,d=i>>2,p=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(m=64)),r.push(n[d],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_P(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||p==null)throw new vP;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),p!==64){const I=c<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yP=function(t){const e=mI(t);return _I.encodeByteArray(e,!0)},Uh=function(t){return yP(t).replace(/\./g,"")},vI=function(t){try{return _I.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=()=>wP().__FIREBASE_DEFAULTS__,bP=()=>{if(typeof process>"u"||typeof Ow>"u")return;const t=Ow.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vI(t[1]);return e&&JSON.parse(e)},Af=()=>{try{return EP()||bP()||TP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yI=t=>{var e,n;return(n=(e=Af())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},IP=t=>{const e=yI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wI=()=>{var t;return(t=Af())===null||t===void 0?void 0:t.config},EI=t=>{var e;return(e=Af())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SP=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Uh(JSON.stringify(n)),Uh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fn())}function kP(){var t;const e=(t=Af())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function CP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function PP(){const t=fn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jP(){return!kP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TI(){try{return typeof indexedDB=="object"}catch{return!1}}function II(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function NP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP="FirebaseError";class ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=OP,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ia.prototype.create)}}class ia{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?DP(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ts(s,a,r)}}function DP(t,e){return t.replace(LP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const LP=/\{\$([^}]+)}/g;function MP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Dw(i)&&Dw(o)){if(!cc(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Dw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function wu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function VP(t,e){const n=new FP(t,e);return n.subscribe.bind(n)}class FP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");$P(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Qp),s.error===void 0&&(s.error=Qp),s.complete===void 0&&(s.complete=Qp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $P(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UP=1e3,BP=2,zP=4*60*60*1e3,qP=.5;function Lw(t,e=UP,n=BP){const r=e*Math.pow(n,t),s=Math.round(qP*r*(Math.random()-.5)*2);return Math.min(zP,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KP(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WP(t){return t===xo?void 0:t}function KP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new HP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const QP={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},JP=Le.INFO,YP={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},XP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=YP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kf{constructor(e){this.name=e,this._logLevel=JP,this._logHandler=XP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const ZP=(t,e)=>e.some(n=>t instanceof n);let Mw,Vw;function ej(){return Mw||(Mw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tj(){return Vw||(Vw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SI=new WeakMap,hm=new WeakMap,xI=new WeakMap,Jp=new WeakMap,W_=new WeakMap;function nj(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ki(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&SI.set(n,t)}).catch(()=>{}),W_.set(e,t),e}function rj(t){if(hm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});hm.set(t,e)}let fm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||xI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ki(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sj(t){fm=t(fm)}function ij(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yp(this),e,...n);return xI.set(r,e.sort?e.sort():[e]),Ki(r)}:tj().includes(t)?function(...e){return t.apply(Yp(this),e),Ki(SI.get(this))}:function(...e){return Ki(t.apply(Yp(this),e))}}function oj(t){return typeof t=="function"?ij(t):(t instanceof IDBTransaction&&rj(t),ZP(t,ej())?new Proxy(t,fm):t)}function Ki(t){if(t instanceof IDBRequest)return nj(t);if(Jp.has(t))return Jp.get(t);const e=oj(t);return e!==t&&(Jp.set(t,e),W_.set(e,t)),e}const Yp=t=>W_.get(t);function AI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ki(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ki(o.result),l.oldVersion,l.newVersion,Ki(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const aj=["get","getKey","getAll","getAllKeys","count"],lj=["put","add","delete","clear"],Xp=new Map;function Fw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=lj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||aj.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return Xp.set(e,i),i}sj(t=>({...t,get:(e,n,r)=>Fw(e,n)||t.get(e,n,r),has:(e,n)=>!!Fw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(cj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function cj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pm="@firebase/app",$w="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new kf("@firebase/app"),dj="@firebase/app-compat",hj="@firebase/analytics-compat",fj="@firebase/analytics",pj="@firebase/app-check-compat",gj="@firebase/app-check",mj="@firebase/auth",_j="@firebase/auth-compat",vj="@firebase/database",yj="@firebase/data-connect",wj="@firebase/database-compat",Ej="@firebase/functions",bj="@firebase/functions-compat",Tj="@firebase/installations",Ij="@firebase/installations-compat",Sj="@firebase/messaging",xj="@firebase/messaging-compat",Aj="@firebase/performance",kj="@firebase/performance-compat",Cj="@firebase/remote-config",Rj="@firebase/remote-config-compat",Pj="@firebase/storage",jj="@firebase/storage-compat",Nj="@firebase/firestore",Oj="@firebase/vertexai-preview",Dj="@firebase/firestore-compat",Lj="firebase",Mj="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="[DEFAULT]",Vj={[pm]:"fire-core",[dj]:"fire-core-compat",[fj]:"fire-analytics",[hj]:"fire-analytics-compat",[gj]:"fire-app-check",[pj]:"fire-app-check-compat",[mj]:"fire-auth",[_j]:"fire-auth-compat",[vj]:"fire-rtdb",[yj]:"fire-data-connect",[wj]:"fire-rtdb-compat",[Ej]:"fire-fn",[bj]:"fire-fn-compat",[Tj]:"fire-iid",[Ij]:"fire-iid-compat",[Sj]:"fire-fcm",[xj]:"fire-fcm-compat",[Aj]:"fire-perf",[kj]:"fire-perf-compat",[Cj]:"fire-rc",[Rj]:"fire-rc-compat",[Pj]:"fire-gcs",[jj]:"fire-gcs-compat",[Nj]:"fire-fst",[Dj]:"fire-fst-compat",[Oj]:"fire-vertex","fire-js":"fire-js",[Lj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new Map,Fj=new Map,mm=new Map;function Uw(t,e){try{t.container.addComponent(e)}catch(n){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ts(t){const e=t.name;if(mm.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;mm.set(e,t);for(const n of Bh.values())Uw(n,t);for(const n of Fj.values())Uw(n,t);return!0}function oa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gi=new ia("app","Firebase",$j);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=Mj;function kI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Gi.create("bad-app-name",{appName:String(s)});if(n||(n=wI()),!n)throw Gi.create("no-options");const i=Bh.get(s);if(i){if(cc(n,i.options)&&cc(r,i.config))return i;throw Gi.create("duplicate-app",{appName:s})}const o=new GP(s);for(const l of mm.values())o.addComponent(l);const a=new Uj(n,r,o);return Bh.set(s,a),a}function K_(t=gm){const e=Bh.get(t);if(!e&&t===gm&&wI())return kI();if(!e)throw Gi.create("no-app",{appName:t});return e}function Tr(t,e,n){var r;let s=(r=Vj[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(a.join(" "));return}Ts(new Yr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="firebase-heartbeat-database",zj=1,dc="firebase-heartbeat-store";let Zp=null;function CI(){return Zp||(Zp=AI(Bj,zj,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(dc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gi.create("idb-open",{originalErrorMessage:t.message})})),Zp}async function qj(t){try{const n=(await CI()).transaction(dc),r=await n.objectStore(dc).get(RI(t));return await n.done,r}catch(e){if(e instanceof ts)Xs.warn(e.message);else{const n=Gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xs.warn(n.message)}}}async function Bw(t,e){try{const r=(await CI()).transaction(dc,"readwrite");await r.objectStore(dc).put(e,RI(t)),await r.done}catch(n){if(n instanceof ts)Xs.warn(n.message);else{const r=Gi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xs.warn(r.message)}}}function RI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=1024,Wj=30*24*60*60*1e3;class Kj{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qj(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=zw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Wj}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zw(),{heartbeatsToSend:r,unsentEntries:s}=Gj(this._heartbeatsCache.heartbeats),i=Uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xs.warn(n),""}}}function zw(){return new Date().toISOString().substring(0,10)}function Gj(t,e=Hj){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),qw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),qw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Qj{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TI()?II().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qj(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function qw(t){return Uh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t){Ts(new Yr("platform-logger",e=>new uj(e),"PRIVATE")),Ts(new Yr("heartbeat",e=>new Kj(e),"PRIVATE")),Tr(pm,$w,t),Tr(pm,$w,"esm2017"),Tr("fire-js","")}Jj("");function G_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function PI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yj=PI,jI=new ia("auth","Firebase",PI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new kf("@firebase/auth");function Xj(t,...e){zh.logLevel<=Le.WARN&&zh.warn(`Auth (${Al}): ${t}`,...e)}function oh(t,...e){zh.logLevel<=Le.ERROR&&zh.error(`Auth (${Al}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,...e){throw Q_(t,...e)}function ms(t,...e){return Q_(t,...e)}function NI(t,e,n){const r=Object.assign(Object.assign({},Yj()),{[e]:n});return new ia("auth","Firebase",r).create(e,{appName:t.name})}function Ws(t){return NI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return jI.create(t,...e)}function ge(t,e,...n){if(!t)throw Q_(e,...n)}function Us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw oh(e),new Error(e)}function Zs(t,e){t||Us(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Zj(){return Hw()==="http:"||Hw()==="https:"}function Hw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Zj()||bI()||"connection"in navigator)?navigator.onLine:!0}function t1(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zs(n>e,"Short delay should be less than long delay!"),this.isMobile=AP()||RP()}get(){return e1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(t,e){Zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Pc(3e4,6e4);function so(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function io(t,e,n,r,s={}){return DI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Rc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},i);return CP()||(c.referrerPolicy="no-referrer"),OI.fetch()(LI(t,t.config.apiHost,n,a),c)})}async function DI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},n1),e);try{const s=new i1(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ld(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ld(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ld(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw NI(t,d,c);Xr(t,d)}}catch(s){if(s instanceof ts)throw s;Xr(t,"network-request-failed",{message:String(s)})}}async function jc(t,e,n,r,s={}){const i=await io(t,e,n,r,s);return"mfaPendingCredential"in i&&Xr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function LI(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?J_(t.config,s):`${t.config.apiScheme}://${s}`}function s1(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class i1{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ms(this.auth,"network-request-failed")),r1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ld(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ms(t,e,r);return s.customData._tokenResponse=n,s}function Ww(t){return t!==void 0&&t.enterprise!==void 0}class o1{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return s1(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function a1(t,e){return io(t,"GET","/v2/recaptchaConfig",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l1(t,e){return io(t,"POST","/v1/accounts:delete",e)}async function MI(t,e){return io(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function u1(t,e=!1){const n=Zt(t),r=await n.getIdToken(e),s=Y_(r);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Lu(eg(s.auth_time)),issuedAtTime:Lu(eg(s.iat)),expirationTime:Lu(eg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function eg(t){return Number(t)*1e3}function Y_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return oh("JWT malformed, contained fewer than 3 sections"),null;try{const s=vI(n);return s?JSON.parse(s):(oh("Failed to decode base64 JWT payload"),null)}catch(s){return oh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Kw(t){const e=Y_(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ts&&c1(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function c1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lu(this.lastLoginAt),this.creationTime=Lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await hc(t,MI(n,{idToken:r}));ge(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?VI(i.providerUserInfo):[],a=f1(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new vm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function h1(t){const e=Zt(t);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function f1(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function VI(t){return t.map(e=>{var{providerId:n}=e,r=G_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(t,e){const n=await DI(t,{},async()=>{const r=Rc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=LI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",OI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function g1(t,e){return io(t,"POST","/v2/accounts:revokeToken",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Kw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=Kw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await p1(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Xa;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ge(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return Us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=G_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new d1(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await hc(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return u1(this,e)}reload(){return h1(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fs(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await hc(this,l1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,j=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,A=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:O,isAnonymous:B,providerData:R,stsTokenManager:k}=n;ge(T&&k,e,"internal-error");const w=Xa.fromJSON(this.name,k);ge(typeof T=="string",e,"internal-error"),bi(p,e.name),bi(m,e.name),ge(typeof O=="boolean",e,"internal-error"),ge(typeof B=="boolean",e,"internal-error"),bi(y,e.name),bi(I,e.name),bi(x,e.name),bi(j,e.name),bi(A,e.name),bi(E,e.name);const S=new Bs({uid:T,auth:e,email:m,emailVerified:O,displayName:p,isAnonymous:B,photoURL:I,phoneNumber:y,tenantId:x,stsTokenManager:w,createdAt:A,lastLoginAt:E});return R&&Array.isArray(R)&&(S.providerData=R.map(C=>Object.assign({},C))),j&&(S._redirectEventId=j),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Xa;s.updateFromServerResponse(n);const i=new Bs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await qh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?VI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Xa;a.updateFromIdToken(r);const l=new Bs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw=new Map;function zs(t){Zs(t instanceof Function,"Expected a class definition");let e=Gw.get(t);return e?(Zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Gw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}FI.type="NONE";const Qw=FI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t,e,n){return`firebase:${t}:${e}:${n}`}class Za{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ah(this.userKey,s.apiKey,i),this.fullPersistenceKey=ah("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Za(zs(Qw),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||zs(Qw);const o=ah(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const p=Bs._fromJSON(e,d);c!==i&&(a=p),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Za(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Za(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($I(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HI(e))return"Blackberry";if(WI(e))return"Webos";if(UI(e))return"Safari";if((e.includes("chrome/")||BI(e))&&!e.includes("edge/"))return"Chrome";if(qI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $I(t=fn()){return/firefox\//i.test(t)}function UI(t=fn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BI(t=fn()){return/crios\//i.test(t)}function zI(t=fn()){return/iemobile/i.test(t)}function qI(t=fn()){return/android/i.test(t)}function HI(t=fn()){return/blackberry/i.test(t)}function WI(t=fn()){return/webos/i.test(t)}function X_(t=fn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function m1(t=fn()){var e;return X_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _1(){return PP()&&document.documentMode===10}function KI(t=fn()){return X_(t)||qI(t)||WI(t)||HI(t)||/windows phone/i.test(t)||zI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GI(t,e=[]){let n;switch(t){case"Browser":n=Jw(fn());break;case"Worker":n=`${Jw(fn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Al}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y1(t,e={}){return io(t,"GET","/v2/passwordPolicy",so(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w1=6;class E1{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:w1,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yw(this),this.idTokenSubscription=new Yw(this),this.beforeStateQueue=new v1(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await MI(this,{idToken:e}),r=await Bs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=t1()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fs(this.app))return Promise.reject(Ws(this));const n=e?Zt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fs(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fs(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await y1(this),n=new E1(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ia("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await g1(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zs(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[zs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Xj(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function aa(t){return Zt(t)}class Yw{constructor(e){this.auth=e,this.observer=null,this.addObserver=VP(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function T1(t){Cf=t}function QI(t){return Cf.loadJS(t)}function I1(){return Cf.recaptchaEnterpriseScript}function S1(){return Cf.gapiScript}function x1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const A1="recaptcha-enterprise",k1="NO_RECAPTCHA";class C1{constructor(e){this.type=A1,this.auth=aa(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{a1(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new o1(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;Ww(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(k1)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&Ww(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=I1();l.length!==0&&(l+=a),QI(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Xw(t,e,n,r=!1){const s=new C1(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ym(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Xw(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Xw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t,e){const n=oa(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(cc(i,e??{}))return s;Xr(s,"already-initialized")}return n.initialize({options:e})}function P1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function j1(t,e,n){const r=aa(t);ge(r._canInitEmulator,r,"emulator-config-failed"),ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=JI(e),{host:o,port:a}=N1(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),O1()}function JI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function N1(t){const e=JI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Zw(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Zw(o)}}}function Zw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function O1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Us("not implemented")}_getIdTokenResponse(e){return Us("not implemented")}_linkToIdToken(e,n){return Us("not implemented")}_getReauthenticationResolver(e){return Us("not implemented")}}async function D1(t,e){return io(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L1(t,e){return jc(t,"POST","/v1/accounts:signInWithPassword",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M1(t,e){return jc(t,"POST","/v1/accounts:signInWithEmailLink",so(t,e))}async function V1(t,e){return jc(t,"POST","/v1/accounts:signInWithEmailLink",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Z_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new fc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,n,"signInWithPassword",L1);case"emailLink":return M1(e,{email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,r,"signUpPassword",D1);case"emailLink":return V1(e,{idToken:n,email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t,e){return jc(t,"POST","/v1/accounts:signInWithIdp",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1="http://localhost";class Wo extends Z_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Wo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=G_(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Wo(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return el(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,el(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,el(e,n)}buildRequest(){const e={requestUri:F1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Rc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function U1(t){const e=yu(wu(t)).link,n=e?yu(wu(e)).deep_link_id:null,r=yu(wu(t)).deep_link_id;return(r?yu(wu(r)).link:null)||r||n||e||t}class ev{constructor(e){var n,r,s,i,o,a;const l=yu(wu(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=$1((s=l.mode)!==null&&s!==void 0?s:null);ge(c&&d&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=U1(e);try{return new ev(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.providerId=kl.PROVIDER_ID}static credential(e,n){return fc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ev.parseLink(n);return ge(r,"argument-error"),fc._fromEmailAndCode(e,r.code,r.tenantId)}}kl.PROVIDER_ID="password";kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends YI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends Nc{constructor(){super("facebook.com")}static credential(e){return Wo._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ri.credential(e.oauthAccessToken)}catch{return null}}}Ri.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ri.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends Nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Wo._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Pi.credential(n,r)}catch{return null}}}Pi.GOOGLE_SIGN_IN_METHOD="google.com";Pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends Nc{constructor(){super("github.com")}static credential(e){return Wo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.GITHUB_SIGN_IN_METHOD="github.com";ji.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni extends Nc{constructor(){super("twitter.com")}static credential(e,n){return Wo._fromParams({providerId:Ni.PROVIDER_ID,signInMethod:Ni.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ni.credentialFromTaggedObject(e)}static credentialFromError(e){return Ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ni.credential(n,r)}catch{return null}}}Ni.TWITTER_SIGN_IN_METHOD="twitter.com";Ni.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B1(t,e){return jc(t,"POST","/v1/accounts:signUp",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Bs._fromIdTokenResponse(e,r,s),o=e0(r);return new Ko({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=e0(r);return new Ko({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function e0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends ts{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Hh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Hh(e,n,r,s)}}function XI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Hh._fromErrorAndOperation(t,i,e,r):i})}async function z1(t,e,n=!1){const r=await hc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ko._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q1(t,e,n=!1){const{auth:r}=t;if(fs(r.app))return Promise.reject(Ws(r));const s="reauthenticate";try{const i=await hc(t,XI(r,s,e,t),n);ge(i.idToken,r,"internal-error");const o=Y_(i.idToken);ge(o,r,"internal-error");const{sub:a}=o;return ge(t.uid===a,r,"user-mismatch"),Ko._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZI(t,e,n=!1){if(fs(t.app))return Promise.reject(Ws(t));const r="signIn",s=await XI(t,r,e),i=await Ko._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function H1(t,e){return ZI(aa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eS(t){const e=aa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function W1(t,e,n){if(fs(t.app))return Promise.reject(Ws(t));const r=aa(t),o=await ym(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",B1).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&eS(t),l}),a=await Ko._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function K1(t,e,n){return fs(t.app)?Promise.reject(Ws(t)):H1(Zt(t),kl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eS(t),r})}function G1(t,e,n,r){return Zt(t).onIdTokenChanged(e,n,r)}function Q1(t,e,n){return Zt(t).beforeAuthStateChanged(e,n)}function tS(t,e,n,r){return Zt(t).onAuthStateChanged(e,n,r)}const Wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1=1e3,Y1=10;class rS extends nS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=KI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);_1()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Y1):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},J1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rS.type="LOCAL";const X1=rS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS extends nS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sS.type="SESSION";const iS=sS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Rf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await Z1(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=tv("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(){return window}function tN(t){_s().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(){return typeof _s().WorkerGlobalScope<"u"&&typeof _s().importScripts=="function"}async function nN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function sN(){return oS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="firebaseLocalStorageDb",iN=1,Kh="firebaseLocalStorage",lS="fbase_key";class Oc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pf(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function oN(){const t=indexedDB.deleteDatabase(aS);return new Oc(t).toPromise()}function wm(){const t=indexedDB.open(aS,iN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kh,{keyPath:lS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kh)?e(r):(r.close(),await oN(),e(await wm()))})})}async function t0(t,e,n){const r=Pf(t,!0).put({[lS]:e,value:n});return new Oc(r).toPromise()}async function aN(t,e){const n=Pf(t,!1).get(e),r=await new Oc(n).toPromise();return r===void 0?null:r.value}function n0(t,e){const n=Pf(t,!0).delete(e);return new Oc(n).toPromise()}const lN=800,uN=3;class uS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rf._getInstance(sN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await nN(),!this.activeServiceWorker)return;this.sender=new eN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wm();return await t0(e,Wh,"1"),await n0(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>t0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>aN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>n0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Pf(s,!1).getAll();return new Oc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uS.type="LOCAL";const cN=uS;new Pc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t,e){return e?zs(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv extends Z_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,n){return el(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hN(t){return ZI(t.auth,new nv(t),t.bypassAuthState)}function fN(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),q1(n,new nv(t),t.bypassAuthState)}async function pN(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),z1(n,new nv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hN;case"linkViaPopup":case"linkViaRedirect":return pN;case"reauthViaPopup":case"reauthViaRedirect":return fN;default:Xr(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=new Pc(2e3,1e4);class qa extends cS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=tv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gN.get())};e()}}qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="pendingRedirect",lh=new Map;class _N extends cS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=lh.get(this.auth._key());if(!e){try{const r=await vN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}lh.set(this.auth._key(),e)}return this.bypassAuthState||lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vN(t,e){const n=EN(e),r=wN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function yN(t,e){lh.set(t._key(),e)}function wN(t){return zs(t._redirectPersistence)}function EN(t){return ah(mN,t.config.apiKey,t.name)}async function bN(t,e,n=!1){if(fs(t.app))return Promise.reject(Ws(t));const r=aa(t),s=dN(r,e),o=await new _N(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN=10*60*1e3;class IN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dS(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ms(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=TN&&this.cachedEventUids.clear(),this.cachedEventUids.has(r0(e))}saveEventToCache(e){this.cachedEventUids.add(r0(e)),this.lastProcessedEventTime=Date.now()}}function r0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xN(t,e={}){return io(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,kN=/^https?/;async function CN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await xN(t);for(const n of e)try{if(RN(n))return}catch{}Xr(t,"unauthorized-domain")}function RN(t){const e=_m(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!kN.test(n))return!1;if(AN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=new Pc(3e4,6e4);function s0(){const t=_s().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function jN(t){return new Promise((e,n)=>{var r,s,i;function o(){s0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{s0(),n(ms(t,"network-request-failed"))},timeout:PN.get()})}if(!((s=(r=_s().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=_s().gapi)===null||i===void 0)&&i.load)o();else{const a=x1("iframefcb");return _s()[a]=()=>{gapi.load?o():n(ms(t,"network-request-failed"))},QI(`${S1()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw uh=null,e})}let uh=null;function NN(t){return uh=uh||jN(t),uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=new Pc(5e3,15e3),DN="__/auth/iframe",LN="emulator/auth/iframe",MN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FN(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?J_(e,LN):`https://${t.config.authDomain}/${DN}`,r={apiKey:e.apiKey,appName:t.name,v:Al},s=VN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Rc(r).slice(1)}`}async function $N(t){const e=await NN(t),n=_s().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:FN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:MN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ms(t,"network-request-failed"),a=_s().setTimeout(()=>{i(o)},ON.get());function l(){_s().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BN=500,zN=600,qN="_blank",HN="http://localhost";class i0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WN(t,e,n,r=BN,s=zN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},UN),{width:r.toString(),height:s.toString(),top:i,left:o}),c=fn().toLowerCase();n&&(a=BI(c)?qN:n),$I(c)&&(e=e||HN,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,I])=>`${m}${y}=${I},`,"");if(m1(c)&&a!=="_self")return KN(e||"",a),new i0(null);const p=window.open(e||"",a,d);ge(p,t,"popup-blocked");try{p.focus()}catch{}return new i0(p)}function KN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN="__/auth/handler",QN="emulator/auth/handler",JN=encodeURIComponent("fac");async function o0(t,e,n,r,s,i){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Al,eventId:s};if(e instanceof YI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",MP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof Nc){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${JN}=${encodeURIComponent(l)}`:"";return`${YN(t)}?${Rc(a).slice(1)}${c}`}function YN({config:t}){return t.emulator?J_(t,QN):`https://${t.authDomain}/${GN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="webStorageSupport";class XN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=iS,this._completeRedirectFn=bN,this._overrideRedirectResult=yN}async _openPopup(e,n,r,s){var i;Zs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await o0(e,n,r,_m(),s);return WN(e,o,tv())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await o0(e,n,r,_m(),s);return tN(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Zs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $N(e),r=new IN(e);return n.register("authEvent",s=>(ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tg,{type:tg},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[tg];o!==void 0&&n(!!o),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return KI()||UI()||X_()}}const ZN=XN;var a0="@firebase/auth",l0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nO(t){Ts(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GI(t)},c=new b1(r,s,i,l);return P1(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ts(new Yr("auth-internal",e=>{const n=aa(e.getProvider("auth").getImmediate());return(r=>new eO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(a0,l0,tO(t)),Tr(a0,l0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=5*60,sO=EI("authIdTokenMaxAge")||rO;let u0=null;const iO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>sO)return;const s=n==null?void 0:n.token;u0!==s&&(u0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function oO(t=K_()){const e=oa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=R1(t,{popupRedirectResolver:ZN,persistence:[cN,X1,iS]}),r=EI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=iO(i.toString());Q1(n,o,()=>o(n.currentUser)),G1(n,a=>o(a))}}const s=yI("auth");return s&&j1(n,`http://${s}`),n}function aO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}T1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ms("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",aO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nO("Browser");var lO="firebase",uO="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(lO,uO,"app");var c0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fo,hS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function S(){}S.prototype=w.prototype,k.D=w.prototype,k.prototype=new S,k.prototype.constructor=k,k.C=function(C,N,V){for(var P=Array(arguments.length-2),me=2;me<arguments.length;me++)P[me-2]=arguments[me];return w.prototype[N].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,w,S){S||(S=0);var C=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)C[N]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(N=0;16>N;++N)C[N]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=k.g[0],S=k.g[1],N=k.g[2];var V=k.g[3],P=w+(V^S&(N^V))+C[0]+3614090360&4294967295;w=S+(P<<7&4294967295|P>>>25),P=V+(N^w&(S^N))+C[1]+3905402710&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(S^V&(w^S))+C[2]+606105819&4294967295,N=V+(P<<17&4294967295|P>>>15),P=S+(w^N&(V^w))+C[3]+3250441966&4294967295,S=N+(P<<22&4294967295|P>>>10),P=w+(V^S&(N^V))+C[4]+4118548399&4294967295,w=S+(P<<7&4294967295|P>>>25),P=V+(N^w&(S^N))+C[5]+1200080426&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(S^V&(w^S))+C[6]+2821735955&4294967295,N=V+(P<<17&4294967295|P>>>15),P=S+(w^N&(V^w))+C[7]+4249261313&4294967295,S=N+(P<<22&4294967295|P>>>10),P=w+(V^S&(N^V))+C[8]+1770035416&4294967295,w=S+(P<<7&4294967295|P>>>25),P=V+(N^w&(S^N))+C[9]+2336552879&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(S^V&(w^S))+C[10]+4294925233&4294967295,N=V+(P<<17&4294967295|P>>>15),P=S+(w^N&(V^w))+C[11]+2304563134&4294967295,S=N+(P<<22&4294967295|P>>>10),P=w+(V^S&(N^V))+C[12]+1804603682&4294967295,w=S+(P<<7&4294967295|P>>>25),P=V+(N^w&(S^N))+C[13]+4254626195&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(S^V&(w^S))+C[14]+2792965006&4294967295,N=V+(P<<17&4294967295|P>>>15),P=S+(w^N&(V^w))+C[15]+1236535329&4294967295,S=N+(P<<22&4294967295|P>>>10),P=w+(N^V&(S^N))+C[1]+4129170786&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^N&(w^S))+C[6]+3225465664&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^S&(V^w))+C[11]+643717713&4294967295,N=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(N^V))+C[0]+3921069994&4294967295,S=N+(P<<20&4294967295|P>>>12),P=w+(N^V&(S^N))+C[5]+3593408605&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^N&(w^S))+C[10]+38016083&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^S&(V^w))+C[15]+3634488961&4294967295,N=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(N^V))+C[4]+3889429448&4294967295,S=N+(P<<20&4294967295|P>>>12),P=w+(N^V&(S^N))+C[9]+568446438&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^N&(w^S))+C[14]+3275163606&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^S&(V^w))+C[3]+4107603335&4294967295,N=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(N^V))+C[8]+1163531501&4294967295,S=N+(P<<20&4294967295|P>>>12),P=w+(N^V&(S^N))+C[13]+2850285829&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^N&(w^S))+C[2]+4243563512&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^S&(V^w))+C[7]+1735328473&4294967295,N=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(N^V))+C[12]+2368359562&4294967295,S=N+(P<<20&4294967295|P>>>12),P=w+(S^N^V)+C[5]+4294588738&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^N)+C[8]+2272392833&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^S)+C[11]+1839030562&4294967295,N=V+(P<<16&4294967295|P>>>16),P=S+(N^V^w)+C[14]+4259657740&4294967295,S=N+(P<<23&4294967295|P>>>9),P=w+(S^N^V)+C[1]+2763975236&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^N)+C[4]+1272893353&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^S)+C[7]+4139469664&4294967295,N=V+(P<<16&4294967295|P>>>16),P=S+(N^V^w)+C[10]+3200236656&4294967295,S=N+(P<<23&4294967295|P>>>9),P=w+(S^N^V)+C[13]+681279174&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^N)+C[0]+3936430074&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^S)+C[3]+3572445317&4294967295,N=V+(P<<16&4294967295|P>>>16),P=S+(N^V^w)+C[6]+76029189&4294967295,S=N+(P<<23&4294967295|P>>>9),P=w+(S^N^V)+C[9]+3654602809&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^N)+C[12]+3873151461&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^S)+C[15]+530742520&4294967295,N=V+(P<<16&4294967295|P>>>16),P=S+(N^V^w)+C[2]+3299628645&4294967295,S=N+(P<<23&4294967295|P>>>9),P=w+(N^(S|~V))+C[0]+4096336452&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~N))+C[7]+1126891415&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~S))+C[14]+2878612391&4294967295,N=V+(P<<15&4294967295|P>>>17),P=S+(V^(N|~w))+C[5]+4237533241&4294967295,S=N+(P<<21&4294967295|P>>>11),P=w+(N^(S|~V))+C[12]+1700485571&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~N))+C[3]+2399980690&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~S))+C[10]+4293915773&4294967295,N=V+(P<<15&4294967295|P>>>17),P=S+(V^(N|~w))+C[1]+2240044497&4294967295,S=N+(P<<21&4294967295|P>>>11),P=w+(N^(S|~V))+C[8]+1873313359&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~N))+C[15]+4264355552&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~S))+C[6]+2734768916&4294967295,N=V+(P<<15&4294967295|P>>>17),P=S+(V^(N|~w))+C[13]+1309151649&4294967295,S=N+(P<<21&4294967295|P>>>11),P=w+(N^(S|~V))+C[4]+4149444226&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~N))+C[11]+3174756917&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~S))+C[2]+718787259&4294967295,N=V+(P<<15&4294967295|P>>>17),P=S+(V^(N|~w))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+V&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var S=w-this.blockSize,C=this.B,N=this.h,V=0;V<w;){if(N==0)for(;V<=S;)s(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<w;)if(C[N++]=k.charCodeAt(V++),N==this.blockSize){s(this,C),N=0;break}}else for(;V<w;)if(C[N++]=k[V++],N==this.blockSize){s(this,C),N=0;break}}this.h=N,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var S=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=S&255,S/=256;for(this.u(k),k=Array(16),w=S=0;4>w;++w)for(var C=0;32>C;C+=8)k[S++]=this.g[w]>>>C&255;return k};function i(k,w){var S=a;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=w(k)}function o(k,w){this.h=w;for(var S=[],C=!0,N=k.length-1;0<=N;N--){var V=k[N]|0;C&&V==w||(S[N]=V,C=!1)}this.g=S}var a={};function l(k){return-128<=k&&128>k?i(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return j(c(-k));for(var w=[],S=1,C=0;k>=S;C++)w[C]=k/S|0,S*=4294967296;return new o(w,0)}function d(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return j(d(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=c(Math.pow(w,8)),C=p,N=0;N<k.length;N+=8){var V=Math.min(8,k.length-N),P=parseInt(k.substring(N,N+V),w);8>V?(V=c(Math.pow(w,V)),C=C.j(V).add(c(P))):(C=C.j(S),C=C.add(c(P)))}return C}var p=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-j(this).m();for(var k=0,w=1,S=0;S<this.g.length;S++){var C=this.i(S);k+=(0<=C?C:4294967296+C)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(I(this))return"0";if(x(this))return"-"+j(this).toString(k);for(var w=c(Math.pow(k,6)),S=this,C="";;){var N=O(S,w).g;S=A(S,N.j(w));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(k);if(S=N,I(S))return V+C;for(;6>V.length;)V="0"+V;C=V+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function I(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=A(this,k),x(k)?-1:I(k)?0:1};function j(k){for(var w=k.g.length,S=[],C=0;C<w;C++)S[C]=~k.g[C];return new o(S,~k.h).add(m)}t.abs=function(){return x(this)?j(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0,N=0;N<=w;N++){var V=C+(this.i(N)&65535)+(k.i(N)&65535),P=(V>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);C=P>>>16,V&=65535,P&=65535,S[N]=P<<16|V}return new o(S,S[S.length-1]&-2147483648?-1:0)};function A(k,w){return k.add(j(w))}t.j=function(k){if(I(this)||I(k))return p;if(x(this))return x(k)?j(this).j(j(k)):j(j(this).j(k));if(x(k))return j(this.j(j(k)));if(0>this.l(y)&&0>k.l(y))return c(this.m()*k.m());for(var w=this.g.length+k.g.length,S=[],C=0;C<2*w;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(var N=0;N<k.g.length;N++){var V=this.i(C)>>>16,P=this.i(C)&65535,me=k.i(N)>>>16,Ye=k.i(N)&65535;S[2*C+2*N]+=P*Ye,E(S,2*C+2*N),S[2*C+2*N+1]+=V*Ye,E(S,2*C+2*N+1),S[2*C+2*N+1]+=P*me,E(S,2*C+2*N+1),S[2*C+2*N+2]+=V*me,E(S,2*C+2*N+2)}for(C=0;C<w;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=w;C<2*w;C++)S[C]=0;return new o(S,0)};function E(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function T(k,w){this.g=k,this.h=w}function O(k,w){if(I(w))throw Error("division by zero");if(I(k))return new T(p,p);if(x(k))return w=O(j(k),w),new T(j(w.g),j(w.h));if(x(w))return w=O(k,j(w)),new T(j(w.g),w.h);if(30<k.g.length){if(x(k)||x(w))throw Error("slowDivide_ only works with positive integers.");for(var S=m,C=w;0>=C.l(k);)S=B(S),C=B(C);var N=R(S,1),V=R(C,1);for(C=R(C,2),S=R(S,2);!I(C);){var P=V.add(C);0>=P.l(k)&&(N=N.add(S),V=P),C=R(C,1),S=R(S,1)}return w=A(k,N.j(w)),new T(N,w)}for(N=p;0<=k.l(w);){for(S=Math.max(1,Math.floor(k.m()/w.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),V=c(S),P=V.j(w);x(P)||0<P.l(k);)S-=C,V=c(S),P=V.j(w);I(V)&&(V=m),N=N.add(V),k=A(k,P)}return new T(N,k)}t.A=function(k){return O(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)&k.i(C);return new o(S,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)|k.i(C);return new o(S,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)^k.i(C);return new o(S,this.h^k.h)};function B(k){for(var w=k.g.length+1,S=[],C=0;C<w;C++)S[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(S,k.h)}function R(k,w){var S=w>>5;w%=32;for(var C=k.g.length-S,N=[],V=0;V<C;V++)N[V]=0<w?k.i(V+S)>>>w|k.i(V+S+1)<<32-w:k.i(V+S);return new o(N,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Fo=o}).apply(typeof c0<"u"?c0:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fS,Eu,pS,ch,Em,gS,mS,_S;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,g,_){return u==Array.prototype||u==Object.prototype||(u[g]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var _=r;u=u.split(".");for(var b=0;b<u.length-1;b++){var U=u[b];if(!(U in _))break e;_=_[U]}u=u[u.length-1],b=_[u],g=g(b),g!=b&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}function i(u,g){u instanceof String&&(u+="");var _=0,b=!1,U={next:function(){if(!b&&_<u.length){var q=_++;return{value:g(q,u[q]),done:!1}}return b=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(u){return u||function(){return i(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var g=typeof u;return g=g!="object"?g:u?Array.isArray(u)?"array":g:"null",g=="array"||g=="object"&&typeof u.length=="number"}function c(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function d(u,g,_){return u.call.apply(u.bind,arguments)}function p(u,g,_){if(!u)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,b),u.apply(g,U)}}return function(){return u.apply(g,arguments)}}function m(u,g,_){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function y(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),u.apply(this,b)}}function I(u,g){function _(){}_.prototype=g.prototype,u.aa=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(b,U,q){for(var Z=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)Z[Me-2]=arguments[Me];return g.prototype[U].apply(b,Z)}}function x(u){const g=u.length;if(0<g){const _=Array(g);for(let b=0;b<g;b++)_[b]=u[b];return _}return[]}function j(u,g){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(l(b)){const U=u.length||0,q=b.length||0;u.length=U+q;for(let Z=0;Z<q;Z++)u[U+Z]=b[Z]}else u.push(b)}}class A{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function E(u){return/^[\s\xa0]*$/.test(u)}function T(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function O(u){return O[" "](u),u}O[" "]=function(){};var B=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function R(u,g,_){for(const b in u)g.call(_,u[b],b,u)}function k(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function w(u){const g={};for(const _ in u)g[_]=u[_];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,g){let _,b;for(let U=1;U<arguments.length;U++){b=arguments[U];for(_ in b)u[_]=b[_];for(let q=0;q<S.length;q++)_=S[q],Object.prototype.hasOwnProperty.call(b,_)&&(u[_]=b[_])}}function N(u){var g=1;u=u.split(":");const _=[];for(;0<g&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function V(u){a.setTimeout(()=>{throw u},0)}function P(){var u=ae;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class me{constructor(){this.h=this.g=null}add(g,_){const b=Ye.get();b.set(g,_),this.h?this.h.next=b:this.g=b,this.h=b}}var Ye=new A(()=>new Xe,u=>u.reset());class Xe{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let we,X=!1,ae=new me,de=()=>{const u=a.Promise.resolve(void 0);we=()=>{u.then(xe)}};var xe=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(_){V(_)}var g=Ye;g.j(u),100>g.h&&(g.h++,u.next=g.g,g.g=u)}X=!1};function be(){this.s=this.s,this.C=this.C}be.prototype.s=!1,be.prototype.ma=function(){this.s||(this.s=!0,this.N())},be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var ze=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};a.addEventListener("test",_,g),a.removeEventListener("test",_,g)}catch{}return u}();function Ke(u,g){if(H.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,b=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget){if(B){e:{try{O(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else _=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ze[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ke.aa.h.call(this)}}I(Ke,H);var Ze={2:"touch",3:"pen",4:"mouse"};Ke.prototype.h=function(){Ke.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),Nt=0;function Ot(u,g,_,b,U){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!b,this.ha=U,this.key=++Nt,this.da=this.fa=!1}function ur(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function se(u){this.src=u,this.g={},this.h=0}se.prototype.add=function(u,g,_,b,U){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var Z=nn(u,g,b,U);return-1<Z?(g=u[Z],_||(g.fa=!1)):(g=new Ot(g,this.src,q,!!b,U),g.fa=_,u.push(g)),g};function rt(u,g){var _=g.type;if(_ in u.g){var b=u.g[_],U=Array.prototype.indexOf.call(b,g,void 0),q;(q=0<=U)&&Array.prototype.splice.call(b,U,1),q&&(ur(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function nn(u,g,_,b){for(var U=0;U<u.length;++U){var q=u[U];if(!q.da&&q.listener==g&&q.capture==!!_&&q.ha==b)return U}return-1}var ns="closure_lm_"+(1e6*Math.random()|0),As={};function Dt(u,g,_,b,U){if(Array.isArray(g)){for(var q=0;q<g.length;q++)Dt(u,g[q],_,b,U);return null}return _=zn(_),u&&u[nt]?u.K(g,_,c(b)?!!b.capture:!1,U):ks(u,g,_,!1,b,U)}function ks(u,g,_,b,U,q){if(!g)throw Error("Invalid event type");var Z=c(U)?!!U.capture:!!U,Me=rs(u);if(Me||(u[ns]=Me=new se(u)),_=Me.add(g,_,b,Z,q),_.proxy)return _;if(b=Ar(),_.proxy=b,b.src=u,b.listener=_,u.addEventListener)ze||(U=Z),U===void 0&&(U=!1),u.addEventListener(g.toString(),b,U);else if(u.attachEvent)u.attachEvent(kr(g.toString()),b);else if(u.addListener&&u.removeListener)u.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ar(){function u(_){return g.call(u.src,u.listener,_)}const g=ui;return u}function Rn(u,g,_,b,U){if(Array.isArray(g))for(var q=0;q<g.length;q++)Rn(u,g[q],_,b,U);else b=c(b)?!!b.capture:!!b,_=zn(_),u&&u[nt]?(u=u.i,g=String(g).toString(),g in u.g&&(q=u.g[g],_=nn(q,_,b,U),-1<_&&(ur(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete u.g[g],u.h--)))):u&&(u=rs(u))&&(g=u.g[g.toString()],u=-1,g&&(u=nn(g,_,b,U)),(_=-1<u?g[u]:null)&&gn(_))}function gn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[nt])rt(g.i,u);else{var _=u.type,b=u.proxy;g.removeEventListener?g.removeEventListener(_,b,u.capture):g.detachEvent?g.detachEvent(kr(_),b):g.addListener&&g.removeListener&&g.removeListener(b),(_=rs(g))?(rt(_,u),_.h==0&&(_.src=null,g[ns]=null)):ur(u)}}}function kr(u){return u in As?As[u]:As[u]="on"+u}function ui(u,g){if(u.da)u=!0;else{g=new Ke(g,this);var _=u.listener,b=u.ha||u.src;u.fa&&gn(u),u=_.call(b,g)}return u}function rs(u){return u=u[ns],u instanceof se?u:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(u){return typeof u=="function"?u:(u[mn]||(u[mn]=function(g){return u.handleEvent(g)}),u[mn])}function ht(){be.call(this),this.i=new se(this),this.M=this,this.F=null}I(ht,be),ht.prototype[nt]=!0,ht.prototype.removeEventListener=function(u,g,_,b){Rn(this,u,g,_,b)};function et(u,g){var _,b=u.F;if(b)for(_=[];b;b=b.F)_.push(b);if(u=u.M,b=g.type||g,typeof g=="string")g=new H(g,u);else if(g instanceof H)g.target=g.target||u;else{var U=g;g=new H(b,u),C(g,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var Z=g.g=_[q];U=at(Z,b,!0,g)&&U}if(Z=g.g=u,U=at(Z,b,!0,g)&&U,U=at(Z,b,!1,g)&&U,_)for(q=0;q<_.length;q++)Z=g.g=_[q],U=at(Z,b,!1,g)&&U}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var u=this.i,g;for(g in u.g){for(var _=u.g[g],b=0;b<_.length;b++)ur(_[b]);delete u.g[g],u.h--}}this.F=null},ht.prototype.K=function(u,g,_,b){return this.i.add(String(u),g,!1,_,b)},ht.prototype.L=function(u,g,_,b){return this.i.add(String(u),g,!0,_,b)};function at(u,g,_,b){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,q=0;q<g.length;++q){var Z=g[q];if(Z&&!Z.da&&Z.capture==_){var Me=Z.listener,St=Z.ha||Z.src;Z.fa&&rt(u.i,Z),U=Me.call(St,b)!==!1&&U}}return U&&!b.defaultPrevented}function _n(u,g,_){if(typeof u=="function")_&&(u=m(u,_));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(u,g||0)}function Cr(u){u.g=_n(()=>{u.g=null,u.i&&(u.i=!1,Cr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class qn extends be{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(u){be.call(this),this.h=u,this.g={}}I(Pn,be);var rn=[];function uo(u){R(u.g,function(g,_){this.g.hasOwnProperty(_)&&gn(g)},u),u.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),uo(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ss=a.JSON.stringify,fa=a.JSON.parse,$l=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function ci(){}ci.prototype.h=null;function Cs(u){return u.h||(u.h=u.i())}function co(){}var Rr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pr(){H.call(this,"d")}I(Pr,H);function cr(){H.call(this,"c")}I(cr,H);var dr={},di=null;function hi(){return di=di||new ht}dr.La="serverreachability";function ho(u){H.call(this,dr.La,u)}I(ho,H);function hr(u){const g=hi();et(g,new ho(g))}dr.STAT_EVENT="statevent";function Rs(u,g){H.call(this,dr.STAT_EVENT,u),this.stat=g}I(Rs,H);function ft(u){const g=hi();et(g,new Rs(g,u))}dr.Ma="timingevent";function is(u,g){H.call(this,dr.Ma,u),this.size=g}I(is,H);function L(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},g)}function $(){this.g=!0}$.prototype.xa=function(){this.g=!1};function z(u,g,_,b,U,q){u.info(function(){if(u.g)if(q)for(var Z="",Me=q.split("&"),St=0;St<Me.length;St++){var Ne=Me[St].split("=");if(1<Ne.length){var $t=Ne[0];Ne=Ne[1];var Ut=$t.split("_");Z=2<=Ut.length&&Ut[1]=="type"?Z+($t+"="+Ne+"&"):Z+($t+"=redacted&")}}else Z=null;else Z=q;return"XMLHTTP REQ ("+b+") [attempt "+U+"]: "+g+`
`+_+`
`+Z})}function W(u,g,_,b,U,q,Z){u.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+U+"]: "+g+`
`+_+`
`+q+" "+Z})}function te(u,g,_,b){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+he(u,_)+(b?" "+b:"")})}function ie(u,g){u.info(function(){return"TIMEOUT: "+g})}$.prototype.info=function(){};function he(u,g){if(!u.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var b=_[u];if(!(2>b.length)){var U=b[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var Z=1;Z<U.length;Z++)U[Z]=""}}}}return ss(_)}catch{return g}}var Y={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ue;function ce(){}I(ce,ci),ce.prototype.g=function(){return new XMLHttpRequest},ce.prototype.i=function(){return{}},ue=new ce;function Ae(u,g,_,b){this.j=u,this.i=g,this.l=_,this.R=b||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ke}function ke(){this.i=null,this.g="",this.h=!1}var Fe={},Te={};function lt(u,g,_){u.L=1,u.v=Ps(gr(g)),u.m=_,u.P=!0,ut(u,null)}function ut(u,g){u.F=Date.now(),Hn(u),u.A=gr(u.v);var _=u.A,b=u.R;Array.isArray(b)||(b=[String(b)]),td(_.i,"t",b),u.C=0,_=u.j.J,u.h=new ke,u.g=Yl(u.j,_?g:null,!u.m),0<u.O&&(u.M=new qn(m(u.Y,u,u.g),u.O)),g=u.U,_=u.g,b=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(rn[0]=U.toString()),U=rn);for(var q=0;q<U.length;q++){var Z=Dt(_,U[q],b||g.handleEvent,!1,g.h||g);if(!Z)break;g.g[Z.key]=Z}g=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,g)):(u.u="GET",u.g.ea(u.A,u.u,null,g)),hr(),z(u.i,u.u,u.A,u.l,u.R,u.m)}Ae.prototype.ca=function(u){u=u.target;const g=this.M;g&&Lr(u)==3?g.j():this.Y(u)},Ae.prototype.Y=function(u){try{if(u==this.g)e:{const Ut=Lr(this.g);var g=this.g.Ba();const yi=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||ad(this.g)))){this.J||Ut!=4||g==7||(g==8||0>=yi?hr(3):hr(2)),pr(this);var _=this.g.Z();this.X=_;t:if(jr(this)){var b=ad(this.g);u="";var U=b.length,q=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),Lt(this);var Z="";break t}this.h.i=new a.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,u+=this.h.i.decode(b[g],{stream:!(q&&g==U-1)});b.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=_==200,W(this.i,this.u,this.A,this.l,this.R,Ut,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Me,St=this.g;if((Me=St.g?St.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(Me)){var Ne=Me;break t}}Ne=null}if(_=Ne)te(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,os(this,_);else{this.o=!1,this.s=3,ft(12),vn(this),Lt(this);break e}}if(this.P){_=!0;let Wt;for(;!this.J&&this.C<Z.length;)if(Wt=fr(this,Z),Wt==Te){Ut==4&&(this.s=4,ft(14),_=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(Wt==Fe){this.s=4,ft(15),te(this.i,this.l,Z,"[Invalid Chunk]"),_=!1;break}else te(this.i,this.l,Wt,null),os(this,Wt);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||Z.length!=0||this.h.h||(this.s=1,ft(16),_=!1),this.o=this.o&&_,!_)te(this.i,this.l,Z,"[Invalid Chunked Response]"),vn(this),Lt(this);else if(0<Z.length&&!this.W){this.W=!0;var $t=this.j;$t.g==this&&$t.ba&&!$t.M&&($t.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Ql($t),$t.M=!0,ft(11))}}else te(this.i,this.l,Z,null),os(this,Z);Ut==4&&vn(this),this.o&&!this.J&&(Ut==4?hd(this.j,this):(this.o=!1,Hn(this)))}else _p(this.g),_==400&&0<Z.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),vn(this),Lt(this)}}}catch{}finally{}};function jr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function fr(u,g){var _=u.C,b=g.indexOf(`
`,_);return b==-1?Te:(_=Number(g.substring(_,b)),isNaN(_)?Fe:(b+=1,b+_>g.length?Te:(g=g.slice(b,b+_),u.C=b+_,g)))}Ae.prototype.cancel=function(){this.J=!0,vn(this)};function Hn(u){u.S=Date.now()+u.I,Nr(u,u.I)}function Nr(u,g){if(u.B!=null)throw Error("WatchDog timer not null");u.B=L(m(u.ba,u),g)}function pr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ae.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(ie(this.i,this.A),this.L!=2&&(hr(),ft(17)),vn(this),this.s=2,Lt(this)):Nr(this,this.S-u)};function Lt(u){u.j.G==0||u.J||hd(u.j,u)}function vn(u){pr(u);var g=u.M;g&&typeof g.ma=="function"&&g.ma(),u.M=null,uo(u.U),u.g&&(g=u.g,u.g=null,g.abort(),g.ma())}function os(u,g){try{var _=u.j;if(_.G!=0&&(_.g==u||qe(_.h,u))){if(!u.K&&qe(_.h,u)&&_.G==3){try{var b=_.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var U=b;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Ea(_),ya(_);else break e;Gl(_),ft(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=L(m(_.Za,_),6e3));if(1>=It(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Mr(_,11)}else if((u.K||_.g==u)&&Ea(_),!E(g))for(U=_.Da.g.parse(g),g=0;g<U.length;g++){let Ne=U[g];if(_.T=Ne[0],Ne=Ne[1],_.G==2)if(Ne[0]=="c"){_.K=Ne[1],_.ia=Ne[2];const $t=Ne[3];$t!=null&&(_.la=$t,_.j.info("VER="+_.la));const Ut=Ne[4];Ut!=null&&(_.Aa=Ut,_.j.info("SVER="+_.Aa));const yi=Ne[5];yi!=null&&typeof yi=="number"&&0<yi&&(b=1.5*yi,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const Wt=u.g;if(Wt){const _r=Wt.g?Wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_r){var q=b.h;q.g||_r.indexOf("spdy")==-1&&_r.indexOf("quic")==-1&&_r.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(yn(q,q.h),q.h=null))}if(b.D){const Xl=Wt.g?Wt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(b.ya=Xl,Qe(b.I,b.D,Xl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var Z=u;if(b.qa=Jl(b,b.J?b.ia:null,b.W),Z.K){fo(b.h,Z);var Me=Z,St=b.L;St&&(Me.I=St),Me.B&&(pr(Me),Hn(Me)),b.g=Z}else cd(b);0<_.i.length&&wa(_)}else Ne[0]!="stop"&&Ne[0]!="close"||Mr(_,7);else _.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Mr(_,7):Kl(_):Ne[0]!="noop"&&_.l&&_.l.ta(Ne),_.v=0)}}hr(4)}catch{}}var Wn=class{constructor(u,g){this.g=u,this.map=g}};function pe(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tt(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function It(u){return u.h?1:u.g?u.g.size:0}function qe(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function yn(u,g){u.g?u.g.add(g):u.h=g}function fo(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}pe.prototype.cancel=function(){if(this.i=pa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function pa(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.D);return g}return x(u.i)}function dp(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var g=[],_=u.length,b=0;b<_;b++)g.push(u[b]);return g}g=[],_=0;for(b in u)g[_++]=u[b];return g}function hp(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var g=[];u=u.length;for(var _=0;_<u;_++)g.push(_);return g}g=[],_=0;for(const b in u)g[_++]=b;return g}}}function Kc(u,g){if(u.forEach&&typeof u.forEach=="function")u.forEach(g,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,g,void 0);else for(var _=hp(u),b=dp(u),U=b.length,q=0;q<U;q++)g.call(void 0,b[q],_&&_[q],u)}var Gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kn(u,g){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var b=u[_].indexOf("="),U=null;if(0<=b){var q=u[_].substring(0,b);U=u[_].substring(b+1)}else q=u[_];g(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function as(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof as){this.h=u.h,po(this,u.j),this.o=u.o,this.g=u.g,ga(this,u.s),this.l=u.l;var g=u.i,_=new ls;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Qc(this,_),this.m=u.m}else u&&(g=String(u).match(Gc))?(this.h=!1,po(this,g[1]||"",!0),this.o=go(g[2]||""),this.g=go(g[3]||"",!0),ga(this,g[4]),this.l=go(g[5]||"",!0),Qc(this,g[6]||"",!0),this.m=go(g[7]||"")):(this.h=!1,this.i=new ls(null,this.h))}as.prototype.toString=function(){var u=[],g=this.j;g&&u.push(mo(g,Yc,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(mo(g,Yc,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(mo(_,_.charAt(0)=="/"?Xc:fp,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",mo(_,ed)),u.join("")};function gr(u){return new as(u)}function po(u,g,_){u.j=_?go(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function ga(u,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);u.s=g}else u.s=null}function Qc(u,g,_){g instanceof ls?(u.i=g,nd(u.i,u.h)):(_||(g=mo(g,Zc)),u.i=new ls(g,u.h))}function Qe(u,g,_){u.i.set(g,_)}function Ps(u){return Qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function go(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function mo(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,Jc),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Yc=/[#\/\?@]/g,fp=/[#\?:]/g,Xc=/[#\?]/g,Zc=/[#\?@]/g,ed=/#/g;function ls(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Or(u){u.g||(u.g=new Map,u.h=0,u.i&&Kn(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=ls.prototype,t.add=function(u,g){Or(this),this.i=null,u=fi(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function ma(u,g){Or(u),g=fi(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function wn(u,g){return Or(u),g=fi(u,g),u.g.has(g)}t.forEach=function(u,g){Or(this),this.g.forEach(function(_,b){_.forEach(function(U){u.call(g,U,b,this)},this)},this)},t.na=function(){Or(this);const u=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let b=0;b<g.length;b++){const U=u[b];for(let q=0;q<U.length;q++)_.push(g[b])}return _},t.V=function(u){Or(this);let g=[];if(typeof u=="string")wn(this,u)&&(g=g.concat(this.g.get(fi(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)g=g.concat(u[_])}return g},t.set=function(u,g){return Or(this),this.i=null,u=fi(this,u),wn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=this.V(u),0<u.length?String(u[0]):g):g};function td(u,g,_){ma(u,g),0<_.length&&(u.i=null,u.g.set(fi(u,g),x(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var b=g[_];const q=encodeURIComponent(String(b)),Z=this.V(b);for(b=0;b<Z.length;b++){var U=q;Z[b]!==""&&(U+="="+encodeURIComponent(String(Z[b]))),u.push(U)}}return this.i=u.join("&")};function fi(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function nd(u,g){g&&!u.j&&(Or(u),u.i=null,u.g.forEach(function(_,b){var U=b.toLowerCase();b!=U&&(ma(this,b),td(this,U,_))},u)),u.j=g}function rd(u,g){const _=new $;if(a.Image){const b=new Image;b.onload=y(us,_,"TestLoadImage: loaded",!0,g,b),b.onerror=y(us,_,"TestLoadImage: error",!1,g,b),b.onabort=y(us,_,"TestLoadImage: abort",!1,g,b),b.ontimeout=y(us,_,"TestLoadImage: timeout",!1,g,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=u}else g(!1)}function pp(u,g){const _=new $,b=new AbortController,U=setTimeout(()=>{b.abort(),us(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:b.signal}).then(q=>{clearTimeout(U),q.ok?us(_,"TestPingServer: ok",!0,g):us(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),us(_,"TestPingServer: error",!1,g)})}function us(u,g,_,b,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),b(_)}catch{}}function gp(){this.g=new $l}function mp(u,g,_){const b=_||"";try{Kc(u,function(U,q){let Z=U;c(U)&&(Z=ss(U)),g.push(b+q+"="+encodeURIComponent(Z))})}catch(U){throw g.push(b+"type="+encodeURIComponent("_badmap")),U}}function _a(u){this.l=u.Ub||null,this.j=u.eb||!1}I(_a,ci),_a.prototype.g=function(){return new va(this.l,this.j)},_a.prototype.i=function(u){return function(){return u}}({});function va(u,g){ht.call(this),this.D=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(va,ht),t=va.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=g,this.readyState=1,js(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(g.body=u),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pi(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ul(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ul(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?pi(this):js(this),this.readyState==3&&Ul(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,pi(this))},t.Qa=function(u){this.g&&(this.response=u,pi(this))},t.ga=function(){this.g&&pi(this)};function pi(u){u.readyState=4,u.l=null,u.j=null,u.v=null,js(u)}t.setRequestHeader=function(u,g){this.u.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function js(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function sd(u){let g="";return R(u,function(_,b){g+=b,g+=":",g+=_,g+=`\r
`}),g}function Bl(u,g,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=sd(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Qe(u,g,_))}function He(u){ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(He,ht);var Dr=/^https?$/i,id=["POST","PUT"];t=He.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,g,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ue.g(),this.v=this.o?Cs(this.o):Cs(ue),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(q){od(this,q);return}if(u=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var U in b)_.set(U,b[U]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const q of b.keys())_.set(q,b.get(q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(id,g,void 0))||b||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,Z]of _)this.g.setRequestHeader(q,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hl(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){od(this,q)}};function od(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.m=5,zl(u),_o(u)}function zl(u){u.A||(u.A=!0,et(u,"complete"),et(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,et(this,"complete"),et(this,"abort"),_o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_o(this,!0)),He.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ql(this):this.bb())},t.bb=function(){ql(this)};function ql(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Lr(u)!=4||u.Z()!=2)){if(u.u&&Lr(u)==4)_n(u.Ea,0,u);else if(et(u,"readystatechange"),Lr(u)==4){u.h=!1;try{const Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var b;if(b=Z===0){var U=String(u.D).match(Gc)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),b=!Dr.test(U?U.toLowerCase():"")}_=b}if(_)et(u,"complete"),et(u,"success");else{u.m=6;try{var q=2<Lr(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",zl(u)}}finally{_o(u)}}}}function _o(u,g){if(u.g){Hl(u);const _=u.g,b=u.v[0]?()=>{}:null;u.g=null,u.v=null,g||et(u,"ready");try{_.onreadystatechange=b}catch{}}}function Hl(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Lr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),fa(g)}};function ad(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function _p(u){const g={};u=(u.g&&2<=Lr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<u.length;b++){if(E(u[b]))continue;var _=N(u[b]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=g[U]||[];g[U]=q,q.push(_)}k(g,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gi(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function Wl(u){this.Aa=0,this.i=[],this.j=new $,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gi("baseRetryDelayMs",5e3,u),this.cb=gi("retryDelaySeedMs",1e4,u),this.Wa=gi("forwardChannelMaxRetries",2,u),this.wa=gi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new pe(u&&u.concurrentRequestLimit),this.Da=new gp,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wl.prototype,t.la=8,t.G=1,t.connect=function(u,g,_,b){ft(0),this.W=u,this.H=g||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=Jl(this,null,this.W),wa(this)};function Kl(u){if(ld(u),u.G==3){var g=u.U++,_=gr(u.I);if(Qe(_,"SID",u.K),Qe(_,"RID",g),Qe(_,"TYPE","terminate"),mi(u,_),g=new Ae(u,u.j,g),g.L=2,g.v=Ps(gr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=g.v,_=!0),_||(g.g=Yl(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Hn(g)}vo(u)}function ya(u){u.g&&(Ql(u),u.g.cancel(),u.g=null)}function ld(u){ya(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ea(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function wa(u){if(!tt(u.h)&&!u.s){u.s=!0;var g=u.Ga;we||de(),X||(we(),X=!0),ae.add(g,u),u.B=0}}function vp(u,g){return It(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=g.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=L(m(u.Ga,u,g),fd(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new Ae(this,this.j,u);let q=this.o;if(this.S&&(q?(q=w(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=ud(this,U,g),_=gr(this.I),Qe(_,"RID",u),Qe(_,"CVER",22),this.D&&Qe(_,"X-HTTP-Session-Id",this.D),mi(this,_),q&&(this.O?g="headers="+encodeURIComponent(String(sd(q)))+"&"+g:this.m&&Bl(_,this.m,q)),yn(this.h,U),this.Ua&&Qe(_,"TYPE","init"),this.P?(Qe(_,"$req",g),Qe(_,"SID","null"),U.T=!0,lt(U,_,null)):lt(U,_,g),this.G=2}}else this.G==3&&(u?mr(this,u):this.i.length==0||tt(this.h)||mr(this))};function mr(u,g){var _;g?_=g.l:_=u.U++;const b=gr(u.I);Qe(b,"SID",u.K),Qe(b,"RID",_),Qe(b,"AID",u.T),mi(u,b),u.m&&u.o&&Bl(b,u.m,u.o),_=new Ae(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),g&&(u.i=g.D.concat(u.i)),g=ud(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),yn(u.h,_),lt(_,b,g)}function mi(u,g){u.H&&R(u.H,function(_,b){Qe(g,b,_)}),u.l&&Kc({},function(_,b){Qe(g,b,_)})}function ud(u,g,_){_=Math.min(u.i.length,_);var b=u.l?m(u.l.Na,u.l,u):null;e:{var U=u.i;let q=-1;for(;;){const Z=["count="+_];q==-1?0<_?(q=U[0].g,Z.push("ofs="+q)):q=0:Z.push("ofs="+q);let Me=!0;for(let St=0;St<_;St++){let Ne=U[St].g;const $t=U[St].map;if(Ne-=q,0>Ne)q=Math.max(0,U[St].g-100),Me=!1;else try{mp($t,Z,"req"+Ne+"_")}catch{b&&b($t)}}if(Me){b=Z.join("&");break e}}}return u=u.i.splice(0,_),g.D=u,b}function cd(u){if(!u.g&&!u.u){u.Y=1;var g=u.Fa;we||de(),X||(we(),X=!0),ae.add(g,u),u.v=0}}function Gl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=L(m(u.Fa,u),fd(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,dd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=L(m(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),ya(this),dd(this))};function Ql(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function dd(u){u.g=new Ae(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var g=gr(u.qa);Qe(g,"RID","rpc"),Qe(g,"SID",u.K),Qe(g,"AID",u.T),Qe(g,"CI",u.F?"0":"1"),!u.F&&u.ja&&Qe(g,"TO",u.ja),Qe(g,"TYPE","xmlhttp"),mi(u,g),u.m&&u.o&&Bl(g,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Ps(gr(g)),_.m=null,_.P=!0,ut(_,u)}t.Za=function(){this.C!=null&&(this.C=null,ya(this),Gl(this),ft(19))};function Ea(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function hd(u,g){var _=null;if(u.g==g){Ea(u),Ql(u),u.g=null;var b=2}else if(qe(u.h,g))_=g.D,fo(u.h,g),b=1;else return;if(u.G!=0){if(g.o)if(b==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var U=u.B;b=hi(),et(b,new is(b,_)),wa(u)}else cd(u);else if(U=g.s,U==3||U==0&&0<g.X||!(b==1&&vp(u,g)||b==2&&Gl(u)))switch(_&&0<_.length&&(g=u.h,g.i=g.i.concat(_)),U){case 1:Mr(u,5);break;case 4:Mr(u,10);break;case 3:Mr(u,6);break;default:Mr(u,2)}}}function fd(u,g){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*g}function Mr(u,g){if(u.j.info("Error code "+g),g==2){var _=m(u.fb,u),b=u.Xa;const U=!b;b=new as(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||po(b,"https"),Ps(b),U?rd(b.toString(),_):pp(b.toString(),_)}else ft(2);u.G=0,u.l&&u.l.sa(g),vo(u),ld(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function vo(u){if(u.G=0,u.ka=[],u.l){const g=pa(u.h);(g.length!=0||u.i.length!=0)&&(j(u.ka,g),j(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function Jl(u,g,_){var b=_ instanceof as?gr(_):new as(_);if(b.g!="")g&&(b.g=g+"."+b.g),ga(b,b.s);else{var U=a.location;b=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var q=new as(null);b&&po(q,b),g&&(q.g=g),U&&ga(q,U),_&&(q.l=_),b=q}return _=u.D,g=u.ya,_&&g&&Qe(b,_,g),Qe(b,"VER",u.la),mi(u,b),b}function Yl(u,g,_){if(g&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Ca&&!u.pa?new He(new _a({eb:_})):new He(u.pa),g.Ha(u.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _i(){}t=_i.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vi(){}vi.prototype.g=function(u,g){return new En(u,g)};function En(u,g){ht.call(this),this.g=new Wl(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(u?u["X-WebChannel-Client-Profile"]=g.va:u={"X-WebChannel-Client-Profile":g.va}),this.g.S=u,(u=g&&g.Sb)&&!E(u)&&(this.g.m=u),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!E(g)&&(this.g.D=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new jn(this)}I(En,ht),En.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},En.prototype.close=function(){Kl(this.g)},En.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=ss(u),u=_);g.i.push(new Wn(g.Ya++,u)),g.G==3&&wa(g)},En.prototype.N=function(){this.g.l=null,delete this.j,Kl(this.g),delete this.g,En.aa.N.call(this)};function pd(u){Pr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}I(pd,Pr);function gd(){cr.call(this),this.status=1}I(gd,cr);function jn(u){this.g=u}I(jn,_i),jn.prototype.ua=function(){et(this.g,"a")},jn.prototype.ta=function(u){et(this.g,new pd(u))},jn.prototype.sa=function(u){et(this.g,new gd)},jn.prototype.ra=function(){et(this.g,"b")},vi.prototype.createWebChannel=vi.prototype.g,En.prototype.send=En.prototype.o,En.prototype.open=En.prototype.m,En.prototype.close=En.prototype.close,_S=function(){return new vi},mS=function(){return hi()},gS=dr,Em={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Y.NO_ERROR=0,Y.TIMEOUT=8,Y.HTTP_ERROR=6,ch=Y,_e.COMPLETE="complete",pS=_e,co.EventType=Rr,Rr.OPEN="a",Rr.CLOSE="b",Rr.ERROR="c",Rr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,Eu=co,He.prototype.listenOnce=He.prototype.L,He.prototype.getLastError=He.prototype.Ka,He.prototype.getLastErrorCode=He.prototype.Ba,He.prototype.getStatus=He.prototype.Z,He.prototype.getResponseJson=He.prototype.Oa,He.prototype.getResponseText=He.prototype.oa,He.prototype.send=He.prototype.ea,He.prototype.setWithCredentials=He.prototype.Ha,fS=He}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});const d0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=new kf("@firebase/firestore");function uu(){return Go.logLevel}function le(t,...e){if(Go.logLevel<=Le.DEBUG){const n=e.map(rv);Go.debug(`Firestore (${Cl}): ${t}`,...n)}}function ei(t,...e){if(Go.logLevel<=Le.ERROR){const n=e.map(rv);Go.error(`Firestore (${Cl}): ${t}`,...n)}}function cl(t,...e){if(Go.logLevel<=Le.WARN){const n=e.map(rv);Go.warn(`Firestore (${Cl}): ${t}`,...n)}}function rv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: `+t;throw ei(e),new Error(e)}function We(t,e){t||ve()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class cO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(un.UNAUTHENTICATED))}shutdown(){}}class dO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hO{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0);let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string"),new vS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string"),new un(e)}}class fO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=un.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(un.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){We(this.o===void 0);const r=i=>{i.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string"),this.R=n.token,new gO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=_O(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Be(t,e){return t<e?-1:t>e?1:0}function dl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ft(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Ft(0,0))}static max(){return new Ee(new Ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return pc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof pc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class it extends pc{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new it(n)}static emptyPath(){return new it([])}}const vO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends pc{construct(e,n,r){return new Qt(e,n,r)}static isValidIdentifier(e){return vO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Qt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ne(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ne(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(n)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(it.fromString(e))}static fromName(e){return new fe(it.fromString(e).popFirst(5))}static empty(){return new fe(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new it(e.slice()))}}function yO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new Xi(s,fe.empty(),e)}function wO(t){return new Xi(t.readTime,t.key,-1)}class Xi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xi(Ee.min(),fe.empty(),-1)}static max(){return new Xi(Ee.max(),fe.empty(),-1)}}function EO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==bO)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(s=>s?Q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new Q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function IO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Lc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sv.oe=-1;function jf(t){return t==null}function Gh(t){return t===0&&1/t==-1/0}function SO(t){return typeof t=="number"&&Number.isInteger(t)&&!Gh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function xO(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function wS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n){this.comparator=e,this.root=n||Gt.EMPTY}insert(e,n){return new wt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Gt.RED,this.left=s??Gt.EMPTY,this.right=i??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Gt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new f0(this.data.getIterator())}getIteratorFrom(e){return new f0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class f0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new Kr([])}unionWith(e){let n=new Yt(Qt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ES("Invalid base64 string: "+i):i}}(e);return new en(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const AO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(t){if(We(!!t),typeof t=="string"){let e=0;const n=AO.exec(t);if(We(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xt(t.seconds),nanos:xt(t.nanos)}}function xt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Qo(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iv(t){const e=t.mapValue.fields.__previous_value__;return Nf(e)?iv(e):e}function gc(t){const e=Zi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class mc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd={mapValue:{}};function Jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Nf(t)?4:RO(t)?9007199254740991:CO(t)?10:11:ve()}function Is(t,e){if(t===e)return!0;const n=Jo(t);if(n!==Jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return gc(t).isEqual(gc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Zi(s.timestampValue),a=Zi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Qo(s.bytesValue).isEqual(Qo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return xt(s.geoPointValue.latitude)===xt(i.geoPointValue.latitude)&&xt(s.geoPointValue.longitude)===xt(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return xt(s.integerValue)===xt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=xt(s.doubleValue),a=xt(i.doubleValue);return o===a?Gh(o)===Gh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(h0(o)!==h0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Is(o[l],a[l])))return!1;return!0}(t,e);default:return ve()}}function _c(t,e){return(t.values||[]).find(n=>Is(n,e))!==void 0}function hl(t,e){if(t===e)return 0;const n=Jo(t),r=Jo(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=xt(i.integerValue||i.doubleValue),l=xt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return p0(t.timestampValue,e.timestampValue);case 4:return p0(gc(t),gc(e));case 5:return Be(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Qo(i),l=Qo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Be(a[c],l[c]);if(d!==0)return d}return Be(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Be(xt(i.latitude),xt(o.latitude));return a!==0?a:Be(xt(i.longitude),xt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return g0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,d;const p=i.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,x=Be(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:g0(y,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Fd.mapValue&&o===Fd.mapValue)return 0;if(i===Fd.mapValue)return 1;if(o===Fd.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=Be(l[p],d[p]);if(m!==0)return m;const y=hl(a[l[p]],c[d[p]]);if(y!==0)return y}return Be(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ve()}}function p0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=Zi(t),r=Zi(e),s=Be(n.seconds,r.seconds);return s!==0?s:Be(n.nanos,r.nanos)}function g0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hl(n[s],r[s]);if(i)return i}return Be(n.length,r.length)}function fl(t){return bm(t)}function bm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Zi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Qo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=bm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${bm(n.fields[o])}`;return s+"}"}(t.mapValue):ve()}function Qh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tm(t){return!!t&&"integerValue"in t}function ov(t){return!!t&&"arrayValue"in t}function m0(t){return!!t&&"nullValue"in t}function _0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dh(t){return!!t&&"mapValue"in t}function CO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Mu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function RO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mu(n)}setAll(e){let n=Qt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Mu(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];dh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Rl(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new wr(Mu(this.value))}}function bS(t){const e=[];return Rl(t.fields,(n,r)=>{const s=new Qt([n]);if(dh(r)){const i=bS(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new dn(e,0,Ee.min(),Ee.min(),Ee.min(),wr.empty(),0)}static newFoundDocument(e,n,r,s){return new dn(e,1,n,Ee.min(),r,s,0)}static newNoDocument(e,n){return new dn(e,2,n,Ee.min(),Ee.min(),wr.empty(),0)}static newUnknownDocument(e,n){return new dn(e,3,n,Ee.min(),Ee.min(),wr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.position=e,this.inclusive=n}}function v0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=hl(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function y0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Is(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function PO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{}class Pt extends TS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new NO(e,n,r):n==="array-contains"?new LO(e,r):n==="in"?new MO(e,r):n==="not-in"?new VO(e,r):n==="array-contains-any"?new FO(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new OO(e,r):new DO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hl(n,this.value)):n!==null&&Jo(this.value)===Jo(n)&&this.matchesComparison(hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends TS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zr(e,n)}matches(e){return IS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function IS(t){return t.op==="and"}function SS(t){return jO(t)&&IS(t)}function jO(t){for(const e of t.filters)if(e instanceof Zr)return!1;return!0}function Im(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+fl(t.value);if(SS(t))return t.filters.map(e=>Im(e)).join(",");{const e=t.filters.map(n=>Im(n)).join(",");return`${t.op}(${e})`}}function xS(t,e){return t instanceof Pt?function(r,s){return s instanceof Pt&&r.op===s.op&&r.field.isEqual(s.field)&&Is(r.value,s.value)}(t,e):t instanceof Zr?function(r,s){return s instanceof Zr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&xS(o,s.filters[a]),!0):!1}(t,e):void ve()}function AS(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${fl(n.value)}`}(t):t instanceof Zr?function(n){return n.op.toString()+" {"+n.getFilters().map(AS).join(" ,")+"}"}(t):"Filter"}class NO extends Pt{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class OO extends Pt{constructor(e,n){super(e,"in",n),this.keys=kS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DO extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=kS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class LO extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ov(n)&&_c(n.arrayValue,this.value)}}class MO extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_c(this.value.arrayValue,n)}}class VO extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(_c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_c(this.value.arrayValue,n)}}class FO extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ov(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_c(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function w0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new $O(t,e,n,r,s,i,o)}function av(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Im(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),jf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fl(r)).join(",")),e.ue=n}return e.ue}function lv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!xS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y0(t.startAt,e.startAt)&&y0(t.endAt,e.endAt)}function Sm(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UO(t,e,n,r,s,i,o,a){return new la(t,e,n,r,s,i,o,a)}function uv(t){return new la(t)}function E0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cv(t){return t.collectionGroup!==null}function tl(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Yt(Qt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new vc(i,r))}),n.has(Qt.keyField().canonicalString())||e.ce.push(new vc(Qt.keyField(),r))}return e.ce}function ys(t){const e=ye(t);return e.le||(e.le=CS(e,tl(t))),e.le}function BO(t){const e=ye(t);return e.he||(e.he=CS(e,t.explicitOrderBy)),e.he}function CS(t,e){if(t.limitType==="F")return w0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new vc(s.field,i)});const n=t.endAt?new pl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pl(t.startAt.position,t.startAt.inclusive):null;return w0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xm(t,e){const n=t.filters.concat([e]);return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jh(t,e,n){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Of(t,e){return lv(ys(t),ys(e))&&t.limitType===e.limitType}function RS(t){return`${av(ys(t))}|lt:${t.limitType}`}function ka(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>AS(s)).join(", ")}]`),jf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fl(s)).join(",")),`Target(${r})`}(ys(t))}; limitType=${t.limitType})`}function Df(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):fe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of tl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=v0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,tl(r),s)||r.endAt&&!function(o,a,l){const c=v0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,tl(r),s))}(t,e)}function zO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function PS(t){return(e,n)=>{let r=!1;for(const s of tl(t)){const i=qO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function qO(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?hl(l,c):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rl(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return wS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=new wt(fe.comparator);function ti(){return HO}const jS=new wt(fe.comparator);function bu(...t){let e=jS;for(const n of t)e=e.insert(n.key,n);return e}function NS(t){let e=jS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function No(){return Vu()}function OS(){return Vu()}function Vu(){return new Pl(t=>t.toString(),(t,e)=>t.isEqual(e))}const WO=new wt(fe.comparator),KO=new Yt(fe.comparator);function je(...t){let e=KO;for(const n of t)e=e.add(n);return e}const GO=new Yt(Be);function QO(){return GO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function DS(t){return{integerValue:""+t}}function JO(t,e){return SO(e)?DS(e):dv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this._=void 0}}function YO(t,e,n){return t instanceof Yh?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Nf(i)&&(i=iv(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof yc?MS(t,e):t instanceof wc?VS(t,e):function(s,i){const o=LS(s,i),a=b0(o)+b0(s.Pe);return Tm(o)&&Tm(s.Pe)?DS(a):dv(s.serializer,a)}(t,e)}function XO(t,e,n){return t instanceof yc?MS(t,e):t instanceof wc?VS(t,e):n}function LS(t,e){return t instanceof Xh?function(r){return Tm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Yh extends Lf{}class yc extends Lf{constructor(e){super(),this.elements=e}}function MS(t,e){const n=FS(e);for(const r of t.elements)n.some(s=>Is(s,r))||n.push(r);return{arrayValue:{values:n}}}class wc extends Lf{constructor(e){super(),this.elements=e}}function VS(t,e){let n=FS(e);for(const r of t.elements)n=n.filter(s=>!Is(s,r));return{arrayValue:{values:n}}}class Xh extends Lf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function b0(t){return xt(t.integerValue||t.doubleValue)}function FS(t){return ov(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function ZO(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof yc&&s instanceof yc||r instanceof wc&&s instanceof wc?dl(r.elements,s.elements,Is):r instanceof Xh&&s instanceof Xh?Is(r.Pe,s.Pe):r instanceof Yh&&s instanceof Yh}(t.transform,e.transform)}class eD{constructor(e,n){this.version=e,this.transformResults=n}}class ws{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ws}static exists(e){return new ws(void 0,e)}static updateTime(e){return new ws(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mf{}function $S(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new BS(t.key,ws.none()):new Mc(t.key,t.data,ws.none());{const n=t.data,r=wr.empty();let s=new Yt(Qt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ua(t.key,r,new Kr(s.toArray()),ws.none())}}function tD(t,e,n){t instanceof Mc?function(s,i,o){const a=s.value.clone(),l=I0(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ua?function(s,i,o){if(!hh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=I0(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(US(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fu(t,e,n,r){return t instanceof Mc?function(i,o,a,l){if(!hh(i.precondition,o))return a;const c=i.value.clone(),d=S0(i.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ua?function(i,o,a,l){if(!hh(i.precondition,o))return a;const c=S0(i.fieldTransforms,l,o),d=o.data;return d.setAll(US(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return hh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function nD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=LS(r.transform,s||null);i!=null&&(n===null&&(n=wr.empty()),n.set(r.field,i))}return n||null}function T0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dl(r,s,(i,o)=>ZO(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Mc extends Mf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ua extends Mf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function US(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function I0(t,e,n){const r=new Map;We(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,XO(o,a,n[s]))}return r}function S0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,YO(i,o,e))}return r}class BS extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rD extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&tD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=OS();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=$S(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(n,r)=>T0(n,r))&&dl(this.baseMutations,e.baseMutations,(n,r)=>T0(n,r))}}class hv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){We(e.mutations.length===r.length);let s=function(){return WO}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Ve;function lD(t){switch(t){default:return ve();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function zS(t){if(t===void 0)return ei("GRPC error has no .code"),K.UNKNOWN;switch(t){case kt.OK:return K.OK;case kt.CANCELLED:return K.CANCELLED;case kt.UNKNOWN:return K.UNKNOWN;case kt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case kt.INTERNAL:return K.INTERNAL;case kt.UNAVAILABLE:return K.UNAVAILABLE;case kt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case kt.NOT_FOUND:return K.NOT_FOUND;case kt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case kt.ABORTED:return K.ABORTED;case kt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case kt.DATA_LOSS:return K.DATA_LOSS;default:return ve()}}(Ve=kt||(kt={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new Fo([4294967295,4294967295],0);function x0(t){const e=uD().encode(t),n=new hS;return n.update(e),new Uint8Array(n.digest())}function A0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Fo([n,r],0),new Fo([s,i],0)]}class fv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Tu(`Invalid padding: ${n}`);if(r<0)throw new Tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Fo.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Fo.fromNumber(r)));return s.compare(cD)===1&&(s=new Fo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=x0(e),[r,s]=A0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new fv(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=x0(e),[r,s]=A0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Vc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vf(Ee.min(),s,new wt(Be),ti(),je())}}class Vc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Vc(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class qS{constructor(e,n){this.targetId=e,this.me=n}}class HS{constructor(e,n,r=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class k0{constructor(){this.fe=0,this.ge=R0(),this.pe=en.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=je(),n=je(),r=je();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve()}}),new Vc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=R0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,We(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class dD{constructor(e){this.Le=e,this.Be=new Map,this.ke=ti(),this.qe=C0(),this.Qe=new wt(Be)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Sm(i))if(r===0){const o=new fe(i.path);this.Ue(n,o,dn.newNoDocument(o,Ee.min()))}else We(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Qo(r).toUint8Array()}catch(l){if(l instanceof ES)return cl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new fv(o,s,i)}catch(l){return cl(l instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Sm(a.target)){const l=new fe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,dn.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=je();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Vf(e,n,this.Qe,this.ke,r);return this.ke=ti(),this.qe=C0(),this.Qe=new wt(Be),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new k0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Yt(Be),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new k0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function C0(){return new wt(fe.comparator)}function R0(){return new wt(fe.comparator)}const hD={asc:"ASCENDING",desc:"DESCENDING"},fD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pD={and:"AND",or:"OR"};class gD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Am(t,e){return t.useProto3Json||jf(e)?e:{value:e}}function Zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function WS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mD(t,e){return Zh(t,e.toTimestamp())}function Es(t){return We(!!t),Ee.fromTimestamp(function(n){const r=Zi(n);return new Ft(r.seconds,r.nanos)}(t))}function pv(t,e){return km(t,e).canonicalString()}function km(t,e){const n=function(s){return new it(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function KS(t){const e=it.fromString(t);return We(ZS(e)),e}function Cm(t,e){return pv(t.databaseId,e.path)}function ng(t,e){const n=KS(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(QS(n))}function GS(t,e){return pv(t.databaseId,e)}function _D(t){const e=KS(t);return e.length===4?it.emptyPath():QS(e)}function Rm(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function QS(t){return We(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function P0(t,e,n){return{name:Cm(t,e),fields:n.value.mapValue.fields}}function vD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(We(d===void 0||typeof d=="string"),en.fromBase64String(d||"")):(We(d===void 0||d instanceof Buffer||d instanceof Uint8Array),en.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?K.UNKNOWN:zS(c.code);return new ne(d,c.message||"")}(o);n=new HS(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ng(t,r.document.name),i=Es(r.document.updateTime),o=r.document.createTime?Es(r.document.createTime):Ee.min(),a=new wr({mapValue:{fields:r.document.fields}}),l=dn.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new fh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ng(t,r.document),i=r.readTime?Es(r.readTime):Ee.min(),o=dn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new fh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ng(t,r.document),i=r.removedTargetIds||[];n=new fh([],i,s,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new aD(s,i),a=r.targetId;n=new qS(a,o)}}return n}function yD(t,e){let n;if(e instanceof Mc)n={update:P0(t,e.key,e.value)};else if(e instanceof BS)n={delete:Cm(t,e.key)};else if(e instanceof ua)n={update:P0(t,e.key,e.data),updateMask:kD(e.fieldMask)};else{if(!(e instanceof rD))return ve();n={verify:Cm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Yh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof yc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof wc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:mD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ve()}(t,e.precondition)),n}function wD(t,e){return t&&t.length>0?(We(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Es(s.updateTime):Es(i);return o.isEqual(Ee.min())&&(o=Es(i)),new eD(o,s.transformResults||[])}(n,e))):[]}function ED(t,e){return{documents:[GS(t,e.path)]}}function JS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=GS(t,s);const i=function(c){if(c.length!==0)return XS(Zr.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Oi(m.field),direction:SD(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Am(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function bD(t,e,n,r){const{_t:s,parent:i}=JS(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d="aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:Oi(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:Oi(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function TD(t){let e=_D(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){We(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=YS(p);return m instanceof Zr&&SS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(I){return new vc(Ca(I.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,jf(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,y=p.values||[];return new pl(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(p){const m=!p.before,y=p.values||[];return new pl(y,m)}(n.endAt)),UO(e,s,o,i,a,"F",l,c)}function ID(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function YS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ca(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ca(n.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ca(n.unaryFilter.field);return Pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ca(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(Ca(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zr.create(n.compositeFilter.filters.map(r=>YS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function SD(t){return hD[t]}function xD(t){return fD[t]}function AD(t){return pD[t]}function Oi(t){return{fieldPath:t.canonicalString()}}function Ca(t){return Qt.fromServerFormat(t.fieldPath)}function XS(t){return t instanceof Pt?function(n){if(n.op==="=="){if(_0(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NAN"}};if(m0(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(_0(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NOT_NAN"}};if(m0(n.value))return{unaryFilter:{field:Oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oi(n.field),op:xD(n.op),value:n.value}}}(t):t instanceof Zr?function(n){const r=n.getFilters().map(s=>XS(s));return r.length===1?r[0]:{compositeFilter:{op:AD(n.op),filters:r}}}(t):ve()}function kD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ZS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n,r,s,i=Ee.min(),o=Ee.min(),a=en.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e){this.ct=e}}function RD(t){const e=TD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.un=new jD}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Xi.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Xi.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class jD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Yt(it.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Yt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new gl(0)}static kn(){return new gl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.changes=new Pl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Fu(r.mutation,s,Kr.empty(),Ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const s=No();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=bu();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=No();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ti();const o=Vu(),a=function(){return Vu()}();return n.forEach((l,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof ua)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Fu(d.mutation,c,d.mutation.getFieldMask(),Ft.now())):o.set(c.key,Kr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var p;return a.set(c,new OD(d,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Vu();let s=new wt((o,a)=>o-a),i=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Kr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const p=(s.get(a.batchId)||je()).add(l);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,p=OS();d.forEach(m=>{if(!i.has(m)){const y=$S(n.get(m),r.get(m));y!==null&&p.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Q.resolve(No());let a=-1,l=i;return o.next(c=>Q.forEach(c,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,je())).next(d=>({batchId:a,changes:NS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let s=bu();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=bu();return this.indexManager.getCollectionParents(e,i).next(a=>Q.forEach(a,l=>{const c=function(p,m){return new la(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,dn.newInvalidDocument(d)))});let a=bu();return o.forEach((l,c)=>{const d=i.get(l);d!==void 0&&Fu(d.mutation,c,Kr.empty(),Ft.now()),Df(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Es(s.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:RD(s.bundledQuery),readTime:Es(s.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(){this.overlays=new wt(fe.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=No();return Q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const s=No(),i=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new wt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=No(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=No(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return Q.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new iD(n,r));let i=this.Ir.get(n);i===void 0&&(i=je(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.Tr=new Yt(zt.Er),this.dr=new Yt(zt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new zt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new zt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fe(new it([])),r=new zt(n,e),s=new zt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fe(new it([])),r=new zt(n,e),s=new zt(n,e+1);let i=je();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new zt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fe.comparator(e.key,n.key)||Be(e.wr,n.wr)}static Ar(e,n){return Be(e.wr,n.wr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Yt(zt.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new sD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new zt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return Q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),s=new zt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),Q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Yt(Be);return n.forEach(s=>{const i=new zt(s,0),o=new zt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;fe.isDocumentKey(i)||(i=i.child(""));const o=new zt(new fe(i),0);let a=new Yt(Be);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.wr)),!0)},o),Q.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){We(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Q.forEach(n.mutations,s=>{const i=new zt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new zt(n,0),s=this.br.firstAfterOrEqual(r);return Q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.Mr=e,this.docs=function(){return new wt(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():dn.newInvalidDocument(n))}getEntries(e,n){let r=ti();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dn.newInvalidDocument(s))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ti();const o=n.path,a=new fe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||EO(wO(d),r)<=0||(s.has(d.key)||Df(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ve()}Or(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new UD(this)}getSize(e){return Q.resolve(this.size)}}class UD extends ND{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.persistence=e,this.Nr=new Pl(n=>av(n),lv),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gv,this.targetCount=0,this.kr=gl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new gl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Q.waitFor(i).next(()=>s)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sv(0),this.Kr=!1,this.Kr=!0,this.$r=new VD,this.referenceDelegate=e(this),this.Ur=new BD(this),this.indexManager=new PD,this.remoteDocumentCache=function(s){return new $D(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new CD(n),this.Gr=new LD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new MD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new FD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const s=new qD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class qD extends TO{constructor(e){super(),this.currentSequenceNumber=e}}class mv{constructor(e){this.persistence=e,this.Jr=new gv,this.Yr=null}static Zr(e){return new mv(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{const s=fe.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=je(),s=je();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _v(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jP()?8:IO(fn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new HD;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(uu()<=Le.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(uu()<=Le.DEBUG&&le("QueryEngine","Query:",ka(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(uu()<=Le.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(n))):Q.resolve())}Yi(e,n){if(E0(n))return Q.resolve(null);let r=ys(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Jh(n,null,"F"),r=ys(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=je(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Jh(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,s){return E0(n)||s.isEqual(Ee.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?Q.resolve(null):(uu()<=Le.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ka(n)),this.rs(e,o,n,yO(s,-1)).next(a=>a))})}ts(e,n){let r=new Yt(PS(e));return n.forEach((s,i)=>{Df(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return uu()<=Le.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",ka(n)),this.Ji.getDocumentsMatchingQuery(e,n,Xi.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new wt(Be),this._s=new Pl(i=>av(i),lv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function GD(t,e,n,r){return new KD(t,e,n,r)}async function ex(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=je();for(const c of s){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function QD(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const p=c.batch,m=p.keys();let y=Q.resolve();return m.forEach(I=>{y=y.next(()=>d.getEntry(l,I)).next(x=>{const j=c.docVersions.get(I);We(j!==null),x.version.compareTo(j)<0&&(p.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=je();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function tx(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function JD(t,e){const n=ye(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,p)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(en.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(p,y),function(x,j,A){return x.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(m,y,d)&&a.push(n.Ur.updateTargetData(i,y))});let l=ti(),c=je();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(YD(i,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(Ee.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return Q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(n.os=s,i))}function YD(t,e,n){let r=je(),s=je();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ti();return n.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function XD(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ZD(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,Q.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Vi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Pm(t,e,n){const r=ye(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Lc(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function j0(t,e,n){const r=ye(t);let s=Ee.min(),i=je();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const p=ye(l),m=p._s.get(d);return m!==void 0?Q.resolve(p.os.get(m)):p.Ur.getTargetData(c,d)}(r,o,ys(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Ee.min(),n?i:je())).next(a=>(eL(r,zO(e),a),{documents:a,Ts:i})))}function eL(t,e,n){let r=t.us.get(e)||Ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class N0{constructor(){this.activeTargetIds=QO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tL{constructor(){this.so=new N0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new N0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d=null;function rg(){return $d===null?$d=function(){return 268435456+Math.round(2147483648*Math.random())}():$d++,"0x"+$d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="WebChannelConnection";class iL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=rg(),l=this.xo(n,r.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,l,c,s).then(d=>(le("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw cl("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=rL[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=rg();return new Promise((o,a)=>{const l=new fS;l.setWithCredentials(!0),l.listenOnce(pS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ch.NO_ERROR:const d=l.getResponseJson();le(an,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case ch.TIMEOUT:le(an,`RPC '${e}' ${i} timed out`),a(new ne(K.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const p=l.getStatus();if(le(an,`RPC '${e}' ${i} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const I=function(j){const A=j.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(A)>=0?A:K.UNKNOWN}(y.status);a(new ne(I,y.message))}else a(new ne(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(K.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{le(an,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);le(an,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=rg(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=_S(),a=mS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");le(an,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=o.createWebChannel(d,l);let m=!1,y=!1;const I=new sL({Io:j=>{y?le(an,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(m||(le(an,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),le(an,`RPC '${e}' stream ${s} sending:`,j),p.send(j))},To:()=>p.close()}),x=(j,A,E)=>{j.listen(A,T=>{try{E(T)}catch(O){setTimeout(()=>{throw O},0)}})};return x(p,Eu.EventType.OPEN,()=>{y||(le(an,`RPC '${e}' stream ${s} transport opened.`),I.yo())}),x(p,Eu.EventType.CLOSE,()=>{y||(y=!0,le(an,`RPC '${e}' stream ${s} transport closed`),I.So())}),x(p,Eu.EventType.ERROR,j=>{y||(y=!0,cl(an,`RPC '${e}' stream ${s} transport errored:`,j),I.So(new ne(K.UNAVAILABLE,"The operation could not be completed")))}),x(p,Eu.EventType.MESSAGE,j=>{var A;if(!y){const E=j.data[0];We(!!E);const T=E,O=T.error||((A=T[0])===null||A===void 0?void 0:A.error);if(O){le(an,`RPC '${e}' stream ${s} received error:`,O);const B=O.status;let R=function(S){const C=kt[S];if(C!==void 0)return zS(C)}(B),k=O.message;R===void 0&&(R=K.INTERNAL,k="Unknown error status: "+B+" with message "+O.message),y=!0,I.So(new ne(R,k)),p.close()}else le(an,`RPC '${e}' stream ${s} received:`,E),I.bo(E)}}),x(a,gS.STAT_EVENT,j=>{j.stat===Em.PROXY?le(an,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===Em.NOPROXY&&le(an,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){return new gD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new nx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(ei(n.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ne(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oL extends rx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=vD(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?Es(o.readTime):Ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Rm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Sm(l)?{documents:ED(i,l)}:{query:JS(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=WS(i,o.resumeToken);const c=Am(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ee.min())>0){a.readTime=Zh(i,o.snapshotVersion.toTimestamp());const c=Am(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=ID(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Rm(this.serializer),n.removeTarget=e,this.a_(n)}}class aL extends rx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return We(!!e.streamToken),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){We(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=wD(e.writeResults,e.commitTime),r=Es(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Rm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,km(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(K.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,km(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(K.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class uL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ei(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ca(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ye(l);c.L_.add(4),await Fc(c),c.q_.set("Unknown"),c.L_.delete(4),await $f(c)}(this))})}),this.q_=new uL(r,s)}}async function $f(t){if(ca(t))for(const e of t.B_)await e(!0)}async function Fc(t){for(const e of t.B_)await e(!1)}function sx(t,e){const n=ye(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ev(n)?wv(n):jl(n).r_()&&yv(n,e))}function vv(t,e){const n=ye(t),r=jl(n);n.N_.delete(e),r.r_()&&ix(n,e),n.N_.size===0&&(r.r_()?r.o_():ca(n)&&n.q_.set("Unknown"))}function yv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jl(t).A_(e)}function ix(t,e){t.Q_.xe(e),jl(t).R_(e)}function wv(t){t.Q_=new dD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),jl(t).start(),t.q_.v_()}function Ev(t){return ca(t)&&!jl(t).n_()&&t.N_.size>0}function ca(t){return ye(t).L_.size===0}function ox(t){t.Q_=void 0}async function dL(t){t.q_.set("Online")}async function hL(t){t.N_.forEach((e,n)=>{yv(t,e)})}async function fL(t,e){ox(t),Ev(t)?(t.q_.M_(e),wv(t)):t.q_.set("Unknown")}async function pL(t,e,n){if(t.q_.set("Online"),e instanceof HS&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ef(t,r)}else if(e instanceof fh?t.Q_.Ke(e):e instanceof qS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const r=await tx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(en.EMPTY_BYTE_STRING,d.snapshotVersion)),ix(i,l);const p=new Vi(d.target,l,c,d.sequenceNumber);yv(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){le("RemoteStore","Failed to raise snapshot:",r),await ef(t,r)}}async function ef(t,e,n){if(!Lc(e))throw e;t.L_.add(1),await Fc(t),t.q_.set("Offline"),n||(n=()=>tx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await $f(t)})}function ax(t,e){return e().catch(n=>ef(t,n,e))}async function Uf(t){const e=ye(t),n=eo(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;gL(e);)try{const s=await XD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,mL(e,s)}catch(s){await ef(e,s)}lx(e)&&ux(e)}function gL(t){return ca(t)&&t.O_.length<10}function mL(t,e){t.O_.push(e);const n=eo(t);n.r_()&&n.V_&&n.m_(e.mutations)}function lx(t){return ca(t)&&!eo(t).n_()&&t.O_.length>0}function ux(t){eo(t).start()}async function _L(t){eo(t).p_()}async function vL(t){const e=eo(t);for(const n of t.O_)e.m_(n.mutations)}async function yL(t,e,n){const r=t.O_.shift(),s=hv.from(r,e,n);await ax(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Uf(t)}async function wL(t,e){e&&eo(t).V_&&await async function(r,s){if(function(o){return lD(o)&&o!==K.ABORTED}(s.code)){const i=r.O_.shift();eo(r).s_(),await ax(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Uf(r)}}(t,e),lx(t)&&ux(t)}async function D0(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const r=ca(n);n.L_.add(3),await Fc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await $f(n)}async function EL(t,e){const n=ye(t);e?(n.L_.delete(2),await $f(n)):e||(n.L_.add(2),await Fc(n),n.q_.set("Unknown"))}function jl(t){return t.K_||(t.K_=function(n,r,s){const i=ye(n);return i.w_(),new oL(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:dL.bind(null,t),Ro:hL.bind(null,t),mo:fL.bind(null,t),d_:pL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ev(t)?wv(t):t.q_.set("Unknown")):(await t.K_.stop(),ox(t))})),t.K_}function eo(t){return t.U_||(t.U_=function(n,r,s){const i=ye(n);return i.w_(),new aL(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_L.bind(null,t),mo:wL.bind(null,t),f_:vL.bind(null,t),g_:yL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Uf(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new bv(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tv(t,e){if(ei("AsyncQueue",`${e}: ${t}`),Lc(t))return new ne(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=bu(),this.sortedSet=new wt(this.comparator)}static emptySet(e){return new nl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(){this.W_=new wt(fe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ml{constructor(e,n,r,s,i,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ml(e,n,nl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Of(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class TL{constructor(){this.queries=M0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ye(n),i=s.queries;s.queries=M0(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ne(K.ABORTED,"Firestore shutting down"))}}function M0(){return new Pl(t=>RS(t),Of)}async function cx(t,e){const n=ye(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new bL,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Tv(o,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Iv(n)}async function dx(t,e){const n=ye(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function IL(t,e){const n=ye(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Iv(n)}function SL(t,e,n){const r=ye(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Iv(t){t.Y_.forEach(e=>{e.next()})}var jm,V0;(V0=jm||(jm={})).ea="default",V0.Cache="cache";class hx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e){this.key=e}}class px{constructor(e){this.key=e}}class xL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=je(),this.mutatedKeys=je(),this.Aa=PS(e),this.Ra=new nl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new L0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),y=Df(this.query,p)?p:null,I=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let j=!1;m&&y?m.data.isEqual(y.data)?I!==x&&(r.track({type:3,doc:y}),j=!0):this.ga(m,y)||(r.track({type:2,doc:y}),j=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),j=!0):m&&!y&&(r.track({type:1,doc:m}),j=!0,(l||c)&&(a=!0)),j&&(y?(o=o.add(y),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(y,I){const x=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return x(y)-x(I)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new ml(this.query,e.Ra,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new L0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=je(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new px(r))}),this.da.forEach(r=>{e.has(r)||n.push(new fx(r))}),n}ba(e){this.Ta=e.Ts,this.da=je();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ml.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class AL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kL{constructor(e){this.key=e,this.va=!1}}class CL{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Pl(a=>RS(a),Of),this.Ma=new Map,this.xa=new Set,this.Oa=new wt(fe.comparator),this.Na=new Map,this.La=new gv,this.Ba={},this.ka=new Map,this.qa=gl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function RL(t,e,n=!0){const r=wx(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await gx(r,e,n,!0),s}async function PL(t,e){const n=wx(t);await gx(n,e,!0,!1)}async function gx(t,e,n,r){const s=await ZD(t.localStore,ys(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await jL(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&sx(t.remoteStore,s),a}async function jL(t,e,n,r,s){t.Ka=(p,m,y)=>async function(x,j,A,E){let T=j.view.ma(A);T.ns&&(T=await j0(x.localStore,j.query,!1).then(({documents:k})=>j.view.ma(k,T)));const O=E&&E.targetChanges.get(j.targetId),B=E&&E.targetMismatches.get(j.targetId)!=null,R=j.view.applyChanges(T,x.isPrimaryClient,O,B);return $0(x,j.targetId,R.wa),R.snapshot}(t,p,m,y);const i=await j0(t.localStore,e,!0),o=new xL(e,i.Ts),a=o.ma(i.documents),l=Vc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,l);$0(t,n,c.wa);const d=new AL(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function NL(t,e,n){const r=ye(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Of(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Pm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&vv(r.remoteStore,s.targetId),Nm(r,s.targetId)}).catch(Dc)):(Nm(r,s.targetId),await Pm(r.localStore,s.targetId,!0))}async function OL(t,e){const n=ye(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vv(n.remoteStore,r.targetId))}async function DL(t,e,n){const r=BL(t);try{const s=await function(o,a){const l=ye(o),c=Ft.now(),d=a.reduce((y,I)=>y.add(I.key),je());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=ti(),x=je();return l.cs.getEntries(y,d).next(j=>{I=j,I.forEach((A,E)=>{E.isValidDocument()||(x=x.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,I)).next(j=>{p=j;const A=[];for(const E of a){const T=nD(E,p.get(E.key).overlayedDocument);T!=null&&A.push(new ua(E.key,T,bS(T.value.mapValue),ws.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,A,a)}).next(j=>{m=j;const A=j.applyToLocalDocumentSet(p,x);return l.documentOverlayCache.saveOverlays(y,j.batchId,A)})}).then(()=>({batchId:m.batchId,changes:NS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new wt(Be)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await $c(r,s.changes),await Uf(r.remoteStore)}catch(s){const i=Tv(s,"Failed to persist write");n.reject(i)}}async function mx(t,e){const n=ye(t);try{const r=await JD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(We(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?We(o.va):s.removedDocuments.size>0&&(We(o.va),o.va=!1))}),await $c(n,r,e)}catch(r){await Dc(r)}}function F0(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let c=!1;l.queries.forEach((d,p)=>{for(const m of p.j_)m.Z_(a)&&(c=!0)}),c&&Iv(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function LL(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new wt(fe.comparator);o=o.insert(i,dn.newNoDocument(i,Ee.min()));const a=je().add(i),l=new Vf(Ee.min(),new Map,new wt(Be),o,a);await mx(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Sv(r)}else await Pm(r.localStore,e,!1).then(()=>Nm(r,e,n)).catch(Dc)}async function ML(t,e){const n=ye(t),r=e.batch.batchId;try{const s=await QD(n.localStore,e);vx(n,r,null),_x(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await $c(n,s)}catch(s){await Dc(s)}}async function VL(t,e,n){const r=ye(t);try{const s=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(We(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);vx(r,e,n),_x(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await $c(r,s)}catch(s){await Dc(s)}}function _x(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function vx(t,e,n){const r=ye(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Nm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||yx(t,r)})}function yx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(vv(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Sv(t))}function $0(t,e,n){for(const r of n)r instanceof fx?(t.La.addReference(r.key,e),FL(t,r)):r instanceof px?(le("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||yx(t,r.key)):ve()}function FL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(r),Sv(t))}function Sv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fe(it.fromString(e)),r=t.qa.next();t.Na.set(r,new kL(n)),t.Oa=t.Oa.insert(n,r),sx(t.remoteStore,new Vi(ys(uv(n.path)),r,"TargetPurposeLimboResolution",sv.oe))}}async function $c(t,e,n){const r=ye(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const p=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){s.push(c);const p=_v.Wi(l.targetId,c);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,c){const d=ye(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Q.forEach(c,m=>Q.forEach(m.$i,y=>d.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>Q.forEach(m.Ui,y=>d.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Lc(p))throw p;le("LocalStore","Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const y=d.os.get(m),I=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(m,x)}}}(r.localStore,i))}async function $L(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const r=await ex(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new ne(K.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await $c(n,r.hs)}}function UL(t,e){const n=ye(t),r=n.Na.get(e);if(r&&r.va)return je().add(r.key);{let s=je();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function wx(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=UL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LL.bind(null,e),e.Ca.d_=IL.bind(null,e.eventManager),e.Ca.$a=SL.bind(null,e.eventManager),e}function BL(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ML.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VL.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ff(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return GD(this.persistence,new WD,e.initialUser,this.serializer)}Ga(e){return new zD(mv.Zr,this.serializer)}Wa(e){return new tL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class Om{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>F0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$L.bind(null,this.syncEngine),await EL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TL}()}createDatastore(e){const n=Ff(e.databaseInfo.databaseId),r=function(i){return new iL(i)}(e.databaseInfo);return function(i,o,a,l){return new lL(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new cL(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>F0(this.syncEngine,n,0),function(){return O0.D()?new O0:new nL}())}createSyncEngine(e,n){return function(s,i,o,a,l,c,d){const p=new CL(s,i,o,a,l,c);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ye(s);le("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Fc(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Om.provider={build:()=>new Om};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=un.UNAUTHENTICATED,this.clientId=yS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{le("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(le("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ig(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await ex(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function U0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qL(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>D0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>D0(e.remoteStore,s)),t._onlineComponents=e}async function qL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await ig(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;cl("Error using user provided cache. Falling back to memory cache: "+n),await ig(t,new tf)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await ig(t,new tf);return t._offlineComponents}async function xv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await U0(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await U0(t,new Om))),t._onlineComponents}function HL(t){return xv(t).then(e=>e.syncEngine)}function WL(t){return xv(t).then(e=>e.datastore)}async function bx(t){const e=await xv(t),n=e.eventManager;return n.onListen=RL.bind(null,e.syncEngine),n.onUnlisten=NL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=PL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=OL.bind(null,e.syncEngine),n}function KL(t,e,n={}){const r=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Ex({next:m=>{d.Za(),o.enqueueAndForget(()=>dx(i,p));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new ne(K.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?c.reject(new ne(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new hx(uv(a.path),d,{includeMetadataChanges:!0,_a:!0});return cx(i,p)}(await bx(t),t.asyncQueue,e,n,r)),r.promise}function GL(t,e,n={}){const r=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const d=new Ex({next:m=>{d.Za(),o.enqueueAndForget(()=>dx(i,p)),m.fromCache&&l.source==="server"?c.reject(new ne(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new hx(a,d,{includeMetadataChanges:!0,_a:!0});return cx(i,p)}(await bx(t),t.asyncQueue,e,n,r)),r.promise}function QL(t,e,n){const r=new vs;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await WL(t);r.resolve(async function(o,a,l){var c;const d=ye(o),{request:p,ut:m,parent:y}=bD(d.serializer,BO(a),l);d.connection.Fo||delete p.parent;const I=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,p,1)).filter(j=>!!j.result);We(I.length===1);const x=(c=I[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(x).reduce((j,A)=>(j[m[A]]=x[A],j),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(t,e,n){if(!n)throw new ne(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JL(t,e,n,r){if(e===!0&&r===!0)throw new ne(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function z0(t){if(!fe.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q0(t){if(fe.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function ni(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bf(t);throw new ne(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Tx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cO;switch(r.type){case"firstParty":return new pO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=B0.get(n);r&&(le("ComponentProvider","Removing Datastore"),B0.delete(n),r.terminate())}(this),Promise.resolve()}}function YL(t,e,n,r={}){var s;const i=(t=ni(t,zf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=un.MOCK_USER;else{a=xP(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ne(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new un(c)}t._authCredentials=new dO(new vS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ai(this.firestore,e,this._query)}}class Un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class Qi extends ai{constructor(e,n,r){super(e,n,uv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new fe(e))}withConverter(e){return new Qi(this.firestore,e,this._path)}}function Uc(t,e,...n){if(t=Zt(t),Ix("collection","path",e),t instanceof zf){const r=it.fromString(e,...n);return q0(r),new Qi(t,null,r)}{if(!(t instanceof Un||t instanceof Qi))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return q0(r),new Qi(t.firestore,null,r)}}function es(t,e,...n){if(t=Zt(t),arguments.length===1&&(e=yS.newId()),Ix("doc","path",e),t instanceof zf){const r=it.fromString(e,...n);return z0(r),new Un(t,null,new fe(r))}{if(!(t instanceof Un||t instanceof Qi))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return z0(r),new Un(t.firestore,t instanceof Qi?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new nx(this,"async_queue_retry"),this.Vu=()=>{const r=sg();r&&le("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=sg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new vs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Lc(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ei("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=bv.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ve()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Nl extends zf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new W0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new W0(e),this._firestoreClient=void 0,await e}}}function XL(t,e){const n=K_(),r="(default)",s=oa(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=IP("firestore");i&&YL(s,...i)}return s}function qf(t){if(t._terminated)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||ZL(t),t._firestoreClient}function ZL(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,c,d){return new kO(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Tx(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new zL(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class t2{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l(en.fromBase64String(e))}catch(n){throw new ne(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _l(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^__.*__$/;class r2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ua(e,this.data,this.fieldMask,n,this.fieldTransforms):new Mc(e,this.data,n,this.fieldTransforms)}}function xx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class Rv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Rv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return nf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(xx(this.Cu)&&n2.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class s2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ff(e)}Qu(e,n,r,s=!1){return new Rv({Cu:e,methodName:n,qu:r,path:Qt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hf(t){const e=t._freezeSettings(),n=Ff(t._databaseId);return new s2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ax(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Px("Data must be an object, but it was:",o,r);const a=Cx(r,o);let l,c;if(i.merge)l=new Kr(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const m=i2(e,p,n);if(!o.contains(m))throw new ne(K.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);a2(d,m)||d.push(m)}l=new Kr(d),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new r2(new wr(a),l,c)}function kx(t,e,n,r=!1){return Pv(n,t.Qu(r?4:3,e))}function Pv(t,e){if(Rx(t=Zt(t)))return Px("Unsupported field value:",e,t),Cx(t,e);if(t instanceof Sx)return function(r,s){if(!xx(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Pv(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ft.fromDate(r);return{timestampValue:Zh(s.serializer,i)}}if(r instanceof Ft){const i=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zh(s.serializer,i)}}if(r instanceof kv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _l)return{bytesValue:WS(s.serializer,r._byteString)};if(r instanceof Un){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return dv(a.serializer,l)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Bf(r)}`)}(t,e)}function Cx(t,e){const n={};return wS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rl(t,(r,s)=>{const i=Pv(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Rx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof kv||t instanceof _l||t instanceof Un||t instanceof Sx||t instanceof Cv)}function Px(t,e,n){if(!Rx(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Bf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function i2(t,e,n){if((e=Zt(e))instanceof Av)return e._internalPath;if(typeof e=="string")return jx(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const o2=new RegExp("[~\\*/\\[\\]]");function jx(t,e,n){if(e.search(o2)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Av(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ne(K.INVALID_ARGUMENT,a+t+l)}function a2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class l2 extends jv{data(){return super.data()}}function Nv(t,e){return typeof e=="string"?jx(t,e):e instanceof Av?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ov{}class Wf extends Ov{}function c2(t,e,...n){let r=[];e instanceof Ov&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Lv).length,a=i.filter(l=>l instanceof Dv).length;if(o>1||o>0&&a>0)throw new ne(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Dv extends Wf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dv(e,n,r)}_apply(e){const n=this._parse(e);return Nx(e._query,n),new ai(e.firestore,e.converter,xm(e._query,n))}_parse(e){const n=Hf(e.firestore);return function(i,o,a,l,c,d,p){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ne(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){G0(p,d);const y=[];for(const I of p)y.push(K0(l,i,I));m={arrayValue:{values:y}}}else m=K0(l,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||G0(p,d),m=kx(a,o,p,d==="in"||d==="not-in");return Pt.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Lv extends Ov{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)Nx(o,l),o=xm(o,l)}(e._query,n),new ai(e.firestore,e.converter,xm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mv extends Wf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mv(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(i,o)}(e._query,this._field,this._direction);return new ai(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new la(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function d2(t,e="asc"){const n=e,r=Nv("orderBy",t);return Mv._create(r,n)}class Vv extends Wf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Vv(e,n,r)}_apply(e){return new ai(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function h2(t){return Vv._create("limit",t,"F")}class Fv extends Wf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fv(e,n,r)}_apply(e){const n=p2(e,this.type,this._docOrFields,this._inclusive);return new ai(e.firestore,e.converter,function(s,i){return new la(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function f2(...t){return Fv._create("startAfter",t,!1)}function p2(t,e,n,r){if(n[0]=Zt(n[0]),n[0]instanceof jv)return function(i,o,a,l,c){if(!l)throw new ne(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const p of tl(i))if(p.field.isKeyField())d.push(Qh(o,l.key));else{const m=l.data.field(p.field);if(Nf(m))throw new ne(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const y=p.field.canonicalString();throw new ne(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new pl(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Hf(t.firestore);return function(o,a,l,c,d,p){const m=o.explicitOrderBy;if(d.length>m.length)throw new ne(K.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let I=0;I<d.length;I++){const x=d[I];if(m[I].field.isKeyField()){if(typeof x!="string")throw new ne(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof x}`);if(!cv(o)&&x.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${x}' contains a slash.`);const j=o.path.child(it.fromString(x));if(!fe.isDocumentKey(j))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const A=new fe(j);y.push(Qh(a,A))}else{const j=kx(l,c,x);y.push(j)}}return new pl(y,p)}(t._query,t.firestore._databaseId,s,e,n,r)}}function K0(t,e,n){if(typeof(n=Zt(n))=="string"){if(n==="")throw new ne(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cv(e)&&n.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!fe.isDocumentKey(r))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qh(t,new fe(r))}if(n instanceof Un)return Qh(t,n._key);throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bf(n)}.`)}function G0(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Nx(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class g2{convertValue(e,n="none"){switch(Jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rl(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>xt(o.doubleValue));return new Cv(i)}convertGeoPoint(e){return new kv(xt(e.latitude),xt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=iv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(gc(e));default:return null}}convertTimestamp(e){const n=Zi(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);We(ZS(r));const s=new mc(r.get(1),r.get(3)),i=new fe(r.popFirst(5));return s.isEqual(n)||ei(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function m2(){return new e2("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dx extends jv{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ph extends Dx{data(e={}){return super.data(e)}}class _2{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Iu(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ph(this._firestore,this._userDataWriter,r.key,r,new Iu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new ph(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Iu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new ph(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Iu(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:v2(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function v2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){t=ni(t,Un);const e=ni(t.firestore,Nl);return KL(qf(e),t._key).then(n=>w2(e,t,n))}class $v extends g2{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,n)}}function Lx(t){t=ni(t,ai);const e=ni(t.firestore,Nl),n=qf(e),r=new $v(e);return u2(t._query),GL(n,t._query).then(s=>new _2(e,r,t,s))}function y2(t,e,n){t=ni(t,Un);const r=ni(t.firestore,Nl),s=Ox(t.converter,e);return Mx(r,[Ax(Hf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ws.none())])}function Uv(t,e){const n=ni(t.firestore,Nl),r=es(t),s=Ox(t.converter,e);return Mx(n,[Ax(Hf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ws.exists(!1))]).then(()=>r)}function Mx(t,e){return function(r,s){const i=new vs;return r.asyncQueue.enqueueAndForget(async()=>DL(await HL(r),s,i)),i.promise}(qf(t),e)}function w2(t,e,n){const r=n.docs.get(e._key),s=new $v(t);return new Dx(t,s,e._key,r,new Iu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t){return b2(t,{count:m2()})}function b2(t,e){const n=ni(t.firestore,Nl),r=qf(n),s=xO(e,(i,o)=>new oD(o,i.aggregateType,i._internalFieldPath));return QL(r,t._query,s).then(i=>function(a,l,c){const d=new $v(a);return new t2(l,d,c)}(n,t,i))}(function(e,n=!0){(function(s){Cl=s})(Al),Ts(new Yr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Nl(new hO(r.getProvider("auth-internal")),new mO(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ne(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Tr(d0,"4.7.3",e),Tr(d0,"4.7.3","esm2017")})();const Vx="@firebase/installations",Bv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=1e4,$x=`w:${Bv}`,Ux="FIS_v2",T2="https://firebaseinstallations.googleapis.com/v1",I2=60*60*1e3,S2="installations",x2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Yo=new ia(S2,x2,A2);function Bx(t){return t instanceof ts&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zx({projectId:t}){return`${T2}/projects/${t}/installations`}function qx(t){return{token:t.token,requestStatus:2,expiresIn:C2(t.expiresIn),creationTime:Date.now()}}async function Hx(t,e){const r=(await e.json()).error;return Yo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Wx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function k2(t,{refreshToken:e}){const n=Wx(t);return n.append("Authorization",R2(e)),n}async function Kx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function C2(t){return Number(t.replace("s","000"))}function R2(t){return`${Ux} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=zx(t),s=Wx(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:Ux,appId:t.appId,sdkVersion:$x},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Kx(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:qx(c.authToken)}}else throw await Hx("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=/^[cdef][\w-]{21}$/,Dm="";function O2(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=D2(t);return N2.test(n)?n:Dm}catch{return Dm}}function D2(t){return j2(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=new Map;function Jx(t,e){const n=Kf(t);Yx(n,e),L2(n,e)}function Yx(t,e){const n=Qx.get(t);if(n)for(const r of n)r(e)}function L2(t,e){const n=M2();n&&n.postMessage({key:t,fid:e}),V2()}let Oo=null;function M2(){return!Oo&&"BroadcastChannel"in self&&(Oo=new BroadcastChannel("[Firebase] FID Change"),Oo.onmessage=t=>{Yx(t.data.key,t.data.fid)}),Oo}function V2(){Qx.size===0&&Oo&&(Oo.close(),Oo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="firebase-installations-database",$2=1,Xo="firebase-installations-store";let og=null;function zv(){return og||(og=AI(F2,$2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Xo)}}})),og}async function rf(t,e){const n=Kf(t),s=(await zv()).transaction(Xo,"readwrite"),i=s.objectStore(Xo),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Jx(t,e.fid),e}async function Xx(t){const e=Kf(t),r=(await zv()).transaction(Xo,"readwrite");await r.objectStore(Xo).delete(e),await r.done}async function Gf(t,e){const n=Kf(t),s=(await zv()).transaction(Xo,"readwrite"),i=s.objectStore(Xo),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&Jx(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qv(t){let e;const n=await Gf(t.appConfig,r=>{const s=U2(r),i=B2(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Dm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function U2(t){const e=t||{fid:O2(),registrationStatus:0};return Zx(e)}function B2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Yo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=z2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:q2(t)}:{installationEntry:e}}async function z2(t,e){try{const n=await P2(t,e);return rf(t.appConfig,n)}catch(n){throw Bx(n)&&n.customData.serverCode===409?await Xx(t.appConfig):await rf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function q2(t){let e=await Q0(t.appConfig);for(;e.registrationStatus===1;)await Gx(100),e=await Q0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await qv(t);return r||n}return e}function Q0(t){return Gf(t,e=>{if(!e)throw Yo.create("installation-not-found");return Zx(e)})}function Zx(t){return H2(t)?{fid:t.fid,registrationStatus:0}:t}function H2(t){return t.registrationStatus===1&&t.registrationTime+Fx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2({appConfig:t,heartbeatServiceProvider:e},n){const r=K2(t,n),s=k2(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:$x,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Kx(()=>fetch(r,a));if(l.ok){const c=await l.json();return qx(c)}else throw await Hx("Generate Auth Token",l)}function K2(t,{fid:e}){return`${zx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hv(t,e=!1){let n;const r=await Gf(t.appConfig,i=>{if(!eA(i))throw Yo.create("not-registered");const o=i.authToken;if(!e&&J2(o))return i;if(o.requestStatus===1)return n=G2(t,e),i;{if(!navigator.onLine)throw Yo.create("app-offline");const a=X2(i);return n=Q2(t,a),a}});return n?await n:r.authToken}async function G2(t,e){let n=await J0(t.appConfig);for(;n.authToken.requestStatus===1;)await Gx(100),n=await J0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Hv(t,e):r}function J0(t){return Gf(t,e=>{if(!eA(e))throw Yo.create("not-registered");const n=e.authToken;return Z2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Q2(t,e){try{const n=await W2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await rf(t.appConfig,r),n}catch(n){if(Bx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Xx(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await rf(t.appConfig,r)}throw n}}function eA(t){return t!==void 0&&t.registrationStatus===2}function J2(t){return t.requestStatus===2&&!Y2(t)}function Y2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+I2}function X2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Z2(t){return t.requestStatus===1&&t.requestTime+Fx<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t){const e=t,{installationEntry:n,registrationPromise:r}=await qv(e);return r?r.catch(console.error):Hv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e=!1){const n=t;return await nM(n),(await Hv(n,e)).token}async function nM(t){const{registrationPromise:e}=await qv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t){if(!t||!t.options)throw ag("App Configuration");if(!t.name)throw ag("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ag(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ag(t){return Yo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="installations",sM="installations-internal",iM=t=>{const e=t.getProvider("app").getImmediate(),n=rM(e),r=oa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},oM=t=>{const e=t.getProvider("app").getImmediate(),n=oa(e,tA).getImmediate();return{getId:()=>eM(n),getToken:s=>tM(n,s)}};function aM(){Ts(new Yr(tA,iM,"PUBLIC")),Ts(new Yr(sM,oM,"PRIVATE"))}aM();Tr(Vx,Bv);Tr(Vx,Bv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="analytics",lM="firebase_id",uM="origin",cM=60*1e3,dM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new kf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},er=new ia("analytics","Analytics",hM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t){if(!t.startsWith(Wv)){const e=er.create("invalid-gtag-resource",{gtagURL:t});return Bn.warn(e.message),""}return t}function nA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function pM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function gM(t,e){const n=pM("firebase-js-sdk-policy",{createScriptURL:fM}),r=document.createElement("script"),s=`${Wv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function mM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _M(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await nA(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){Bn.error(a)}t("config",s,i)}async function vM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await nA(n);for(const l of o){const c=a.find(p=>p.measurementId===l),d=c&&e[c.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Bn.error(i)}}function yM(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await vM(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await _M(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Bn.error(a)}}return s}function wM(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=yM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function EM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Wv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=30,TM=1e3;class IM{constructor(e={},n=TM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const rA=new IM;function SM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function xM(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:SM(r)},i=dM.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function AM(t,e=rA,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw er.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw er.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new RM;return setTimeout(async()=>{a.abort()},cM),sA({appId:r,apiKey:s,measurementId:i},o,a,e)}async function sA(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=rA){var i;const{appId:o,measurementId:a}=t;try{await kM(r,e)}catch(l){if(a)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await xM(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!CM(c)){if(s.deleteThrottleMetadata(o),a)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?Lw(n,s.intervalMillis,bM):Lw(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,p),Bn.debug(`Calling attemptFetch again in ${d} millis`),sA(t,p,r,s)}}function kM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(er.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function CM(t){if(!(t instanceof ts)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class RM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function PM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(){if(TI())try{await II()}catch(t){return Bn.warn(er.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Bn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function NM(t,e,n,r,s,i,o){var a;const l=AM(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Bn.error(y)),e.push(l);const c=jM().then(y=>{if(y)return r.getId()}),[d,p]=await Promise.all([l,c]);EM(i)||gM(i,d.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[uM]="firebase",m.update=!0,p!=null&&(m[lM]=p),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.app=e}_delete(){return delete $u[this.app.options.appId],Promise.resolve()}}let $u={},Y0=[];const X0={};let lg="dataLayer",DM="gtag",Z0,iA,eE=!1;function LM(){const t=[];if(bI()&&t.push("This is a browser extension environment."),NP()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=er.create("invalid-analytics-context",{errorInfo:e});Bn.warn(n.message)}}function MM(t,e,n){LM();const r=t.options.appId;if(!r)throw er.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw er.create("no-api-key");if($u[r]!=null)throw er.create("already-exists",{id:r});if(!eE){mM(lg);const{wrappedGtag:i,gtagCore:o}=wM($u,Y0,X0,lg,DM);iA=i,Z0=o,eE=!0}return $u[r]=NM(t,Y0,X0,e,Z0,lg,n),new OM(t)}function VM(t=K_()){t=Zt(t);const e=oa(t,sf);return e.isInitialized()?e.getImmediate():FM(t)}function FM(t,e={}){const n=oa(t,sf);if(n.isInitialized()){const s=n.getImmediate();if(cc(e,n.getOptions()))return s;throw er.create("already-initialized")}return n.initialize({options:e})}function $M(t,e,n,r){t=Zt(t),PM(iA,$u[t.app.options.appId],e,n,r).catch(s=>Bn.error(s))}const tE="@firebase/analytics",nE="0.10.8";function UM(){Ts(new Yr(sf,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return MM(r,s,n)},"PUBLIC")),Ts(new Yr("analytics-internal",t,"PRIVATE")),Tr(tE,nE),Tr(tE,nE,"esm2017");function t(e){try{const n=e.getProvider(sf).getImmediate();return{logEvent:(r,s,i)=>$M(n,r,s,i)}}catch(n){throw er.create("interop-component-reg-failed",{reason:n})}}}UM();const BM={apiKey:"AIzaSyDR27NVCQmVwVNZfNXVGpLKSsJj8f2Filg",authDomain:"darelom-students.firebaseapp.com",projectId:"darelom-students",storageBucket:"darelom-students.firebasestorage.app",messagingSenderId:"993473208393",appId:"1:993473208393:web:294652795108cc161c5f98",measurementId:"G-1K85RQXZQ1"},zM=kI(BM),An=XL(),Qf=oO();VM(zM);/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function mt(){return mt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},mt.apply(this,arguments)}var Ct;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ct||(Ct={}));const rE="popstate";function qM(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=li(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ec("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:ea(i))}function r(s,i){Zo(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return WM(e,n,r,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zo(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HM(){return Math.random().toString(36).substr(2,8)}function sE(t,e){return{usr:t.state,key:t.key,idx:e}}function Ec(t,e,n,r){return n===void 0&&(n=null),mt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?li(e):e,{state:n,key:e&&e.key||r||HM()})}function ea(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function li(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WM(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ct.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(mt({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function p(){a=Ct.Pop;let j=d(),A=j==null?null:j-c;c=j,l&&l({action:a,location:x.location,delta:A})}function m(j,A){a=Ct.Push;let E=Ec(x.location,j,A);n&&n(E,j),c=d()+1;let T=sE(E,c),O=x.createHref(E);try{o.pushState(T,"",O)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(O)}i&&l&&l({action:a,location:x.location,delta:1})}function y(j,A){a=Ct.Replace;let E=Ec(x.location,j,A);n&&n(E,j),c=d();let T=sE(E,c),O=x.createHref(E);o.replaceState(T,"",O),i&&l&&l({action:a,location:x.location,delta:0})}function I(j){let A=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof j=="string"?j:ea(j);return E=E.replace(/ $/,"%20"),Se(A,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,A)}let x={get action(){return a},get location(){return t(s,o)},listen(j){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(rE,p),l=j,()=>{s.removeEventListener(rE,p),l=null}},createHref(j){return e(s,j)},createURL:I,encodeLocation(j){let A=I(j);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:m,replace:y,go(j){return o.go(j)}};return x}var Je;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Je||(Je={}));const KM=new Set(["lazy","caseSensitive","path","id","index","children"]);function GM(t){return t.index===!0}function bc(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,i)=>{let o=[...n,String(i)],a=typeof s.id=="string"?s.id:o.join("-");if(Se(s.index!==!0||!s.children,"Cannot specify children on an index route"),Se(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),GM(s)){let l=mt({},s,e(s),{id:a});return r[a]=l,l}else{let l=mt({},s,e(s),{id:a,children:void 0});return r[a]=l,s.children&&(l.children=bc(s.children,e,o,r)),l}})}function ko(t,e,n){return n===void 0&&(n="/"),gh(t,e,n,!1)}function gh(t,e,n,r){let s=typeof e=="string"?li(e):e,i=Ol(s.pathname||"/",n);if(i==null)return null;let o=oA(t);JM(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=aV(i);a=iV(o[l],c,r)}return a}function QM(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function oA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Se(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ks([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Se(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),oA(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:rV(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of aA(i.path))s(i,o,l)}),e}function aA(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=aA(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YM=/^:[\w-]+$/,XM=3,ZM=2,eV=1,tV=10,nV=-2,iE=t=>t==="*";function rV(t,e){let n=t.split("/"),r=n.length;return n.some(iE)&&(r+=nV),e&&(r+=ZM),n.filter(s=>!iE(s)).reduce((s,i)=>s+(YM.test(i)?XM:i===""?eV:tV),r)}function sV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function iV(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=oE({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),m=l.route;if(!p&&c&&n&&!r[r.length-1].route.index&&(p=oE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Ks([i,p.pathname]),pathnameBase:cV(Ks([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Ks([i,p.pathnameBase]))}return o}function oE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oV(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,p)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let x=a[p]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const I=a[p];return y&&!I?c[m]=void 0:c[m]=(I||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function oV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Zo(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Zo(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ol(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function lV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?li(t):t;return{pathname:n?n.startsWith("/")?n:uV(n,e):e,search:dV(r),hash:hV(s)}}function uV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ug(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jf(t,e){let n=lA(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=li(t):(s=mt({},t),Se(!s.pathname||!s.pathname.includes("?"),ug("?","pathname","search",s)),Se(!s.pathname||!s.pathname.includes("#"),ug("#","pathname","hash",s)),Se(!s.search||!s.search.includes("#"),ug("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=lV(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ks=t=>t.join("/").replace(/\/\/+/g,"/"),cV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class of{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Xf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const uA=["post","put","patch","delete"],fV=new Set(uA),pV=["get",...uA],gV=new Set(pV),mV=new Set([301,302,303,307,308]),_V=new Set([307,308]),cg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Kv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yV=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),cA="remix-router-transitions";function wV(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Se(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;s=$=>({hasErrorBoundary:L($)})}else s=yV;let i={},o=bc(t.routes,s,void 0,i),a,l=t.basename||"/",c=t.unstable_dataStrategy||SV,d=t.unstable_patchRoutesOnMiss,p=mt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,y=new Set,I=null,x=null,j=null,A=t.hydrationData!=null,E=ko(o,t.history.location,l),T=null;if(E==null&&!d){let L=bn(404,{pathname:t.history.location.pathname}),{matches:$,route:z}=mE(o);E=$,T={[z.id]:L}}E&&!t.hydrationData&&hr(E,o,t.history.location.pathname).active&&(E=null);let O;if(E)if(E.some(L=>L.route.lazy))O=!1;else if(!E.some(L=>L.route.loader))O=!0;else if(p.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,$=t.hydrationData?t.hydrationData.errors:null,z=W=>W.route.loader?typeof W.route.loader=="function"&&W.route.loader.hydrate===!0?!1:L&&L[W.route.id]!==void 0||$&&$[W.route.id]!==void 0:!0;if($){let W=E.findIndex(te=>$[te.route.id]!==void 0);O=E.slice(0,W+1).every(z)}else O=E.every(z)}else O=t.hydrationData!=null;else if(O=!1,E=[],p.v7_partialHydration){let L=hr(null,o,t.history.location.pathname);L.active&&L.matches&&(E=L.matches)}let B,R={historyAction:t.history.action,location:t.history.location,matches:E,initialized:O,navigation:cg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||T,fetchers:new Map,blockers:new Map},k=Ct.Pop,w=!1,S,C=!1,N=new Map,V=null,P=!1,me=!1,Ye=[],Xe=new Set,we=new Map,X=0,ae=-1,de=new Map,xe=new Set,be=new Map,H=new Map,ze=new Set,Ke=new Map,Ze=new Map,nt=new Map,Nt=!1;function Ot(){if(m=t.history.listen(L=>{let{action:$,location:z,delta:W}=L;if(Nt){Nt=!1;return}Zo(Ze.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=co({currentLocation:R.location,nextLocation:z,historyAction:$});if(te&&W!=null){Nt=!0,t.history.go(W*-1),Cs(te,{state:"blocked",location:z,proceed(){Cs(te,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),t.history.go(W)},reset(){let ie=new Map(R.blockers);ie.set(te,cu),rt({blockers:ie})}});return}return Dt($,z)}),n){VV(e,N);let L=()=>FV(e,N);e.addEventListener("pagehide",L),V=()=>e.removeEventListener("pagehide",L)}return R.initialized||Dt(Ct.Pop,R.location,{initialHydration:!0}),B}function ur(){m&&m(),V&&V(),y.clear(),S&&S.abort(),R.fetchers.forEach((L,$)=>qn($)),R.blockers.forEach((L,$)=>ci($))}function se(L){return y.add(L),()=>y.delete(L)}function rt(L,$){$===void 0&&($={}),R=mt({},R,L);let z=[],W=[];p.v7_fetcherPersist&&R.fetchers.forEach((te,ie)=>{te.state==="idle"&&(ze.has(ie)?W.push(ie):z.push(ie))}),[...y].forEach(te=>te(R,{deletedFetchers:W,unstable_viewTransitionOpts:$.viewTransitionOpts,unstable_flushSync:$.flushSync===!0})),p.v7_fetcherPersist&&(z.forEach(te=>R.fetchers.delete(te)),W.forEach(te=>qn(te)))}function nn(L,$,z){var W,te;let{flushSync:ie}=z===void 0?{}:z,he=R.actionData!=null&&R.navigation.formMethod!=null&&qr(R.navigation.formMethod)&&R.navigation.state==="loading"&&((W=L.state)==null?void 0:W._isRedirect)!==!0,Y;$.actionData?Object.keys($.actionData).length>0?Y=$.actionData:Y=null:he?Y=R.actionData:Y=null;let _e=$.loaderData?pE(R.loaderData,$.loaderData,$.matches||[],$.errors):R.loaderData,ue=R.blockers;ue.size>0&&(ue=new Map(ue),ue.forEach((ke,Fe)=>ue.set(Fe,cu)));let ce=w===!0||R.navigation.formMethod!=null&&qr(R.navigation.formMethod)&&((te=L.state)==null?void 0:te._isRedirect)!==!0;a&&(o=a,a=void 0),P||k===Ct.Pop||(k===Ct.Push?t.history.push(L,L.state):k===Ct.Replace&&t.history.replace(L,L.state));let Ae;if(k===Ct.Pop){let ke=N.get(R.location.pathname);ke&&ke.has(L.pathname)?Ae={currentLocation:R.location,nextLocation:L}:N.has(L.pathname)&&(Ae={currentLocation:L,nextLocation:R.location})}else if(C){let ke=N.get(R.location.pathname);ke?ke.add(L.pathname):(ke=new Set([L.pathname]),N.set(R.location.pathname,ke)),Ae={currentLocation:R.location,nextLocation:L}}rt(mt({},$,{actionData:Y,loaderData:_e,historyAction:k,location:L,initialized:!0,navigation:cg,revalidation:"idle",restoreScrollPosition:ho(L,$.matches||R.matches),preventScrollReset:ce,blockers:ue}),{viewTransitionOpts:Ae,flushSync:ie===!0}),k=Ct.Pop,w=!1,C=!1,P=!1,me=!1,Ye=[]}async function ns(L,$){if(typeof L=="number"){t.history.go(L);return}let z=Lm(R.location,R.matches,l,p.v7_prependBasename,L,p.v7_relativeSplatPath,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:W,submission:te,error:ie}=aE(p.v7_normalizeFormMethod,!1,z,$),he=R.location,Y=Ec(R.location,W,$&&$.state);Y=mt({},Y,t.history.encodeLocation(Y));let _e=$&&$.replace!=null?$.replace:void 0,ue=Ct.Push;_e===!0?ue=Ct.Replace:_e===!1||te!=null&&qr(te.formMethod)&&te.formAction===R.location.pathname+R.location.search&&(ue=Ct.Replace);let ce=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,Ae=($&&$.unstable_flushSync)===!0,ke=co({currentLocation:he,nextLocation:Y,historyAction:ue});if(ke){Cs(ke,{state:"blocked",location:Y,proceed(){Cs(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),ns(L,$)},reset(){let Fe=new Map(R.blockers);Fe.set(ke,cu),rt({blockers:Fe})}});return}return await Dt(ue,Y,{submission:te,pendingError:ie,preventScrollReset:ce,replace:$&&$.replace,enableViewTransition:$&&$.unstable_viewTransition,flushSync:Ae})}function As(){if(et(),rt({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){Dt(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}Dt(k||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation})}}async function Dt(L,$,z){S&&S.abort(),S=null,k=L,P=(z&&z.startUninterruptedRevalidation)===!0,hi(R.location,R.matches),w=(z&&z.preventScrollReset)===!0,C=(z&&z.enableViewTransition)===!0;let W=a||o,te=z&&z.overrideNavigation,ie=ko(W,$,l),he=(z&&z.flushSync)===!0,Y=hr(ie,W,$.pathname);if(Y.active&&Y.matches&&(ie=Y.matches),!ie){let{error:Te,notFoundMatches:lt,route:ut}=Rr($.pathname);nn($,{matches:lt,loaderData:{},errors:{[ut.id]:Te}},{flushSync:he});return}if(R.initialized&&!me&&PV(R.location,$)&&!(z&&z.submission&&qr(z.submission.formMethod))){nn($,{matches:ie},{flushSync:he});return}S=new AbortController;let _e=Ta(t.history,$,S.signal,z&&z.submission),ue;if(z&&z.pendingError)ue=[Ha(ie).route.id,{type:Je.error,error:z.pendingError}];else if(z&&z.submission&&qr(z.submission.formMethod)){let Te=await ks(_e,$,z.submission,ie,Y.active,{replace:z.replace,flushSync:he});if(Te.shortCircuited)return;if(Te.pendingActionResult){let[lt,ut]=Te.pendingActionResult;if(Jn(ut)&&Xf(ut.error)&&ut.error.status===404){S=null,nn($,{matches:Te.matches,loaderData:{},errors:{[lt]:ut.error}});return}}ie=Te.matches||ie,ue=Te.pendingActionResult,te=dg($,z.submission),he=!1,Y.active=!1,_e=Ta(t.history,_e.url,_e.signal)}let{shortCircuited:ce,matches:Ae,loaderData:ke,errors:Fe}=await Ar(_e,$,ie,Y.active,te,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,he,ue);ce||(S=null,nn($,mt({matches:Ae||ie},gE(ue),{loaderData:ke,errors:Fe})))}async function ks(L,$,z,W,te,ie){ie===void 0&&(ie={}),et();let he=LV($,z);if(rt({navigation:he},{flushSync:ie.flushSync===!0}),te){let ue=await Rs(W,$.pathname,L.signal);if(ue.type==="aborted")return{shortCircuited:!0};if(ue.type==="error"){let{boundaryId:ce,error:Ae}=Pr($.pathname,ue);return{matches:ue.partialMatches,pendingActionResult:[ce,{type:Je.error,error:Ae}]}}else if(ue.matches)W=ue.matches;else{let{notFoundMatches:ce,error:Ae,route:ke}=Rr($.pathname);return{matches:ce,pendingActionResult:[ke.id,{type:Je.error,error:Ae}]}}}let Y,_e=Su(W,$);if(!_e.route.action&&!_e.route.lazy)Y={type:Je.error,error:bn(405,{method:L.method,pathname:$.pathname,routeId:_e.route.id})};else if(Y=(await zn("action",L,[_e],W))[0],L.signal.aborted)return{shortCircuited:!0};if(Lo(Y)){let ue;return ie&&ie.replace!=null?ue=ie.replace:ue=dE(Y.response.headers.get("Location"),new URL(L.url),l)===R.location.pathname+R.location.search,await mn(L,Y,{submission:z,replace:ue}),{shortCircuited:!0}}if(Do(Y))throw bn(400,{type:"defer-action"});if(Jn(Y)){let ue=Ha(W,_e.route.id);return(ie&&ie.replace)!==!0&&(k=Ct.Push),{matches:W,pendingActionResult:[ue.route.id,Y]}}return{matches:W,pendingActionResult:[_e.route.id,Y]}}async function Ar(L,$,z,W,te,ie,he,Y,_e,ue,ce){let Ae=te||dg($,ie),ke=ie||he||wE(Ae),Fe=!P&&(!p.v7_partialHydration||!_e);if(W){if(Fe){let tt=Rn(ce);rt(mt({navigation:Ae},tt!==void 0?{actionData:tt}:{}),{flushSync:ue})}let pe=await Rs(z,$.pathname,L.signal);if(pe.type==="aborted")return{shortCircuited:!0};if(pe.type==="error"){let{boundaryId:tt,error:It}=Pr($.pathname,pe);return{matches:pe.partialMatches,loaderData:{},errors:{[tt]:It}}}else if(pe.matches)z=pe.matches;else{let{error:tt,notFoundMatches:It,route:qe}=Rr($.pathname);return{matches:It,loaderData:{},errors:{[qe.id]:tt}}}}let Te=a||o,[lt,ut]=lE(t.history,R,z,ke,$,p.v7_partialHydration&&_e===!0,p.v7_skipActionErrorRevalidation,me,Ye,Xe,ze,be,xe,Te,l,ce);if(cr(pe=>!(z&&z.some(tt=>tt.route.id===pe))||lt&&lt.some(tt=>tt.route.id===pe)),ae=++X,lt.length===0&&ut.length===0){let pe=ss();return nn($,mt({matches:z,loaderData:{},errors:ce&&Jn(ce[1])?{[ce[0]]:ce[1].error}:null},gE(ce),pe?{fetchers:new Map(R.fetchers)}:{}),{flushSync:ue}),{shortCircuited:!0}}if(Fe){let pe={};if(!W){pe.navigation=Ae;let tt=Rn(ce);tt!==void 0&&(pe.actionData=tt)}ut.length>0&&(pe.fetchers=gn(ut)),rt(pe,{flushSync:ue})}ut.forEach(pe=>{we.has(pe.key)&&rn(pe.key),pe.controller&&we.set(pe.key,pe.controller)});let jr=()=>ut.forEach(pe=>rn(pe.key));S&&S.signal.addEventListener("abort",jr);let{loaderResults:fr,fetcherResults:Hn}=await ht(R.matches,z,lt,ut,L);if(L.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",jr),ut.forEach(pe=>we.delete(pe.key));let Nr=_E([...fr,...Hn]);if(Nr){if(Nr.idx>=lt.length){let pe=ut[Nr.idx-lt.length].key;xe.add(pe)}return await mn(L,Nr.result,{replace:Y}),{shortCircuited:!0}}let{loaderData:pr,errors:Lt}=fE(R,z,lt,fr,ce,ut,Hn,Ke);Ke.forEach((pe,tt)=>{pe.subscribe(It=>{(It||pe.done)&&Ke.delete(tt)})}),p.v7_partialHydration&&_e&&R.errors&&Object.entries(R.errors).filter(pe=>{let[tt]=pe;return!lt.some(It=>It.route.id===tt)}).forEach(pe=>{let[tt,It]=pe;Lt=Object.assign(Lt||{},{[tt]:It})});let vn=ss(),os=fa(ae),Wn=vn||os||ut.length>0;return mt({matches:z,loaderData:pr,errors:Lt},Wn?{fetchers:new Map(R.fetchers)}:{})}function Rn(L){if(L&&!Jn(L[1]))return{[L[0]]:L[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function gn(L){return L.forEach($=>{let z=R.fetchers.get($.key),W=du(void 0,z?z.data:void 0);R.fetchers.set($.key,W)}),new Map(R.fetchers)}function kr(L,$,z,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");we.has(L)&&rn(L);let te=(W&&W.unstable_flushSync)===!0,ie=a||o,he=Lm(R.location,R.matches,l,p.v7_prependBasename,z,p.v7_relativeSplatPath,$,W==null?void 0:W.relative),Y=ko(ie,he,l),_e=hr(Y,ie,he);if(_e.active&&_e.matches&&(Y=_e.matches),!Y){_n(L,$,bn(404,{pathname:he}),{flushSync:te});return}let{path:ue,submission:ce,error:Ae}=aE(p.v7_normalizeFormMethod,!0,he,W);if(Ae){_n(L,$,Ae,{flushSync:te});return}let ke=Su(Y,ue);if(w=(W&&W.preventScrollReset)===!0,ce&&qr(ce.formMethod)){ui(L,$,ue,ke,Y,_e.active,te,ce);return}be.set(L,{routeId:$,path:ue}),rs(L,$,ue,ke,Y,_e.active,te,ce)}async function ui(L,$,z,W,te,ie,he,Y){et(),be.delete(L);function _e(qe){if(!qe.route.action&&!qe.route.lazy){let yn=bn(405,{method:Y.formMethod,pathname:z,routeId:$});return _n(L,$,yn,{flushSync:he}),!0}return!1}if(!ie&&_e(W))return;let ue=R.fetchers.get(L);at(L,MV(Y,ue),{flushSync:he});let ce=new AbortController,Ae=Ta(t.history,z,ce.signal,Y);if(ie){let qe=await Rs(te,z,Ae.signal);if(qe.type==="aborted")return;if(qe.type==="error"){let{error:yn}=Pr(z,qe);_n(L,$,yn,{flushSync:he});return}else if(qe.matches){if(te=qe.matches,W=Su(te,z),_e(W))return}else{_n(L,$,bn(404,{pathname:z}),{flushSync:he});return}}we.set(L,ce);let ke=X,Te=(await zn("action",Ae,[W],te))[0];if(Ae.signal.aborted){we.get(L)===ce&&we.delete(L);return}if(p.v7_fetcherPersist&&ze.has(L)){if(Lo(Te)||Jn(Te)){at(L,Ti(void 0));return}}else{if(Lo(Te))if(we.delete(L),ae>ke){at(L,Ti(void 0));return}else return xe.add(L),at(L,du(Y)),mn(Ae,Te,{fetcherSubmission:Y});if(Jn(Te)){_n(L,$,Te.error);return}}if(Do(Te))throw bn(400,{type:"defer-action"});let lt=R.navigation.location||R.location,ut=Ta(t.history,lt,ce.signal),jr=a||o,fr=R.navigation.state!=="idle"?ko(jr,R.navigation.location,l):R.matches;Se(fr,"Didn't find any matches after fetcher action");let Hn=++X;de.set(L,Hn);let Nr=du(Y,Te.data);R.fetchers.set(L,Nr);let[pr,Lt]=lE(t.history,R,fr,Y,lt,!1,p.v7_skipActionErrorRevalidation,me,Ye,Xe,ze,be,xe,jr,l,[W.route.id,Te]);Lt.filter(qe=>qe.key!==L).forEach(qe=>{let yn=qe.key,fo=R.fetchers.get(yn),pa=du(void 0,fo?fo.data:void 0);R.fetchers.set(yn,pa),we.has(yn)&&rn(yn),qe.controller&&we.set(yn,qe.controller)}),rt({fetchers:new Map(R.fetchers)});let vn=()=>Lt.forEach(qe=>rn(qe.key));ce.signal.addEventListener("abort",vn);let{loaderResults:os,fetcherResults:Wn}=await ht(R.matches,fr,pr,Lt,ut);if(ce.signal.aborted)return;ce.signal.removeEventListener("abort",vn),de.delete(L),we.delete(L),Lt.forEach(qe=>we.delete(qe.key));let pe=_E([...os,...Wn]);if(pe){if(pe.idx>=pr.length){let qe=Lt[pe.idx-pr.length].key;xe.add(qe)}return mn(ut,pe.result)}let{loaderData:tt,errors:It}=fE(R,R.matches,pr,os,void 0,Lt,Wn,Ke);if(R.fetchers.has(L)){let qe=Ti(Te.data);R.fetchers.set(L,qe)}fa(Hn),R.navigation.state==="loading"&&Hn>ae?(Se(k,"Expected pending action"),S&&S.abort(),nn(R.navigation.location,{matches:fr,loaderData:tt,errors:It,fetchers:new Map(R.fetchers)})):(rt({errors:It,loaderData:pE(R.loaderData,tt,fr,It),fetchers:new Map(R.fetchers)}),me=!1)}async function rs(L,$,z,W,te,ie,he,Y){let _e=R.fetchers.get(L);at(L,du(Y,_e?_e.data:void 0),{flushSync:he});let ue=new AbortController,ce=Ta(t.history,z,ue.signal);if(ie){let Te=await Rs(te,z,ce.signal);if(Te.type==="aborted")return;if(Te.type==="error"){let{error:lt}=Pr(z,Te);_n(L,$,lt,{flushSync:he});return}else if(Te.matches)te=Te.matches,W=Su(te,z);else{_n(L,$,bn(404,{pathname:z}),{flushSync:he});return}}we.set(L,ue);let Ae=X,Fe=(await zn("loader",ce,[W],te))[0];if(Do(Fe)&&(Fe=await gA(Fe,ce.signal,!0)||Fe),we.get(L)===ue&&we.delete(L),!ce.signal.aborted){if(ze.has(L)){at(L,Ti(void 0));return}if(Lo(Fe))if(ae>Ae){at(L,Ti(void 0));return}else{xe.add(L),await mn(ce,Fe);return}if(Jn(Fe)){_n(L,$,Fe.error);return}Se(!Do(Fe),"Unhandled fetcher deferred data"),at(L,Ti(Fe.data))}}async function mn(L,$,z){let{submission:W,fetcherSubmission:te,replace:ie}=z===void 0?{}:z;$.response.headers.has("X-Remix-Revalidate")&&(me=!0);let he=$.response.headers.get("Location");Se(he,"Expected a Location header on the redirect Response"),he=dE(he,new URL(L.url),l);let Y=Ec(R.location,he,{_isRedirect:!0});if(n){let Fe=!1;if($.response.headers.has("X-Remix-Reload-Document"))Fe=!0;else if(Kv.test(he)){const Te=t.history.createURL(he);Fe=Te.origin!==e.location.origin||Ol(Te.pathname,l)==null}if(Fe){ie?e.location.replace(he):e.location.assign(he);return}}S=null;let _e=ie===!0||$.response.headers.has("X-Remix-Replace")?Ct.Replace:Ct.Push,{formMethod:ue,formAction:ce,formEncType:Ae}=R.navigation;!W&&!te&&ue&&ce&&Ae&&(W=wE(R.navigation));let ke=W||te;if(_V.has($.response.status)&&ke&&qr(ke.formMethod))await Dt(_e,Y,{submission:mt({},ke,{formAction:he}),preventScrollReset:w});else{let Fe=dg(Y,W);await Dt(_e,Y,{overrideNavigation:Fe,fetcherSubmission:te,preventScrollReset:w})}}async function zn(L,$,z,W){try{let te=await xV(c,L,$,z,W,i,s);return await Promise.all(te.map((ie,he)=>{if(NV(ie)){let Y=ie.result;return{type:Je.redirect,response:CV(Y,$,z[he].route.id,W,l,p.v7_relativeSplatPath)}}return kV(ie)}))}catch(te){return z.map(()=>({type:Je.error,error:te}))}}async function ht(L,$,z,W,te){let[ie,...he]=await Promise.all([z.length?zn("loader",te,z,$):[],...W.map(Y=>{if(Y.matches&&Y.match&&Y.controller){let _e=Ta(t.history,Y.path,Y.controller.signal);return zn("loader",_e,[Y.match],Y.matches).then(ue=>ue[0])}else return Promise.resolve({type:Je.error,error:bn(404,{pathname:Y.path})})})]);return await Promise.all([yE(L,z,ie,ie.map(()=>te.signal),!1,R.loaderData),yE(L,W.map(Y=>Y.match),he,W.map(Y=>Y.controller?Y.controller.signal:null),!0)]),{loaderResults:ie,fetcherResults:he}}function et(){me=!0,Ye.push(...cr()),be.forEach((L,$)=>{we.has($)&&(Xe.add($),rn($))})}function at(L,$,z){z===void 0&&(z={}),R.fetchers.set(L,$),rt({fetchers:new Map(R.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function _n(L,$,z,W){W===void 0&&(W={});let te=Ha(R.matches,$);qn(L),rt({errors:{[te.route.id]:z},fetchers:new Map(R.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Cr(L){return p.v7_fetcherPersist&&(H.set(L,(H.get(L)||0)+1),ze.has(L)&&ze.delete(L)),R.fetchers.get(L)||vV}function qn(L){let $=R.fetchers.get(L);we.has(L)&&!($&&$.state==="loading"&&de.has(L))&&rn(L),be.delete(L),de.delete(L),xe.delete(L),ze.delete(L),Xe.delete(L),R.fetchers.delete(L)}function Pn(L){if(p.v7_fetcherPersist){let $=(H.get(L)||0)-1;$<=0?(H.delete(L),ze.add(L)):H.set(L,$)}else qn(L);rt({fetchers:new Map(R.fetchers)})}function rn(L){let $=we.get(L);Se($,"Expected fetch controller: "+L),$.abort(),we.delete(L)}function uo(L){for(let $ of L){let z=Cr($),W=Ti(z.data);R.fetchers.set($,W)}}function ss(){let L=[],$=!1;for(let z of xe){let W=R.fetchers.get(z);Se(W,"Expected fetcher: "+z),W.state==="loading"&&(xe.delete(z),L.push(z),$=!0)}return uo(L),$}function fa(L){let $=[];for(let[z,W]of de)if(W<L){let te=R.fetchers.get(z);Se(te,"Expected fetcher: "+z),te.state==="loading"&&(rn(z),de.delete(z),$.push(z))}return uo($),$.length>0}function $l(L,$){let z=R.blockers.get(L)||cu;return Ze.get(L)!==$&&Ze.set(L,$),z}function ci(L){R.blockers.delete(L),Ze.delete(L)}function Cs(L,$){let z=R.blockers.get(L)||cu;Se(z.state==="unblocked"&&$.state==="blocked"||z.state==="blocked"&&$.state==="blocked"||z.state==="blocked"&&$.state==="proceeding"||z.state==="blocked"&&$.state==="unblocked"||z.state==="proceeding"&&$.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+$.state);let W=new Map(R.blockers);W.set(L,$),rt({blockers:W})}function co(L){let{currentLocation:$,nextLocation:z,historyAction:W}=L;if(Ze.size===0)return;Ze.size>1&&Zo(!1,"A router only supports one blocker at a time");let te=Array.from(Ze.entries()),[ie,he]=te[te.length-1],Y=R.blockers.get(ie);if(!(Y&&Y.state==="proceeding")&&he({currentLocation:$,nextLocation:z,historyAction:W}))return ie}function Rr(L){let $=bn(404,{pathname:L}),z=a||o,{matches:W,route:te}=mE(z);return cr(),{notFoundMatches:W,route:te,error:$}}function Pr(L,$){return{boundaryId:Ha($.partialMatches).route.id,error:bn(400,{type:"route-discovery",pathname:L,message:$.error!=null&&"message"in $.error?$.error:String($.error)})}}function cr(L){let $=[];return Ke.forEach((z,W)=>{(!L||L(W))&&(z.cancel(),$.push(W),Ke.delete(W))}),$}function dr(L,$,z){if(I=L,j=$,x=z||null,!A&&R.navigation===cg){A=!0;let W=ho(R.location,R.matches);W!=null&&rt({restoreScrollPosition:W})}return()=>{I=null,j=null,x=null}}function di(L,$){return x&&x(L,$.map(W=>QM(W,R.loaderData)))||L.key}function hi(L,$){if(I&&j){let z=di(L,$);I[z]=j()}}function ho(L,$){if(I){let z=di(L,$),W=I[z];if(typeof W=="number")return W}return null}function hr(L,$,z){if(d)if(L){let W=L[L.length-1].route;if(W.path&&(W.path==="*"||W.path.endsWith("/*")))return{active:!0,matches:gh($,z,l,!0)}}else return{active:!0,matches:gh($,z,l,!0)||[]};return{active:!1,matches:null}}async function Rs(L,$,z){let W=L,te=W.length>0?W[W.length-1].route:null;for(;;){let ie=a==null,he=a||o;try{await IV(d,$,W,he,i,s,nt,z)}catch(ce){return{type:"error",error:ce,partialMatches:W}}finally{ie&&(o=[...o])}if(z.aborted)return{type:"aborted"};let Y=ko(he,$,l),_e=!1;if(Y){let ce=Y[Y.length-1].route;if(ce.index)return{type:"success",matches:Y};if(ce.path&&ce.path.length>0)if(ce.path==="*")_e=!0;else return{type:"success",matches:Y}}let ue=gh(he,$,l,!0);if(!ue||W.map(ce=>ce.route.id).join("-")===ue.map(ce=>ce.route.id).join("-"))return{type:"success",matches:_e?Y:null};if(W=ue,te=W[W.length-1].route,te.path==="*")return{type:"success",matches:W}}}function ft(L){i={},a=bc(L,s,void 0,i)}function is(L,$){let z=a==null;hA(L,$,a||o,i,s),z&&(o=[...o],rt({}))}return B={get basename(){return l},get future(){return p},get state(){return R},get routes(){return o},get window(){return e},initialize:Ot,subscribe:se,enableScrollRestoration:dr,navigate:ns,fetch:kr,revalidate:As,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:Cr,deleteFetcher:Pn,dispose:ur,getBlocker:$l,deleteBlocker:ci,patchRoutes:is,_internalFetchControllers:we,_internalActiveDeferreds:Ke,_internalSetRoutes:ft},B}function EV(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Lm(t,e,n,r,s,i,o,a){let l,c;if(o){l=[];for(let p of e)if(l.push(p),p.route.id===o){c=p;break}}else l=e,c=e[e.length-1];let d=Yf(s||".",Jf(l,i),Ol(t.pathname,n)||t.pathname,a==="path");return s==null&&(d.search=t.search,d.hash=t.hash),(s==null||s===""||s===".")&&c&&c.route.index&&!Gv(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Ks([n,d.pathname])),ea(d)}function aE(t,e,n,r){if(!r||!EV(r))return{path:n};if(r.formMethod&&!DV(r.formMethod))return{path:n,error:bn(405,{method:r.formMethod})};let s=()=>({path:n,error:bn(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),a=fA(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!qr(o))return s();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,I)=>{let[x,j]=I;return""+y+x+"="+j+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!qr(o))return s();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return s()}}}Se(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Mm(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Mm(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=hE(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=hE(l)}catch{return s()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(qr(d.formMethod))return{path:n,submission:d};let p=li(n);return e&&p.search&&Gv(p.search)&&l.append("index",""),p.search="?"+l,{path:ea(p),submission:d}}function bV(t,e){let n=t;if(e){let r=t.findIndex(s=>s.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function lE(t,e,n,r,s,i,o,a,l,c,d,p,m,y,I,x){let j=x?Jn(x[1])?x[1].error:x[1].data:void 0,A=t.createURL(e.location),E=t.createURL(s),T=x&&Jn(x[1])?x[0]:void 0,O=T?bV(n,T):n,B=x?x[1].statusCode:void 0,R=o&&B&&B>=400,k=O.filter((S,C)=>{let{route:N}=S;if(N.lazy)return!0;if(N.loader==null)return!1;if(i)return typeof N.loader!="function"||N.loader.hydrate?!0:e.loaderData[N.id]===void 0&&(!e.errors||e.errors[N.id]===void 0);if(TV(e.loaderData,e.matches[C],S)||l.some(me=>me===S.route.id))return!0;let V=e.matches[C],P=S;return uE(S,mt({currentUrl:A,currentParams:V.params,nextUrl:E,nextParams:P.params},r,{actionResult:j,actionStatus:B,defaultShouldRevalidate:R?!1:a||A.pathname+A.search===E.pathname+E.search||A.search!==E.search||dA(V,P)}))}),w=[];return p.forEach((S,C)=>{if(i||!n.some(Ye=>Ye.route.id===S.routeId)||d.has(C))return;let N=ko(y,S.path,I);if(!N){w.push({key:C,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let V=e.fetchers.get(C),P=Su(N,S.path),me=!1;m.has(C)?me=!1:c.has(C)?(c.delete(C),me=!0):V&&V.state!=="idle"&&V.data===void 0?me=a:me=uE(P,mt({currentUrl:A,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:j,actionStatus:B,defaultShouldRevalidate:R?!1:a})),me&&w.push({key:C,routeId:S.routeId,path:S.path,matches:N,match:P,controller:new AbortController})}),[k,w]}function TV(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function dA(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function uE(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function IV(t,e,n,r,s,i,o,a){let l=[e,...n.map(c=>c.route.id)].join("-");try{let c=o.get(l);c||(c=t({path:e,matches:n,patch:(d,p)=>{a.aborted||hA(d,p,r,s,i)}}),o.set(l,c)),c&&jV(c)&&await c}finally{o.delete(l)}}function hA(t,e,n,r,s){if(t){var i;let o=r[t];Se(o,"No route found to patch children into: routeId = "+t);let a=bc(e,s,[t,"patch",String(((i=o.children)==null?void 0:i.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=bc(e,s,["patch",String(n.length||"0")],r);n.push(...o)}}async function cE(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];Se(s,"No route found in manifest");let i={};for(let o in r){let l=s[o]!==void 0&&o!=="hasErrorBoundary";Zo(!l,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!KM.has(o)&&(i[o]=r[o])}Object.assign(s,i),Object.assign(s,mt({},e(s),{lazy:void 0}))}function SV(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function xV(t,e,n,r,s,i,o,a){let l=r.reduce((p,m)=>p.add(m.route.id),new Set),c=new Set,d=await t({matches:s.map(p=>{let m=l.has(p.route.id);return mt({},p,{shouldLoad:m,resolve:I=>(c.add(p.route.id),m?AV(e,n,p,i,o,I,a):Promise.resolve({type:Je.data,result:void 0}))})}),request:n,params:s[0].params,context:a});return s.forEach(p=>Se(c.has(p.route.id),'`match.resolve()` was not called for route id "'+p.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((p,m)=>l.has(s[m].route.id))}async function AV(t,e,n,r,s,i,o){let a,l,c=d=>{let p,m=new Promise((x,j)=>p=j);l=()=>p(),e.signal.addEventListener("abort",l);let y=x=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):d({request:e,params:n.params,context:o},...x!==void 0?[x]:[]),I;return i?I=i(x=>y(x)):I=(async()=>{try{return{type:"data",result:await y()}}catch(x){return{type:"error",result:x}}})(),Promise.race([I,m])};try{let d=n.route[t];if(n.route.lazy)if(d){let p,[m]=await Promise.all([c(d).catch(y=>{p=y}),cE(n.route,s,r)]);if(p!==void 0)throw p;a=m}else if(await cE(n.route,s,r),d=n.route[t],d)a=await c(d);else if(t==="action"){let p=new URL(e.url),m=p.pathname+p.search;throw bn(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:Je.data,result:void 0};else if(d)a=await c(d);else{let p=new URL(e.url),m=p.pathname+p.search;throw bn(404,{pathname:m})}Se(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Je.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function kV(t){let{result:e,type:n}=t;if(pA(e)){let c;try{let d=e.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(d){return{type:Je.error,error:d}}return n===Je.error?{type:Je.error,error:new of(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:Je.data,data:c,statusCode:e.status,headers:e.headers}}if(n===Je.error){if(vE(e)){var r;if(e.data instanceof Error){var s;return{type:Je.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status}}e=new of(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:Je.error,error:e,statusCode:Xf(e)?e.status:void 0}}if(OV(e)){var i,o;return{type:Je.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(vE(e)){var a,l;return{type:Je.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Je.data,data:e}}function CV(t,e,n,r,s,i){let o=t.headers.get("Location");if(Se(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Kv.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Lm(new URL(e.url),a,s,!0,o,i),t.headers.set("Location",o)}return t}function dE(t,e,n){if(Kv.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=Ol(s.pathname,n)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function Ta(t,e,n,r){let s=t.createURL(fA(e)).toString(),i={signal:n};if(r&&qr(r.formMethod)){let{formMethod:o,formEncType:a}=r;i.method=o.toUpperCase(),a==="application/json"?(i.headers=new Headers({"Content-Type":a}),i.body=JSON.stringify(r.json)):a==="text/plain"?i.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?i.body=Mm(r.formData):i.body=r.formData}return new Request(s,i)}function Mm(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function hE(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function RV(t,e,n,r,s,i){let o={},a=null,l,c=!1,d={},p=r&&Jn(r[1])?r[1].error:void 0;return n.forEach((m,y)=>{let I=e[y].route.id;if(Se(!Lo(m),"Cannot handle redirect results in processLoaderData"),Jn(m)){let x=m.error;p!==void 0&&(x=p,p=void 0),a=a||{};{let j=Ha(t,I);a[j.route.id]==null&&(a[j.route.id]=x)}o[I]=void 0,c||(c=!0,l=Xf(m.error)?m.error.status:500),m.headers&&(d[I]=m.headers)}else Do(m)?(s.set(I,m.deferredData),o[I]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!c&&(l=m.statusCode),m.headers&&(d[I]=m.headers)):(o[I]=m.data,m.statusCode&&m.statusCode!==200&&!c&&(l=m.statusCode),m.headers&&(d[I]=m.headers))}),p!==void 0&&r&&(a={[r[0]]:p},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:d}}function fE(t,e,n,r,s,i,o,a){let{loaderData:l,errors:c}=RV(e,n,r,s,a);for(let d=0;d<i.length;d++){let{key:p,match:m,controller:y}=i[d];Se(o!==void 0&&o[d]!==void 0,"Did not find corresponding fetcher result");let I=o[d];if(!(y&&y.signal.aborted))if(Jn(I)){let x=Ha(t.matches,m==null?void 0:m.route.id);c&&c[x.route.id]||(c=mt({},c,{[x.route.id]:I.error})),t.fetchers.delete(p)}else if(Lo(I))Se(!1,"Unhandled fetcher revalidation redirect");else if(Do(I))Se(!1,"Unhandled fetcher deferred data");else{let x=Ti(I.data);t.fetchers.set(p,x)}}return{loaderData:l,errors:c}}function pE(t,e,n,r){let s=mt({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):t[o]!==void 0&&i.route.loader&&(s[o]=t[o]),r&&r.hasOwnProperty(o))break}return s}function gE(t){return t?Jn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ha(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function mE(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function bn(t,e){let{pathname:n,routeId:r,method:s,type:i,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",i==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+o):s&&n&&r?l="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?l="defer() is not supported in actions":i==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",s&&n&&r?l="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new of(t||500,a,new Error(l),!0)}function _E(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Lo(n))return{result:n,idx:e}}}function fA(t){let e=typeof t=="string"?li(t):t;return ea(mt({},e,{hash:""}))}function PV(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function jV(t){return typeof t=="object"&&t!=null&&"then"in t}function NV(t){return pA(t.result)&&mV.has(t.result.status)}function Do(t){return t.type===Je.deferred}function Jn(t){return t.type===Je.error}function Lo(t){return(t&&t.type)===Je.redirect}function vE(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function OV(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function pA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function DV(t){return gV.has(t.toLowerCase())}function qr(t){return fV.has(t.toLowerCase())}async function yE(t,e,n,r,s,i){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(p=>p.route.id===l.route.id),d=c!=null&&!dA(c,l)&&(i&&i[l.route.id])!==void 0;if(Do(a)&&(s||d)){let p=r[o];Se(p,"Expected an AbortSignal for revalidating fetcher deferred result"),await gA(a,p,s).then(m=>{m&&(n[o]=m||n[o])})}}}async function gA(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Je.data,data:t.deferredData.unwrappedData}}catch(s){return{type:Je.error,error:s}}return{type:Je.data,data:t.deferredData.data}}}function Gv(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Su(t,e){let n=typeof e=="string"?li(e).search:e.search;if(t[t.length-1].route.index&&Gv(n||""))return t[t.length-1];let r=lA(t);return r[r.length-1]}function wE(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:i,json:o}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function dg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function LV(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function du(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function MV(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ti(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function VV(t,e){try{let n=t.sessionStorage.getItem(cA);if(n){let r=JSON.parse(n);for(let[s,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function FV(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(cA,JSON.stringify(n))}catch(r){Zo(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function af(){return af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},af.apply(this,arguments)}const Zf=F.createContext(null),mA=F.createContext(null),oo=F.createContext(null),Qv=F.createContext(null),xs=F.createContext({outlet:null,matches:[],isDataRoute:!1}),_A=F.createContext(null);function $V(t,e){let{relative:n}=e===void 0?{}:e;Dl()||Se(!1);let{basename:r,navigator:s}=F.useContext(oo),{hash:i,pathname:o,search:a}=yA(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ks([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Dl(){return F.useContext(Qv)!=null}function lr(){return Dl()||Se(!1),F.useContext(Qv).location}function vA(t){F.useContext(oo).static||F.useLayoutEffect(t)}function Et(){let{isDataRoute:t}=F.useContext(xs);return t?eF():UV()}function UV(){Dl()||Se(!1);let t=F.useContext(Zf),{basename:e,future:n,navigator:r}=F.useContext(oo),{matches:s}=F.useContext(xs),{pathname:i}=lr(),o=JSON.stringify(Jf(s,n.v7_relativeSplatPath)),a=F.useRef(!1);return vA(()=>{a.current=!0}),F.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let p=Yf(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ks([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,i,t])}const BV=F.createContext(null);function zV(t){let e=F.useContext(xs).outlet;return e&&F.createElement(BV.Provider,{value:t},e)}function tn(){let{matches:t}=F.useContext(xs),e=t[t.length-1];return e?e.params:{}}function yA(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(oo),{matches:s}=F.useContext(xs),{pathname:i}=lr(),o=JSON.stringify(Jf(s,r.v7_relativeSplatPath));return F.useMemo(()=>Yf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function qV(t,e,n,r){Dl()||Se(!1);let{navigator:s}=F.useContext(oo),{matches:i}=F.useContext(xs),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=lr(),d;d=c;let p=d.pathname||"/",m=p;if(l!=="/"){let x=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=ko(t,{pathname:m});return QV(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Ks([l,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Ks([l,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,r)}function HV(){let t=ZV(),e=Xf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:s},n):null,null)}const WV=F.createElement(HV,null);class KV extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(xs.Provider,{value:this.props.routeContext},F.createElement(_A.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GV(t){let{routeContext:e,match:n,children:r}=t,s=F.useContext(Zf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(xs.Provider,{value:e},r)}function QV(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);d>=0||Se(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=d),p.route.id){let{loaderData:m,errors:y}=n,I=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||I){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,p,m)=>{let y,I=!1,x=null,j=null;n&&(y=a&&p.route.id?a[p.route.id]:void 0,x=p.route.errorElement||WV,l&&(c<0&&m===0?(tF("route-fallback"),I=!0,j=null):c===m&&(I=!0,j=p.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,m+1)),E=()=>{let T;return y?T=x:I?T=j:p.route.Component?T=F.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=d,F.createElement(GV,{match:p,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?F.createElement(KV,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:E(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):E()},null)}var wA=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wA||{}),EA=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(EA||{});function JV(t){let e=F.useContext(Zf);return e||Se(!1),e}function YV(t){let e=F.useContext(mA);return e||Se(!1),e}function XV(t){let e=F.useContext(xs);return e||Se(!1),e}function bA(t){let e=XV(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function ZV(){var t;let e=F.useContext(_A),n=YV(),r=bA();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function eF(){let{router:t}=JV(wA.UseNavigateStable),e=bA(EA.UseNavigateStable),n=F.useRef(!1);return vA(()=>{n.current=!0}),F.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,af({fromRouteId:e},i)))},[t,e])}const EE={};function tF(t,e,n){EE[t]||(EE[t]=!0)}function bE(t){let{to:e,replace:n,state:r,relative:s}=t;Dl()||Se(!1);let{future:i,static:o}=F.useContext(oo),{matches:a}=F.useContext(xs),{pathname:l}=lr(),c=Et(),d=Yf(e,Jf(a,i.v7_relativeSplatPath),l,s==="path"),p=JSON.stringify(d);return F.useEffect(()=>c(JSON.parse(p),{replace:n,state:r,relative:s}),[c,p,s,n,r]),null}function nF(t){return zV(t.context)}function Ue(t){Se(!1)}function rF(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ct.Pop,navigator:i,static:o=!1,future:a}=t;Dl()&&Se(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:i,static:o,future:af({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=li(r));let{pathname:d="/",search:p="",hash:m="",state:y=null,key:I="default"}=r,x=F.useMemo(()=>{let j=Ol(d,l);return j==null?null:{location:{pathname:j,search:p,hash:m,state:y,key:I},navigationType:s}},[l,d,p,m,y,I,s]);return x==null?null:F.createElement(oo.Provider,{value:c},F.createElement(Qv.Provider,{children:n,value:x}))}new Promise(()=>{});function Vm(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,s)=>{if(!F.isValidElement(r))return;let i=[...e,s];if(r.type===F.Fragment){n.push.apply(n,Vm(r.props.children,i));return}r.type!==Ue&&Se(!1),!r.props.index||!r.props.children||Se(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Vm(r.props.children,i)),n.push(o)}),n}function sF(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:F.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:F.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:F.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tc.apply(this,arguments)}function iF(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function oF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aF(t,e){return t.button===0&&(!e||e==="_self")&&!oF(t)}function Fm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function lF(t,e){let n=Fm(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const uF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],cF="6";try{window.__reactRouterVersion=cF}catch{}function dF(t,e){return wV({basename:void 0,future:Tc({},void 0,{v7_prependBasename:!0}),history:qM({window:void 0}),hydrationData:hF(),routes:t,mapRouteProperties:sF,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function hF(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Tc({},e,{errors:fF(e.errors)})),e}function fF(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new of(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let o=new i(s.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(s.message);i.stack="",n[r]=i}}else n[r]=s;return n}const pF=F.createContext({isTransitioning:!1}),gF=F.createContext(new Map),mF="startTransition",TE=sC[mF],_F="flushSync",IE=mP[_F];function vF(t){TE?TE(t):t()}function hu(t){IE?IE(t):t()}let yF=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function wF(t){let{fallbackElement:e,router:n,future:r}=t,[s,i]=F.useState(n.state),[o,a]=F.useState(),[l,c]=F.useState({isTransitioning:!1}),[d,p]=F.useState(),[m,y]=F.useState(),[I,x]=F.useState(),j=F.useRef(new Map),{v7_startTransition:A}=r||{},E=F.useCallback(w=>{A?vF(w):w()},[A]),T=F.useCallback((w,S)=>{let{deletedFetchers:C,unstable_flushSync:N,unstable_viewTransitionOpts:V}=S;C.forEach(me=>j.current.delete(me)),w.fetchers.forEach((me,Ye)=>{me.data!==void 0&&j.current.set(Ye,me.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!V||P){N?hu(()=>i(w)):E(()=>i(w));return}if(N){hu(()=>{m&&(d&&d.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let me=n.window.document.startViewTransition(()=>{hu(()=>i(w))});me.finished.finally(()=>{hu(()=>{p(void 0),y(void 0),a(void 0),c({isTransitioning:!1})})}),hu(()=>y(me));return}m?(d&&d.resolve(),m.skipTransition(),x({state:w,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(a(w),c({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,m,d,j,E]);F.useLayoutEffect(()=>n.subscribe(T),[n,T]),F.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new yF)},[l]),F.useEffect(()=>{if(d&&o&&n.window){let w=o,S=d.promise,C=n.window.document.startViewTransition(async()=>{E(()=>i(w)),await S});C.finished.finally(()=>{p(void 0),y(void 0),a(void 0),c({isTransitioning:!1})}),y(C)}},[E,o,d,n.window]),F.useEffect(()=>{d&&o&&s.location.key===o.location.key&&d.resolve()},[d,m,s.location,o]),F.useEffect(()=>{!l.isTransitioning&&I&&(a(I.state),c({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}),x(void 0))},[l.isTransitioning,I]),F.useEffect(()=>{},[]);let O=F.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,S,C)=>n.navigate(w,{state:S,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:(w,S,C)=>n.navigate(w,{replace:!0,state:S,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[n]),B=n.basename||"/",R=F.useMemo(()=>({router:n,navigator:O,static:!1,basename:B}),[n,O,B]),k=F.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return F.createElement(F.Fragment,null,F.createElement(Zf.Provider,{value:R},F.createElement(mA.Provider,{value:s},F.createElement(gF.Provider,{value:j.current},F.createElement(pF.Provider,{value:l},F.createElement(rF,{basename:B,location:s.location,navigationType:s.historyAction,navigator:O,future:k},s.initialized||n.future.v7_partialHydration?F.createElement(EF,{routes:n.routes,future:n.future,state:s}):e))))),null)}const EF=F.memo(bF);function bF(t){let{routes:e,future:n,state:r}=t;return qV(e,void 0,r,n)}const TF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",IF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=F.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:d,unstable_viewTransition:p}=e,m=iF(e,uF),{basename:y}=F.useContext(oo),I,x=!1;if(typeof c=="string"&&IF.test(c)&&(I=c,TF))try{let T=new URL(window.location.href),O=c.startsWith("//")?new URL(T.protocol+c):new URL(c),B=Ol(O.pathname,y);O.origin===T.origin&&B!=null?c=B+O.search+O.hash:x=!0}catch{}let j=$V(c,{relative:s}),A=SF(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,unstable_viewTransition:p});function E(T){r&&r(T),T.defaultPrevented||A(T)}return F.createElement("a",Tc({},m,{href:I||j,onClick:x||i?r:E,ref:n,target:l}))});var SE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(SE||(SE={}));var xE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xE||(xE={}));function SF(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Et(),c=lr(),d=yA(t,{relative:o});return F.useCallback(p=>{if(aF(p,n)){p.preventDefault();let m=r!==void 0?r:ea(c)===ea(d);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a})}},[c,l,d,r,s,n,t,i,o,a])}function xF(t){let e=F.useRef(Fm(t)),n=F.useRef(!1),r=lr(),s=F.useMemo(()=>lF(r.search,n.current?null:e.current),[r.search]),i=Et(),o=F.useCallback((a,l)=>{const c=Fm(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}var AF={exports:{}},Sn="top",rr="bottom",sr="right",xn="left",ep="auto",Ll=[Sn,rr,sr,xn],ta="start",vl="end",TA="clippingParents",Jv="viewport",Ra="popper",IA="reference",$m=Ll.reduce(function(t,e){return t.concat([e+"-"+ta,e+"-"+vl])},[]),Yv=[].concat(Ll,[ep]).reduce(function(t,e){return t.concat([e,e+"-"+ta,e+"-"+vl])},[]),SA="beforeRead",xA="read",AA="afterRead",kA="beforeMain",CA="main",RA="afterMain",PA="beforeWrite",jA="write",NA="afterWrite",OA=[SA,xA,AA,kA,CA,RA,PA,jA,NA];function Ss(t){return t?(t.nodeName||"").toLowerCase():null}function ir(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function na(t){var e=ir(t).Element;return t instanceof e||t instanceof Element}function Ir(t){var e=ir(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Xv(t){if(typeof ShadowRoot>"u")return!1;var e=ir(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function kF(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!Ir(i)||!Ss(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?i.removeAttribute(o):i.setAttribute(o,a===!0?"":a)}))})}function CF(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Ir(s)||!Ss(s)||(Object.assign(s.style,a),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const Zv={name:"applyStyles",enabled:!0,phase:"write",fn:kF,effect:CF,requires:["computeStyles"]};function bs(t){return t.split("-")[0]}var $o=Math.max,lf=Math.min,yl=Math.round;function Um(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function DA(){return!/^((?!chrome|android).)*safari/i.test(Um())}function wl(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&Ir(t)&&(s=t.offsetWidth>0&&yl(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&yl(r.height)/t.offsetHeight||1);var o=na(t)?ir(t):window,a=o.visualViewport,l=!DA()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/s,d=(r.top+(l&&a?a.offsetTop:0))/i,p=r.width/s,m=r.height/i;return{width:p,height:m,top:d,right:c+p,bottom:d+m,left:c,x:c,y:d}}function ey(t){var e=wl(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function LA(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Xv(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function si(t){return ir(t).getComputedStyle(t)}function RF(t){return["table","td","th"].indexOf(Ss(t))>=0}function ao(t){return((na(t)?t.ownerDocument:t.document)||window.document).documentElement}function tp(t){return Ss(t)==="html"?t:t.assignedSlot||t.parentNode||(Xv(t)?t.host:null)||ao(t)}function AE(t){return!Ir(t)||si(t).position==="fixed"?null:t.offsetParent}function PF(t){var e=/firefox/i.test(Um()),n=/Trident/i.test(Um());if(n&&Ir(t)){var r=si(t);if(r.position==="fixed")return null}var s=tp(t);for(Xv(s)&&(s=s.host);Ir(s)&&["html","body"].indexOf(Ss(s))<0;){var i=si(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function Bc(t){for(var e=ir(t),n=AE(t);n&&RF(n)&&si(n).position==="static";)n=AE(n);return n&&(Ss(n)==="html"||Ss(n)==="body"&&si(n).position==="static")?e:n||PF(t)||e}function ty(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Uu(t,e,n){return $o(t,lf(e,n))}function jF(t,e,n){var r=Uu(t,e,n);return r>n?n:r}function MA(){return{top:0,right:0,bottom:0,left:0}}function VA(t){return Object.assign({},MA(),t)}function FA(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var NF=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,VA(typeof e!="number"?e:FA(e,Ll))};function OF(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=bs(n.placement),l=ty(a),c=[xn,sr].indexOf(a)>=0,d=c?"height":"width";if(!(!i||!o)){var p=NF(s.padding,n),m=ey(i),y=l==="y"?Sn:xn,I=l==="y"?rr:sr,x=n.rects.reference[d]+n.rects.reference[l]-o[l]-n.rects.popper[d],j=o[l]-n.rects.reference[l],A=Bc(i),E=A?l==="y"?A.clientHeight||0:A.clientWidth||0:0,T=x/2-j/2,O=p[y],B=E-m[d]-p[I],R=E/2-m[d]/2+T,k=Uu(O,R,B),w=l;n.modifiersData[r]=(e={},e[w]=k,e.centerOffset=k-R,e)}}function DF(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||LA(e.elements.popper,s)&&(e.elements.arrow=s))}const $A={name:"arrow",enabled:!0,phase:"main",fn:OF,effect:DF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function El(t){return t.split("-")[1]}var LF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function MF(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:yl(n*s)/s||0,y:yl(r*s)/s||0}}function kE(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,p=t.isFixed,m=o.x,y=m===void 0?0:m,I=o.y,x=I===void 0?0:I,j=typeof d=="function"?d({x:y,y:x}):{x:y,y:x};y=j.x,x=j.y;var A=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),T=xn,O=Sn,B=window;if(c){var R=Bc(n),k="clientHeight",w="clientWidth";if(R===ir(n)&&(R=ao(n),si(R).position!=="static"&&a==="absolute"&&(k="scrollHeight",w="scrollWidth")),R=R,s===Sn||(s===xn||s===sr)&&i===vl){O=rr;var S=p&&R===B&&B.visualViewport?B.visualViewport.height:R[k];x-=S-r.height,x*=l?1:-1}if(s===xn||(s===Sn||s===rr)&&i===vl){T=sr;var C=p&&R===B&&B.visualViewport?B.visualViewport.width:R[w];y-=C-r.width,y*=l?1:-1}}var N=Object.assign({position:a},c&&LF),V=d===!0?MF({x:y,y:x},ir(n)):{x:y,y:x};if(y=V.x,x=V.y,l){var P;return Object.assign({},N,(P={},P[O]=E?"0":"",P[T]=A?"0":"",P.transform=(B.devicePixelRatio||1)<=1?"translate("+y+"px, "+x+"px)":"translate3d("+y+"px, "+x+"px, 0)",P))}return Object.assign({},N,(e={},e[O]=E?x+"px":"",e[T]=A?y+"px":"",e.transform="",e))}function VF(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:bs(e.placement),variation:El(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,kE(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,kE(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ny={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:VF,data:{}};var Ud={passive:!0};function FF(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=ir(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(d){d.addEventListener("scroll",n.update,Ud)}),a&&l.addEventListener("resize",n.update,Ud),function(){i&&c.forEach(function(d){d.removeEventListener("scroll",n.update,Ud)}),a&&l.removeEventListener("resize",n.update,Ud)}}const ry={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:FF,data:{}};var $F={left:"right",right:"left",bottom:"top",top:"bottom"};function mh(t){return t.replace(/left|right|bottom|top/g,function(e){return $F[e]})}var UF={start:"end",end:"start"};function CE(t){return t.replace(/start|end/g,function(e){return UF[e]})}function sy(t){var e=ir(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function iy(t){return wl(ao(t)).left+sy(t).scrollLeft}function BF(t,e){var n=ir(t),r=ao(t),s=n.visualViewport,i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;var c=DA();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a+iy(t),y:l}}function zF(t){var e,n=ao(t),r=sy(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=$o(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=$o(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+iy(t),l=-r.scrollTop;return si(s||n).direction==="rtl"&&(a+=$o(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}function oy(t){var e=si(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function UA(t){return["html","body","#document"].indexOf(Ss(t))>=0?t.ownerDocument.body:Ir(t)&&oy(t)?t:UA(tp(t))}function Bu(t,e){var n;e===void 0&&(e=[]);var r=UA(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=ir(r),o=s?[i].concat(i.visualViewport||[],oy(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(Bu(tp(o)))}function Bm(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function qF(t,e){var n=wl(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function RE(t,e,n){return e===Jv?Bm(BF(t,n)):na(e)?qF(e,n):Bm(zF(ao(t)))}function HF(t){var e=Bu(tp(t)),n=["absolute","fixed"].indexOf(si(t).position)>=0,r=n&&Ir(t)?Bc(t):t;return na(r)?e.filter(function(s){return na(s)&&LA(s,r)&&Ss(s)!=="body"}):[]}function WF(t,e,n,r){var s=e==="clippingParents"?HF(t):[].concat(e),i=[].concat(s,[n]),o=i[0],a=i.reduce(function(l,c){var d=RE(t,c,r);return l.top=$o(d.top,l.top),l.right=lf(d.right,l.right),l.bottom=lf(d.bottom,l.bottom),l.left=$o(d.left,l.left),l},RE(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function BA(t){var e=t.reference,n=t.element,r=t.placement,s=r?bs(r):null,i=r?El(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case Sn:l={x:o,y:e.y-n.height};break;case rr:l={x:o,y:e.y+e.height};break;case sr:l={x:e.x+e.width,y:a};break;case xn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?ty(s):null;if(c!=null){var d=c==="y"?"height":"width";switch(i){case ta:l[c]=l[c]-(e[d]/2-n[d]/2);break;case vl:l[c]=l[c]+(e[d]/2-n[d]/2);break}}return l}function bl(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,o=i===void 0?t.strategy:i,a=n.boundary,l=a===void 0?TA:a,c=n.rootBoundary,d=c===void 0?Jv:c,p=n.elementContext,m=p===void 0?Ra:p,y=n.altBoundary,I=y===void 0?!1:y,x=n.padding,j=x===void 0?0:x,A=VA(typeof j!="number"?j:FA(j,Ll)),E=m===Ra?IA:Ra,T=t.rects.popper,O=t.elements[I?E:m],B=WF(na(O)?O:O.contextElement||ao(t.elements.popper),l,d,o),R=wl(t.elements.reference),k=BA({reference:R,element:T,placement:s}),w=Bm(Object.assign({},T,k)),S=m===Ra?w:R,C={top:B.top-S.top+A.top,bottom:S.bottom-B.bottom+A.bottom,left:B.left-S.left+A.left,right:S.right-B.right+A.right},N=t.modifiersData.offset;if(m===Ra&&N){var V=N[s];Object.keys(C).forEach(function(P){var me=[sr,rr].indexOf(P)>=0?1:-1,Ye=[Sn,rr].indexOf(P)>=0?"y":"x";C[P]+=V[Ye]*me})}return C}function KF(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?Yv:l,d=El(r),p=d?a?$m:$m.filter(function(I){return El(I)===d}):Ll,m=p.filter(function(I){return c.indexOf(I)>=0});m.length===0&&(m=p);var y=m.reduce(function(I,x){return I[x]=bl(t,{placement:x,boundary:s,rootBoundary:i,padding:o})[bs(x)],I},{});return Object.keys(y).sort(function(I,x){return y[I]-y[x]})}function GF(t){if(bs(t)===ep)return[];var e=mh(t);return[CE(t),e,CE(e)]}function QF(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,d=n.boundary,p=n.rootBoundary,m=n.altBoundary,y=n.flipVariations,I=y===void 0?!0:y,x=n.allowedAutoPlacements,j=e.options.placement,A=bs(j),E=A===j,T=l||(E||!I?[mh(j)]:GF(j)),O=[j].concat(T).reduce(function(ze,Ke){return ze.concat(bs(Ke)===ep?KF(e,{placement:Ke,boundary:d,rootBoundary:p,padding:c,flipVariations:I,allowedAutoPlacements:x}):Ke)},[]),B=e.rects.reference,R=e.rects.popper,k=new Map,w=!0,S=O[0],C=0;C<O.length;C++){var N=O[C],V=bs(N),P=El(N)===ta,me=[Sn,rr].indexOf(V)>=0,Ye=me?"width":"height",Xe=bl(e,{placement:N,boundary:d,rootBoundary:p,altBoundary:m,padding:c}),we=me?P?sr:xn:P?rr:Sn;B[Ye]>R[Ye]&&(we=mh(we));var X=mh(we),ae=[];if(i&&ae.push(Xe[V]<=0),a&&ae.push(Xe[we]<=0,Xe[X]<=0),ae.every(function(ze){return ze})){S=N,w=!1;break}k.set(N,ae)}if(w)for(var de=I?3:1,xe=function(Ke){var Ze=O.find(function(nt){var Nt=k.get(nt);if(Nt)return Nt.slice(0,Ke).every(function(Ot){return Ot})});if(Ze)return S=Ze,"break"},be=de;be>0;be--){var H=xe(be);if(H==="break")break}e.placement!==S&&(e.modifiersData[r]._skip=!0,e.placement=S,e.reset=!0)}}const zA={name:"flip",enabled:!0,phase:"main",fn:QF,requiresIfExists:["offset"],data:{_skip:!1}};function PE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function jE(t){return[Sn,sr,rr,xn].some(function(e){return t[e]>=0})}function JF(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=bl(e,{elementContext:"reference"}),a=bl(e,{altBoundary:!0}),l=PE(o,r),c=PE(a,s,i),d=jE(l),p=jE(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}const qA={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:JF};function YF(t,e,n){var r=bs(t),s=[xn,Sn].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[xn,sr].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function XF(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,o=Yv.reduce(function(d,p){return d[p]=YF(p,e.rects,i),d},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const HA={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:XF};function ZF(t){var e=t.state,n=t.name;e.modifiersData[n]=BA({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const ay={name:"popperOffsets",enabled:!0,phase:"read",fn:ZF,data:{}};function e4(t){return t==="x"?"y":"x"}function t4(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,p=n.padding,m=n.tether,y=m===void 0?!0:m,I=n.tetherOffset,x=I===void 0?0:I,j=bl(e,{boundary:l,rootBoundary:c,padding:p,altBoundary:d}),A=bs(e.placement),E=El(e.placement),T=!E,O=ty(A),B=e4(O),R=e.modifiersData.popperOffsets,k=e.rects.reference,w=e.rects.popper,S=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,C=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(R){if(i){var P,me=O==="y"?Sn:xn,Ye=O==="y"?rr:sr,Xe=O==="y"?"height":"width",we=R[O],X=we+j[me],ae=we-j[Ye],de=y?-w[Xe]/2:0,xe=E===ta?k[Xe]:w[Xe],be=E===ta?-w[Xe]:-k[Xe],H=e.elements.arrow,ze=y&&H?ey(H):{width:0,height:0},Ke=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:MA(),Ze=Ke[me],nt=Ke[Ye],Nt=Uu(0,k[Xe],ze[Xe]),Ot=T?k[Xe]/2-de-Nt-Ze-C.mainAxis:xe-Nt-Ze-C.mainAxis,ur=T?-k[Xe]/2+de+Nt+nt+C.mainAxis:be+Nt+nt+C.mainAxis,se=e.elements.arrow&&Bc(e.elements.arrow),rt=se?O==="y"?se.clientTop||0:se.clientLeft||0:0,nn=(P=N==null?void 0:N[O])!=null?P:0,ns=we+Ot-nn-rt,As=we+ur-nn,Dt=Uu(y?lf(X,ns):X,we,y?$o(ae,As):ae);R[O]=Dt,V[O]=Dt-we}if(a){var ks,Ar=O==="x"?Sn:xn,Rn=O==="x"?rr:sr,gn=R[B],kr=B==="y"?"height":"width",ui=gn+j[Ar],rs=gn-j[Rn],mn=[Sn,xn].indexOf(A)!==-1,zn=(ks=N==null?void 0:N[B])!=null?ks:0,ht=mn?ui:gn-k[kr]-w[kr]-zn+C.altAxis,et=mn?gn+k[kr]+w[kr]-zn-C.altAxis:rs,at=y&&mn?jF(ht,gn,et):Uu(y?ht:ui,gn,y?et:rs);R[B]=at,V[B]=at-gn}e.modifiersData[r]=V}}const WA={name:"preventOverflow",enabled:!0,phase:"main",fn:t4,requiresIfExists:["offset"]};function n4(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function r4(t){return t===ir(t)||!Ir(t)?sy(t):n4(t)}function s4(t){var e=t.getBoundingClientRect(),n=yl(e.width)/t.offsetWidth||1,r=yl(e.height)/t.offsetHeight||1;return n!==1||r!==1}function i4(t,e,n){n===void 0&&(n=!1);var r=Ir(e),s=Ir(e)&&s4(e),i=ao(e),o=wl(t,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Ss(e)!=="body"||oy(i))&&(a=r4(e)),Ir(e)?(l=wl(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=iy(i))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function o4(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function a4(t){var e=o4(t);return OA.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function l4(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function u4(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var NE={placement:"bottom",modifiers:[],strategy:"absolute"};function OE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function np(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?NE:s;return function(a,l,c){c===void 0&&(c=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},NE,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],m=!1,y={state:d,setOptions:function(A){var E=typeof A=="function"?A(d.options):A;x(),d.options=Object.assign({},i,d.options,E),d.scrollParents={reference:na(a)?Bu(a):a.contextElement?Bu(a.contextElement):[],popper:Bu(l)};var T=a4(u4([].concat(r,d.options.modifiers)));return d.orderedModifiers=T.filter(function(O){return O.enabled}),I(),y.update()},forceUpdate:function(){if(!m){var A=d.elements,E=A.reference,T=A.popper;if(OE(E,T)){d.rects={reference:i4(E,Bc(T),d.options.strategy==="fixed"),popper:ey(T)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(C){return d.modifiersData[C.name]=Object.assign({},C.data)});for(var O=0;O<d.orderedModifiers.length;O++){if(d.reset===!0){d.reset=!1,O=-1;continue}var B=d.orderedModifiers[O],R=B.fn,k=B.options,w=k===void 0?{}:k,S=B.name;typeof R=="function"&&(d=R({state:d,options:w,name:S,instance:y})||d)}}}},update:l4(function(){return new Promise(function(j){y.forceUpdate(),j(d)})}),destroy:function(){x(),m=!0}};if(!OE(a,l))return y;y.setOptions(c).then(function(j){!m&&c.onFirstUpdate&&c.onFirstUpdate(j)});function I(){d.orderedModifiers.forEach(function(j){var A=j.name,E=j.options,T=E===void 0?{}:E,O=j.effect;if(typeof O=="function"){var B=O({state:d,name:A,instance:y,options:T}),R=function(){};p.push(B||R)}})}function x(){p.forEach(function(j){return j()}),p=[]}return y}}var c4=np(),d4=[ry,ay,ny,Zv],h4=np({defaultModifiers:d4}),f4=[ry,ay,ny,Zv,HA,zA,WA,$A,qA],p4=np({defaultModifiers:f4});const g4=Object.freeze(Object.defineProperty({__proto__:null,afterMain:RA,afterRead:AA,afterWrite:NA,applyStyles:Zv,arrow:$A,auto:ep,basePlacements:Ll,beforeMain:kA,beforeRead:SA,beforeWrite:PA,bottom:rr,clippingParents:TA,computeStyles:ny,createPopper:p4,createPopperBase:c4,createPopperLite:h4,detectOverflow:bl,end:vl,eventListeners:ry,flip:zA,hide:qA,left:xn,main:CA,modifierPhases:OA,offset:HA,placements:Yv,popper:Ra,popperGenerator:np,popperOffsets:ay,preventOverflow:WA,read:xA,reference:IA,right:sr,start:ta,top:Sn,variationPlacements:$m,viewport:Jv,write:jA},Symbol.toStringTag,{value:"Module"})),m4=rb(g4);/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r(m4)})(tr,function(n){function r(M){const f=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(M){for(const v in M)if(v!=="default"){const D=Object.getOwnPropertyDescriptor(M,v);Object.defineProperty(f,v,D.get?D:{enumerable:!0,get:()=>M[v]})}}return f.default=M,Object.freeze(f)}const s=r(n),i=new Map,o={set(M,f,v){i.has(M)||i.set(M,new Map);const D=i.get(M);D.has(f)||D.size===0?D.set(f,v):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(D.keys())[0]}.`)},get:(M,f)=>i.has(M)&&i.get(M).get(f)||null,remove(M,f){if(!i.has(M))return;const v=i.get(M);v.delete(f),v.size===0&&i.delete(M)}},a="transitionend",l=M=>(M&&window.CSS&&window.CSS.escape&&(M=M.replace(/#([^\s"#']+)/g,(f,v)=>`#${CSS.escape(v)}`)),M),c=M=>{M.dispatchEvent(new Event(a))},d=M=>!(!M||typeof M!="object")&&(M.jquery!==void 0&&(M=M[0]),M.nodeType!==void 0),p=M=>d(M)?M.jquery?M[0]:M:typeof M=="string"&&M.length>0?document.querySelector(l(M)):null,m=M=>{if(!d(M)||M.getClientRects().length===0)return!1;const f=getComputedStyle(M).getPropertyValue("visibility")==="visible",v=M.closest("details:not([open])");if(!v)return f;if(v!==M){const D=M.closest("summary");if(D&&D.parentNode!==v||D===null)return!1}return f},y=M=>!M||M.nodeType!==Node.ELEMENT_NODE||!!M.classList.contains("disabled")||(M.disabled!==void 0?M.disabled:M.hasAttribute("disabled")&&M.getAttribute("disabled")!=="false"),I=M=>{if(!document.documentElement.attachShadow)return null;if(typeof M.getRootNode=="function"){const f=M.getRootNode();return f instanceof ShadowRoot?f:null}return M instanceof ShadowRoot?M:M.parentNode?I(M.parentNode):null},x=()=>{},j=M=>{M.offsetHeight},A=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E=[],T=()=>document.documentElement.dir==="rtl",O=M=>{var f;f=()=>{const v=A();if(v){const D=M.NAME,G=v.fn[D];v.fn[D]=M.jQueryInterface,v.fn[D].Constructor=M,v.fn[D].noConflict=()=>(v.fn[D]=G,M.jQueryInterface)}},document.readyState==="loading"?(E.length||document.addEventListener("DOMContentLoaded",()=>{for(const v of E)v()}),E.push(f)):f()},B=(M,f=[],v=M)=>typeof M=="function"?M(...f):v,R=(M,f,v=!0)=>{if(!v)return void B(M);const D=(oe=>{if(!oe)return 0;let{transitionDuration:Oe,transitionDelay:gt}=window.getComputedStyle(oe);const Nn=Number.parseFloat(Oe),Gn=Number.parseFloat(gt);return Nn||Gn?(Oe=Oe.split(",")[0],gt=gt.split(",")[0],1e3*(Number.parseFloat(Oe)+Number.parseFloat(gt))):0})(f)+5;let G=!1;const ee=({target:oe})=>{oe===f&&(G=!0,f.removeEventListener(a,ee),B(M))};f.addEventListener(a,ee),setTimeout(()=>{G||c(f)},D)},k=(M,f,v,D)=>{const G=M.length;let ee=M.indexOf(f);return ee===-1?!v&&D?M[G-1]:M[0]:(ee+=v?1:-1,D&&(ee=(ee+G)%G),M[Math.max(0,Math.min(ee,G-1))])},w=/[^.]*(?=\..*)\.|.*/,S=/\..*/,C=/::\d+$/,N={};let V=1;const P={mouseenter:"mouseover",mouseleave:"mouseout"},me=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Ye(M,f){return f&&`${f}::${V++}`||M.uidEvent||V++}function Xe(M){const f=Ye(M);return M.uidEvent=f,N[f]=N[f]||{},N[f]}function we(M,f,v=null){return Object.values(M).find(D=>D.callable===f&&D.delegationSelector===v)}function X(M,f,v){const D=typeof f=="string",G=D?v:f||v;let ee=be(M);return me.has(ee)||(ee=M),[D,G,ee]}function ae(M,f,v,D,G){if(typeof f!="string"||!M)return;let[ee,oe,Oe]=X(f,v,D);f in P&&(oe=(Eo=>function(Fr){if(!Fr.relatedTarget||Fr.relatedTarget!==Fr.delegateTarget&&!Fr.delegateTarget.contains(Fr.relatedTarget))return Eo.call(this,Fr)})(oe));const gt=Xe(M),Nn=gt[Oe]||(gt[Oe]={}),Gn=we(Nn,oe,ee?v:null);if(Gn)return void(Gn.oneOff=Gn.oneOff&&G);const Vr=Ye(oe,f.replace(w,"")),Ns=ee?function(Os,Eo,Fr){return function eu(vd){const $k=Os.querySelectorAll(Eo);for(let{target:bo}=vd;bo&&bo!==this;bo=bo.parentNode)for(const Uk of $k)if(Uk===bo)return ze(vd,{delegateTarget:bo}),eu.oneOff&&H.off(Os,vd.type,Eo,Fr),Fr.apply(bo,[vd])}}(M,v,oe):function(Os,Eo){return function Fr(eu){return ze(eu,{delegateTarget:Os}),Fr.oneOff&&H.off(Os,eu.type,Eo),Eo.apply(Os,[eu])}}(M,oe);Ns.delegationSelector=ee?v:null,Ns.callable=oe,Ns.oneOff=G,Ns.uidEvent=Vr,Nn[Vr]=Ns,M.addEventListener(Oe,Ns,ee)}function de(M,f,v,D,G){const ee=we(f[v],D,G);ee&&(M.removeEventListener(v,ee,!!G),delete f[v][ee.uidEvent])}function xe(M,f,v,D){const G=f[v]||{};for(const[ee,oe]of Object.entries(G))ee.includes(D)&&de(M,f,v,oe.callable,oe.delegationSelector)}function be(M){return M=M.replace(S,""),P[M]||M}const H={on(M,f,v,D){ae(M,f,v,D,!1)},one(M,f,v,D){ae(M,f,v,D,!0)},off(M,f,v,D){if(typeof f!="string"||!M)return;const[G,ee,oe]=X(f,v,D),Oe=oe!==f,gt=Xe(M),Nn=gt[oe]||{},Gn=f.startsWith(".");if(ee===void 0){if(Gn)for(const Vr of Object.keys(gt))xe(M,gt,Vr,f.slice(1));for(const[Vr,Ns]of Object.entries(Nn)){const Os=Vr.replace(C,"");Oe&&!f.includes(Os)||de(M,gt,oe,Ns.callable,Ns.delegationSelector)}}else{if(!Object.keys(Nn).length)return;de(M,gt,oe,ee,G?v:null)}},trigger(M,f,v){if(typeof f!="string"||!M)return null;const D=A();let G=null,ee=!0,oe=!0,Oe=!1;f!==be(f)&&D&&(G=D.Event(f,v),D(M).trigger(G),ee=!G.isPropagationStopped(),oe=!G.isImmediatePropagationStopped(),Oe=G.isDefaultPrevented());const gt=ze(new Event(f,{bubbles:ee,cancelable:!0}),v);return Oe&&gt.preventDefault(),oe&&M.dispatchEvent(gt),gt.defaultPrevented&&G&&G.preventDefault(),gt}};function ze(M,f={}){for(const[v,D]of Object.entries(f))try{M[v]=D}catch{Object.defineProperty(M,v,{configurable:!0,get:()=>D})}return M}function Ke(M){if(M==="true")return!0;if(M==="false")return!1;if(M===Number(M).toString())return Number(M);if(M===""||M==="null")return null;if(typeof M!="string")return M;try{return JSON.parse(decodeURIComponent(M))}catch{return M}}function Ze(M){return M.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`)}const nt={setDataAttribute(M,f,v){M.setAttribute(`data-bs-${Ze(f)}`,v)},removeDataAttribute(M,f){M.removeAttribute(`data-bs-${Ze(f)}`)},getDataAttributes(M){if(!M)return{};const f={},v=Object.keys(M.dataset).filter(D=>D.startsWith("bs")&&!D.startsWith("bsConfig"));for(const D of v){let G=D.replace(/^bs/,"");G=G.charAt(0).toLowerCase()+G.slice(1,G.length),f[G]=Ke(M.dataset[D])}return f},getDataAttribute:(M,f)=>Ke(M.getAttribute(`data-bs-${Ze(f)}`))};class Nt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(f){return f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f}_mergeConfigObj(f,v){const D=d(v)?nt.getDataAttribute(v,"config"):{};return{...this.constructor.Default,...typeof D=="object"?D:{},...d(v)?nt.getDataAttributes(v):{},...typeof f=="object"?f:{}}}_typeCheckConfig(f,v=this.constructor.DefaultType){for(const[G,ee]of Object.entries(v)){const oe=f[G],Oe=d(oe)?"element":(D=oe)==null?`${D}`:Object.prototype.toString.call(D).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(Oe))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${G}" provided type "${Oe}" but expected type "${ee}".`)}var D}}class Ot extends Nt{constructor(f,v){super(),(f=p(f))&&(this._element=f,this._config=this._getConfig(v),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),H.off(this._element,this.constructor.EVENT_KEY);for(const f of Object.getOwnPropertyNames(this))this[f]=null}_queueCallback(f,v,D=!0){R(f,v,D)}_getConfig(f){return f=this._mergeConfigObj(f,this._element),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}static getInstance(f){return o.get(p(f),this.DATA_KEY)}static getOrCreateInstance(f,v={}){return this.getInstance(f)||new this(f,typeof v=="object"?v:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(f){return`${f}${this.EVENT_KEY}`}}const ur=M=>{let f=M.getAttribute("data-bs-target");if(!f||f==="#"){let v=M.getAttribute("href");if(!v||!v.includes("#")&&!v.startsWith("."))return null;v.includes("#")&&!v.startsWith("#")&&(v=`#${v.split("#")[1]}`),f=v&&v!=="#"?v.trim():null}return f?f.split(",").map(v=>l(v)).join(","):null},se={find:(M,f=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(f,M)),findOne:(M,f=document.documentElement)=>Element.prototype.querySelector.call(f,M),children:(M,f)=>[].concat(...M.children).filter(v=>v.matches(f)),parents(M,f){const v=[];let D=M.parentNode.closest(f);for(;D;)v.push(D),D=D.parentNode.closest(f);return v},prev(M,f){let v=M.previousElementSibling;for(;v;){if(v.matches(f))return[v];v=v.previousElementSibling}return[]},next(M,f){let v=M.nextElementSibling;for(;v;){if(v.matches(f))return[v];v=v.nextElementSibling}return[]},focusableChildren(M){const f=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(v=>`${v}:not([tabindex^="-"])`).join(",");return this.find(f,M).filter(v=>!y(v)&&m(v))},getSelectorFromElement(M){const f=ur(M);return f&&se.findOne(f)?f:null},getElementFromSelector(M){const f=ur(M);return f?se.findOne(f):null},getMultipleElementsFromSelector(M){const f=ur(M);return f?se.find(f):[]}},rt=(M,f="hide")=>{const v=`click.dismiss${M.EVENT_KEY}`,D=M.NAME;H.on(document,v,`[data-bs-dismiss="${D}"]`,function(G){if(["A","AREA"].includes(this.tagName)&&G.preventDefault(),y(this))return;const ee=se.getElementFromSelector(this)||this.closest(`.${D}`);M.getOrCreateInstance(ee)[f]()})},nn=".bs.alert",ns=`close${nn}`,As=`closed${nn}`;class Dt extends Ot{static get NAME(){return"alert"}close(){if(H.trigger(this._element,ns).defaultPrevented)return;this._element.classList.remove("show");const f=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,f)}_destroyElement(){this._element.remove(),H.trigger(this._element,As),this.dispose()}static jQueryInterface(f){return this.each(function(){const v=Dt.getOrCreateInstance(this);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f](this)}})}}rt(Dt,"close"),O(Dt);const ks='[data-bs-toggle="button"]';class Ar extends Ot{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(f){return this.each(function(){const v=Ar.getOrCreateInstance(this);f==="toggle"&&v[f]()})}}H.on(document,"click.bs.button.data-api",ks,M=>{M.preventDefault();const f=M.target.closest(ks);Ar.getOrCreateInstance(f).toggle()}),O(Ar);const Rn=".bs.swipe",gn=`touchstart${Rn}`,kr=`touchmove${Rn}`,ui=`touchend${Rn}`,rs=`pointerdown${Rn}`,mn=`pointerup${Rn}`,zn={endCallback:null,leftCallback:null,rightCallback:null},ht={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class et extends Nt{constructor(f,v){super(),this._element=f,f&&et.isSupported()&&(this._config=this._getConfig(v),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return zn}static get DefaultType(){return ht}static get NAME(){return"swipe"}dispose(){H.off(this._element,Rn)}_start(f){this._supportPointerEvents?this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX):this._deltaX=f.touches[0].clientX}_end(f){this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX-this._deltaX),this._handleSwipe(),B(this._config.endCallback)}_move(f){this._deltaX=f.touches&&f.touches.length>1?0:f.touches[0].clientX-this._deltaX}_handleSwipe(){const f=Math.abs(this._deltaX);if(f<=40)return;const v=f/this._deltaX;this._deltaX=0,v&&B(v>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(H.on(this._element,rs,f=>this._start(f)),H.on(this._element,mn,f=>this._end(f)),this._element.classList.add("pointer-event")):(H.on(this._element,gn,f=>this._start(f)),H.on(this._element,kr,f=>this._move(f)),H.on(this._element,ui,f=>this._end(f)))}_eventIsPointerPenTouch(f){return this._supportPointerEvents&&(f.pointerType==="pen"||f.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const at=".bs.carousel",_n=".data-api",Cr="next",qn="prev",Pn="left",rn="right",uo=`slide${at}`,ss=`slid${at}`,fa=`keydown${at}`,$l=`mouseenter${at}`,ci=`mouseleave${at}`,Cs=`dragstart${at}`,co=`load${at}${_n}`,Rr=`click${at}${_n}`,Pr="carousel",cr="active",dr=".active",di=".carousel-item",hi=dr+di,ho={ArrowLeft:rn,ArrowRight:Pn},hr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Rs={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ft extends Ot{constructor(f,v){super(f,v),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=se.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Pr&&this.cycle()}static get Default(){return hr}static get DefaultType(){return Rs}static get NAME(){return"carousel"}next(){this._slide(Cr)}nextWhenVisible(){!document.hidden&&m(this._element)&&this.next()}prev(){this._slide(qn)}pause(){this._isSliding&&c(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?H.one(this._element,ss,()=>this.cycle()):this.cycle())}to(f){const v=this._getItems();if(f>v.length-1||f<0)return;if(this._isSliding)return void H.one(this._element,ss,()=>this.to(f));const D=this._getItemIndex(this._getActive());if(D===f)return;const G=f>D?Cr:qn;this._slide(G,v[f])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(f){return f.defaultInterval=f.interval,f}_addEventListeners(){this._config.keyboard&&H.on(this._element,fa,f=>this._keydown(f)),this._config.pause==="hover"&&(H.on(this._element,$l,()=>this.pause()),H.on(this._element,ci,()=>this._maybeEnableCycle())),this._config.touch&&et.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const v of se.find(".carousel-item img",this._element))H.on(v,Cs,D=>D.preventDefault());const f={leftCallback:()=>this._slide(this._directionToOrder(Pn)),rightCallback:()=>this._slide(this._directionToOrder(rn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new et(this._element,f)}_keydown(f){if(/input|textarea/i.test(f.target.tagName))return;const v=ho[f.key];v&&(f.preventDefault(),this._slide(this._directionToOrder(v)))}_getItemIndex(f){return this._getItems().indexOf(f)}_setActiveIndicatorElement(f){if(!this._indicatorsElement)return;const v=se.findOne(dr,this._indicatorsElement);v.classList.remove(cr),v.removeAttribute("aria-current");const D=se.findOne(`[data-bs-slide-to="${f}"]`,this._indicatorsElement);D&&(D.classList.add(cr),D.setAttribute("aria-current","true"))}_updateInterval(){const f=this._activeElement||this._getActive();if(!f)return;const v=Number.parseInt(f.getAttribute("data-bs-interval"),10);this._config.interval=v||this._config.defaultInterval}_slide(f,v=null){if(this._isSliding)return;const D=this._getActive(),G=f===Cr,ee=v||k(this._getItems(),D,G,this._config.wrap);if(ee===D)return;const oe=this._getItemIndex(ee),Oe=Vr=>H.trigger(this._element,Vr,{relatedTarget:ee,direction:this._orderToDirection(f),from:this._getItemIndex(D),to:oe});if(Oe(uo).defaultPrevented||!D||!ee)return;const gt=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(oe),this._activeElement=ee;const Nn=G?"carousel-item-start":"carousel-item-end",Gn=G?"carousel-item-next":"carousel-item-prev";ee.classList.add(Gn),j(ee),D.classList.add(Nn),ee.classList.add(Nn),this._queueCallback(()=>{ee.classList.remove(Nn,Gn),ee.classList.add(cr),D.classList.remove(cr,Gn,Nn),this._isSliding=!1,Oe(ss)},D,this._isAnimated()),gt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return se.findOne(hi,this._element)}_getItems(){return se.find(di,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(f){return T()?f===Pn?qn:Cr:f===Pn?Cr:qn}_orderToDirection(f){return T()?f===qn?Pn:rn:f===qn?rn:Pn}static jQueryInterface(f){return this.each(function(){const v=ft.getOrCreateInstance(this,f);if(typeof f!="number"){if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f]()}}else v.to(f)})}}H.on(document,Rr,"[data-bs-slide], [data-bs-slide-to]",function(M){const f=se.getElementFromSelector(this);if(!f||!f.classList.contains(Pr))return;M.preventDefault();const v=ft.getOrCreateInstance(f),D=this.getAttribute("data-bs-slide-to");return D?(v.to(D),void v._maybeEnableCycle()):nt.getDataAttribute(this,"slide")==="next"?(v.next(),void v._maybeEnableCycle()):(v.prev(),void v._maybeEnableCycle())}),H.on(window,co,()=>{const M=se.find('[data-bs-ride="carousel"]');for(const f of M)ft.getOrCreateInstance(f)}),O(ft);const is=".bs.collapse",L=`show${is}`,$=`shown${is}`,z=`hide${is}`,W=`hidden${is}`,te=`click${is}.data-api`,ie="show",he="collapse",Y="collapsing",_e=`:scope .${he} .${he}`,ue='[data-bs-toggle="collapse"]',ce={parent:null,toggle:!0},Ae={parent:"(null|element)",toggle:"boolean"};class ke extends Ot{constructor(f,v){super(f,v),this._isTransitioning=!1,this._triggerArray=[];const D=se.find(ue);for(const G of D){const ee=se.getSelectorFromElement(G),oe=se.find(ee).filter(Oe=>Oe===this._element);ee!==null&&oe.length&&this._triggerArray.push(G)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ce}static get DefaultType(){return Ae}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let f=[];if(this._config.parent&&(f=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(G=>G!==this._element).map(G=>ke.getOrCreateInstance(G,{toggle:!1}))),f.length&&f[0]._isTransitioning||H.trigger(this._element,L).defaultPrevented)return;for(const G of f)G.hide();const v=this._getDimension();this._element.classList.remove(he),this._element.classList.add(Y),this._element.style[v]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const D=`scroll${v[0].toUpperCase()+v.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he,ie),this._element.style[v]="",H.trigger(this._element,$)},this._element,!0),this._element.style[v]=`${this._element[D]}px`}hide(){if(this._isTransitioning||!this._isShown()||H.trigger(this._element,z).defaultPrevented)return;const f=this._getDimension();this._element.style[f]=`${this._element.getBoundingClientRect()[f]}px`,j(this._element),this._element.classList.add(Y),this._element.classList.remove(he,ie);for(const v of this._triggerArray){const D=se.getElementFromSelector(v);D&&!this._isShown(D)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0,this._element.style[f]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he),H.trigger(this._element,W)},this._element,!0)}_isShown(f=this._element){return f.classList.contains(ie)}_configAfterMerge(f){return f.toggle=!!f.toggle,f.parent=p(f.parent),f}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const f=this._getFirstLevelChildren(ue);for(const v of f){const D=se.getElementFromSelector(v);D&&this._addAriaAndCollapsedClass([v],this._isShown(D))}}_getFirstLevelChildren(f){const v=se.find(_e,this._config.parent);return se.find(f,this._config.parent).filter(D=>!v.includes(D))}_addAriaAndCollapsedClass(f,v){if(f.length)for(const D of f)D.classList.toggle("collapsed",!v),D.setAttribute("aria-expanded",v)}static jQueryInterface(f){const v={};return typeof f=="string"&&/show|hide/.test(f)&&(v.toggle=!1),this.each(function(){const D=ke.getOrCreateInstance(this,v);if(typeof f=="string"){if(D[f]===void 0)throw new TypeError(`No method named "${f}"`);D[f]()}})}}H.on(document,te,ue,function(M){(M.target.tagName==="A"||M.delegateTarget&&M.delegateTarget.tagName==="A")&&M.preventDefault();for(const f of se.getMultipleElementsFromSelector(this))ke.getOrCreateInstance(f,{toggle:!1}).toggle()}),O(ke);const Fe="dropdown",Te=".bs.dropdown",lt=".data-api",ut="ArrowUp",jr="ArrowDown",fr=`hide${Te}`,Hn=`hidden${Te}`,Nr=`show${Te}`,pr=`shown${Te}`,Lt=`click${Te}${lt}`,vn=`keydown${Te}${lt}`,os=`keyup${Te}${lt}`,Wn="show",pe='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',tt=`${pe}.${Wn}`,It=".dropdown-menu",qe=T()?"top-end":"top-start",yn=T()?"top-start":"top-end",fo=T()?"bottom-end":"bottom-start",pa=T()?"bottom-start":"bottom-end",dp=T()?"left-start":"right-start",hp=T()?"right-start":"left-start",Kc={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Gc={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Kn extends Ot{constructor(f,v){super(f,v),this._popper=null,this._parent=this._element.parentNode,this._menu=se.next(this._element,It)[0]||se.prev(this._element,It)[0]||se.findOne(It,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Kc}static get DefaultType(){return Gc}static get NAME(){return Fe}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const f={relatedTarget:this._element};if(!H.trigger(this._element,Nr,f).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const v of[].concat(...document.body.children))H.on(v,"mouseover",x);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Wn),this._element.classList.add(Wn),H.trigger(this._element,pr,f)}}hide(){if(y(this._element)||!this._isShown())return;const f={relatedTarget:this._element};this._completeHide(f)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(f){if(!H.trigger(this._element,fr,f).defaultPrevented){if("ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))H.off(v,"mouseover",x);this._popper&&this._popper.destroy(),this._menu.classList.remove(Wn),this._element.classList.remove(Wn),this._element.setAttribute("aria-expanded","false"),nt.removeDataAttribute(this._menu,"popper"),H.trigger(this._element,Hn,f)}}_getConfig(f){if(typeof(f=super._getConfig(f)).reference=="object"&&!d(f.reference)&&typeof f.reference.getBoundingClientRect!="function")throw new TypeError(`${Fe.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return f}_createPopper(){if(s===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let f=this._element;this._config.reference==="parent"?f=this._parent:d(this._config.reference)?f=p(this._config.reference):typeof this._config.reference=="object"&&(f=this._config.reference);const v=this._getPopperConfig();this._popper=s.createPopper(f,this._menu,v)}_isShown(){return this._menu.classList.contains(Wn)}_getPlacement(){const f=this._parent;if(f.classList.contains("dropend"))return dp;if(f.classList.contains("dropstart"))return hp;if(f.classList.contains("dropup-center"))return"top";if(f.classList.contains("dropdown-center"))return"bottom";const v=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return f.classList.contains("dropup")?v?yn:qe:v?pa:fo}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(v=>Number.parseInt(v,10)):typeof f=="function"?v=>f(v,this._element):f}_getPopperConfig(){const f={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(nt.setDataAttribute(this._menu,"popper","static"),f.modifiers=[{name:"applyStyles",enabled:!1}]),{...f,...B(this._config.popperConfig,[f])}}_selectMenuItem({key:f,target:v}){const D=se.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(G=>m(G));D.length&&k(D,v,f===jr,!D.includes(v)).focus()}static jQueryInterface(f){return this.each(function(){const v=Kn.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f]()}})}static clearMenus(f){if(f.button===2||f.type==="keyup"&&f.key!=="Tab")return;const v=se.find(tt);for(const D of v){const G=Kn.getInstance(D);if(!G||G._config.autoClose===!1)continue;const ee=f.composedPath(),oe=ee.includes(G._menu);if(ee.includes(G._element)||G._config.autoClose==="inside"&&!oe||G._config.autoClose==="outside"&&oe||G._menu.contains(f.target)&&(f.type==="keyup"&&f.key==="Tab"||/input|select|option|textarea|form/i.test(f.target.tagName)))continue;const Oe={relatedTarget:G._element};f.type==="click"&&(Oe.clickEvent=f),G._completeHide(Oe)}}static dataApiKeydownHandler(f){const v=/input|textarea/i.test(f.target.tagName),D=f.key==="Escape",G=[ut,jr].includes(f.key);if(!G&&!D||v&&!D)return;f.preventDefault();const ee=this.matches(pe)?this:se.prev(this,pe)[0]||se.next(this,pe)[0]||se.findOne(pe,f.delegateTarget.parentNode),oe=Kn.getOrCreateInstance(ee);if(G)return f.stopPropagation(),oe.show(),void oe._selectMenuItem(f);oe._isShown()&&(f.stopPropagation(),oe.hide(),ee.focus())}}H.on(document,vn,pe,Kn.dataApiKeydownHandler),H.on(document,vn,It,Kn.dataApiKeydownHandler),H.on(document,Lt,Kn.clearMenus),H.on(document,os,Kn.clearMenus),H.on(document,Lt,pe,function(M){M.preventDefault(),Kn.getOrCreateInstance(this).toggle()}),O(Kn);const as="backdrop",gr="show",po=`mousedown.bs.${as}`,ga={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Qc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Qe extends Nt{constructor(f){super(),this._config=this._getConfig(f),this._isAppended=!1,this._element=null}static get Default(){return ga}static get DefaultType(){return Qc}static get NAME(){return as}show(f){if(!this._config.isVisible)return void B(f);this._append();const v=this._getElement();this._config.isAnimated&&j(v),v.classList.add(gr),this._emulateAnimation(()=>{B(f)})}hide(f){this._config.isVisible?(this._getElement().classList.remove(gr),this._emulateAnimation(()=>{this.dispose(),B(f)})):B(f)}dispose(){this._isAppended&&(H.off(this._element,po),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const f=document.createElement("div");f.className=this._config.className,this._config.isAnimated&&f.classList.add("fade"),this._element=f}return this._element}_configAfterMerge(f){return f.rootElement=p(f.rootElement),f}_append(){if(this._isAppended)return;const f=this._getElement();this._config.rootElement.append(f),H.on(f,po,()=>{B(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(f){R(f,this._getElement(),this._config.isAnimated)}}const Ps=".bs.focustrap",go=`focusin${Ps}`,mo=`keydown.tab${Ps}`,Jc="backward",Yc={autofocus:!0,trapElement:null},fp={autofocus:"boolean",trapElement:"element"};class Xc extends Nt{constructor(f){super(),this._config=this._getConfig(f),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Yc}static get DefaultType(){return fp}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),H.off(document,Ps),H.on(document,go,f=>this._handleFocusin(f)),H.on(document,mo,f=>this._handleKeydown(f)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,H.off(document,Ps))}_handleFocusin(f){const{trapElement:v}=this._config;if(f.target===document||f.target===v||v.contains(f.target))return;const D=se.focusableChildren(v);D.length===0?v.focus():this._lastTabNavDirection===Jc?D[D.length-1].focus():D[0].focus()}_handleKeydown(f){f.key==="Tab"&&(this._lastTabNavDirection=f.shiftKey?Jc:"forward")}}const Zc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ed=".sticky-top",ls="padding-right",Or="margin-right";class ma{constructor(){this._element=document.body}getWidth(){const f=document.documentElement.clientWidth;return Math.abs(window.innerWidth-f)}hide(){const f=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ls,v=>v+f),this._setElementAttributes(Zc,ls,v=>v+f),this._setElementAttributes(ed,Or,v=>v-f)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ls),this._resetElementAttributes(Zc,ls),this._resetElementAttributes(ed,Or)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(f,v,D){const G=this.getWidth();this._applyManipulationCallback(f,ee=>{if(ee!==this._element&&window.innerWidth>ee.clientWidth+G)return;this._saveInitialAttribute(ee,v);const oe=window.getComputedStyle(ee).getPropertyValue(v);ee.style.setProperty(v,`${D(Number.parseFloat(oe))}px`)})}_saveInitialAttribute(f,v){const D=f.style.getPropertyValue(v);D&&nt.setDataAttribute(f,v,D)}_resetElementAttributes(f,v){this._applyManipulationCallback(f,D=>{const G=nt.getDataAttribute(D,v);G!==null?(nt.removeDataAttribute(D,v),D.style.setProperty(v,G)):D.style.removeProperty(v)})}_applyManipulationCallback(f,v){if(d(f))v(f);else for(const D of se.find(f,this._element))v(D)}}const wn=".bs.modal",td=`hide${wn}`,fi=`hidePrevented${wn}`,nd=`hidden${wn}`,rd=`show${wn}`,pp=`shown${wn}`,us=`resize${wn}`,gp=`click.dismiss${wn}`,mp=`mousedown.dismiss${wn}`,_a=`keydown.dismiss${wn}`,va=`click${wn}.data-api`,Ul="modal-open",pi="show",js="modal-static",sd={backdrop:!0,focus:!0,keyboard:!0},Bl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class He extends Ot{constructor(f,v){super(f,v),this._dialog=se.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ma,this._addEventListeners()}static get Default(){return sd}static get DefaultType(){return Bl}static get NAME(){return"modal"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||this._isTransitioning||H.trigger(this._element,rd,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ul),this._adjustDialog(),this._backdrop.show(()=>this._showElement(f)))}hide(){this._isShown&&!this._isTransitioning&&(H.trigger(this._element,td).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(pi),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){H.off(window,wn),H.off(this._dialog,wn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Qe({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Xc({trapElement:this._element})}_showElement(f){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const v=se.findOne(".modal-body",this._dialog);v&&(v.scrollTop=0),j(this._element),this._element.classList.add(pi),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,H.trigger(this._element,pp,{relatedTarget:f})},this._dialog,this._isAnimated())}_addEventListeners(){H.on(this._element,_a,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),H.on(window,us,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),H.on(this._element,mp,f=>{H.one(this._element,gp,v=>{this._element===f.target&&this._element===v.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ul),this._resetAdjustments(),this._scrollBar.reset(),H.trigger(this._element,nd)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(H.trigger(this._element,fi).defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,v=this._element.style.overflowY;v==="hidden"||this._element.classList.contains(js)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(js),this._queueCallback(()=>{this._element.classList.remove(js),this._queueCallback(()=>{this._element.style.overflowY=v},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const f=this._element.scrollHeight>document.documentElement.clientHeight,v=this._scrollBar.getWidth(),D=v>0;if(D&&!f){const G=T()?"paddingLeft":"paddingRight";this._element.style[G]=`${v}px`}if(!D&&f){const G=T()?"paddingRight":"paddingLeft";this._element.style[G]=`${v}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(f,v){return this.each(function(){const D=He.getOrCreateInstance(this,f);if(typeof f=="string"){if(D[f]===void 0)throw new TypeError(`No method named "${f}"`);D[f](v)}})}}H.on(document,va,'[data-bs-toggle="modal"]',function(M){const f=se.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&M.preventDefault(),H.one(f,rd,D=>{D.defaultPrevented||H.one(f,nd,()=>{m(this)&&this.focus()})});const v=se.findOne(".modal.show");v&&He.getInstance(v).hide(),He.getOrCreateInstance(f).toggle(this)}),rt(He),O(He);const Dr=".bs.offcanvas",id=".data-api",od=`load${Dr}${id}`,zl="show",ql="showing",_o="hiding",Hl=".offcanvas.show",Lr=`show${Dr}`,ad=`shown${Dr}`,_p=`hide${Dr}`,gi=`hidePrevented${Dr}`,Wl=`hidden${Dr}`,Kl=`resize${Dr}`,ya=`click${Dr}${id}`,ld=`keydown.dismiss${Dr}`,wa={backdrop:!0,keyboard:!0,scroll:!1},vp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class mr extends Ot{constructor(f,v){super(f,v),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return wa}static get DefaultType(){return vp}static get NAME(){return"offcanvas"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||H.trigger(this._element,Lr,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ma().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ql),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(zl),this._element.classList.remove(ql),H.trigger(this._element,ad,{relatedTarget:f})},this._element,!0))}hide(){this._isShown&&(H.trigger(this._element,_p).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(_o),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(zl,_o),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ma().reset(),H.trigger(this._element,Wl)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const f=!!this._config.backdrop;return new Qe({className:"offcanvas-backdrop",isVisible:f,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:f?()=>{this._config.backdrop!=="static"?this.hide():H.trigger(this._element,gi)}:null})}_initializeFocusTrap(){return new Xc({trapElement:this._element})}_addEventListeners(){H.on(this._element,ld,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():H.trigger(this._element,gi))})}static jQueryInterface(f){return this.each(function(){const v=mr.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f](this)}})}}H.on(document,ya,'[data-bs-toggle="offcanvas"]',function(M){const f=se.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this))return;H.one(f,Wl,()=>{m(this)&&this.focus()});const v=se.findOne(Hl);v&&v!==f&&mr.getInstance(v).hide(),mr.getOrCreateInstance(f).toggle(this)}),H.on(window,od,()=>{for(const M of se.find(Hl))mr.getOrCreateInstance(M).show()}),H.on(window,Kl,()=>{for(const M of se.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(M).position!=="fixed"&&mr.getOrCreateInstance(M).hide()}),rt(mr),O(mr);const mi={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ud=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),cd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Gl=(M,f)=>{const v=M.nodeName.toLowerCase();return f.includes(v)?!ud.has(v)||!!cd.test(M.nodeValue):f.filter(D=>D instanceof RegExp).some(D=>D.test(v))},Ql={allowList:mi,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},dd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ea={entry:"(string|element|function|null)",selector:"(string|element)"};class hd extends Nt{constructor(f){super(),this._config=this._getConfig(f)}static get Default(){return Ql}static get DefaultType(){return dd}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(f=>this._resolvePossibleFunction(f)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(f){return this._checkContent(f),this._config.content={...this._config.content,...f},this}toHtml(){const f=document.createElement("div");f.innerHTML=this._maybeSanitize(this._config.template);for(const[G,ee]of Object.entries(this._config.content))this._setContent(f,ee,G);const v=f.children[0],D=this._resolvePossibleFunction(this._config.extraClass);return D&&v.classList.add(...D.split(" ")),v}_typeCheckConfig(f){super._typeCheckConfig(f),this._checkContent(f.content)}_checkContent(f){for(const[v,D]of Object.entries(f))super._typeCheckConfig({selector:v,entry:D},Ea)}_setContent(f,v,D){const G=se.findOne(D,f);G&&((v=this._resolvePossibleFunction(v))?d(v)?this._putElementInTemplate(p(v),G):this._config.html?G.innerHTML=this._maybeSanitize(v):G.textContent=v:G.remove())}_maybeSanitize(f){return this._config.sanitize?function(v,D,G){if(!v.length)return v;if(G&&typeof G=="function")return G(v);const ee=new window.DOMParser().parseFromString(v,"text/html"),oe=[].concat(...ee.body.querySelectorAll("*"));for(const Oe of oe){const gt=Oe.nodeName.toLowerCase();if(!Object.keys(D).includes(gt)){Oe.remove();continue}const Nn=[].concat(...Oe.attributes),Gn=[].concat(D["*"]||[],D[gt]||[]);for(const Vr of Nn)Gl(Vr,Gn)||Oe.removeAttribute(Vr.nodeName)}return ee.body.innerHTML}(f,this._config.allowList,this._config.sanitizeFn):f}_resolvePossibleFunction(f){return B(f,[this])}_putElementInTemplate(f,v){if(this._config.html)return v.innerHTML="",void v.append(f);v.textContent=f.textContent}}const fd=new Set(["sanitize","allowList","sanitizeFn"]),Mr="fade",vo="show",Jl=".modal",Yl="hide.bs.modal",_i="hover",vi="focus",En={AUTO:"auto",TOP:"top",RIGHT:T()?"left":"right",BOTTOM:"bottom",LEFT:T()?"right":"left"},pd={allowList:mi,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},gd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class jn extends Ot{constructor(f,v){if(s===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(f,v),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return pd}static get DefaultType(){return gd}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),H.off(this._element.closest(Jl),Yl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const f=H.trigger(this._element,this.constructor.eventName("show")),v=(I(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(f.defaultPrevented||!v)return;this._disposePopper();const D=this._getTipElement();this._element.setAttribute("aria-describedby",D.getAttribute("id"));const{container:G}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(G.append(D),H.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(D),D.classList.add(vo),"ontouchstart"in document.documentElement)for(const ee of[].concat(...document.body.children))H.on(ee,"mouseover",x);this._queueCallback(()=>{H.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!H.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(vo),"ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))H.off(f,"mouseover",x);this._activeTrigger.click=!1,this._activeTrigger[vi]=!1,this._activeTrigger[_i]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),H.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(f){const v=this._getTemplateFactory(f).toHtml();if(!v)return null;v.classList.remove(Mr,vo),v.classList.add(`bs-${this.constructor.NAME}-auto`);const D=(G=>{do G+=Math.floor(1e6*Math.random());while(document.getElementById(G));return G})(this.constructor.NAME).toString();return v.setAttribute("id",D),this._isAnimated()&&v.classList.add(Mr),v}setContent(f){this._newContent=f,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(f){return this._templateFactory?this._templateFactory.changeContent(f):this._templateFactory=new hd({...this._config,content:f,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(f){return this.constructor.getOrCreateInstance(f.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Mr)}_isShown(){return this.tip&&this.tip.classList.contains(vo)}_createPopper(f){const v=B(this._config.placement,[this,f,this._element]),D=En[v.toUpperCase()];return s.createPopper(this._element,f,this._getPopperConfig(D))}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(v=>Number.parseInt(v,10)):typeof f=="function"?v=>f(v,this._element):f}_resolvePossibleFunction(f){return B(f,[this._element])}_getPopperConfig(f){const v={placement:f,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:D=>{this._getTipElement().setAttribute("data-popper-placement",D.state.placement)}}]};return{...v,...B(this._config.popperConfig,[v])}}_setListeners(){const f=this._config.trigger.split(" ");for(const v of f)if(v==="click")H.on(this._element,this.constructor.eventName("click"),this._config.selector,D=>{this._initializeOnDelegatedTarget(D).toggle()});else if(v!=="manual"){const D=v===_i?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),G=v===_i?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");H.on(this._element,D,this._config.selector,ee=>{const oe=this._initializeOnDelegatedTarget(ee);oe._activeTrigger[ee.type==="focusin"?vi:_i]=!0,oe._enter()}),H.on(this._element,G,this._config.selector,ee=>{const oe=this._initializeOnDelegatedTarget(ee);oe._activeTrigger[ee.type==="focusout"?vi:_i]=oe._element.contains(ee.relatedTarget),oe._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},H.on(this._element.closest(Jl),Yl,this._hideModalHandler)}_fixTitle(){const f=this._element.getAttribute("title");f&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",f),this._element.setAttribute("data-bs-original-title",f),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(f,v){clearTimeout(this._timeout),this._timeout=setTimeout(f,v)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(f){const v=nt.getDataAttributes(this._element);for(const D of Object.keys(v))fd.has(D)&&delete v[D];return f={...v,...typeof f=="object"&&f?f:{}},f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f.container=f.container===!1?document.body:p(f.container),typeof f.delay=="number"&&(f.delay={show:f.delay,hide:f.delay}),typeof f.title=="number"&&(f.title=f.title.toString()),typeof f.content=="number"&&(f.content=f.content.toString()),f}_getDelegateConfig(){const f={};for(const[v,D]of Object.entries(this._config))this.constructor.Default[v]!==D&&(f[v]=D);return f.selector=!1,f.trigger="manual",f}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(f){return this.each(function(){const v=jn.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f]()}})}}O(jn);const u={...jn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},g={...jn.DefaultType,content:"(null|string|element|function)"};class _ extends jn{static get Default(){return u}static get DefaultType(){return g}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(f){return this.each(function(){const v=_.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f]()}})}}O(_);const b=".bs.scrollspy",U=`activate${b}`,q=`click${b}`,Z=`load${b}.data-api`,Me="active",St="[href]",Ne=".nav-link",$t=`${Ne}, .nav-item > ${Ne}, .list-group-item`,Ut={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},yi={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Wt extends Ot{constructor(f,v){super(f,v),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Ut}static get DefaultType(){return yi}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const f of this._observableSections.values())this._observer.observe(f)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(f){return f.target=p(f.target)||document.body,f.rootMargin=f.offset?`${f.offset}px 0px -30%`:f.rootMargin,typeof f.threshold=="string"&&(f.threshold=f.threshold.split(",").map(v=>Number.parseFloat(v))),f}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(H.off(this._config.target,q),H.on(this._config.target,q,St,f=>{const v=this._observableSections.get(f.target.hash);if(v){f.preventDefault();const D=this._rootElement||window,G=v.offsetTop-this._element.offsetTop;if(D.scrollTo)return void D.scrollTo({top:G,behavior:"smooth"});D.scrollTop=G}}))}_getNewObserver(){const f={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(v=>this._observerCallback(v),f)}_observerCallback(f){const v=oe=>this._targetLinks.get(`#${oe.target.id}`),D=oe=>{this._previousScrollData.visibleEntryTop=oe.target.offsetTop,this._process(v(oe))},G=(this._rootElement||document.documentElement).scrollTop,ee=G>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=G;for(const oe of f){if(!oe.isIntersecting){this._activeTarget=null,this._clearActiveClass(v(oe));continue}const Oe=oe.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ee&&Oe){if(D(oe),!G)return}else ee||Oe||D(oe)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const f=se.find(St,this._config.target);for(const v of f){if(!v.hash||y(v))continue;const D=se.findOne(decodeURI(v.hash),this._element);m(D)&&(this._targetLinks.set(decodeURI(v.hash),v),this._observableSections.set(v.hash,D))}}_process(f){this._activeTarget!==f&&(this._clearActiveClass(this._config.target),this._activeTarget=f,f.classList.add(Me),this._activateParents(f),H.trigger(this._element,U,{relatedTarget:f}))}_activateParents(f){if(f.classList.contains("dropdown-item"))se.findOne(".dropdown-toggle",f.closest(".dropdown")).classList.add(Me);else for(const v of se.parents(f,".nav, .list-group"))for(const D of se.prev(v,$t))D.classList.add(Me)}_clearActiveClass(f){f.classList.remove(Me);const v=se.find(`${St}.${Me}`,f);for(const D of v)D.classList.remove(Me)}static jQueryInterface(f){return this.each(function(){const v=Wt.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f]()}})}}H.on(window,Z,()=>{for(const M of se.find('[data-bs-spy="scroll"]'))Wt.getOrCreateInstance(M)}),O(Wt);const _r=".bs.tab",Xl=`hide${_r}`,Ek=`hidden${_r}`,bk=`show${_r}`,Tk=`shown${_r}`,Ik=`click${_r}`,Sk=`keydown${_r}`,xk=`load${_r}`,Ak="ArrowLeft",vy="ArrowRight",kk="ArrowUp",yy="ArrowDown",yp="Home",wy="End",yo="active",Ey="fade",wp="show",by=".dropdown-toggle",Ep=`:not(${by})`,Ty='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',bp=`.nav-link${Ep}, .list-group-item${Ep}, [role="tab"]${Ep}, ${Ty}`,Ck=`.${yo}[data-bs-toggle="tab"], .${yo}[data-bs-toggle="pill"], .${yo}[data-bs-toggle="list"]`;class wo extends Ot{constructor(f){super(f),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),H.on(this._element,Sk,v=>this._keydown(v)))}static get NAME(){return"tab"}show(){const f=this._element;if(this._elemIsActive(f))return;const v=this._getActiveElem(),D=v?H.trigger(v,Xl,{relatedTarget:f}):null;H.trigger(f,bk,{relatedTarget:v}).defaultPrevented||D&&D.defaultPrevented||(this._deactivate(v,f),this._activate(f,v))}_activate(f,v){f&&(f.classList.add(yo),this._activate(se.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.removeAttribute("tabindex"),f.setAttribute("aria-selected",!0),this._toggleDropDown(f,!0),H.trigger(f,Tk,{relatedTarget:v})):f.classList.add(wp)},f,f.classList.contains(Ey)))}_deactivate(f,v){f&&(f.classList.remove(yo),f.blur(),this._deactivate(se.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.setAttribute("aria-selected",!1),f.setAttribute("tabindex","-1"),this._toggleDropDown(f,!1),H.trigger(f,Ek,{relatedTarget:v})):f.classList.remove(wp)},f,f.classList.contains(Ey)))}_keydown(f){if(![Ak,vy,kk,yy,yp,wy].includes(f.key))return;f.stopPropagation(),f.preventDefault();const v=this._getChildren().filter(G=>!y(G));let D;if([yp,wy].includes(f.key))D=v[f.key===yp?0:v.length-1];else{const G=[vy,yy].includes(f.key);D=k(v,f.target,G,!0)}D&&(D.focus({preventScroll:!0}),wo.getOrCreateInstance(D).show())}_getChildren(){return se.find(bp,this._parent)}_getActiveElem(){return this._getChildren().find(f=>this._elemIsActive(f))||null}_setInitialAttributes(f,v){this._setAttributeIfNotExists(f,"role","tablist");for(const D of v)this._setInitialAttributesOnChild(D)}_setInitialAttributesOnChild(f){f=this._getInnerElement(f);const v=this._elemIsActive(f),D=this._getOuterElement(f);f.setAttribute("aria-selected",v),D!==f&&this._setAttributeIfNotExists(D,"role","presentation"),v||f.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(f,"role","tab"),this._setInitialAttributesOnTargetPanel(f)}_setInitialAttributesOnTargetPanel(f){const v=se.getElementFromSelector(f);v&&(this._setAttributeIfNotExists(v,"role","tabpanel"),f.id&&this._setAttributeIfNotExists(v,"aria-labelledby",`${f.id}`))}_toggleDropDown(f,v){const D=this._getOuterElement(f);if(!D.classList.contains("dropdown"))return;const G=(ee,oe)=>{const Oe=se.findOne(ee,D);Oe&&Oe.classList.toggle(oe,v)};G(by,yo),G(".dropdown-menu",wp),D.setAttribute("aria-expanded",v)}_setAttributeIfNotExists(f,v,D){f.hasAttribute(v)||f.setAttribute(v,D)}_elemIsActive(f){return f.classList.contains(yo)}_getInnerElement(f){return f.matches(bp)?f:se.findOne(bp,f)}_getOuterElement(f){return f.closest(".nav-item, .list-group-item")||f}static jQueryInterface(f){return this.each(function(){const v=wo.getOrCreateInstance(this);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f]()}})}}H.on(document,Ik,Ty,function(M){["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this)||wo.getOrCreateInstance(this).show()}),H.on(window,xk,()=>{for(const M of se.find(Ck))wo.getOrCreateInstance(M)}),O(wo);const wi=".bs.toast",Rk=`mouseover${wi}`,Pk=`mouseout${wi}`,jk=`focusin${wi}`,Nk=`focusout${wi}`,Ok=`hide${wi}`,Dk=`hidden${wi}`,Lk=`show${wi}`,Mk=`shown${wi}`,Iy="hide",md="show",_d="showing",Vk={animation:"boolean",autohide:"boolean",delay:"number"},Fk={animation:!0,autohide:!0,delay:5e3};class Zl extends Ot{constructor(f,v){super(f,v),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Fk}static get DefaultType(){return Vk}static get NAME(){return"toast"}show(){H.trigger(this._element,Lk).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Iy),j(this._element),this._element.classList.add(md,_d),this._queueCallback(()=>{this._element.classList.remove(_d),H.trigger(this._element,Mk),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(H.trigger(this._element,Ok).defaultPrevented||(this._element.classList.add(_d),this._queueCallback(()=>{this._element.classList.add(Iy),this._element.classList.remove(_d,md),H.trigger(this._element,Dk)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(md),super.dispose()}isShown(){return this._element.classList.contains(md)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(f,v){switch(f.type){case"mouseover":case"mouseout":this._hasMouseInteraction=v;break;case"focusin":case"focusout":this._hasKeyboardInteraction=v}if(v)return void this._clearTimeout();const D=f.relatedTarget;this._element===D||this._element.contains(D)||this._maybeScheduleHide()}_setListeners(){H.on(this._element,Rk,f=>this._onInteraction(f,!0)),H.on(this._element,Pk,f=>this._onInteraction(f,!1)),H.on(this._element,jk,f=>this._onInteraction(f,!0)),H.on(this._element,Nk,f=>this._onInteraction(f,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(f){return this.each(function(){const v=Zl.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f](this)}})}}return rt(Zl),O(Zl),{Alert:Dt,Button:Ar,Carousel:ft,Collapse:ke,Dropdown:Kn,Modal:He,Offcanvas:mr,Popover:_,ScrollSpy:Wt,Tab:wo,Toast:Zl,Tooltip:jn}})})(AF);const _4=()=>h.jsx("header",{className:"header text-center border-bottom py-3",children:h.jsx("h1",{className:"fw-bold",children:h.jsx(De,{to:"/",className:"text-dark",children:"   "})})}),v4=()=>h.jsx(h.Fragment,{children:h.jsx("div",{className:"subheader bg-dark text-light fs-6",style:{padding:"11px 0"},children:h.jsxs("div",{className:"container-xl text-center",children:["  : ",h.jsx("a",{href:"https://t.me/darelom_students",children:" ."})]})})}),y4=()=>h.jsx("footer",{className:"footer bg-black py-4",children:h.jsxs("div",{className:"container text-center text-light",children:[h.jsxs("div",{className:"d-flex flex-wrap gap-4 gap-sm-5",children:[h.jsxs(fu,{title:" ",children:[h.jsxs(Pe,{children:[h.jsx("span",{children:"  : "}),h.jsx(De,{to:"/send_problem",children:"  "}),"."]}),h.jsxs(Pe,{children:[h.jsx("span",{children:" : "}),h.jsx(De,{to:"/send_suggestion",children:"  "}),"."]}),h.jsxs(Pe,{children:[h.jsx("span",{children:" : "}),h.jsx("a",{href:"https://t.me/darelom_students",children:" "}),"."]}),h.jsx(Pe,{children:h.jsx("a",{href:"https://github.com/iabdwahab/darelom-students",children:"   GitHub."})})]}),h.jsxs(fu,{title:"  ",children:[h.jsx(Pe,{children:h.jsx(De,{to:"/degrees/grade_1/2023_24",children:"  / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/degrees/grade_2/2023_24",children:"  / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/degrees/grade_3/2023_24",children:"  / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/degrees/grade_4/2023_24",children:"  / 2024."})}),h.jsx("hr",{}),h.jsx(Pe,{children:h.jsx(De,{to:"/degrees/grade_1/2024_25",children:"  / 2025."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/degrees/grade_2/2024_25",children:"  / 2025."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/degrees/grade_3/2024_25",children:"  / 2025."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/degrees/grade_4/2024_25",children:"  / 2025."})})]}),h.jsxs(fu,{title:"  ",children:[h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_1/term_1/2024",children:"  /   / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_1/term_2/2024",children:"  /   / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_1/term_1/2025",children:"  /   / 2025."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_1/term_2/2025",children:"  /   / 2025."})}),h.jsx("hr",{}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_2/term_1/2024",children:"  /   / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_2/term_2/2024",children:"  /   / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_2/term_1/2025",children:"  /   / 2025."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_2/term_2/2025",children:"  /   / 2025."})}),h.jsx("hr",{}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_3/term_1/2024",children:"  /   / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_3/term_2/2024",children:"  /   / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_3/term_1/2025",children:"  /   / 2025."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_3/term_2/2025",children:"  /   / 2025."})}),h.jsx("hr",{}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_4/term_1/2024",children:"  /   / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_4/term_2/2024",children:"  /   / 2024."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_4/term_1/2025",children:"  /   / 2025."})}),h.jsx(Pe,{children:h.jsx(De,{to:"/ranking/grade_4/term_2/2025",children:"  /   / 2025."})})]}),h.jsxs("div",{children:[h.jsxs(fu,{title:"  ",className:"mb-4",children:[h.jsx(Pe,{children:h.jsx("a",{href:"http://t.me/iabdwahab",children:"Telegram."})}),h.jsx(Pe,{children:h.jsx("a",{href:"https://www.linkedin.com/in/iabdwahab/",children:"LinkedIn."})}),h.jsx(Pe,{children:h.jsx("a",{href:"https://github.com/iabdwahab",children:"GitHub."})})]}),h.jsxs(fu,{title:"  ",children:[h.jsxs(Pe,{children:[h.jsx("a",{href:"https://mothalthagency.com",children:"  ."}),h.jsx(Pe,{children:h.jsx("a",{href:"https://thecapital.sa",children:'  " ".'})})]}),h.jsx(Pe,{children:h.jsx("a",{href:"https://iabdwahab.github.io/assembly-endgame/",children:"Assembly Endgame."})}),h.jsx(Pe,{children:h.jsx("a",{href:"https://iabdwahab.github.io/positivus-agency",children:"Positivus Agency."})}),h.jsx(Pe,{children:h.jsx("a",{href:"https://world-ranks-iabdwahab.vercel.app",children:"World Ranks."})})]})]})]}),h.jsx("hr",{}),h.jsxs("p",{className:"m-0",children:[h.jsx("span",{children:"   : "}),h.jsx("span",{className:"text-warning",children:"  153."})]})]})});function fu({title:t,children:e,className:n}){return h.jsxs("div",{className:`text-end ${n}`,children:[h.jsxs("h4",{className:"mb-3",children:[t,":"]}),e]})}function Pe({children:t}){return h.jsxs("p",{className:"m-0",children:["- ",t]})}const w4=()=>{const{pathname:t}=lr();F.useEffect(()=>{window.scrollTo(0,0)},[t])},E4=()=>{const[t,e]=F.useState(localStorage.getItem("theme")||"light");function n(){document.documentElement.getAttribute("data-bs-theme")==="dark"?(document.documentElement.setAttribute("data-bs-theme","light"),localStorage.setItem("theme","light"),e("light")):(document.documentElement.setAttribute("data-bs-theme","dark"),localStorage.setItem("theme","dark"),e("dark"))}return h.jsx("button",{className:"btn btn-primary w-100 mt-2 p-2",onClick:n,children:t==="light"?"  []":"  [ ]"})},b4=()=>h.jsx("div",{className:"border-bottom",children:h.jsx("div",{className:"container-xl py-3",children:h.jsx(E4,{})})}),jt=({hasText:t=!0})=>h.jsxs("div",{className:"d-block text-center py-4",children:[h.jsx("div",{className:"spinner-border text-primary",role:"status",children:h.jsx("span",{className:"sr-only d-none",children:"..."})}),t?h.jsx("p",{className:"fw-bold fs-5 mt-2",children:"  ."}):""]}),T4=()=>{const[t,e]=F.useState(!0);return F.useEffect(()=>{tS(Qf,()=>{e(!1)})},[]),h.jsxs("div",{className:"d-flex flex-column min-vh-100",children:[h.jsx(_4,{}),h.jsx(v4,{}),h.jsx(b4,{}),h.jsx("div",{className:"container-xl flex-grow-1 py-3",children:h.jsx("div",{children:t?h.jsx(jt,{}):h.jsx(nF,{})})}),h.jsx(y4,{}),h.jsx(w4,{})]})},I4=({currentStepIndex:t,setCurrentStepIndex:e,selections:n,setSelections:r})=>{function s(){t>0&&(e(t-1),r(n.slice(0,n.length-1)))}const i=t===0;return h.jsx("button",{className:`btn btn-danger ${i?"d-none":"d-block"}`,onClick:s,children:""})},S4=({option:t,stepsList:e,currentStepIndex:n,setCurrentStepIndex:r,selections:s,setSelections:i})=>{const o=Et();function a(){if(t.option_data==="test_yourself")return o("/test_yourself");n<e.length-1&&t.will_next?(r(n+1),i([...s,t.option_data])):o(`${s.join("/")}/${t.option_data}`)}const l=`${t.option_text}`;return h.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:a,children:l})},x4=({stepsList:t})=>{var a,l;const e=lr(),[n,r]=F.useState(((a=e.state)==null?void 0:a.initialStepIndex)||0),[s,i]=F.useState(((l=e.state)==null?void 0:l.selections)||[]),o=t[n];return h.jsxs("div",{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:o.title}),h.jsx(I4,{currentStepIndex:n,setCurrentStepIndex:r,selections:s,setSelections:i})]}),h.jsx("div",{className:"row g-2 my-2",children:o.options.map((c,d)=>{var p;if(n===0||(p=c.availableAt)!=null&&p.includes(s[0]))return h.jsx("div",{className:"col-sm-6",children:h.jsx(S4,{option:c,stepsList:t,currentStepIndex:n,setCurrentStepIndex:r,selections:s,setSelections:i})},d)})})]})},pn=({children:t,fontSize:e,py:n})=>h.jsx("h2",{className:`fs-${e||4} py-${n||2} fw-medium bg-dark text-center text-light`,children:t}),A4=()=>h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",children:"#"}),h.jsx("th",{scope:"col",children:""}),h.jsx("th",{scope:"col",className:"text-center",children:""})]})}),ii="https://iabdwahab.github.io";async function k4(){return await(await fetch(`${ii}/darelom-students-data/top_degrees.json`)).json()}const C4=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0);return F.useEffect(()=>{async function s(){let i;i=await k4(),e(i),r(!1)}s()},[]),h.jsxs("div",{className:"top-students",children:[h.jsx(pn,{children:" "}),n?h.jsx(jt,{}):h.jsx("div",{className:"row g-2 mt-1",children:t.map((s,i)=>h.jsxs("div",{className:"border-secondary-subtle rounded-2 py-1 my-0 col-lg-6",children:[h.jsx("h3",{className:"fs-5 bg-dark text-light p-2 my-0",children:s.grade_ar_name}),h.jsxs("table",{className:"table table-striped border",children:[h.jsx(A4,{}),h.jsx(R4,{gradeDegree:s})]}),h.jsx(De,{to:`degrees/${s.grade}/2024_25`,className:"d-block my-2 btn btn-primary fw-bold",children:"  "})]},i))})]})};function R4({gradeDegree:t}){return h.jsx("tbody",{children:t.list.map((e,n)=>h.jsx(P4,{student:e,grade:t.grade},n))})}function P4({student:t,grade:e}){const n=Et();return h.jsxs("tr",{className:"degree_tr-linked",onClick:()=>n(`/degrees/${e}/2024_25/${t.id}`),children:[h.jsx("th",{scope:"row",children:t.rank}),h.jsx("td",{children:t.name}),h.jsxs("td",{className:"text-center",children:["%",t.total_percentage]})]})}const j4=[{title:" :",options:[{option_text:" ",option_data:"grade_1",will_next:!0,available:!0},{option_text:" ",option_data:"grade_2",will_next:!0,available:!0},{option_text:" ",option_data:"grade_3",will_next:!0,available:!0},{option_text:" ",option_data:"grade_4",will_next:!0,available:!0},{option_text:" ",option_data:"general_subjects",will_next:!1,available:!0}]},{title:" ",options:[{option_text:" ",option_data:"schedule",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"books",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"lectures_recordings",will_next:!0,availableAt:["grade_1","grade_2","grade_3"]},{option_text:"  -  ",option_data:"test_yourself_students",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"  [ ]",option_data:"test_yourself",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"more_resources",will_next:!0,availableAt:["grade_2"]},{option_text:"",option_data:"explanations",will_next:!1,availableAt:[]},{option_text:"  ",option_data:"final_exams",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]},{title:"  :",options:[{option_text:"  ",option_data:"term_1",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"  ",option_data:"term_2",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]}],N4=()=>h.jsxs(h.Fragment,{children:[h.jsx(x4,{stepsList:j4}),h.jsx(C4,{})]});async function O4(t,e){const r=await(await fetch(`${ii}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();return r.degrees.sort((s,i)=>i.total-s.total),{degrees:r.degrees,studentsCount:r.degrees.length}}async function D4(t){const e=await Lx(t),n=e.docs.map(s=>s.data()),r=e.docs[e.docs.length-1];return{degreesData:n,lastStudentData:r}}async function L4(t){return(await E2(t)).data().count}function Tt(t){return{grade_1:" ",grade_2:" ",grade_3:" ",grade_4:" ",term_1:"  ",term_2:"  ",nahw:"",sarf:"",english:"",elm_allugha:" ",albalagha:"",adab_gahily:" ",falsafa:"",seera_khoalfaa:"  ",quran_ebadat:" ",naqd_qadim:"  ",nsoos_gahilya:" ",farsy:"",ebry:"",riyadat_aamal:" ",nazm_oslobiya:" ",quran_ahwal:"   ",adab_islamy_omawy:"  ",arood:"",mawarith:"",maajim_aswat:"  ",balaghat_quran:" ",qaet_bahth:" ",nsoos_islamya_omawya:"  ",tareekh_omawy_abasy:"  ",aqida:"",adab_moqaran:" ",adab_abasy_andalusy:"  ",olom_quran:" ",tareekh_misr:"  ",tafseer:"",elm_kalam:" ",nsoos_abasya_andalusya:"  ",ittijahat_lughawiya:" ",adab_hadith:" ",hadara_nozom:" ",tasawof:"",osool_fiqh:" ",horoob_salibiya:" ",nsoos_haditha:"  ",naqd_hadith:"  ",mojalad_tasgilat:"  ",groupped_channel:"  "}[t]}const M4=({student:t,grade:e,year:n})=>{let{id:r,name:s,rank:i,total:o,total_percentage:a}=t;const l=Et(),c=s==="   ";function d(){c||l(`/degrees/${e}/${n}/${t.id}`)}return c&&(r="",s=""),h.jsxs("tr",{className:"degree_tr-linked",onClick:d,children:[h.jsx("th",{scope:"row",className:"text-center",children:i}),h.jsx("td",{className:"text-center",children:r}),h.jsx("td",{style:{whiteSpace:"nowrap"},children:s}),h.jsx("td",{className:"text-center",children:o}),h.jsxs("td",{className:"text-center",children:["%",a]})]})},ly=()=>{const t=[{isCentered:!0,text:"#"},{isCentered:!0,text:" "},{isCentered:!1,text:""},{isCentered:!0,text:""},{isCentered:!0,text:""}];return h.jsx("thead",{children:h.jsx("tr",{children:t.map((e,n)=>h.jsx("th",{scope:"col",className:`${e.isCentered&&"text-center"}`,children:e.text},n))})})},uy=({studentsCount:t})=>{const e=h.jsx("span",{className:"fw-bold",children:t||" "});return h.jsxs("h3",{className:"py-2 fs-4",children:[" : ",e,"."]})},V4=({degreesCollection:t,lastStudent:e,setDataAndHideLoaderFirestore:n})=>{function r(){const s=c2(t,d2("rank","asc"),f2(e),h2(40));n(s)}return h.jsx("button",{className:"btn btn-primary w-100",onClick:r,children:" "})},F4=()=>h.jsx("h3",{className:"fw-bold text-center fs-5",children:" ."}),Ml=()=>h.jsx("button",{className:"btn btn-primary w-100 disabled",children:h.jsx("div",{className:"spinner-border spinner-border-sm",role:"status"})}),$4=()=>{const{grade:t}=tn(),e=Et(),n=F.useRef(null),[r,s]=F.useState(!1);return F.useEffect(()=>{const i=n.current;i.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();try{s(!0);const a=i["student_id-input"].value;if(i.checkValidity()){const l=es(An,`${t}/degrees/2023_24`,a);(await ri(l)).exists()?e(`${a}`):i.classList.add("was-validated"),n.current.reset()}else i.classList.add("was-validated")}catch(a){console.log(a.message)}finally{s(!1)}})},[]),h.jsxs("form",{className:"row g-3 mt-0 needs-validation",noValidate:!0,ref:n,children:[h.jsx("p",{className:"mb-2 fw-bold",children:"  :"}),h.jsxs("div",{className:"col-12 col-sm-10 m-0 mb-2",children:[h.jsx("input",{type:"text",className:"form-control py-2",id:"student_id-input",placeholder:" ",minLength:5,maxLength:5,required:!0}),h.jsx("div",{className:"invalid-feedback",children:"   ."})]}),h.jsx("div",{className:"col-12 col-sm-2 m-0",children:r?h.jsx(Ml,{}):h.jsx("button",{type:"submit",className:"btn btn-primary mb-3 py-2 w-100",children:""})})]})};function DE(t,e){if(t.length)if(e==="duplicated"){t.sort((s,i)=>i.total-s.total);let n=1,r=t[0].total;for(let s=0;s<t.length;s++)t[s].total!==r&&(n=n+1,r=t[s].total),t[s].rank=n}else for(let n=0;n<t.length;n++)t[n].rank=n+1}const U4=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0),{grade:s,year:i}=tn(),[o,a]=F.useState(null),[l,c]=F.useState(null),[d,p]=F.useState(!1),[m,y]=F.useState("normal"),I=F.useRef(null),{pathname:x}=lr(),[j,A]=xF(),E=Uc(An,`${s}/degrees/${i}`);async function T(R){const k=await L4(E),{degreesData:w,lastStudentData:S}=await D4(R);a(k),e([...t,...w]),c(S),S.data().rank===k&&p(!0),r(!1)}async function O(){const R=await O4(s,i);e(R.degrees),a(R.degrees.length),r(!1),p(!0)}function B(R){y(R.target.value),DE(t,R.target.value),A({sortMethod:R.target.value})}return F.useEffect(()=>{O(),I.current&&(I.current.value="normal")},[x]),DE(t,j.get("sortMethod")||"normal"),h.jsxs("div",{children:[h.jsxs(pn,{fontSize:3,py:3,children:["  ",Tt(s)," ",i.split("_").join("/")]}),h.jsx(uy,{studentsCount:o}),h.jsx($4,{}),h.jsxs("div",{className:"d-flex flex-column gap-2 mb-4",children:[h.jsx("h5",{children:" :"}),h.jsxs("select",{ref:I,onChange:B,className:"form-select w-100","aria-label":"Default select example",style:{width:"100%",maxWidth:"400px"},children:[h.jsx("option",{value:"normal",defaultValue:!0,children:" "}),h.jsx("option",{value:"duplicated",children:"  "})]})]}),h.jsxs("div",{className:"table-responsive border",children:[h.jsxs("table",{className:"table table-striped table-bordered",children:[h.jsx(ly,{}),h.jsx("tbody",{children:t.map(R=>h.jsx(M4,{student:R,grade:s,year:i},R.id))})]}),n&&h.jsx(jt,{})]}),h.jsx("div",{className:"mt-3 mb-1",children:d?h.jsx(F4,{}):h.jsx(V4,{degreesCollection:E,lastStudent:l,setDataAndHideLoaderFirestore:T})})]})},B4="modulepreload",z4=function(t){return"/darelom-students/"+t},LE={},zc=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(l=>{if(l=z4(l),l in LE)return;LE[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":B4,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((m,y)=>{p.addEventListener("load",m),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},q4=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zc(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class cy extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class H4 extends cy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class W4 extends cy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class K4 extends cy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var zm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(zm||(zm={}));var G4=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function l(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class Q4{constructor(e,{headers:n={},customFetch:r,region:s=zm.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=q4(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return G4(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(I=>{throw new H4(I)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new W4(d);if(!d.ok)throw new K4(d);let m=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield d.json():m==="application/octet-stream"?y=yield d.blob():m==="text/event-stream"?y=d:m==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(s){return{data:null,error:s}}})}}var Ln={},dy={},rp={},qc={},sp={},ip={},J4=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tl=J4();const Y4=Tl.fetch,KA=Tl.fetch.bind(Tl),GA=Tl.Headers,X4=Tl.Request,Z4=Tl.Response,Vl=Object.freeze(Object.defineProperty({__proto__:null,Headers:GA,Request:X4,Response:Z4,default:KA,fetch:Y4},Symbol.toStringTag,{value:"Module"})),e$=rb(Vl);var op={};Object.defineProperty(op,"__esModule",{value:!0});let t$=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};op.default=t$;var QA=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ip,"__esModule",{value:!0});const n$=QA(e$),r$=QA(op);let s$=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=n$.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let c=null,d=null,p=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const A=await i.text();A===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=A:d=JSON.parse(A))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),j=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");x&&j&&j.length>1&&(p=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,m=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(d=[],c=null,m=200,y="OK")}catch{i.status===404&&x===""?(m=204,y="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,m=200,y="OK"),c&&this.shouldThrowOnError)throw new r$.default(c)}return{error:c,data:d,count:p,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};ip.default=s$;var i$=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sp,"__esModule",{value:!0});const o$=i$(ip);let a$=class extends o$.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};sp.default=a$;var l$=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qc,"__esModule",{value:!0});const u$=l$(sp);let c$=class extends u$.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};qc.default=c$;var d$=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rp,"__esModule",{value:!0});const pu=d$(qc);let h$=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new pu.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new pu.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new pu.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new pu.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new pu.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};rp.default=h$;var ap={},lp={};Object.defineProperty(lp,"__esModule",{value:!0});lp.version=void 0;lp.version="0.0.0-automated";Object.defineProperty(ap,"__esModule",{value:!0});ap.DEFAULT_HEADERS=void 0;const f$=lp;ap.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${f$.version}`};var JA=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dy,"__esModule",{value:!0});const p$=JA(rp),g$=JA(qc),m$=ap;let _$=class YA{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},m$.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new p$.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new YA(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{a.searchParams.append(d,p)})):(o="POST",l=n);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new g$.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};dy.default=_$;var Fl=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.PostgrestError=Ln.PostgrestBuilder=Ln.PostgrestTransformBuilder=Ln.PostgrestFilterBuilder=Ln.PostgrestQueryBuilder=Ln.PostgrestClient=void 0;const XA=Fl(dy);Ln.PostgrestClient=XA.default;const ZA=Fl(rp);Ln.PostgrestQueryBuilder=ZA.default;const ek=Fl(qc);Ln.PostgrestFilterBuilder=ek.default;const tk=Fl(sp);Ln.PostgrestTransformBuilder=tk.default;const nk=Fl(ip);Ln.PostgrestBuilder=nk.default;const rk=Fl(op);Ln.PostgrestError=rk.default;var v$=Ln.default={PostgrestClient:XA.default,PostgrestQueryBuilder:ZA.default,PostgrestFilterBuilder:ek.default,PostgrestTransformBuilder:tk.default,PostgrestBuilder:nk.default,PostgrestError:rk.default};const{PostgrestClient:y$,PostgrestQueryBuilder:pB,PostgrestFilterBuilder:gB,PostgrestTransformBuilder:mB,PostgrestBuilder:_B,PostgrestError:vB}=v$;function w$(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const E$=w$(),b$="2.11.15",T$=`realtime-js/${b$}`,I$="1.0.0",sk=1e4,S$=1e3;var zu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(zu||(zu={}));var ln;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(ln||(ln={}));var Hr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Hr||(Hr={}));var qm;(function(t){t.websocket="websocket"})(qm||(qm={}));var Co;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Co||(Co={}));class x${constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class ik{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var st;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(st||(st={}));const ME=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=A$(o,t,e,s),i),{})},A$=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?ok(i,o):Hm(o)},ok=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return P$(e,n)}switch(t){case st.bool:return k$(e);case st.float4:case st.float8:case st.int2:case st.int4:case st.int8:case st.numeric:case st.oid:return C$(e);case st.json:case st.jsonb:return R$(e);case st.timestamp:return j$(e);case st.abstime:case st.date:case st.daterange:case st.int4range:case st.int8range:case st.money:case st.reltime:case st.text:case st.time:case st.timestamptz:case st.timetz:case st.tsrange:case st.tstzrange:return Hm(e);default:return Hm(e)}},Hm=t=>t,k$=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},C$=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},R$=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},P$=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>ok(e,a))}return t},j$=t=>typeof t=="string"?t.replace(" ","T"):t,ak=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class hg{constructor(e,n,r={},s=sk){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var VE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(VE||(VE={}));class qu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qu.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=qu.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=qu.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const p=i[c];if(p){const m=d.map(j=>j.presence_ref),y=p.map(j=>j.presence_ref),I=d.filter(j=>y.indexOf(j.presence_ref)<0),x=p.filter(j=>m.indexOf(j.presence_ref)<0);I.length>0&&(a[c]=I),x.length>0&&(l[c]=x)}else a[c]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const p=e[a].map(y=>y.presence_ref),m=d.filter(y=>p.indexOf(y.presence_ref)<0);e[a].unshift(...m)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(p=>p.presence_ref);c=c.filter(p=>d.indexOf(p.presence_ref)<0),e[a]=c,s(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var FE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(FE||(FE={}));var $E;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})($E||($E={}));var Ms;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ms||(Ms={}));class hy{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ln.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hg(this,Hr.join,this.params,this.timeout),this.rejoinTimer=new ik(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ln.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ln.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ln.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new qu(this),this.broadcastEndpointURL=ak(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ln.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Ms.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Ms.CLOSED));const l={},c={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket.setAuth(),d===void 0){e==null||e(Ms.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,I=[];for(let x=0;x<y;x++){const j=m[x],{filter:{event:A,schema:E,table:T,filter:O}}=j,B=d&&d[x];if(B&&B.event===A&&B.schema===E&&B.table===T&&B.filter===O)I.push(Object.assign(Object.assign({},j),{id:B.id}));else{this.unsubscribe(),this.state=ln.errored,e==null||e(Ms.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,e&&e(Ms.SUBSCRIBED);return}}).receive("error",d=>{this.state=ln.errored,e==null||e(Ms.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ms.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ln.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new hg(this,Hr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new hg(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=Hr;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var I,x,j;return((I=y.filter)===null||I===void 0?void 0:I.event)==="*"||((j=(x=y.filter)===null||x===void 0?void 0:x.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(y=>y.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var I,x,j,A,E,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const O=y.id,B=(I=y.filter)===null||I===void 0?void 0:I.event;return O&&((x=n.ids)===null||x===void 0?void 0:x.includes(O))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const O=(E=(A=y==null?void 0:y.filter)===null||A===void 0?void 0:A.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return O==="*"||O===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const I=m.data,{schema:x,table:j,commit_timestamp:A,type:E,errors:T}=I;m=Object.assign(Object.assign({},{schema:x,table:j,commit_timestamp:A,eventType:E,new:{},old:{},errors:T}),this._getPayloadRecords(I))}y.callback(m,r)})}_isClosed(){return this.state===ln.closed}_isJoined(){return this.state===ln.joined}_isJoining(){return this.state===ln.joining}_isLeaving(){return this.state===ln.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&hy.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hr.close,{},e)}_onError(e){this._on(Hr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ln.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=ME(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=ME(e.columns,e.old_record)),n}}const UE=()=>{},N$=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class O${constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=sk,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=UE,this.ref=0,this.logger=UE,this.conn=null,this.sendBuffer=[],this.serializer=new x$,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>zc(async()=>{const{default:l}=await Promise.resolve().then(()=>Vl);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${qm.websocket}`,this.httpEndpoint=ak(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ik(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=E$),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:I$}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case zu.connecting:return Co.Connecting;case zu.open:return Co.Open;case zu.closing:return Co.Closing;default:return Co.Closed}}isConnected(){return this.connectionState()===Co.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new hy(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:T$};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Hr.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(S$,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([N$],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class fy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Bt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class D$ extends fy{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Wm extends fy{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var L$=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function l(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const lk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zc(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},M$=()=>L$(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zc(()=>Promise.resolve().then(()=>Vl),void 0)).Response:Response}),Km=t=>{if(Array.isArray(t))return t.map(n=>Km(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Km(r)}),e};var da=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function l(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const fg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),V$=(t,e,n)=>da(void 0,void 0,void 0,function*(){const r=yield M$();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new D$(fg(s),t.status||500))}).catch(s=>{e(new Wm(fg(s),s))}):e(new Wm(fg(t),t))}),F$=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Hc(t,e,n,r,s,i){return da(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,F$(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>V$(l,a,r))})})}function uf(t,e,n,r){return da(this,void 0,void 0,function*(){return Hc(t,"GET",e,n,r)})}function Ai(t,e,n,r,s){return da(this,void 0,void 0,function*(){return Hc(t,"POST",e,r,s,n)})}function $$(t,e,n,r,s){return da(this,void 0,void 0,function*(){return Hc(t,"PUT",e,r,s,n)})}function U$(t,e,n,r){return da(this,void 0,void 0,function*(){return Hc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function uk(t,e,n,r,s){return da(this,void 0,void 0,function*(){return Hc(t,"DELETE",e,r,s,n)})}var On=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function l(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const B$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},BE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class z${constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=lk(s)}uploadOrUpdate(e,n,r,s){return On(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},BE),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),p=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield p.json();return p.ok?{data:{path:c,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(Bt(i))return{data:null,error:i};throw i}})}upload(e,n,r){return On(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return On(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:BE.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const p=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),m=yield p.json();return p.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(Bt(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return On(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ai(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new fy("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}update(e,n,r){return On(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return On(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return On(this,void 0,void 0,function*(){try{return{data:{path:(yield Ai(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return On(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ai(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return On(this,void 0,void 0,function*(){try{const s=yield Ai(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}download(e,n){return On(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield uf(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Bt(a))return{data:null,error:a};throw a}})}info(e){return On(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield uf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Km(r),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}exists(e){return On(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield U$(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Bt(r)&&r instanceof Wm){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return On(this,void 0,void 0,function*(){try{return{data:yield uk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}list(e,n,r){return On(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},B$),n),{prefix:e||""});return{data:yield Ai(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Bt(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const q$="2.7.1",H$={"X-Client-Info":`storage-js/${q$}`};var Ia=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function l(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class W${constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},H$),n),this.fetch=lk(r)}listBuckets(){return Ia(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Bt(e))return{data:null,error:e};throw e}})}getBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ia(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ia(this,void 0,void 0,function*(){try{return{data:yield $$(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Bt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield uk(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Bt(n))return{data:null,error:n};throw n}})}}class K$ extends W${constructor(e,n={},r){super(e,n,r)}from(e){return new z$(this.url,this.headers,e,this.fetch)}}const G$="2.50.2";let xu="";typeof Deno<"u"?xu="deno":typeof document<"u"?xu="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xu="react-native":xu="node";const Q$={"X-Client-Info":`supabase-js-${xu}/${G$}`},J$={headers:Q$},Y$={schema:"public"},X$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Z$={};var eU=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function l(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const tU=t=>{let e;return t?e=t:typeof fetch>"u"?e=KA:e=fetch,(...n)=>e(...n)},nU=()=>typeof Headers>"u"?GA:Headers,rU=(t,e,n)=>{const r=tU(n),s=nU();return(i,o)=>eU(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:c}))})};var sU=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function l(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function iU(t){return t.endsWith("/")?t:t+"/"}function oU(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:p}=e,m={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>sU(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const ck="2.70.0",Pa=30*1e3,Gm=3,pg=Gm*Pa,aU="http://localhost:9999",lU="supabase.auth.token",uU={"X-Client-Info":`gotrue-js/${ck}`},Qm="X-Supabase-Api-Version",dk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dU=6e5;class py extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class hU extends py{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function fU(t){return Ie(t)&&t.name==="AuthApiError"}class hk extends py{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class lo extends py{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ii extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function pU(t){return Ie(t)&&t.name==="AuthSessionMissingError"}class Bd extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zd extends lo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qd extends lo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gU(t){return Ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class zE extends lo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Jm extends lo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function gg(t){return Ie(t)&&t.name==="AuthRetryableFetchError"}class qE extends lo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class Hu extends lo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const cf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),HE=` 	
\r=`.split(""),mU=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<HE.length;e+=1)t[HE[e].charCodeAt(0)]=-2;for(let e=0;e<cf.length;e+=1)t[cf[e].charCodeAt(0)]=e;return t})();function WE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(cf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(cf[r]),e.queuedBits-=6}}function fk(t,e,n){const r=mU[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function KE(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{yU(o,r,n)};for(let o=0;o<t.length;o+=1)fk(t.charCodeAt(o),s,i);return e.join("")}function _U(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function vU(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}_U(r,e)}}function yU(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function wU(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)fk(t.charCodeAt(s),n,r);return new Uint8Array(e)}function EU(t){const e=[];return vU(t,n=>e.push(n)),new Uint8Array(e)}function bU(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>WE(s,n,r)),WE(null,n,r),e.join("")}function TU(t){return Math.round(Date.now()/1e3)+t}function IU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ur=()=>typeof window<"u"&&typeof document<"u",To={tested:!1,writable:!1},Wu=()=>{if(!Ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(To.tested)return To.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),To.tested=!0,To.writable=!0}catch{To.tested=!0,To.writable=!1}return To.writable};function SU(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const pk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zc(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},xU=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",gk=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Hd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Wd=async(t,e)=>{await t.removeItem(e)};class up{constructor(){this.promise=new up.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}up.promiseConstructor=Promise;function mg(t){const e=t.split(".");if(e.length!==3)throw new Hu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!cU.test(e[r]))throw new Hu("JWT not in base64url format");return{header:JSON.parse(KE(e[0])),payload:JSON.parse(KE(e[1])),signature:wU(e[2]),raw:{header:e[0],payload:e[1]}}}async function AU(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function kU(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function CU(t){return("0"+t.toString(16)).substr(-2)}function RU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,CU).join("")}async function PU(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function jU(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await PU(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(t,e,n=!1){const r=RU();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await gk(t,`${e}-code-verifier`,s);const i=await jU(r);return[i,r===i?"plain":"s256"]}const NU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function OU(t){const e=t.headers.get(Qm);if(!e||!e.match(NU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function DU(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function LU(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const MU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xa(t){if(!MU.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var VU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const Ao=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),FU=[502,503,504];async function GE(t){var e;if(!xU(t))throw new Jm(Ao(t),0);if(FU.includes(t.status))throw new Jm(Ao(t),t.status);let n;try{n=await t.json()}catch(i){throw new hk(Ao(i),i)}let r;const s=OU(t);if(s&&s.getTime()>=dk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new qE(Ao(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ii}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new qE(Ao(n),t.status,n.weak_password.reasons);throw new hU(Ao(n),t.status||500,r)}const $U=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ce(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Qm]||(i[Qm]=dk["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await UU(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function UU(t,e,n,r,s,i){const o=$U(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Jm(Ao(l),0)}if(a.ok||await GE(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await GE(l)}}function Ds(t){var e;let n=null;HU(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=TU(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function QE(t){const e=Ds(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Di(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function BU(t){return{data:t,error:null}}function zU(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=VU(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function qU(t){return t}function HU(t){return t.access_token&&t.refresh_token&&t.expires_in}const _g=["global","local","others"];var WU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class KU{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=pk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=_g[0]){if(_g.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_g.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Di})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=WU(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:zU,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Di})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:qU});if(d.error)throw d.error;const p=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(I=>{const x=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(I.split(";")[1].split("=")[1]);c[`${j}Page`]=x}),c.total=parseInt(m)),{data:Object.assign(Object.assign({},p),c),error:null}}catch(c){if(Ie(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){xa(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Di})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){xa(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Di})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){xa(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Di})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){xa(e.userId);try{const{data:n,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){xa(e.userId),xa(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}const GU={getItem:t=>Wu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Wu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Wu()&&globalThis.localStorage.removeItem(t)}};function JE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function QU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Aa={debug:!!(globalThis&&Wu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class JU extends mk{}async function YU(t,e,n){Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Aa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new JU(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Aa.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}QU();const XU={url:aU,storageKey:lU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:uU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function YE(t,e,n){return await n()}class Ic{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ic.nextInstanceID,Ic.nextInstanceID+=1,this.instanceID>0&&Ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},XU),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new KU({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=pk(s.fetch),this.lock=s.lock||YE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ur()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=YU:this.lock=YE,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Wu()?this.storage=GU:(this.memoryStorage={},this.storage=JE(this.memoryStorage)):(this.memoryStorage={},this.storage=JE(this.memoryStorage)),Ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ck}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=SU(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ur()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),gU(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?{error:n}:{error:new hk("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ds}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:p,options:m}=e;let y=null,I=null;this.flowType==="pkce"&&([y,I]=await Sa(this.storage,this.storageKey)),i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:I},xform:Ds})}else if("phone"in e){const{phone:d,password:p,options:m}=e;i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ds})}else throw new zd("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:QE})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:QE})}else throw new zd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Bd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,l,c,d,p,m,y;let I,x;if("message"in e)I=e.message,x=e.signature;else{const{chain:j,wallet:A,statement:E,options:T}=e;let O;if(Ur())if(typeof A=="object")O=A;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))O=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=A}const B=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const R=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),E?{statement:E}:null));let k;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")k=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)k=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)I=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${B.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(s=(r=T==null?void 0:T.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=T==null?void 0:T.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((o=T==null?void 0:T.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((a=T==null?void 0:T.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((l=T==null?void 0:T.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((c=T==null?void 0:T.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((p=(d=T==null?void 0:T.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...T.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const R=await O.signMessage(new TextEncoder().encode(I),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=R}}try{const{data:j,error:A}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:bU(x)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ds});if(A)throw A;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new Bd}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:A})}catch(j){if(Ie(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const n=await Hd(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ds});if(await Wd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Bd}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ie(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ds}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Bd}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Sa(this.storage,this.storageKey));const{error:p}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new zd("You must provide either an email or phone number.")}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ds});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Sa(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:BU})}catch(i){if(Ie(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ii;const{error:s}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new zd("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Hd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<pg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Di}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ii}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Di})})}catch(n){if(Ie(n))return pU(n)&&(await this._removeSession(),await Wd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ii;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Sa(this.storage,this.storageKey));const{data:c,error:d}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Di});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ii;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=mg(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ii;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ur())throw new qd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new zE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new zE("No code detected.");const{data:E,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!i||!a||!o||!c)throw new qd("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(a);let m=d+p;l&&(m=parseInt(l));const y=m-d;y*1e3<=Pa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const I=m-p;d-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,m,d):d-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,m,d);const{data:x,error:j}=await this._getUser(i);if(j)throw j;const A={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:m,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(r){if(Ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Hd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(fU(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Wd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=IU(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Sa(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ie(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,c,d;const{data:p,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(c=p.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ur()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await kU(async s=>(s>0&&await AU(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ds})),(s,i)=>{const o=200*Math.pow(2,s);return i&&gg(i)&&Date.now()+o-r<Pa})}catch(r){if(this._debug(n,"error",r),Ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ur()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Hd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<pg;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${pg}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),gg(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ii;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new up;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ii;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Ie(i)){const o={session:null,error:i};return gg(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await gk(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Wd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ur()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Pa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Pa}ms, refresh threshold is ${Gm} ticks`),s<=Gm&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof mk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Sa(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mg(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+dU>Date.now()))return r;const{data:s,error:i}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new Hu("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new Hu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:y,error:I}=await this.getSession();if(I||!y.session)return{data:null,error:I};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=mg(r);if(DU(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const c=LU(s.alg),d=await this.fetchJwk(s.kid,n),p=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,p,o,EU(`${a}.${l}`)))throw new Hu("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}}Ic.nextInstanceID=0;const ZU=Ic;class e3 extends ZU{constructor(e){super(e)}}var t3=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{c(r.next(d))}catch(p){o(p)}}function l(d){try{c(r.throw(d))}catch(p){o(p)}}function c(d){d.done?i(d.value):s(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class n3{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=iU(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:Y$,realtime:Z$,auth:Object.assign(Object.assign({},X$),{storageKey:c}),global:J$},p=oU(r??{},d);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=p.global.headers)!==null&&i!==void 0?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=rU(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new y$(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new Q4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new K$(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return t3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},c,d){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new e3({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),c),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new O$(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const r3=(t,e,n)=>new n3(t,e,n),s3="https://tilyikrjfydofqprandn.supabase.co",i3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpbHlpa3JqZnlkb2ZxcHJhbmRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMzU3NzksImV4cCI6MjA2NjkxMTc3OX0.dATkafpW2h3BF59iipyHtb8SQQaIqu_I5gycuHu15_k",gy=r3(s3,i3);function o3(){const{grade:t,term:e,year:n}=tn(),[r,s]=F.useState([]),[i,o]=F.useState(!0),[a,l]=F.useState(!1),c=Et(),{pathname:d}=lr();return F.useEffect(()=>{async function p(m,y,I){m=m.split("_")[1],y=y.split("_")[1];try{o(!0),l(!1);const{data:x,error:j}=await gy.from("degrees").select("student_id, name, seat_number, total_degree, rank").eq("grade",m).eq("term",y).eq("year",I).order("rank",{ascending:!0});x!=null&&x.length||l(!0),s(x),o(!1)}catch(x){console.log(x),l(!0)}}t&&e&&n&&p(t,e,n)},[d]),i?h.jsx(jt,{}):a?h.jsx("main",{children:h.jsx("h2",{className:"text-center py-5",children:"    .    ."})}):h.jsxs("main",{children:[h.jsxs(pn,{fontSize:3,py:3,children:["  ",Tt(t)," - ",Tt(e)," - ",n==null?void 0:n.split("_").join("/"),"."]}),h.jsx(uy,{studentsCount:r.length}),h.jsxs("div",{className:"table-responsive border mt-2",children:[h.jsxs("table",{className:"table table-striped table-bordered",children:[h.jsx(ly,{}),h.jsx("tbody",{children:r.map(p=>{const m=p.name==="   ";return console.log(m&&p.seat_number),h.jsxs("tr",{className:"degree_tr-linked",onClick:()=>{!m&&c(`/students/${p.student_id}`)},children:[h.jsx("th",{scope:"row",className:"text-center",children:p.rank}),h.jsx("td",{className:"text-center",children:m?"":p.seat_number}),h.jsx("td",{style:{whiteSpace:"nowrap"},children:m?"":p.name}),h.jsx("td",{className:"text-center",children:p.total_degree.total}),h.jsxs("td",{className:"text-center",children:["%",p.total_degree.percentage]})]},p.seat_number)})})]}),i&&h.jsx(jt,{})]})]})}function a3(){const{grade:t}=tn(),[e,n]=F.useState([]),[r,s]=F.useState(!0),[i,o]=F.useState(!1);return F.useEffect(()=>{async function a(){try{const c=await(await fetch(`${ii}/darelom-students-data/degrees/temp/${t}_term_2.json`)).json();console.log(c),n(c),s(!1)}catch{o(!0)}}a()},[t]),r?h.jsx(jt,{}):i?h.jsx("main",{children:h.jsx("h2",{className:"text-center py-5",children:"    .    ."})}):h.jsxs("main",{children:[h.jsxs(pn,{fontSize:3,py:3,children:["  ",Tt(t)," -    - 2025."]}),h.jsx(uy,{studentsCount:e.length}),h.jsxs("div",{className:"table-responsive border mt-2",children:[h.jsxs("table",{className:"table table-striped table-bordered",children:[h.jsx(ly,{}),h.jsx("tbody",{children:e.map(a=>{const l=a.student_name==="   ";return console.log(l&&a.student_seatnumber),h.jsxs("tr",{className:"degree_tr-linked",children:[h.jsx("th",{scope:"row",className:"text-center",children:a.rank}),h.jsx("td",{className:"text-center",children:l?"":a.student_seatnumber}),h.jsx("td",{style:{whiteSpace:"nowrap"},children:l?"":a.student_name}),h.jsx("td",{className:"text-center",children:a.total_degree}),h.jsxs("td",{className:"text-center",children:["%",(a.total_degree*100/800).toFixed(2)]})]},a.student_seatnumber)})})]}),r&&h.jsx(jt,{})]})]})}const l3=({subject:t,student:e,index:n})=>{const r=e.degrees[n],s=r>=50?"bg-success":"bg-danger";return h.jsxs("tr",{children:[h.jsx("th",{scope:"row",children:t.name},n),h.jsx("td",{className:`text-center text-light ${s}`,children:r})]})},u3=()=>{},c3=({title:t,value:e})=>h.jsxs("h4",{className:"mb-1",children:[h.jsxs("span",{className:"fw-bold text-primary",children:[t,": "]}),h.jsxs("span",{children:[e,"."]})]}),d3=({student:t})=>{const e=[{title:"",value:t.name},{title:" ",value:t.id},{title:"",value:t.rank},{title:"",value:t.total_grade}];return h.jsx("div",{children:e.map((n,r)=>h.jsx(c3,{title:n.title,value:n.value},r))})};async function h3(t,e,n,r){const i=await(await fetch(`${ii}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();let o;return i.degrees.forEach(a=>{a.id==n&&(o=a)}),r(i.subjects),o}const f3=()=>{const{grade:t,year:e,studentId:n}=tn(),[r,s]=F.useState({}),[i,o]=F.useState([]),[a,l]=F.useState(!0);return F.useEffect(()=>{async function c(){let d;d=await h3(t,e,n,o),s(d),l(!1)}c()},[]),(r==null?void 0:r.name)==="   "?h.jsx("h2",{className:"text-center py-4",children:"   ."}):h.jsxs(h.Fragment,{children:[h.jsx(pn,{fontSize:3,children:" "}),a?h.jsx(jt,{}):h.jsxs("div",{className:"mt-3",children:[h.jsx(d3,{student:r}),h.jsxs("table",{className:"table table-striped border table-bordered mt-4",children:[h.jsx(u3,{}),h.jsx("tbody",{children:i.map((c,d)=>h.jsx(l3,{subject:c,student:r,index:d},d))})]})]})]})},p3=()=>h.jsxs("div",{className:"min-vh-100 d-flex flex-column gap-4 justify-content-center align-items-center",children:[h.jsx("h1",{children:"  ."}),h.jsx(De,{to:"/",className:"btn btn-primary",children:" "})]}),my=({grade:t,backFrom:e})=>{const n=Et();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return h.jsx("button",{className:"btn btn-danger",onClick:r,children:""})};function qs({text:t,color:e,widthPercentage:n,onClick:r}){return h.jsx("button",{className:`btn btn-${e||"primary"} w-${n||"100"} p-2`,onClick:r,children:t})}const _k=({pdf:t})=>{const e=Et(),[n,r]=F.useState(!1);function s(){window.location.href=`https://drive.google.com/uc?export=download&id=${t.book_gdrive_id}`}function i(){e(`/book/${t.book_gdrive_id}`,{state:{book_name:t.book_name}})}return n?h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(qs,{text:"",color:"success",onClick:i}),h.jsx(qs,{text:"",onClick:s}),h.jsx(qs,{text:"",color:"danger",onClick:()=>r(!1)})]}):h.jsx(qs,{text:t.book_name,onClick:()=>r(!0)})},ha=()=>{const t=Et();function e(){t("/")}return h.jsx("button",{className:"btn btn-danger",onClick:e,children:" "})},g3=()=>{const{grade:t,term:e}=tn(),[n,r]=F.useState([]),[s,i]=F.useState(!0);return F.useEffect(()=>{fetch(`${ii}/darelom-students-data/books/2023_24/books_${t}.json`).then(o=>o.json()).then(o=>{r(o[e]),i(!1)})},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[h.jsx("h2",{children:" :"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(my,{grade:t,backFrom:"books"}),h.jsx(ha,{})]})]}),h.jsxs(pn,{children:[Tt(t)," - ",Tt(e)]}),s?h.jsx(jt,{}):h.jsx("div",{className:"row g-2 my-2",children:n.map((o,a)=>h.jsx("div",{className:"col-sm-6",children:h.jsx(_k,{pdf:o})},a))})]})};function m3(){const t="btn btn-danger p-2 px-5 w-100",e=Et();function n(){e(-1)}return h.jsx("button",{className:t,onClick:n,children:""})}const _3=({bookId:t,isIframeLoading:e,setIsIframeLoading:n})=>{const r=`https://drive.google.com/file/d/${t}/preview`,s=`${e&&"d-none"} w-100`,i={height:"500px"};function o(){n(!1)}return h.jsx("iframe",{src:r,onLoad:o,className:s,style:i})},v3=({bookId:t})=>{const e="btn btn-primary p-2 px-5 w-100";function n(){window.location.href=`https://drive.google.com/uc?export=download&id=${t}`}return h.jsx("button",{className:e,onClick:n,children:""})},XE=({children:t})=>h.jsx("div",{className:"col-md-auto col-6",children:t}),ZE=()=>{var i;const{bookId:t}=tn(),n=(i=lr().state)==null?void 0:i.book_name,[r,s]=F.useState(!0);return h.jsxs(h.Fragment,{children:[h.jsxs(pn,{children:['"',n,'".']}),h.jsxs("div",{className:"my-2 d-flex justify-content-end row gx-2",children:[h.jsx(XE,{children:h.jsx(v3,{bookId:t})}),h.jsx(XE,{children:h.jsx(m3,{})})]}),r&&h.jsx(jt,{}),h.jsx(_3,{bookId:t,isIframeLoading:r,setIsIframeLoading:s})]})},y3=({currentQuestionIndex:t,questionsLength:e})=>{const n=t+1;return h.jsx("div",{className:"d-flex justify-content-between ",children:h.jsxs("p",{className:"mb-0",children:["",h.jsxs("span",{className:"fw-bold",children:[" ",n," "]}),"",h.jsxs("span",{className:"fw-bold",children:[" ",e]}),"."]})})},w3=({questionText:t})=>h.jsx("h3",{className:"bg-black text-light p-2 py-3 text-center my-4 rounded-2 lh-base",children:t});function E3({currentQuestionIndex:t,setCurrentQuestionIndex:e,setIsAnswered:n,answerButtons:r}){function s(){n(!1),e(t+1),r.forEach(i=>{i.disabled=!1,i.classList.remove("btn-danger","btn-success")})}return h.jsx(qs,{text:"",onClick:s})}function b3({questionsLength:t,score:e}){const n=Et();function r(){n("/test_yourself/test_result",{state:{result:e,fullMark:t}})}return h.jsx(qs,{text:" ",onClick:r})}const T3=({children:t})=>h.jsx("div",{className:"modal-header",children:h.jsx("h5",{className:"modal-title text-center w-100",children:t})}),I3=({children:t})=>h.jsx("div",{className:"modal-body pb-1",children:h.jsx("p",{className:"text-center fw-bold",children:t})}),S3=({children:t})=>h.jsx("div",{className:"modal-footer border-0 pt-0",children:t}),x3=({setIsModalOpen:t,answerReason:e})=>h.jsx("div",{className:"modal d-block bg-black bg-opacity-75",tabIndex:"-1",children:h.jsx("div",{className:"modal-dialog modal-dialog-centered",children:h.jsxs("div",{className:"modal-content",children:[h.jsx(T3,{children:'"   "'}),h.jsx(I3,{children:e||"      ."}),h.jsx(S3,{children:h.jsx(qs,{text:"",color:"danger",onClick:()=>t(!1)})})]})})}),A3=({setIsModalOpen:t})=>h.jsx(qs,{text:" ",onClick:()=>t(!0)});function k3(t,e,n,r,s,i,o,a){function l(){r.current.forEach(p=>{p.disabled=!0}),d.disabled=!1}n(!0);const c=r.current[i[s].question_answer],d=t.target;e==i[s].question_answer?(d.classList.add("btn-success"),o(a+1),l()):(l(),d.classList.add("btn-danger"),c.classList.add("btn-success"))}const vg=()=>{var O,B,R,k,w,S;const{grade:t,term:e,subject:n}=tn(),[r,s]=F.useState(!1),[i,o]=F.useState(((O=location.state)==null?void 0:O.currentQuestionIndex)||0),[a,l]=F.useState(0),[c,d]=F.useState([]),[p,m]=F.useState(!1),y=F.useRef([]),[I,x]=F.useState(!0),A=lr().pathname;function E(C){Lx(Uc(An,C)).then(N=>{const V=[];N.docs.forEach(P=>{V.push(P.data())}),d(V),x(!1)})}F.useEffect(()=>{A=="/test_yourself/sended_questions"?E("test_yourself/sended_questions"):A==`/${t}/${e}/${n}/test_yourself_students`?E(`${t}/test_yourself_students/questions/${e}/${n}`):fetch(`${ii}/darelom-students-data/questions/test_questions.json`).then(C=>C.json()).then(C=>{d(C),x(!1)})},[]);const T=i>=c.length-1;return h.jsxs(h.Fragment,{children:[h.jsx(pn,{fontSize:"2",children:" "}),I?h.jsx(jt,{}):c.length?h.jsxs("div",{className:"mt-2",children:[h.jsx(y3,{currentQuestionIndex:i,questionsLength:c.length,creatorName:(R=(B=c[i])==null?void 0:B.question_creator)==null?void 0:R.name}),h.jsx(w3,{questionText:(k=c[i])==null?void 0:k.question_text}),h.jsx("div",{className:"row g-2",children:(w=c[i])==null?void 0:w.question_options.map((C,N)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100 p-2",ref:V=>y.current[N]=V,onClick:V=>k3(V,N,s,y,i,c,l,a),children:C})},N))}),h.jsx("hr",{}),h.jsxs("div",{className:"mt-3 d-flex gap-2",children:[r&&T?h.jsx(b3,{questionsLength:c.length,score:a}):r&&!T&&h.jsx(E3,{currentQuestionIndex:i,setCurrentQuestionIndex:o,setIsAnswered:s,answerButtons:y.current}),r&&h.jsx(A3,{setIsModalOpen:m})]}),p&&h.jsx(x3,{setIsModalOpen:m,answerReason:(S=c[i])==null?void 0:S.answer_reason})]}):h.jsx("p",{className:"text-center fs-2 fw-bold my-2",children:"   ."})]})},C3=()=>{const t=lr(),{result:e,fullMark:n}=t.state;return h.jsxs(h.Fragment,{children:[h.jsx("h2",{children:" :"}),h.jsxs("p",{className:"text-center fs-1",children:[h.jsxs("span",{className:"fw-bold",children:[e," "]}),"",h.jsxs("span",{className:"fw-bold",children:[" ",n]}),"."]})]})},R3=()=>{const t=Et(),{grade:e,term:n}=tn(),[r,s]=F.useState([]),[i,o]=F.useState(!0);return F.useEffect(()=>{async function a(){var d;const c=(d=(await ri(es(An,`${e}/test_yourself_students/questions`,n))).data())==null?void 0:d.subjects;s(c),o(!1)}a()},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:" :"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(my,{grade:e,backFrom:"test_yourself_students"}),h.jsx(ha,{})]})]}),i?h.jsx(jt,{}):h.jsx("div",{className:"row g-2 my-2",children:r==null?void 0:r.map((a,l)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/${a}/test_yourself_students`),children:Tt(a)})},l))})]})},P3=()=>h.jsxs("div",{className:"row g-2",children:[h.jsx("div",{className:"col-sm-6",children:h.jsx(De,{to:"term_1",className:"btn btn-primary w-100",children:"  "})}),h.jsx("div",{className:"col-sm-6",children:h.jsx(De,{to:"term_2",className:"btn btn-primary w-100",children:"  "})})]}),j3=()=>{const t=Et(),[e,n]=F.useState(!0),{grade:r,term:s}=tn(),[i,o]=F.useState([]);return F.useEffect(()=>{ri(es(An,`${r}/test_yourself_students/questions/${s}`)).then(a=>{o(a.data().subjects),n(!1)})},[]),h.jsx(h.Fragment,{children:e?h.jsx(jt,{}):h.jsx("div",{className:"row g-2",children:i.map((a,l)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t(`/${r}/${s}/${a}/send_question`),children:Tt(a)})},l))})})},vk=({formRef:t,children:e})=>h.jsx("form",{className:"mx-auto mt-3 needs-validation",noValidate:!0,style:{maxWidth:"480px"},ref:t,children:e}),Yn=({field:t,marginBottom:e=3})=>h.jsx("div",{className:`mb-${e}`,children:t}),yk=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{htmlFor:"email-input",className:"form-label fw-bold",children:" :"}),h.jsx("input",{type:"email",className:"form-control",pattern:"^[^@]+@[^@]+\\.[^@]{2,}$",id:"email-input",placeholder:"folan.alfolany@gmail.com","aria-describedby":"emailHelp",required:!0}),h.jsx("div",{className:"invalid-feedback",children:"    ."})]}),wk=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{htmlFor:"password-input",className:"form-label fw-bold",children:" :"}),h.jsx("input",{type:"password",placeholder:"_____",minLength:"6",className:"form-control",id:"password-input",autoComplete:"off",required:!0}),h.jsx("div",{className:"invalid-feedback",children:"      6   ."})]}),N3=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{htmlFor:"name-input",className:"form-label fw-bold",children:":"}),h.jsx("input",{type:"text",className:"form-control",minLength:3,id:"name-input",placeholder:" ",required:!0}),h.jsx("div",{className:"invalid-feedback",children:"     3   ."})]}),O3=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"fw-bold",children:" :"}),h.jsxs("select",{className:"form-select mt-2",id:"grade-input",required:!0,children:[h.jsx("option",{value:"grade_1",children:" "}),h.jsx("option",{value:"grade_2",children:" "}),h.jsx("option",{value:"grade_3",children:" "}),h.jsx("option",{value:"grade_4",children:" "})]}),h.jsx("div",{className:"invalid-feedback",children:"  ."})]}),Wc=({text:t})=>h.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-bold",children:t}),cp=({label:t,placeholder:e,invalidFeedback:n,minLength:r=10,rows:s=4,fontSize:i=5,id:o="textarea-field"})=>h.jsxs(h.Fragment,{children:[h.jsx("label",{className:`fw-bold fs-${i} mb-1`,htmlFor:o,children:t}),h.jsx("textarea",{className:"form-control",id:o,rows:s,placeholder:e,minLength:r,required:!0}),h.jsx("div",{className:"invalid-feedback",children:n})]}),D3=()=>{const t=Et(),[e,n]=F.useState(!1),[r,s]=F.useState(!1),i=F.useRef(null);return F.useEffect(()=>{const o=i.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{s(!0);const l=a.target["name-input"].value,c=a.target["email-input"].value,d=a.target["grade-input"].value,p=a.target["password-input"].value,m=a.target["textarea-field"].value,I=(await W1(Qf,c,p)).user.uid;await y2(es(An,"users",I),{name:l,email:c,grade:d,uid:I,message:m,write_permission:!1}),t("/")}catch(l){console.log(l.code),n(!0)}finally{s(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),h.jsxs("div",{children:[h.jsx(pn,{children:"  "}),h.jsxs(vk,{formRef:i,children:[h.jsx(Yn,{field:h.jsx(N3,{})}),h.jsx(Yn,{field:h.jsx(yk,{})}),h.jsx(Yn,{field:h.jsx(O3,{})}),h.jsx(Yn,{field:h.jsx(cp,{placeholder:"    .",label:"    :",fontSize:6,minLength:100,invalidFeedback:"     100   ."})}),h.jsx(Yn,{field:h.jsx(wk,{})}),r?h.jsx(Ml,{}):h.jsx(Wc,{text:"  "}),e&&h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})]})},Kd=()=>{const t=Et(),[e,n]=F.useState(!1),[r,s]=F.useState(!1),i=F.useRef(null);return F.useEffect(()=>{const o=i.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{s(!0);const l=a.target["email-input"].value,c=a.target["password-input"].value;await K1(Qf,l,c),t("/")}catch(l){console.log(l.code),n(!0)}finally{s(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),h.jsxs("div",{children:[h.jsx(pn,{children:" "}),h.jsxs(vk,{formRef:i,children:[h.jsx(Yn,{field:h.jsx(yk,{})}),h.jsx(Yn,{field:h.jsx(wk,{})}),r?h.jsx(Ml,{}):h.jsx(Wc,{text:" "}),e&&h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]}),h.jsxs("p",{className:"text-center mt-2 fw-bold",children:["    ",h.jsx(De,{to:"/signup",children:" "}),"."]})]})},_y=({formRef:t,children:e})=>h.jsx("form",{className:"mt-3 needs-validation",noValidate:!0,ref:t,children:e}),L3=({optionsRef:t})=>{const e=["","","",""];return h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"fw-bold fs-5 mb-1",children:":"}),h.jsx("div",{className:"row g-2",children:e.map((n,r)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("input",{type:"text",className:"form-control",placeholder:` ${n}.`,ref:s=>t.current[r]=s,required:!0})},r))})]})},M3=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"fw-bold fs-5 mb-1",children:"  :"}),h.jsxs("select",{className:"form-control",id:"options-input",children:[h.jsx("option",{value:"0",children:"1"}),h.jsx("option",{value:"1",children:"2"}),h.jsx("option",{value:"2",children:"3"}),h.jsx("option",{value:"3",children:"4"})]})]}),V3=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"fw-bold fs-5 mb-1",children:":"}),h.jsx("input",{type:"text",className:"form-control",placeholder:" .",id:"answer-reason-input"})]}),F3=()=>h.jsx(cp,{placeholder:"   .",label:" :",invalidFeedback:"      10   ."}),$3=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),{grade:s,term:i,subject:o}=tn(),a=F.useRef([]),l=F.useRef(null);return F.useEffect(()=>{const c=l.current;c.addEventListener("submit",async d=>{d.preventDefault(),d.stopPropagation();const p=c["textarea-field"].value,m=[],y=Number(c["options-input"].value),I=c["answer-reason-input"].value;if(a.current.forEach(x=>{m.push(x.value)}),c.checkValidity())try{e(!0);const{name:x,uid:j}=JSON.parse(localStorage.getItem("loggedinUserInfo"));await Uv(Uc(An,`${s}/test_yourself_students/questions/${i}/${o}`),{question_text:p,question_answer:y,question_options:m,answer_reason:I,question_creator:{name:x,uid:j}}),l.current.reset(),c.classList.remove("was-validated"),r("success")}catch(x){console.log(x.code),c.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else c.classList.add("was-validated")})},[]),h.jsxs(h.Fragment,{children:[h.jsx(pn,{children:"  []"}),h.jsxs("p",{className:"text-center mt-2 fw-bold",children:[`${Tt(s)} - ${Tt(i)} - ${Tt(o)}`,"."]}),h.jsxs(_y,{formRef:l,children:[h.jsx(Yn,{field:h.jsx(F3,{})}),h.jsx(Yn,{field:h.jsx(L3,{optionsRef:a})}),h.jsx(Yn,{field:h.jsx(M3,{})}),h.jsx(Yn,{field:h.jsx(V3,{})}),t?h.jsx(Ml,{}):h.jsx(Wc,{text:" "})]}),n==="initial"?null:n==="success"?h.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},U3=()=>h.jsx(cp,{placeholder:"  .",label:":",invalidFeedback:"      10   .",rows:7}),B3=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),s=F.useRef(null);return F.useEffect(()=>{const i=s.current;i.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();const a=i["textarea-field"].value;if(i.checkValidity())try{e(!0),await Uv(Uc(An,"suggestions"),{suggestion:a}),s.current.reset(),i.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),i.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else i.classList.add("was-validated")})},[]),h.jsxs(h.Fragment,{children:[h.jsx(pn,{children:" "}),h.jsxs(_y,{formRef:s,children:[h.jsx(Yn,{field:h.jsx(U3,{})}),t?h.jsx(Ml,{}):h.jsx(Wc,{text:" "})]}),n==="initial"?null:n==="success"?h.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},z3=()=>h.jsx(cp,{placeholder:"          .",label:":",invalidFeedback:"      10   .",rows:7}),q3=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),s=F.useRef(null);return F.useEffect(()=>{const i=s.current;i.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation(),console.log("s");const a=i["textarea-field"].value;if(i.checkValidity())try{e(!0),await Uv(Uc(An,"problems"),{problem:a}),s.current.reset(),i.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),i.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else i.classList.add("was-validated")})},[]),h.jsxs(h.Fragment,{children:[h.jsx(pn,{children:"  "}),h.jsxs(_y,{formRef:s,children:[h.jsx(Yn,{field:h.jsx(z3,{})}),t?h.jsx(Ml,{}):h.jsx(Wc,{text:" "})]}),n==="initial"?null:n==="success"?h.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},H3=()=>async(t,e)=>{try{const r=await(await fetch(t)).blob(),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}catch(n){console.log(n)}},W3=()=>{const{grade:t}=tn(),[e,n]=F.useState(!1),[r,s]=F.useState(!0);let i="",o;t==="exams_schedule"?(i=`${ii}/darelom-students-data/schedule/exams_schedule.jpg`,o="     2025"):(i=`${ii}/darelom-students-data/schedule/${t}.jpg`,o=`  ${Tt(t)}`);const a=H3();function l(){n(!1),s(!1)}function c(){n(!0),s(!1)}return h.jsxs("div",{className:"container",children:[r?h.jsx(jt,{}):h.jsx(h.Fragment,{children:!e&&h.jsx(h.Fragment,{children:h.jsxs("p",{className:"text-center fw-bold fs-5",children:["  ",Tt(t),"   ."]})})}),h.jsxs("div",{className:`d-${e?"block":"none"}`,children:[h.jsx("img",{src:i,className:"w-100",alt:"Schecule",onError:l,onLoad:c}),h.jsx("button",{className:"btn btn-primary w-100 mt-3",onClick:()=>a(i,o),children:" "})]})]})},K3=({grade:t,backFrom:e})=>{const n=Et();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return h.jsx("button",{className:"btn btn-danger",onClick:r,children:""})},G3=()=>{const{grade:t,term:e}=tn(),[n,r]=F.useState({}),[s,i]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{ri(es(An,`${t}/lectures_recordings`)).then(l=>{var d;const c=(d=l.data())==null?void 0:d[e];if(c&&Object.keys(c).length){const p=Object.keys(c);if(p.includes("mojalad_tasgilat")){const m=["mojalad_tasgilat",...p.filter(y=>y!=="mojalad_tasgilat")];i(m)}else i(p);r(c)}a(!1)})},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[h.jsx("h2",{children:" :"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(K3,{grade:t,backFrom:"lectures_recordings"}),h.jsx(ha,{})]})]}),h.jsxs(pn,{children:[Tt(t)," - ",Tt(e)]}),o?h.jsx(jt,{}):h.jsx(h.Fragment,{children:Object.keys(n).length?h.jsx("div",{className:"row g-2 my-2",children:s.map((l,c)=>h.jsx("div",{className:"col-sm-6",children:h.jsx(qs,{text:Tt(l),onClick:()=>window.location.href=n[l]})},c))}):h.jsx("p",{className:"text-center fw-bold mt-4 fs-4",children:"   ."})})]})},Q3=()=>{const t=Et(),{grade:e,term:n}=tn(),[r,s]=F.useState([]),[i,o]=F.useState(!0);return F.useEffect(()=>{async function a(){var d;const c=((d=(await ri(es(An,`${e}/more_resources/`))).data())==null?void 0:d[n])||[];s(c),o(!1)}a()},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:" :"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(my,{grade:e,backFrom:"more_resources"}),h.jsx(ha,{})]})]}),i?h.jsx(jt,{}):h.jsx("div",{className:"row g-2 my-2",children:r!=null&&r.length?r==null?void 0:r.map((a,l)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/more_resources/${a}`),children:Tt(a)})},l)):h.jsx("p",{className:"fw-bold text-center fs-3",children:"   ."})})]})},eb=()=>{const t=Et(),{grade:e,term:n,subject:r}=tn(),[s,i]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{async function l(){var p;let c;e?c=await ri(es(An,`${e}/more_resources/${n}/${r}`)):c=await ri(es(An,`general_subjects/${r}`));const d=((p=c.data())==null?void 0:p.resources)||[];i(d),a(!1)}l()},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:" :"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx("button",{className:"btn btn-danger",onClick:()=>t(-1),children:""}),h.jsx(ha,{})]})]}),o?h.jsx(jt,{}):h.jsx("div",{className:"row g-2 my-2",children:s!=null&&s.length?s==null?void 0:s.map((l,c)=>h.jsx("div",{className:"col-sm-6",children:h.jsx(De,{className:"btn btn-primary w-100",to:l!=null&&l.isBook?`/book/${l.link}`:l.link,state:{book_name:l.title},children:l.title})},c)):h.jsx("p",{className:"fw-bold text-center fs-3",children:"   ."})})]})},J3=({grade:t,backFrom:e})=>{const n=Et();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return h.jsx("button",{className:"btn btn-danger",onClick:r,children:""})},Y3=()=>{const[t,e]=F.useState(!1),{grade:n,term:r}=tn(),[s,i]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{fetch(`${ii}/darelom-students-data/final_exams/final_exams_${n}.json`).then(l=>l.json()).then(l=>{l[r].length?(i(l[r]),a(!1)):t(!0)}).catch(l=>{e(!0)})},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[h.jsx("h2",{children:" :"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(J3,{grade:n,backFrom:"final_exams"}),h.jsx(ha,{})]})]}),h.jsxs(pn,{children:[Tt(n)," - ",Tt(r)]}),t?h.jsx("p",{className:"fw-bold text-center fs-4 mt-4",children:"   ."}):o?h.jsx(jt,{}):h.jsx("div",{className:"row g-2 my-2",children:s.map((l,c)=>h.jsx("div",{className:"col-sm-6",children:h.jsx(_k,{pdf:l})},c))})]})},X3=()=>{const t=Et(),[e,n]=F.useState([]),[r,s]=F.useState(!0);return F.useEffect(()=>{async function i(){var l;const a=(l=(await ri(es(An,"general_subjects","subjects"))).data())==null?void 0:l.ids;n(a),s(!1)}i()},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:" :"}),h.jsx("div",{className:"d-flex gap-2",children:h.jsx(ha,{})})]}),r?h.jsx(jt,{}):h.jsx("div",{className:"row g-2 my-2",children:e==null?void 0:e.map((i,o)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/general_subjects/${i}`),children:Tt(i)})},o))})]})};function Z3(t){let e=0,n=0;return t.map(s=>s.degrees).flat().forEach(s=>{s.isCalculatedInTotal&&(e+=s.finalDegree,s.degree.startsWith("/")?n+=Number(s.degree.slice(1)):isNaN(Number(s.degree))||(n+=Number(s.degree)))}),{max:e,total:n}}function eB(){const[t,e]=F.useState({name:"",totalDegree:{max:0,total:0},firstGradeInPlatform:2024}),[n,r]=F.useState({}),[s,i]=F.useState(!1),[o,a]=F.useState(!1),{student_id:l}=tn(),c=F.useRef(null);F.useEffect(()=>{i(!0),d()},[l]);async function d(){const{data:p,error:m}=await gy.from("degrees").select("*").eq("student_id",l).order("grade",{ascending:!0}).order("term",{ascending:!0});if(p&&p.length){e({name:p[0].name,totalDegree:Z3(p),firstGradeInPlatform:p[0].grade});const y={};p.forEach(I=>{y[I.grade]||(y[I.grade]=[]),y[I.grade].push(I)}),r(y),a(!1)}else a(!0);i(!1)}return s?h.jsx(jt,{}):o?h.jsxs("main",{children:[h.jsxs("div",{className:"alert alert-danger text-center my-5",children:["         .   "," ",h.jsx("button",{type:"button",className:"text-decoration-underline p-0 m-0 align-baseline",style:{color:"rgb(110 168 254)",fontSize:"1em",verticalAlign:"middle",background:"none",border:"none"},"data-bs-toggle":"modal","data-bs-target":"#idInfoModal",tabIndex:0,"aria-label":"   ",children:" "}),"  ",h.jsx(De,{to:"/send_problem",children:"  "}),".   "," ",h.jsx(De,{to:"/find_student",children:"   "}),"."]}),h.jsx("div",{className:"modal fade",id:"idInfoModal",tabIndex:-1,"aria-labelledby":"idInfoModalLabel","aria-hidden":"true",children:h.jsx("div",{className:"modal-dialog",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("div",{className:"modal-header",children:h.jsx("h5",{className:"modal-title",id:"idInfoModalLabel",children:"   "})}),h.jsxs("div",{className:"modal-body text-end",children:["          +     --:",h.jsx("br",{}),h.jsx("br",{}),'-         2024   : "12345"   : "123452024".',h.jsx("br",{}),h.jsx("br",{}),'-            : "34567"     2025   : "345672025".',h.jsx("br",{}),h.jsx("br",{}),'-         2024                          "34567"    "345672024".']}),h.jsx("div",{className:"modal-footer",children:h.jsx("button",{type:"button",className:"btn btn-danger w-100","data-bs-dismiss":"modal",children:""})})]})})})]}):l==="201252024"?h.jsx("h2",{className:"text-center py-4",children:"   ."}):h.jsxs("main",{children:[h.jsxs("section",{className:"d-grid gap-1",children:[t.firstGradeInPlatform>1&&h.jsxs("span",{className:"fs-6 text-danger mb-3",children:["*      ",Tt(`grade_${t.firstGradeInPlatform}`),"."]}),h.jsxs("h4",{className:"mb-1",children:[h.jsx("span",{className:"fw-bold text-primary",children:": "}),h.jsxs("span",{children:[t.name,"."]})]}),h.jsxs("h4",{className:"mb-1",children:[h.jsx("span",{className:"fw-bold text-primary",children:" : "}),h.jsxs("span",{children:[l,"."]})]}),h.jsxs("h4",{className:"mb-1",children:[h.jsx("span",{className:"fw-bold text-primary",children:" : "}),h.jsxs("span",{className:"fs-5",children:[t.totalDegree.total,"/",t.totalDegree.max," ",h.jsxs("span",{className:"fs-6",children:["(",(t.totalDegree.total*100/t.totalDegree.max).toFixed(2),"%)."]})]})]})]}),h.jsx("div",{className:"accordion mt-4",id:"gradesAccordion",ref:c,children:Object.entries(n).map(([p,m],y)=>h.jsxs("div",{className:"accordion-item",children:[h.jsx("h2",{className:"accordion-header",id:`heading${p}`,children:h.jsx("button",{className:`accordion-button ${y!==0?"collapsed":""}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${p}`,"aria-expanded":y===0,"aria-controls":`collapse${p}`,children:Tt(`grade_${p}`)})}),h.jsx("div",{id:`collapse${p}`,className:`accordion-collapse collapse ${y===0?"show":""}`,"aria-labelledby":`heading${p}`,"data-bs-parent":"#gradesAccordion",children:h.jsx("div",{className:"accordion-body",children:m.map(I=>h.jsx("div",{className:"mb-4",children:h.jsxs("div",{className:"table-responsive border-secondary-subtle rounded-2 py-1 my-0 ",children:[h.jsxs("div",{className:"mb-4",children:[h.jsxs("h4",{className:"mb-1 fs-5",children:[h.jsx("span",{className:"fw-bold text-primary",children:" : "}),h.jsxs("span",{children:[I.term,"."]})]}),h.jsxs("h4",{className:"mb-1 fs-5",children:[h.jsx("span",{className:"fw-bold text-primary",children:" : "}),h.jsxs("span",{children:[I.year,"."]})]}),h.jsxs("h4",{className:"mb-1 fs-5",children:[h.jsx("span",{className:"fw-bold text-primary",children:": "}),h.jsxs("span",{className:"fs-5",children:[I.total_degree.total," ",h.jsxs("span",{className:"fs-6",children:["(",I.total_degree.percentage,"%)"]}),"."]})]}),h.jsxs("h4",{className:"mb-1 fs-5",children:[h.jsx("span",{className:"fw-bold text-primary",children:": "}),h.jsxs("span",{className:"fs-5",children:[I.rank,"#."]})]})]}),h.jsxs("table",{className:"table table-striped border",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{className:"bg-dark text-white border-start py-2",children:""}),h.jsx("th",{className:"text-center bg-dark text-white py-2",children:""})]})}),h.jsx("tbody",{children:I.degrees.map((x,j)=>{const A=x.name||x.id;let E=x.degree;typeof E=="string"&&E.startsWith("/")&&(E=E.slice(1));const O=parseInt(E,10)>=50?"text-bg-success":"text-bg-danger";return h.jsxs("tr",{children:[h.jsx("td",{className:"fw-bold",children:A}),h.jsx("td",{className:`${O} text-center`,children:E})]},j)})})]})]})},I.term))})})]},p))})]})}function tB(){const[t,e]=F.useState(""),[n,r]=F.useState(!1),[s,i]=F.useState(null),o=Et(),a=async l=>{if(l.preventDefault(),r(!0),i(null),!/^\d{9}$/.test(t)){i("      9  ."),r(!1);return}try{const c=parseInt(t,10),{data:d,error:p}=await gy.from("degrees").select("student_id").eq("student_id",c).limit(1);if(p)throw p;d&&d.length>0?o(`/students/${c}`):i("    .        .")}catch(c){i("   .    ."),console.error("Error searching for student:",c)}finally{r(!1)}};return h.jsx("main",{className:"container",children:h.jsx("div",{className:"row justify-content-center",children:h.jsx("div",{children:h.jsx("div",{className:" shadow-sm",children:h.jsxs("div",{className:"card-body",children:[h.jsx(pn,{children:"   "}),h.jsxs("form",{onSubmit:a,className:"col-md-6 mx-auto",children:[h.jsxs("div",{className:"my-3",children:[h.jsxs("label",{htmlFor:"studentId",className:"form-label d-flex align-items-center gap-1",children:[" :",h.jsx("button",{type:"button",className:"btn btn-sm",style:{fontSize:"1.2em",verticalAlign:"middle",padding:0,lineHeight:1},"data-bs-toggle":"modal","data-bs-target":"#idInfoModal",tabIndex:-1,"aria-label":"   ",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",style:{width:"25px",height:"25px",transform:"scaleX(-1)"},children:h.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 0 1-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 0 1-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 0 1-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584ZM12 18a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"})})})]}),h.jsx("div",{className:"modal fade",id:"idInfoModal",tabIndex:-1,"aria-labelledby":"idInfoModalLabel","aria-hidden":"true",children:h.jsx("div",{className:"modal-dialog",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("div",{className:"modal-header",children:h.jsx("h5",{className:"modal-title",id:"idInfoModalLabel",children:"   "})}),h.jsxs("div",{className:"modal-body",children:["          +     --:",h.jsx("br",{}),h.jsx("br",{}),'-         2024   : "12345"   : "123452024".',h.jsx("br",{}),h.jsx("br",{}),'-            : "34567"     2025   : "345672025".',h.jsx("br",{}),h.jsx("br",{}),'-         2024                          "34567"    "345672024".']}),h.jsx("div",{className:"modal-footer",children:h.jsx("button",{type:"button",className:"btn btn-danger w-100","data-bs-dismiss":"modal",children:""})})]})})}),h.jsx("input",{type:"number",className:"form-control",id:"studentId",placeholder:"123456789",value:t,onChange:l=>{l.target.value.length<=9&&e(l.target.value)},required:!0})]}),s&&h.jsx("div",{className:"alert alert-danger",children:s}),h.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:n,children:n?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),h.jsx("span",{className:"visually-hidden",children:"Loading..."})]}):""})]})]})})})})})}function nB(){const t=[{grade:"",subjects_analytics:[{subject_name:"   ()",subject_students:{subject_students_count:346,subject_succeed_students_count:299,subject_succeed_students_percentage:"86.42"},subject_degree:{total_degree:26406,average_degree:"76.32"}},{subject_name:" :  ",subject_students:{subject_students_count:346,subject_succeed_students_count:317,subject_succeed_students_percentage:"91.62"},subject_degree:{total_degree:24928,average_degree:"72.05"}},{subject_name:"1",subject_students:{subject_students_count:346,subject_succeed_students_count:250,subject_succeed_students_percentage:"72.25"},subject_degree:{total_degree:19882,average_degree:"57.46"}},{subject_name:" ",subject_students:{subject_students_count:346,subject_succeed_students_count:274,subject_succeed_students_percentage:"79.19"},subject_degree:{total_degree:22485,average_degree:"64.99"}},{subject_name:"   ",subject_students:{subject_students_count:346,subject_succeed_students_count:258,subject_succeed_students_percentage:"74.57"},subject_degree:{total_degree:19005,average_degree:"54.93"}},{subject_name:"   ",subject_students:{subject_students_count:346,subject_succeed_students_count:264,subject_succeed_students_percentage:"76.30"},subject_degree:{total_degree:19667,average_degree:"56.84"}},{subject_name:" ",subject_students:{subject_students_count:346,subject_succeed_students_count:289,subject_succeed_students_percentage:"83.53"},subject_degree:{total_degree:22193,average_degree:"64.14"}},{subject_name:"  ",subject_students:{subject_students_count:346,subject_succeed_students_count:259,subject_succeed_students_percentage:"74.86"},subject_degree:{total_degree:19279,average_degree:"55.72"}},{subject_name:" ",subject_students:{subject_students_count:346,subject_succeed_students_count:303,subject_succeed_students_percentage:"87.57"},subject_degree:{total_degree:23283,average_degree:"67.29"}},{subject_name:"  ",subject_students:{subject_students_count:346,subject_succeed_students_count:255,subject_succeed_students_percentage:"73.70"},subject_degree:{total_degree:18583,average_degree:"53.71"}},{subject_name:"   ",subject_students:{subject_students_count:346,subject_succeed_students_count:267,subject_succeed_students_percentage:"77.17"},subject_degree:{total_degree:20323,average_degree:"58.74"}},{subject_name:"   ",subject_students:{subject_students_count:346,subject_succeed_students_count:269,subject_succeed_students_percentage:"77.75"},subject_degree:{total_degree:18783,average_degree:"54.29"}},{subject_name:" ",subject_students:{subject_students_count:346,subject_succeed_students_count:286,subject_succeed_students_percentage:"82.66"},subject_degree:{total_degree:22399,average_degree:"64.74"}},{subject_name:" ",subject_students:{subject_students_count:346,subject_succeed_students_count:263,subject_succeed_students_percentage:"76.01"},subject_degree:{total_degree:20155,average_degree:"58.25"}}]},{grade:"",subjects_analytics:[{subject_name:"   ( )",subject_students:{subject_students_count:435,subject_succeed_students_count:403,subject_succeed_students_percentage:"92.64"},subject_degree:{total_degree:31282,average_degree:"71.91"}},{subject_name:" ",subject_students:{subject_students_count:435,subject_succeed_students_count:425,subject_succeed_students_percentage:"97.70"},subject_degree:{total_degree:31332,average_degree:"72.03"}},{subject_name:"2",subject_students:{subject_students_count:435,subject_succeed_students_count:353,subject_succeed_students_percentage:"81.15"},subject_degree:{total_degree:25644,average_degree:"58.95"}},{subject_name:" ",subject_students:{subject_students_count:435,subject_succeed_students_count:412,subject_succeed_students_percentage:"94.71"},subject_degree:{total_degree:34904,average_degree:"80.24"}},{subject_name:"      ",subject_students:{subject_students_count:435,subject_succeed_students_count:357,subject_succeed_students_percentage:"82.07"},subject_degree:{total_degree:25122,average_degree:"57.75"}},{subject_name:"  ",subject_students:{subject_students_count:435,subject_succeed_students_count:376,subject_succeed_students_percentage:"86.44"},subject_degree:{total_degree:28866,average_degree:"66.36"}},{subject_name:"  ",subject_students:{subject_students_count:435,subject_succeed_students_count:406,subject_succeed_students_percentage:"93.33"},subject_degree:{total_degree:32239,average_degree:"74.11"}},{subject_name:" ",subject_students:{subject_students_count:435,subject_succeed_students_count:366,subject_succeed_students_percentage:"84.14"},subject_degree:{total_degree:26398,average_degree:"60.69"}},{subject_name:"   ",subject_students:{subject_students_count:435,subject_succeed_students_count:363,subject_succeed_students_percentage:"83.45"},subject_degree:{total_degree:24676,average_degree:"56.73"}},{subject_name:"   ",subject_students:{subject_students_count:435,subject_succeed_students_count:396,subject_succeed_students_percentage:"91.03"},subject_degree:{total_degree:28663,average_degree:"65.89"}},{subject_name:"    ",subject_students:{subject_students_count:435,subject_succeed_students_count:374,subject_succeed_students_percentage:"85.98"},subject_degree:{total_degree:25702,average_degree:"59.09"}},{subject_name:"  ",subject_students:{subject_students_count:435,subject_succeed_students_count:401,subject_succeed_students_percentage:"92.18"},subject_degree:{total_degree:31956,average_degree:"73.46"}},{subject_name:" ",subject_students:{subject_students_count:435,subject_succeed_students_count:381,subject_succeed_students_percentage:"87.59"},subject_degree:{total_degree:29567,average_degree:"67.97"}},{subject_name:" 1",subject_students:{subject_students_count:435,subject_succeed_students_count:358,subject_succeed_students_percentage:"82.30"},subject_degree:{total_degree:26885,average_degree:"61.80"}},{subject_name:" ",subject_students:{subject_students_count:435,subject_succeed_students_count:378,subject_succeed_students_percentage:"86.90"},subject_degree:{total_degree:27527,average_degree:"63.28"}}]},{grade:"",subjects_analytics:[{subject_name:" / ",subject_students:{subject_students_count:612,subject_succeed_students_count:414,subject_succeed_students_percentage:"67.65"},subject_degree:{total_degree:33216,average_degree:"54.27"}},{subject_name:" ",subject_students:{subject_students_count:612,subject_succeed_students_count:463,subject_succeed_students_percentage:"75.65"},subject_degree:{total_degree:36086,average_degree:"58.96"}},{subject_name:"  ( )",subject_students:{subject_students_count:575,subject_succeed_students_count:490,subject_succeed_students_percentage:"85.22"},subject_degree:{total_degree:40473,average_degree:"70.39"}},{subject_name:" ",subject_students:{subject_students_count:367,subject_succeed_students_count:356,subject_succeed_students_percentage:"97.00"},subject_degree:{total_degree:26718,average_degree:"72.80"}},{subject_name:"3",subject_students:{subject_students_count:612,subject_succeed_students_count:407,subject_succeed_students_percentage:"66.50"},subject_degree:{total_degree:29667,average_degree:"48.48"}},{subject_name:" 2",subject_students:{subject_students_count:612,subject_succeed_students_count:410,subject_succeed_students_percentage:"66.99"},subject_degree:{total_degree:30766,average_degree:"50.27"}},{subject_name:"  ",subject_students:{subject_students_count:612,subject_succeed_students_count:415,subject_succeed_students_percentage:"67.81"},subject_degree:{total_degree:30677,average_degree:"50.13"}},{subject_name:"     ",subject_students:{subject_students_count:612,subject_succeed_students_count:438,subject_succeed_students_percentage:"71.57"},subject_degree:{total_degree:36515,average_degree:"59.67"}},{subject_name:"    ",subject_students:{subject_students_count:575,subject_succeed_students_count:433,subject_succeed_students_percentage:"75.30"},subject_degree:{total_degree:30442,average_degree:"52.94"}},{subject_name:"   ",subject_students:{subject_students_count:612,subject_succeed_students_count:426,subject_succeed_students_percentage:"69.61"},subject_degree:{total_degree:31450,average_degree:"51.39"}},{subject_name:"  ",subject_students:{subject_students_count:612,subject_succeed_students_count:448,subject_succeed_students_percentage:"73.20"},subject_degree:{total_degree:34668,average_degree:"56.65"}},{subject_name:" ",subject_students:{subject_students_count:612,subject_succeed_students_count:447,subject_succeed_students_percentage:"73.04"},subject_degree:{total_degree:32153,average_degree:"52.54"}},{subject_name:"   ",subject_students:{subject_students_count:612,subject_succeed_students_count:423,subject_succeed_students_percentage:"69.12"},subject_degree:{total_degree:29500,average_degree:"48.20"}},{subject_name:"    ",subject_students:{subject_students_count:612,subject_succeed_students_count:410,subject_succeed_students_percentage:"66.99"},subject_degree:{total_degree:28216,average_degree:"46.10"}},{subject_name:" ",subject_students:{subject_students_count:612,subject_succeed_students_count:495,subject_succeed_students_percentage:"80.88"},subject_degree:{total_degree:40195,average_degree:"65.68"}}]},{grade:"",subjects_analytics:[{subject_name:"4",subject_students:{subject_students_count:1030,subject_succeed_students_count:558,subject_succeed_students_percentage:"54.17"},subject_degree:{total_degree:42274,average_degree:"41.04"}},{subject_name:"   4",subject_students:{subject_students_count:789,subject_succeed_students_count:670,subject_succeed_students_percentage:"84.92"},subject_degree:{total_degree:46817,average_degree:"59.34"}},{subject_name:" ",subject_students:{subject_students_count:1030,subject_succeed_students_count:532,subject_succeed_students_percentage:"51.65"},subject_degree:{total_degree:40616,average_degree:"39.43"}},{subject_name:"     ",subject_students:{subject_students_count:789,subject_succeed_students_count:561,subject_succeed_students_percentage:"71.10"},subject_degree:{total_degree:40812,average_degree:"51.73"}},{subject_name:"  ",subject_students:{subject_students_count:1030,subject_succeed_students_count:567,subject_succeed_students_percentage:"55.05"},subject_degree:{total_degree:41078,average_degree:"39.88"}},{subject_name:"  . ",subject_students:{subject_students_count:1030,subject_succeed_students_count:571,subject_succeed_students_percentage:"55.44"},subject_degree:{total_degree:41444,average_degree:"40.24"}},{subject_name:"   ",subject_students:{subject_students_count:1030,subject_succeed_students_count:703,subject_succeed_students_percentage:"68.25"},subject_degree:{total_degree:49856,average_degree:"48.40"}},{subject_name:" ",subject_students:{subject_students_count:789,subject_succeed_students_count:573,subject_succeed_students_percentage:"72.62"},subject_degree:{total_degree:39914,average_degree:"50.59"}},{subject_name:" ",subject_students:{subject_students_count:789,subject_succeed_students_count:707,subject_succeed_students_percentage:"89.61"},subject_degree:{total_degree:52675,average_degree:"66.76"}},{subject_name:"  ",subject_students:{subject_students_count:1030,subject_succeed_students_count:580,subject_succeed_students_percentage:"56.31"},subject_degree:{total_degree:42662,average_degree:"41.42"}},{subject_name:" (/) ",subject_students:{subject_students_count:789,subject_succeed_students_count:645,subject_succeed_students_percentage:"81.75"},subject_degree:{total_degree:48101,average_degree:"60.96"}},{subject_name:"    ",subject_students:{subject_students_count:789,subject_succeed_students_count:564,subject_succeed_students_percentage:"71.48"},subject_degree:{total_degree:39627,average_degree:"50.22"}},{subject_name:"  ",subject_students:{subject_students_count:789,subject_succeed_students_count:602,subject_succeed_students_percentage:"76.30"},subject_degree:{total_degree:41405,average_degree:"52.48"}},{subject_name:"    ",subject_students:{subject_students_count:789,subject_succeed_students_count:696,subject_succeed_students_percentage:"88.21"},subject_degree:{total_degree:52815,average_degree:"66.94"}}]}];return h.jsxs("main",{className:" py-3",dir:"rtl",children:[h.jsxs("div",{className:"text-center mx-auto border-bottom mb-5",style:{width:"fit-content"},children:[h.jsx("h2",{className:"fs-4",children:"     2025"}),h.jsx("p",{className:"text-danger mt-1  fs-6",children:"[ ]"})]}),h.jsx("div",{children:h.jsx("p",{className:"my-4 ",style:{textAlign:"justify"},children:"-                                     ."})}),h.jsx("div",{className:"accordion",id:"gradesAccordion",children:t.map((e,n)=>h.jsxs("div",{className:"accordion-item mb-3 border",children:[h.jsx("h2",{className:"accordion-header",id:`heading${n}`,children:h.jsxs("button",{className:`accordion-button ${n!==0?"collapsed":""}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${n}`,"aria-expanded":n===0,"aria-controls":`collapse${n}`,children:[h.jsxs("span",{className:"fw-bold fs-5",children:["   -  ",e.grade]}),h.jsxs("span",{className:"badge mx-2 bg-primary ms-2",children:[e.subjects_analytics.length," "]})]})}),h.jsx("div",{id:`collapse${n}`,className:`accordion-collapse collapse ${n===0?"show":""}`,"aria-labelledby":`heading${n}`,"data-bs-parent":"#gradesAccordion",children:h.jsx("div",{className:"accordion-body",children:h.jsx("div",{className:"row g-4",children:e.subjects_analytics.map((r,s)=>{const i=parseFloat(r.subject_students.subject_succeed_students_percentage);let o="bg-danger";return i>=85?o="bg-success":i>=70&&(o="bg-info"),h.jsx("div",{className:"col-md-6 col-lg-4",children:h.jsx("div",{className:"card shadow-sm h-100 subject-card",children:h.jsxs("div",{className:"card-body d-flex flex-column justify-content-between",children:[h.jsx("h5",{className:"card-title fw-bold mb-3",children:r.subject_name}),h.jsx("table",{className:"table table-sm table-borderless mb-3",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{children:"  :"}),h.jsx("td",{className:"text-end fw-bold",children:r.subject_students.subject_students_count})]}),h.jsxs("tr",{children:[h.jsx("td",{children:" :"}),h.jsx("td",{className:"text-end fw-bold text-success",children:r.subject_students.subject_succeed_students_count})]}),h.jsxs("tr",{children:[h.jsx("td",{children:"  :"}),h.jsxs("td",{className:"text-end fw-bold",children:[i,"%"]})]}),h.jsxs("tr",{children:[h.jsx("td",{children:"  :"}),h.jsx("td",{className:"text-end fw-bold",children:r.subject_degree.average_degree})]})]})}),h.jsx("div",{className:"progress",style:{height:"20px"},children:h.jsxs("div",{className:`progress-bar ${o}`,role:"progressbar",style:{width:`${i}%`},"aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100,children:[i,"%"]})})]})})},s)})})})})]},n))}),h.jsx("style",{children:`
        .subject-card:hover {
          transform: translateY(-5px);
          transition: 0.3s ease;
        }
      `})]})}function rB(){const[t,e]=F.useState(null),[n,r]=F.useState(JSON.parse(localStorage.getItem("loggedInUserInfo")));F.useEffect(()=>{tS(Qf,async i=>{if(i){const a=(await ri(es(An,`users/${i.uid}`))).data();localStorage.setItem("loggedinUserInfo",JSON.stringify(a)),r(a)}else localStorage.setItem("loggedinUserInfo",JSON.stringify(null)),r(null);e(i),localStorage.setItem("loggedinUser",JSON.stringify(i))})},[]);const s=dF(Vm(h.jsx(h.Fragment,{children:h.jsxs(Ue,{path:"/",element:h.jsx(T4,{}),errorElement:h.jsx(p3,{}),children:[h.jsx(Ue,{path:"/",element:h.jsx(N4,{})}),h.jsx(Ue,{path:"/degrees/:grade/:year",element:h.jsx(U4,{})}),h.jsx(Ue,{path:"/degrees/:grade/:year/:studentId",element:h.jsx(f3,{})}),h.jsx(Ue,{path:"/ranking/:grade/:term/:year",element:h.jsx(o3,{})}),h.jsx(Ue,{path:"/ranking/:grade/term_2/2025",element:h.jsx(a3,{})}),h.jsx(Ue,{path:":grade/books/:term",element:h.jsx(g3,{})}),h.jsx(Ue,{path:"/book/:bookId",element:h.jsx(ZE,{})}),h.jsx(Ue,{path:":grade/final_exams/:term",element:h.jsx(Y3,{})}),h.jsx(Ue,{path:"/final_exam/:examId",element:h.jsx(ZE,{})}),h.jsx(Ue,{path:":grade/more_resources/:term",element:h.jsx(Q3,{})}),h.jsx(Ue,{path:":grade/:term/more_resources/:subject",element:h.jsx(eb,{})}),h.jsx(Ue,{path:"/general_subjects",element:h.jsx(X3,{})}),h.jsx(Ue,{path:"/general_subjects/:subject",element:h.jsx(eb,{})}),h.jsx(Ue,{path:"/test_yourself",element:h.jsx(vg,{})})," ",h.jsx(Ue,{path:"/test_yourself/test_result",element:h.jsx(C3,{})}),h.jsx(Ue,{path:":grade/test_yourself_students/:term",element:h.jsx(R3,{})}),h.jsx(Ue,{path:"/test_yourself/sended_questions",element:h.jsx(vg,{})}),h.jsx(Ue,{path:"/:grade/:term/:subject/test_yourself_students",element:h.jsx(vg,{})}),h.jsx(Ue,{path:"/:grade/send_question_selector",element:n!=null&&n.write_permission?h.jsx(P3,{}):h.jsx(Kd,{})}),h.jsx(Ue,{path:"/:grade/send_question_selector/:term",element:n!=null&&n.write_permission?h.jsx(j3,{}):h.jsx(Kd,{})}),h.jsx(Ue,{path:"/:grade/:term/:subject/send_question",element:n!=null&&n.write_permission?h.jsx($3,{}):h.jsx(Kd,{})}),h.jsx(Ue,{path:"/signup",element:t?h.jsx(bE,{to:"/"}):h.jsx(D3,{})}),h.jsx(Ue,{path:"/signin",element:t?h.jsx(bE,{to:"/"}):h.jsx(Kd,{})}),h.jsx(Ue,{path:"/send_suggestion",element:h.jsx(B3,{})}),h.jsx(Ue,{path:"/send_problem",element:h.jsx(q3,{})}),h.jsx(Ue,{path:"/:grade/schedule",element:h.jsx(W3,{})}),h.jsx(Ue,{path:"/:grade/lectures_recordings/:term",element:h.jsx(G3,{})}),h.jsx(Ue,{path:"/students/:student_id",element:h.jsx(eB,{})}),h.jsx(Ue,{path:"/find_student",element:h.jsx(tB,{})}),h.jsx(Ue,{path:"/degrees_analytics/2025",element:h.jsx(nB,{})})]})})));return h.jsx(wF,{router:s})}yg.createRoot(document.getElementById("root")).render(h.jsx(rB,{}));document.documentElement.setAttribute("data-bs-theme",localStorage.getItem("theme")||"light");
