function w_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function E_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var T_={exports:{}},Cc={},I_={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ml=Symbol.for("react.element"),uS=Symbol.for("react.portal"),cS=Symbol.for("react.fragment"),dS=Symbol.for("react.strict_mode"),hS=Symbol.for("react.profiler"),fS=Symbol.for("react.provider"),pS=Symbol.for("react.context"),mS=Symbol.for("react.forward_ref"),gS=Symbol.for("react.suspense"),yS=Symbol.for("react.memo"),vS=Symbol.for("react.lazy"),mg=Symbol.iterator;function _S(t){return t===null||typeof t!="object"?null:(t=mg&&t[mg]||t["@@iterator"],typeof t=="function"?t:null)}var S_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R_=Object.assign,A_={};function Io(t,e,n){this.props=t,this.context=e,this.refs=A_,this.updater=n||S_}Io.prototype.isReactComponent={};Io.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Io.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function x_(){}x_.prototype=Io.prototype;function Uf(t,e,n){this.props=t,this.context=e,this.refs=A_,this.updater=n||S_}var Bf=Uf.prototype=new x_;Bf.constructor=Uf;R_(Bf,Io.prototype);Bf.isPureReactComponent=!0;var gg=Array.isArray,P_=Object.prototype.hasOwnProperty,$f={current:null},C_={key:!0,ref:!0,__self:!0,__source:!0};function k_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)P_.call(e,r)&&!C_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:ml,type:t,key:s,ref:o,props:i,_owner:$f.current}}function wS(t,e){return{$$typeof:ml,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===ml}function ES(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yg=/\/+/g;function Pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ES(""+t.key):e.toString(36)}function yu(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ml:case uS:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Pd(o,0):r,gg(i)?(n="",t!=null&&(n=t.replace(yg,"$&/")+"/"),yu(i,e,n,"",function(c){return c})):i!=null&&(zf(i)&&(i=wS(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(yg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",gg(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Pd(s,l);o+=yu(s,e,n,u,i)}else if(u=_S(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Pd(s,l++),o+=yu(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gl(t,e,n){if(t==null)return t;var r=[],i=0;return yu(t,r,"","",function(s){return e.call(n,s,i++)}),r}function TS(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zt={current:null},vu={transition:null},IS={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:vu,ReactCurrentOwner:$f};function N_(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Gl,forEach:function(t,e,n){Gl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gl(t,function(){e++}),e},toArray:function(t){return Gl(t,function(e){return e})||[]},only:function(t){if(!zf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Io;fe.Fragment=cS;fe.Profiler=hS;fe.PureComponent=Uf;fe.StrictMode=dS;fe.Suspense=gS;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IS;fe.act=N_;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=R_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$f.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)P_.call(e,u)&&!C_.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:ml,type:t.type,key:i,ref:s,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:pS,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:fS,_context:t},t.Consumer=t};fe.createElement=k_;fe.createFactory=function(t){var e=k_.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:mS,render:t}};fe.isValidElement=zf;fe.lazy=function(t){return{$$typeof:vS,_payload:{_status:-1,_result:t},_init:TS}};fe.memo=function(t,e){return{$$typeof:yS,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=vu.transition;vu.transition={};try{t()}finally{vu.transition=e}};fe.unstable_act=N_;fe.useCallback=function(t,e){return zt.current.useCallback(t,e)};fe.useContext=function(t){return zt.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return zt.current.useDeferredValue(t)};fe.useEffect=function(t,e){return zt.current.useEffect(t,e)};fe.useId=function(){return zt.current.useId()};fe.useImperativeHandle=function(t,e,n){return zt.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return zt.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return zt.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return zt.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return zt.current.useReducer(t,e,n)};fe.useRef=function(t){return zt.current.useRef(t)};fe.useState=function(t){return zt.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return zt.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return zt.current.useTransition()};fe.version="18.3.1";I_.exports=fe;var D=I_.exports;const SS=E_(D),RS=w_({__proto__:null,default:SS},[D]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS=D,xS=Symbol.for("react.element"),PS=Symbol.for("react.fragment"),CS=Object.prototype.hasOwnProperty,kS=AS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,NS={key:!0,ref:!0,__self:!0,__source:!0};function b_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CS.call(e,r)&&!NS.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:xS,type:t,key:s,ref:o,props:i,_owner:kS.current}}Cc.Fragment=PS;Cc.jsx=b_;Cc.jsxs=b_;T_.exports=Cc;var f=T_.exports,_h={},D_={exports:{}},hn={},L_={exports:{}},O_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,ne){var ie=G.length;G.push(ne);e:for(;0<ie;){var we=ie-1>>>1,ye=G[we];if(0<i(ye,ne))G[we]=ne,G[ie]=ye,ie=we;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ne=G[0],ie=G.pop();if(ie!==ne){G[0]=ie;e:for(var we=0,ye=G.length,Ne=ye>>>1;we<Ne;){var rt=2*(we+1)-1,pt=G[rt],mt=rt+1,An=G[mt];if(0>i(pt,ie))mt<ye&&0>i(An,pt)?(G[we]=An,G[mt]=ie,we=mt):(G[we]=pt,G[rt]=ie,we=rt);else if(mt<ye&&0>i(An,ie))G[we]=An,G[mt]=ie,we=mt;else break e}}return ne}function i(G,ne){var ie=G.sortIndex-ne.sortIndex;return ie!==0?ie:G.id-ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,m=null,g=3,I=!1,x=!1,P=!1,O=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(G){for(var ne=n(c);ne!==null;){if(ne.callback===null)r(c);else if(ne.startTime<=G)r(c),ne.sortIndex=ne.expirationTime,e(u,ne);else break;ne=n(c)}}function j(G){if(P=!1,A(G),!x)if(n(u)!==null)x=!0,Hn($);else{var ne=n(c);ne!==null&&Re(j,ne.startTime-G)}}function $(G,ne){x=!1,P&&(P=!1,S(y),y=-1),I=!0;var ie=g;try{for(A(ne),m=n(u);m!==null&&(!(m.expirationTime>ne)||G&&!C());){var we=m.callback;if(typeof we=="function"){m.callback=null,g=m.priorityLevel;var ye=we(m.expirationTime<=ne);ne=t.unstable_now(),typeof ye=="function"?m.callback=ye:m===n(u)&&r(u),A(ne)}else r(u);m=n(u)}if(m!==null)var Ne=!0;else{var rt=n(c);rt!==null&&Re(j,rt.startTime-ne),Ne=!1}return Ne}finally{m=null,g=ie,I=!1}}var k=!1,T=null,y=-1,_=5,E=-1;function C(){return!(t.unstable_now()-E<_)}function b(){if(T!==null){var G=t.unstable_now();E=G;var ne=!0;try{ne=T(!0,G)}finally{ne?R():(k=!1,T=null)}}else k=!1}var R;if(typeof w=="function")R=function(){w(b)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,At=pe.port2;pe.port1.onmessage=b,R=function(){At.postMessage(null)}}else R=function(){O(b,0)};function Hn(G){T=G,k||(k=!0,R())}function Re(G,ne){y=O(function(){G(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){x||I||(x=!0,Hn($))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(G){switch(g){case 1:case 2:case 3:var ne=3;break;default:ne=g}var ie=g;g=ne;try{return G()}finally{g=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,ne){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var ie=g;g=G;try{return ne()}finally{g=ie}},t.unstable_scheduleCallback=function(G,ne,ie){var we=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?we+ie:we):ie=we,G){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=ie+ye,G={id:h++,callback:ne,priorityLevel:G,startTime:ie,expirationTime:ye,sortIndex:-1},ie>we?(G.sortIndex=ie,e(c,G),n(u)===null&&G===n(c)&&(P?(S(y),y=-1):P=!0,Re(j,ie-we))):(G.sortIndex=ye,e(u,G),x||I||(x=!0,Hn($))),G},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(G){var ne=g;return function(){var ie=g;g=ne;try{return G.apply(this,arguments)}finally{g=ie}}}})(O_);L_.exports=O_;var bS=L_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS=D,dn=bS;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var V_=new Set,Ma={};function hs(t,e){ao(t,e),ao(t+"Capture",e)}function ao(t,e){for(Ma[t]=e,t=0;t<e.length;t++)V_.add(e[t])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wh=Object.prototype.hasOwnProperty,LS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vg={},_g={};function OS(t){return wh.call(_g,t)?!0:wh.call(vg,t)?!1:LS.test(t)?_g[t]=!0:(vg[t]=!0,!1)}function VS(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function jS(t,e,n,r){if(e===null||typeof e>"u"||VS(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){St[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];St[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){St[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){St[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){St[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){St[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){St[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){St[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){St[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var qf=/[\-:]([a-z])/g;function Hf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qf,Hf);St[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qf,Hf);St[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qf,Hf);St[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){St[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});St.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){St[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wf(t,e,n,r){var i=St.hasOwnProperty(e)?St[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(jS(e,n,i,r)&&(n=null),r||i===null?OS(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fr=DS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ql=Symbol.for("react.element"),Vs=Symbol.for("react.portal"),js=Symbol.for("react.fragment"),Kf=Symbol.for("react.strict_mode"),Eh=Symbol.for("react.profiler"),j_=Symbol.for("react.provider"),M_=Symbol.for("react.context"),Gf=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),Qf=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),F_=Symbol.for("react.offscreen"),wg=Symbol.iterator;function ta(t){return t===null||typeof t!="object"?null:(t=wg&&t[wg]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Cd;function fa(t){if(Cd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Cd=e&&e[1]||""}return`
`+Cd+t}var kd=!1;function Nd(t,e){if(!t||kd)return"";kd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{kd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?fa(t):""}function MS(t){switch(t.tag){case 5:return fa(t.type);case 16:return fa("Lazy");case 13:return fa("Suspense");case 19:return fa("SuspenseList");case 0:case 2:case 15:return t=Nd(t.type,!1),t;case 11:return t=Nd(t.type.render,!1),t;case 1:return t=Nd(t.type,!0),t;default:return""}}function Sh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case js:return"Fragment";case Vs:return"Portal";case Eh:return"Profiler";case Kf:return"StrictMode";case Th:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case M_:return(t.displayName||"Context")+".Consumer";case j_:return(t._context.displayName||"Context")+".Provider";case Gf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qf:return e=t.displayName||null,e!==null?e:Sh(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return Sh(t(e))}catch{}}return null}function FS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sh(e);case 8:return e===Kf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function U_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function US(t){var e=U_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yl(t){t._valueTracker||(t._valueTracker=US(t))}function B_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=U_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rh(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Eg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=wi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function $_(t,e){e=e.checked,e!=null&&Wf(t,"checked",e,!1)}function Ah(t,e){$_(t,e);var n=wi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xh(t,e.type,n):e.hasOwnProperty("defaultValue")&&xh(t,e.type,wi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Tg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xh(t,e,n){(e!=="number"||Fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var pa=Array.isArray;function Ys(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+wi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ig(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(pa(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wi(n)}}function z_(t,e){var n=wi(e.value),r=wi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function q_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ch(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?q_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jl,H_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jl=Jl||document.createElement("div"),Jl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BS=["Webkit","ms","Moz","O"];Object.keys(Sa).forEach(function(t){BS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Sa[e]=Sa[t]})});function W_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Sa.hasOwnProperty(t)&&Sa[t]?(""+e).trim():e+"px"}function K_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=W_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var $S=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kh(t,e){if(e){if($S[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function Nh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=null;function Yf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dh=null,Js=null,Xs=null;function Rg(t){if(t=vl(t)){if(typeof Dh!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Lc(e),Dh(t.stateNode,t.type,e))}}function G_(t){Js?Xs?Xs.push(t):Xs=[t]:Js=t}function Q_(){if(Js){var t=Js,e=Xs;if(Xs=Js=null,Rg(t),e)for(t=0;t<e.length;t++)Rg(e[t])}}function Y_(t,e){return t(e)}function J_(){}var bd=!1;function X_(t,e,n){if(bd)return t(e,n);bd=!0;try{return Y_(t,e,n)}finally{bd=!1,(Js!==null||Xs!==null)&&(J_(),Q_())}}function Ua(t,e){var n=t.stateNode;if(n===null)return null;var r=Lc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var Lh=!1;if(Cr)try{var na={};Object.defineProperty(na,"passive",{get:function(){Lh=!0}}),window.addEventListener("test",na,na),window.removeEventListener("test",na,na)}catch{Lh=!1}function zS(t,e,n,r,i,s,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Ra=!1,Uu=null,Bu=!1,Oh=null,qS={onError:function(t){Ra=!0,Uu=t}};function HS(t,e,n,r,i,s,o,l,u){Ra=!1,Uu=null,zS.apply(qS,arguments)}function WS(t,e,n,r,i,s,o,l,u){if(HS.apply(this,arguments),Ra){if(Ra){var c=Uu;Ra=!1,Uu=null}else throw Error(q(198));Bu||(Bu=!0,Oh=c)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Z_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ag(t){if(fs(t)!==t)throw Error(q(188))}function KS(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ag(i),t;if(s===r)return Ag(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function ew(t){return t=KS(t),t!==null?tw(t):null}function tw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=tw(t);if(e!==null)return e;t=t.sibling}return null}var nw=dn.unstable_scheduleCallback,xg=dn.unstable_cancelCallback,GS=dn.unstable_shouldYield,QS=dn.unstable_requestPaint,Xe=dn.unstable_now,YS=dn.unstable_getCurrentPriorityLevel,Jf=dn.unstable_ImmediatePriority,rw=dn.unstable_UserBlockingPriority,$u=dn.unstable_NormalPriority,JS=dn.unstable_LowPriority,iw=dn.unstable_IdlePriority,kc=null,tr=null;function XS(t){if(tr&&typeof tr.onCommitFiberRoot=="function")try{tr.onCommitFiberRoot(kc,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:t1,ZS=Math.log,e1=Math.LN2;function t1(t){return t>>>=0,t===0?32:31-(ZS(t)/e1|0)|0}var Xl=64,Zl=4194304;function ma(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ma(l):(s&=o,s!==0&&(r=ma(s)))}else o=n&~i,o!==0?r=ma(o):s!==0&&(r=ma(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-jn(e),i=1<<n,r|=t[n],e&=~i;return r}function n1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-jn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=n1(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Vh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sw(){var t=Xl;return Xl<<=1,!(Xl&4194240)&&(Xl=64),t}function Dd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-jn(e),t[e]=n}function i1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-jn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Xf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-jn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var xe=0;function ow(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var aw,Zf,lw,uw,cw,jh=!1,eu=[],ui=null,ci=null,di=null,Ba=new Map,$a=new Map,Zr=[],s1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pg(t,e){switch(t){case"focusin":case"focusout":ui=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$a.delete(e.pointerId)}}function ra(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=vl(e),e!==null&&Zf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function o1(t,e,n,r,i){switch(e){case"focusin":return ui=ra(ui,t,e,n,r,i),!0;case"dragenter":return ci=ra(ci,t,e,n,r,i),!0;case"mouseover":return di=ra(di,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ba.set(s,ra(Ba.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,$a.set(s,ra($a.get(s)||null,t,e,n,r,i)),!0}return!1}function dw(t){var e=$i(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=Z_(n),e!==null){t.blockedOn=e,cw(t.priority,function(){lw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _u(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Mh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bh=r,n.target.dispatchEvent(r),bh=null}else return e=vl(n),e!==null&&Zf(e),t.blockedOn=n,!1;e.shift()}return!0}function Cg(t,e,n){_u(t)&&n.delete(e)}function a1(){jh=!1,ui!==null&&_u(ui)&&(ui=null),ci!==null&&_u(ci)&&(ci=null),di!==null&&_u(di)&&(di=null),Ba.forEach(Cg),$a.forEach(Cg)}function ia(t,e){t.blockedOn===e&&(t.blockedOn=null,jh||(jh=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,a1)))}function za(t){function e(i){return ia(i,t)}if(0<eu.length){ia(eu[0],t);for(var n=1;n<eu.length;n++){var r=eu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ui!==null&&ia(ui,t),ci!==null&&ia(ci,t),di!==null&&ia(di,t),Ba.forEach(e),$a.forEach(e),n=0;n<Zr.length;n++)r=Zr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Zr.length&&(n=Zr[0],n.blockedOn===null);)dw(n),n.blockedOn===null&&Zr.shift()}var Zs=Fr.ReactCurrentBatchConfig,qu=!0;function l1(t,e,n,r){var i=xe,s=Zs.transition;Zs.transition=null;try{xe=1,ep(t,e,n,r)}finally{xe=i,Zs.transition=s}}function u1(t,e,n,r){var i=xe,s=Zs.transition;Zs.transition=null;try{xe=4,ep(t,e,n,r)}finally{xe=i,Zs.transition=s}}function ep(t,e,n,r){if(qu){var i=Mh(t,e,n,r);if(i===null)zd(t,e,r,Hu,n),Pg(t,r);else if(o1(i,t,e,n,r))r.stopPropagation();else if(Pg(t,r),e&4&&-1<s1.indexOf(t)){for(;i!==null;){var s=vl(i);if(s!==null&&aw(s),s=Mh(t,e,n,r),s===null&&zd(t,e,r,Hu,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else zd(t,e,r,null,n)}}var Hu=null;function Mh(t,e,n,r){if(Hu=null,t=Yf(r),t=$i(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Z_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hu=t,null}function hw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YS()){case Jf:return 1;case rw:return 4;case $u:case JS:return 16;case iw:return 536870912;default:return 16}default:return 16}}var oi=null,tp=null,wu=null;function fw(){if(wu)return wu;var t,e=tp,n=e.length,r,i="value"in oi?oi.value:oi.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return wu=i.slice(t,1<r?1-r:void 0)}function Eu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tu(){return!0}function kg(){return!1}function fn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tu:kg,this.isPropagationStopped=kg,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),e}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},np=fn(So),yl=He({},So,{view:0,detail:0}),c1=fn(yl),Ld,Od,sa,Nc=He({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sa&&(sa&&t.type==="mousemove"?(Ld=t.screenX-sa.screenX,Od=t.screenY-sa.screenY):Od=Ld=0,sa=t),Ld)},movementY:function(t){return"movementY"in t?t.movementY:Od}}),Ng=fn(Nc),d1=He({},Nc,{dataTransfer:0}),h1=fn(d1),f1=He({},yl,{relatedTarget:0}),Vd=fn(f1),p1=He({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),m1=fn(p1),g1=He({},So,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),y1=fn(g1),v1=He({},So,{data:0}),bg=fn(v1),_1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=E1[t])?!!e[t]:!1}function rp(){return T1}var I1=He({},yl,{key:function(t){if(t.key){var e=_1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Eu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?w1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rp,charCode:function(t){return t.type==="keypress"?Eu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Eu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),S1=fn(I1),R1=He({},Nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dg=fn(R1),A1=He({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rp}),x1=fn(A1),P1=He({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),C1=fn(P1),k1=He({},Nc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),N1=fn(k1),b1=[9,13,27,32],ip=Cr&&"CompositionEvent"in window,Aa=null;Cr&&"documentMode"in document&&(Aa=document.documentMode);var D1=Cr&&"TextEvent"in window&&!Aa,pw=Cr&&(!ip||Aa&&8<Aa&&11>=Aa),Lg=" ",Og=!1;function mw(t,e){switch(t){case"keyup":return b1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ms=!1;function L1(t,e){switch(t){case"compositionend":return gw(e);case"keypress":return e.which!==32?null:(Og=!0,Lg);case"textInput":return t=e.data,t===Lg&&Og?null:t;default:return null}}function O1(t,e){if(Ms)return t==="compositionend"||!ip&&mw(t,e)?(t=fw(),wu=tp=oi=null,Ms=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pw&&e.locale!=="ko"?null:e.data;default:return null}}var V1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!V1[t.type]:e==="textarea"}function yw(t,e,n,r){G_(r),e=Wu(e,"onChange"),0<e.length&&(n=new np("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xa=null,qa=null;function j1(t){Pw(t,0)}function bc(t){var e=Bs(t);if(B_(e))return t}function M1(t,e){if(t==="change")return e}var vw=!1;if(Cr){var jd;if(Cr){var Md="oninput"in document;if(!Md){var jg=document.createElement("div");jg.setAttribute("oninput","return;"),Md=typeof jg.oninput=="function"}jd=Md}else jd=!1;vw=jd&&(!document.documentMode||9<document.documentMode)}function Mg(){xa&&(xa.detachEvent("onpropertychange",_w),qa=xa=null)}function _w(t){if(t.propertyName==="value"&&bc(qa)){var e=[];yw(e,qa,t,Yf(t)),X_(j1,e)}}function F1(t,e,n){t==="focusin"?(Mg(),xa=e,qa=n,xa.attachEvent("onpropertychange",_w)):t==="focusout"&&Mg()}function U1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bc(qa)}function B1(t,e){if(t==="click")return bc(e)}function $1(t,e){if(t==="input"||t==="change")return bc(e)}function z1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fn=typeof Object.is=="function"?Object.is:z1;function Ha(t,e){if(Fn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wh.call(e,i)||!Fn(t[i],e[i]))return!1}return!0}function Fg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ug(t,e){var n=Fg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fg(n)}}function ww(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ww(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ew(){for(var t=window,e=Fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Fu(t.document)}return e}function sp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function q1(t){var e=Ew(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ww(n.ownerDocument.documentElement,n)){if(r!==null&&sp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ug(n,s);var o=Ug(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var H1=Cr&&"documentMode"in document&&11>=document.documentMode,Fs=null,Fh=null,Pa=null,Uh=!1;function Bg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uh||Fs==null||Fs!==Fu(r)||(r=Fs,"selectionStart"in r&&sp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Pa&&Ha(Pa,r)||(Pa=r,r=Wu(Fh,"onSelect"),0<r.length&&(e=new np("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Fs)))}function nu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Us={animationend:nu("Animation","AnimationEnd"),animationiteration:nu("Animation","AnimationIteration"),animationstart:nu("Animation","AnimationStart"),transitionend:nu("Transition","TransitionEnd")},Fd={},Tw={};Cr&&(Tw=document.createElement("div").style,"AnimationEvent"in window||(delete Us.animationend.animation,delete Us.animationiteration.animation,delete Us.animationstart.animation),"TransitionEvent"in window||delete Us.transitionend.transition);function Dc(t){if(Fd[t])return Fd[t];if(!Us[t])return t;var e=Us[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tw)return Fd[t]=e[n];return t}var Iw=Dc("animationend"),Sw=Dc("animationiteration"),Rw=Dc("animationstart"),Aw=Dc("transitionend"),xw=new Map,$g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(t,e){xw.set(t,e),hs(e,[t])}for(var Ud=0;Ud<$g.length;Ud++){var Bd=$g[Ud],W1=Bd.toLowerCase(),K1=Bd[0].toUpperCase()+Bd.slice(1);Ai(W1,"on"+K1)}Ai(Iw,"onAnimationEnd");Ai(Sw,"onAnimationIteration");Ai(Rw,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(Aw,"onTransitionEnd");ao("onMouseEnter",["mouseout","mouseover"]);ao("onMouseLeave",["mouseout","mouseover"]);ao("onPointerEnter",["pointerout","pointerover"]);ao("onPointerLeave",["pointerout","pointerover"]);hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ga="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ga));function zg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,WS(r,e,void 0,t),t.currentTarget=null}function Pw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;zg(i,l,c),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;zg(i,l,c),s=u}}}if(Bu)throw t=Oh,Bu=!1,Oh=null,t}function Me(t,e){var n=e[Hh];n===void 0&&(n=e[Hh]=new Set);var r=t+"__bubble";n.has(r)||(Cw(e,t,2,!1),n.add(r))}function $d(t,e,n){var r=0;e&&(r|=4),Cw(n,t,r,e)}var ru="_reactListening"+Math.random().toString(36).slice(2);function Wa(t){if(!t[ru]){t[ru]=!0,V_.forEach(function(n){n!=="selectionchange"&&(G1.has(n)||$d(n,!1,t),$d(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ru]||(e[ru]=!0,$d("selectionchange",!1,e))}}function Cw(t,e,n,r){switch(hw(e)){case 1:var i=l1;break;case 4:i=u1;break;default:i=ep}n=i.bind(null,e,n,t),i=void 0,!Lh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function zd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=$i(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}X_(function(){var c=s,h=Yf(n),m=[];e:{var g=xw.get(t);if(g!==void 0){var I=np,x=t;switch(t){case"keypress":if(Eu(n)===0)break e;case"keydown":case"keyup":I=S1;break;case"focusin":x="focus",I=Vd;break;case"focusout":x="blur",I=Vd;break;case"beforeblur":case"afterblur":I=Vd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Ng;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=h1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=x1;break;case Iw:case Sw:case Rw:I=m1;break;case Aw:I=C1;break;case"scroll":I=c1;break;case"wheel":I=N1;break;case"copy":case"cut":case"paste":I=y1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Dg}var P=(e&4)!==0,O=!P&&t==="scroll",S=P?g!==null?g+"Capture":null:g;P=[];for(var w=c,A;w!==null;){A=w;var j=A.stateNode;if(A.tag===5&&j!==null&&(A=j,S!==null&&(j=Ua(w,S),j!=null&&P.push(Ka(w,j,A)))),O)break;w=w.return}0<P.length&&(g=new I(g,x,null,n,h),m.push({event:g,listeners:P}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",g&&n!==bh&&(x=n.relatedTarget||n.fromElement)&&($i(x)||x[kr]))break e;if((I||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,I?(x=n.relatedTarget||n.toElement,I=c,x=x?$i(x):null,x!==null&&(O=fs(x),x!==O||x.tag!==5&&x.tag!==6)&&(x=null)):(I=null,x=c),I!==x)){if(P=Ng,j="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=Dg,j="onPointerLeave",S="onPointerEnter",w="pointer"),O=I==null?g:Bs(I),A=x==null?g:Bs(x),g=new P(j,w+"leave",I,n,h),g.target=O,g.relatedTarget=A,j=null,$i(h)===c&&(P=new P(S,w+"enter",x,n,h),P.target=A,P.relatedTarget=O,j=P),O=j,I&&x)t:{for(P=I,S=x,w=0,A=P;A;A=bs(A))w++;for(A=0,j=S;j;j=bs(j))A++;for(;0<w-A;)P=bs(P),w--;for(;0<A-w;)S=bs(S),A--;for(;w--;){if(P===S||S!==null&&P===S.alternate)break t;P=bs(P),S=bs(S)}P=null}else P=null;I!==null&&qg(m,g,I,P,!1),x!==null&&O!==null&&qg(m,O,x,P,!0)}}e:{if(g=c?Bs(c):window,I=g.nodeName&&g.nodeName.toLowerCase(),I==="select"||I==="input"&&g.type==="file")var $=M1;else if(Vg(g))if(vw)$=$1;else{$=U1;var k=F1}else(I=g.nodeName)&&I.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&($=B1);if($&&($=$(t,c))){yw(m,$,n,h);break e}k&&k(t,g,c),t==="focusout"&&(k=g._wrapperState)&&k.controlled&&g.type==="number"&&xh(g,"number",g.value)}switch(k=c?Bs(c):window,t){case"focusin":(Vg(k)||k.contentEditable==="true")&&(Fs=k,Fh=c,Pa=null);break;case"focusout":Pa=Fh=Fs=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,Bg(m,n,h);break;case"selectionchange":if(H1)break;case"keydown":case"keyup":Bg(m,n,h)}var T;if(ip)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ms?mw(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(pw&&n.locale!=="ko"&&(Ms||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ms&&(T=fw()):(oi=h,tp="value"in oi?oi.value:oi.textContent,Ms=!0)),k=Wu(c,y),0<k.length&&(y=new bg(y,t,null,n,h),m.push({event:y,listeners:k}),T?y.data=T:(T=gw(n),T!==null&&(y.data=T)))),(T=D1?L1(t,n):O1(t,n))&&(c=Wu(c,"onBeforeInput"),0<c.length&&(h=new bg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:c}),h.data=T))}Pw(m,e)})}function Ka(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ua(t,n),s!=null&&r.unshift(Ka(t,s,i)),s=Ua(t,e),s!=null&&r.push(Ka(t,s,i))),t=t.return}return r}function bs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,i?(u=Ua(n,s),u!=null&&o.unshift(Ka(n,u,l))):i||(u=Ua(n,s),u!=null&&o.push(Ka(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Q1=/\r\n?/g,Y1=/\u0000|\uFFFD/g;function Hg(t){return(typeof t=="string"?t:""+t).replace(Q1,`
`).replace(Y1,"")}function iu(t,e,n){if(e=Hg(e),Hg(t)!==e&&n)throw Error(q(425))}function Ku(){}var Bh=null,$h=null;function zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qh=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,Wg=typeof Promise=="function"?Promise:void 0,X1=typeof queueMicrotask=="function"?queueMicrotask:typeof Wg<"u"?function(t){return Wg.resolve(null).then(t).catch(Z1)}:qh;function Z1(t){setTimeout(function(){throw t})}function qd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),za(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);za(e)}function hi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),Zn="__reactFiber$"+Ro,Ga="__reactProps$"+Ro,kr="__reactContainer$"+Ro,Hh="__reactEvents$"+Ro,eR="__reactListeners$"+Ro,tR="__reactHandles$"+Ro;function $i(t){var e=t[Zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kr]||n[Zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kg(t);t!==null;){if(n=t[Zn])return n;t=Kg(t)}return e}t=n,n=t.parentNode}return null}function vl(t){return t=t[Zn]||t[kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Lc(t){return t[Ga]||null}var Wh=[],$s=-1;function xi(t){return{current:t}}function Fe(t){0>$s||(t.current=Wh[$s],Wh[$s]=null,$s--)}function Oe(t,e){$s++,Wh[$s]=t.current,t.current=e}var Ei={},jt=xi(Ei),Gt=xi(!1),Xi=Ei;function lo(t,e){var n=t.type.contextTypes;if(!n)return Ei;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qt(t){return t=t.childContextTypes,t!=null}function Gu(){Fe(Gt),Fe(jt)}function Gg(t,e,n){if(jt.current!==Ei)throw Error(q(168));Oe(jt,e),Oe(Gt,n)}function kw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,FS(t)||"Unknown",i));return He({},n,r)}function Qu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ei,Xi=jt.current,Oe(jt,t),Oe(Gt,Gt.current),!0}function Qg(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=kw(t,e,Xi),r.__reactInternalMemoizedMergedChildContext=t,Fe(Gt),Fe(jt),Oe(jt,t)):Fe(Gt),Oe(Gt,n)}var _r=null,Oc=!1,Hd=!1;function Nw(t){_r===null?_r=[t]:_r.push(t)}function nR(t){Oc=!0,Nw(t)}function Pi(){if(!Hd&&_r!==null){Hd=!0;var t=0,e=xe;try{var n=_r;for(xe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}_r=null,Oc=!1}catch(i){throw _r!==null&&(_r=_r.slice(t+1)),nw(Jf,Pi),i}finally{xe=e,Hd=!1}}return null}var zs=[],qs=0,Yu=null,Ju=0,yn=[],vn=0,Zi=null,wr=1,Er="";function Mi(t,e){zs[qs++]=Ju,zs[qs++]=Yu,Yu=t,Ju=e}function bw(t,e,n){yn[vn++]=wr,yn[vn++]=Er,yn[vn++]=Zi,Zi=t;var r=wr;t=Er;var i=32-jn(r)-1;r&=~(1<<i),n+=1;var s=32-jn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wr=1<<32-jn(e)+i|n<<i|r,Er=s+t}else wr=1<<s|n<<i|r,Er=t}function op(t){t.return!==null&&(Mi(t,1),bw(t,1,0))}function ap(t){for(;t===Yu;)Yu=zs[--qs],zs[qs]=null,Ju=zs[--qs],zs[qs]=null;for(;t===Zi;)Zi=yn[--vn],yn[vn]=null,Er=yn[--vn],yn[vn]=null,wr=yn[--vn],yn[vn]=null}var un=null,ln=null,Ue=!1,On=null;function Dw(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,un=t,ln=hi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,un=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zi!==null?{id:wr,overflow:Er}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,un=t,ln=null,!0):!1;default:return!1}}function Kh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gh(t){if(Ue){var e=ln;if(e){var n=e;if(!Yg(t,e)){if(Kh(t))throw Error(q(418));e=hi(n.nextSibling);var r=un;e&&Yg(t,e)?Dw(r,n):(t.flags=t.flags&-4097|2,Ue=!1,un=t)}}else{if(Kh(t))throw Error(q(418));t.flags=t.flags&-4097|2,Ue=!1,un=t}}}function Jg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;un=t}function su(t){if(t!==un)return!1;if(!Ue)return Jg(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zh(t.type,t.memoizedProps)),e&&(e=ln)){if(Kh(t))throw Lw(),Error(q(418));for(;e;)Dw(t,e),e=hi(e.nextSibling)}if(Jg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=hi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=un?hi(t.stateNode.nextSibling):null;return!0}function Lw(){for(var t=ln;t;)t=hi(t.nextSibling)}function uo(){ln=un=null,Ue=!1}function lp(t){On===null?On=[t]:On.push(t)}var rR=Fr.ReactCurrentBatchConfig;function oa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function ou(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xg(t){var e=t._init;return e(t._payload)}function Ow(t){function e(S,w){if(t){var A=S.deletions;A===null?(S.deletions=[w],S.flags|=16):A.push(w)}}function n(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function r(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function i(S,w){return S=gi(S,w),S.index=0,S.sibling=null,S}function s(S,w,A){return S.index=A,t?(A=S.alternate,A!==null?(A=A.index,A<w?(S.flags|=2,w):A):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,w,A,j){return w===null||w.tag!==6?(w=Xd(A,S.mode,j),w.return=S,w):(w=i(w,A),w.return=S,w)}function u(S,w,A,j){var $=A.type;return $===js?h(S,w,A.props.children,j,A.key):w!==null&&(w.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Jr&&Xg($)===w.type)?(j=i(w,A.props),j.ref=oa(S,w,A),j.return=S,j):(j=Pu(A.type,A.key,A.props,null,S.mode,j),j.ref=oa(S,w,A),j.return=S,j)}function c(S,w,A,j){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=Zd(A,S.mode,j),w.return=S,w):(w=i(w,A.children||[]),w.return=S,w)}function h(S,w,A,j,$){return w===null||w.tag!==7?(w=Yi(A,S.mode,j,$),w.return=S,w):(w=i(w,A),w.return=S,w)}function m(S,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Xd(""+w,S.mode,A),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ql:return A=Pu(w.type,w.key,w.props,null,S.mode,A),A.ref=oa(S,null,w),A.return=S,A;case Vs:return w=Zd(w,S.mode,A),w.return=S,w;case Jr:var j=w._init;return m(S,j(w._payload),A)}if(pa(w)||ta(w))return w=Yi(w,S.mode,A,null),w.return=S,w;ou(S,w)}return null}function g(S,w,A,j){var $=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return $!==null?null:l(S,w,""+A,j);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Ql:return A.key===$?u(S,w,A,j):null;case Vs:return A.key===$?c(S,w,A,j):null;case Jr:return $=A._init,g(S,w,$(A._payload),j)}if(pa(A)||ta(A))return $!==null?null:h(S,w,A,j,null);ou(S,A)}return null}function I(S,w,A,j,$){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(A)||null,l(w,S,""+j,$);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ql:return S=S.get(j.key===null?A:j.key)||null,u(w,S,j,$);case Vs:return S=S.get(j.key===null?A:j.key)||null,c(w,S,j,$);case Jr:var k=j._init;return I(S,w,A,k(j._payload),$)}if(pa(j)||ta(j))return S=S.get(A)||null,h(w,S,j,$,null);ou(w,j)}return null}function x(S,w,A,j){for(var $=null,k=null,T=w,y=w=0,_=null;T!==null&&y<A.length;y++){T.index>y?(_=T,T=null):_=T.sibling;var E=g(S,T,A[y],j);if(E===null){T===null&&(T=_);break}t&&T&&E.alternate===null&&e(S,T),w=s(E,w,y),k===null?$=E:k.sibling=E,k=E,T=_}if(y===A.length)return n(S,T),Ue&&Mi(S,y),$;if(T===null){for(;y<A.length;y++)T=m(S,A[y],j),T!==null&&(w=s(T,w,y),k===null?$=T:k.sibling=T,k=T);return Ue&&Mi(S,y),$}for(T=r(S,T);y<A.length;y++)_=I(T,S,y,A[y],j),_!==null&&(t&&_.alternate!==null&&T.delete(_.key===null?y:_.key),w=s(_,w,y),k===null?$=_:k.sibling=_,k=_);return t&&T.forEach(function(C){return e(S,C)}),Ue&&Mi(S,y),$}function P(S,w,A,j){var $=ta(A);if(typeof $!="function")throw Error(q(150));if(A=$.call(A),A==null)throw Error(q(151));for(var k=$=null,T=w,y=w=0,_=null,E=A.next();T!==null&&!E.done;y++,E=A.next()){T.index>y?(_=T,T=null):_=T.sibling;var C=g(S,T,E.value,j);if(C===null){T===null&&(T=_);break}t&&T&&C.alternate===null&&e(S,T),w=s(C,w,y),k===null?$=C:k.sibling=C,k=C,T=_}if(E.done)return n(S,T),Ue&&Mi(S,y),$;if(T===null){for(;!E.done;y++,E=A.next())E=m(S,E.value,j),E!==null&&(w=s(E,w,y),k===null?$=E:k.sibling=E,k=E);return Ue&&Mi(S,y),$}for(T=r(S,T);!E.done;y++,E=A.next())E=I(T,S,y,E.value,j),E!==null&&(t&&E.alternate!==null&&T.delete(E.key===null?y:E.key),w=s(E,w,y),k===null?$=E:k.sibling=E,k=E);return t&&T.forEach(function(b){return e(S,b)}),Ue&&Mi(S,y),$}function O(S,w,A,j){if(typeof A=="object"&&A!==null&&A.type===js&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Ql:e:{for(var $=A.key,k=w;k!==null;){if(k.key===$){if($=A.type,$===js){if(k.tag===7){n(S,k.sibling),w=i(k,A.props.children),w.return=S,S=w;break e}}else if(k.elementType===$||typeof $=="object"&&$!==null&&$.$$typeof===Jr&&Xg($)===k.type){n(S,k.sibling),w=i(k,A.props),w.ref=oa(S,k,A),w.return=S,S=w;break e}n(S,k);break}else e(S,k);k=k.sibling}A.type===js?(w=Yi(A.props.children,S.mode,j,A.key),w.return=S,S=w):(j=Pu(A.type,A.key,A.props,null,S.mode,j),j.ref=oa(S,w,A),j.return=S,S=j)}return o(S);case Vs:e:{for(k=A.key;w!==null;){if(w.key===k)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(S,w.sibling),w=i(w,A.children||[]),w.return=S,S=w;break e}else{n(S,w);break}else e(S,w);w=w.sibling}w=Zd(A,S.mode,j),w.return=S,S=w}return o(S);case Jr:return k=A._init,O(S,w,k(A._payload),j)}if(pa(A))return x(S,w,A,j);if(ta(A))return P(S,w,A,j);ou(S,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(S,w.sibling),w=i(w,A),w.return=S,S=w):(n(S,w),w=Xd(A,S.mode,j),w.return=S,S=w),o(S)):n(S,w)}return O}var co=Ow(!0),Vw=Ow(!1),Xu=xi(null),Zu=null,Hs=null,up=null;function cp(){up=Hs=Zu=null}function dp(t){var e=Xu.current;Fe(Xu),t._currentValue=e}function Qh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function eo(t,e){Zu=t,up=Hs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Kt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(up!==t)if(t={context:t,memoizedValue:e,next:null},Hs===null){if(Zu===null)throw Error(q(308));Hs=t,Zu.dependencies={lanes:0,firstContext:t}}else Hs=Hs.next=t;return e}var zi=null;function hp(t){zi===null?zi=[t]:zi.push(t)}function jw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hp(e)):(n.next=i.next,i.next=n),e.interleaved=n,Nr(t,r)}function Nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xr=!1;function fp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Nr(t,n)}return i=r.interleaved,i===null?(e.next=e,hp(r)):(e.next=i.next,i.next=e),r.interleaved=e,Nr(t,n)}function Tu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xf(t,n)}}function Zg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ec(t,e,n,r){var i=t.updateQueue;Xr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,h=c=u=null,l=s;do{var g=l.lane,I=l.eventTime;if((r&g)===g){h!==null&&(h=h.next={eventTime:I,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,P=l;switch(g=e,I=n,P.tag){case 1:if(x=P.payload,typeof x=="function"){m=x.call(I,m,g);break e}m=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=P.payload,g=typeof x=="function"?x.call(I,m,g):x,g==null)break e;m=He({},m,g);break e;case 2:Xr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[l]:g.push(l))}else I={eventTime:I,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=I,u=m):h=h.next=I,o|=g;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;g=l,l=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);ts|=o,t.lanes=o,t.memoizedState=m}}function ey(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var _l={},nr=xi(_l),Qa=xi(_l),Ya=xi(_l);function qi(t){if(t===_l)throw Error(q(174));return t}function pp(t,e){switch(Oe(Ya,e),Oe(Qa,t),Oe(nr,_l),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ch(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ch(e,t)}Fe(nr),Oe(nr,e)}function ho(){Fe(nr),Fe(Qa),Fe(Ya)}function Fw(t){qi(Ya.current);var e=qi(nr.current),n=Ch(e,t.type);e!==n&&(Oe(Qa,t),Oe(nr,n))}function mp(t){Qa.current===t&&(Fe(nr),Fe(Qa))}var ze=xi(0);function tc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wd=[];function gp(){for(var t=0;t<Wd.length;t++)Wd[t]._workInProgressVersionPrimary=null;Wd.length=0}var Iu=Fr.ReactCurrentDispatcher,Kd=Fr.ReactCurrentBatchConfig,es=0,qe=null,at=null,dt=null,nc=!1,Ca=!1,Ja=0,iR=0;function Nt(){throw Error(q(321))}function yp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fn(t[n],e[n]))return!1;return!0}function vp(t,e,n,r,i,s){if(es=s,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Iu.current=t===null||t.memoizedState===null?lR:uR,t=n(r,i),Ca){s=0;do{if(Ca=!1,Ja=0,25<=s)throw Error(q(301));s+=1,dt=at=null,e.updateQueue=null,Iu.current=cR,t=n(r,i)}while(Ca)}if(Iu.current=rc,e=at!==null&&at.next!==null,es=0,dt=at=qe=null,nc=!1,e)throw Error(q(300));return t}function _p(){var t=Ja!==0;return Ja=0,t}function Xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?qe.memoizedState=dt=t:dt=dt.next=t,dt}function Sn(){if(at===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var e=dt===null?qe.memoizedState:dt.next;if(e!==null)dt=e,at=t;else{if(t===null)throw Error(q(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},dt===null?qe.memoizedState=dt=t:dt=dt.next=t}return dt}function Xa(t,e){return typeof e=="function"?e(t):e}function Gd(t){var e=Sn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=at,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,c=s;do{var h=c.lane;if((es&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,qe.lanes|=h,ts|=h}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=l,Fn(r,e.memoizedState)||(Kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,qe.lanes|=s,ts|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Qd(t){var e=Sn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Fn(s,e.memoizedState)||(Kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Uw(){}function Bw(t,e){var n=qe,r=Sn(),i=e(),s=!Fn(r.memoizedState,i);if(s&&(r.memoizedState=i,Kt=!0),r=r.queue,wp(qw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,Za(9,zw.bind(null,n,r,i,e),void 0,null),ht===null)throw Error(q(349));es&30||$w(n,e,i)}return i}function $w(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function zw(t,e,n,r){e.value=n,e.getSnapshot=r,Hw(e)&&Ww(t)}function qw(t,e,n){return n(function(){Hw(e)&&Ww(t)})}function Hw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fn(t,n)}catch{return!0}}function Ww(t){var e=Nr(t,1);e!==null&&Mn(e,t,1,-1)}function ty(t){var e=Xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xa,lastRenderedState:t},e.queue=t,t=t.dispatch=aR.bind(null,qe,t),[e.memoizedState,t]}function Za(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Kw(){return Sn().memoizedState}function Su(t,e,n,r){var i=Xn();qe.flags|=t,i.memoizedState=Za(1|e,n,void 0,r===void 0?null:r)}function Vc(t,e,n,r){var i=Sn();r=r===void 0?null:r;var s=void 0;if(at!==null){var o=at.memoizedState;if(s=o.destroy,r!==null&&yp(r,o.deps)){i.memoizedState=Za(e,n,s,r);return}}qe.flags|=t,i.memoizedState=Za(1|e,n,s,r)}function ny(t,e){return Su(8390656,8,t,e)}function wp(t,e){return Vc(2048,8,t,e)}function Gw(t,e){return Vc(4,2,t,e)}function Qw(t,e){return Vc(4,4,t,e)}function Yw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Jw(t,e,n){return n=n!=null?n.concat([t]):null,Vc(4,4,Yw.bind(null,e,t),n)}function Ep(){}function Xw(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Zw(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function e0(t,e,n){return es&21?(Fn(n,e)||(n=sw(),qe.lanes|=n,ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Kt=!0),t.memoizedState=n)}function sR(t,e){var n=xe;xe=n!==0&&4>n?n:4,t(!0);var r=Kd.transition;Kd.transition={};try{t(!1),e()}finally{xe=n,Kd.transition=r}}function t0(){return Sn().memoizedState}function oR(t,e,n){var r=mi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},n0(t))r0(e,n);else if(n=jw(t,e,n,r),n!==null){var i=Bt();Mn(n,t,r,i),i0(n,e,r)}}function aR(t,e,n){var r=mi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(n0(t))r0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Fn(l,o)){var u=e.interleaved;u===null?(i.next=i,hp(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=jw(t,e,i,r),n!==null&&(i=Bt(),Mn(n,t,r,i),i0(n,e,r))}}function n0(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function r0(t,e){Ca=nc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function i0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xf(t,n)}}var rc={readContext:In,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useInsertionEffect:Nt,useLayoutEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useMutableSource:Nt,useSyncExternalStore:Nt,useId:Nt,unstable_isNewReconciler:!1},lR={readContext:In,useCallback:function(t,e){return Xn().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:ny,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Su(4194308,4,Yw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Su(4194308,4,t,e)},useInsertionEffect:function(t,e){return Su(4,2,t,e)},useMemo:function(t,e){var n=Xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oR.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=Xn();return t={current:t},e.memoizedState=t},useState:ty,useDebugValue:Ep,useDeferredValue:function(t){return Xn().memoizedState=t},useTransition:function(){var t=ty(!1),e=t[0];return t=sR.bind(null,t[1]),Xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,i=Xn();if(Ue){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),ht===null)throw Error(q(349));es&30||$w(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ny(qw.bind(null,r,s,t),[t]),r.flags|=2048,Za(9,zw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Xn(),e=ht.identifierPrefix;if(Ue){var n=Er,r=wr;n=(r&~(1<<32-jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ja++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uR={readContext:In,useCallback:Xw,useContext:In,useEffect:wp,useImperativeHandle:Jw,useInsertionEffect:Gw,useLayoutEffect:Qw,useMemo:Zw,useReducer:Gd,useRef:Kw,useState:function(){return Gd(Xa)},useDebugValue:Ep,useDeferredValue:function(t){var e=Sn();return e0(e,at.memoizedState,t)},useTransition:function(){var t=Gd(Xa)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:Uw,useSyncExternalStore:Bw,useId:t0,unstable_isNewReconciler:!1},cR={readContext:In,useCallback:Xw,useContext:In,useEffect:wp,useImperativeHandle:Jw,useInsertionEffect:Gw,useLayoutEffect:Qw,useMemo:Zw,useReducer:Qd,useRef:Kw,useState:function(){return Qd(Xa)},useDebugValue:Ep,useDeferredValue:function(t){var e=Sn();return at===null?e.memoizedState=t:e0(e,at.memoizedState,t)},useTransition:function(){var t=Qd(Xa)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:Uw,useSyncExternalStore:Bw,useId:t0,unstable_isNewReconciler:!1};function bn(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jc={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=mi(t),s=Ar(r,i);s.payload=e,n!=null&&(s.callback=n),e=fi(t,s,i),e!==null&&(Mn(e,t,i,r),Tu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Bt(),i=mi(t),s=Ar(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=fi(t,s,i),e!==null&&(Mn(e,t,i,r),Tu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Bt(),r=mi(t),i=Ar(n,r);i.tag=2,e!=null&&(i.callback=e),e=fi(t,i,r),e!==null&&(Mn(e,t,r,n),Tu(e,t,r))}};function ry(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ha(n,r)||!Ha(i,s):!0}function s0(t,e,n){var r=!1,i=Ei,s=e.contextType;return typeof s=="object"&&s!==null?s=In(s):(i=Qt(e)?Xi:jt.current,r=e.contextTypes,s=(r=r!=null)?lo(t,i):Ei),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function iy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jc.enqueueReplaceState(e,e.state,null)}function Jh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},fp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=In(s):(s=Qt(e)?Xi:jt.current,i.context=lo(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Yh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&jc.enqueueReplaceState(i,i.state,null),ec(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fo(t,e){try{var n="",r=e;do n+=MS(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Yd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dR=typeof WeakMap=="function"?WeakMap:Map;function o0(t,e,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){sc||(sc=!0,uf=r),Xh(t,e)},n}function a0(t,e,n){n=Ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xh(t,e),typeof r!="function"&&(pi===null?pi=new Set([this]):pi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=RR.bind(null,t,e,n),e.then(t,t))}function oy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ay(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ar(-1,1),e.tag=2,fi(n,e,1))),n.lanes|=1),t)}var hR=Fr.ReactCurrentOwner,Kt=!1;function Ut(t,e,n,r){e.child=t===null?Vw(e,null,n,r):co(e,t.child,n,r)}function ly(t,e,n,r,i){n=n.render;var s=e.ref;return eo(e,i),r=vp(t,e,n,r,s,i),n=_p(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,br(t,e,i)):(Ue&&n&&op(e),e.flags|=1,Ut(t,e,r,i),e.child)}function uy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Cp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,l0(t,e,s,r,i)):(t=Pu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ha,n(o,r)&&t.ref===e.ref)return br(t,e,i)}return e.flags|=1,t=gi(s,r),t.ref=e.ref,t.return=e,e.child=t}function l0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ha(s,r)&&t.ref===e.ref)if(Kt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Kt=!0);else return e.lanes=t.lanes,br(t,e,i)}return Zh(t,e,n,r,i)}function u0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Ks,rn),rn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(Ks,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Oe(Ks,rn),rn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Oe(Ks,rn),rn|=r;return Ut(t,e,i,n),e.child}function c0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zh(t,e,n,r,i){var s=Qt(n)?Xi:jt.current;return s=lo(e,s),eo(e,i),n=vp(t,e,n,r,s,i),r=_p(),t!==null&&!Kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,br(t,e,i)):(Ue&&r&&op(e),e.flags|=1,Ut(t,e,n,i),e.child)}function cy(t,e,n,r,i){if(Qt(n)){var s=!0;Qu(e)}else s=!1;if(eo(e,i),e.stateNode===null)Ru(t,e),s0(e,n,r),Jh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=In(c):(c=Qt(n)?Xi:jt.current,c=lo(e,c));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&iy(e,o,r,c),Xr=!1;var g=e.memoizedState;o.state=g,ec(e,r,o,i),u=e.memoizedState,l!==r||g!==u||Gt.current||Xr?(typeof h=="function"&&(Yh(e,n,h,r),u=e.memoizedState),(l=Xr||ry(e,n,l,r,g,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Mw(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:bn(e.type,l),o.props=c,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=In(u):(u=Qt(n)?Xi:jt.current,u=lo(e,u));var I=n.getDerivedStateFromProps;(h=typeof I=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&iy(e,o,r,u),Xr=!1,g=e.memoizedState,o.state=g,ec(e,r,o,i);var x=e.memoizedState;l!==m||g!==x||Gt.current||Xr?(typeof I=="function"&&(Yh(e,n,I,r),x=e.memoizedState),(c=Xr||ry(e,n,c,r,g,x,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,x,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,x,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=x),o.props=r,o.state=x,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ef(t,e,n,r,s,i)}function ef(t,e,n,r,i,s){c0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Qg(e,n,!1),br(t,e,s);r=e.stateNode,hR.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=co(e,t.child,null,s),e.child=co(e,null,l,s)):Ut(t,e,l,s),e.memoizedState=r.state,i&&Qg(e,n,!0),e.child}function d0(t){var e=t.stateNode;e.pendingContext?Gg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gg(t,e.context,!1),pp(t,e.containerInfo)}function dy(t,e,n,r,i){return uo(),lp(i),e.flags|=256,Ut(t,e,n,r),e.child}var tf={dehydrated:null,treeContext:null,retryLane:0};function nf(t){return{baseLanes:t,cachePool:null,transitions:null}}function h0(t,e,n){var r=e.pendingProps,i=ze.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Oe(ze,i&1),t===null)return Gh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Uc(o,r,0,null),t=Yi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=nf(n),e.memoizedState=tf,t):Tp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return fR(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=gi(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=gi(l,s):(s=Yi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?nf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tf,r}return s=t.child,t=s.sibling,r=gi(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tp(t,e){return e=Uc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function au(t,e,n,r){return r!==null&&lp(r),co(e,t.child,null,n),t=Tp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Yd(Error(q(422))),au(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Uc({mode:"visible",children:r.children},i,0,null),s=Yi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&co(e,t.child,null,o),e.child.memoizedState=nf(o),e.memoizedState=tf,s);if(!(e.mode&1))return au(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(q(419)),r=Yd(s,r,void 0),au(t,e,o,r)}if(l=(o&t.childLanes)!==0,Kt||l){if(r=ht,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Nr(t,i),Mn(r,t,i,-1))}return Pp(),r=Yd(Error(q(421))),au(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=AR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ln=hi(i.nextSibling),un=e,Ue=!0,On=null,t!==null&&(yn[vn++]=wr,yn[vn++]=Er,yn[vn++]=Zi,wr=t.id,Er=t.overflow,Zi=e),e=Tp(e,r.children),e.flags|=4096,e)}function hy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qh(t.return,e,n)}function Jd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function f0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ut(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hy(t,n,e);else if(t.tag===19)hy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(ze,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&tc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Jd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&tc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Jd(e,!0,n,null,s);break;case"together":Jd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ru(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function br(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=gi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pR(t,e,n){switch(e.tag){case 3:d0(e),uo();break;case 5:Fw(e);break;case 1:Qt(e.type)&&Qu(e);break;case 4:pp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Oe(Xu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?h0(t,e,n):(Oe(ze,ze.current&1),t=br(t,e,n),t!==null?t.sibling:null);Oe(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return f0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Oe(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,u0(t,e,n)}return br(t,e,n)}var p0,rf,m0,g0;p0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rf=function(){};m0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,qi(nr.current);var s=null;switch(n){case"input":i=Rh(t,i),r=Rh(t,r),s=[];break;case"select":i=He({},i,{value:void 0}),r=He({},r,{value:void 0}),s=[];break;case"textarea":i=Ph(t,i),r=Ph(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ku)}kh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ma.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ma.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Me("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};g0=function(t,e,n,r){n!==r&&(e.flags|=4)};function aa(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mR(t,e,n){var r=e.pendingProps;switch(ap(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Qt(e.type)&&Gu(),bt(e),null;case 3:return r=e.stateNode,ho(),Fe(Gt),Fe(jt),gp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(su(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(hf(On),On=null))),rf(t,e),bt(e),null;case 5:mp(e);var i=qi(Ya.current);if(n=e.type,t!==null&&e.stateNode!=null)m0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return bt(e),null}if(t=qi(nr.current),su(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Zn]=e,r[Ga]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<ga.length;i++)Me(ga[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Eg(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":Ig(r,s),Me("invalid",r)}kh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&iu(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&iu(r.textContent,l,t),i=["children",""+l]):Ma.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":Yl(r),Tg(r,s,!0);break;case"textarea":Yl(r),Sg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ku)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=q_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Zn]=e,t[Ga]=r,p0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Nh(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<ga.length;i++)Me(ga[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":Eg(t,r),i=Rh(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=He({},r,{value:void 0}),Me("invalid",t);break;case"textarea":Ig(t,r),i=Ph(t,r),Me("invalid",t);break;default:i=r}kh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?K_(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&H_(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Fa(t,u):typeof u=="number"&&Fa(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ma.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Me("scroll",t):u!=null&&Wf(t,s,u,o))}switch(n){case"input":Yl(t),Tg(t,r,!1);break;case"textarea":Yl(t),Sg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+wi(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Ys(t,!!r.multiple,s,!1):r.defaultValue!=null&&Ys(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ku)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)g0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=qi(Ya.current),qi(nr.current),su(e)){if(r=e.stateNode,n=e.memoizedProps,r[Zn]=e,(s=r.nodeValue!==n)&&(t=un,t!==null))switch(t.tag){case 3:iu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&iu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zn]=e,e.stateNode=r}return bt(e),null;case 13:if(Fe(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&ln!==null&&e.mode&1&&!(e.flags&128))Lw(),uo(),e.flags|=98560,s=!1;else if(s=su(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[Zn]=e}else uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),s=!1}else On!==null&&(hf(On),On=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?lt===0&&(lt=3):Pp())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return ho(),rf(t,e),t===null&&Wa(e.stateNode.containerInfo),bt(e),null;case 10:return dp(e.type._context),bt(e),null;case 17:return Qt(e.type)&&Gu(),bt(e),null;case 19:if(Fe(ze),s=e.memoizedState,s===null)return bt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)aa(s,!1);else{if(lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=tc(t),o!==null){for(e.flags|=128,aa(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(ze,ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&Xe()>po&&(e.flags|=128,r=!0,aa(s,!1),e.lanes=4194304)}else{if(!r)if(t=tc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),aa(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ue)return bt(e),null}else 2*Xe()-s.renderingStartTime>po&&n!==1073741824&&(e.flags|=128,r=!0,aa(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xe(),e.sibling=null,n=ze.current,Oe(ze,r?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return xp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?rn&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function gR(t,e){switch(ap(e),e.tag){case 1:return Qt(e.type)&&Gu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ho(),Fe(Gt),Fe(jt),gp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mp(e),null;case 13:if(Fe(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(ze),null;case 4:return ho(),null;case 10:return dp(e.type._context),null;case 22:case 23:return xp(),null;case 24:return null;default:return null}}var lu=!1,Ot=!1,yR=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Ws(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ge(t,e,r)}else n.current=null}function sf(t,e,n){try{n()}catch(r){Ge(t,e,r)}}var fy=!1;function vR(t,e){if(Bh=qu,t=Ew(),sp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,h=0,m=t,g=null;t:for(;;){for(var I;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(I=m.firstChild)!==null;)g=m,m=I;for(;;){if(m===t)break t;if(g===n&&++c===i&&(l=o),g===s&&++h===r&&(u=o),(I=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=I}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for($h={focusedElem:t,selectionRange:n},qu=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var P=x.memoizedProps,O=x.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?P:bn(e.type,P),O);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(j){Ge(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return x=fy,fy=!1,x}function ka(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&sf(e,n,s)}i=i.next}while(i!==r)}}function Mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function of(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function y0(t){var e=t.alternate;e!==null&&(t.alternate=null,y0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zn],delete e[Ga],delete e[Hh],delete e[eR],delete e[tR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function v0(t){return t.tag===5||t.tag===3||t.tag===4}function py(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||v0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function af(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ku));else if(r!==4&&(t=t.child,t!==null))for(af(t,e,n),t=t.sibling;t!==null;)af(t,e,n),t=t.sibling}function lf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lf(t,e,n),t=t.sibling;t!==null;)lf(t,e,n),t=t.sibling}var vt=null,Dn=!1;function Gr(t,e,n){for(n=n.child;n!==null;)_0(t,e,n),n=n.sibling}function _0(t,e,n){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(kc,n)}catch{}switch(n.tag){case 5:Ot||Ws(n,e);case 6:var r=vt,i=Dn;vt=null,Gr(t,e,n),vt=r,Dn=i,vt!==null&&(Dn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(Dn?(t=vt,n=n.stateNode,t.nodeType===8?qd(t.parentNode,n):t.nodeType===1&&qd(t,n),za(t)):qd(vt,n.stateNode));break;case 4:r=vt,i=Dn,vt=n.stateNode.containerInfo,Dn=!0,Gr(t,e,n),vt=r,Dn=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&sf(n,e,o),i=i.next}while(i!==r)}Gr(t,e,n);break;case 1:if(!Ot&&(Ws(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ge(n,e,l)}Gr(t,e,n);break;case 21:Gr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Gr(t,e,n),Ot=r):Gr(t,e,n);break;default:Gr(t,e,n)}}function my(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yR),e.forEach(function(r){var i=xR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function kn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:vt=l.stateNode,Dn=!1;break e;case 3:vt=l.stateNode.containerInfo,Dn=!0;break e;case 4:vt=l.stateNode.containerInfo,Dn=!0;break e}l=l.return}if(vt===null)throw Error(q(160));_0(s,o,i),vt=null,Dn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Ge(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)w0(e,t),e=e.sibling}function w0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kn(e,t),Jn(t),r&4){try{ka(3,t,t.return),Mc(3,t)}catch(P){Ge(t,t.return,P)}try{ka(5,t,t.return)}catch(P){Ge(t,t.return,P)}}break;case 1:kn(e,t),Jn(t),r&512&&n!==null&&Ws(n,n.return);break;case 5:if(kn(e,t),Jn(t),r&512&&n!==null&&Ws(n,n.return),t.flags&32){var i=t.stateNode;try{Fa(i,"")}catch(P){Ge(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&$_(i,s),Nh(l,o);var c=Nh(l,s);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?K_(i,m):h==="dangerouslySetInnerHTML"?H_(i,m):h==="children"?Fa(i,m):Wf(i,h,m,c)}switch(l){case"input":Ah(i,s);break;case"textarea":z_(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var I=s.value;I!=null?Ys(i,!!s.multiple,I,!1):g!==!!s.multiple&&(s.defaultValue!=null?Ys(i,!!s.multiple,s.defaultValue,!0):Ys(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ga]=s}catch(P){Ge(t,t.return,P)}}break;case 6:if(kn(e,t),Jn(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){Ge(t,t.return,P)}}break;case 3:if(kn(e,t),Jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{za(e.containerInfo)}catch(P){Ge(t,t.return,P)}break;case 4:kn(e,t),Jn(t);break;case 13:kn(e,t),Jn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Rp=Xe())),r&4&&my(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(c=Ot)||h,kn(e,t),Ot=c):kn(e,t),Jn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(Y=t,h=t.child;h!==null;){for(m=Y=h;Y!==null;){switch(g=Y,I=g.child,g.tag){case 0:case 11:case 14:case 15:ka(4,g,g.return);break;case 1:Ws(g,g.return);var x=g.stateNode;if(typeof x.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(P){Ge(r,n,P)}}break;case 5:Ws(g,g.return);break;case 22:if(g.memoizedState!==null){yy(m);continue}}I!==null?(I.return=g,Y=I):yy(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=W_("display",o))}catch(P){Ge(t,t.return,P)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(P){Ge(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:kn(e,t),Jn(t),r&4&&my(t);break;case 21:break;default:kn(e,t),Jn(t)}}function Jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(v0(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fa(i,""),r.flags&=-33);var s=py(t);lf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=py(t);af(t,l,o);break;default:throw Error(q(161))}}catch(u){Ge(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _R(t,e,n){Y=t,E0(t)}function E0(t,e,n){for(var r=(t.mode&1)!==0;Y!==null;){var i=Y,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||lu;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Ot;l=lu;var c=Ot;if(lu=o,(Ot=u)&&!c)for(Y=i;Y!==null;)o=Y,u=o.child,o.tag===22&&o.memoizedState!==null?vy(i):u!==null?(u.return=o,Y=u):vy(i);for(;s!==null;)Y=s,E0(s),s=s.sibling;Y=i,lu=l,Ot=c}gy(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Y=s):gy(t)}}function gy(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Mc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:bn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ey(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ey(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&za(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Ot||e.flags&512&&of(e)}catch(g){Ge(e,e.return,g)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function yy(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function vy(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Mc(4,e)}catch(u){Ge(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ge(e,i,u)}}var s=e.return;try{of(e)}catch(u){Ge(e,s,u)}break;case 5:var o=e.return;try{of(e)}catch(u){Ge(e,o,u)}}}catch(u){Ge(e,e.return,u)}if(e===t){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var wR=Math.ceil,ic=Fr.ReactCurrentDispatcher,Ip=Fr.ReactCurrentOwner,En=Fr.ReactCurrentBatchConfig,Ee=0,ht=null,tt=null,Et=0,rn=0,Ks=xi(0),lt=0,el=null,ts=0,Fc=0,Sp=0,Na=null,Wt=null,Rp=0,po=1/0,vr=null,sc=!1,uf=null,pi=null,uu=!1,ai=null,oc=0,ba=0,cf=null,Au=-1,xu=0;function Bt(){return Ee&6?Xe():Au!==-1?Au:Au=Xe()}function mi(t){return t.mode&1?Ee&2&&Et!==0?Et&-Et:rR.transition!==null?(xu===0&&(xu=sw()),xu):(t=xe,t!==0||(t=window.event,t=t===void 0?16:hw(t.type)),t):1}function Mn(t,e,n,r){if(50<ba)throw ba=0,cf=null,Error(q(185));gl(t,n,r),(!(Ee&2)||t!==ht)&&(t===ht&&(!(Ee&2)&&(Fc|=n),lt===4&&ei(t,Et)),Yt(t,r),n===1&&Ee===0&&!(e.mode&1)&&(po=Xe()+500,Oc&&Pi()))}function Yt(t,e){var n=t.callbackNode;r1(t,e);var r=zu(t,t===ht?Et:0);if(r===0)n!==null&&xg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xg(n),e===1)t.tag===0?nR(_y.bind(null,t)):Nw(_y.bind(null,t)),X1(function(){!(Ee&6)&&Pi()}),n=null;else{switch(ow(r)){case 1:n=Jf;break;case 4:n=rw;break;case 16:n=$u;break;case 536870912:n=iw;break;default:n=$u}n=C0(n,T0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function T0(t,e){if(Au=-1,xu=0,Ee&6)throw Error(q(327));var n=t.callbackNode;if(to()&&t.callbackNode!==n)return null;var r=zu(t,t===ht?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ac(t,r);else{e=r;var i=Ee;Ee|=2;var s=S0();(ht!==t||Et!==e)&&(vr=null,po=Xe()+500,Qi(t,e));do try{IR();break}catch(l){I0(t,l)}while(!0);cp(),ic.current=s,Ee=i,tt!==null?e=0:(ht=null,Et=0,e=lt)}if(e!==0){if(e===2&&(i=Vh(t),i!==0&&(r=i,e=df(t,i))),e===1)throw n=el,Qi(t,0),ei(t,r),Yt(t,Xe()),n;if(e===6)ei(t,r);else{if(i=t.current.alternate,!(r&30)&&!ER(i)&&(e=ac(t,r),e===2&&(s=Vh(t),s!==0&&(r=s,e=df(t,s))),e===1))throw n=el,Qi(t,0),ei(t,r),Yt(t,Xe()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:Fi(t,Wt,vr);break;case 3:if(ei(t,r),(r&130023424)===r&&(e=Rp+500-Xe(),10<e)){if(zu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Bt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qh(Fi.bind(null,t,Wt,vr),e);break}Fi(t,Wt,vr);break;case 4:if(ei(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-jn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Xe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wR(r/1960))-r,10<r){t.timeoutHandle=qh(Fi.bind(null,t,Wt,vr),r);break}Fi(t,Wt,vr);break;case 5:Fi(t,Wt,vr);break;default:throw Error(q(329))}}}return Yt(t,Xe()),t.callbackNode===n?T0.bind(null,t):null}function df(t,e){var n=Na;return t.current.memoizedState.isDehydrated&&(Qi(t,e).flags|=256),t=ac(t,e),t!==2&&(e=Wt,Wt=n,e!==null&&hf(e)),t}function hf(t){Wt===null?Wt=t:Wt.push.apply(Wt,t)}function ER(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Fn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ei(t,e){for(e&=~Sp,e&=~Fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-jn(e),r=1<<n;t[n]=-1,e&=~r}}function _y(t){if(Ee&6)throw Error(q(327));to();var e=zu(t,0);if(!(e&1))return Yt(t,Xe()),null;var n=ac(t,e);if(t.tag!==0&&n===2){var r=Vh(t);r!==0&&(e=r,n=df(t,r))}if(n===1)throw n=el,Qi(t,0),ei(t,e),Yt(t,Xe()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fi(t,Wt,vr),Yt(t,Xe()),null}function Ap(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(po=Xe()+500,Oc&&Pi())}}function ns(t){ai!==null&&ai.tag===0&&!(Ee&6)&&to();var e=Ee;Ee|=1;var n=En.transition,r=xe;try{if(En.transition=null,xe=1,t)return t()}finally{xe=r,En.transition=n,Ee=e,!(Ee&6)&&Pi()}}function xp(){rn=Ks.current,Fe(Ks)}function Qi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,J1(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(ap(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Gu();break;case 3:ho(),Fe(Gt),Fe(jt),gp();break;case 5:mp(r);break;case 4:ho();break;case 13:Fe(ze);break;case 19:Fe(ze);break;case 10:dp(r.type._context);break;case 22:case 23:xp()}n=n.return}if(ht=t,tt=t=gi(t.current,null),Et=rn=e,lt=0,el=null,Sp=Fc=ts=0,Wt=Na=null,zi!==null){for(e=0;e<zi.length;e++)if(n=zi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}zi=null}return t}function I0(t,e){do{var n=tt;try{if(cp(),Iu.current=rc,nc){for(var r=qe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}nc=!1}if(es=0,dt=at=qe=null,Ca=!1,Ja=0,Ip.current=null,n===null||n.return===null){lt=1,el=e,tt=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Et,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var g=h.alternate;g?(h.updateQueue=g.updateQueue,h.memoizedState=g.memoizedState,h.lanes=g.lanes):(h.updateQueue=null,h.memoizedState=null)}var I=oy(o);if(I!==null){I.flags&=-257,ay(I,o,l,s,e),I.mode&1&&sy(s,c,e),e=I,u=c;var x=e.updateQueue;if(x===null){var P=new Set;P.add(u),e.updateQueue=P}else x.add(u);break e}else{if(!(e&1)){sy(s,c,e),Pp();break e}u=Error(q(426))}}else if(Ue&&l.mode&1){var O=oy(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),ay(O,o,l,s,e),lp(fo(u,l));break e}}s=u=fo(u,l),lt!==4&&(lt=2),Na===null?Na=[s]:Na.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var S=o0(s,u,e);Zg(s,S);break e;case 1:l=u;var w=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(pi===null||!pi.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=a0(s,l,e);Zg(s,j);break e}}s=s.return}while(s!==null)}A0(n)}catch($){e=$,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function S0(){var t=ic.current;return ic.current=rc,t===null?rc:t}function Pp(){(lt===0||lt===3||lt===2)&&(lt=4),ht===null||!(ts&268435455)&&!(Fc&268435455)||ei(ht,Et)}function ac(t,e){var n=Ee;Ee|=2;var r=S0();(ht!==t||Et!==e)&&(vr=null,Qi(t,e));do try{TR();break}catch(i){I0(t,i)}while(!0);if(cp(),Ee=n,ic.current=r,tt!==null)throw Error(q(261));return ht=null,Et=0,lt}function TR(){for(;tt!==null;)R0(tt)}function IR(){for(;tt!==null&&!GS();)R0(tt)}function R0(t){var e=P0(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?A0(t):tt=e,Ip.current=null}function A0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gR(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{lt=6,tt=null;return}}else if(n=mR(n,e,rn),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);lt===0&&(lt=5)}function Fi(t,e,n){var r=xe,i=En.transition;try{En.transition=null,xe=1,SR(t,e,n,r)}finally{En.transition=i,xe=r}return null}function SR(t,e,n,r){do to();while(ai!==null);if(Ee&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(i1(t,s),t===ht&&(tt=ht=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uu||(uu=!0,C0($u,function(){return to(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=En.transition,En.transition=null;var o=xe;xe=1;var l=Ee;Ee|=4,Ip.current=null,vR(t,n),w0(n,t),q1($h),qu=!!Bh,$h=Bh=null,t.current=n,_R(n),QS(),Ee=l,xe=o,En.transition=s}else t.current=n;if(uu&&(uu=!1,ai=t,oc=i),s=t.pendingLanes,s===0&&(pi=null),XS(n.stateNode),Yt(t,Xe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(sc)throw sc=!1,t=uf,uf=null,t;return oc&1&&t.tag!==0&&to(),s=t.pendingLanes,s&1?t===cf?ba++:(ba=0,cf=t):ba=0,Pi(),null}function to(){if(ai!==null){var t=ow(oc),e=En.transition,n=xe;try{if(En.transition=null,xe=16>t?16:t,ai===null)var r=!1;else{if(t=ai,ai=null,oc=0,Ee&6)throw Error(q(331));var i=Ee;for(Ee|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Y=c;Y!==null;){var h=Y;switch(h.tag){case 0:case 11:case 15:ka(8,h,s)}var m=h.child;if(m!==null)m.return=h,Y=m;else for(;Y!==null;){h=Y;var g=h.sibling,I=h.return;if(y0(h),h===c){Y=null;break}if(g!==null){g.return=I,Y=g;break}Y=I}}}var x=s.alternate;if(x!==null){var P=x.child;if(P!==null){x.child=null;do{var O=P.sibling;P.sibling=null,P=O}while(P!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ka(9,s,s.return)}var S=s.sibling;if(S!==null){S.return=s.return,Y=S;break e}Y=s.return}}var w=t.current;for(Y=w;Y!==null;){o=Y;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,Y=A;else e:for(o=w;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Mc(9,l)}}catch($){Ge(l,l.return,$)}if(l===o){Y=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Y=j;break e}Y=l.return}}if(Ee=i,Pi(),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(kc,t)}catch{}r=!0}return r}finally{xe=n,En.transition=e}}return!1}function wy(t,e,n){e=fo(n,e),e=o0(t,e,1),t=fi(t,e,1),e=Bt(),t!==null&&(gl(t,1,e),Yt(t,e))}function Ge(t,e,n){if(t.tag===3)wy(t,t,n);else for(;e!==null;){if(e.tag===3){wy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(pi===null||!pi.has(r))){t=fo(n,t),t=a0(e,t,1),e=fi(e,t,1),t=Bt(),e!==null&&(gl(e,1,t),Yt(e,t));break}}e=e.return}}function RR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Bt(),t.pingedLanes|=t.suspendedLanes&n,ht===t&&(Et&n)===n&&(lt===4||lt===3&&(Et&130023424)===Et&&500>Xe()-Rp?Qi(t,0):Sp|=n),Yt(t,e)}function x0(t,e){e===0&&(t.mode&1?(e=Zl,Zl<<=1,!(Zl&130023424)&&(Zl=4194304)):e=1);var n=Bt();t=Nr(t,e),t!==null&&(gl(t,e,n),Yt(t,n))}function AR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),x0(t,n)}function xR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),x0(t,n)}var P0;P0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Gt.current)Kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Kt=!1,pR(t,e,n);Kt=!!(t.flags&131072)}else Kt=!1,Ue&&e.flags&1048576&&bw(e,Ju,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ru(t,e),t=e.pendingProps;var i=lo(e,jt.current);eo(e,n),i=vp(null,e,r,t,i,n);var s=_p();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(r)?(s=!0,Qu(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fp(e),i.updater=jc,e.stateNode=i,i._reactInternals=e,Jh(e,r,t,n),e=ef(null,e,r,!0,s,n)):(e.tag=0,Ue&&s&&op(e),Ut(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ru(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=CR(r),t=bn(r,t),i){case 0:e=Zh(null,e,r,t,n);break e;case 1:e=cy(null,e,r,t,n);break e;case 11:e=ly(null,e,r,t,n);break e;case 14:e=uy(null,e,r,bn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),Zh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),cy(t,e,r,i,n);case 3:e:{if(d0(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Mw(t,e),ec(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=fo(Error(q(423)),e),e=dy(t,e,r,n,i);break e}else if(r!==i){i=fo(Error(q(424)),e),e=dy(t,e,r,n,i);break e}else for(ln=hi(e.stateNode.containerInfo.firstChild),un=e,Ue=!0,On=null,n=Vw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(uo(),r===i){e=br(t,e,n);break e}Ut(t,e,r,n)}e=e.child}return e;case 5:return Fw(e),t===null&&Gh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zh(r,i)?o=null:s!==null&&zh(r,s)&&(e.flags|=32),c0(t,e),Ut(t,e,o,n),e.child;case 6:return t===null&&Gh(e),null;case 13:return h0(t,e,n);case 4:return pp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=co(e,null,r,n):Ut(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),ly(t,e,r,i,n);case 7:return Ut(t,e,e.pendingProps,n),e.child;case 8:return Ut(t,e,e.pendingProps.children,n),e.child;case 12:return Ut(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Oe(Xu,r._currentValue),r._currentValue=o,s!==null)if(Fn(s.value,o)){if(s.children===i.children&&!Gt.current){e=br(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Ar(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Qh(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Qh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ut(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eo(e,n),i=In(i),r=r(i),e.flags|=1,Ut(t,e,r,n),e.child;case 14:return r=e.type,i=bn(r,e.pendingProps),i=bn(r.type,i),uy(t,e,r,i,n);case 15:return l0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bn(r,i),Ru(t,e),e.tag=1,Qt(r)?(t=!0,Qu(e)):t=!1,eo(e,n),s0(e,r,i),Jh(e,r,i,n),ef(null,e,r,!0,t,n);case 19:return f0(t,e,n);case 22:return u0(t,e,n)}throw Error(q(156,e.tag))};function C0(t,e){return nw(t,e)}function PR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new PR(t,e,n,r)}function Cp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CR(t){if(typeof t=="function")return Cp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gf)return 11;if(t===Qf)return 14}return 2}function gi(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Cp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case js:return Yi(n.children,i,s,e);case Kf:o=8,i|=8;break;case Eh:return t=wn(12,n,e,i|2),t.elementType=Eh,t.lanes=s,t;case Th:return t=wn(13,n,e,i),t.elementType=Th,t.lanes=s,t;case Ih:return t=wn(19,n,e,i),t.elementType=Ih,t.lanes=s,t;case F_:return Uc(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case j_:o=10;break e;case M_:o=9;break e;case Gf:o=11;break e;case Qf:o=14;break e;case Jr:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=wn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Yi(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function Uc(t,e,n,r){return t=wn(22,t,r,e),t.elementType=F_,t.lanes=n,t.stateNode={isHidden:!1},t}function Xd(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function Zd(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dd(0),this.expirationTimes=Dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kp(t,e,n,r,i,s,o,l,u){return t=new kR(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fp(s),t}function NR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function k0(t){if(!t)return Ei;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Qt(n))return kw(t,n,e)}return e}function N0(t,e,n,r,i,s,o,l,u){return t=kp(n,r,!0,t,i,s,o,l,u),t.context=k0(null),n=t.current,r=Bt(),i=mi(n),s=Ar(r,i),s.callback=e??null,fi(n,s,i),t.current.lanes=i,gl(t,i,r),Yt(t,r),t}function Bc(t,e,n,r){var i=e.current,s=Bt(),o=mi(i);return n=k0(n),e.context===null?e.context=n:e.pendingContext=n,e=Ar(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fi(i,e,o),t!==null&&(Mn(t,i,o,s),Tu(t,i,o)),o}function lc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ey(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Np(t,e){Ey(t,e),(t=t.alternate)&&Ey(t,e)}function bR(){return null}var b0=typeof reportError=="function"?reportError:function(t){console.error(t)};function bp(t){this._internalRoot=t}$c.prototype.render=bp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Bc(t,e,null,null)};$c.prototype.unmount=bp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ns(function(){Bc(null,t,null,null)}),e[kr]=null}};function $c(t){this._internalRoot=t}$c.prototype.unstable_scheduleHydration=function(t){if(t){var e=uw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Zr.length&&e!==0&&e<Zr[n].priority;n++);Zr.splice(n,0,t),n===0&&dw(t)}};function Dp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ty(){}function DR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=lc(o);s.call(c)}}var o=N0(e,r,t,0,null,!1,!1,"",Ty);return t._reactRootContainer=o,t[kr]=o.current,Wa(t.nodeType===8?t.parentNode:t),ns(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=lc(u);l.call(c)}}var u=kp(t,0,!1,null,null,!1,!1,"",Ty);return t._reactRootContainer=u,t[kr]=u.current,Wa(t.nodeType===8?t.parentNode:t),ns(function(){Bc(e,u,n,r)}),u}function qc(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=lc(o);l.call(u)}}Bc(e,o,t,i)}else o=DR(n,e,t,i,r);return lc(o)}aw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ma(e.pendingLanes);n!==0&&(Xf(e,n|1),Yt(e,Xe()),!(Ee&6)&&(po=Xe()+500,Pi()))}break;case 13:ns(function(){var r=Nr(t,1);if(r!==null){var i=Bt();Mn(r,t,1,i)}}),Np(t,1)}};Zf=function(t){if(t.tag===13){var e=Nr(t,134217728);if(e!==null){var n=Bt();Mn(e,t,134217728,n)}Np(t,134217728)}};lw=function(t){if(t.tag===13){var e=mi(t),n=Nr(t,e);if(n!==null){var r=Bt();Mn(n,t,e,r)}Np(t,e)}};uw=function(){return xe};cw=function(t,e){var n=xe;try{return xe=t,e()}finally{xe=n}};Dh=function(t,e,n){switch(e){case"input":if(Ah(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lc(r);if(!i)throw Error(q(90));B_(r),Ah(r,i)}}}break;case"textarea":z_(t,n);break;case"select":e=n.value,e!=null&&Ys(t,!!n.multiple,e,!1)}};Y_=Ap;J_=ns;var LR={usingClientEntryPoint:!1,Events:[vl,Bs,Lc,G_,Q_,Ap]},la={findFiberByHostInstance:$i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},OR={bundleType:la.bundleType,version:la.version,rendererPackageName:la.rendererPackageName,rendererConfig:la.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ew(t),t===null?null:t.stateNode},findFiberByHostInstance:la.findFiberByHostInstance||bR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{kc=cu.inject(OR),tr=cu}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LR;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dp(e))throw Error(q(200));return NR(t,e,null,n)};hn.createRoot=function(t,e){if(!Dp(t))throw Error(q(299));var n=!1,r="",i=b0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kp(t,1,!1,null,null,n,!1,r,i),t[kr]=e.current,Wa(t.nodeType===8?t.parentNode:t),new bp(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=ew(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return ns(t)};hn.hydrate=function(t,e,n){if(!zc(e))throw Error(q(200));return qc(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!Dp(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=b0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=N0(e,null,t,1,n??null,i,!1,s,o),t[kr]=e.current,Wa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $c(e)};hn.render=function(t,e,n){if(!zc(e))throw Error(q(200));return qc(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!zc(t))throw Error(q(40));return t._reactRootContainer?(ns(function(){qc(null,null,t,!1,function(){t._reactRootContainer=null,t[kr]=null})}),!0):!1};hn.unstable_batchedUpdates=Ap;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!zc(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return qc(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function D0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(D0)}catch(t){console.error(t)}}D0(),D_.exports=hn;var Lp=D_.exports;const VR=E_(Lp),jR=w_({__proto__:null,default:VR},[Lp]);var Iy=Lp;_h.createRoot=Iy.createRoot,_h.hydrateRoot=Iy.hydrateRoot;var Sy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},MR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},O0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=s>>2,m=(s&3)<<4|l>>4;let g=(l&15)<<2|c>>6,I=c&63;u||(I=64,o||(g=64)),r.push(n[h],n[m],n[g],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(L0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):MR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||m==null)throw new FR;const g=s<<2|l>>4;if(r.push(g),c!==64){const I=l<<4&240|c>>2;if(r.push(I),m!==64){const x=c<<6&192|m;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UR=function(t){const e=L0(t);return O0.encodeByteArray(e,!0)},uc=function(t){return UR(t).replace(/\./g,"")},V0=function(t){try{return O0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=()=>BR().__FIREBASE_DEFAULTS__,zR=()=>{if(typeof process>"u"||typeof Sy>"u")return;const t=Sy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&V0(t[1]);return e&&JSON.parse(e)},Hc=()=>{try{return $R()||zR()||qR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},j0=t=>{var e,n;return(n=(e=Hc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},HR=t=>{const e=j0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},M0=()=>{var t;return(t=Hc())===null||t===void 0?void 0:t.config},F0=t=>{var e;return(e=Hc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WR=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[uc(JSON.stringify(n)),uc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function GR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mt())}function QR(){var t;const e=(t=Hc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function U0(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function YR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function JR(){const t=Mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XR(){return!QR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B0(){try{return typeof indexedDB=="object"}catch{return!1}}function $0(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function ZR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="FirebaseError";class qn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eA,Object.setPrototypeOf(this,qn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ps.prototype.create)}}class ps{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?tA(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new qn(i,l,r)}}function tA(t,e){return t.replace(nA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const nA=/\{\$([^}]+)}/g;function rA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function tl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Ry(s)&&Ry(o)){if(!tl(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ry(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ya(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function va(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function iA(t,e){const n=new sA(t,e);return n.subscribe.bind(n)}class sA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=eh),i.error===void 0&&(i.error=eh),i.complete===void 0&&(i.complete=eh);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function eh(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA=1e3,lA=2,uA=4*60*60*1e3,cA=.5;function Ay(t,e=aA,n=lA){const r=e*Math.pow(n,t),i=Math.round(cA*r*(Math.random()-.5)*2);return Math.min(uA,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t){return t&&t._delegate?t._delegate:t}class Un{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fA(e))try{this.getOrInitializeService({instanceIdentifier:Ui})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ui){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ui){return this.instances.has(e)}getOptions(e=Ui){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:hA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ui){return this.component?this.component.multipleInstances?e:Ui:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hA(t){return t===Ui?void 0:t}function fA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new dA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ge||(ge={}));const mA={debug:ge.DEBUG,verbose:ge.VERBOSE,info:ge.INFO,warn:ge.WARN,error:ge.ERROR,silent:ge.SILENT},gA=ge.INFO,yA={[ge.DEBUG]:"log",[ge.VERBOSE]:"log",[ge.INFO]:"info",[ge.WARN]:"warn",[ge.ERROR]:"error"},vA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wc{constructor(e){this.name=e,this._logLevel=gA,this._logHandler=vA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ge.DEBUG,...e),this._logHandler(this,ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ge.VERBOSE,...e),this._logHandler(this,ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ge.INFO,...e),this._logHandler(this,ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ge.WARN,...e),this._logHandler(this,ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ge.ERROR,...e),this._logHandler(this,ge.ERROR,...e)}}const _A=(t,e)=>e.some(n=>t instanceof n);let xy,Py;function wA(){return xy||(xy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EA(){return Py||(Py=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const z0=new WeakMap,ff=new WeakMap,q0=new WeakMap,th=new WeakMap,Op=new WeakMap;function TA(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(yi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&z0.set(n,t)}).catch(()=>{}),Op.set(e,t),e}function IA(t){if(ff.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ff.set(t,e)}let pf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ff.get(t);if(e==="objectStoreNames")return t.objectStoreNames||q0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function SA(t){pf=t(pf)}function RA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(nh(this),e,...n);return q0.set(r,e.sort?e.sort():[e]),yi(r)}:EA().includes(t)?function(...e){return t.apply(nh(this),e),yi(z0.get(this))}:function(...e){return yi(t.apply(nh(this),e))}}function AA(t){return typeof t=="function"?RA(t):(t instanceof IDBTransaction&&IA(t),_A(t,wA())?new Proxy(t,pf):t)}function yi(t){if(t instanceof IDBRequest)return TA(t);if(th.has(t))return th.get(t);const e=AA(t);return e!==t&&(th.set(t,e),Op.set(e,t)),e}const nh=t=>Op.get(t);function H0(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=yi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(yi(o.result),u.oldVersion,u.newVersion,yi(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const xA=["get","getKey","getAll","getAllKeys","count"],PA=["put","add","delete","clear"],rh=new Map;function Cy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rh.get(e))return rh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=PA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||xA.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&u.done]))[0]};return rh.set(e,s),s}SA(t=>({...t,get:(e,n,r)=>Cy(e,n)||t.get(e,n,r),has:(e,n)=>!!Cy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mf="@firebase/app",ky="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Wc("@firebase/app"),NA="@firebase/app-compat",bA="@firebase/analytics-compat",DA="@firebase/analytics",LA="@firebase/app-check-compat",OA="@firebase/app-check",VA="@firebase/auth",jA="@firebase/auth-compat",MA="@firebase/database",FA="@firebase/database-compat",UA="@firebase/functions",BA="@firebase/functions-compat",$A="@firebase/installations",zA="@firebase/installations-compat",qA="@firebase/messaging",HA="@firebase/messaging-compat",WA="@firebase/performance",KA="@firebase/performance-compat",GA="@firebase/remote-config",QA="@firebase/remote-config-compat",YA="@firebase/storage",JA="@firebase/storage-compat",XA="@firebase/firestore",ZA="@firebase/vertexai-preview",ex="@firebase/firestore-compat",tx="firebase",nx="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="[DEFAULT]",rx={[mf]:"fire-core",[NA]:"fire-core-compat",[DA]:"fire-analytics",[bA]:"fire-analytics-compat",[OA]:"fire-app-check",[LA]:"fire-app-check-compat",[VA]:"fire-auth",[jA]:"fire-auth-compat",[MA]:"fire-rtdb",[FA]:"fire-rtdb-compat",[UA]:"fire-fn",[BA]:"fire-fn-compat",[$A]:"fire-iid",[zA]:"fire-iid-compat",[qA]:"fire-fcm",[HA]:"fire-fcm-compat",[WA]:"fire-perf",[KA]:"fire-perf-compat",[GA]:"fire-rc",[QA]:"fire-rc-compat",[YA]:"fire-gcs",[JA]:"fire-gcs-compat",[XA]:"fire-fst",[ex]:"fire-fst-compat",[ZA]:"fire-vertex","fire-js":"fire-js",[tx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Map,ix=new Map,yf=new Map;function Ny(t,e){try{t.container.addComponent(e)}catch(n){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ur(t){const e=t.name;if(yf.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;yf.set(e,t);for(const n of cc.values())Ny(n,t);for(const n of ix.values())Ny(n,t);return!0}function ms(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function er(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vi=new ps("app","Firebase",sx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=nx;function W0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw vi.create("bad-app-name",{appName:String(i)});if(n||(n=M0()),!n)throw vi.create("no-options");const s=cc.get(i);if(s){if(tl(n,s.options)&&tl(r,s.config))return s;throw vi.create("duplicate-app",{appName:i})}const o=new pA(i);for(const u of yf.values())o.addComponent(u);const l=new ox(n,r,o);return cc.set(i,l),l}function Vp(t=gf){const e=cc.get(t);if(!e&&t===gf&&M0())return W0();if(!e)throw vi.create("no-app",{appName:t});return e}function Tn(t,e,n){var r;let i=(r=rx[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(l.join(" "));return}ur(new Un(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="firebase-heartbeat-database",lx=1,nl="firebase-heartbeat-store";let ih=null;function K0(){return ih||(ih=H0(ax,lx,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nl)}catch(n){console.warn(n)}}}}).catch(t=>{throw vi.create("idb-open",{originalErrorMessage:t.message})})),ih}async function ux(t){try{const n=(await K0()).transaction(nl),r=await n.objectStore(nl).get(G0(t));return await n.done,r}catch(e){if(e instanceof qn)Dr.warn(e.message);else{const n=vi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(n.message)}}}async function by(t,e){try{const r=(await K0()).transaction(nl,"readwrite");await r.objectStore(nl).put(e,G0(t)),await r.done}catch(n){if(n instanceof qn)Dr.warn(n.message);else{const r=vi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dr.warn(r.message)}}}function G0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cx=1024,dx=30*24*60*60*1e3;class hx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new px(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Dy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=dx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Dy(),{heartbeatsToSend:r,unsentEntries:i}=fx(this._heartbeatsCache.heartbeats),s=uc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Dr.warn(n),""}}}function Dy(){return new Date().toISOString().substring(0,10)}function fx(t,e=cx){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ly(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ly(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class px{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return B0()?$0().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ux(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return by(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return by(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ly(t){return uc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t){ur(new Un("platform-logger",e=>new CA(e),"PRIVATE")),ur(new Un("heartbeat",e=>new hx(e),"PRIVATE")),Tn(mf,ky,t),Tn(mf,ky,"esm2017"),Tn("fire-js","")}mx("");function jp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Q0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gx=Q0,Y0=new ps("auth","Firebase",Q0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=new Wc("@firebase/auth");function yx(t,...e){dc.logLevel<=ge.WARN&&dc.warn(`Auth (${Ao}): ${t}`,...e)}function Cu(t,...e){dc.logLevel<=ge.ERROR&&dc.error(`Auth (${Ao}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t,...e){throw Mp(t,...e)}function rr(t,...e){return Mp(t,...e)}function J0(t,e,n){const r=Object.assign(Object.assign({},gx()),{[e]:n});return new ps("auth","Firebase",r).create(e,{appName:t.name})}function xr(t){return J0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Y0.create(t,...e)}function se(t,e,...n){if(!t)throw Mp(e,...n)}function Tr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Cu(e),new Error(e)}function Lr(t,e){t||Tr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vx(){return Oy()==="http:"||Oy()==="https:"}function Oy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vx()||U0()||"connection"in navigator)?navigator.onLine:!0}function wx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e,n){this.shortDelay=e,this.longDelay=n,Lr(n>e,"Short delay should be less than long delay!"),this.isMobile=GR()||YR()}get(){return _x()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t,e){Lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Tr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Tr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Tr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new El(3e4,6e4);function Ci(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function ki(t,e,n,r,i={}){return Z0(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=wl(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),X0.fetch()(eE(t,t.config.apiHost,n,l),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},s))})}async function Z0(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ex),e);try{const i=new Sx(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw du(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw du(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw du(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw du(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw J0(t,h,c);Bn(t,h)}}catch(i){if(i instanceof qn)throw i;Bn(t,"network-request-failed",{message:String(i)})}}async function Tl(t,e,n,r,i={}){const s=await ki(t,e,n,r,i);return"mfaPendingCredential"in s&&Bn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function eE(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Fp(t.config,i):`${t.config.apiScheme}://${i}`}function Ix(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Sx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(rr(this.auth,"network-request-failed")),Tx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function du(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=rr(t,e,r);return i.customData._tokenResponse=n,i}function Vy(t){return t!==void 0&&t.enterprise!==void 0}class Rx{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ix(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function Ax(t,e){return ki(t,"GET","/v2/recaptchaConfig",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(t,e){return ki(t,"POST","/v1/accounts:delete",e)}async function tE(t,e){return ki(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Px(t,e=!1){const n=ft(t),r=await n.getIdToken(e),i=Up(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Da(sh(i.auth_time)),issuedAtTime:Da(sh(i.iat)),expirationTime:Da(sh(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function sh(t){return Number(t)*1e3}function Up(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Cu("JWT malformed, contained fewer than 3 sections"),null;try{const i=V0(n);return i?JSON.parse(i):(Cu("Failed to decode base64 JWT payload"),null)}catch(i){return Cu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function jy(t){const e=Up(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof qn&&Cx(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Cx({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Da(this.lastLoginAt),this.creationTime=Da(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await rl(t,tE(n,{idToken:r}));se(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?nE(s.providerUserInfo):[],l=bx(t.providerData,o),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new _f(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function Nx(t){const e=ft(t);await hc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bx(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function nE(t){return t.map(e=>{var{providerId:n}=e,r=jp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(t,e){const n=await Z0(t,{},async()=>{const r=wl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=eE(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",X0.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Lx(t,e){return ki(t,"POST","/v2/accounts:revokeToken",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=jy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Dx(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new no;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return Tr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ir{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=jp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _f(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await rl(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Px(this,e)}reload(){return Nx(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(er(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await rl(this,xx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,u,c,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=n.photoURL)!==null&&o!==void 0?o:void 0,P=(l=n.tenantId)!==null&&l!==void 0?l:void 0,O=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,S=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:A,emailVerified:j,isAnonymous:$,providerData:k,stsTokenManager:T}=n;se(A&&T,e,"internal-error");const y=no.fromJSON(this.name,T);se(typeof A=="string",e,"internal-error"),Qr(m,e.name),Qr(g,e.name),se(typeof j=="boolean",e,"internal-error"),se(typeof $=="boolean",e,"internal-error"),Qr(I,e.name),Qr(x,e.name),Qr(P,e.name),Qr(O,e.name),Qr(S,e.name),Qr(w,e.name);const _=new Ir({uid:A,auth:e,email:g,emailVerified:j,displayName:m,isAnonymous:$,photoURL:x,phoneNumber:I,tenantId:P,stsTokenManager:y,createdAt:S,lastLoginAt:w});return k&&Array.isArray(k)&&(_.providerData=k.map(E=>Object.assign({},E))),O&&(_._redirectEventId=O),_}static async _fromIdTokenResponse(e,n,r=!1){const i=new no;i.updateFromServerResponse(n);const s=new Ir({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await hc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];se(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?nE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new no;l.updateFromIdToken(r);const u=new Ir({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _f(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=new Map;function Sr(t){Lr(t instanceof Function,"Expected a class definition");let e=My.get(t);return e?(Lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,My.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rE.type="NONE";const Fy=rE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(t,e,n){return`firebase:${t}:${e}:${n}`}class ro{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ku(this.userKey,i.apiKey,s),this.fullPersistenceKey=ku("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ir._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ro(Sr(Fy),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||Sr(Fy);const o=ku(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const h=await c._get(o);if(h){const m=Ir._fromJSON(e,h);c!==s&&(l=m),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ro(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ro(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uE(e))return"Blackberry";if(cE(e))return"Webos";if(sE(e))return"Safari";if((e.includes("chrome/")||oE(e))&&!e.includes("edge/"))return"Chrome";if(lE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function iE(t=Mt()){return/firefox\//i.test(t)}function sE(t=Mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oE(t=Mt()){return/crios\//i.test(t)}function aE(t=Mt()){return/iemobile/i.test(t)}function lE(t=Mt()){return/android/i.test(t)}function uE(t=Mt()){return/blackberry/i.test(t)}function cE(t=Mt()){return/webos/i.test(t)}function Bp(t=Mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ox(t=Mt()){var e;return Bp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Vx(){return JR()&&document.documentMode===10}function dE(t=Mt()){return Bp(t)||lE(t)||cE(t)||uE(t)||/windows phone/i.test(t)||aE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(t,e=[]){let n;switch(t){case"Browser":n=Uy(Mt());break;case"Worker":n=`${Uy(Mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ao}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(t,e={}){return ki(t,"GET","/v2/passwordPolicy",Ci(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=6;class Ux{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Fx,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new By(this),this.idTokenSubscription=new By(this),this.beforeStateQueue=new jx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Sr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await ro.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tE(this,{idToken:e}),r=await Ir._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(er(this.app))return Promise.reject(xr(this));const n=e?ft(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return er(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return er(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Sr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Mx(this),n=new Ux(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ps("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Lx(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Sr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await ro.create(this,[Sr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&yx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gs(t){return ft(t)}class By{constructor(e){this.auth=e,this.observer=null,this.addObserver=iA(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $x(t){Kc=t}function fE(t){return Kc.loadJS(t)}function zx(){return Kc.recaptchaEnterpriseScript}function qx(){return Kc.gapiScript}function Hx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Wx="recaptcha-enterprise",Kx="NO_RECAPTCHA";class Gx{constructor(e){this.type=Wx,this.auth=gs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Ax(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new Rx(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;Vy(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Kx)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&Vy(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=zx();u.length!==0&&(u+=l),fE(u).then(()=>{i(l,s,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function $y(t,e,n,r=!1){const i=new Gx(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function wf(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await $y(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await $y(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qx(t,e){const n=ms(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(tl(s,e??{}))return i;Bn(i,"already-initialized")}return n.initialize({options:e})}function Yx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Sr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Jx(t,e,n){const r=gs(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=pE(e),{host:o,port:l}=Xx(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),Zx()}function pE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Xx(t){const e=pE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:zy(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:zy(o)}}}function zy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Zx(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Tr("not implemented")}_getIdTokenResponse(e){return Tr("not implemented")}_linkToIdToken(e,n){return Tr("not implemented")}_getReauthenticationResolver(e){return Tr("not implemented")}}async function eP(t,e){return ki(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tP(t,e){return Tl(t,"POST","/v1/accounts:signInWithPassword",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(t,e){return Tl(t,"POST","/v1/accounts:signInWithEmailLink",Ci(t,e))}async function rP(t,e){return Tl(t,"POST","/v1/accounts:signInWithEmailLink",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends $p{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new il(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new il(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wf(e,n,"signInWithPassword",tP);case"emailLink":return nP(e,{email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return wf(e,r,"signUpPassword",eP);case"emailLink":return rP(e,{idToken:n,email:this._email,oobCode:this._password});default:Bn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t,e){return Tl(t,"POST","/v1/accounts:signInWithIdp",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP="http://localhost";class rs extends $p{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Bn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=jp(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new rs(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,io(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:iP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=wl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oP(t){const e=ya(va(t)).link,n=e?ya(va(e)).deep_link_id:null,r=ya(va(t)).deep_link_id;return(r?ya(va(r)).link:null)||r||n||e||t}class zp{constructor(e){var n,r,i,s,o,l;const u=ya(va(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,m=sP((i=u.mode)!==null&&i!==void 0?i:null);se(c&&h&&m,"argument-error"),this.apiKey=c,this.operation=m,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=oP(e);try{return new zp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,n){return il._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=zp.parseLink(n);return se(r,"argument-error"),il._fromEmailAndCode(e,r.code,r.tenantId)}}xo.PROVIDER_ID="password";xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il extends mE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Il{constructor(){super("facebook.com")}static credential(e){return rs._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ti.credential(e.oauthAccessToken)}catch{return null}}}ti.FACEBOOK_SIGN_IN_METHOD="facebook.com";ti.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends Il{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rs._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ni.credential(n,r)}catch{return null}}}ni.GOOGLE_SIGN_IN_METHOD="google.com";ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends Il{constructor(){super("github.com")}static credential(e){return rs._fromParams({providerId:ri.PROVIDER_ID,signInMethod:ri.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ri.credentialFromTaggedObject(e)}static credentialFromError(e){return ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ri.credential(e.oauthAccessToken)}catch{return null}}}ri.GITHUB_SIGN_IN_METHOD="github.com";ri.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends Il{constructor(){super("twitter.com")}static credential(e,n){return rs._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ii.credential(n,r)}catch{return null}}}ii.TWITTER_SIGN_IN_METHOD="twitter.com";ii.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aP(t,e){return Tl(t,"POST","/v1/accounts:signUp",Ci(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Ir._fromIdTokenResponse(e,r,i),o=qy(r);return new is({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=qy(r);return new is({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function qy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends qn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,fc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new fc(e,n,r,i)}}function gE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?fc._fromErrorAndOperation(t,s,e,r):s})}async function lP(t,e,n=!1){const r=await rl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return is._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uP(t,e,n=!1){const{auth:r}=t;if(er(r.app))return Promise.reject(xr(r));const i="reauthenticate";try{const s=await rl(t,gE(r,i,e,t),n);se(s.idToken,r,"internal-error");const o=Up(s.idToken);se(o,r,"internal-error");const{sub:l}=o;return se(t.uid===l,r,"user-mismatch"),is._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yE(t,e,n=!1){if(er(t.app))return Promise.reject(xr(t));const r="signIn",i=await gE(t,r,e),s=await is._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function cP(t,e){return yE(gs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vE(t){const e=gs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dP(t,e,n){if(er(t.app))return Promise.reject(xr(t));const r=gs(t),o=await wf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aP).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&vE(t),u}),l=await is._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function hP(t,e,n){return er(t.app)?Promise.reject(xr(t)):cP(ft(t),xo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vE(t),r})}function fP(t,e,n,r){return ft(t).onIdTokenChanged(e,n,r)}function pP(t,e,n){return ft(t).beforeAuthStateChanged(e,n)}function _E(t,e,n,r){return ft(t).onAuthStateChanged(e,n,r)}function mP(t){return ft(t).signOut()}const pc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(pc,"1"),this.storage.removeItem(pc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=1e3,yP=10;class EE extends wE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=dE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Vx()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,yP):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},gP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}EE.type="LOCAL";const vP=EE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE extends wE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TE.type="SESSION";const IE=TE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Gc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),u=await _P(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Gc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const c=qp("",20);i.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(g.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function EP(t){ir().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SE(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function TP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function SP(){return SE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE="firebaseLocalStorageDb",RP=1,mc="firebaseLocalStorage",AE="fbase_key";class Sl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Qc(t,e){return t.transaction([mc],e?"readwrite":"readonly").objectStore(mc)}function AP(){const t=indexedDB.deleteDatabase(RE);return new Sl(t).toPromise()}function Ef(){const t=indexedDB.open(RE,RP);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(mc,{keyPath:AE})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(mc)?e(r):(r.close(),await AP(),e(await Ef()))})})}async function Hy(t,e,n){const r=Qc(t,!0).put({[AE]:e,value:n});return new Sl(r).toPromise()}async function xP(t,e){const n=Qc(t,!1).get(e),r=await new Sl(n).toPromise();return r===void 0?null:r.value}function Wy(t,e){const n=Qc(t,!0).delete(e);return new Sl(n).toPromise()}const PP=800,CP=3;class xE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ef(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>CP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return SE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gc._getInstance(SP()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TP(),!this.activeServiceWorker)return;this.sender=new wP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ef();return await Hy(e,pc,"1"),await Wy(e,pc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Hy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Wy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Qc(i,!1).getAll();return new Sl(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xE.type="LOCAL";const kP=xE;new El(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(t,e){return e?Sr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp extends $p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bP(t){return yE(t.auth,new Hp(t),t.bypassAuthState)}function DP(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),uP(n,new Hp(t),t.bypassAuthState)}async function LP(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),lP(n,new Hp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bP;case"linkViaPopup":case"linkViaRedirect":return LP;case"reauthViaPopup":case"reauthViaRedirect":return DP;default:Bn(this.auth,"internal-error")}}resolve(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=new El(2e3,1e4);class Gs extends PE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Gs.currentPopupAction&&Gs.currentPopupAction.cancel(),Gs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){Lr(this.filter.length===1,"Popup operations only handle one event");const e=qp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(rr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(rr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Gs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(rr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OP.get())};e()}}Gs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP="pendingRedirect",Nu=new Map;class jP extends PE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Nu.get(this.auth._key());if(!e){try{const r=await MP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Nu.set(this.auth._key(),e)}return this.bypassAuthState||Nu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MP(t,e){const n=BP(e),r=UP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function FP(t,e){Nu.set(t._key(),e)}function UP(t){return Sr(t._redirectPersistence)}function BP(t){return ku(VP,t.config.apiKey,t.name)}async function $P(t,e,n=!1){if(er(t.app))return Promise.reject(xr(t));const r=gs(t),i=NP(r,e),o=await new jP(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=10*60*1e3;class qP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(rr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ky(e))}saveEventToCache(e){this.cachedEventUids.add(Ky(e)),this.lastProcessedEventTime=Date.now()}}function Ky(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(t,e={}){return ki(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GP=/^https?/;async function QP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await WP(t);for(const n of e)try{if(YP(n))return}catch{}Bn(t,"unauthorized-domain")}function YP(t){const e=vf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!GP.test(n))return!1;if(KP.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=new El(3e4,6e4);function Gy(){const t=ir().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function XP(t){return new Promise((e,n)=>{var r,i,s;function o(){Gy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Gy(),n(rr(t,"network-request-failed"))},timeout:JP.get()})}if(!((i=(r=ir().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=ir().gapi)===null||s===void 0)&&s.load)o();else{const l=Hx("iframefcb");return ir()[l]=()=>{gapi.load?o():n(rr(t,"network-request-failed"))},fE(`${qx()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw bu=null,e})}let bu=null;function ZP(t){return bu=bu||XP(t),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=new El(5e3,15e3),tC="__/auth/iframe",nC="emulator/auth/iframe",rC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sC(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fp(e,nC):`https://${t.config.authDomain}/${tC}`,r={apiKey:e.apiKey,appName:t.name,v:Ao},i=iC.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${wl(r).slice(1)}`}async function oC(t){const e=await ZP(t),n=ir().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:sC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rC,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=rr(t,"network-request-failed"),l=ir().setTimeout(()=>{s(o)},eC.get());function u(){ir().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},lC=500,uC=600,cC="_blank",dC="http://localhost";class Qy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function hC(t,e,n,r=lC,i=uC){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},aC),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Mt().toLowerCase();n&&(l=oE(c)?cC:n),iE(c)&&(e=e||dC,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[I,x])=>`${g}${I}=${x},`,"");if(Ox(c)&&l!=="_self")return fC(e||"",l),new Qy(null);const m=window.open(e||"",l,h);se(m,t,"popup-blocked");try{m.focus()}catch{}return new Qy(m)}function fC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="__/auth/handler",mC="emulator/auth/handler",gC=encodeURIComponent("fac");async function Yy(t,e,n,r,i,s){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ao,eventId:i};if(e instanceof mE){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Il){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${gC}=${encodeURIComponent(u)}`:"";return`${yC(t)}?${wl(l).slice(1)}${c}`}function yC({config:t}){return t.emulator?Fp(t,mC):`https://${t.authDomain}/${pC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="webStorageSupport";class vC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IE,this._completeRedirectFn=$P,this._overrideRedirectResult=FP}async _openPopup(e,n,r,i){var s;Lr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Yy(e,n,r,vf(),i);return hC(e,o,qp())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Yy(e,n,r,vf(),i);return EP(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Lr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await oC(e),r=new qP(e);return n.register("authEvent",i=>(se(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(oh,{type:oh},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[oh];o!==void 0&&n(!!o),Bn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dE()||sE()||Bp()}}const _C=vC;var Jy="@firebase/auth",Xy="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TC(t){ur(new Un("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hE(t)},c=new Bx(r,i,s,u);return Yx(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ur(new Un("auth-internal",e=>{const n=gs(e.getProvider("auth").getImmediate());return(r=>new wC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tn(Jy,Xy,EC(t)),Tn(Jy,Xy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=5*60,SC=F0("authIdTokenMaxAge")||IC;let Zy=null;const RC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>SC)return;const i=n==null?void 0:n.token;Zy!==i&&(Zy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function AC(t=Vp()){const e=ms(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Qx(t,{popupRedirectResolver:_C,persistence:[kP,vP,IE]}),r=F0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=RC(s.toString());pP(n,o,()=>o(n.currentUser)),fP(n,l=>o(l))}}const i=j0("auth");return i&&Jx(n,`http://${i}`),n}function xC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$x({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=rr("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",xC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TC("Browser");var PC="firebase",CC="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn(PC,CC,"app");var ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ji,kE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function _(){}_.prototype=y.prototype,T.D=y.prototype,T.prototype=new _,T.prototype.constructor=T,T.C=function(E,C,b){for(var R=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)R[pe-2]=arguments[pe];return y.prototype[C].apply(E,R)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var C=0;16>C;++C)E[C]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(C=0;16>C;++C)E[C]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=T.g[0],_=T.g[1],C=T.g[2];var b=T.g[3],R=y+(b^_&(C^b))+E[0]+3614090360&4294967295;y=_+(R<<7&4294967295|R>>>25),R=b+(C^y&(_^C))+E[1]+3905402710&4294967295,b=y+(R<<12&4294967295|R>>>20),R=C+(_^b&(y^_))+E[2]+606105819&4294967295,C=b+(R<<17&4294967295|R>>>15),R=_+(y^C&(b^y))+E[3]+3250441966&4294967295,_=C+(R<<22&4294967295|R>>>10),R=y+(b^_&(C^b))+E[4]+4118548399&4294967295,y=_+(R<<7&4294967295|R>>>25),R=b+(C^y&(_^C))+E[5]+1200080426&4294967295,b=y+(R<<12&4294967295|R>>>20),R=C+(_^b&(y^_))+E[6]+2821735955&4294967295,C=b+(R<<17&4294967295|R>>>15),R=_+(y^C&(b^y))+E[7]+4249261313&4294967295,_=C+(R<<22&4294967295|R>>>10),R=y+(b^_&(C^b))+E[8]+1770035416&4294967295,y=_+(R<<7&4294967295|R>>>25),R=b+(C^y&(_^C))+E[9]+2336552879&4294967295,b=y+(R<<12&4294967295|R>>>20),R=C+(_^b&(y^_))+E[10]+4294925233&4294967295,C=b+(R<<17&4294967295|R>>>15),R=_+(y^C&(b^y))+E[11]+2304563134&4294967295,_=C+(R<<22&4294967295|R>>>10),R=y+(b^_&(C^b))+E[12]+1804603682&4294967295,y=_+(R<<7&4294967295|R>>>25),R=b+(C^y&(_^C))+E[13]+4254626195&4294967295,b=y+(R<<12&4294967295|R>>>20),R=C+(_^b&(y^_))+E[14]+2792965006&4294967295,C=b+(R<<17&4294967295|R>>>15),R=_+(y^C&(b^y))+E[15]+1236535329&4294967295,_=C+(R<<22&4294967295|R>>>10),R=y+(C^b&(_^C))+E[1]+4129170786&4294967295,y=_+(R<<5&4294967295|R>>>27),R=b+(_^C&(y^_))+E[6]+3225465664&4294967295,b=y+(R<<9&4294967295|R>>>23),R=C+(y^_&(b^y))+E[11]+643717713&4294967295,C=b+(R<<14&4294967295|R>>>18),R=_+(b^y&(C^b))+E[0]+3921069994&4294967295,_=C+(R<<20&4294967295|R>>>12),R=y+(C^b&(_^C))+E[5]+3593408605&4294967295,y=_+(R<<5&4294967295|R>>>27),R=b+(_^C&(y^_))+E[10]+38016083&4294967295,b=y+(R<<9&4294967295|R>>>23),R=C+(y^_&(b^y))+E[15]+3634488961&4294967295,C=b+(R<<14&4294967295|R>>>18),R=_+(b^y&(C^b))+E[4]+3889429448&4294967295,_=C+(R<<20&4294967295|R>>>12),R=y+(C^b&(_^C))+E[9]+568446438&4294967295,y=_+(R<<5&4294967295|R>>>27),R=b+(_^C&(y^_))+E[14]+3275163606&4294967295,b=y+(R<<9&4294967295|R>>>23),R=C+(y^_&(b^y))+E[3]+4107603335&4294967295,C=b+(R<<14&4294967295|R>>>18),R=_+(b^y&(C^b))+E[8]+1163531501&4294967295,_=C+(R<<20&4294967295|R>>>12),R=y+(C^b&(_^C))+E[13]+2850285829&4294967295,y=_+(R<<5&4294967295|R>>>27),R=b+(_^C&(y^_))+E[2]+4243563512&4294967295,b=y+(R<<9&4294967295|R>>>23),R=C+(y^_&(b^y))+E[7]+1735328473&4294967295,C=b+(R<<14&4294967295|R>>>18),R=_+(b^y&(C^b))+E[12]+2368359562&4294967295,_=C+(R<<20&4294967295|R>>>12),R=y+(_^C^b)+E[5]+4294588738&4294967295,y=_+(R<<4&4294967295|R>>>28),R=b+(y^_^C)+E[8]+2272392833&4294967295,b=y+(R<<11&4294967295|R>>>21),R=C+(b^y^_)+E[11]+1839030562&4294967295,C=b+(R<<16&4294967295|R>>>16),R=_+(C^b^y)+E[14]+4259657740&4294967295,_=C+(R<<23&4294967295|R>>>9),R=y+(_^C^b)+E[1]+2763975236&4294967295,y=_+(R<<4&4294967295|R>>>28),R=b+(y^_^C)+E[4]+1272893353&4294967295,b=y+(R<<11&4294967295|R>>>21),R=C+(b^y^_)+E[7]+4139469664&4294967295,C=b+(R<<16&4294967295|R>>>16),R=_+(C^b^y)+E[10]+3200236656&4294967295,_=C+(R<<23&4294967295|R>>>9),R=y+(_^C^b)+E[13]+681279174&4294967295,y=_+(R<<4&4294967295|R>>>28),R=b+(y^_^C)+E[0]+3936430074&4294967295,b=y+(R<<11&4294967295|R>>>21),R=C+(b^y^_)+E[3]+3572445317&4294967295,C=b+(R<<16&4294967295|R>>>16),R=_+(C^b^y)+E[6]+76029189&4294967295,_=C+(R<<23&4294967295|R>>>9),R=y+(_^C^b)+E[9]+3654602809&4294967295,y=_+(R<<4&4294967295|R>>>28),R=b+(y^_^C)+E[12]+3873151461&4294967295,b=y+(R<<11&4294967295|R>>>21),R=C+(b^y^_)+E[15]+530742520&4294967295,C=b+(R<<16&4294967295|R>>>16),R=_+(C^b^y)+E[2]+3299628645&4294967295,_=C+(R<<23&4294967295|R>>>9),R=y+(C^(_|~b))+E[0]+4096336452&4294967295,y=_+(R<<6&4294967295|R>>>26),R=b+(_^(y|~C))+E[7]+1126891415&4294967295,b=y+(R<<10&4294967295|R>>>22),R=C+(y^(b|~_))+E[14]+2878612391&4294967295,C=b+(R<<15&4294967295|R>>>17),R=_+(b^(C|~y))+E[5]+4237533241&4294967295,_=C+(R<<21&4294967295|R>>>11),R=y+(C^(_|~b))+E[12]+1700485571&4294967295,y=_+(R<<6&4294967295|R>>>26),R=b+(_^(y|~C))+E[3]+2399980690&4294967295,b=y+(R<<10&4294967295|R>>>22),R=C+(y^(b|~_))+E[10]+4293915773&4294967295,C=b+(R<<15&4294967295|R>>>17),R=_+(b^(C|~y))+E[1]+2240044497&4294967295,_=C+(R<<21&4294967295|R>>>11),R=y+(C^(_|~b))+E[8]+1873313359&4294967295,y=_+(R<<6&4294967295|R>>>26),R=b+(_^(y|~C))+E[15]+4264355552&4294967295,b=y+(R<<10&4294967295|R>>>22),R=C+(y^(b|~_))+E[6]+2734768916&4294967295,C=b+(R<<15&4294967295|R>>>17),R=_+(b^(C|~y))+E[13]+1309151649&4294967295,_=C+(R<<21&4294967295|R>>>11),R=y+(C^(_|~b))+E[4]+4149444226&4294967295,y=_+(R<<6&4294967295|R>>>26),R=b+(_^(y|~C))+E[11]+3174756917&4294967295,b=y+(R<<10&4294967295|R>>>22),R=C+(y^(b|~_))+E[2]+718787259&4294967295,C=b+(R<<15&4294967295|R>>>17),R=_+(b^(C|~y))+E[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(C+(R<<21&4294967295|R>>>11))&4294967295,T.g[2]=T.g[2]+C&4294967295,T.g[3]=T.g[3]+b&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var _=y-this.blockSize,E=this.B,C=this.h,b=0;b<y;){if(C==0)for(;b<=_;)i(this,T,b),b+=this.blockSize;if(typeof T=="string"){for(;b<y;)if(E[C++]=T.charCodeAt(b++),C==this.blockSize){i(this,E),C=0;break}}else for(;b<y;)if(E[C++]=T[b++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var _=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=_&255,_/=256;for(this.u(T),T=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)T[_++]=this.g[y]>>>E&255;return T};function s(T,y){var _=l;return Object.prototype.hasOwnProperty.call(_,T)?_[T]:_[T]=y(T)}function o(T,y){this.h=y;for(var _=[],E=!0,C=T.length-1;0<=C;C--){var b=T[C]|0;E&&b==y||(_[C]=b,E=!1)}this.g=_}var l={};function u(T){return-128<=T&&128>T?s(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return O(c(-T));for(var y=[],_=1,E=0;T>=_;E++)y[E]=T/_|0,_*=4294967296;return new o(y,0)}function h(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return O(h(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(y,8)),E=m,C=0;C<T.length;C+=8){var b=Math.min(8,T.length-C),R=parseInt(T.substring(C,C+b),y);8>b?(b=c(Math.pow(y,b)),E=E.j(b).add(c(R))):(E=E.j(_),E=E.add(c(R)))}return E}var m=u(0),g=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-O(this).m();for(var T=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);T+=(0<=E?E:4294967296+E)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(P(this))return"-"+O(this).toString(T);for(var y=c(Math.pow(T,6)),_=this,E="";;){var C=j(_,y).g;_=S(_,C.j(y));var b=((0<_.g.length?_.g[0]:_.h)>>>0).toString(T);if(_=C,x(_))return b+E;for(;6>b.length;)b="0"+b;E=b+E}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function P(T){return T.h==-1}t.l=function(T){return T=S(this,T),P(T)?-1:x(T)?0:1};function O(T){for(var y=T.g.length,_=[],E=0;E<y;E++)_[E]=~T.g[E];return new o(_,~T.h).add(g)}t.abs=function(){return P(this)?O(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),_=[],E=0,C=0;C<=y;C++){var b=E+(this.i(C)&65535)+(T.i(C)&65535),R=(b>>>16)+(this.i(C)>>>16)+(T.i(C)>>>16);E=R>>>16,b&=65535,R&=65535,_[C]=R<<16|b}return new o(_,_[_.length-1]&-2147483648?-1:0)};function S(T,y){return T.add(O(y))}t.j=function(T){if(x(this)||x(T))return m;if(P(this))return P(T)?O(this).j(O(T)):O(O(this).j(T));if(P(T))return O(this.j(O(T)));if(0>this.l(I)&&0>T.l(I))return c(this.m()*T.m());for(var y=this.g.length+T.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<T.g.length;C++){var b=this.i(E)>>>16,R=this.i(E)&65535,pe=T.i(C)>>>16,At=T.i(C)&65535;_[2*E+2*C]+=R*At,w(_,2*E+2*C),_[2*E+2*C+1]+=b*At,w(_,2*E+2*C+1),_[2*E+2*C+1]+=R*pe,w(_,2*E+2*C+1),_[2*E+2*C+2]+=b*pe,w(_,2*E+2*C+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function w(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function A(T,y){this.g=T,this.h=y}function j(T,y){if(x(y))throw Error("division by zero");if(x(T))return new A(m,m);if(P(T))return y=j(O(T),y),new A(O(y.g),O(y.h));if(P(y))return y=j(T,O(y)),new A(O(y.g),y.h);if(30<T.g.length){if(P(T)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var _=g,E=y;0>=E.l(T);)_=$(_),E=$(E);var C=k(_,1),b=k(E,1);for(E=k(E,2),_=k(_,2);!x(E);){var R=b.add(E);0>=R.l(T)&&(C=C.add(_),b=R),E=k(E,1),_=k(_,1)}return y=S(T,C.j(y)),new A(C,y)}for(C=m;0<=T.l(y);){for(_=Math.max(1,Math.floor(T.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),b=c(_),R=b.j(y);P(R)||0<R.l(T);)_-=E,b=c(_),R=b.j(y);x(b)&&(b=g),C=C.add(b),T=S(T,R)}return new A(C,T)}t.A=function(T){return j(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&T.i(E);return new o(_,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|T.i(E);return new o(_,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^T.i(E);return new o(_,this.h^T.h)};function $(T){for(var y=T.g.length+1,_=[],E=0;E<y;E++)_[E]=T.i(E)<<1|T.i(E-1)>>>31;return new o(_,T.h)}function k(T,y){var _=y>>5;y%=32;for(var E=T.g.length-_,C=[],b=0;b<E;b++)C[b]=0<y?T.i(b+_)>>>y|T.i(b+_+1)<<32-y:T.i(b+_);return new o(C,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,kE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Ji=o}).apply(typeof ev<"u"?ev:typeof self<"u"?self:typeof window<"u"?window:{});var hu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var NE,bE,_a,DE,Du,Tf,LE,OE,VE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,p){return a==Array.prototype||a==Object.prototype||(a[d]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof hu=="object"&&hu];for(var d=0;d<a.length;++d){var p=a[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var p=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var V=a[v];if(!(V in p))break e;p=p[V]}a=a[a.length-1],v=p[a],d=d(v),d!=v&&d!=null&&e(p,a,{configurable:!0,writable:!0,value:d})}}function s(a,d){a instanceof String&&(a+="");var p=0,v=!1,V={next:function(){if(!v&&p<a.length){var F=p++;return{value:d(F,a[F]),done:!1}}return v=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}i("Array.prototype.values",function(a){return a||function(){return s(this,function(d,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function h(a,d,p){return a.call.apply(a.bind,arguments)}function m(a,d,p){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,v),a.apply(d,V)}}return function(){return a.apply(d,arguments)}}function g(a,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function I(a,d){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function x(a,d){function p(){}p.prototype=d.prototype,a.aa=d.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(v,V,F){for(var W=Array(arguments.length-2),be=2;be<arguments.length;be++)W[be-2]=arguments[be];return d.prototype[V].apply(v,W)}}function P(a){const d=a.length;if(0<d){const p=Array(d);for(let v=0;v<d;v++)p[v]=a[v];return p}return[]}function O(a,d){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(u(v)){const V=a.length||0,F=v.length||0;a.length=V+F;for(let W=0;W<F;W++)a[V+W]=v[W]}else a.push(v)}}class S{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function w(a){return/^[\s\xa0]*$/.test(a)}function A(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function j(a){return j[" "](a),a}j[" "]=function(){};var $=A().indexOf("Gecko")!=-1&&!(A().toLowerCase().indexOf("webkit")!=-1&&A().indexOf("Edge")==-1)&&!(A().indexOf("Trident")!=-1||A().indexOf("MSIE")!=-1)&&A().indexOf("Edge")==-1;function k(a,d,p){for(const v in a)d.call(p,a[v],v,a)}function T(a,d){for(const p in a)d.call(void 0,a[p],p,a)}function y(a){const d={};for(const p in a)d[p]=a[p];return d}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,d){let p,v;for(let V=1;V<arguments.length;V++){v=arguments[V];for(p in v)a[p]=v[p];for(let F=0;F<_.length;F++)p=_[F],Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}}function C(a){var d=1;a=a.split(":");const p=[];for(;0<d&&a.length;)p.push(a.shift()),d--;return a.length&&p.push(a.join(":")),p}function b(a){l.setTimeout(()=>{throw a},0)}function R(){var a=ne;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class pe{constructor(){this.h=this.g=null}add(d,p){const v=At.get();v.set(d,p),this.h?this.h.next=v:this.g=v,this.h=v}}var At=new S(()=>new Hn,a=>a.reset());class Hn{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,G=!1,ne=new pe,ie=()=>{const a=l.Promise.resolve(void 0);Re=()=>{a.then(we)}};var we=()=>{for(var a;a=R();){try{a.h.call(a.g)}catch(p){b(p)}var d=At;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}G=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ne(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Ne.prototype.h=function(){this.defaultPrevented=!0};var rt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,d),l.removeEventListener("test",p,d)}catch{}return a}();function pt(a,d){if(Ne.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if($){e:{try{j(d.nodeName);var V=!0;break e}catch{}V=!1}V||(d=null)}}else p=="mouseover"?d=a.fromElement:p=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:mt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&pt.aa.h.call(this)}}x(pt,Ne);var mt={2:"touch",3:"pen",4:"mouse"};pt.prototype.h=function(){pt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var An="closure_listenable_"+(1e6*Math.random()|0),Vo=0;function vd(a,d,p,v,V){this.listener=a,this.proxy=null,this.src=d,this.type=p,this.capture=!!v,this.ha=V,this.key=++Vo,this.da=this.fa=!1}function Es(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ts(a){this.src=a,this.g={},this.h=0}Ts.prototype.add=function(a,d,p,v,V){var F=a.toString();a=this.g[F],a||(a=this.g[F]=[],this.h++);var W=Wn(a,d,v,V);return-1<W?(d=a[W],p||(d.fa=!1)):(d=new vd(d,this.src,F,!!v,V),d.fa=p,a.push(d)),d};function it(a,d){var p=d.type;if(p in a.g){var v=a.g[p],V=Array.prototype.indexOf.call(v,d,void 0),F;(F=0<=V)&&Array.prototype.splice.call(v,V,1),F&&(Es(d),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Wn(a,d,p,v){for(var V=0;V<a.length;++V){var F=a[V];if(!F.da&&F.listener==d&&F.capture==!!p&&F.ha==v)return V}return-1}var Is="closure_lm_"+(1e6*Math.random()|0),jo={};function Kn(a,d,p,v,V){if(Array.isArray(d)){for(var F=0;F<d.length;F++)Kn(a,d[F],p,v,V);return null}return p=$r(p),a&&a[An]?a.K(d,p,c(v)?!!v.capture:!!v,V):_d(a,d,p,!1,v,V)}function _d(a,d,p,v,V,F){if(!d)throw Error("Invalid event type");var W=c(V)?!!V.capture:!!V,be=Uo(a);if(be||(a[Is]=be=new Ts(a)),p=be.add(d,p,v,W,F),p.proxy)return p;if(v=wd(),p.proxy=v,v.src=a,v.listener=p,a.addEventListener)rt||(V=W),V===void 0&&(V=!1),a.addEventListener(d.toString(),v,V);else if(a.attachEvent)a.attachEvent(Ll(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function wd(){function a(p){return d.call(a.src,a.listener,p)}const d=Ed;return a}function Mo(a,d,p,v,V){if(Array.isArray(d))for(var F=0;F<d.length;F++)Mo(a,d[F],p,v,V);else v=c(v)?!!v.capture:!!v,p=$r(p),a&&a[An]?(a=a.i,d=String(d).toString(),d in a.g&&(F=a.g[d],p=Wn(F,p,v,V),-1<p&&(Es(F[p]),Array.prototype.splice.call(F,p,1),F.length==0&&(delete a.g[d],a.h--)))):a&&(a=Uo(a))&&(d=a.g[d.toString()],a=-1,d&&(a=Wn(d,p,v,V)),(p=-1<a?d[a]:null)&&Fo(p))}function Fo(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[An])it(d.i,a);else{var p=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(p,v,a.capture):d.detachEvent?d.detachEvent(Ll(p),v):d.addListener&&d.removeListener&&d.removeListener(v),(p=Uo(d))?(it(p,a),p.h==0&&(p.src=null,d[Is]=null)):Es(a)}}}function Ll(a){return a in jo?jo[a]:jo[a]="on"+a}function Ed(a,d){if(a.da)a=!0;else{d=new pt(d,this);var p=a.listener,v=a.ha||a.src;a.fa&&Fo(a),a=p.call(v,d)}return a}function Uo(a){return a=a[Is],a instanceof Ts?a:null}var hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function $r(a){return typeof a=="function"?a:(a[hr]||(a[hr]=function(d){return a.handleEvent(d)}),a[hr])}function st(){ye.call(this),this.i=new Ts(this),this.M=this,this.F=null}x(st,ye),st.prototype[An]=!0,st.prototype.removeEventListener=function(a,d,p,v){Mo(this,a,d,p,v)};function ot(a,d){var p,v=a.F;if(v)for(p=[];v;v=v.F)p.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new Ne(d,a);else if(d instanceof Ne)d.target=d.target||a;else{var V=d;d=new Ne(v,a),E(d,V)}if(V=!0,p)for(var F=p.length-1;0<=F;F--){var W=d.g=p[F];V=en(W,v,!0,d)&&V}if(W=d.g=a,V=en(W,v,!0,d)&&V,V=en(W,v,!1,d)&&V,p)for(F=0;F<p.length;F++)W=d.g=p[F],V=en(W,v,!1,d)&&V}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var p=a.g[d],v=0;v<p.length;v++)Es(p[v]);delete a.g[d],a.h--}}this.F=null},st.prototype.K=function(a,d,p,v){return this.i.add(String(a),d,!1,p,v)},st.prototype.L=function(a,d,p,v){return this.i.add(String(a),d,!0,p,v)};function en(a,d,p,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var V=!0,F=0;F<d.length;++F){var W=d[F];if(W&&!W.da&&W.capture==p){var be=W.listener,yt=W.ha||W.src;W.fa&&it(a.i,W),V=be.call(yt,v)!==!1&&V}}return V&&!v.defaultPrevented}function mn(a,d,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function Bo(a){a.g=mn(()=>{a.g=null,a.i&&(a.i=!1,Bo(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Ss extends ye{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Bo(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bi(a){ye.call(this),this.h=a,this.g={}}x(bi,ye);var xn=[];function $o(a){k(a.g,function(d,p){this.g.hasOwnProperty(p)&&Fo(d)},a),a.g={}}bi.prototype.N=function(){bi.aa.N.call(this),$o(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Rs=l.JSON.stringify,Ol=l.JSON.parse,Td=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function As(){}As.prototype.h=null;function Di(a){return a.h||(a.h=a.i())}function zo(){}var fr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zr(){Ne.call(this,"d")}x(zr,Ne);function Li(){Ne.call(this,"c")}x(Li,Ne);var pr={},qo=null;function xs(){return qo=qo||new st}pr.La="serverreachability";function Ho(a){Ne.call(this,pr.La,a)}x(Ho,Ne);function Gn(a){const d=xs();ot(d,new Ho(d))}pr.STAT_EVENT="statevent";function Oi(a,d){Ne.call(this,pr.STAT_EVENT,a),this.stat=d}x(Oi,Ne);function gt(a){const d=xs();ot(d,new Oi(d,a))}pr.Ma="timingevent";function Vl(a,d){Ne.call(this,pr.Ma,a),this.size=d}x(Vl,Ne);function N(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function L(){this.g=!0}L.prototype.xa=function(){this.g=!1};function M(a,d,p,v,V,F){a.info(function(){if(a.g)if(F)for(var W="",be=F.split("&"),yt=0;yt<be.length;yt++){var Ie=be[yt].split("=");if(1<Ie.length){var Ct=Ie[0];Ie=Ie[1];var kt=Ct.split("_");W=2<=kt.length&&kt[1]=="type"?W+(Ct+"="+Ie+"&"):W+(Ct+"=redacted&")}}else W=null;else W=F;return"XMLHTTP REQ ("+v+") [attempt "+V+"]: "+d+`
`+p+`
`+W})}function B(a,d,p,v,V,F,W){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+V+"]: "+d+`
`+p+`
`+F+" "+W})}function K(a,d,p,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+re(a,p)+(v?" "+v:"")})}function X(a,d){a.info(function(){return"TIMEOUT: "+d})}L.prototype.info=function(){};function re(a,d){if(!a.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var v=p[a];if(!(2>v.length)){var V=v[1];if(Array.isArray(V)&&!(1>V.length)){var F=V[0];if(F!="noop"&&F!="stop"&&F!="close")for(var W=1;W<V.length;W++)V[W]=""}}}}return Rs(p)}catch{return d}}var H={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},le={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Z;function ee(){}x(ee,As),ee.prototype.g=function(){return new XMLHttpRequest},ee.prototype.i=function(){return{}},Z=new ee;function he(a,d,p,v){this.j=a,this.i=d,this.l=p,this.R=v||1,this.U=new bi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Te}function Te(){this.i=null,this.g="",this.h=!1}var Ae={},ve={};function Ye(a,d,p){a.L=1,a.v=Ul(gr(d)),a.m=p,a.P=!0,Be(a,null)}function Be(a,d){a.F=Date.now(),Pn(a),a.A=gr(a.v);var p=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Km(p.i,"t",v),a.C=0,p=a.j.J,a.h=new Te,a.g=dg(a.j,p?d:null,!a.m),0<a.O&&(a.M=new Ss(g(a.Y,a,a.g),a.O)),d=a.U,p=a.g,v=a.ca;var V="readystatechange";Array.isArray(V)||(V&&(xn[0]=V.toString()),V=xn);for(var F=0;F<V.length;F++){var W=Kn(p,V[F],v||d.handleEvent,!1,d.h||d);if(!W)break;d.g[W.key]=W}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),Gn(),M(a.i,a.u,a.A,a.l,a.R,a.m)}he.prototype.ca=function(a){a=a.target;const d=this.M;d&&yr(a)==3?d.j():this.Y(a)},he.prototype.Y=function(a){try{if(a==this.g)e:{const kt=yr(this.g);var d=this.g.Ba();const Ns=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||eg(this.g)))){this.J||kt!=4||d==7||(d==8||0>=Ns?Gn(3):Gn(2)),Yn(this);var p=this.g.Z();this.X=p;t:if(qr(this)){var v=eg(this.g);a="";var V=v.length,F=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gn(this),xt(this);var W="";break t}this.h.i=new l.TextDecoder}for(d=0;d<V;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(F&&d==V-1)});v.length=0,this.h.g+=a,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,B(this.i,this.u,this.A,this.l,this.R,kt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var be,yt=this.g;if((be=yt.g?yt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(be)){var Ie=be;break t}}Ie=null}if(p=Ie)K(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hr(this,p);else{this.o=!1,this.s=3,gt(12),gn(this),xt(this);break e}}if(this.P){p=!0;let Cn;for(;!this.J&&this.C<W.length;)if(Cn=Qn(this,W),Cn==ve){kt==4&&(this.s=4,gt(14),p=!1),K(this.i,this.l,null,"[Incomplete Response]");break}else if(Cn==Ae){this.s=4,gt(15),K(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else K(this.i,this.l,Cn,null),Hr(this,Cn);if(qr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||W.length!=0||this.h.h||(this.s=1,gt(16),p=!1),this.o=this.o&&p,!p)K(this.i,this.l,W,"[Invalid Chunked Response]"),gn(this),xt(this);else if(0<W.length&&!this.W){this.W=!0;var Ct=this.j;Ct.g==this&&Ct.ba&&!Ct.M&&(Ct.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Ad(Ct),Ct.M=!0,gt(11))}}else K(this.i,this.l,W,null),Hr(this,W);kt==4&&gn(this),this.o&&!this.J&&(kt==4?ag(this.j,this):(this.o=!1,Pn(this)))}else aS(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),gn(this),xt(this)}}}catch{}finally{}};function qr(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Qn(a,d){var p=a.C,v=d.indexOf(`
`,p);return v==-1?ve:(p=Number(d.substring(p,v)),isNaN(p)?Ae:(v+=1,v+p>d.length?ve:(d=d.slice(v,v+p),a.C=v+p,d)))}he.prototype.cancel=function(){this.J=!0,gn(this)};function Pn(a){a.S=Date.now()+a.I,mr(a,a.I)}function mr(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=N(g(a.ba,a),d)}function Yn(a){a.B&&(l.clearTimeout(a.B),a.B=null)}he.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(X(this.i,this.A),this.L!=2&&(Gn(),gt(17)),gn(this),this.s=2,xt(this)):mr(this,this.S-a)};function xt(a){a.j.G==0||a.J||ag(a.j,a)}function gn(a){Yn(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,$o(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function Hr(a,d){try{var p=a.j;if(p.G!=0&&(p.g==a||Pe(p.h,a))){if(!a.K&&Pe(p.h,a)&&p.G==3){try{var v=p.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var V=v;if(V[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Hl(p),zl(p);else break e;Rd(p),gt(18)}}else p.za=V[1],0<p.za-p.T&&37500>V[2]&&p.F&&p.v==0&&!p.C&&(p.C=N(g(p.Za,p),6e3));if(1>=Pt(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else ji(p,11)}else if((a.K||p.g==a)&&Hl(p),!w(d))for(V=p.Da.g.parse(d),d=0;d<V.length;d++){let Ie=V[d];if(p.T=Ie[0],Ie=Ie[1],p.G==2)if(Ie[0]=="c"){p.K=Ie[1],p.ia=Ie[2];const Ct=Ie[3];Ct!=null&&(p.la=Ct,p.j.info("VER="+p.la));const kt=Ie[4];kt!=null&&(p.Aa=kt,p.j.info("SVER="+p.Aa));const Ns=Ie[5];Ns!=null&&typeof Ns=="number"&&0<Ns&&(v=1.5*Ns,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const Cn=a.g;if(Cn){const Kl=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Kl){var F=v.h;F.g||Kl.indexOf("spdy")==-1&&Kl.indexOf("quic")==-1&&Kl.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(tn(F,F.h),F.h=null))}if(v.D){const xd=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;xd&&(v.ya=xd,je(v.I,v.D,xd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var W=a;if(v.qa=cg(v,v.J?v.ia:null,v.W),W.K){Wo(v.h,W);var be=W,yt=v.L;yt&&(be.I=yt),be.B&&(Yn(be),Pn(be)),v.g=W}else sg(v);0<p.i.length&&ql(p)}else Ie[0]!="stop"&&Ie[0]!="close"||ji(p,7);else p.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?ji(p,7):Sd(p):Ie[0]!="noop"&&p.l&&p.l.ta(Ie),p.v=0)}}Gn(4)}catch{}}var Ps=class{constructor(a,d){this.g=a,this.map=d}};function ce(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ve(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Pt(a){return a.h?1:a.g?a.g.size:0}function Pe(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function tn(a,d){a.g?a.g.add(d):a.h=d}function Wo(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}ce.prototype.cancel=function(){if(this.i=jl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function jl(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const p of a.g.values())d=d.concat(p.D);return d}return P(a.i)}function WI(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],p=a.length,v=0;v<p;v++)d.push(a[v]);return d}d=[],p=0;for(v in a)d[p++]=a[v];return d}function KI(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var p=0;p<a;p++)d.push(p);return d}d=[],p=0;for(const v in a)d[p++]=v;return d}}}function Bm(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var p=KI(a),v=WI(a),V=v.length,F=0;F<V;F++)d.call(void 0,v[F],p&&p[F],a)}var $m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GI(a,d){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var v=a[p].indexOf("="),V=null;if(0<=v){var F=a[p].substring(0,v);V=a[p].substring(v+1)}else F=a[p];d(F,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Vi(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Vi){this.h=a.h,Ml(this,a.j),this.o=a.o,this.g=a.g,Fl(this,a.s),this.l=a.l;var d=a.i,p=new Qo;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),zm(this,p),this.m=a.m}else a&&(d=String(a).match($m))?(this.h=!1,Ml(this,d[1]||"",!0),this.o=Ko(d[2]||""),this.g=Ko(d[3]||"",!0),Fl(this,d[4]),this.l=Ko(d[5]||"",!0),zm(this,d[6]||"",!0),this.m=Ko(d[7]||"")):(this.h=!1,this.i=new Qo(null,this.h))}Vi.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Go(d,qm,!0),":");var p=this.g;return(p||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Go(d,qm,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(Go(p,p.charAt(0)=="/"?JI:YI,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",Go(p,ZI)),a.join("")};function gr(a){return new Vi(a)}function Ml(a,d,p){a.j=p?Ko(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Fl(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function zm(a,d,p){d instanceof Qo?(a.i=d,eS(a.i,a.h)):(p||(d=Go(d,XI)),a.i=new Qo(d,a.h))}function je(a,d,p){a.i.set(d,p)}function Ul(a){return je(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Ko(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Go(a,d,p){return typeof a=="string"?(a=encodeURI(a).replace(d,QI),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function QI(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var qm=/[#\/\?@]/g,YI=/[#\?:]/g,JI=/[#\?]/g,XI=/[#\?@]/g,ZI=/#/g;function Qo(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function Wr(a){a.g||(a.g=new Map,a.h=0,a.i&&GI(a.i,function(d,p){a.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}t=Qo.prototype,t.add=function(a,d){Wr(this),this.i=null,a=Cs(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(d),this.h+=1,this};function Hm(a,d){Wr(a),d=Cs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function Wm(a,d){return Wr(a),d=Cs(a,d),a.g.has(d)}t.forEach=function(a,d){Wr(this),this.g.forEach(function(p,v){p.forEach(function(V){a.call(d,V,v,this)},this)},this)},t.na=function(){Wr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let v=0;v<d.length;v++){const V=a[v];for(let F=0;F<V.length;F++)p.push(d[v])}return p},t.V=function(a){Wr(this);let d=[];if(typeof a=="string")Wm(this,a)&&(d=d.concat(this.g.get(Cs(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)d=d.concat(a[p])}return d},t.set=function(a,d){return Wr(this),this.i=null,a=Cs(this,a),Wm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Km(a,d,p){Hm(a,d),0<p.length&&(a.i=null,a.g.set(Cs(a,d),P(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var v=d[p];const F=encodeURIComponent(String(v)),W=this.V(v);for(v=0;v<W.length;v++){var V=F;W[v]!==""&&(V+="="+encodeURIComponent(String(W[v]))),a.push(V)}}return this.i=a.join("&")};function Cs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function eS(a,d){d&&!a.j&&(Wr(a),a.i=null,a.g.forEach(function(p,v){var V=v.toLowerCase();v!=V&&(Hm(this,v),Km(this,V,p))},a)),a.j=d}function tS(a,d){const p=new L;if(l.Image){const v=new Image;v.onload=I(Kr,p,"TestLoadImage: loaded",!0,d,v),v.onerror=I(Kr,p,"TestLoadImage: error",!1,d,v),v.onabort=I(Kr,p,"TestLoadImage: abort",!1,d,v),v.ontimeout=I(Kr,p,"TestLoadImage: timeout",!1,d,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function nS(a,d){const p=new L,v=new AbortController,V=setTimeout(()=>{v.abort(),Kr(p,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(F=>{clearTimeout(V),F.ok?Kr(p,"TestPingServer: ok",!0,d):Kr(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(V),Kr(p,"TestPingServer: error",!1,d)})}function Kr(a,d,p,v,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),v(p)}catch{}}function rS(){this.g=new Td}function iS(a,d,p){const v=p||"";try{Bm(a,function(V,F){let W=V;c(V)&&(W=Rs(V)),d.push(v+F+"="+encodeURIComponent(W))})}catch(V){throw d.push(v+"type="+encodeURIComponent("_badmap")),V}}function Yo(a){this.l=a.Ub||null,this.j=a.eb||!1}x(Yo,As),Yo.prototype.g=function(){return new Bl(this.l,this.j)},Yo.prototype.i=function(a){return function(){return a}}({});function Bl(a,d){st.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Bl,st),t=Bl.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Xo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Xo(this)),this.g&&(this.readyState=3,Xo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Jo(this):Xo(this),this.readyState==3&&Gm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Jo(this))},t.Qa=function(a){this.g&&(this.response=a,Jo(this))},t.ga=function(){this.g&&Jo(this)};function Jo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Xo(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=d.next();return a.join(`\r
`)};function Xo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Qm(a){let d="";return k(a,function(p,v){d+=v,d+=":",d+=p,d+=`\r
`}),d}function Id(a,d,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=Qm(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):je(a,d,p))}function Ke(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Ke,st);var sS=/^https?$/i,oS=["POST","PUT"];t=Ke.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Z.g(),this.v=this.o?Di(this.o):Di(Z),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(F){Ym(this,F);return}if(a=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var V in v)p.set(V,v[V]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const F of v.keys())p.set(F,v.get(F));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(F=>F.toLowerCase()=="content-type"),V=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(oS,d,void 0))||v||V||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,W]of p)this.g.setRequestHeader(F,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zm(this),this.u=!0,this.g.send(a),this.u=!1}catch(F){Ym(this,F)}};function Ym(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Jm(a),$l(a)}function Jm(a){a.A||(a.A=!0,ot(a,"complete"),ot(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ot(this,"complete"),ot(this,"abort"),$l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$l(this,!0)),Ke.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xm(this):this.bb())},t.bb=function(){Xm(this)};function Xm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||yr(a)!=4||a.Z()!=2)){if(a.u&&yr(a)==4)mn(a.Ea,0,a);else if(ot(a,"readystatechange"),yr(a)==4){a.h=!1;try{const W=a.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var v;if(v=W===0){var V=String(a.D).match($m)[1]||null;!V&&l.self&&l.self.location&&(V=l.self.location.protocol.slice(0,-1)),v=!sS.test(V?V.toLowerCase():"")}p=v}if(p)ot(a,"complete"),ot(a,"success");else{a.m=6;try{var F=2<yr(a)?a.g.statusText:""}catch{F=""}a.l=F+" ["+a.Z()+"]",Jm(a)}}finally{$l(a)}}}}function $l(a,d){if(a.g){Zm(a);const p=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||ot(a,"ready");try{p.onreadystatechange=v}catch{}}}function Zm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function yr(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Ol(d)}};function eg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function aS(a){const d={};a=(a.g&&2<=yr(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(w(a[v]))continue;var p=C(a[v]);const V=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const F=d[V]||[];d[V]=F,F.push(p)}T(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Zo(a,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||d}function tg(a){this.Aa=0,this.i=[],this.j=new L,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Zo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Zo("baseRetryDelayMs",5e3,a),this.cb=Zo("retryDelaySeedMs",1e4,a),this.Wa=Zo("forwardChannelMaxRetries",2,a),this.wa=Zo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new ce(a&&a.concurrentRequestLimit),this.Da=new rS,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=tg.prototype,t.la=8,t.G=1,t.connect=function(a,d,p,v){gt(0),this.W=a,this.H=d||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=cg(this,null,this.W),ql(this)};function Sd(a){if(ng(a),a.G==3){var d=a.U++,p=gr(a.I);if(je(p,"SID",a.K),je(p,"RID",d),je(p,"TYPE","terminate"),ea(a,p),d=new he(a,a.j,d),d.L=2,d.v=Ul(gr(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=d.v,p=!0),p||(d.g=dg(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Pn(d)}ug(a)}function zl(a){a.g&&(Ad(a),a.g.cancel(),a.g=null)}function ng(a){zl(a),a.u&&(l.clearTimeout(a.u),a.u=null),Hl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ql(a){if(!Ve(a.h)&&!a.s){a.s=!0;var d=a.Ga;Re||ie(),G||(Re(),G=!0),ne.add(d,a),a.B=0}}function lS(a,d){return Pt(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=N(g(a.Ga,a,d),lg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const V=new he(this,this.j,a);let F=this.o;if(this.S&&(F?(F=y(F),E(F,this.S)):F=this.S),this.m!==null||this.O||(V.H=F,F=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=ig(this,V,d),p=gr(this.I),je(p,"RID",a),je(p,"CVER",22),this.D&&je(p,"X-HTTP-Session-Id",this.D),ea(this,p),F&&(this.O?d="headers="+encodeURIComponent(String(Qm(F)))+"&"+d:this.m&&Id(p,this.m,F)),tn(this.h,V),this.Ua&&je(p,"TYPE","init"),this.P?(je(p,"$req",d),je(p,"SID","null"),V.T=!0,Ye(V,p,null)):Ye(V,p,d),this.G=2}}else this.G==3&&(a?rg(this,a):this.i.length==0||Ve(this.h)||rg(this))};function rg(a,d){var p;d?p=d.l:p=a.U++;const v=gr(a.I);je(v,"SID",a.K),je(v,"RID",p),je(v,"AID",a.T),ea(a,v),a.m&&a.o&&Id(v,a.m,a.o),p=new he(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),d&&(a.i=d.D.concat(a.i)),d=ig(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),tn(a.h,p),Ye(p,v,d)}function ea(a,d){a.H&&k(a.H,function(p,v){je(d,v,p)}),a.l&&Bm({},function(p,v){je(d,v,p)})}function ig(a,d,p){p=Math.min(a.i.length,p);var v=a.l?g(a.l.Na,a.l,a):null;e:{var V=a.i;let F=-1;for(;;){const W=["count="+p];F==-1?0<p?(F=V[0].g,W.push("ofs="+F)):F=0:W.push("ofs="+F);let be=!0;for(let yt=0;yt<p;yt++){let Ie=V[yt].g;const Ct=V[yt].map;if(Ie-=F,0>Ie)F=Math.max(0,V[yt].g-100),be=!1;else try{iS(Ct,W,"req"+Ie+"_")}catch{v&&v(Ct)}}if(be){v=W.join("&");break e}}}return a=a.i.splice(0,p),d.D=a,v}function sg(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Re||ie(),G||(Re(),G=!0),ne.add(d,a),a.v=0}}function Rd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=N(g(a.Fa,a),lg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,og(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=N(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),zl(this),og(this))};function Ad(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function og(a){a.g=new he(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=gr(a.qa);je(d,"RID","rpc"),je(d,"SID",a.K),je(d,"AID",a.T),je(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&je(d,"TO",a.ja),je(d,"TYPE","xmlhttp"),ea(a,d),a.m&&a.o&&Id(d,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Ul(gr(d)),p.m=null,p.P=!0,Be(p,a)}t.Za=function(){this.C!=null&&(this.C=null,zl(this),Rd(this),gt(19))};function Hl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function ag(a,d){var p=null;if(a.g==d){Hl(a),Ad(a),a.g=null;var v=2}else if(Pe(a.h,d))p=d.D,Wo(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var V=a.B;v=xs(),ot(v,new Vl(v,p)),ql(a)}else sg(a);else if(V=d.s,V==3||V==0&&0<d.X||!(v==1&&lS(a,d)||v==2&&Rd(a)))switch(p&&0<p.length&&(d=a.h,d.i=d.i.concat(p)),V){case 1:ji(a,5);break;case 4:ji(a,10);break;case 3:ji(a,6);break;default:ji(a,2)}}}function lg(a,d){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*d}function ji(a,d){if(a.j.info("Error code "+d),d==2){var p=g(a.fb,a),v=a.Xa;const V=!v;v=new Vi(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ml(v,"https"),Ul(v),V?tS(v.toString(),p):nS(v.toString(),p)}else gt(2);a.G=0,a.l&&a.l.sa(d),ug(a),ng(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function ug(a){if(a.G=0,a.ka=[],a.l){const d=jl(a.h);(d.length!=0||a.i.length!=0)&&(O(a.ka,d),O(a.ka,a.i),a.h.i.length=0,P(a.i),a.i.length=0),a.l.ra()}}function cg(a,d,p){var v=p instanceof Vi?gr(p):new Vi(p);if(v.g!="")d&&(v.g=d+"."+v.g),Fl(v,v.s);else{var V=l.location;v=V.protocol,d=d?d+"."+V.hostname:V.hostname,V=+V.port;var F=new Vi(null);v&&Ml(F,v),d&&(F.g=d),V&&Fl(F,V),p&&(F.l=p),v=F}return p=a.D,d=a.ya,p&&d&&je(v,p,d),je(v,"VER",a.la),ea(a,v),v}function dg(a,d,p){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new Ke(new Yo({eb:p})):new Ke(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hg(){}t=hg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Wl(){}Wl.prototype.g=function(a,d){return new nn(a,d)};function nn(a,d){st.call(this),this.g=new tg(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!w(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!w(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new ks(this)}x(nn,st),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Sd(this.g)},nn.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=Rs(a),a=p);d.i.push(new Ps(d.Ya++,a)),d.G==3&&ql(d)},nn.prototype.N=function(){this.g.l=null,delete this.j,Sd(this.g),delete this.g,nn.aa.N.call(this)};function fg(a){zr.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const p in d){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}x(fg,zr);function pg(){Li.call(this),this.status=1}x(pg,Li);function ks(a){this.g=a}x(ks,hg),ks.prototype.ua=function(){ot(this.g,"a")},ks.prototype.ta=function(a){ot(this.g,new fg(a))},ks.prototype.sa=function(a){ot(this.g,new pg)},ks.prototype.ra=function(){ot(this.g,"b")},Wl.prototype.createWebChannel=Wl.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,VE=function(){return new Wl},OE=function(){return xs()},LE=pr,Tf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},H.NO_ERROR=0,H.TIMEOUT=8,H.HTTP_ERROR=6,Du=H,le.COMPLETE="complete",DE=le,zo.EventType=fr,fr.OPEN="a",fr.CLOSE="b",fr.ERROR="c",fr.MESSAGE="d",st.prototype.listen=st.prototype.K,_a=zo,bE=Yo,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,NE=Ke}).apply(typeof hu<"u"?hu:typeof self<"u"?self:typeof window<"u"?window:{});const tv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Po="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new Wc("@firebase/firestore");function ua(){return ss.logLevel}function J(t,...e){if(ss.logLevel<=ge.DEBUG){const n=e.map(Wp);ss.debug(`Firestore (${Po}): ${t}`,...n)}}function Or(t,...e){if(ss.logLevel<=ge.ERROR){const n=e.map(Wp);ss.error(`Firestore (${Po}): ${t}`,...n)}}function mo(t,...e){if(ss.logLevel<=ge.WARN){const n=e.map(Wp);ss.warn(`Firestore (${Po}): ${t}`,...n)}}function Wp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+t;throw Or(e),new Error(e)}function ke(t,e){t||oe()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends qn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class NC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bC{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ke(typeof r.accessToken=="string"),new jE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string"),new Lt(e)}}class DC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new DC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class OC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ke(typeof n.token=="string"),this.R=n.token,new OC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=jC(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Se(t,e){return t<e?-1:t>e?1:0}function go(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ut(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Se(this.nanoseconds,e.nanoseconds):Se(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ue(e)}static min(){return new ue(new ut(0,0))}static max(){return new ue(new ut(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return sl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof sl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Le extends sl{construct(e,n,r){return new Le(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Le(n)}static emptyPath(){return new Le([])}}const MC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends sl{construct(e,n,r){return new wt(e,n,r)}static isValidIdentifier(e){return MC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new wt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new Q(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new Q(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Le.fromString(e))}static fromName(e){return new te(Le.fromString(e).popFirst(5))}static empty(){return new te(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Le.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Le(e.slice()))}}function FC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new ut(n+1,0):new ut(n,r));return new Ti(i,te.empty(),e)}function UC(t){return new Ti(t.readTime,t.key,-1)}class Ti{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ti(ue.min(),te.empty(),-1)}static max(){return new Ti(ue.max(),te.empty(),-1)}}function BC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:Se(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==$C)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new z((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof z?n:z.resolve(n)}catch(n){return z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):z.reject(n)}static resolve(e){return new z((n,r)=>{n(e)})}static reject(e){return new z((n,r)=>{r(e)})}static waitFor(e){return new z((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=z.resolve(!1);for(const r of e)n=n.next(i=>i?z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new z((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new z((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function qC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Al(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Kp.oe=-1;function Yc(t){return t==null}function gc(t){return t===0&&1/t==-1/0}function HC(t){return typeof t=="number"&&Number.isInteger(t)&&!gc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function WC(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function FE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||_t.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_t.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fu(this.root,e,this.comparator,!1)}getReverseIterator(){return new fu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fu(this.root,e,this.comparator,!0)}}class fu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class _t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??_t.RED,this.left=i??_t.EMPTY,this.right=s??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new _t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return _t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,i,s){return this}insert(e,n,r){return new _t(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new rv(this.data.getIterator())}getIteratorFrom(e){return new rv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Tt(this.comparator);return n.data=e,n}}class rv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new Tt(wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return go(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new UE("Invalid base64 string: "+s):s}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Se(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const KC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(t){if(ke(!!t),typeof t=="string"){let e=0;const n=KC.exec(t);if(ke(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function os(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gp(t){const e=t.mapValue.fields.__previous_value__;return Jc(e)?Gp(e):e}function ol(t){const e=Ii(t.mapValue.fields.__local_write_time__.timestampValue);return new ut(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e,n,r,i,s,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class al{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new al("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof al&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function as(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Jc(t)?4:YC(t)?9007199254740991:QC(t)?10:11:oe()}function cr(t,e){if(t===e)return!0;const n=as(t);if(n!==as(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ol(t).isEqual(ol(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ii(i.timestampValue),l=Ii(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return os(i.bytesValue).isEqual(os(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Je(i.geoPointValue.latitude)===Je(s.geoPointValue.latitude)&&Je(i.geoPointValue.longitude)===Je(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Je(i.integerValue)===Je(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Je(i.doubleValue),l=Je(s.doubleValue);return o===l?gc(o)===gc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return go(t.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(nv(o)!==nv(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!cr(o[u],l[u])))return!1;return!0}(t,e);default:return oe()}}function ll(t,e){return(t.values||[]).find(n=>cr(n,e))!==void 0}function yo(t,e){if(t===e)return 0;const n=as(t),r=as(e);if(n!==r)return Se(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Se(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Je(s.integerValue||s.doubleValue),u=Je(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return iv(t.timestampValue,e.timestampValue);case 4:return iv(ol(t),ol(e));case 5:return Se(t.stringValue,e.stringValue);case 6:return function(s,o){const l=os(s),u=os(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Se(l[c],u[c]);if(h!==0)return h}return Se(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=Se(Je(s.latitude),Je(o.latitude));return l!==0?l:Se(Je(s.longitude),Je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var l,u,c,h;const m=s.fields||{},g=o.fields||{},I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,x=(u=g.value)===null||u===void 0?void 0:u.arrayValue,P=Se(((c=I==null?void 0:I.values)===null||c===void 0?void 0:c.length)||0,((h=x==null?void 0:x.values)===null||h===void 0?void 0:h.length)||0);return P!==0?P:sv(I,x)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===pu.mapValue&&o===pu.mapValue)return 0;if(s===pu.mapValue)return 1;if(o===pu.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const g=Se(u[m],h[m]);if(g!==0)return g;const I=yo(l[u[m]],c[h[m]]);if(I!==0)return I}return Se(u.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function iv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Se(t,e);const n=Ii(t),r=Ii(e),i=Se(n.seconds,r.seconds);return i!==0?i:Se(n.nanos,r.nanos)}function sv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=yo(n[i],r[i]);if(s)return s}return Se(n.length,r.length)}function vo(t){return If(t)}function If(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ii(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return os(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=If(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${If(n.fields[o])}`;return i+"}"}(t.mapValue):oe()}function yc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Sf(t){return!!t&&"integerValue"in t}function Qp(t){return!!t&&"arrayValue"in t}function ov(t){return!!t&&"nullValue"in t}function av(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lu(t){return!!t&&"mapValue"in t}function QC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function La(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Co(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=La(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=La(t.arrayValue.values[n]);return e}return Object.assign({},t)}function YC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Lu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=La(n)}setAll(e){let n=wt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=La(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Lu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Lu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Co(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _n(La(this.value))}}function BE(t){const e=[];return Co(t.fields,(n,r)=>{const i=new wt([n]);if(Lu(r)){const s=BE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Vt(e,0,ue.min(),ue.min(),ue.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new Vt(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new Vt(e,2,n,ue.min(),ue.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,ue.min(),ue.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n){this.position=e,this.inclusive=n}}function lv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=yo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function uv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul{constructor(e,n="asc"){this.field=e,this.dir=n}}function JC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{}class nt extends $E{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ZC(e,n,r):n==="array-contains"?new nk(e,r):n==="in"?new rk(e,r):n==="not-in"?new ik(e,r):n==="array-contains-any"?new sk(e,r):new nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ek(e,r):new tk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(yo(n,this.value)):n!==null&&as(this.value)===as(n)&&this.matchesComparison(yo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends $E{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $n(e,n)}matches(e){return zE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zE(t){return t.op==="and"}function qE(t){return XC(t)&&zE(t)}function XC(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function Rf(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+vo(t.value);if(qE(t))return t.filters.map(e=>Rf(e)).join(",");{const e=t.filters.map(n=>Rf(n)).join(",");return`${t.op}(${e})`}}function HE(t,e){return t instanceof nt?function(r,i){return i instanceof nt&&r.op===i.op&&r.field.isEqual(i.field)&&cr(r.value,i.value)}(t,e):t instanceof $n?function(r,i){return i instanceof $n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&HE(o,i.filters[l]),!0):!1}(t,e):void oe()}function WE(t){return t instanceof nt?function(n){return`${n.field.canonicalString()} ${n.op} ${vo(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(WE).join(" ,")+"}"}(t):"Filter"}class ZC extends nt{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class ek extends nt{constructor(e,n){super(e,"in",n),this.keys=KE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tk extends nt{constructor(e,n){super(e,"not-in",n),this.keys=KE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function KE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class nk extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Qp(n)&&ll(n.arrayValue,this.value)}}class rk extends nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ll(this.value.arrayValue,n)}}class ik extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ll(this.value.arrayValue,n)}}class sk extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Qp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ll(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.ue=null}}function cv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new ok(t,e,n,r,i,s,o)}function Yp(t){const e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Rf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Yc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>vo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>vo(r)).join(",")),e.ue=n}return e.ue}function Jp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uv(t.startAt,e.startAt)&&uv(t.endAt,e.endAt)}function Af(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function ak(t,e,n,r,i,s,o,l){return new ys(t,e,n,r,i,s,o,l)}function Xp(t){return new ys(t)}function dv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Zp(t){return t.collectionGroup!==null}function so(t){const e=ae(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Tt(wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ul(s,r))}),n.has(wt.keyField().canonicalString())||e.ce.push(new ul(wt.keyField(),r))}return e.ce}function or(t){const e=ae(t);return e.le||(e.le=GE(e,so(t))),e.le}function lk(t){const e=ae(t);return e.he||(e.he=GE(e,t.explicitOrderBy)),e.he}function GE(t,e){if(t.limitType==="F")return cv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ul(i.field,s)});const n=t.endAt?new _o(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new _o(t.startAt.position,t.startAt.inclusive):null;return cv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xf(t,e){const n=t.filters.concat([e]);return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vc(t,e,n){return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xc(t,e){return Jp(or(t),or(e))&&t.limitType===e.limitType}function QE(t){return`${Yp(or(t))}|lt:${t.limitType}`}function Ls(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>WE(i)).join(", ")}]`),Yc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>vo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>vo(i)).join(",")),`Target(${r})`}(or(t))}; limitType=${t.limitType})`}function Zc(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of so(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const c=lv(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,so(r),i)||r.endAt&&!function(o,l,u){const c=lv(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,so(r),i))}(t,e)}function uk(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YE(t){return(e,n)=>{let r=!1;for(const i of so(t)){const s=ck(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ck(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),c=l.data.field(s);return u!==null&&c!==null?yo(u,c):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Co(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return FE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new We(te.comparator);function Vr(){return dk}const JE=new We(te.comparator);function wa(...t){let e=JE;for(const n of t)e=e.insert(n.key,n);return e}function XE(t){let e=JE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Hi(){return Oa()}function ZE(){return Oa()}function Oa(){return new ko(t=>t.toString(),(t,e)=>t.isEqual(e))}const hk=new We(te.comparator),fk=new Tt(te.comparator);function me(...t){let e=fk;for(const n of t)e=e.add(n);return e}const pk=new Tt(Se);function mk(){return pk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:gc(e)?"-0":e}}function eT(t){return{integerValue:""+t}}function gk(t,e){return HC(e)?eT(e):em(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(){this._=void 0}}function yk(t,e,n){return t instanceof _c?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Jc(s)&&(s=Gp(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof cl?nT(t,e):t instanceof dl?rT(t,e):function(i,s){const o=tT(i,s),l=hv(o)+hv(i.Pe);return Sf(o)&&Sf(i.Pe)?eT(l):em(i.serializer,l)}(t,e)}function vk(t,e,n){return t instanceof cl?nT(t,e):t instanceof dl?rT(t,e):n}function tT(t,e){return t instanceof wc?function(r){return Sf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class _c extends ed{}class cl extends ed{constructor(e){super(),this.elements=e}}function nT(t,e){const n=iT(e);for(const r of t.elements)n.some(i=>cr(i,r))||n.push(r);return{arrayValue:{values:n}}}class dl extends ed{constructor(e){super(),this.elements=e}}function rT(t,e){let n=iT(e);for(const r of t.elements)n=n.filter(i=>!cr(i,r));return{arrayValue:{values:n}}}class wc extends ed{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function hv(t){return Je(t.integerValue||t.doubleValue)}function iT(t){return Qp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _k(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cl&&i instanceof cl||r instanceof dl&&i instanceof dl?go(r.elements,i.elements,cr):r instanceof wc&&i instanceof wc?cr(r.Pe,i.Pe):r instanceof _c&&i instanceof _c}(t.transform,e.transform)}class wk{constructor(e,n){this.version=e,this.transformResults=n}}class ar{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ar}static exists(e){return new ar(void 0,e)}static updateTime(e){return new ar(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ou(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class td{}function sT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new aT(t.key,ar.none()):new xl(t.key,t.data,ar.none());{const n=t.data,r=_n.empty();let i=new Tt(wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new vs(t.key,r,new Vn(i.toArray()),ar.none())}}function Ek(t,e,n){t instanceof xl?function(i,s,o){const l=i.value.clone(),u=pv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof vs?function(i,s,o){if(!Ou(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=pv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(oT(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Va(t,e,n,r){return t instanceof xl?function(s,o,l,u){if(!Ou(s.precondition,o))return l;const c=s.value.clone(),h=mv(s.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof vs?function(s,o,l,u){if(!Ou(s.precondition,o))return l;const c=mv(s.fieldTransforms,u,o),h=o.data;return h.setAll(oT(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Ou(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Tk(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=tT(r.transform,i||null);s!=null&&(n===null&&(n=_n.empty()),n.set(r.field,s))}return n||null}function fv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&go(r,i,(s,o)=>_k(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class xl extends td{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vs extends td{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function oT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function pv(t,e,n){const r=new Map;ke(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,vk(o,l,n[i]))}return r}function mv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,yk(s,o,e))}return r}class aT extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ik extends td{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Ek(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZE();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=sT(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),me())}isEqual(e){return this.batchId===e.batchId&&go(this.mutations,e.mutations,(n,r)=>fv(n,r))&&go(this.baseMutations,e.baseMutations,(n,r)=>fv(n,r))}}class tm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){ke(e.mutations.length===r.length);let i=function(){return hk}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new tm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze,_e;function Pk(t){switch(t){default:return oe();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function lT(t){if(t===void 0)return Or("GRPC error has no .code"),U.UNKNOWN;switch(t){case Ze.OK:return U.OK;case Ze.CANCELLED:return U.CANCELLED;case Ze.UNKNOWN:return U.UNKNOWN;case Ze.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case Ze.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case Ze.INTERNAL:return U.INTERNAL;case Ze.UNAVAILABLE:return U.UNAVAILABLE;case Ze.UNAUTHENTICATED:return U.UNAUTHENTICATED;case Ze.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case Ze.NOT_FOUND:return U.NOT_FOUND;case Ze.ALREADY_EXISTS:return U.ALREADY_EXISTS;case Ze.PERMISSION_DENIED:return U.PERMISSION_DENIED;case Ze.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case Ze.ABORTED:return U.ABORTED;case Ze.OUT_OF_RANGE:return U.OUT_OF_RANGE;case Ze.UNIMPLEMENTED:return U.UNIMPLEMENTED;case Ze.DATA_LOSS:return U.DATA_LOSS;default:return oe()}}(_e=Ze||(Ze={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new Ji([4294967295,4294967295],0);function gv(t){const e=Ck().encode(t),n=new kE;return n.update(e),new Uint8Array(n.digest())}function yv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ji([n,r],0),new Ji([i,s],0)]}class nm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ea(`Invalid padding: ${n}`);if(r<0)throw new Ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ea(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ji.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ji.fromNumber(r)));return i.compare(kk)===1&&(i=new Ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=gv(e),[r,i]=yv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new nm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=gv(e),[r,i]=yv(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Pl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new nd(ue.min(),i,new We(Se),Vr(),me())}}class Pl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Pl(r,n,me(),me(),me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class uT{constructor(e,n){this.targetId=e,this.me=n}}class cT{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class vv{constructor(){this.fe=0,this.ge=wv(),this.pe=Rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=me(),n=me(),r=me();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new Pl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=wv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ke(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Nk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Vr(),this.qe=_v(),this.Qe=new We(Se)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Af(s))if(r===0){const o=new te(s.path);this.Ue(n,o,Vt.newNoDocument(o,ue.min()))}else ke(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=os(r).toUint8Array()}catch(u){if(u instanceof UE)return mo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new nm(o,i,s)}catch(u){return mo(u instanceof Ea?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const l=this.Je(o);if(l){if(s.current&&Af(l.target)){const u=new te(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Vt.newNoDocument(u,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=me();this.qe.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new nd(e,n,this.Qe,this.ke,r);return this.ke=Vr(),this.qe=_v(),this.Qe=new We(Se),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new vv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Tt(Se),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function _v(){return new We(te.comparator)}function wv(){return new We(te.comparator)}const bk={asc:"ASCENDING",desc:"DESCENDING"},Dk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lk={and:"AND",or:"OR"};class Ok{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Pf(t,e){return t.useProto3Json||Yc(e)?e:{value:e}}function Ec(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Vk(t,e){return Ec(t,e.toTimestamp())}function lr(t){return ke(!!t),ue.fromTimestamp(function(n){const r=Ii(n);return new ut(r.seconds,r.nanos)}(t))}function rm(t,e){return Cf(t,e).canonicalString()}function Cf(t,e){const n=function(i){return new Le(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function hT(t){const e=Le.fromString(t);return ke(vT(e)),e}function kf(t,e){return rm(t.databaseId,e.path)}function ah(t,e){const n=hT(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(pT(n))}function fT(t,e){return rm(t.databaseId,e)}function jk(t){const e=hT(t);return e.length===4?Le.emptyPath():pT(e)}function Nf(t){return new Le(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pT(t){return ke(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ev(t,e,n){return{name:kf(t,e),fields:n.value.mapValue.fields}}function Mk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(ke(h===void 0||typeof h=="string"),Rt.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?U.UNKNOWN:lT(c.code);return new Q(h,c.message||"")}(o);n=new cT(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ah(t,r.document.name),s=lr(r.document.updateTime),o=r.document.createTime?lr(r.document.createTime):ue.min(),l=new _n({mapValue:{fields:r.document.fields}}),u=Vt.newFoundDocument(i,s,o,l),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Vu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ah(t,r.document),s=r.readTime?lr(r.readTime):ue.min(),o=Vt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Vu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ah(t,r.document),s=r.removedTargetIds||[];n=new Vu([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new xk(i,s),l=r.targetId;n=new uT(l,o)}}return n}function Fk(t,e){let n;if(e instanceof xl)n={update:Ev(t,e.key,e.value)};else if(e instanceof aT)n={delete:kf(t,e.key)};else if(e instanceof vs)n={update:Ev(t,e.key,e.data),updateMask:Gk(e.fieldMask)};else{if(!(e instanceof Ik))return oe();n={verify:kf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof _c)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof cl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof wc)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Vk(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(t,e.precondition)),n}function Uk(t,e){return t&&t.length>0?(ke(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?lr(i.updateTime):lr(s);return o.isEqual(ue.min())&&(o=lr(s)),new wk(o,i.transformResults||[])}(n,e))):[]}function Bk(t,e){return{documents:[fT(t,e.path)]}}function mT(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=fT(t,i);const s=function(c){if(c.length!==0)return yT($n.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(h=>function(g){return{field:si(g.field),direction:Hk(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Pf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function $k(t,e,n,r){const{_t:i,parent:s}=mT(t,e),o={},l=[];let u=0;return n.forEach(c=>{const h="aggregate_"+u++;o[h]=c.alias,c.aggregateType==="count"?l.push({alias:h,count:{}}):c.aggregateType==="avg"?l.push({alias:h,avg:{field:si(c.fieldPath)}}):c.aggregateType==="sum"&&l.push({alias:h,sum:{field:si(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:i.structuredQuery},parent:i.parent},ut:o,parent:s}}function zk(t){let e=jk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ke(r===1);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(m){const g=gT(m);return g instanceof $n&&qE(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(x){return new ul(Os(x.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Yc(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,I=m.values||[];return new _o(I,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,I=m.values||[];return new _o(I,g)}(n.endAt)),ak(e,i,o,s,l,"F",u,c)}function qk(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function gT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Os(n.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Os(n.unaryFilter.field);return nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Os(n.unaryFilter.field);return nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Os(n.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return nt.create(Os(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(r=>gT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function Hk(t){return bk[t]}function Wk(t){return Dk[t]}function Kk(t){return Lk[t]}function si(t){return{fieldPath:t.canonicalString()}}function Os(t){return wt.fromServerFormat(t.fieldPath)}function yT(t){return t instanceof nt?function(n){if(n.op==="=="){if(av(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NAN"}};if(ov(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(av(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NAN"}};if(ov(n.value))return{unaryFilter:{field:si(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:si(n.field),op:Wk(n.op),value:n.value}}}(t):t instanceof $n?function(n){const r=n.getFilters().map(i=>yT(i));return r.length===1?r[0]:{compositeFilter:{op:Kk(n.op),filters:r}}}(t):oe()}function Gk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function vT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,n,r,i,s=ue.min(),o=ue.min(),l=Rt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new li(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qk{constructor(e){this.ct=e}}function Yk(t){const e=zk({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(){this.un=new Xk}addToCollectionParentIndex(e,n){return this.un.add(n),z.resolve()}getCollectionParents(e,n){return z.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return z.resolve()}deleteFieldIndex(e,n){return z.resolve()}deleteAllFieldIndexes(e){return z.resolve()}createTargetIndexes(e,n){return z.resolve()}getDocumentsMatchingTarget(e,n){return z.resolve(null)}getIndexType(e,n){return z.resolve(0)}getFieldIndexes(e,n){return z.resolve([])}getNextCollectionGroupToUpdate(e){return z.resolve(null)}getMinOffset(e,n){return z.resolve(Ti.min())}getMinOffsetFromCollectionGroup(e,n){return z.resolve(Ti.min())}updateCollectionGroup(e,n,r){return z.resolve()}updateIndexEntries(e,n){return z.resolve()}}class Xk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Tt(Le.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Tt(Le.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wo(0)}static kn(){return new wo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.changes=new ko(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Va(r.mutation,i,Vn.empty(),ut.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=me()){const i=Hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=wa();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,me()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=Vr();const o=Oa(),l=function(){return Oa()}();return n.forEach((u,c)=>{const h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof vs)?s=s.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Va(h.mutation,c,h.mutation.getFieldMask(),ut.now())):o.set(c.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var m;return l.set(c,new eN(h,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Oa();let i=new We((o,l)=>o-l),s=me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Vn.empty();h=l.applyToLocalView(c,h),r.set(u,h);const m=(i.get(l.batchId)||me()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,m=ZE();h.forEach(g=>{if(!s.has(g)){const I=sT(n.get(g),r.get(g));I!==null&&m.set(g,I),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Zp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):z.resolve(Hi());let l=-1,u=s;return o.next(c=>z.forEach(c,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(h)?z.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,me())).next(h=>({batchId:l,changes:XE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let i=wa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=wa();return this.indexManager.getCollectionParents(e,s).next(l=>z.forEach(l,u=>{const c=function(m,g){return new ys(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,Vt.newInvalidDocument(h)))});let l=wa();return o.forEach((u,c)=>{const h=s.get(u);h!==void 0&&Va(h.mutation,c,Vn.empty(),ut.now()),Zc(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nN{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return z.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:lr(i.createTime)}}(n)),z.resolve()}getNamedQuery(e,n){return z.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Yk(i.bundledQuery),readTime:lr(i.readTime)}}(n)),z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(){this.overlays=new We(te.comparator),this.Ir=new Map}getOverlay(e,n){return z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Hi();return z.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),z.resolve()}getOverlaysForCollection(e,n,r){const i=Hi(),s=n.length+1,o=new te(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new We((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=s.get(c.largestBatchId);h===null&&(h=Hi(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Hi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=i)););return z.resolve(l)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Rk(n,r));let s=this.Ir.get(n);s===void 0&&(s=me(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iN{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(){this.Tr=new Tt(ct.Er),this.dr=new Tt(ct.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ct(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new te(new Le([])),r=new ct(n,e),i=new ct(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new te(new Le([])),r=new ct(n,e),i=new ct(n,e+1);let s=me();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ct(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return te.comparator(e.key,n.key)||Se(e.wr,n.wr)}static Ar(e,n){return Se(e.wr,n.wr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Tt(ct.Er)}checkEmpty(e){return z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Sk(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.br=this.br.add(new ct(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return z.resolve(o)}lookupMutationBatch(e,n){return z.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return z.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return z.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),i=new ct(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const l=this.Dr(o.wr);s.push(l)}),z.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Tt(Se);return n.forEach(i=>{const s=new ct(i,0),o=new ct(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],l=>{r=r.add(l.wr)})}),z.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;te.isDocumentKey(s)||(s=s.child(""));const o=new ct(new te(s),0);let l=new Tt(Se);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(u.wr)),!0)},o),z.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){ke(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return z.forEach(n.mutations,i=>{const s=new ct(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ct(n,0),i=this.br.firstAfterOrEqual(r);return z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,z.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.Mr=e,this.docs=function(){return new We(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return z.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let r=Vr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Vt.newInvalidDocument(i))}),z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Vr();const o=n.path,l=new te(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||BC(UC(h),r)<=0||(i.has(h.key)||Zc(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return z.resolve(s)}getAllFromCollectionGroup(e,n,r,i){oe()}Or(e,n){return z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new aN(this)}getSize(e){return z.resolve(this.size)}}class aN extends Zk{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),z.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.persistence=e,this.Nr=new ko(n=>Yp(n),Jp),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.Lr=0,this.Br=new im,this.targetCount=0,this.kr=wo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),z.resolve()}getLastRemoteSnapshotVersion(e){return z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return z.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),z.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new wo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,z.resolve()}updateTargetData(e,n){return this.Kn(n),z.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,z.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),z.waitFor(s).next(()=>i)}getTargetCount(e){return z.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return z.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),z.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),z.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return z.resolve(r)}containsKey(e,n){return z.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Kp(0),this.Kr=!1,this.Kr=!0,this.$r=new iN,this.referenceDelegate=e(this),this.Ur=new lN(this),this.indexManager=new Jk,this.remoteDocumentCache=function(i){return new oN(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Qk(n),this.Gr=new nN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sN(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new cN(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return z.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class cN extends zC{constructor(e){super(),this.currentSequenceNumber=e}}class sm{constructor(e){this.persistence=e,this.Jr=new im,this.Yr=null}static Zr(e){return new sm(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),z.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),z.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),z.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return z.forEach(this.Xr,r=>{const i=te.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,ue.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return z.or([()=>z.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=me(),i=me();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new om(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return XR()?8:qC(Mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new dN;return this.Xi(e,n,o).next(l=>{if(s.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(ua()<=ge.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",Ls(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),z.resolve()):(ua()<=ge.DEBUG&&J("QueryEngine","Query:",Ls(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ua()<=ge.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",Ls(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,or(n))):z.resolve())}Yi(e,n){if(dv(n))return z.resolve(null);let r=or(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=vc(n,null,"F"),r=or(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=me(...s);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,vc(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,i){return dv(n)||i.isEqual(ue.min())?z.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?z.resolve(null):(ua()<=ge.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ls(n)),this.rs(e,o,n,FC(i,-1)).next(l=>l))})}ts(e,n){let r=new Tt(YE(e));return n.forEach((i,s)=>{Zc(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return ua()<=ge.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",Ls(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ti.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new We(Se),this._s=new ko(s=>Yp(s),Jp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tN(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function pN(t,e,n,r){return new fN(t,e,n,r)}async function _T(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=me();for(const c of i){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of s){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function mN(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const m=c.batch,g=m.keys();let I=z.resolve();return g.forEach(x=>{I=I.next(()=>h.getEntry(u,x)).next(P=>{const O=c.docVersions.get(x);ke(O!==null),P.version.compareTo(O)<0&&(m.applyToRemoteDocument(P,c),P.isValidDocument()&&(P.setReadTime(c.commitVersion),h.addEntry(P)))})}),I.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=me();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wT(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function gN(t,e){const n=ae(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const l=[];e.targetChanges.forEach((h,m)=>{const g=i.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,m)));let I=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?I=I.withResumeToken(Rt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(h.resumeToken,r)),i=i.insert(m,I),function(P,O,S){return P.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(g,I,h)&&l.push(n.Ur.updateTargetData(s,I))});let u=Vr(),c=me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(yN(s,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ue.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(m=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return z.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.os=i,s))}function yN(t,e,n){let r=me(),i=me();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Vr();return n.forEach((l,u)=>{const c=s.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ue.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):J("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function vN(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _N(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,z.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new li(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function bf(t,e,n){const r=ae(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Al(o))throw o;J("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Tv(t,e,n){const r=ae(t);let i=ue.min(),s=me();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const m=ae(u),g=m._s.get(h);return g!==void 0?z.resolve(m.os.get(g)):m.Ur.getTargetData(c,h)}(r,o,or(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:ue.min(),n?s:me())).next(l=>(wN(r,uk(e),l),{documents:l,Ts:s})))}function wN(t,e,n){let r=t.us.get(e)||ue.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class Iv{constructor(){this.activeTargetIds=mk()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class EN{constructor(){this.so=new Iv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Iv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){J("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){J("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mu=null;function lh(){return mu===null?mu=function(){return 268435456+Math.round(2147483648*Math.random())}():mu++,"0x"+mu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class RN extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const l=lh(),u=this.xo(n,r.toUriEncodedString());J("RestConnection",`Sending RPC '${n}' ${l}:`,u,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,u,c,i).then(h=>(J("RestConnection",`Received RPC '${n}' ${l}: `,h),h),h=>{throw mo("RestConnection",`RPC '${n}' ${l} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(n,r,i,s,o,l){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Po}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=IN[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=lh();return new Promise((o,l)=>{const u=new NE;u.setWithCredentials(!0),u.listenOnce(DE.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Du.NO_ERROR:const h=u.getResponseJson();J(Dt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Du.TIMEOUT:J(Dt,`RPC '${e}' ${s} timed out`),l(new Q(U.DEADLINE_EXCEEDED,"Request time out"));break;case Du.HTTP_ERROR:const m=u.getStatus();if(J(Dt,`RPC '${e}' ${s} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const I=g==null?void 0:g.error;if(I&&I.status&&I.message){const x=function(O){const S=O.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(S)>=0?S:U.UNKNOWN}(I.status);l(new Q(x,I.message))}else l(new Q(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Q(U.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{J(Dt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);J(Dt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=lh(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VE(),l=OE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.xmlHttpFactory=new bE({})),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");J(Dt,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);let g=!1,I=!1;const x=new SN({Io:O=>{I?J(Dt,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(g||(J(Dt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),g=!0),J(Dt,`RPC '${e}' stream ${i} sending:`,O),m.send(O))},To:()=>m.close()}),P=(O,S,w)=>{O.listen(S,A=>{try{w(A)}catch(j){setTimeout(()=>{throw j},0)}})};return P(m,_a.EventType.OPEN,()=>{I||(J(Dt,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),P(m,_a.EventType.CLOSE,()=>{I||(I=!0,J(Dt,`RPC '${e}' stream ${i} transport closed`),x.So())}),P(m,_a.EventType.ERROR,O=>{I||(I=!0,mo(Dt,`RPC '${e}' stream ${i} transport errored:`,O),x.So(new Q(U.UNAVAILABLE,"The operation could not be completed")))}),P(m,_a.EventType.MESSAGE,O=>{var S;if(!I){const w=O.data[0];ke(!!w);const A=w,j=A.error||((S=A[0])===null||S===void 0?void 0:S.error);if(j){J(Dt,`RPC '${e}' stream ${i} received error:`,j);const $=j.status;let k=function(_){const E=Ze[_];if(E!==void 0)return lT(E)}($),T=j.message;k===void 0&&(k=U.INTERNAL,T="Unknown error status: "+$+" with message "+j.message),I=!0,x.So(new Q(k,T)),m.close()}else J(Dt,`RPC '${e}' stream ${i} received:`,w),x.bo(w)}}),P(l,LE.STAT_EVENT,O=>{O.stat===Tf.PROXY?J(Dt,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===Tf.NOPROXY&&J(Dt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}function uh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){return new Ok(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,r,i,s,o,l,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ET(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new Q(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return J("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(J("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AN extends TT{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Mk(this.serializer,e),r=function(s){if(!("targetChange"in s))return ue.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ue.min():o.readTime?lr(o.readTime):ue.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Nf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Af(u)?{documents:Bk(s,u)}:{query:mT(s,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=dT(s,o.resumeToken);const c=Pf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ue.min())>0){l.readTime=Ec(s,o.snapshotVersion.toTimestamp());const c=Pf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=qk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Nf(this.serializer),n.removeTarget=e,this.a_(n)}}class xN extends TT{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ke(!!e.streamToken),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ke(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Uk(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Nf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Fk(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Cf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Q(U.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Cf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(U.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class CN{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Or(n),this.D_=!1):J("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{_s(this)&&(J("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ae(u);c.L_.add(4),await Cl(c),c.q_.set("Unknown"),c.L_.delete(4),await id(c)}(this))})}),this.q_=new CN(r,i)}}async function id(t){if(_s(t))for(const e of t.B_)await e(!0)}async function Cl(t){for(const e of t.B_)await e(!1)}function IT(t,e){const n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),cm(n)?um(n):No(n).r_()&&lm(n,e))}function am(t,e){const n=ae(t),r=No(n);n.N_.delete(e),r.r_()&&ST(n,e),n.N_.size===0&&(r.r_()?r.o_():_s(n)&&n.q_.set("Unknown"))}function lm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}No(t).A_(e)}function ST(t,e){t.Q_.xe(e),No(t).R_(e)}function um(t){t.Q_=new Nk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),No(t).start(),t.q_.v_()}function cm(t){return _s(t)&&!No(t).n_()&&t.N_.size>0}function _s(t){return ae(t).L_.size===0}function RT(t){t.Q_=void 0}async function NN(t){t.q_.set("Online")}async function bN(t){t.N_.forEach((e,n)=>{lm(t,e)})}async function DN(t,e){RT(t),cm(t)?(t.q_.M_(e),um(t)):t.q_.set("Unknown")}async function LN(t,e,n){if(t.q_.set("Online"),e instanceof cT&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.N_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.N_.delete(l),i.Q_.removeTarget(l))}(t,e)}catch(r){J("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Tc(t,r)}else if(e instanceof Vu?t.Q_.Ke(e):e instanceof uT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ue.min()))try{const r=await wT(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.N_.get(c);h&&s.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(Rt.EMPTY_BYTE_STRING,h.snapshotVersion)),ST(s,u);const m=new li(h.target,u,c,h.sequenceNumber);lm(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){J("RemoteStore","Failed to raise snapshot:",r),await Tc(t,r)}}async function Tc(t,e,n){if(!Al(e))throw e;t.L_.add(1),await Cl(t),t.q_.set("Offline"),n||(n=()=>wT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await id(t)})}function AT(t,e){return e().catch(n=>Tc(t,n,e))}async function sd(t){const e=ae(t),n=Si(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;ON(e);)try{const i=await vN(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,VN(e,i)}catch(i){await Tc(e,i)}xT(e)&&PT(e)}function ON(t){return _s(t)&&t.O_.length<10}function VN(t,e){t.O_.push(e);const n=Si(t);n.r_()&&n.V_&&n.m_(e.mutations)}function xT(t){return _s(t)&&!Si(t).n_()&&t.O_.length>0}function PT(t){Si(t).start()}async function jN(t){Si(t).p_()}async function MN(t){const e=Si(t);for(const n of t.O_)e.m_(n.mutations)}async function FN(t,e,n){const r=t.O_.shift(),i=tm.from(r,e,n);await AT(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await sd(t)}async function UN(t,e){e&&Si(t).V_&&await async function(r,i){if(function(o){return Pk(o)&&o!==U.ABORTED}(i.code)){const s=r.O_.shift();Si(r).s_(),await AT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await sd(r)}}(t,e),xT(t)&&PT(t)}async function Rv(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),J("RemoteStore","RemoteStore received new credentials");const r=_s(n);n.L_.add(3),await Cl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await id(n)}async function BN(t,e){const n=ae(t);e?(n.L_.delete(2),await id(n)):e||(n.L_.add(2),await Cl(n),n.q_.set("Unknown"))}function No(t){return t.K_||(t.K_=function(n,r,i){const s=ae(n);return s.w_(),new AN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:NN.bind(null,t),Ro:bN.bind(null,t),mo:DN.bind(null,t),d_:LN.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),cm(t)?um(t):t.q_.set("Unknown")):(await t.K_.stop(),RT(t))})),t.K_}function Si(t){return t.U_||(t.U_=function(n,r,i){const s=ae(n);return s.w_(),new xN(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:jN.bind(null,t),mo:UN.bind(null,t),f_:MN.bind(null,t),g_:FN.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await sd(t)):(await t.U_.stop(),t.O_.length>0&&(J("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new dm(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hm(t,e){if(Or("AsyncQueue",`${e}: ${t}`),Al(t))return new Q(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=wa(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new oo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(){this.W_=new We(te.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Eo{constructor(e,n,r,i,s,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Eo(e,n,oo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class zN{constructor(){this.queries=xv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ae(n),s=i.queries;i.queries=xv(),s.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new Q(U.ABORTED,"Firestore shutting down"))}}function xv(){return new ko(t=>QE(t),Xc)}async function CT(t,e){const n=ae(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new $N,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=hm(o,`Initialization of query '${Ls(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&fm(n)}async function kT(t,e){const n=ae(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function qN(t,e){const n=ae(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.j_)l.X_(i)&&(r=!0);o.z_=i}}r&&fm(n)}function HN(t,e,n){const r=ae(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function fm(t){t.Y_.forEach(e=>{e.next()})}var Df,Pv;(Pv=Df||(Df={})).ea="default",Pv.Cache="cache";class NT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.key=e}}class DT{constructor(e){this.key=e}}class WN{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=me(),this.mutatedKeys=me(),this.Aa=YE(e),this.Ra=new oo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Av,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const g=i.get(h),I=Zc(this.query,m)?m:null,x=!!g&&this.mutatedKeys.has(g.key),P=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let O=!1;g&&I?g.data.isEqual(I.data)?x!==P&&(r.track({type:3,doc:I}),O=!0):this.ga(g,I)||(r.track({type:2,doc:I}),O=!0,(u&&this.Aa(I,u)>0||c&&this.Aa(I,c)<0)&&(l=!0)):!g&&I?(r.track({type:0,doc:I}),O=!0):g&&!I&&(r.track({type:1,doc:g}),O=!0,(u||c)&&(l=!0)),O&&(I?(o=o.add(I),s=P?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:l,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(I,x){const P=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return P(I)-P(x)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),i=i!=null&&i;const l=n&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Eo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Av,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new DT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new bT(r))}),n}ba(e){this.Ta=e.Ts,this.da=me();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class KN{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class GN{constructor(e){this.key=e,this.va=!1}}class QN{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ko(l=>QE(l),Xc),this.Ma=new Map,this.xa=new Set,this.Oa=new We(te.comparator),this.Na=new Map,this.La=new im,this.Ba={},this.ka=new Map,this.qa=wo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function YN(t,e,n=!0){const r=FT(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await LT(r,e,n,!0),i}async function JN(t,e){const n=FT(t);await LT(n,e,!0,!1)}async function LT(t,e,n,r){const i=await _N(t.localStore,or(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let l;return r&&(l=await XN(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&IT(t.remoteStore,i),l}async function XN(t,e,n,r,i){t.Ka=(m,g,I)=>async function(P,O,S,w){let A=O.view.ma(S);A.ns&&(A=await Tv(P.localStore,O.query,!1).then(({documents:T})=>O.view.ma(T,A)));const j=w&&w.targetChanges.get(O.targetId),$=w&&w.targetMismatches.get(O.targetId)!=null,k=O.view.applyChanges(A,P.isPrimaryClient,j,$);return kv(P,O.targetId,k.wa),k.snapshot}(t,m,g,I);const s=await Tv(t.localStore,e,!0),o=new WN(e,s.Ts),l=o.ma(s.documents),u=Pl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,u);kv(t,n,c.wa);const h=new KN(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function ZN(t,e,n){const r=ae(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Xc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await bf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&am(r.remoteStore,i.targetId),Lf(r,i.targetId)}).catch(Rl)):(Lf(r,i.targetId),await bf(r.localStore,i.targetId,!0))}async function eb(t,e){const n=ae(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),am(n.remoteStore,r.targetId))}async function tb(t,e,n){const r=lb(t);try{const i=await function(o,l){const u=ae(o),c=ut.now(),h=l.reduce((I,x)=>I.add(x.key),me());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let x=Vr(),P=me();return u.cs.getEntries(I,h).next(O=>{x=O,x.forEach((S,w)=>{w.isValidDocument()||(P=P.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,x)).next(O=>{m=O;const S=[];for(const w of l){const A=Tk(w,m.get(w.key).overlayedDocument);A!=null&&S.push(new vs(w.key,A,BE(A.value.mapValue),ar.exists(!0)))}return u.mutationQueue.addMutationBatch(I,c,S,l)}).next(O=>{g=O;const S=O.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(I,O.batchId,S)})}).then(()=>({batchId:g.batchId,changes:XE(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new We(Se)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await kl(r,i.changes),await sd(r.remoteStore)}catch(i){const s=hm(i,"Failed to persist write");n.reject(s)}}async function OT(t,e){const n=ae(t);try{const r=await gN(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(ke(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ke(o.va):i.removedDocuments.size>0&&(ke(o.va),o.va=!1))}),await kl(n,r,e)}catch(r){await Rl(r)}}function Cv(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const l=o.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ae(o);u.onlineState=l;let c=!1;u.queries.forEach((h,m)=>{for(const g of m.j_)g.Z_(l)&&(c=!0)}),c&&fm(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function nb(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new We(te.comparator);o=o.insert(s,Vt.newNoDocument(s,ue.min()));const l=me().add(s),u=new nd(ue.min(),new Map,new We(Se),o,l);await OT(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),pm(r)}else await bf(r.localStore,e,!1).then(()=>Lf(r,e,n)).catch(Rl)}async function rb(t,e){const n=ae(t),r=e.batch.batchId;try{const i=await mN(n.localStore,e);jT(n,r,null),VT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kl(n,i)}catch(i){await Rl(i)}}async function ib(t,e,n){const r=ae(t);try{const i=await function(o,l){const u=ae(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(ke(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);jT(r,e,n),VT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kl(r,i)}catch(i){await Rl(i)}}function VT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function jT(t,e,n){const r=ae(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Lf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||MT(t,r)})}function MT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(am(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),pm(t))}function kv(t,e,n){for(const r of n)r instanceof bT?(t.La.addReference(r.key,e),sb(t,r)):r instanceof DT?(J("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||MT(t,r.key)):oe()}function sb(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(J("SyncEngine","New document in limbo: "+n),t.xa.add(r),pm(t))}function pm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new te(Le.fromString(e)),r=t.qa.next();t.Na.set(r,new GN(n)),t.Oa=t.Oa.insert(n,r),IT(t.remoteStore,new li(or(Xp(n.path)),r,"TargetPurposeLimboResolution",Kp.oe))}}async function kl(t,e,n){const r=ae(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){i.push(c);const m=om.Wi(u.targetId,c);s.push(m)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(u,c){const h=ae(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>z.forEach(c,g=>z.forEach(g.$i,I=>h.persistence.referenceDelegate.addReference(m,g.targetId,I)).next(()=>z.forEach(g.Ui,I=>h.persistence.referenceDelegate.removeReference(m,g.targetId,I)))))}catch(m){if(!Al(m))throw m;J("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const I=h.os.get(g),x=I.snapshotVersion,P=I.withLastLimboFreeSnapshotVersion(x);h.os=h.os.insert(g,P)}}}(r.localStore,s))}async function ob(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){J("SyncEngine","User change. New user:",e.toKey());const r=await _T(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(l=>{l.forEach(u=>{u.reject(new Q(U.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kl(n,r.hs)}}function ab(t,e){const n=ae(t),r=n.Na.get(e);if(r&&r.va)return me().add(r.key);{let i=me();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const l=n.Fa.get(o);i=i.unionWith(l.view.Va)}return i}}function FT(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=OT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ab.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nb.bind(null,e),e.Ca.d_=qN.bind(null,e.eventManager),e.Ca.$a=HN.bind(null,e.eventManager),e}function lb(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ib.bind(null,e),e}class Nv{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=rd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return pN(this.persistence,new hN,e.initialUser,this.serializer)}createPersistence(e){return new uN(sm.Zr,this.serializer)}createSharedClientState(e){return new EN}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ub{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Cv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ob.bind(null,this.syncEngine),await BN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new zN}()}createDatastore(e){const n=rd(e.databaseInfo.databaseId),r=function(s){return new RN(s)}(e.databaseInfo);return function(s,o,l,u){return new PN(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new kN(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Cv(this.syncEngine,n,0),function(){return Sv.D()?new Sv:new TN}())}createSyncEngine(e,n){return function(i,s,o,l,u,c,h){const m=new QN(i,s,o,l,u,c);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ae(i);J("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Cl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=ME.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{J("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(J("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Q(U.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=hm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ch(t,e){t.asyncQueue.verifyOperationInProgress(),J("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _T(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function bv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await hb(t);J("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Rv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Rv(e.remoteStore,i)),t._onlineComponents=e}function db(t){return t.name==="FirebaseError"?t.code===U.FAILED_PRECONDITION||t.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function hb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J("FirestoreClient","Using user provided OfflineComponentProvider");try{await ch(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!db(n))throw n;mo("Error using user provided cache. Falling back to memory cache: "+n),await ch(t,new Nv)}}else J("FirestoreClient","Using default OfflineComponentProvider"),await ch(t,new Nv);return t._offlineComponents}async function mm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J("FirestoreClient","Using user provided OnlineComponentProvider"),await bv(t,t._uninitializedComponentsProvider._online)):(J("FirestoreClient","Using default OnlineComponentProvider"),await bv(t,new ub))),t._onlineComponents}function fb(t){return mm(t).then(e=>e.syncEngine)}function pb(t){return mm(t).then(e=>e.datastore)}async function BT(t){const e=await mm(t),n=e.eventManager;return n.onListen=YN.bind(null,e.syncEngine),n.onUnlisten=ZN.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=JN.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=eb.bind(null,e.syncEngine),n}function mb(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new UT({next:g=>{o.enqueueAndForget(()=>kT(s,m));const I=g.docs.has(l);!I&&g.fromCache?c.reject(new Q(U.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&g.fromCache&&u&&u.source==="server"?c.reject(new Q(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new NT(Xp(l.path),h,{includeMetadataChanges:!0,_a:!0});return CT(s,m)}(await BT(t),t.asyncQueue,e,n,r)),r.promise}function gb(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,c){const h=new UT({next:g=>{o.enqueueAndForget(()=>kT(s,m)),g.fromCache&&u.source==="server"?c.reject(new Q(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new NT(l,h,{includeMetadataChanges:!0,_a:!0});return CT(s,m)}(await BT(t),t.asyncQueue,e,n,r)),r.promise}function yb(t,e,n){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await pb(t);r.resolve(async function(o,l,u){var c;const h=ae(o),{request:m,ut:g,parent:I}=$k(h.serializer,lk(l),u);h.connection.Fo||delete m.parent;const x=(await h.Lo("RunAggregationQuery",h.serializer.databaseId,I,m,1)).filter(O=>!!O.result);ke(x.length===1);const P=(c=x[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(P).reduce((O,S)=>(O[g[S]]=P[S],O),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t,e,n){if(!n)throw new Q(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vb(t,e,n,r){if(e===!0&&r===!0)throw new Q(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Lv(t){if(!te.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ov(t){if(te.isDocumentKey(t))throw new Q(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function od(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function jr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=od(t);throw new Q(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$T((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Q(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ad{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Q(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Q(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kC;switch(r.type){case"firstParty":return new LC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Dv.get(n);r&&(J("ComponentProvider","Removing Datastore"),Dv.delete(n),r.terminate())}(this),Promise.resolve()}}function _b(t,e,n,r={}){var i;const s=(t=jr(t,ad))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=Lt.MOCK_USER;else{l=KR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Lt(c)}t._authCredentials=new NC(new jE(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ur(this.firestore,e,this._query)}}class Jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _i(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Jt(this.firestore,e,this._key)}}class _i extends Ur{constructor(e,n,r){super(e,n,Xp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Jt(this.firestore,null,new te(e))}withConverter(e){return new _i(this.firestore,e,this._path)}}function Nl(t,e,...n){if(t=ft(t),zT("collection","path",e),t instanceof ad){const r=Le.fromString(e,...n);return Ov(r),new _i(t,null,r)}{if(!(t instanceof Jt||t instanceof _i))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return Ov(r),new _i(t.firestore,null,r)}}function zn(t,e,...n){if(t=ft(t),arguments.length===1&&(e=ME.newId()),zT("doc","path",e),t instanceof ad){const r=Le.fromString(e,...n);return Lv(r),new Jt(t,null,new te(r))}{if(!(t instanceof Jt||t instanceof _i))throw new Q(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Le.fromString(e,...n));return Lv(r),new Jt(t.firestore,t instanceof _i?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wb{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new ET(this,"async_queue_retry"),this.Eu=()=>{const n=uh();n&&J("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=uh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=uh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new sr;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Al(e))throw e;J("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Or("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=dm.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&oe()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class bo extends ad{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new wb}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qT(this),this._firestoreClient.terminate()}}function Eb(t,e){const n=Vp(),r="(default)",i=ms(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=HR("firestore");s&&_b(i,...s)}return i}function ld(t){return t._firestoreClient||qT(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qT(t){var e,n,r;const i=t._freezeSettings(),s=function(l,u,c,h){return new GC(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,$T(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new cb(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class Ib{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(Rt.fromBase64String(e))}catch(n){throw new Q(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new To(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Se(this._lat,e._lat)||Se(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=/^__.*__$/;class Rb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new xl(e,this.data,n,this.fieldTransforms)}}function WT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class _m{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new _m(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Ic(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(WT(this.wu)&&Sb.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class Ab{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||rd(e)}Nu(e,n,r,i=!1){return new _m({wu:e,methodName:n,Ou:r,path:wt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ud(t){const e=t._freezeSettings(),n=rd(t._databaseId);return new Ab(t._databaseId,!!e.ignoreUndefinedProperties,n)}function KT(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);JT("Data must be an object, but it was:",o,r);const l=QT(r,o);let u,c;if(s.merge)u=new Vn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const g=xb(e,m,n);if(!o.contains(g))throw new Q(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Cb(h,g)||h.push(g)}u=new Vn(h),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new Rb(new _n(l),u,c)}function GT(t,e,n,r=!1){return wm(n,t.Nu(r?4:3,e))}function wm(t,e){if(YT(t=ft(t)))return JT("Unsupported field value:",e,t),QT(t,e);if(t instanceof HT)return function(r,i){if(!WT(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=wm(l,i.Fu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ft(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gk(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ut.fromDate(r);return{timestampValue:Ec(i.serializer,s)}}if(r instanceof ut){const s=new ut(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ec(i.serializer,s)}}if(r instanceof ym)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof To)return{bytesValue:dT(i.serializer,r._byteString)};if(r instanceof Jt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:rm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof vm)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Mu("VectorValues must only contain numeric values.");return em(l.serializer,u)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${od(r)}`)}(t,e)}function QT(t,e){const n={};return FE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Co(t,(r,i)=>{const s=wm(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function YT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ut||t instanceof ym||t instanceof To||t instanceof Jt||t instanceof HT||t instanceof vm)}function JT(t,e,n){if(!YT(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=od(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function xb(t,e,n){if((e=ft(e))instanceof gm)return e._internalPath;if(typeof e=="string")return XT(t,e);throw Ic("Field path arguments must be of type string or ",t,!1,void 0,n)}const Pb=new RegExp("[~\\*/\\[\\]]");function XT(t,e,n){if(e.search(Pb)>=0)throw Ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gm(...e.split("."))._internalPath}catch{throw Ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ic(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Q(U.INVALID_ARGUMENT,l+t+u)}function Cb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kb extends Em{data(){return super.data()}}function Tm(t,e){return typeof e=="string"?XT(t,e):e instanceof gm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nb(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Im{}class cd extends Im{}function bb(t,e,...n){let r=[];e instanceof Im&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Rm).length,l=s.filter(u=>u instanceof Sm).length;if(o>1||o>0&&l>0)throw new Q(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Sm extends cd{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sm(e,n,r)}_apply(e){const n=this._parse(e);return ZT(e._query,n),new Ur(e.firestore,e.converter,xf(e._query,n))}_parse(e){const n=ud(e.firestore);return function(s,o,l,u,c,h,m){let g;if(c.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Q(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Mv(m,h);const I=[];for(const x of m)I.push(jv(u,s,x));g={arrayValue:{values:I}}}else g=jv(u,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Mv(m,h),g=GT(l,o,m,h==="in"||h==="not-in");return nt.create(c,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Rm extends Im{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Rm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)ZT(o,u),o=xf(o,u)}(e._query,n),new Ur(e.firestore,e.converter,xf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Am extends cd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Am(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Q(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ul(s,o)}(e._query,this._field,this._direction);return new Ur(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ys(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Db(t,e="asc"){const n=e,r=Tm("orderBy",t);return Am._create(r,n)}class xm extends cd{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new xm(e,n,r)}_apply(e){return new Ur(e.firestore,e.converter,vc(e._query,this._limit,this._limitType))}}function Lb(t){return xm._create("limit",t,"F")}class Pm extends cd{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Pm(e,n,r)}_apply(e){const n=Vb(e,this.type,this._docOrFields,this._inclusive);return new Ur(e.firestore,e.converter,function(i,s){return new ys(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function Ob(...t){return Pm._create("startAfter",t,!1)}function Vb(t,e,n,r){if(n[0]=ft(n[0]),n[0]instanceof Em)return function(s,o,l,u,c){if(!u)throw new Q(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const m of so(s))if(m.field.isKeyField())h.push(yc(o,u.key));else{const g=u.data.field(m.field);if(Jc(g))throw new Q(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+m.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const I=m.field.canonicalString();throw new Q(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}h.push(g)}return new _o(h,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=ud(t.firestore);return function(o,l,u,c,h,m){const g=o.explicitOrderBy;if(h.length>g.length)throw new Q(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let x=0;x<h.length;x++){const P=h[x];if(g[x].field.isKeyField()){if(typeof P!="string")throw new Q(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof P}`);if(!Zp(o)&&P.indexOf("/")!==-1)throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${P}' contains a slash.`);const O=o.path.child(Le.fromString(P));if(!te.isDocumentKey(O))throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${O}' is not because it contains an odd number of segments.`);const S=new te(O);I.push(yc(l,S))}else{const O=GT(u,c,P);I.push(O)}}return new _o(I,m)}(t._query,t.firestore._databaseId,i,e,n,r)}}function jv(t,e,n){if(typeof(n=ft(n))=="string"){if(n==="")throw new Q(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Zp(e)&&n.indexOf("/")!==-1)throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Le.fromString(n));if(!te.isDocumentKey(r))throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return yc(t,new te(r))}if(n instanceof Jt)return yc(t,n._key);throw new Q(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${od(n)}.`)}function Mv(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZT(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class jb{convertValue(e,n="none"){switch(as(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Co(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Je(o.doubleValue));return new vm(s)}convertGeoPoint(e){return new ym(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Gp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){const n=Ii(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Le.fromString(e);ke(vT(r));const i=new al(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(n)||Or(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function Mb(){return new Tb("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tI extends Em{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ju(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ju extends tI{data(e={}){return super.data(e)}}class Fb{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ju(this._firestore,this._userDataWriter,r.key,r,new Ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new ju(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new ju(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:Ub(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function Ub(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(t){t=jr(t,Jt);const e=jr(t.firestore,bo);return mb(ld(e),t._key).then(n=>$b(e,t,n))}class Cm extends jb{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Jt(this.firestore,null,n)}}function nI(t){t=jr(t,Ur);const e=jr(t.firestore,bo),n=ld(e),r=new Cm(e);return Nb(t._query),gb(n,t._query).then(i=>new Fb(e,r,t,i))}function Bb(t,e,n){t=jr(t,Jt);const r=jr(t.firestore,bo),i=eI(t.converter,e);return rI(r,[KT(ud(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ar.none())])}function km(t,e){const n=jr(t.firestore,bo),r=zn(t),i=eI(t.converter,e);return rI(n,[KT(ud(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ar.exists(!1))]).then(()=>r)}function rI(t,e){return function(r,i){const s=new sr;return r.asyncQueue.enqueueAndForget(async()=>tb(await fb(r),i,s)),s.promise}(ld(t),e)}function $b(t,e,n){const r=n.docs.get(e._key),i=new Cm(t);return new tI(t,i,e._key,r,new Ta(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t){return qb(t,{count:Mb()})}function qb(t,e){const n=jr(t.firestore,bo),r=ld(n),i=WC(e,(s,o)=>new Ak(o,s.aggregateType,s._internalFieldPath));return yb(r,t._query,i).then(s=>function(l,u,c){const h=new Cm(l);return new Ib(u,h,c)}(n,t,s))}(function(e,n=!0){(function(i){Po=i})(Ao),ur(new Un("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new bo(new bC(r.getProvider("auth-internal")),new VC(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new al(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Tn(tv,"4.7.1",e),Tn(tv,"4.7.1","esm2017")})();const iI="@firebase/installations",Nm="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=1e4,oI=`w:${Nm}`,aI="FIS_v2",Hb="https://firebaseinstallations.googleapis.com/v1",Wb=60*60*1e3,Kb="installations",Gb="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ls=new ps(Kb,Gb,Qb);function lI(t){return t instanceof qn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI({projectId:t}){return`${Hb}/projects/${t}/installations`}function cI(t){return{token:t.token,requestStatus:2,expiresIn:Jb(t.expiresIn),creationTime:Date.now()}}async function dI(t,e){const r=(await e.json()).error;return ls.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function hI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Yb(t,{refreshToken:e}){const n=hI(t);return n.append("Authorization",Xb(e)),n}async function fI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Jb(t){return Number(t.replace("s","000"))}function Xb(t){return`${aI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zb({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=uI(t),i=hI(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:aI,appId:t.appId,sdkVersion:oI},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await fI(()=>fetch(r,l));if(u.ok){const c=await u.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:cI(c.authToken)}}else throw await dI("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=/^[cdef][\w-]{21}$/,Of="";function nD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=rD(t);return tD.test(n)?n:Of}catch{return Of}}function rD(t){return eD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mI=new Map;function gI(t,e){const n=dd(t);yI(n,e),iD(n,e)}function yI(t,e){const n=mI.get(t);if(n)for(const r of n)r(e)}function iD(t,e){const n=sD();n&&n.postMessage({key:t,fid:e}),oD()}let Wi=null;function sD(){return!Wi&&"BroadcastChannel"in self&&(Wi=new BroadcastChannel("[Firebase] FID Change"),Wi.onmessage=t=>{yI(t.data.key,t.data.fid)}),Wi}function oD(){mI.size===0&&Wi&&(Wi.close(),Wi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD="firebase-installations-database",lD=1,us="firebase-installations-store";let dh=null;function bm(){return dh||(dh=H0(aD,lD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(us)}}})),dh}async function Sc(t,e){const n=dd(t),i=(await bm()).transaction(us,"readwrite"),s=i.objectStore(us),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&gI(t,e.fid),e}async function vI(t){const e=dd(t),r=(await bm()).transaction(us,"readwrite");await r.objectStore(us).delete(e),await r.done}async function hd(t,e){const n=dd(t),i=(await bm()).transaction(us,"readwrite"),s=i.objectStore(us),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&gI(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dm(t){let e;const n=await hd(t.appConfig,r=>{const i=uD(r),s=cD(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Of?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function uD(t){const e=t||{fid:nD(),registrationStatus:0};return _I(e)}function cD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ls.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=dD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:hD(t)}:{installationEntry:e}}async function dD(t,e){try{const n=await Zb(t,e);return Sc(t.appConfig,n)}catch(n){throw lI(n)&&n.customData.serverCode===409?await vI(t.appConfig):await Sc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function hD(t){let e=await Fv(t.appConfig);for(;e.registrationStatus===1;)await pI(100),e=await Fv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Dm(t);return r||n}return e}function Fv(t){return hd(t,e=>{if(!e)throw ls.create("installation-not-found");return _I(e)})}function _I(t){return fD(t)?{fid:t.fid,registrationStatus:0}:t}function fD(t){return t.registrationStatus===1&&t.registrationTime+sI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pD({appConfig:t,heartbeatServiceProvider:e},n){const r=mD(t,n),i=Yb(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:oI,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await fI(()=>fetch(r,l));if(u.ok){const c=await u.json();return cI(c)}else throw await dI("Generate Auth Token",u)}function mD(t,{fid:e}){return`${uI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(t,e=!1){let n;const r=await hd(t.appConfig,s=>{if(!wI(s))throw ls.create("not-registered");const o=s.authToken;if(!e&&vD(o))return s;if(o.requestStatus===1)return n=gD(t,e),s;{if(!navigator.onLine)throw ls.create("app-offline");const l=wD(s);return n=yD(t,l),l}});return n?await n:r.authToken}async function gD(t,e){let n=await Uv(t.appConfig);for(;n.authToken.requestStatus===1;)await pI(100),n=await Uv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Lm(t,e):r}function Uv(t){return hd(t,e=>{if(!wI(e))throw ls.create("not-registered");const n=e.authToken;return ED(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function yD(t,e){try{const n=await pD(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Sc(t.appConfig,r),n}catch(n){if(lI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await vI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Sc(t.appConfig,r)}throw n}}function wI(t){return t!==void 0&&t.registrationStatus===2}function vD(t){return t.requestStatus===2&&!_D(t)}function _D(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Wb}function wD(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function ED(t){return t.requestStatus===1&&t.requestTime+sI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(t){const e=t,{installationEntry:n,registrationPromise:r}=await Dm(e);return r?r.catch(console.error):Lm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ID(t,e=!1){const n=t;return await SD(n),(await Lm(n,e)).token}async function SD(t){const{registrationPromise:e}=await Dm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(t){if(!t||!t.options)throw hh("App Configuration");if(!t.name)throw hh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw hh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function hh(t){return ls.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI="installations",AD="installations-internal",xD=t=>{const e=t.getProvider("app").getImmediate(),n=RD(e),r=ms(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},PD=t=>{const e=t.getProvider("app").getImmediate(),n=ms(e,EI).getImmediate();return{getId:()=>TD(n),getToken:i=>ID(n,i)}};function CD(){ur(new Un(EI,xD,"PUBLIC")),ur(new Un(AD,PD,"PRIVATE"))}CD();Tn(iI,Nm);Tn(iI,Nm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="analytics",kD="firebase_id",ND="origin",bD=60*1e3,DD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Om="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt=new Wc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},cn=new ps("analytics","Analytics",LD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t){if(!t.startsWith(Om)){const e=cn.create("invalid-gtag-resource",{gtagURL:t});return Xt.warn(e.message),""}return t}function TI(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function VD(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function jD(t,e){const n=VD("firebase-js-sdk-policy",{createScriptURL:OD}),r=document.createElement("script"),i=`${Om}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function MD(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function FD(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const u=(await TI(n)).find(c=>c.measurementId===i);u&&await e[u.appId]}}catch(l){Xt.error(l)}t("config",i,s)}async function UD(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await TI(n);for(const u of o){const c=l.find(m=>m.measurementId===u),h=c&&e[c.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Xt.error(s)}}function BD(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,u]=o;await UD(t,e,n,l,u)}else if(s==="config"){const[l,u]=o;await FD(t,e,n,r,l,u)}else if(s==="consent"){const[l,u]=o;t("consent",l,u)}else if(s==="get"){const[l,u,c]=o;t("get",l,u,c)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Xt.error(l)}}return i}function $D(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=BD(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function zD(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Om)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=30,HD=1e3;class WD{constructor(e={},n=HD){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const II=new WD;function KD(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function GD(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:KD(r)},s=DD.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let l="";try{const u=await o.json();!((e=u.error)===null||e===void 0)&&e.message&&(l=u.error.message)}catch{}throw cn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function QD(t,e=II,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw cn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw cn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new XD;return setTimeout(async()=>{l.abort()},bD),SI({appId:r,apiKey:i,measurementId:s},o,l,e)}async function SI(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=II){var s;const{appId:o,measurementId:l}=t;try{await YD(r,e)}catch(u){if(l)return Xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:l};throw u}try{const u=await GD(t);return i.deleteThrottleMetadata(o),u}catch(u){const c=u;if(!JD(c)){if(i.deleteThrottleMetadata(o),l)return Xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw u}const h=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?Ay(n,i.intervalMillis,qD):Ay(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,m),Xt.debug(`Calling attemptFetch again in ${h} millis`),SI(t,m,r,i)}}function YD(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(cn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function JD(t){if(!(t instanceof qn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class XD{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function ZD(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(){if(B0())try{await $0()}catch(t){return Xt.warn(cn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Xt.warn(cn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function tL(t,e,n,r,i,s,o){var l;const u=QD(t);u.then(I=>{n[I.measurementId]=I.appId,t.options.measurementId&&I.measurementId!==t.options.measurementId&&Xt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>Xt.error(I)),e.push(u);const c=eL().then(I=>{if(I)return r.getId()}),[h,m]=await Promise.all([u,c]);zD(s)||jD(s,h.measurementId),i("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[ND]="firebase",g.update=!0,m!=null&&(g[kD]=m),i("config",h.measurementId,g),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.app=e}_delete(){return delete ja[this.app.options.appId],Promise.resolve()}}let ja={},Bv=[];const $v={};let fh="dataLayer",rL="gtag",zv,RI,qv=!1;function iL(){const t=[];if(U0()&&t.push("This is a browser extension environment."),ZR()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=cn.create("invalid-analytics-context",{errorInfo:e});Xt.warn(n.message)}}function sL(t,e,n){iL();const r=t.options.appId;if(!r)throw cn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw cn.create("no-api-key");if(ja[r]!=null)throw cn.create("already-exists",{id:r});if(!qv){MD(fh);const{wrappedGtag:s,gtagCore:o}=$D(ja,Bv,$v,fh,rL);RI=s,zv=o,qv=!0}return ja[r]=tL(t,Bv,$v,e,zv,fh,n),new nL(t)}function oL(t=Vp()){t=ft(t);const e=ms(t,Rc);return e.isInitialized()?e.getImmediate():aL(t)}function aL(t,e={}){const n=ms(t,Rc);if(n.isInitialized()){const i=n.getImmediate();if(tl(e,n.getOptions()))return i;throw cn.create("already-initialized")}return n.initialize({options:e})}function lL(t,e,n,r){t=ft(t),ZD(RI,ja[t.app.options.appId],e,n,r).catch(i=>Xt.error(i))}const Hv="@firebase/analytics",Wv="0.10.7";function uL(){ur(new Un(Rc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return sL(r,i,n)},"PUBLIC")),ur(new Un("analytics-internal",t,"PRIVATE")),Tn(Hv,Wv),Tn(Hv,Wv,"esm2017");function t(e){try{const n=e.getProvider(Rc).getImmediate();return{logEvent:(r,i,s)=>lL(n,r,i,s)}}catch(n){throw cn.create("interop-component-reg-failed",{reason:n})}}}uL();const cL={apiKey:"AIzaSyDR27NVCQmVwVNZfNXVGpLKSsJj8f2Filg",authDomain:"darelom-students.firebaseapp.com",projectId:"darelom-students",storageBucket:"darelom-students.appspot.com",messagingSenderId:"993473208393",appId:"1:993473208393:web:294652795108cc161c5f98",measurementId:"G-1K85RQXZQ1"},dL=W0(cL),$t=Eb(),bl=AC();oL(dL);/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $e(){return $e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$e.apply(this,arguments)}var et;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(et||(et={}));const Kv="popstate";function hL(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:l="",hash:u=""}=Br(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),hl("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof s=="string"?s:ds(s))}function r(i,s){cs(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return pL(e,n,r,t)}function de(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cs(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fL(){return Math.random().toString(36).substr(2,8)}function Gv(t,e){return{usr:t.state,key:t.key,idx:e}}function hl(t,e,n,r){return n===void 0&&(n=null),$e({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Br(e):e,{state:n,key:e&&e.key||r||fL()})}function ds(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Br(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function pL(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=et.Pop,u=null,c=h();c==null&&(c=0,o.replaceState($e({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function m(){l=et.Pop;let O=h(),S=O==null?null:O-c;c=O,u&&u({action:l,location:P.location,delta:S})}function g(O,S){l=et.Push;let w=hl(P.location,O,S);n&&n(w,O),c=h()+1;let A=Gv(w,c),j=P.createHref(w);try{o.pushState(A,"",j)}catch($){if($ instanceof DOMException&&$.name==="DataCloneError")throw $;i.location.assign(j)}s&&u&&u({action:l,location:P.location,delta:1})}function I(O,S){l=et.Replace;let w=hl(P.location,O,S);n&&n(w,O),c=h();let A=Gv(w,c),j=P.createHref(w);o.replaceState(A,"",j),s&&u&&u({action:l,location:P.location,delta:0})}function x(O){let S=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof O=="string"?O:ds(O);return w=w.replace(/ $/,"%20"),de(S,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,S)}let P={get action(){return l},get location(){return t(i,o)},listen(O){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Kv,m),u=O,()=>{i.removeEventListener(Kv,m),u=null}},createHref(O){return e(i,O)},createURL:x,encodeLocation(O){let S=x(O);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:g,replace:I,go(O){return o.go(O)}};return P}var Ce;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ce||(Ce={}));const mL=new Set(["lazy","caseSensitive","path","id","index","children"]);function gL(t){return t.index===!0}function fl(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],l=typeof i.id=="string"?i.id:o.join("-");if(de(i.index!==!0||!i.children,"Cannot specify children on an index route"),de(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),gL(i)){let u=$e({},i,e(i),{id:l});return r[l]=u,u}else{let u=$e({},i,e(i),{id:l,children:void 0});return r[l]=u,i.children&&(u.children=fl(i.children,e,o,r)),u}})}function Bi(t,e,n){return n===void 0&&(n="/"),Mu(t,e,n,!1)}function Mu(t,e,n,r){let i=typeof e=="string"?Br(e):e,s=Do(i.pathname||"/",n);if(s==null)return null;let o=AI(t);vL(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=CL(s);l=xL(o[u],c,r)}return l}function yL(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function AI(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(de(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Pr([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(de(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),AI(s.children,e,h,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:RL(c,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of xI(s.path))i(s,o,u)}),e}function xI(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=xI(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function vL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AL(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const _L=/^:[\w-]+$/,wL=3,EL=2,TL=1,IL=10,SL=-2,Qv=t=>t==="*";function RL(t,e){let n=t.split("/"),r=n.length;return n.some(Qv)&&(r+=SL),e&&(r+=EL),n.filter(i=>!Qv(i)).reduce((i,s)=>i+(_L.test(s)?wL:s===""?TL:IL),r)}function AL(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function xL(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",m=Yv({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),g=u.route;if(!m&&c&&n&&!r[r.length-1].route.index&&(m=Yv({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Pr([s,m.pathname]),pathnameBase:bL(Pr([s,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(s=Pr([s,m.pathnameBase]))}return o}function Yv(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=PL(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,h,m)=>{let{paramName:g,isOptional:I}=h;if(g==="*"){let P=l[m]||"";o=s.slice(0,s.length-P.length).replace(/(.)\/+$/,"$1")}const x=l[m];return I&&!x?c[g]=void 0:c[g]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function PL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cs(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function CL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cs(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Do(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function kL(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Br(t):t;return{pathname:n?n.startsWith("/")?n:NL(n,e):e,search:DL(r),hash:LL(i)}}function NL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ph(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fd(t,e){let n=PI(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function pd(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Br(t):(i=$e({},t),de(!i.pathname||!i.pathname.includes("?"),ph("?","pathname","search",i)),de(!i.pathname||!i.pathname.includes("#"),ph("#","pathname","hash",i)),de(!i.search||!i.search.includes("#"),ph("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;i.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=kL(i,l),c=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const Pr=t=>t.join("/").replace(/\/\/+/g,"/"),bL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),DL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Ac{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function md(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const CI=["post","put","patch","delete"],OL=new Set(CI),VL=["get",...CI],jL=new Set(VL),ML=new Set([301,302,303,307,308]),FL=new Set([307,308]),mh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},UL={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ca={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Vm=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,BL=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),kI="remix-router-transitions";function $L(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;de(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let N=t.detectErrorBoundary;i=L=>({hasErrorBoundary:N(L)})}else i=BL;let s={},o=fl(t.routes,i,void 0,s),l,u=t.basename||"/",c=t.unstable_dataStrategy||KL,h=t.unstable_patchRoutesOnMiss,m=$e({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,I=new Set,x=null,P=null,O=null,S=t.hydrationData!=null,w=Bi(o,t.history.location,u),A=null;if(w==null&&!h){let N=Ft(404,{pathname:t.history.location.pathname}),{matches:L,route:M}=o_(o);w=L,A={[M.id]:N}}w&&!t.hydrationData&&Gn(w,o,t.history.location.pathname).active&&(w=null);let j;if(w)if(w.some(N=>N.route.lazy))j=!1;else if(!w.some(N=>N.route.loader))j=!0;else if(m.v7_partialHydration){let N=t.hydrationData?t.hydrationData.loaderData:null,L=t.hydrationData?t.hydrationData.errors:null,M=B=>B.route.loader?typeof B.route.loader=="function"&&B.route.loader.hydrate===!0?!1:N&&N[B.route.id]!==void 0||L&&L[B.route.id]!==void 0:!0;if(L){let B=w.findIndex(K=>L[K.route.id]!==void 0);j=w.slice(0,B+1).every(M)}else j=w.every(M)}else j=t.hydrationData!=null;else if(j=!1,w=[],m.v7_partialHydration){let N=Gn(null,o,t.history.location.pathname);N.active&&N.matches&&(w=N.matches)}let $,k={historyAction:t.history.action,location:t.history.location,matches:w,initialized:j,navigation:mh,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||A,fetchers:new Map,blockers:new Map},T=et.Pop,y=!1,_,E=!1,C=new Map,b=null,R=!1,pe=!1,At=[],Hn=new Set,Re=new Map,G=0,ne=-1,ie=new Map,we=new Set,ye=new Map,Ne=new Map,rt=new Set,pt=new Map,mt=new Map,An=new Map,Vo=!1;function vd(){if(g=t.history.listen(N=>{let{action:L,location:M,delta:B}=N;if(Vo){Vo=!1;return}cs(mt.size===0||B!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let K=zo({currentLocation:k.location,nextLocation:M,historyAction:L});if(K&&B!=null){Vo=!0,t.history.go(B*-1),Di(K,{state:"blocked",location:M,proceed(){Di(K,{state:"proceeding",proceed:void 0,reset:void 0,location:M}),t.history.go(B)},reset(){let X=new Map(k.blockers);X.set(K,ca),it({blockers:X})}});return}return Kn(L,M)}),n){o2(e,C);let N=()=>a2(e,C);e.addEventListener("pagehide",N),b=()=>e.removeEventListener("pagehide",N)}return k.initialized||Kn(et.Pop,k.location,{initialHydration:!0}),$}function Es(){g&&g(),b&&b(),I.clear(),_&&_.abort(),k.fetchers.forEach((N,L)=>Ss(L)),k.blockers.forEach((N,L)=>As(L))}function Ts(N){return I.add(N),()=>I.delete(N)}function it(N,L){L===void 0&&(L={}),k=$e({},k,N);let M=[],B=[];m.v7_fetcherPersist&&k.fetchers.forEach((K,X)=>{K.state==="idle"&&(rt.has(X)?B.push(X):M.push(X))}),[...I].forEach(K=>K(k,{deletedFetchers:B,unstable_viewTransitionOpts:L.viewTransitionOpts,unstable_flushSync:L.flushSync===!0})),m.v7_fetcherPersist&&(M.forEach(K=>k.fetchers.delete(K)),B.forEach(K=>Ss(K)))}function Wn(N,L,M){var B,K;let{flushSync:X}=M===void 0?{}:M,re=k.actionData!=null&&k.navigation.formMethod!=null&&Ln(k.navigation.formMethod)&&k.navigation.state==="loading"&&((B=N.state)==null?void 0:B._isRedirect)!==!0,H;L.actionData?Object.keys(L.actionData).length>0?H=L.actionData:H=null:re?H=k.actionData:H=null;let le=L.loaderData?i_(k.loaderData,L.loaderData,L.matches||[],L.errors):k.loaderData,Z=k.blockers;Z.size>0&&(Z=new Map(Z),Z.forEach((Te,Ae)=>Z.set(Ae,ca)));let ee=y===!0||k.navigation.formMethod!=null&&Ln(k.navigation.formMethod)&&((K=N.state)==null?void 0:K._isRedirect)!==!0;l&&(o=l,l=void 0),R||T===et.Pop||(T===et.Push?t.history.push(N,N.state):T===et.Replace&&t.history.replace(N,N.state));let he;if(T===et.Pop){let Te=C.get(k.location.pathname);Te&&Te.has(N.pathname)?he={currentLocation:k.location,nextLocation:N}:C.has(N.pathname)&&(he={currentLocation:N,nextLocation:k.location})}else if(E){let Te=C.get(k.location.pathname);Te?Te.add(N.pathname):(Te=new Set([N.pathname]),C.set(k.location.pathname,Te)),he={currentLocation:k.location,nextLocation:N}}it($e({},L,{actionData:H,loaderData:le,historyAction:T,location:N,initialized:!0,navigation:mh,revalidation:"idle",restoreScrollPosition:Ho(N,L.matches||k.matches),preventScrollReset:ee,blockers:Z}),{viewTransitionOpts:he,flushSync:X===!0}),T=et.Pop,y=!1,E=!1,R=!1,pe=!1,At=[]}async function Is(N,L){if(typeof N=="number"){t.history.go(N);return}let M=Vf(k.location,k.matches,u,m.v7_prependBasename,N,m.v7_relativeSplatPath,L==null?void 0:L.fromRouteId,L==null?void 0:L.relative),{path:B,submission:K,error:X}=Jv(m.v7_normalizeFormMethod,!1,M,L),re=k.location,H=hl(k.location,B,L&&L.state);H=$e({},H,t.history.encodeLocation(H));let le=L&&L.replace!=null?L.replace:void 0,Z=et.Push;le===!0?Z=et.Replace:le===!1||K!=null&&Ln(K.formMethod)&&K.formAction===k.location.pathname+k.location.search&&(Z=et.Replace);let ee=L&&"preventScrollReset"in L?L.preventScrollReset===!0:void 0,he=(L&&L.unstable_flushSync)===!0,Te=zo({currentLocation:re,nextLocation:H,historyAction:Z});if(Te){Di(Te,{state:"blocked",location:H,proceed(){Di(Te,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),Is(N,L)},reset(){let Ae=new Map(k.blockers);Ae.set(Te,ca),it({blockers:Ae})}});return}return await Kn(Z,H,{submission:K,pendingError:X,preventScrollReset:ee,replace:L&&L.replace,enableViewTransition:L&&L.unstable_viewTransition,flushSync:he})}function jo(){if(ot(),it({revalidation:"loading"}),k.navigation.state!=="submitting"){if(k.navigation.state==="idle"){Kn(k.historyAction,k.location,{startUninterruptedRevalidation:!0});return}Kn(T||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation})}}async function Kn(N,L,M){_&&_.abort(),_=null,T=N,R=(M&&M.startUninterruptedRevalidation)===!0,xs(k.location,k.matches),y=(M&&M.preventScrollReset)===!0,E=(M&&M.enableViewTransition)===!0;let B=l||o,K=M&&M.overrideNavigation,X=Bi(B,L,u),re=(M&&M.flushSync)===!0,H=Gn(X,B,L.pathname);if(H.active&&H.matches&&(X=H.matches),!X){let{error:ve,notFoundMatches:Ye,route:Be}=fr(L.pathname);Wn(L,{matches:Ye,loaderData:{},errors:{[Be.id]:ve}},{flushSync:re});return}if(k.initialized&&!pe&&ZL(k.location,L)&&!(M&&M.submission&&Ln(M.submission.formMethod))){Wn(L,{matches:X},{flushSync:re});return}_=new AbortController;let le=Ds(t.history,L,_.signal,M&&M.submission),Z;if(M&&M.pendingError)Z=[Qs(X).route.id,{type:Ce.error,error:M.pendingError}];else if(M&&M.submission&&Ln(M.submission.formMethod)){let ve=await _d(le,L,M.submission,X,H.active,{replace:M.replace,flushSync:re});if(ve.shortCircuited)return;if(ve.pendingActionResult){let[Ye,Be]=ve.pendingActionResult;if(sn(Be)&&md(Be.error)&&Be.error.status===404){_=null,Wn(L,{matches:ve.matches,loaderData:{},errors:{[Ye]:Be.error}});return}}X=ve.matches||X,Z=ve.pendingActionResult,K=gh(L,M.submission),re=!1,H.active=!1,le=Ds(t.history,le.url,le.signal)}let{shortCircuited:ee,matches:he,loaderData:Te,errors:Ae}=await wd(le,L,X,H.active,K,M&&M.submission,M&&M.fetcherSubmission,M&&M.replace,M&&M.initialHydration===!0,re,Z);ee||(_=null,Wn(L,$e({matches:he||X},s_(Z),{loaderData:Te,errors:Ae})))}async function _d(N,L,M,B,K,X){X===void 0&&(X={}),ot();let re=i2(L,M);if(it({navigation:re},{flushSync:X.flushSync===!0}),K){let Z=await Oi(B,L.pathname,N.signal);if(Z.type==="aborted")return{shortCircuited:!0};if(Z.type==="error"){let{boundaryId:ee,error:he}=zr(L.pathname,Z);return{matches:Z.partialMatches,pendingActionResult:[ee,{type:Ce.error,error:he}]}}else if(Z.matches)B=Z.matches;else{let{notFoundMatches:ee,error:he,route:Te}=fr(L.pathname);return{matches:ee,pendingActionResult:[Te.id,{type:Ce.error,error:he}]}}}let H,le=Ia(B,L);if(!le.route.action&&!le.route.lazy)H={type:Ce.error,error:Ft(405,{method:N.method,pathname:L.pathname,routeId:le.route.id})};else if(H=(await $r("action",N,[le],B))[0],N.signal.aborted)return{shortCircuited:!0};if(Gi(H)){let Z;return X&&X.replace!=null?Z=X.replace:Z=t_(H.response.headers.get("Location"),new URL(N.url),u)===k.location.pathname+k.location.search,await hr(N,H,{submission:M,replace:Z}),{shortCircuited:!0}}if(Ki(H))throw Ft(400,{type:"defer-action"});if(sn(H)){let Z=Qs(B,le.route.id);return(X&&X.replace)!==!0&&(T=et.Push),{matches:B,pendingActionResult:[Z.route.id,H]}}return{matches:B,pendingActionResult:[le.route.id,H]}}async function wd(N,L,M,B,K,X,re,H,le,Z,ee){let he=K||gh(L,X),Te=X||re||c_(he),Ae=!R&&(!m.v7_partialHydration||!le);if(B){if(Ae){let Ve=Mo(ee);it($e({navigation:he},Ve!==void 0?{actionData:Ve}:{}),{flushSync:Z})}let ce=await Oi(M,L.pathname,N.signal);if(ce.type==="aborted")return{shortCircuited:!0};if(ce.type==="error"){let{boundaryId:Ve,error:Pt}=zr(L.pathname,ce);return{matches:ce.partialMatches,loaderData:{},errors:{[Ve]:Pt}}}else if(ce.matches)M=ce.matches;else{let{error:Ve,notFoundMatches:Pt,route:Pe}=fr(L.pathname);return{matches:Pt,loaderData:{},errors:{[Pe.id]:Ve}}}}let ve=l||o,[Ye,Be]=Xv(t.history,k,M,Te,L,m.v7_partialHydration&&le===!0,m.v7_skipActionErrorRevalidation,pe,At,Hn,rt,ye,we,ve,u,ee);if(Li(ce=>!(M&&M.some(Ve=>Ve.route.id===ce))||Ye&&Ye.some(Ve=>Ve.route.id===ce)),ne=++G,Ye.length===0&&Be.length===0){let ce=Rs();return Wn(L,$e({matches:M,loaderData:{},errors:ee&&sn(ee[1])?{[ee[0]]:ee[1].error}:null},s_(ee),ce?{fetchers:new Map(k.fetchers)}:{}),{flushSync:Z}),{shortCircuited:!0}}if(Ae){let ce={};if(!B){ce.navigation=he;let Ve=Mo(ee);Ve!==void 0&&(ce.actionData=Ve)}Be.length>0&&(ce.fetchers=Fo(Be)),it(ce,{flushSync:Z})}Be.forEach(ce=>{Re.has(ce.key)&&xn(ce.key),ce.controller&&Re.set(ce.key,ce.controller)});let qr=()=>Be.forEach(ce=>xn(ce.key));_&&_.signal.addEventListener("abort",qr);let{loaderResults:Qn,fetcherResults:Pn}=await st(k.matches,M,Ye,Be,N);if(N.signal.aborted)return{shortCircuited:!0};_&&_.signal.removeEventListener("abort",qr),Be.forEach(ce=>Re.delete(ce.key));let mr=a_([...Qn,...Pn]);if(mr){if(mr.idx>=Ye.length){let ce=Be[mr.idx-Ye.length].key;we.add(ce)}return await hr(N,mr.result,{replace:H}),{shortCircuited:!0}}let{loaderData:Yn,errors:xt}=r_(k,M,Ye,Qn,ee,Be,Pn,pt);pt.forEach((ce,Ve)=>{ce.subscribe(Pt=>{(Pt||ce.done)&&pt.delete(Ve)})}),m.v7_partialHydration&&le&&k.errors&&Object.entries(k.errors).filter(ce=>{let[Ve]=ce;return!Ye.some(Pt=>Pt.route.id===Ve)}).forEach(ce=>{let[Ve,Pt]=ce;xt=Object.assign(xt||{},{[Ve]:Pt})});let gn=Rs(),Hr=Ol(ne),Ps=gn||Hr||Be.length>0;return $e({matches:M,loaderData:Yn,errors:xt},Ps?{fetchers:new Map(k.fetchers)}:{})}function Mo(N){if(N&&!sn(N[1]))return{[N[0]]:N[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function Fo(N){return N.forEach(L=>{let M=k.fetchers.get(L.key),B=da(void 0,M?M.data:void 0);k.fetchers.set(L.key,B)}),new Map(k.fetchers)}function Ll(N,L,M,B){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Re.has(N)&&xn(N);let K=(B&&B.unstable_flushSync)===!0,X=l||o,re=Vf(k.location,k.matches,u,m.v7_prependBasename,M,m.v7_relativeSplatPath,L,B==null?void 0:B.relative),H=Bi(X,re,u),le=Gn(H,X,re);if(le.active&&le.matches&&(H=le.matches),!H){mn(N,L,Ft(404,{pathname:re}),{flushSync:K});return}let{path:Z,submission:ee,error:he}=Jv(m.v7_normalizeFormMethod,!0,re,B);if(he){mn(N,L,he,{flushSync:K});return}let Te=Ia(H,Z);if(y=(B&&B.preventScrollReset)===!0,ee&&Ln(ee.formMethod)){Ed(N,L,Z,Te,H,le.active,K,ee);return}ye.set(N,{routeId:L,path:Z}),Uo(N,L,Z,Te,H,le.active,K,ee)}async function Ed(N,L,M,B,K,X,re,H){ot(),ye.delete(N);function le(Pe){if(!Pe.route.action&&!Pe.route.lazy){let tn=Ft(405,{method:H.formMethod,pathname:M,routeId:L});return mn(N,L,tn,{flushSync:re}),!0}return!1}if(!X&&le(B))return;let Z=k.fetchers.get(N);en(N,s2(H,Z),{flushSync:re});let ee=new AbortController,he=Ds(t.history,M,ee.signal,H);if(X){let Pe=await Oi(K,M,he.signal);if(Pe.type==="aborted")return;if(Pe.type==="error"){let{error:tn}=zr(M,Pe);mn(N,L,tn,{flushSync:re});return}else if(Pe.matches){if(K=Pe.matches,B=Ia(K,M),le(B))return}else{mn(N,L,Ft(404,{pathname:M}),{flushSync:re});return}}Re.set(N,ee);let Te=G,ve=(await $r("action",he,[B],K))[0];if(he.signal.aborted){Re.get(N)===ee&&Re.delete(N);return}if(m.v7_fetcherPersist&&rt.has(N)){if(Gi(ve)||sn(ve)){en(N,Yr(void 0));return}}else{if(Gi(ve))if(Re.delete(N),ne>Te){en(N,Yr(void 0));return}else return we.add(N),en(N,da(H)),hr(he,ve,{fetcherSubmission:H});if(sn(ve)){mn(N,L,ve.error);return}}if(Ki(ve))throw Ft(400,{type:"defer-action"});let Ye=k.navigation.location||k.location,Be=Ds(t.history,Ye,ee.signal),qr=l||o,Qn=k.navigation.state!=="idle"?Bi(qr,k.navigation.location,u):k.matches;de(Qn,"Didn't find any matches after fetcher action");let Pn=++G;ie.set(N,Pn);let mr=da(H,ve.data);k.fetchers.set(N,mr);let[Yn,xt]=Xv(t.history,k,Qn,H,Ye,!1,m.v7_skipActionErrorRevalidation,pe,At,Hn,rt,ye,we,qr,u,[B.route.id,ve]);xt.filter(Pe=>Pe.key!==N).forEach(Pe=>{let tn=Pe.key,Wo=k.fetchers.get(tn),jl=da(void 0,Wo?Wo.data:void 0);k.fetchers.set(tn,jl),Re.has(tn)&&xn(tn),Pe.controller&&Re.set(tn,Pe.controller)}),it({fetchers:new Map(k.fetchers)});let gn=()=>xt.forEach(Pe=>xn(Pe.key));ee.signal.addEventListener("abort",gn);let{loaderResults:Hr,fetcherResults:Ps}=await st(k.matches,Qn,Yn,xt,Be);if(ee.signal.aborted)return;ee.signal.removeEventListener("abort",gn),ie.delete(N),Re.delete(N),xt.forEach(Pe=>Re.delete(Pe.key));let ce=a_([...Hr,...Ps]);if(ce){if(ce.idx>=Yn.length){let Pe=xt[ce.idx-Yn.length].key;we.add(Pe)}return hr(Be,ce.result)}let{loaderData:Ve,errors:Pt}=r_(k,k.matches,Yn,Hr,void 0,xt,Ps,pt);if(k.fetchers.has(N)){let Pe=Yr(ve.data);k.fetchers.set(N,Pe)}Ol(Pn),k.navigation.state==="loading"&&Pn>ne?(de(T,"Expected pending action"),_&&_.abort(),Wn(k.navigation.location,{matches:Qn,loaderData:Ve,errors:Pt,fetchers:new Map(k.fetchers)})):(it({errors:Pt,loaderData:i_(k.loaderData,Ve,Qn,Pt),fetchers:new Map(k.fetchers)}),pe=!1)}async function Uo(N,L,M,B,K,X,re,H){let le=k.fetchers.get(N);en(N,da(H,le?le.data:void 0),{flushSync:re});let Z=new AbortController,ee=Ds(t.history,M,Z.signal);if(X){let ve=await Oi(K,M,ee.signal);if(ve.type==="aborted")return;if(ve.type==="error"){let{error:Ye}=zr(M,ve);mn(N,L,Ye,{flushSync:re});return}else if(ve.matches)K=ve.matches,B=Ia(K,M);else{mn(N,L,Ft(404,{pathname:M}),{flushSync:re});return}}Re.set(N,Z);let he=G,Ae=(await $r("loader",ee,[B],K))[0];if(Ki(Ae)&&(Ae=await OI(Ae,ee.signal,!0)||Ae),Re.get(N)===Z&&Re.delete(N),!ee.signal.aborted){if(rt.has(N)){en(N,Yr(void 0));return}if(Gi(Ae))if(ne>he){en(N,Yr(void 0));return}else{we.add(N),await hr(ee,Ae);return}if(sn(Ae)){mn(N,L,Ae.error);return}de(!Ki(Ae),"Unhandled fetcher deferred data"),en(N,Yr(Ae.data))}}async function hr(N,L,M){let{submission:B,fetcherSubmission:K,replace:X}=M===void 0?{}:M;L.response.headers.has("X-Remix-Revalidate")&&(pe=!0);let re=L.response.headers.get("Location");de(re,"Expected a Location header on the redirect Response"),re=t_(re,new URL(N.url),u);let H=hl(k.location,re,{_isRedirect:!0});if(n){let Ae=!1;if(L.response.headers.has("X-Remix-Reload-Document"))Ae=!0;else if(Vm.test(re)){const ve=t.history.createURL(re);Ae=ve.origin!==e.location.origin||Do(ve.pathname,u)==null}if(Ae){X?e.location.replace(re):e.location.assign(re);return}}_=null;let le=X===!0||L.response.headers.has("X-Remix-Replace")?et.Replace:et.Push,{formMethod:Z,formAction:ee,formEncType:he}=k.navigation;!B&&!K&&Z&&ee&&he&&(B=c_(k.navigation));let Te=B||K;if(FL.has(L.response.status)&&Te&&Ln(Te.formMethod))await Kn(le,H,{submission:$e({},Te,{formAction:re}),preventScrollReset:y});else{let Ae=gh(H,B);await Kn(le,H,{overrideNavigation:Ae,fetcherSubmission:K,preventScrollReset:y})}}async function $r(N,L,M,B){try{let K=await GL(c,N,L,M,B,s,i);return await Promise.all(K.map((X,re)=>{if(t2(X)){let H=X.result;return{type:Ce.redirect,response:JL(H,L,M[re].route.id,B,u,m.v7_relativeSplatPath)}}return YL(X)}))}catch(K){return M.map(()=>({type:Ce.error,error:K}))}}async function st(N,L,M,B,K){let[X,...re]=await Promise.all([M.length?$r("loader",K,M,L):[],...B.map(H=>{if(H.matches&&H.match&&H.controller){let le=Ds(t.history,H.path,H.controller.signal);return $r("loader",le,[H.match],H.matches).then(Z=>Z[0])}else return Promise.resolve({type:Ce.error,error:Ft(404,{pathname:H.path})})})]);return await Promise.all([u_(N,M,X,X.map(()=>K.signal),!1,k.loaderData),u_(N,B.map(H=>H.match),re,B.map(H=>H.controller?H.controller.signal:null),!0)]),{loaderResults:X,fetcherResults:re}}function ot(){pe=!0,At.push(...Li()),ye.forEach((N,L)=>{Re.has(L)&&(Hn.add(L),xn(L))})}function en(N,L,M){M===void 0&&(M={}),k.fetchers.set(N,L),it({fetchers:new Map(k.fetchers)},{flushSync:(M&&M.flushSync)===!0})}function mn(N,L,M,B){B===void 0&&(B={});let K=Qs(k.matches,L);Ss(N),it({errors:{[K.route.id]:M},fetchers:new Map(k.fetchers)},{flushSync:(B&&B.flushSync)===!0})}function Bo(N){return m.v7_fetcherPersist&&(Ne.set(N,(Ne.get(N)||0)+1),rt.has(N)&&rt.delete(N)),k.fetchers.get(N)||UL}function Ss(N){let L=k.fetchers.get(N);Re.has(N)&&!(L&&L.state==="loading"&&ie.has(N))&&xn(N),ye.delete(N),ie.delete(N),we.delete(N),rt.delete(N),Hn.delete(N),k.fetchers.delete(N)}function bi(N){if(m.v7_fetcherPersist){let L=(Ne.get(N)||0)-1;L<=0?(Ne.delete(N),rt.add(N)):Ne.set(N,L)}else Ss(N);it({fetchers:new Map(k.fetchers)})}function xn(N){let L=Re.get(N);de(L,"Expected fetch controller: "+N),L.abort(),Re.delete(N)}function $o(N){for(let L of N){let M=Bo(L),B=Yr(M.data);k.fetchers.set(L,B)}}function Rs(){let N=[],L=!1;for(let M of we){let B=k.fetchers.get(M);de(B,"Expected fetcher: "+M),B.state==="loading"&&(we.delete(M),N.push(M),L=!0)}return $o(N),L}function Ol(N){let L=[];for(let[M,B]of ie)if(B<N){let K=k.fetchers.get(M);de(K,"Expected fetcher: "+M),K.state==="loading"&&(xn(M),ie.delete(M),L.push(M))}return $o(L),L.length>0}function Td(N,L){let M=k.blockers.get(N)||ca;return mt.get(N)!==L&&mt.set(N,L),M}function As(N){k.blockers.delete(N),mt.delete(N)}function Di(N,L){let M=k.blockers.get(N)||ca;de(M.state==="unblocked"&&L.state==="blocked"||M.state==="blocked"&&L.state==="blocked"||M.state==="blocked"&&L.state==="proceeding"||M.state==="blocked"&&L.state==="unblocked"||M.state==="proceeding"&&L.state==="unblocked","Invalid blocker state transition: "+M.state+" -> "+L.state);let B=new Map(k.blockers);B.set(N,L),it({blockers:B})}function zo(N){let{currentLocation:L,nextLocation:M,historyAction:B}=N;if(mt.size===0)return;mt.size>1&&cs(!1,"A router only supports one blocker at a time");let K=Array.from(mt.entries()),[X,re]=K[K.length-1],H=k.blockers.get(X);if(!(H&&H.state==="proceeding")&&re({currentLocation:L,nextLocation:M,historyAction:B}))return X}function fr(N){let L=Ft(404,{pathname:N}),M=l||o,{matches:B,route:K}=o_(M);return Li(),{notFoundMatches:B,route:K,error:L}}function zr(N,L){return{boundaryId:Qs(L.partialMatches).route.id,error:Ft(400,{type:"route-discovery",pathname:N,message:L.error!=null&&"message"in L.error?L.error:String(L.error)})}}function Li(N){let L=[];return pt.forEach((M,B)=>{(!N||N(B))&&(M.cancel(),L.push(B),pt.delete(B))}),L}function pr(N,L,M){if(x=N,O=L,P=M||null,!S&&k.navigation===mh){S=!0;let B=Ho(k.location,k.matches);B!=null&&it({restoreScrollPosition:B})}return()=>{x=null,O=null,P=null}}function qo(N,L){return P&&P(N,L.map(B=>yL(B,k.loaderData)))||N.key}function xs(N,L){if(x&&O){let M=qo(N,L);x[M]=O()}}function Ho(N,L){if(x){let M=qo(N,L),B=x[M];if(typeof B=="number")return B}return null}function Gn(N,L,M){if(h)if(N){let B=N[N.length-1].route;if(B.path&&(B.path==="*"||B.path.endsWith("/*")))return{active:!0,matches:Mu(L,M,u,!0)}}else return{active:!0,matches:Mu(L,M,u,!0)||[]};return{active:!1,matches:null}}async function Oi(N,L,M){let B=N,K=B.length>0?B[B.length-1].route:null;for(;;){let X=l==null,re=l||o;try{await WL(h,L,B,re,s,i,An,M)}catch(ee){return{type:"error",error:ee,partialMatches:B}}finally{X&&(o=[...o])}if(M.aborted)return{type:"aborted"};let H=Bi(re,L,u),le=!1;if(H){let ee=H[H.length-1].route;if(ee.index)return{type:"success",matches:H};if(ee.path&&ee.path.length>0)if(ee.path==="*")le=!0;else return{type:"success",matches:H}}let Z=Mu(re,L,u,!0);if(!Z||B.map(ee=>ee.route.id).join("-")===Z.map(ee=>ee.route.id).join("-"))return{type:"success",matches:le?H:null};if(B=Z,K=B[B.length-1].route,K.path==="*")return{type:"success",matches:B}}}function gt(N){s={},l=fl(N,i,void 0,s)}function Vl(N,L){let M=l==null;bI(N,L,l||o,s,i),M&&(o=[...o],it({}))}return $={get basename(){return u},get future(){return m},get state(){return k},get routes(){return o},get window(){return e},initialize:vd,subscribe:Ts,enableScrollRestoration:pr,navigate:Is,fetch:Ll,revalidate:jo,createHref:N=>t.history.createHref(N),encodeLocation:N=>t.history.encodeLocation(N),getFetcher:Bo,deleteFetcher:bi,dispose:Es,getBlocker:Td,deleteBlocker:As,patchRoutes:Vl,_internalFetchControllers:Re,_internalActiveDeferreds:pt,_internalSetRoutes:gt},$}function zL(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Vf(t,e,n,r,i,s,o,l){let u,c;if(o){u=[];for(let m of e)if(u.push(m),m.route.id===o){c=m;break}}else u=e,c=e[e.length-1];let h=pd(i||".",fd(u,s),Do(t.pathname,n)||t.pathname,l==="path");return i==null&&(h.search=t.search,h.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!jm(h.search)&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(h.pathname=h.pathname==="/"?n:Pr([n,h.pathname])),ds(h)}function Jv(t,e,n,r){if(!r||!zL(r))return{path:n};if(r.formMethod&&!r2(r.formMethod))return{path:n,error:Ft(405,{method:r.formMethod})};let i=()=>({path:n,error:Ft(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),l=DI(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Ln(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((I,x)=>{let[P,O]=x;return""+I+P+"="+O+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!Ln(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:l,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}de(typeof FormData=="function","FormData is not available in this environment");let u,c;if(r.formData)u=jf(r.formData),c=r.formData;else if(r.body instanceof FormData)u=jf(r.body),c=r.body;else if(r.body instanceof URLSearchParams)u=r.body,c=n_(u);else if(r.body==null)u=new URLSearchParams,c=new FormData;else try{u=new URLSearchParams(r.body),c=n_(u)}catch{return i()}let h={formMethod:o,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Ln(h.formMethod))return{path:n,submission:h};let m=Br(n);return e&&m.search&&jm(m.search)&&u.append("index",""),m.search="?"+u,{path:ds(m),submission:h}}function qL(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function Xv(t,e,n,r,i,s,o,l,u,c,h,m,g,I,x,P){let O=P?sn(P[1])?P[1].error:P[1].data:void 0,S=t.createURL(e.location),w=t.createURL(i),A=P&&sn(P[1])?P[0]:void 0,j=A?qL(n,A):n,$=P?P[1].statusCode:void 0,k=o&&$&&$>=400,T=j.filter((_,E)=>{let{route:C}=_;if(C.lazy)return!0;if(C.loader==null)return!1;if(s)return typeof C.loader!="function"||C.loader.hydrate?!0:e.loaderData[C.id]===void 0&&(!e.errors||e.errors[C.id]===void 0);if(HL(e.loaderData,e.matches[E],_)||u.some(pe=>pe===_.route.id))return!0;let b=e.matches[E],R=_;return Zv(_,$e({currentUrl:S,currentParams:b.params,nextUrl:w,nextParams:R.params},r,{actionResult:O,actionStatus:$,defaultShouldRevalidate:k?!1:l||S.pathname+S.search===w.pathname+w.search||S.search!==w.search||NI(b,R)}))}),y=[];return m.forEach((_,E)=>{if(s||!n.some(At=>At.route.id===_.routeId)||h.has(E))return;let C=Bi(I,_.path,x);if(!C){y.push({key:E,routeId:_.routeId,path:_.path,matches:null,match:null,controller:null});return}let b=e.fetchers.get(E),R=Ia(C,_.path),pe=!1;g.has(E)?pe=!1:c.has(E)?(c.delete(E),pe=!0):b&&b.state!=="idle"&&b.data===void 0?pe=l:pe=Zv(R,$e({currentUrl:S,currentParams:e.matches[e.matches.length-1].params,nextUrl:w,nextParams:n[n.length-1].params},r,{actionResult:O,actionStatus:$,defaultShouldRevalidate:k?!1:l})),pe&&y.push({key:E,routeId:_.routeId,path:_.path,matches:C,match:R,controller:new AbortController})}),[T,y]}function HL(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function NI(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function Zv(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function WL(t,e,n,r,i,s,o,l){let u=[e,...n.map(c=>c.route.id)].join("-");try{let c=o.get(u);c||(c=t({path:e,matches:n,patch:(h,m)=>{l.aborted||bI(h,m,r,i,s)}}),o.set(u,c)),c&&e2(c)&&await c}finally{o.delete(u)}}function bI(t,e,n,r,i){if(t){var s;let o=r[t];de(o,"No route found to patch children into: routeId = "+t);let l=fl(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...l):o.children=l}else{let o=fl(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function e_(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];de(i,"No route found in manifest");let s={};for(let o in r){let u=i[o]!==void 0&&o!=="hasErrorBoundary";cs(!u,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!u&&!mL.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,$e({},e(i),{lazy:void 0}))}function KL(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function GL(t,e,n,r,i,s,o,l){let u=r.reduce((m,g)=>m.add(g.route.id),new Set),c=new Set,h=await t({matches:i.map(m=>{let g=u.has(m.route.id);return $e({},m,{shouldLoad:g,resolve:x=>(c.add(m.route.id),g?QL(e,n,m,s,o,x,l):Promise.resolve({type:Ce.data,result:void 0}))})}),request:n,params:i[0].params,context:l});return i.forEach(m=>de(c.has(m.route.id),'`match.resolve()` was not called for route id "'+m.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),h.filter((m,g)=>u.has(i[g].route.id))}async function QL(t,e,n,r,i,s,o){let l,u,c=h=>{let m,g=new Promise((P,O)=>m=O);u=()=>m(),e.signal.addEventListener("abort",u);let I=P=>typeof h!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):h({request:e,params:n.params,context:o},...P!==void 0?[P]:[]),x;return s?x=s(P=>I(P)):x=(async()=>{try{return{type:"data",result:await I()}}catch(P){return{type:"error",result:P}}})(),Promise.race([x,g])};try{let h=n.route[t];if(n.route.lazy)if(h){let m,[g]=await Promise.all([c(h).catch(I=>{m=I}),e_(n.route,i,r)]);if(m!==void 0)throw m;l=g}else if(await e_(n.route,i,r),h=n.route[t],h)l=await c(h);else if(t==="action"){let m=new URL(e.url),g=m.pathname+m.search;throw Ft(405,{method:e.method,pathname:g,routeId:n.route.id})}else return{type:Ce.data,result:void 0};else if(h)l=await c(h);else{let m=new URL(e.url),g=m.pathname+m.search;throw Ft(404,{pathname:g})}de(l.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(h){return{type:Ce.error,result:h}}finally{u&&e.signal.removeEventListener("abort",u)}return l}async function YL(t){let{result:e,type:n}=t;if(LI(e)){let c;try{let h=e.headers.get("Content-Type");h&&/\bapplication\/json\b/.test(h)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(h){return{type:Ce.error,error:h}}return n===Ce.error?{type:Ce.error,error:new Ac(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:Ce.data,data:c,statusCode:e.status,headers:e.headers}}if(n===Ce.error){if(l_(e)){var r;if(e.data instanceof Error){var i;return{type:Ce.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new Ac(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:Ce.error,error:e,statusCode:md(e)?e.status:void 0}}if(n2(e)){var s,o;return{type:Ce.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(l_(e)){var l,u;return{type:Ce.data,data:e.data,statusCode:(l=e.init)==null?void 0:l.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:Ce.data,data:e}}function JL(t,e,n,r,i,s){let o=t.headers.get("Location");if(de(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Vm.test(o)){let l=r.slice(0,r.findIndex(u=>u.route.id===n)+1);o=Vf(new URL(e.url),l,i,!0,o,s),t.headers.set("Location",o)}return t}function t_(t,e,n){if(Vm.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Do(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function Ds(t,e,n,r){let i=t.createURL(DI(e)).toString(),s={signal:n};if(r&&Ln(r.formMethod)){let{formMethod:o,formEncType:l}=r;s.method=o.toUpperCase(),l==="application/json"?(s.headers=new Headers({"Content-Type":l}),s.body=JSON.stringify(r.json)):l==="text/plain"?s.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?s.body=jf(r.formData):s.body=r.formData}return new Request(i,s)}function jf(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function n_(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function XL(t,e,n,r,i,s){let o={},l=null,u,c=!1,h={},m=r&&sn(r[1])?r[1].error:void 0;return n.forEach((g,I)=>{let x=e[I].route.id;if(de(!Gi(g),"Cannot handle redirect results in processLoaderData"),sn(g)){let P=g.error;m!==void 0&&(P=m,m=void 0),l=l||{};{let O=Qs(t,x);l[O.route.id]==null&&(l[O.route.id]=P)}o[x]=void 0,c||(c=!0,u=md(g.error)?g.error.status:500),g.headers&&(h[x]=g.headers)}else Ki(g)?(i.set(x,g.deferredData),o[x]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!c&&(u=g.statusCode),g.headers&&(h[x]=g.headers)):(o[x]=g.data,g.statusCode&&g.statusCode!==200&&!c&&(u=g.statusCode),g.headers&&(h[x]=g.headers))}),m!==void 0&&r&&(l={[r[0]]:m},o[r[0]]=void 0),{loaderData:o,errors:l,statusCode:u||200,loaderHeaders:h}}function r_(t,e,n,r,i,s,o,l){let{loaderData:u,errors:c}=XL(e,n,r,i,l);for(let h=0;h<s.length;h++){let{key:m,match:g,controller:I}=s[h];de(o!==void 0&&o[h]!==void 0,"Did not find corresponding fetcher result");let x=o[h];if(!(I&&I.signal.aborted))if(sn(x)){let P=Qs(t.matches,g==null?void 0:g.route.id);c&&c[P.route.id]||(c=$e({},c,{[P.route.id]:x.error})),t.fetchers.delete(m)}else if(Gi(x))de(!1,"Unhandled fetcher revalidation redirect");else if(Ki(x))de(!1,"Unhandled fetcher deferred data");else{let P=Yr(x.data);t.fetchers.set(m,P)}}return{loaderData:u,errors:c}}function i_(t,e,n,r){let i=$e({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function s_(t){return t?sn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Qs(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function o_(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Ft(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,l="Unknown Server Error",u="Unknown @remix-run/router error";return t===400?(l="Bad Request",s==="route-discovery"?u='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+o):i&&n&&r?u="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?u="defer() is not supported in actions":s==="invalid-body"&&(u="Unable to encode submission body")):t===403?(l="Forbidden",u='Route "'+r+'" does not match URL "'+n+'"'):t===404?(l="Not Found",u='No route matches URL "'+n+'"'):t===405&&(l="Method Not Allowed",i&&n&&r?u="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(u='Invalid request method "'+i.toUpperCase()+'"')),new Ac(t||500,l,new Error(u),!0)}function a_(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Gi(n))return{result:n,idx:e}}}function DI(t){let e=typeof t=="string"?Br(t):t;return ds($e({},e,{hash:""}))}function ZL(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function e2(t){return typeof t=="object"&&t!=null&&"then"in t}function t2(t){return LI(t.result)&&ML.has(t.result.status)}function Ki(t){return t.type===Ce.deferred}function sn(t){return t.type===Ce.error}function Gi(t){return(t&&t.type)===Ce.redirect}function l_(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function n2(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function LI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function r2(t){return jL.has(t.toLowerCase())}function Ln(t){return OL.has(t.toLowerCase())}async function u_(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let l=n[o],u=e[o];if(!u)continue;let c=t.find(m=>m.route.id===u.route.id),h=c!=null&&!NI(c,u)&&(s&&s[u.route.id])!==void 0;if(Ki(l)&&(i||h)){let m=r[o];de(m,"Expected an AbortSignal for revalidating fetcher deferred result"),await OI(l,m,i).then(g=>{g&&(n[o]=g||n[o])})}}}async function OI(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ce.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ce.error,error:i}}return{type:Ce.data,data:t.deferredData.data}}}function jm(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Ia(t,e){let n=typeof e=="string"?Br(e).search:e.search;if(t[t.length-1].route.index&&jm(n||""))return t[t.length-1];let r=PI(t);return r[r.length-1]}function c_(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function gh(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function i2(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function da(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function s2(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Yr(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function o2(t,e){try{let n=t.sessionStorage.getItem(kI);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function a2(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(kI,JSON.stringify(n))}catch(r){cs(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xc(){return xc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xc.apply(this,arguments)}const gd=D.createContext(null),VI=D.createContext(null),Ni=D.createContext(null),Mm=D.createContext(null),dr=D.createContext({outlet:null,matches:[],isDataRoute:!1}),jI=D.createContext(null);function l2(t,e){let{relative:n}=e===void 0?{}:e;Lo()||de(!1);let{basename:r,navigator:i}=D.useContext(Ni),{hash:s,pathname:o,search:l}=FI(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Pr([r,o])),i.createHref({pathname:u,search:l,hash:s})}function Lo(){return D.useContext(Mm)!=null}function Rn(){return Lo()||de(!1),D.useContext(Mm).location}function MI(t){D.useContext(Ni).static||D.useLayoutEffect(t)}function Qe(){let{isDataRoute:t}=D.useContext(dr);return t?T2():u2()}function u2(){Lo()||de(!1);let t=D.useContext(gd),{basename:e,future:n,navigator:r}=D.useContext(Ni),{matches:i}=D.useContext(dr),{pathname:s}=Rn(),o=JSON.stringify(fd(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return MI(()=>{l.current=!0}),D.useCallback(function(c,h){if(h===void 0&&(h={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let m=pd(c,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Pr([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,o,s,t])}const c2=D.createContext(null);function d2(t){let e=D.useContext(dr).outlet;return e&&D.createElement(c2.Provider,{value:t},e)}function Zt(){let{matches:t}=D.useContext(dr),e=t[t.length-1];return e?e.params:{}}function FI(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=D.useContext(Ni),{matches:i}=D.useContext(dr),{pathname:s}=Rn(),o=JSON.stringify(fd(i,r.v7_relativeSplatPath));return D.useMemo(()=>pd(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function h2(t,e,n,r){Lo()||de(!1);let{navigator:i}=D.useContext(Ni),{matches:s}=D.useContext(dr),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=Rn(),h;h=c;let m=h.pathname||"/",g=m;if(u!=="/"){let P=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let I=Bi(t,{pathname:g});return y2(I&&I.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:Pr([u,i.encodeLocation?i.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:Pr([u,i.encodeLocation?i.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),s,n,r)}function f2(){let t=E2(),e=md(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),n?D.createElement("pre",{style:i},n):null,null)}const p2=D.createElement(f2,null);class m2 extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?D.createElement(dr.Provider,{value:this.props.routeContext},D.createElement(jI.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function g2(t){let{routeContext:e,match:n,children:r}=t,i=D.useContext(gd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(dr.Provider,{value:e},r)}function y2(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);h>=0||de(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=h),m.route.id){let{loaderData:g,errors:I}=n,x=m.route.loader&&g[m.route.id]===void 0&&(!I||I[m.route.id]===void 0);if(m.route.lazy||x){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,m,g)=>{let I,x=!1,P=null,O=null;n&&(I=l&&m.route.id?l[m.route.id]:void 0,P=m.route.errorElement||p2,u&&(c<0&&g===0?(x=!0,O=null):c===g&&(x=!0,O=m.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,g+1)),w=()=>{let A;return I?A=P:x?A=O:m.route.Component?A=D.createElement(m.route.Component,null):m.route.element?A=m.route.element:A=h,D.createElement(g2,{match:m,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:A})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?D.createElement(m2,{location:n.location,revalidation:n.revalidation,component:P,error:I,children:w(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):w()},null)}var UI=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(UI||{}),Pc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pc||{});function v2(t){let e=D.useContext(gd);return e||de(!1),e}function _2(t){let e=D.useContext(VI);return e||de(!1),e}function w2(t){let e=D.useContext(dr);return e||de(!1),e}function BI(t){let e=w2(),n=e.matches[e.matches.length-1];return n.route.id||de(!1),n.route.id}function E2(){var t;let e=D.useContext(jI),n=_2(Pc.UseRouteError),r=BI(Pc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function T2(){let{router:t}=v2(UI.UseNavigateStable),e=BI(Pc.UseNavigateStable),n=D.useRef(!1);return MI(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,xc({fromRouteId:e},s)))},[t,e])}function d_(t){let{to:e,replace:n,state:r,relative:i}=t;Lo()||de(!1);let{future:s,static:o}=D.useContext(Ni),{matches:l}=D.useContext(dr),{pathname:u}=Rn(),c=Qe(),h=pd(e,fd(l,s.v7_relativeSplatPath),u,i==="path"),m=JSON.stringify(h);return D.useEffect(()=>c(JSON.parse(m),{replace:n,state:r,relative:i}),[c,m,i,n,r]),null}function I2(t){return d2(t.context)}function De(t){de(!1)}function S2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=et.Pop,navigator:s,static:o=!1,future:l}=t;Lo()&&de(!1);let u=e.replace(/^\/*/,"/"),c=D.useMemo(()=>({basename:u,navigator:s,static:o,future:xc({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Br(r));let{pathname:h="/",search:m="",hash:g="",state:I=null,key:x="default"}=r,P=D.useMemo(()=>{let O=Do(h,u);return O==null?null:{location:{pathname:O,search:m,hash:g,state:I,key:x},navigationType:i}},[u,h,m,g,I,x,i]);return P==null?null:D.createElement(Ni.Provider,{value:c},D.createElement(Mm.Provider,{children:n,value:P}))}new Promise(()=>{});function Mf(t,e){e===void 0&&(e=[]);let n=[];return D.Children.forEach(t,(r,i)=>{if(!D.isValidElement(r))return;let s=[...e,i];if(r.type===D.Fragment){n.push.apply(n,Mf(r.props.children,s));return}r.type!==De&&de(!1),!r.props.index||!r.props.children||de(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Mf(r.props.children,s)),n.push(o)}),n}function R2(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:D.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:D.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:D.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pl(){return pl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pl.apply(this,arguments)}function A2(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function x2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function P2(t,e){return t.button===0&&(!e||e==="_self")&&!x2(t)}function Ff(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function C2(t,e){let n=Ff(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const k2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],N2="6";try{window.__reactRouterVersion=N2}catch{}function b2(t,e){return $L({basename:void 0,future:pl({},void 0,{v7_prependBasename:!0}),history:hL({window:void 0}),hydrationData:D2(),routes:t,mapRouteProperties:R2,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function D2(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=pl({},e,{errors:L2(e.errors)})),e}function L2(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Ac(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const O2=D.createContext({isTransitioning:!1}),V2=D.createContext(new Map),j2="startTransition",h_=RS[j2],M2="flushSync",f_=jR[M2];function F2(t){h_?h_(t):t()}function ha(t){f_?f_(t):t()}class U2{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function B2(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=D.useState(n.state),[o,l]=D.useState(),[u,c]=D.useState({isTransitioning:!1}),[h,m]=D.useState(),[g,I]=D.useState(),[x,P]=D.useState(),O=D.useRef(new Map),{v7_startTransition:S}=r||{},w=D.useCallback(y=>{S?F2(y):y()},[S]),A=D.useCallback((y,_)=>{let{deletedFetchers:E,unstable_flushSync:C,unstable_viewTransitionOpts:b}=_;E.forEach(pe=>O.current.delete(pe)),y.fetchers.forEach((pe,At)=>{pe.data!==void 0&&O.current.set(At,pe.data)});let R=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!b||R){C?ha(()=>s(y)):w(()=>s(y));return}if(C){ha(()=>{g&&(h&&h.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:b.currentLocation,nextLocation:b.nextLocation})});let pe=n.window.document.startViewTransition(()=>{ha(()=>s(y))});pe.finished.finally(()=>{ha(()=>{m(void 0),I(void 0),l(void 0),c({isTransitioning:!1})})}),ha(()=>I(pe));return}g?(h&&h.resolve(),g.skipTransition(),P({state:y,currentLocation:b.currentLocation,nextLocation:b.nextLocation})):(l(y),c({isTransitioning:!0,flushSync:!1,currentLocation:b.currentLocation,nextLocation:b.nextLocation}))},[n.window,g,h,O,w]);D.useLayoutEffect(()=>n.subscribe(A),[n,A]),D.useEffect(()=>{u.isTransitioning&&!u.flushSync&&m(new U2)},[u]),D.useEffect(()=>{if(h&&o&&n.window){let y=o,_=h.promise,E=n.window.document.startViewTransition(async()=>{w(()=>s(y)),await _});E.finished.finally(()=>{m(void 0),I(void 0),l(void 0),c({isTransitioning:!1})}),I(E)}},[w,o,h,n.window]),D.useEffect(()=>{h&&o&&i.location.key===o.location.key&&h.resolve()},[h,g,i.location,o]),D.useEffect(()=>{!u.isTransitioning&&x&&(l(x.state),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),P(void 0))},[u.isTransitioning,x]),D.useEffect(()=>{},[]);let j=D.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:y=>n.navigate(y),push:(y,_,E)=>n.navigate(y,{state:_,preventScrollReset:E==null?void 0:E.preventScrollReset}),replace:(y,_,E)=>n.navigate(y,{replace:!0,state:_,preventScrollReset:E==null?void 0:E.preventScrollReset})}),[n]),$=n.basename||"/",k=D.useMemo(()=>({router:n,navigator:j,static:!1,basename:$}),[n,j,$]),T=D.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return D.createElement(D.Fragment,null,D.createElement(gd.Provider,{value:k},D.createElement(VI.Provider,{value:i},D.createElement(V2.Provider,{value:O.current},D.createElement(O2.Provider,{value:u},D.createElement(S2,{basename:$,location:i.location,navigationType:i.historyAction,navigator:j,future:T},i.initialized||n.future.v7_partialHydration?D.createElement($2,{routes:n.routes,future:n.future,state:i}):e))))),null)}const $2=D.memo(z2);function z2(t){let{routes:e,future:n,state:r}=t;return h2(e,void 0,r,n)}const q2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",H2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,on=D.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:u,to:c,preventScrollReset:h,unstable_viewTransition:m}=e,g=A2(e,k2),{basename:I}=D.useContext(Ni),x,P=!1;if(typeof c=="string"&&H2.test(c)&&(x=c,q2))try{let A=new URL(window.location.href),j=c.startsWith("//")?new URL(A.protocol+c):new URL(c),$=Do(j.pathname,I);j.origin===A.origin&&$!=null?c=$+j.search+j.hash:P=!0}catch{}let O=l2(c,{relative:i}),S=W2(c,{replace:o,state:l,target:u,preventScrollReset:h,relative:i,unstable_viewTransition:m});function w(A){r&&r(A),A.defaultPrevented||S(A)}return D.createElement("a",pl({},g,{href:x||O,onClick:P||s?r:w,ref:n,target:u}))});var p_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(p_||(p_={}));var m_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(m_||(m_={}));function W2(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:l}=e===void 0?{}:e,u=Qe(),c=Rn(),h=FI(t,{relative:o});return D.useCallback(m=>{if(P2(m,n)){m.preventDefault();let g=r!==void 0?r:ds(c)===ds(h);u(t,{replace:g,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:l})}},[c,u,h,r,i,n,t,s,o,l])}function K2(t){let e=D.useRef(Ff(t)),n=D.useRef(!1),r=Rn(),i=D.useMemo(()=>C2(r.search,n.current?null:e.current),[r.search]),s=Qe(),o=D.useCallback((l,u)=>{const c=Ff(typeof l=="function"?l(i):l);n.current=!0,s("?"+c,u)},[s,i]);return[i,o]}const G2=()=>f.jsx("header",{className:"header text-center border-bottom py-3",children:f.jsx("h1",{className:"fw-bold",children:f.jsx(on,{to:"/",className:"text-dark",children:"منصة طلاب دار العلوم"})})}),Q2=()=>f.jsx(f.Fragment,{children:f.jsx("div",{className:"subheader bg-dark text-light fs-6",style:{padding:"11px 0"},children:f.jsxs("div",{className:"container-xl text-center",children:["إعلامات وتحديثات المنصة: ",f.jsx("a",{href:"https://t.me/darelom_students",children:"قناة التليجرام."})]})})}),Y2=()=>f.jsx("footer",{className:"footer bg-black py-4",children:f.jsxs("div",{className:"container text-center text-light",children:[f.jsxs("div",{className:"d-flex flex-wrap gap-4 gap-sm-5",children:[f.jsxs(yh,{title:"تنبيهات هامة",children:[f.jsxs(Nn,{children:[f.jsx("span",{children:"للإبلاغ عن خطأ: "}),f.jsx(on,{to:"/send_problem",children:"أبلغنا من هنا"}),"."]}),f.jsxs(Nn,{children:[f.jsx("span",{children:"لاقتراح تعديلات: "}),f.jsx(on,{to:"/send_suggestion",children:"اقترح من هنا"}),"."]}),f.jsxs(Nn,{children:[f.jsx("span",{children:"إعلامات المنصة: "}),f.jsx("a",{href:"https://t.me/darelom_students",children:"قناة التليجرام"}),"."]})]}),f.jsxs(yh,{title:"أرشيف النتائج",children:[f.jsx(Nn,{children:f.jsx(on,{to:"/degrees/grade_1/2023_24",children:"الفرقة الأولى 2023/24."})}),f.jsx(Nn,{children:f.jsx(on,{to:"/degrees/grade_2/2023_24",children:"الفرقة الثانية 2023/24."})}),f.jsx(Nn,{children:f.jsx(on,{to:"/degrees/grade_3/2023_24",children:"الفرقة الثالثة 2023/24."})}),f.jsx(Nn,{children:f.jsx(on,{to:"/degrees/grade_4/2023_24",children:"الفرقة الرابعة 2023/24."})})]}),f.jsxs(yh,{title:"روابط شخصية",children:[f.jsx(Nn,{children:f.jsx("a",{href:"https://github.com/iabdwahab/darelom-students",children:"ملفات المشروع على GitHub."})}),f.jsx(Nn,{children:f.jsx("a",{href:"https://iabdwahab.github.io",children:"معرض الأعمال."})}),f.jsx(Nn,{children:f.jsx("a",{href:"https://www.linkedin.com/in/iabdwahab/",children:"LinkedIn."})}),f.jsx(Nn,{children:f.jsx("a",{href:"https://github.com/iabdwahab",children:"GitHub."})})]})]}),f.jsx("hr",{}),f.jsxs("p",{className:"m-0",children:[f.jsx("span",{children:"تم إنشاء المنصة بواسطة: "}),f.jsx("span",{className:"text-warning",children:"طلاب الدفعة 153."})]})]})});function yh({title:t,children:e}){return f.jsxs("div",{className:"text-end",children:[f.jsxs("h4",{className:"mb-3",children:[t,":"]}),e]})}function Nn({children:t}){return f.jsxs("p",{className:"m-0",children:["- ",t]})}const J2=()=>{const{pathname:t}=Rn();D.useEffect(()=>{window.scrollTo(0,0)},[t])},X2=()=>{const[t,e]=D.useState(localStorage.getItem("theme")||"light");function n(){document.documentElement.getAttribute("data-bs-theme")==="dark"?(document.documentElement.setAttribute("data-bs-theme","light"),localStorage.setItem("theme","light"),e("light")):(document.documentElement.setAttribute("data-bs-theme","dark"),localStorage.setItem("theme","dark"),e("dark"))}return f.jsx("button",{className:"btn btn-primary w-100 mt-2 p-2",onClick:n,children:t==="light"?"الوضع الداكن [لوليد]":"الوضع العادي [ليس لوليد]"})},Z2=()=>{const t=Qe(),e=JSON.parse(localStorage.getItem("loggedinUser")),n=JSON.parse(localStorage.getItem("loggedinUserInfo"));async function r(){await mP(bl),localStorage.setItem("loggedinUser",null),localStorage.setItem("loggedinUserInfo",null),t("/")}return f.jsx("div",{className:"border-bottom",children:f.jsxs("div",{className:"container-xl py-3",children:[e&&f.jsx(f.Fragment,{children:f.jsxs("p",{className:"fs-4",children:[f.jsx("span",{children:"أهلًا، "}),f.jsxs("span",{className:"fw-bold",children:[n.name,"!"]})]})}),n?f.jsxs("div",{className:"d-flex gap-2",children:[f.jsxs("button",{className:`btn btn-primary w-100 p-2 ${!(n!=null&&n.write_permission)&&"disabled"}`,onClick:()=>t(`/${n==null?void 0:n.grade}/send_question_selector`),children:["أضف سؤالًا ",!(n!=null&&n.write_permission)&&"[تتم مراجعة حسابك]"]}),f.jsx("button",{className:"btn btn-danger w-100 p-2",onClick:r,children:"تسجيل الخروج"})]}):f.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t("signin"),children:"تسجيل الدخول"}),f.jsx(X2,{})]})})},Ht=({hasText:t=!0})=>f.jsxs("div",{className:"d-block text-center py-4",children:[f.jsx("div",{className:"spinner-border text-primary",role:"status",children:f.jsx("span",{className:"sr-only d-none",children:"..."})}),t?f.jsx("p",{className:"fw-bold fs-5 mt-2",children:"صلِّ علَى النَّبِيِّ."}):""]}),eO=()=>{const[t,e]=D.useState(!0);return D.useEffect(()=>{_E(bl,()=>{e(!1)})},[]),f.jsxs("div",{className:"d-flex flex-column min-vh-100",children:[f.jsx(G2,{}),f.jsx(Q2,{}),f.jsx(Z2,{}),f.jsx("div",{className:"container-xl flex-grow-1 py-3",children:f.jsx("div",{children:t?f.jsx(Ht,{}):f.jsx(I2,{})})}),f.jsx(Y2,{}),f.jsx(J2,{})]})},tO=({currentStepIndex:t,setCurrentStepIndex:e,selections:n,setSelections:r})=>{function i(){t>0&&(e(t-1),r(n.slice(0,n.length-1)))}const s=t===0;return f.jsx("button",{className:`btn btn-danger ${s?"d-none":"d-block"}`,onClick:i,children:"رجوع"})},nO=({option:t,stepsList:e,currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})=>{const o=Qe();function l(){if(t.option_data==="test_yourself")return o("/test_yourself");n<e.length-1&&t.will_next?(r(n+1),s([...i,t.option_data])):o(`${i.join("/")}/${t.option_data}`)}const u=`${t.option_text}`;return f.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:l,children:u})},rO=({stepsList:t})=>{var l,u;const e=Rn(),[n,r]=D.useState(((l=e.state)==null?void 0:l.initialStepIndex)||0),[i,s]=D.useState(((u=e.state)==null?void 0:u.selections)||[]),o=t[n];return f.jsxs("div",{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:o.title}),f.jsx(tO,{currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})]}),f.jsx("div",{className:"row g-2 my-2",children:o.options.map((c,h)=>{var m;if(n===0||(m=c.availableAt)!=null&&m.includes(i[0]))return f.jsx("div",{className:"col-sm-6",children:f.jsx(nO,{option:c,stepsList:t,currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})},h)})})]})},pn=({children:t,fontSize:e,py:n})=>f.jsx("h2",{className:`fs-${e||4} py-${n||2} fw-medium bg-dark text-center text-light`,children:t}),iO=()=>f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",children:"#"}),f.jsx("th",{scope:"col",children:"الاسم"}),f.jsx("th",{scope:"col",className:"text-center",children:"النسبة"})]})}),Ri="https://iabdwahab.github.io";async function sO(){return await(await fetch(`${Ri}/darelom-students-data/top_degrees.json`)).json()}const oO=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0);return D.useEffect(()=>{async function i(){let s;s=await sO(),e(s),r(!1)}i()},[]),f.jsxs("div",{className:"top-students",children:[f.jsx(pn,{children:"أوائل الفرق"}),n?f.jsx(Ht,{}):f.jsx("div",{className:"row g-2 mt-1",children:t.map((i,s)=>f.jsxs("div",{className:"border-secondary-subtle rounded-2 py-1 my-0 col-lg-6",children:[f.jsx("h3",{className:"fs-5 bg-dark text-light p-2 my-0",children:i.grade_ar_name}),f.jsxs("table",{className:"table table-striped border",children:[f.jsx(iO,{}),f.jsx(aO,{gradeDegree:i})]}),f.jsx(on,{to:`degrees/${i.grade}/2024_25`,className:"d-block my-2 btn btn-primary fw-bold",children:"عرض القائمة كاملة"})]},s))})]})};function aO({gradeDegree:t}){return f.jsx("tbody",{children:t.list.map((e,n)=>f.jsx(lO,{student:e,grade:t.grade},n))})}function lO({student:t,grade:e}){const n=Qe();return f.jsxs("tr",{className:"degree_tr-linked",onClick:()=>n(`/degrees/${e}/2024_25/${t.id}`),children:[f.jsx("th",{scope:"row",children:t.rank}),f.jsx("td",{children:t.name}),f.jsxs("td",{className:"text-center",children:["%",t.total_percentage]})]})}const uO=[{title:"اختر الفرقة:",options:[{option_text:"الفرقة الأولى",option_data:"grade_1",will_next:!0,available:!0},{option_text:"الفرقة الثانية",option_data:"grade_2",will_next:!0,available:!0},{option_text:"الفرقة الثالثة",option_data:"grade_3",will_next:!0,available:!0},{option_text:"الفرقة الرابعة",option_data:"grade_4",will_next:!0,available:!0},{option_text:"مواد مشتركة",option_data:"general_subjects",will_next:!1,available:!0}]},{title:"عم تبحث؟",options:[{option_text:"جدول المحاضرات",option_data:"schedule",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"كتب دراسية",option_data:"books",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"تسجيلات محاضرات",option_data:"lectures_recordings",will_next:!0,availableAt:["grade_1","grade_2","grade_3"]},{option_text:"اختبر نفسك - أسئلة الطلاب",option_data:"test_yourself_students",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"اختبر نفسك [نسخة تجريبية]",option_data:"test_yourself",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"مصادر إضافية",option_data:"more_resources",will_next:!0,availableAt:["grade_2"]},{option_text:"شروحات",option_data:"explanations",will_next:!1,availableAt:[]},{option_text:"امتحانات الأعوام السابقة",option_data:"final_exams",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]},{title:"اختر الفصل الدراسي:",options:[{option_text:"الفصل الدراسي الأول",option_data:"term_1",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"الفصل الدراسي الثاني",option_data:"term_2",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]}],cO=()=>f.jsxs(f.Fragment,{children:[f.jsx(rO,{stepsList:uO}),f.jsx(oO,{})]});async function dO(t,e){const r=await(await fetch(`${Ri}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();return r.degrees.sort((i,s)=>s.total-i.total),{degrees:r.degrees,studentsCount:r.degrees.length}}async function hO(t){const e=await nI(t),n=e.docs.map(i=>i.data()),r=e.docs[e.docs.length-1];return{degreesData:n,lastStudentData:r}}async function fO(t){return(await zb(t)).data().count}function It(t){return{grade_1:"الفرقة الأولى",grade_2:"الفرقة الثانية",grade_3:"الفرقة الثالثة",grade_4:"الفرقة الرابعة",term_1:"الفصل الدراسي الأول",term_2:"الفصل الدراسي الثاني",nahw:"النحو",sarf:"الصرف",english:"إنجليزي",elm_allugha:"علم اللغة",albalagha:"البلاغة",adab_gahily:"أدب جاهلي",falsafa:"فلسفة",seera_khoalfaa:"السيرة وتاريخ الخلفاء",quran_ebadat:"القرآن والعبادات",naqd_qadim:"نقد أدبي قديم",nsoos_gahilya:"نصوص جاهلية",farsy:"فارسي",ebry:"عبري",riyadat_aamal:"ريادة أعمال",nazm_oslobiya:"النظم والأسلوبية",quran_ahwal:"القرآن الكريم والأحوال الشخصية",adab_islamy_omawy:"أدب إسلامي وأموي",arood:"العَروض",mawarith:"مواريث",maajim_aswat:"المعاجم وعلم الأصوات",balaghat_quran:"بلاغة القرآن",qaet_bahth:"قاعة البحث",nsoos_islamya_omawya:"نصوص إسلامية وأموية",tareekh_omawy_abasy:"تاريخ أموي وعباسي",aqida:"العقيدة",adab_moqaran:"أدب مقارن",adab_abasy_andalusy:"أدب عباسي وأندلسي",olom_quran:"علوم القرآن",tareekh_misr:"تاريخ مصر الحديث",tafseer:"تفسير",elm_kalam:"علم الكلام",nsoos_abasya_andalusya:"نصوص عباسية وأندلسية",ittijahat_lughawiya:"اتجاهات لغوية",adab_hadith:"أدب حديث",hadara_nozom:"حضارة ونظم",tasawof:"تصوف",osool_fiqh:"أصول فقه",horoob_salibiya:"حروب صليبيبة",nsoos_haditha:"نصوص أدبية حديثة",naqd_hadith:"نقد أدبي حديث",mojalad_tasgilat:"مجلد مجمع للمواد",groupped_channel:"قناة تجمع المواد"}[t]}const pO=({student:t,grade:e,year:n})=>{const{id:r,name:i,rank:s,total:o,total_percentage:l}=t,u=Qe();function c(){u(`/degrees/${e}/${n}/${t.id}`)}return f.jsxs("tr",{className:"degree_tr-linked",onClick:c,children:[f.jsx("th",{scope:"row",className:"text-center",children:s}),f.jsx("td",{className:"text-center",children:r}),f.jsx("td",{style:{whiteSpace:"nowrap"},children:i}),f.jsx("td",{className:"text-center",children:o}),f.jsxs("td",{className:"text-center",children:["%",l]})]})},mO=()=>{const t=[{isCentered:!0,text:"#"},{isCentered:!0,text:"رقم الجلوس"},{isCentered:!1,text:"الاسم"},{isCentered:!0,text:"الإجمالي"},{isCentered:!0,text:"النسبة"}];return f.jsx("thead",{children:f.jsx("tr",{children:t.map((e,n)=>f.jsx("th",{scope:"col",className:`${e.isCentered&&"text-center"}`,children:e.text},n))})})},gO=({studentsCount:t})=>{const e=f.jsx("span",{className:"fw-bold",children:t||"غير محدد"});return f.jsxs("h3",{className:"py-2 fs-4",children:["عدد الطلاب: ",e,"."]})},yO=({degreesCollection:t,lastStudent:e,setDataAndHideLoaderFirestore:n})=>{function r(){const i=bb(t,Db("rank","asc"),Ob(e),Lb(40));n(i)}return f.jsx("button",{className:"btn btn-primary w-100",onClick:r,children:"عرض المزيد"})},vO=()=>f.jsx("h3",{className:"fw-bold text-center fs-5",children:"انتهت النتائج."}),Oo=()=>f.jsx("button",{className:"btn btn-primary w-100 disabled",children:f.jsx("div",{className:"spinner-border spinner-border-sm",role:"status"})}),_O=()=>{const{grade:t}=Zt(),e=Qe(),n=D.useRef(null),[r,i]=D.useState(!1);return D.useEffect(()=>{const s=n.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();try{i(!0);const l=s["student_id-input"].value;if(s.checkValidity()){const u=zn($t,`${t}/degrees/2023_24`,l);(await Mr(u)).exists()?e(`${l}`):s.classList.add("was-validated"),n.current.reset()}else s.classList.add("was-validated")}catch(l){console.log(l.message)}finally{i(!1)}})},[]),f.jsxs("form",{className:"row g-3 mt-0 needs-validation",noValidate:!0,ref:n,children:[f.jsx("p",{className:"mb-2 fw-bold",children:"ابحث برقم الجلوس:"}),f.jsxs("div",{className:"col-12 col-sm-10 m-0 mb-2",children:[f.jsx("input",{type:"text",className:"form-control py-2",id:"student_id-input",placeholder:"رقم الجلوس",minLength:5,maxLength:5,required:!0}),f.jsx("div",{className:"invalid-feedback",children:"رقم الجلوس غير موجود."})]}),f.jsx("div",{className:"col-12 col-sm-2 m-0",children:r?f.jsx(Oo,{}):f.jsx("button",{type:"submit",className:"btn btn-primary mb-3 py-2 w-100",children:"ابحث"})})]})};function g_(t,e){if(t.length)if(e==="duplicated"){t.sort((i,s)=>s.total-i.total);let n=1,r=t[0].total;for(let i=0;i<t.length;i++)t[i].total!==r&&(n=n+1,r=t[i].total),t[i].rank=n}else for(let n=0;n<t.length;n++)t[n].rank=n+1}const wO=()=>{const[t,e]=D.useState([]),[n,r]=D.useState(!0),{grade:i,year:s}=Zt(),[o,l]=D.useState(null),[u,c]=D.useState(null),[h,m]=D.useState(!1),[g,I]=D.useState("normal"),x=D.useRef(null),{pathname:P}=Rn(),[O,S]=K2(),w=Nl($t,`${i}/degrees/${s}`);async function A(k){const T=await fO(w),{degreesData:y,lastStudentData:_}=await hO(k);l(T),e([...t,...y]),c(_),_.data().rank===T&&m(!0),r(!1)}async function j(){const k=await dO(i,s);e(k.degrees),l(k.degrees.length),r(!1),m(!0)}function $(k){I(k.target.value),g_(t,k.target.value),S({sortMethod:k.target.value})}return D.useEffect(()=>{j(),x.current&&(x.current.value="normal")},[P]),g_(t,O.get("sortMethod")||"normal"),f.jsxs("div",{children:[f.jsxs(pn,{fontSize:3,py:3,children:["ترتيب نتائج ",It(i)," ",s.split("_").join("/")]}),f.jsx(gO,{studentsCount:o}),f.jsx(_O,{}),f.jsxs("div",{className:"d-flex flex-column gap-2 mb-4",children:[f.jsx("h5",{children:"طريقة الترتيب:"}),f.jsxs("select",{ref:x,onChange:$,className:"form-select w-100","aria-label":"Default select example",style:{width:"100%",maxWidth:"400px"},children:[f.jsx("option",{value:"normal",defaultValue:!0,children:"الرتيب العادي"}),f.jsx("option",{value:"duplicated",children:"باعتبار المكرر"})]})]}),f.jsxs("div",{className:"table-responsive border",children:[f.jsxs("table",{className:"table table-striped table-bordered",children:[f.jsx(mO,{}),f.jsx("tbody",{children:t.map(k=>f.jsx(pO,{student:k,grade:i,year:s},k.id))})]}),n&&f.jsx(Ht,{})]}),f.jsx("div",{className:"mt-3 mb-1",children:h?f.jsx(vO,{}):f.jsx(yO,{degreesCollection:w,lastStudent:u,setDataAndHideLoaderFirestore:A})})]})},EO=({subject:t,student:e,index:n})=>{const r=e.degrees[n],i=r>=50?"bg-success":"bg-danger";return f.jsxs("tr",{children:[f.jsx("th",{scope:"row",children:t.name},n),f.jsx("td",{className:`text-center text-light ${i}`,children:r})]})},TO=()=>{},IO=({title:t,value:e})=>f.jsxs("h4",{className:"mb-1",children:[f.jsxs("span",{className:"fw-bold text-primary",children:[t,": "]}),f.jsxs("span",{children:[e,"."]})]}),SO=({student:t})=>{const e=[{title:"الاسم",value:t.name},{title:"رقم الجلوس",value:t.id},{title:"الترتيب",value:t.rank},{title:"التقدير",value:t.total_grade}];return f.jsx("div",{children:e.map((n,r)=>f.jsx(IO,{title:n.title,value:n.value},r))})};async function RO(t,e,n,r){const s=await(await fetch(`${Ri}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();let o;return s.degrees.forEach(l=>{l.id==n&&(o=l)}),r(s.subjects),o}const AO=()=>{const{grade:t,year:e,studentId:n}=Zt(),[r,i]=D.useState({}),[s,o]=D.useState([]),[l,u]=D.useState(!0);return D.useEffect(()=>{async function c(){let h;h=await RO(t,e,n,o),i(h),u(!1)}c()},[]),f.jsxs(f.Fragment,{children:[f.jsx(pn,{fontSize:3,children:"نتائج المواد"}),l?f.jsx(Ht,{}):f.jsxs("div",{className:"mt-3",children:[f.jsx(SO,{student:r}),f.jsxs("table",{className:"table table-striped border table-bordered mt-4",children:[f.jsx(TO,{}),f.jsx("tbody",{children:s.map((c,h)=>f.jsx(EO,{subject:c,student:r,index:h},h))})]})]})]})},xO=()=>f.jsxs("div",{className:"min-vh-100 d-flex flex-column gap-4 justify-content-center align-items-center",children:[f.jsx("h1",{children:"الصفحة غير موجودة."}),f.jsx(on,{to:"/",className:"btn btn-primary",children:"الصفحة الرئيسية"})]}),Fm=({grade:t,backFrom:e})=>{const n=Qe();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return f.jsx("button",{className:"btn btn-danger",onClick:r,children:"رجوع"})};function Rr({text:t,color:e,widthPercentage:n,onClick:r}){return f.jsx("button",{className:`btn btn-${e||"primary"} w-${n||"100"} p-2`,onClick:r,children:t})}const $I=({pdf:t})=>{const e=Qe(),[n,r]=D.useState(!1);function i(){window.location.href=`https://drive.google.com/uc?export=download&id=${t.book_gdrive_id}`}function s(){e(`/book/${t.book_gdrive_id}`,{state:{book_name:t.book_name}})}return n?f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(Rr,{text:"استعراض",color:"success",onClick:s}),f.jsx(Rr,{text:"تحميل",onClick:i}),f.jsx(Rr,{text:"إلغاء",color:"danger",onClick:()=>r(!1)})]}):f.jsx(Rr,{text:t.book_name,onClick:()=>r(!0)})},ws=()=>{const t=Qe();function e(){t("/")}return f.jsx("button",{className:"btn btn-danger",onClick:e,children:"القائمة الرئيسية"})},PO=()=>{const{grade:t,term:e}=Zt(),[n,r]=D.useState([]),[i,s]=D.useState(!0);return D.useEffect(()=>{fetch(`${Ri}/darelom-students-data/books/2023_24/books_${t}.json`).then(o=>o.json()).then(o=>{r(o[e]),s(!1)})},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[f.jsx("h2",{children:"اختر كتابًا:"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(Fm,{grade:t,backFrom:"books"}),f.jsx(ws,{})]})]}),f.jsxs(pn,{children:[It(t)," - ",It(e)]}),i?f.jsx(Ht,{}):f.jsx("div",{className:"row g-2 my-2",children:n.map((o,l)=>f.jsx("div",{className:"col-sm-6",children:f.jsx($I,{pdf:o})},l))})]})};function CO(){const t="btn btn-danger p-2 px-5 w-100",e=Qe();function n(){e(-1)}return f.jsx("button",{className:t,onClick:n,children:"رجوع"})}const kO=({bookId:t,isIframeLoading:e,setIsIframeLoading:n})=>{const r=`https://drive.google.com/file/d/${t}/preview`,i=`${e&&"d-none"} w-100`,s={height:"500px"};function o(){n(!1)}return f.jsx("iframe",{src:r,onLoad:o,className:i,style:s})},NO=({bookId:t})=>{const e="btn btn-primary p-2 px-5 w-100";function n(){window.location.href=`https://drive.google.com/uc?export=download&id=${t}`}return f.jsx("button",{className:e,onClick:n,children:"تحميل"})},y_=({children:t})=>f.jsx("div",{className:"col-md-auto col-6",children:t}),v_=()=>{var s;const{bookId:t}=Zt(),n=(s=Rn().state)==null?void 0:s.book_name,[r,i]=D.useState(!0);return f.jsxs(f.Fragment,{children:[f.jsxs(pn,{children:['"',n,'".']}),f.jsxs("div",{className:"my-2 d-flex justify-content-end row gx-2",children:[f.jsx(y_,{children:f.jsx(NO,{bookId:t})}),f.jsx(y_,{children:f.jsx(CO,{})})]}),r&&f.jsx(Ht,{}),f.jsx(kO,{bookId:t,isIframeLoading:r,setIsIframeLoading:i})]})},bO=({currentQuestionIndex:t,questionsLength:e})=>{const n=t+1;return f.jsx("div",{className:"d-flex justify-content-between ",children:f.jsxs("p",{className:"mb-0",children:["السؤال",f.jsxs("span",{className:"fw-bold",children:[" ",n," "]}),"من",f.jsxs("span",{className:"fw-bold",children:[" ",e]}),"."]})})},DO=({questionText:t})=>f.jsx("h3",{className:"bg-black text-light p-2 py-3 text-center my-4 rounded-2 lh-base",children:t});function LO({currentQuestionIndex:t,setCurrentQuestionIndex:e,setIsAnswered:n,answerButtons:r}){function i(){n(!1),e(t+1),r.forEach(s=>{s.disabled=!1,s.classList.remove("btn-danger","btn-success")})}return f.jsx(Rr,{text:"التالي",onClick:i})}function OO({questionsLength:t,score:e}){const n=Qe();function r(){n("/test_yourself/test_result",{state:{result:e,fullMark:t}})}return f.jsx(Rr,{text:"عرض النتيجة",onClick:r})}const VO=({children:t})=>f.jsx("div",{className:"modal-header",children:f.jsx("h5",{className:"modal-title text-center w-100",children:t})}),jO=({children:t})=>f.jsx("div",{className:"modal-body pb-1",children:f.jsx("p",{className:"text-center fw-bold",children:t})}),MO=({children:t})=>f.jsx("div",{className:"modal-footer border-0 pt-0",children:t}),FO=({setIsModalOpen:t,answerReason:e})=>f.jsx("div",{className:"modal d-block bg-black bg-opacity-75",tabIndex:"-1",children:f.jsx("div",{className:"modal-dialog modal-dialog-centered",children:f.jsxs("div",{className:"modal-content",children:[f.jsx(VO,{children:'"وَقُل رَّبِّ زِدْنِي عِِلْمًا"'}),f.jsx(jO,{children:e||"للأسف، لا يوجد تعليل لهذه الإجابة حاليًا."}),f.jsx(MO,{children:f.jsx(Rr,{text:"إغلاق",color:"danger",onClick:()=>t(!1)})})]})})}),UO=({setIsModalOpen:t})=>f.jsx(Rr,{text:"عرض التعليل",onClick:()=>t(!0)});function BO(t,e,n,r,i,s,o,l){function u(){r.current.forEach(m=>{m.disabled=!0}),h.disabled=!1}n(!0);const c=r.current[s[i].question_answer],h=t.target;e==s[i].question_answer?(h.classList.add("btn-success"),o(l+1),u()):(u(),h.classList.add("btn-danger"),c.classList.add("btn-success"))}const vh=()=>{var j,$,k,T,y,_;const{grade:t,term:e,subject:n}=Zt(),[r,i]=D.useState(!1),[s,o]=D.useState(((j=location.state)==null?void 0:j.currentQuestionIndex)||0),[l,u]=D.useState(0),[c,h]=D.useState([]),[m,g]=D.useState(!1),I=D.useRef([]),[x,P]=D.useState(!0),S=Rn().pathname;function w(E){nI(Nl($t,E)).then(C=>{const b=[];C.docs.forEach(R=>{b.push(R.data())}),h(b),P(!1)})}D.useEffect(()=>{S=="/test_yourself/sended_questions"?w("test_yourself/sended_questions"):S==`/${t}/${e}/${n}/test_yourself_students`?w(`${t}/test_yourself_students/questions/${e}/${n}`):fetch(`${Ri}/darelom-students-data/questions/test_questions.json`).then(E=>E.json()).then(E=>{h(E),P(!1)})},[]);const A=s>=c.length-1;return f.jsxs(f.Fragment,{children:[f.jsx(pn,{fontSize:"2",children:"اختبر نفسك"}),x?f.jsx(Ht,{}):c.length?f.jsxs("div",{className:"mt-2",children:[f.jsx(bO,{currentQuestionIndex:s,questionsLength:c.length,creatorName:(k=($=c[s])==null?void 0:$.question_creator)==null?void 0:k.name}),f.jsx(DO,{questionText:(T=c[s])==null?void 0:T.question_text}),f.jsx("div",{className:"row g-2",children:(y=c[s])==null?void 0:y.question_options.map((E,C)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100 p-2",ref:b=>I.current[C]=b,onClick:b=>BO(b,C,i,I,s,c,u,l),children:E})},C))}),f.jsx("hr",{}),f.jsxs("div",{className:"mt-3 d-flex gap-2",children:[r&&A?f.jsx(OO,{questionsLength:c.length,score:l}):r&&!A&&f.jsx(LO,{currentQuestionIndex:s,setCurrentQuestionIndex:o,setIsAnswered:i,answerButtons:I.current}),r&&f.jsx(UO,{setIsModalOpen:g})]}),m&&f.jsx(FO,{setIsModalOpen:g,answerReason:(_=c[s])==null?void 0:_.answer_reason})]}):f.jsx("p",{className:"text-center fs-2 fw-bold my-2",children:"لا أسئلة حتى الآن."})]})},$O=()=>{const t=Rn(),{result:e,fullMark:n}=t.state;return f.jsxs(f.Fragment,{children:[f.jsx("h2",{children:"نتيجتك هي:"}),f.jsxs("p",{className:"text-center fs-1",children:[f.jsxs("span",{className:"fw-bold",children:[e," "]}),"من",f.jsxs("span",{className:"fw-bold",children:[" ",n]}),"."]})]})},zO=()=>{const t=Qe(),{grade:e,term:n}=Zt(),[r,i]=D.useState([]),[s,o]=D.useState(!0);return D.useEffect(()=>{async function l(){var h;const c=(h=(await Mr(zn($t,`${e}/test_yourself_students/questions`,n))).data())==null?void 0:h.subjects;i(c),o(!1)}l()},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:"اختر مادة:"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(Fm,{grade:e,backFrom:"test_yourself_students"}),f.jsx(ws,{})]})]}),s?f.jsx(Ht,{}):f.jsx("div",{className:"row g-2 my-2",children:r==null?void 0:r.map((l,u)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/${l}/test_yourself_students`),children:It(l)})},u))})]})},qO=()=>f.jsxs("div",{className:"row g-2",children:[f.jsx("div",{className:"col-sm-6",children:f.jsx(on,{to:"term_1",className:"btn btn-primary w-100",children:"الفصل الدراسي الأول"})}),f.jsx("div",{className:"col-sm-6",children:f.jsx(on,{to:"term_2",className:"btn btn-primary w-100",children:"الفصل الدراسي الثاني"})})]}),HO=()=>{const t=Qe(),[e,n]=D.useState(!0),{grade:r,term:i}=Zt(),[s,o]=D.useState([]);return D.useEffect(()=>{Mr(zn($t,`${r}/test_yourself_students/questions/${i}`)).then(l=>{o(l.data().subjects),n(!1)})},[]),f.jsx(f.Fragment,{children:e?f.jsx(Ht,{}):f.jsx("div",{className:"row g-2",children:s.map((l,u)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t(`/${r}/${i}/${l}/send_question`),children:It(l)})},u))})})},zI=({formRef:t,children:e})=>f.jsx("form",{className:"mx-auto mt-3 needs-validation",noValidate:!0,style:{maxWidth:"480px"},ref:t,children:e}),an=({field:t,marginBottom:e=3})=>f.jsx("div",{className:`mb-${e}`,children:t}),qI=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{htmlFor:"email-input",className:"form-label fw-bold",children:"البريد الإلكتروني:"}),f.jsx("input",{type:"email",className:"form-control",pattern:"^[^@]+@[^@]+\\.[^@]{2,}$",id:"email-input",placeholder:"folan.alfolany@gmail.com","aria-describedby":"emailHelp",required:!0}),f.jsx("div",{className:"invalid-feedback",children:"يرجى إدخال بريد إلكتروني صحيح."})]}),HI=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{htmlFor:"password-input",className:"form-label fw-bold",children:"كلمة المرور:"}),f.jsx("input",{type:"password",placeholder:"_____",minLength:"6",className:"form-control",id:"password-input",autoComplete:"off",required:!0}),f.jsx("div",{className:"invalid-feedback",children:"كلمة المرور يجب أن تتكون من 6 أحرف على الأقل."})]}),WO=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{htmlFor:"name-input",className:"form-label fw-bold",children:"الاسم:"}),f.jsx("input",{type:"text",className:"form-control",minLength:3,id:"name-input",placeholder:"فلان الفلاني",required:!0}),f.jsx("div",{className:"invalid-feedback",children:"الاسم يجب أن يتكون من 3 أحرف على الأقل."})]}),KO=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"fw-bold",children:"اختر فرقتك:"}),f.jsxs("select",{className:"form-select mt-2",id:"grade-input",required:!0,children:[f.jsx("option",{value:"grade_1",children:"الفرقة الأولى"}),f.jsx("option",{value:"grade_2",children:"الفرقة الثانية"}),f.jsx("option",{value:"grade_3",children:"الفرقة الثالثة"}),f.jsx("option",{value:"grade_4",children:"الفرقة الرابعة"})]}),f.jsx("div",{className:"invalid-feedback",children:"يجب تحديد فرقتك."})]}),Dl=({text:t})=>f.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-bold",children:t}),yd=({label:t,placeholder:e,invalidFeedback:n,minLength:r=10,rows:i=4,fontSize:s=5,id:o="textarea-field"})=>f.jsxs(f.Fragment,{children:[f.jsx("label",{className:`fw-bold fs-${s} mb-1`,htmlFor:o,children:t}),f.jsx("textarea",{className:"form-control",id:o,rows:i,placeholder:e,minLength:r,required:!0}),f.jsx("div",{className:"invalid-feedback",children:n})]}),GO=()=>{const t=Qe(),[e,n]=D.useState(!1),[r,i]=D.useState(!1),s=D.useRef(null);return D.useEffect(()=>{const o=s.current;o.addEventListener("submit",async l=>{if(l.preventDefault(),l.stopPropagation(),o.checkValidity())try{i(!0);const u=l.target["name-input"].value,c=l.target["email-input"].value,h=l.target["grade-input"].value,m=l.target["password-input"].value,g=l.target["textarea-field"].value,x=(await dP(bl,c,m)).user.uid;await Bb(zn($t,"users",x),{name:u,email:c,grade:h,uid:x,message:g,write_permission:!1}),t("/")}catch(u){console.log(u.code),n(!0)}finally{i(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),f.jsxs("div",{children:[f.jsx(pn,{children:"إنشاء حساب جديد"}),f.jsxs(zI,{formRef:s,children:[f.jsx(an,{field:f.jsx(WO,{})}),f.jsx(an,{field:f.jsx(qI,{})}),f.jsx(an,{field:f.jsx(KO,{})}),f.jsx(an,{field:f.jsx(yd,{placeholder:"اكتب رسالة مراعيًا علامات الترقيم.",label:"اكتب رسالة مستخدمًا علامات الترقيم:",fontSize:6,minLength:100,invalidFeedback:"الرسالة يجب أن تتكون من 100 حرف على الأقل."})}),f.jsx(an,{field:f.jsx(HI,{})}),r?f.jsx(Oo,{}):f.jsx(Dl,{text:"إنشاء حساب جديد"}),e&&f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل التسجيل."})]})]})},gu=()=>{const t=Qe(),[e,n]=D.useState(!1),[r,i]=D.useState(!1),s=D.useRef(null);return D.useEffect(()=>{const o=s.current;o.addEventListener("submit",async l=>{if(l.preventDefault(),l.stopPropagation(),o.checkValidity())try{i(!0);const u=l.target["email-input"].value,c=l.target["password-input"].value;await hP(bl,u,c),t("/")}catch(u){console.log(u.code),n(!0)}finally{i(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),f.jsxs("div",{children:[f.jsx(pn,{children:"تسجيل الدخول"}),f.jsxs(zI,{formRef:s,children:[f.jsx(an,{field:f.jsx(qI,{})}),f.jsx(an,{field:f.jsx(HI,{})}),r?f.jsx(Oo,{}):f.jsx(Dl,{text:"تسجيل الدخول"}),e&&f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل التسجيل."})]}),f.jsxs("p",{className:"text-center mt-2 fw-bold",children:["هل تريد إنشاء حساب؟ ",f.jsx(on,{to:"/signup",children:"إنشاء حساب"}),"."]})]})},Um=({formRef:t,children:e})=>f.jsx("form",{className:"mt-3 needs-validation",noValidate:!0,ref:t,children:e}),QO=({optionsRef:t})=>{const e=["الأول","الثاني","الثالث","الرابع"];return f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"fw-bold fs-5 mb-1",children:"الاختيارات:"}),f.jsx("div",{className:"row g-2",children:e.map((n,r)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("input",{type:"text",className:"form-control",placeholder:`الاختيار ${n}.`,ref:i=>t.current[r]=i,required:!0})},r))})]})},YO=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"fw-bold fs-5 mb-1",children:"رقم الاختيار الصحيح:"}),f.jsxs("select",{className:"form-control",id:"options-input",children:[f.jsx("option",{value:"0",children:"1"}),f.jsx("option",{value:"1",children:"2"}),f.jsx("option",{value:"2",children:"3"}),f.jsx("option",{value:"3",children:"4"})]})]}),JO=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"fw-bold fs-5 mb-1",children:"التعليل:"}),f.jsx("input",{type:"text",className:"form-control",placeholder:"اكتب التعليل.",id:"answer-reason-input"})]}),XO=()=>f.jsx(yd,{placeholder:"اكتب نص السؤال هنا.",label:"نص السؤال:",invalidFeedback:"نص السؤال يجب أن يتكون من 10 أحرف على الأقل."}),ZO=()=>{const[t,e]=D.useState(!1),[n,r]=D.useState("initial"),{grade:i,term:s,subject:o}=Zt(),l=D.useRef([]),u=D.useRef(null);return D.useEffect(()=>{const c=u.current;c.addEventListener("submit",async h=>{h.preventDefault(),h.stopPropagation();const m=c["textarea-field"].value,g=[],I=Number(c["options-input"].value),x=c["answer-reason-input"].value;if(l.current.forEach(P=>{g.push(P.value)}),c.checkValidity())try{e(!0);const{name:P,uid:O}=JSON.parse(localStorage.getItem("loggedinUserInfo"));await km(Nl($t,`${i}/test_yourself_students/questions/${s}/${o}`),{question_text:m,question_answer:I,question_options:g,answer_reason:x,question_creator:{name:P,uid:O}}),u.current.reset(),c.classList.remove("was-validated"),r("success")}catch(P){console.log(P.code),c.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else c.classList.add("was-validated")})},[]),f.jsxs(f.Fragment,{children:[f.jsx(pn,{children:"أرسل سؤالًا [تجريبية]"}),f.jsxs("p",{className:"text-center mt-2 fw-bold",children:[`${It(i)} - ${It(s)} - ${It(o)}`,"."]}),f.jsxs(Um,{formRef:u,children:[f.jsx(an,{field:f.jsx(XO,{})}),f.jsx(an,{field:f.jsx(QO,{optionsRef:l})}),f.jsx(an,{field:f.jsx(YO,{})}),f.jsx(an,{field:f.jsx(JO,{})}),t?f.jsx(Oo,{}):f.jsx(Dl,{text:"أرسل السؤال"})]}),n==="initial"?null:n==="success"?f.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"تم الإرسال بنجاح."}):f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل الإرسال."})]})},eV=()=>f.jsx(yd,{placeholder:"اكتب اقتراحك هنا.",label:"الاقتراح:",invalidFeedback:"نص الاقتراح يجب أن يتكون من 10 أحرف على الأقل.",rows:7}),tV=()=>{const[t,e]=D.useState(!1),[n,r]=D.useState("initial"),i=D.useRef(null);return D.useEffect(()=>{const s=i.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();const l=s["textarea-field"].value;if(s.checkValidity())try{e(!0),await km(Nl($t,"suggestions"),{suggestion:l}),i.current.reset(),s.classList.remove("was-validated"),r("success")}catch(u){console.log(u.code),s.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else s.classList.add("was-validated")})},[]),f.jsxs(f.Fragment,{children:[f.jsx(pn,{children:"إرسال اقتراح"}),f.jsxs(Um,{formRef:i,children:[f.jsx(an,{field:f.jsx(eV,{})}),t?f.jsx(Oo,{}):f.jsx(Dl,{text:"أرسل الاقتراح"})]}),n==="initial"?null:n==="success"?f.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"تم الإرسال بنجاح."}):f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل الإرسال."})]})},nV=()=>f.jsx(yd,{placeholder:"اكتب المشكلة بالتفصيل، وإن كانت المشكلة خاصة بصفحة بعينها؛ أرسل الرابط.",label:"المشكلة:",invalidFeedback:"نص المشكلة يجب أن يتكون من 10 أحرف على الأقل.",rows:7}),rV=()=>{const[t,e]=D.useState(!1),[n,r]=D.useState("initial"),i=D.useRef(null);return D.useEffect(()=>{const s=i.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation(),console.log("s");const l=s["textarea-field"].value;if(s.checkValidity())try{e(!0),await km(Nl($t,"problems"),{problem:l}),i.current.reset(),s.classList.remove("was-validated"),r("success")}catch(u){console.log(u.code),s.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else s.classList.add("was-validated")})},[]),f.jsxs(f.Fragment,{children:[f.jsx(pn,{children:"الإبلاغ عن مشكلة"}),f.jsxs(Um,{formRef:i,children:[f.jsx(an,{field:f.jsx(nV,{})}),t?f.jsx(Oo,{}):f.jsx(Dl,{text:"أرسل المشكلة"})]}),n==="initial"?null:n==="success"?f.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"تم الإرسال بنجاح."}):f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل الإرسال."})]})},iV=()=>async(t,e)=>{try{const r=await(await fetch(t)).blob(),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(n){console.log(n)}},sV=()=>{const{grade:t}=Zt(),[e,n]=D.useState(!1),[r,i]=D.useState(!0);let s="",o;t==="exams_schedule"?(s=`${Ri}/darelom-students-data/schedule/exams_schedule.jpg`,o="جدول امتحانات الفصل الدراسي الأول 2024"):(s=`${Ri}/darelom-students-data/schedule/${t}.jpg`,o=`جدول محاضرات ${It(t)}`);const l=iV();function u(){n(!1),i(!1)}function c(){n(!0),i(!1)}return f.jsxs("div",{className:"container",children:[r?f.jsx(Ht,{}):f.jsx(f.Fragment,{children:!e&&f.jsx(f.Fragment,{children:f.jsxs("p",{className:"text-center fw-bold fs-5",children:["عذرًا، جدول ",It(t)," ليس لدينا بعد."]})})}),f.jsxs("div",{className:`d-${e?"block":"none"}`,children:[f.jsx("img",{src:s,className:"w-100",alt:"Schecule",onError:u,onLoad:c}),f.jsx("button",{className:"btn btn-primary w-100 mt-3",onClick:()=>l(s,o),children:"تحميل الجدول"})]})]})},oV=({grade:t,backFrom:e})=>{const n=Qe();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return f.jsx("button",{className:"btn btn-danger",onClick:r,children:"رجوع"})},aV=()=>{const{grade:t,term:e}=Zt(),[n,r]=D.useState({}),[i,s]=D.useState([]),[o,l]=D.useState(!0);return D.useEffect(()=>{Mr(zn($t,`${t}/lectures_recordings`)).then(u=>{var h;const c=(h=u.data())==null?void 0:h[e];if(c&&Object.keys(c).length){const m=Object.keys(c);if(m.includes("mojalad_tasgilat")){const g=["mojalad_tasgilat",...m.filter(I=>I!=="mojalad_tasgilat")];s(g)}else s(m);r(c)}l(!1)})},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[f.jsx("h2",{children:"اختر مادة:"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(oV,{grade:t,backFrom:"lectures_recordings"}),f.jsx(ws,{})]})]}),f.jsxs(pn,{children:[It(t)," - ",It(e)]}),o?f.jsx(Ht,{}):f.jsx(f.Fragment,{children:Object.keys(n).length?f.jsx("div",{className:"row g-2 my-2",children:i.map((u,c)=>f.jsx("div",{className:"col-sm-6",children:f.jsx(Rr,{text:It(u),onClick:()=>window.location.href=n[u]})},c))}):f.jsx("p",{className:"text-center fw-bold mt-4 fs-4",children:"عذرًا، لا تتوفر تسجيلات."})})]})},lV=()=>{const t=Qe(),{grade:e,term:n}=Zt(),[r,i]=D.useState([]),[s,o]=D.useState(!0);return D.useEffect(()=>{async function l(){var h;const c=((h=(await Mr(zn($t,`${e}/more_resources/`))).data())==null?void 0:h[n])||[];i(c),o(!1)}l()},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:"اختر مادة:"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(Fm,{grade:e,backFrom:"more_resources"}),f.jsx(ws,{})]})]}),s?f.jsx(Ht,{}):f.jsx("div",{className:"row g-2 my-2",children:r!=null&&r.length?r==null?void 0:r.map((l,u)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/more_resources/${l}`),children:It(l)})},u)):f.jsx("p",{className:"fw-bold text-center fs-3",children:"عذرًا، لا يوجد مصادر."})})]})},__=()=>{const t=Qe(),{grade:e,term:n,subject:r}=Zt(),[i,s]=D.useState([]),[o,l]=D.useState(!0);return D.useEffect(()=>{async function u(){var m;let c;e?c=await Mr(zn($t,`${e}/more_resources/${n}/${r}`)):c=await Mr(zn($t,`general_subjects/${r}`));const h=((m=c.data())==null?void 0:m.resources)||[];s(h),l(!1)}u()},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:"اختر شيئًا:"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx("button",{className:"btn btn-danger",onClick:()=>t(-1),children:"رجوع"}),f.jsx(ws,{})]})]}),o?f.jsx(Ht,{}):f.jsx("div",{className:"row g-2 my-2",children:i!=null&&i.length?i==null?void 0:i.map((u,c)=>f.jsx("div",{className:"col-sm-6",children:f.jsx(on,{className:"btn btn-primary w-100",to:u!=null&&u.isBook?`/book/${u.link}`:u.link,state:{book_name:u.title},children:u.title})},c)):f.jsx("p",{className:"fw-bold text-center fs-3",children:"عذرًا، لا شيء هنا."})})]})},uV=({grade:t,backFrom:e})=>{const n=Qe();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return f.jsx("button",{className:"btn btn-danger",onClick:r,children:"رجوع"})},cV=()=>{const[t,e]=D.useState(!1),{grade:n,term:r}=Zt(),[i,s]=D.useState([]),[o,l]=D.useState(!0);return D.useEffect(()=>{fetch(`${Ri}/darelom-students-data/final_exams/final_exams_${n}.json`).then(u=>u.json()).then(u=>{u[r].length?(s(u[r]),l(!1)):t(!0)}).catch(u=>{e(!0)})},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[f.jsx("h2",{children:"اختر امتحانًا:"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(uV,{grade:n,backFrom:"final_exams"}),f.jsx(ws,{})]})]}),f.jsxs(pn,{children:[It(n)," - ",It(r)]}),t?f.jsx("p",{className:"fw-bold text-center fs-4 mt-4",children:"عذرًا، لا توجد امتحانات."}):o?f.jsx(Ht,{}):f.jsx("div",{className:"row g-2 my-2",children:i.map((u,c)=>f.jsx("div",{className:"col-sm-6",children:f.jsx($I,{pdf:u})},c))})]})},dV=()=>{const t=Qe(),[e,n]=D.useState([]),[r,i]=D.useState(!0);return D.useEffect(()=>{async function s(){var u;const l=(u=(await Mr(zn($t,"general_subjects","subjects"))).data())==null?void 0:u.ids;n(l),i(!1)}s()},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:"اختر مادة:"}),f.jsx("div",{className:"d-flex gap-2",children:f.jsx(ws,{})})]}),r?f.jsx(Ht,{}):f.jsx("div",{className:"row g-2 my-2",children:e==null?void 0:e.map((s,o)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/general_subjects/${s}`),children:It(s)})},o))})]})};function hV(){const[t,e]=D.useState(null),[n,r]=D.useState(JSON.parse(localStorage.getItem("loggedInUserInfo")));D.useEffect(()=>{_E(bl,async s=>{if(s){const l=(await Mr(zn($t,`users/${s.uid}`))).data();localStorage.setItem("loggedinUserInfo",JSON.stringify(l)),r(l)}else localStorage.setItem("loggedinUserInfo",JSON.stringify(null)),r(null);e(s),localStorage.setItem("loggedinUser",JSON.stringify(s))})},[]);const i=b2(Mf(f.jsx(f.Fragment,{children:f.jsxs(De,{path:"/",element:f.jsx(eO,{}),errorElement:f.jsx(xO,{}),children:[f.jsx(De,{path:"/",element:f.jsx(cO,{})}),f.jsx(De,{path:"/degrees/:grade/:year",element:f.jsx(wO,{})}),f.jsx(De,{path:"/degrees/:grade/:year/:studentId",element:f.jsx(AO,{})}),f.jsx(De,{path:":grade/books/:term",element:f.jsx(PO,{})}),f.jsx(De,{path:"/book/:bookId",element:f.jsx(v_,{})}),f.jsx(De,{path:":grade/final_exams/:term",element:f.jsx(cV,{})}),f.jsx(De,{path:"/final_exam/:examId",element:f.jsx(v_,{})}),f.jsx(De,{path:":grade/more_resources/:term",element:f.jsx(lV,{})}),f.jsx(De,{path:":grade/:term/more_resources/:subject",element:f.jsx(__,{})}),f.jsx(De,{path:"/general_subjects",element:f.jsx(dV,{})}),f.jsx(De,{path:"/general_subjects/:subject",element:f.jsx(__,{})}),f.jsx(De,{path:"/test_yourself",element:f.jsx(vh,{})})," ",f.jsx(De,{path:"/test_yourself/test_result",element:f.jsx($O,{})}),f.jsx(De,{path:":grade/test_yourself_students/:term",element:f.jsx(zO,{})}),f.jsx(De,{path:"/test_yourself/sended_questions",element:f.jsx(vh,{})}),f.jsx(De,{path:"/:grade/:term/:subject/test_yourself_students",element:f.jsx(vh,{})}),f.jsx(De,{path:"/:grade/send_question_selector",element:n!=null&&n.write_permission?f.jsx(qO,{}):f.jsx(gu,{})}),f.jsx(De,{path:"/:grade/send_question_selector/:term",element:n!=null&&n.write_permission?f.jsx(HO,{}):f.jsx(gu,{})}),f.jsx(De,{path:"/:grade/:term/:subject/send_question",element:n!=null&&n.write_permission?f.jsx(ZO,{}):f.jsx(gu,{})}),f.jsx(De,{path:"/signup",element:t?f.jsx(d_,{to:"/"}):f.jsx(GO,{})}),f.jsx(De,{path:"/signin",element:t?f.jsx(d_,{to:"/"}):f.jsx(gu,{})}),f.jsx(De,{path:"/send_suggestion",element:f.jsx(tV,{})}),f.jsx(De,{path:"/send_problem",element:f.jsx(rV,{})}),f.jsx(De,{path:"/:grade/schedule",element:f.jsx(sV,{})}),f.jsx(De,{path:"/:grade/lectures_recordings/:term",element:f.jsx(aV,{})})]})})));return f.jsx(B2,{router:i})}_h.createRoot(document.getElementById("root")).render(f.jsx(hV,{}));document.documentElement.setAttribute("data-bs-theme",localStorage.getItem("theme")||"light");
