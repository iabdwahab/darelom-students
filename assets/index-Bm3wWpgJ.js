function JE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var er=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function YE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function XE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var ZE={exports:{}},df={},eT={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ic=Symbol.for("react.element"),Fx=Symbol.for("react.portal"),$x=Symbol.for("react.fragment"),Ux=Symbol.for("react.strict_mode"),Bx=Symbol.for("react.profiler"),zx=Symbol.for("react.provider"),qx=Symbol.for("react.context"),Hx=Symbol.for("react.forward_ref"),Wx=Symbol.for("react.suspense"),Kx=Symbol.for("react.memo"),Gx=Symbol.for("react.lazy"),Ey=Symbol.iterator;function Qx(t){return t===null||typeof t!="object"?null:(t=Ey&&t[Ey]||t["@@iterator"],typeof t=="function"?t:null)}var tT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nT=Object.assign,rT={};function Il(t,e,n){this.props=t,this.context=e,this.refs=rT,this.updater=n||tT}Il.prototype.isReactComponent={};Il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function iT(){}iT.prototype=Il.prototype;function Jg(t,e,n){this.props=t,this.context=e,this.refs=rT,this.updater=n||tT}var Yg=Jg.prototype=new iT;Yg.constructor=Jg;nT(Yg,Il.prototype);Yg.isPureReactComponent=!0;var Ty=Array.isArray,sT=Object.prototype.hasOwnProperty,Xg={current:null},oT={key:!0,ref:!0,__self:!0,__source:!0};function aT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)sT.call(e,r)&&!oT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ic,type:t,key:s,ref:o,props:i,_owner:Xg.current}}function Jx(t,e){return{$$typeof:Ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ic}function Yx(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var by=/\/+/g;function Tp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yx(""+t.key):e.toString(36)}function Gd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ic:case Fx:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Tp(o,0):r,Ty(i)?(n="",t!=null&&(n=t.replace(by,"$&/")+"/"),Gd(i,e,n,"",function(c){return c})):i!=null&&(Zg(i)&&(i=Jx(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(by,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ty(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Tp(s,a);o+=Gd(s,e,n,l,i)}else if(l=Qx(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Tp(s,a++),o+=Gd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yd(t,e,n){if(t==null)return t;var r=[],i=0;return Gd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Xx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Sn={current:null},Qd={transition:null},Zx={ReactCurrentDispatcher:Sn,ReactCurrentBatchConfig:Qd,ReactCurrentOwner:Xg};function lT(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:yd,forEach:function(t,e,n){yd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yd(t,function(){e++}),e},toArray:function(t){return yd(t,function(e){return e})||[]},only:function(t){if(!Zg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Il;Re.Fragment=$x;Re.Profiler=Bx;Re.PureComponent=Jg;Re.StrictMode=Ux;Re.Suspense=Wx;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zx;Re.act=lT;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Xg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)sT.call(e,l)&&!oT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ic,type:t.type,key:i,ref:s,props:r,_owner:o}};Re.createContext=function(t){return t={$$typeof:qx,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zx,_context:t},t.Consumer=t};Re.createElement=aT;Re.createFactory=function(t){var e=aT.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:Hx,render:t}};Re.isValidElement=Zg;Re.lazy=function(t){return{$$typeof:Gx,_payload:{_status:-1,_result:t},_init:Xx}};Re.memo=function(t,e){return{$$typeof:Kx,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=Qd.transition;Qd.transition={};try{t()}finally{Qd.transition=e}};Re.unstable_act=lT;Re.useCallback=function(t,e){return Sn.current.useCallback(t,e)};Re.useContext=function(t){return Sn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return Sn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return Sn.current.useEffect(t,e)};Re.useId=function(){return Sn.current.useId()};Re.useImperativeHandle=function(t,e,n){return Sn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return Sn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return Sn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return Sn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return Sn.current.useReducer(t,e,n)};Re.useRef=function(t){return Sn.current.useRef(t)};Re.useState=function(t){return Sn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return Sn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return Sn.current.useTransition()};Re.version="18.3.1";eT.exports=Re;var F=eT.exports;const e1=YE(F),t1=JE({__proto__:null,default:e1},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1=F,r1=Symbol.for("react.element"),i1=Symbol.for("react.fragment"),s1=Object.prototype.hasOwnProperty,o1=n1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a1={key:!0,ref:!0,__self:!0,__source:!0};function uT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)s1.call(e,r)&&!a1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:r1,type:t,key:s,ref:o,props:i,_owner:o1.current}}df.Fragment=i1;df.jsx=uT;df.jsxs=uT;ZE.exports=df;var p=ZE.exports,ym={},cT={exports:{}},sr={},dT={exports:{}},hT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ae){var de=X.length;X.push(ae);e:for(;0<de;){var Ae=de-1>>>1,Te=X[Ae];if(0<i(Te,ae))X[Ae]=ae,X[de]=Te,de=Ae;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],de=X.pop();if(de!==ae){X[0]=de;e:for(var Ae=0,Te=X.length,H=Te>>>1;Ae<H;){var $e=2*(Ae+1)-1,ze=X[$e],Ye=$e+1,et=X[Ye];if(0>i(ze,de))Ye<Te&&0>i(et,ze)?(X[Ae]=et,X[Ye]=de,Ae=Ye):(X[Ae]=ze,X[$e]=de,Ae=$e);else if(Ye<Te&&0>i(et,de))X[Ae]=et,X[Ye]=de,Ae=Ye;else break e}}return ae}function i(X,ae){var de=X.sortIndex-ae.sortIndex;return de!==0?de:X.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],d=1,f=null,g=3,y=!1,S=!1,x=!1,N=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var ae=n(c);ae!==null;){if(ae.callback===null)r(c);else if(ae.startTime<=X)r(c),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(c)}}function D(X){if(x=!1,b(X),!S)if(n(l)!==null)S=!0,Je(B);else{var ae=n(c);ae!==null&&we(D,ae.startTime-X)}}function B(X,ae){S=!1,x&&(x=!1,A(w),w=-1),y=!0;var de=g;try{for(b(ae),f=n(l);f!==null&&(!(f.expirationTime>ae)||X&&!O());){var Ae=f.callback;if(typeof Ae=="function"){f.callback=null,g=f.priorityLevel;var Te=Ae(f.expirationTime<=ae);ae=t.unstable_now(),typeof Te=="function"?f.callback=Te:f===n(l)&&r(l),b(ae)}else r(l);f=n(l)}if(f!==null)var H=!0;else{var $e=n(c);$e!==null&&we(D,$e.startTime-ae),H=!1}return H}finally{f=null,g=de,y=!1}}var R=!1,k=null,w=-1,I=5,C=-1;function O(){return!(t.unstable_now()-C<I)}function V(){if(k!==null){var X=t.unstable_now();C=X;var ae=!0;try{ae=k(!0,X)}finally{ae?P():(R=!1,k=null)}}else R=!1}var P;if(typeof E=="function")P=function(){E(V)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Qe=ge.port2;ge.port1.onmessage=V,P=function(){Qe.postMessage(null)}}else P=function(){N(V,0)};function Je(X){k=X,R||(R=!0,P())}function we(X,ae){w=N(function(){X(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,Je(B))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var ae=3;break;default:ae=g}var de=g;g=ae;try{return X()}finally{g=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=g;g=X;try{return ae()}finally{g=de}},t.unstable_scheduleCallback=function(X,ae,de){var Ae=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ae+de:Ae):de=Ae,X){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=de+Te,X={id:d++,callback:ae,priorityLevel:X,startTime:de,expirationTime:Te,sortIndex:-1},de>Ae?(X.sortIndex=de,e(c,X),n(l)===null&&X===n(c)&&(x?(A(w),w=-1):x=!0,we(D,de-Ae))):(X.sortIndex=Te,e(l,X),S||y||(S=!0,Je(B))),X},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(X){var ae=g;return function(){var de=g;g=ae;try{return X.apply(this,arguments)}finally{g=de}}}})(hT);dT.exports=hT;var l1=dT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1=F,tr=l1;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fT=new Set,Wu={};function ia(t,e){rl(t,e),rl(t+"Capture",e)}function rl(t,e){for(Wu[t]=e,t=0;t<e.length;t++)fT.add(e[t])}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wm=Object.prototype.hasOwnProperty,c1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Iy={},Sy={};function d1(t){return wm.call(Sy,t)?!0:wm.call(Iy,t)?!1:c1.test(t)?Sy[t]=!0:(Iy[t]=!0,!1)}function h1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function f1(t,e,n,r){if(e===null||typeof e>"u"||h1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function An(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Jt[t]=new An(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Jt[e]=new An(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Jt[t]=new An(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Jt[t]=new An(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Jt[t]=new An(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Jt[t]=new An(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Jt[t]=new An(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Jt[t]=new An(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Jt[t]=new An(t,5,!1,t.toLowerCase(),null,!1,!1)});var ev=/[\-:]([a-z])/g;function tv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ev,tv);Jt[e]=new An(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ev,tv);Jt[e]=new An(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ev,tv);Jt[e]=new An(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Jt[t]=new An(t,1,!1,t.toLowerCase(),null,!1,!1)});Jt.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Jt[t]=new An(t,1,!1,t.toLowerCase(),null,!0,!0)});function nv(t,e,n,r){var i=Jt.hasOwnProperty(e)?Jt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(f1(e,n,i,r)&&(n=null),r||i===null?d1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ss=u1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wd=Symbol.for("react.element"),Na=Symbol.for("react.portal"),Oa=Symbol.for("react.fragment"),rv=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),pT=Symbol.for("react.provider"),mT=Symbol.for("react.context"),iv=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),bm=Symbol.for("react.suspense_list"),sv=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),gT=Symbol.for("react.offscreen"),Ay=Symbol.iterator;function tu(t){return t===null||typeof t!="object"?null:(t=Ay&&t[Ay]||t["@@iterator"],typeof t=="function"?t:null)}var vt=Object.assign,bp;function pu(t){if(bp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bp=e&&e[1]||""}return`
`+bp+t}var Ip=!1;function Sp(t,e){if(!t||Ip)return"";Ip=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ip=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pu(t):""}function p1(t){switch(t.tag){case 5:return pu(t.type);case 16:return pu("Lazy");case 13:return pu("Suspense");case 19:return pu("SuspenseList");case 0:case 2:case 15:return t=Sp(t.type,!1),t;case 11:return t=Sp(t.type.render,!1),t;case 1:return t=Sp(t.type,!0),t;default:return""}}function Im(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oa:return"Fragment";case Na:return"Portal";case Em:return"Profiler";case rv:return"StrictMode";case Tm:return"Suspense";case bm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mT:return(t.displayName||"Context")+".Consumer";case pT:return(t._context.displayName||"Context")+".Provider";case iv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case sv:return e=t.displayName||null,e!==null?e:Im(t.type)||"Memo";case Is:e=t._payload,t=t._init;try{return Im(t(e))}catch{}}return null}function m1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Im(e);case 8:return e===rv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function g1(t){var e=vT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ed(t){t._valueTracker||(t._valueTracker=g1(t))}function _T(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sm(t,e){var n=e.checked;return vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ky(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yT(t,e){e=e.checked,e!=null&&nv(t,"checked",e,!1)}function Am(t,e){yT(t,e);var n=Qs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?km(t,e.type,n):e.hasOwnProperty("defaultValue")&&km(t,e.type,Qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function km(t,e,n){(e!=="number"||vh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mu=Array.isArray;function Wa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function xm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(mu(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qs(n)}}function wT(t,e){var n=Qs(e.value),r=Qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ry(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ET(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ET(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Td,TT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Td=Td||document.createElement("div"),Td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ku(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Au={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},v1=["Webkit","ms","Moz","O"];Object.keys(Au).forEach(function(t){v1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Au[e]=Au[t]})});function bT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Au.hasOwnProperty(t)&&Au[t]?(""+e).trim():e+"px"}function IT(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=bT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _1=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rm(t,e){if(e){if(_1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nm=null;function ov(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Om=null,Ka=null,Ga=null;function Py(t){if(t=kc(t)){if(typeof Om!="function")throw Error(J(280));var e=t.stateNode;e&&(e=gf(e),Om(t.stateNode,t.type,e))}}function ST(t){Ka?Ga?Ga.push(t):Ga=[t]:Ka=t}function AT(){if(Ka){var t=Ka,e=Ga;if(Ga=Ka=null,Py(t),e)for(t=0;t<e.length;t++)Py(e[t])}}function kT(t,e){return t(e)}function xT(){}var Ap=!1;function CT(t,e,n){if(Ap)return t(e,n);Ap=!0;try{return kT(t,e,n)}finally{Ap=!1,(Ka!==null||Ga!==null)&&(xT(),AT())}}function Gu(t,e){var n=t.stateNode;if(n===null)return null;var r=gf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Dm=!1;if(Gi)try{var nu={};Object.defineProperty(nu,"passive",{get:function(){Dm=!0}}),window.addEventListener("test",nu,nu),window.removeEventListener("test",nu,nu)}catch{Dm=!1}function y1(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ku=!1,_h=null,yh=!1,jm=null,w1={onError:function(t){ku=!0,_h=t}};function E1(t,e,n,r,i,s,o,a,l){ku=!1,_h=null,y1.apply(w1,arguments)}function T1(t,e,n,r,i,s,o,a,l){if(E1.apply(this,arguments),ku){if(ku){var c=_h;ku=!1,_h=null}else throw Error(J(198));yh||(yh=!0,jm=c)}}function sa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function RT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ny(t){if(sa(t)!==t)throw Error(J(188))}function b1(t){var e=t.alternate;if(!e){if(e=sa(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ny(i),t;if(s===r)return Ny(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function PT(t){return t=b1(t),t!==null?NT(t):null}function NT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NT(t);if(e!==null)return e;t=t.sibling}return null}var OT=tr.unstable_scheduleCallback,Oy=tr.unstable_cancelCallback,I1=tr.unstable_shouldYield,S1=tr.unstable_requestPaint,It=tr.unstable_now,A1=tr.unstable_getCurrentPriorityLevel,av=tr.unstable_ImmediatePriority,DT=tr.unstable_UserBlockingPriority,wh=tr.unstable_NormalPriority,k1=tr.unstable_LowPriority,jT=tr.unstable_IdlePriority,hf=null,pi=null;function x1(t){if(pi&&typeof pi.onCommitFiberRoot=="function")try{pi.onCommitFiberRoot(hf,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:P1,C1=Math.log,R1=Math.LN2;function P1(t){return t>>>=0,t===0?32:31-(C1(t)/R1|0)|0}var bd=64,Id=4194304;function gu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Eh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=gu(a):(s&=o,s!==0&&(r=gu(s)))}else o=n&~i,o!==0?r=gu(o):s!==0&&(r=gu(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gr(e),i=1<<n,r|=t[n],e&=~i;return r}function N1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function O1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Gr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=N1(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Lm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function LT(){var t=bd;return bd<<=1,!(bd&4194240)&&(bd=64),t}function kp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gr(e),t[e]=n}function D1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function lv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var He=0;function MT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var VT,uv,FT,$T,UT,Mm=!1,Sd=[],Vs=null,Fs=null,$s=null,Qu=new Map,Ju=new Map,ks=[],j1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dy(t,e){switch(t){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Qu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ju.delete(e.pointerId)}}function ru(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=kc(e),e!==null&&uv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function L1(t,e,n,r,i){switch(e){case"focusin":return Vs=ru(Vs,t,e,n,r,i),!0;case"dragenter":return Fs=ru(Fs,t,e,n,r,i),!0;case"mouseover":return $s=ru($s,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Qu.set(s,ru(Qu.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ju.set(s,ru(Ju.get(s)||null,t,e,n,r,i)),!0}return!1}function BT(t){var e=Po(t.target);if(e!==null){var n=sa(e);if(n!==null){if(e=n.tag,e===13){if(e=RT(n),e!==null){t.blockedOn=e,UT(t.priority,function(){FT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nm=r,n.target.dispatchEvent(r),Nm=null}else return e=kc(n),e!==null&&uv(e),t.blockedOn=n,!1;e.shift()}return!0}function jy(t,e,n){Jd(t)&&n.delete(e)}function M1(){Mm=!1,Vs!==null&&Jd(Vs)&&(Vs=null),Fs!==null&&Jd(Fs)&&(Fs=null),$s!==null&&Jd($s)&&($s=null),Qu.forEach(jy),Ju.forEach(jy)}function iu(t,e){t.blockedOn===e&&(t.blockedOn=null,Mm||(Mm=!0,tr.unstable_scheduleCallback(tr.unstable_NormalPriority,M1)))}function Yu(t){function e(i){return iu(i,t)}if(0<Sd.length){iu(Sd[0],t);for(var n=1;n<Sd.length;n++){var r=Sd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vs!==null&&iu(Vs,t),Fs!==null&&iu(Fs,t),$s!==null&&iu($s,t),Qu.forEach(e),Ju.forEach(e),n=0;n<ks.length;n++)r=ks[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ks.length&&(n=ks[0],n.blockedOn===null);)BT(n),n.blockedOn===null&&ks.shift()}var Qa=ss.ReactCurrentBatchConfig,Th=!0;function V1(t,e,n,r){var i=He,s=Qa.transition;Qa.transition=null;try{He=1,cv(t,e,n,r)}finally{He=i,Qa.transition=s}}function F1(t,e,n,r){var i=He,s=Qa.transition;Qa.transition=null;try{He=4,cv(t,e,n,r)}finally{He=i,Qa.transition=s}}function cv(t,e,n,r){if(Th){var i=Vm(t,e,n,r);if(i===null)Mp(t,e,r,bh,n),Dy(t,r);else if(L1(i,t,e,n,r))r.stopPropagation();else if(Dy(t,r),e&4&&-1<j1.indexOf(t)){for(;i!==null;){var s=kc(i);if(s!==null&&VT(s),s=Vm(t,e,n,r),s===null&&Mp(t,e,r,bh,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Mp(t,e,r,null,n)}}var bh=null;function Vm(t,e,n,r){if(bh=null,t=ov(r),t=Po(t),t!==null)if(e=sa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=RT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bh=t,null}function zT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A1()){case av:return 1;case DT:return 4;case wh:case k1:return 16;case jT:return 536870912;default:return 16}default:return 16}}var js=null,dv=null,Yd=null;function qT(){if(Yd)return Yd;var t,e=dv,n=e.length,r,i="value"in js?js.value:js.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Yd=i.slice(t,1<r?1-r:void 0)}function Xd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ad(){return!0}function Ly(){return!1}function or(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ad:Ly,this.isPropagationStopped=Ly,this}return vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),e}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hv=or(Sl),Ac=vt({},Sl,{view:0,detail:0}),$1=or(Ac),xp,Cp,su,ff=vt({},Ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==su&&(su&&t.type==="mousemove"?(xp=t.screenX-su.screenX,Cp=t.screenY-su.screenY):Cp=xp=0,su=t),xp)},movementY:function(t){return"movementY"in t?t.movementY:Cp}}),My=or(ff),U1=vt({},ff,{dataTransfer:0}),B1=or(U1),z1=vt({},Ac,{relatedTarget:0}),Rp=or(z1),q1=vt({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),H1=or(q1),W1=vt({},Sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K1=or(W1),G1=vt({},Sl,{data:0}),Vy=or(G1),Q1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Y1[t])?!!e[t]:!1}function fv(){return X1}var Z1=vt({},Ac,{key:function(t){if(t.key){var e=Q1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Xd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?J1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fv,charCode:function(t){return t.type==="keypress"?Xd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Xd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eC=or(Z1),tC=vt({},ff,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fy=or(tC),nC=vt({},Ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fv}),rC=or(nC),iC=vt({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),sC=or(iC),oC=vt({},ff,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),aC=or(oC),lC=[9,13,27,32],pv=Gi&&"CompositionEvent"in window,xu=null;Gi&&"documentMode"in document&&(xu=document.documentMode);var uC=Gi&&"TextEvent"in window&&!xu,HT=Gi&&(!pv||xu&&8<xu&&11>=xu),$y=" ",Uy=!1;function WT(t,e){switch(t){case"keyup":return lC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Da=!1;function cC(t,e){switch(t){case"compositionend":return KT(e);case"keypress":return e.which!==32?null:(Uy=!0,$y);case"textInput":return t=e.data,t===$y&&Uy?null:t;default:return null}}function dC(t,e){if(Da)return t==="compositionend"||!pv&&WT(t,e)?(t=qT(),Yd=dv=js=null,Da=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HT&&e.locale!=="ko"?null:e.data;default:return null}}var hC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function By(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hC[t.type]:e==="textarea"}function GT(t,e,n,r){ST(r),e=Ih(e,"onChange"),0<e.length&&(n=new hv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cu=null,Xu=null;function fC(t){sb(t,0)}function pf(t){var e=Ma(t);if(_T(e))return t}function pC(t,e){if(t==="change")return e}var QT=!1;if(Gi){var Pp;if(Gi){var Np="oninput"in document;if(!Np){var zy=document.createElement("div");zy.setAttribute("oninput","return;"),Np=typeof zy.oninput=="function"}Pp=Np}else Pp=!1;QT=Pp&&(!document.documentMode||9<document.documentMode)}function qy(){Cu&&(Cu.detachEvent("onpropertychange",JT),Xu=Cu=null)}function JT(t){if(t.propertyName==="value"&&pf(Xu)){var e=[];GT(e,Xu,t,ov(t)),CT(fC,e)}}function mC(t,e,n){t==="focusin"?(qy(),Cu=e,Xu=n,Cu.attachEvent("onpropertychange",JT)):t==="focusout"&&qy()}function gC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return pf(Xu)}function vC(t,e){if(t==="click")return pf(e)}function _C(t,e){if(t==="input"||t==="change")return pf(e)}function yC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jr=typeof Object.is=="function"?Object.is:yC;function Zu(t,e){if(Jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wm.call(e,i)||!Jr(t[i],e[i]))return!1}return!0}function Hy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Wy(t,e){var n=Hy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hy(n)}}function YT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?YT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function XT(){for(var t=window,e=vh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vh(t.document)}return e}function mv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function wC(t){var e=XT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&YT(n.ownerDocument.documentElement,n)){if(r!==null&&mv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Wy(n,s);var o=Wy(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EC=Gi&&"documentMode"in document&&11>=document.documentMode,ja=null,Fm=null,Ru=null,$m=!1;function Ky(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$m||ja==null||ja!==vh(r)||(r=ja,"selectionStart"in r&&mv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ru&&Zu(Ru,r)||(Ru=r,r=Ih(Fm,"onSelect"),0<r.length&&(e=new hv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ja)))}function kd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var La={animationend:kd("Animation","AnimationEnd"),animationiteration:kd("Animation","AnimationIteration"),animationstart:kd("Animation","AnimationStart"),transitionend:kd("Transition","TransitionEnd")},Op={},ZT={};Gi&&(ZT=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function mf(t){if(Op[t])return Op[t];if(!La[t])return t;var e=La[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ZT)return Op[t]=e[n];return t}var eb=mf("animationend"),tb=mf("animationiteration"),nb=mf("animationstart"),rb=mf("transitionend"),ib=new Map,Gy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(t,e){ib.set(t,e),ia(e,[t])}for(var Dp=0;Dp<Gy.length;Dp++){var jp=Gy[Dp],TC=jp.toLowerCase(),bC=jp[0].toUpperCase()+jp.slice(1);to(TC,"on"+bC)}to(eb,"onAnimationEnd");to(tb,"onAnimationIteration");to(nb,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(rb,"onTransitionEnd");rl("onMouseEnter",["mouseout","mouseover"]);rl("onMouseLeave",["mouseout","mouseover"]);rl("onPointerEnter",["pointerout","pointerover"]);rl("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IC=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function Qy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,T1(r,e,void 0,t),t.currentTarget=null}function sb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Qy(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Qy(i,a,c),s=l}}}if(yh)throw t=jm,yh=!1,jm=null,t}function lt(t,e){var n=e[Hm];n===void 0&&(n=e[Hm]=new Set);var r=t+"__bubble";n.has(r)||(ob(e,t,2,!1),n.add(r))}function Lp(t,e,n){var r=0;e&&(r|=4),ob(n,t,r,e)}var xd="_reactListening"+Math.random().toString(36).slice(2);function ec(t){if(!t[xd]){t[xd]=!0,fT.forEach(function(n){n!=="selectionchange"&&(IC.has(n)||Lp(n,!1,t),Lp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xd]||(e[xd]=!0,Lp("selectionchange",!1,e))}}function ob(t,e,n,r){switch(zT(e)){case 1:var i=V1;break;case 4:i=F1;break;default:i=cv}n=i.bind(null,e,n,t),i=void 0,!Dm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Mp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Po(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}CT(function(){var c=s,d=ov(n),f=[];e:{var g=ib.get(t);if(g!==void 0){var y=hv,S=t;switch(t){case"keypress":if(Xd(n)===0)break e;case"keydown":case"keyup":y=eC;break;case"focusin":S="focus",y=Rp;break;case"focusout":S="blur",y=Rp;break;case"beforeblur":case"afterblur":y=Rp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=My;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=B1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=rC;break;case eb:case tb:case nb:y=H1;break;case rb:y=sC;break;case"scroll":y=$1;break;case"wheel":y=aC;break;case"copy":case"cut":case"paste":y=K1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Fy}var x=(e&4)!==0,N=!x&&t==="scroll",A=x?g!==null?g+"Capture":null:g;x=[];for(var E=c,b;E!==null;){b=E;var D=b.stateNode;if(b.tag===5&&D!==null&&(b=D,A!==null&&(D=Gu(E,A),D!=null&&x.push(tc(E,D,b)))),N)break;E=E.return}0<x.length&&(g=new y(g,S,null,n,d),f.push({event:g,listeners:x}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==Nm&&(S=n.relatedTarget||n.fromElement)&&(Po(S)||S[Qi]))break e;if((y||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=c,S=S?Po(S):null,S!==null&&(N=sa(S),S!==N||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=c),y!==S)){if(x=My,D="onMouseLeave",A="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(x=Fy,D="onPointerLeave",A="onPointerEnter",E="pointer"),N=y==null?g:Ma(y),b=S==null?g:Ma(S),g=new x(D,E+"leave",y,n,d),g.target=N,g.relatedTarget=b,D=null,Po(d)===c&&(x=new x(A,E+"enter",S,n,d),x.target=b,x.relatedTarget=N,D=x),N=D,y&&S)t:{for(x=y,A=S,E=0,b=x;b;b=Ta(b))E++;for(b=0,D=A;D;D=Ta(D))b++;for(;0<E-b;)x=Ta(x),E--;for(;0<b-E;)A=Ta(A),b--;for(;E--;){if(x===A||A!==null&&x===A.alternate)break t;x=Ta(x),A=Ta(A)}x=null}else x=null;y!==null&&Jy(f,g,y,x,!1),S!==null&&N!==null&&Jy(f,N,S,x,!0)}}e:{if(g=c?Ma(c):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var B=pC;else if(By(g))if(QT)B=_C;else{B=gC;var R=mC}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=vC);if(B&&(B=B(t,c))){GT(f,B,n,d);break e}R&&R(t,g,c),t==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&km(g,"number",g.value)}switch(R=c?Ma(c):window,t){case"focusin":(By(R)||R.contentEditable==="true")&&(ja=R,Fm=c,Ru=null);break;case"focusout":Ru=Fm=ja=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,Ky(f,n,d);break;case"selectionchange":if(EC)break;case"keydown":case"keyup":Ky(f,n,d)}var k;if(pv)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Da?WT(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(HT&&n.locale!=="ko"&&(Da||w!=="onCompositionStart"?w==="onCompositionEnd"&&Da&&(k=qT()):(js=d,dv="value"in js?js.value:js.textContent,Da=!0)),R=Ih(c,w),0<R.length&&(w=new Vy(w,t,null,n,d),f.push({event:w,listeners:R}),k?w.data=k:(k=KT(n),k!==null&&(w.data=k)))),(k=uC?cC(t,n):dC(t,n))&&(c=Ih(c,"onBeforeInput"),0<c.length&&(d=new Vy("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=k))}sb(f,e)})}function tc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ih(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gu(t,n),s!=null&&r.unshift(tc(t,s,i)),s=Gu(t,e),s!=null&&r.push(tc(t,s,i))),t=t.return}return r}function Ta(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Gu(n,s),l!=null&&o.unshift(tc(n,l,a))):i||(l=Gu(n,s),l!=null&&o.push(tc(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SC=/\r\n?/g,AC=/\u0000|\uFFFD/g;function Yy(t){return(typeof t=="string"?t:""+t).replace(SC,`
`).replace(AC,"")}function Cd(t,e,n){if(e=Yy(e),Yy(t)!==e&&n)throw Error(J(425))}function Sh(){}var Um=null,Bm=null;function zm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qm=typeof setTimeout=="function"?setTimeout:void 0,kC=typeof clearTimeout=="function"?clearTimeout:void 0,Xy=typeof Promise=="function"?Promise:void 0,xC=typeof queueMicrotask=="function"?queueMicrotask:typeof Xy<"u"?function(t){return Xy.resolve(null).then(t).catch(CC)}:qm;function CC(t){setTimeout(function(){throw t})}function Vp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Yu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Yu(e)}function Us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Al=Math.random().toString(36).slice(2),hi="__reactFiber$"+Al,nc="__reactProps$"+Al,Qi="__reactContainer$"+Al,Hm="__reactEvents$"+Al,RC="__reactListeners$"+Al,PC="__reactHandles$"+Al;function Po(t){var e=t[hi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qi]||n[hi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zy(t);t!==null;){if(n=t[hi])return n;t=Zy(t)}return e}t=n,n=t.parentNode}return null}function kc(t){return t=t[hi]||t[Qi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ma(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function gf(t){return t[nc]||null}var Wm=[],Va=-1;function no(t){return{current:t}}function ut(t){0>Va||(t.current=Wm[Va],Wm[Va]=null,Va--)}function it(t,e){Va++,Wm[Va]=t.current,t.current=e}var Js={},un=no(Js),Ln=no(!1),Bo=Js;function il(t,e){var n=t.type.contextTypes;if(!n)return Js;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Mn(t){return t=t.childContextTypes,t!=null}function Ah(){ut(Ln),ut(un)}function ew(t,e,n){if(un.current!==Js)throw Error(J(168));it(un,e),it(Ln,n)}function ab(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,m1(t)||"Unknown",i));return vt({},n,r)}function kh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Js,Bo=un.current,it(un,t),it(Ln,Ln.current),!0}function tw(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=ab(t,e,Bo),r.__reactInternalMemoizedMergedChildContext=t,ut(Ln),ut(un),it(un,t)):ut(Ln),it(Ln,n)}var Vi=null,vf=!1,Fp=!1;function lb(t){Vi===null?Vi=[t]:Vi.push(t)}function NC(t){vf=!0,lb(t)}function ro(){if(!Fp&&Vi!==null){Fp=!0;var t=0,e=He;try{var n=Vi;for(He=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vi=null,vf=!1}catch(i){throw Vi!==null&&(Vi=Vi.slice(t+1)),OT(av,ro),i}finally{He=e,Fp=!1}}return null}var Fa=[],$a=0,xh=null,Ch=0,gr=[],vr=0,zo=null,Fi=1,$i="";function So(t,e){Fa[$a++]=Ch,Fa[$a++]=xh,xh=t,Ch=e}function ub(t,e,n){gr[vr++]=Fi,gr[vr++]=$i,gr[vr++]=zo,zo=t;var r=Fi;t=$i;var i=32-Gr(r)-1;r&=~(1<<i),n+=1;var s=32-Gr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fi=1<<32-Gr(e)+i|n<<i|r,$i=s+t}else Fi=1<<s|n<<i|r,$i=t}function gv(t){t.return!==null&&(So(t,1),ub(t,1,0))}function vv(t){for(;t===xh;)xh=Fa[--$a],Fa[$a]=null,Ch=Fa[--$a],Fa[$a]=null;for(;t===zo;)zo=gr[--vr],gr[vr]=null,$i=gr[--vr],gr[vr]=null,Fi=gr[--vr],gr[vr]=null}var Xn=null,Yn=null,ht=!1,Wr=null;function cb(t,e){var n=yr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xn=t,Yn=Us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xn=t,Yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zo!==null?{id:Fi,overflow:$i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xn=t,Yn=null,!0):!1;default:return!1}}function Km(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gm(t){if(ht){var e=Yn;if(e){var n=e;if(!nw(t,e)){if(Km(t))throw Error(J(418));e=Us(n.nextSibling);var r=Xn;e&&nw(t,e)?cb(r,n):(t.flags=t.flags&-4097|2,ht=!1,Xn=t)}}else{if(Km(t))throw Error(J(418));t.flags=t.flags&-4097|2,ht=!1,Xn=t}}}function rw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xn=t}function Rd(t){if(t!==Xn)return!1;if(!ht)return rw(t),ht=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zm(t.type,t.memoizedProps)),e&&(e=Yn)){if(Km(t))throw db(),Error(J(418));for(;e;)cb(t,e),e=Us(e.nextSibling)}if(rw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Yn=Us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Yn=null}}else Yn=Xn?Us(t.stateNode.nextSibling):null;return!0}function db(){for(var t=Yn;t;)t=Us(t.nextSibling)}function sl(){Yn=Xn=null,ht=!1}function _v(t){Wr===null?Wr=[t]:Wr.push(t)}var OC=ss.ReactCurrentBatchConfig;function ou(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Pd(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iw(t){var e=t._init;return e(t._payload)}function hb(t){function e(A,E){if(t){var b=A.deletions;b===null?(A.deletions=[E],A.flags|=16):b.push(E)}}function n(A,E){if(!t)return null;for(;E!==null;)e(A,E),E=E.sibling;return null}function r(A,E){for(A=new Map;E!==null;)E.key!==null?A.set(E.key,E):A.set(E.index,E),E=E.sibling;return A}function i(A,E){return A=Hs(A,E),A.index=0,A.sibling=null,A}function s(A,E,b){return A.index=b,t?(b=A.alternate,b!==null?(b=b.index,b<E?(A.flags|=2,E):b):(A.flags|=2,E)):(A.flags|=1048576,E)}function o(A){return t&&A.alternate===null&&(A.flags|=2),A}function a(A,E,b,D){return E===null||E.tag!==6?(E=Wp(b,A.mode,D),E.return=A,E):(E=i(E,b),E.return=A,E)}function l(A,E,b,D){var B=b.type;return B===Oa?d(A,E,b.props.children,D,b.key):E!==null&&(E.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Is&&iw(B)===E.type)?(D=i(E,b.props),D.ref=ou(A,E,b),D.return=A,D):(D=sh(b.type,b.key,b.props,null,A.mode,D),D.ref=ou(A,E,b),D.return=A,D)}function c(A,E,b,D){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=Kp(b,A.mode,D),E.return=A,E):(E=i(E,b.children||[]),E.return=A,E)}function d(A,E,b,D,B){return E===null||E.tag!==7?(E=Fo(b,A.mode,D,B),E.return=A,E):(E=i(E,b),E.return=A,E)}function f(A,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Wp(""+E,A.mode,b),E.return=A,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case wd:return b=sh(E.type,E.key,E.props,null,A.mode,b),b.ref=ou(A,null,E),b.return=A,b;case Na:return E=Kp(E,A.mode,b),E.return=A,E;case Is:var D=E._init;return f(A,D(E._payload),b)}if(mu(E)||tu(E))return E=Fo(E,A.mode,b,null),E.return=A,E;Pd(A,E)}return null}function g(A,E,b,D){var B=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return B!==null?null:a(A,E,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wd:return b.key===B?l(A,E,b,D):null;case Na:return b.key===B?c(A,E,b,D):null;case Is:return B=b._init,g(A,E,B(b._payload),D)}if(mu(b)||tu(b))return B!==null?null:d(A,E,b,D,null);Pd(A,b)}return null}function y(A,E,b,D,B){if(typeof D=="string"&&D!==""||typeof D=="number")return A=A.get(b)||null,a(E,A,""+D,B);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case wd:return A=A.get(D.key===null?b:D.key)||null,l(E,A,D,B);case Na:return A=A.get(D.key===null?b:D.key)||null,c(E,A,D,B);case Is:var R=D._init;return y(A,E,b,R(D._payload),B)}if(mu(D)||tu(D))return A=A.get(b)||null,d(E,A,D,B,null);Pd(E,D)}return null}function S(A,E,b,D){for(var B=null,R=null,k=E,w=E=0,I=null;k!==null&&w<b.length;w++){k.index>w?(I=k,k=null):I=k.sibling;var C=g(A,k,b[w],D);if(C===null){k===null&&(k=I);break}t&&k&&C.alternate===null&&e(A,k),E=s(C,E,w),R===null?B=C:R.sibling=C,R=C,k=I}if(w===b.length)return n(A,k),ht&&So(A,w),B;if(k===null){for(;w<b.length;w++)k=f(A,b[w],D),k!==null&&(E=s(k,E,w),R===null?B=k:R.sibling=k,R=k);return ht&&So(A,w),B}for(k=r(A,k);w<b.length;w++)I=y(k,A,w,b[w],D),I!==null&&(t&&I.alternate!==null&&k.delete(I.key===null?w:I.key),E=s(I,E,w),R===null?B=I:R.sibling=I,R=I);return t&&k.forEach(function(O){return e(A,O)}),ht&&So(A,w),B}function x(A,E,b,D){var B=tu(b);if(typeof B!="function")throw Error(J(150));if(b=B.call(b),b==null)throw Error(J(151));for(var R=B=null,k=E,w=E=0,I=null,C=b.next();k!==null&&!C.done;w++,C=b.next()){k.index>w?(I=k,k=null):I=k.sibling;var O=g(A,k,C.value,D);if(O===null){k===null&&(k=I);break}t&&k&&O.alternate===null&&e(A,k),E=s(O,E,w),R===null?B=O:R.sibling=O,R=O,k=I}if(C.done)return n(A,k),ht&&So(A,w),B;if(k===null){for(;!C.done;w++,C=b.next())C=f(A,C.value,D),C!==null&&(E=s(C,E,w),R===null?B=C:R.sibling=C,R=C);return ht&&So(A,w),B}for(k=r(A,k);!C.done;w++,C=b.next())C=y(k,A,w,C.value,D),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?w:C.key),E=s(C,E,w),R===null?B=C:R.sibling=C,R=C);return t&&k.forEach(function(V){return e(A,V)}),ht&&So(A,w),B}function N(A,E,b,D){if(typeof b=="object"&&b!==null&&b.type===Oa&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case wd:e:{for(var B=b.key,R=E;R!==null;){if(R.key===B){if(B=b.type,B===Oa){if(R.tag===7){n(A,R.sibling),E=i(R,b.props.children),E.return=A,A=E;break e}}else if(R.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Is&&iw(B)===R.type){n(A,R.sibling),E=i(R,b.props),E.ref=ou(A,R,b),E.return=A,A=E;break e}n(A,R);break}else e(A,R);R=R.sibling}b.type===Oa?(E=Fo(b.props.children,A.mode,D,b.key),E.return=A,A=E):(D=sh(b.type,b.key,b.props,null,A.mode,D),D.ref=ou(A,E,b),D.return=A,A=D)}return o(A);case Na:e:{for(R=b.key;E!==null;){if(E.key===R)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){n(A,E.sibling),E=i(E,b.children||[]),E.return=A,A=E;break e}else{n(A,E);break}else e(A,E);E=E.sibling}E=Kp(b,A.mode,D),E.return=A,A=E}return o(A);case Is:return R=b._init,N(A,E,R(b._payload),D)}if(mu(b))return S(A,E,b,D);if(tu(b))return x(A,E,b,D);Pd(A,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(n(A,E.sibling),E=i(E,b),E.return=A,A=E):(n(A,E),E=Wp(b,A.mode,D),E.return=A,A=E),o(A)):n(A,E)}return N}var ol=hb(!0),fb=hb(!1),Rh=no(null),Ph=null,Ua=null,yv=null;function wv(){yv=Ua=Ph=null}function Ev(t){var e=Rh.current;ut(Rh),t._currentValue=e}function Qm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ja(t,e){Ph=t,yv=Ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jn=!0),t.firstContext=null)}function br(t){var e=t._currentValue;if(yv!==t)if(t={context:t,memoizedValue:e,next:null},Ua===null){if(Ph===null)throw Error(J(308));Ua=t,Ph.dependencies={lanes:0,firstContext:t}}else Ua=Ua.next=t;return e}var No=null;function Tv(t){No===null?No=[t]:No.push(t)}function pb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Tv(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ji(t,r)}function Ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ss=!1;function bv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ji(t,n)}return i=r.interleaved,i===null?(e.next=e,Tv(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ji(t,n)}function Zd(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lv(t,n)}}function sw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nh(t,e,n,r){var i=t.updateQueue;Ss=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,d=c=l=null,a=s;do{var g=a.lane,y=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,x=a;switch(g=e,y=n,x.tag){case 1:if(S=x.payload,typeof S=="function"){f=S.call(y,f,g);break e}f=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=x.payload,g=typeof S=="function"?S.call(y,f,g):S,g==null)break e;f=vt({},f,g);break e;case 2:Ss=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=y,l=f):d=d.next=y,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ho|=o,t.lanes=o,t.memoizedState=f}}function ow(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var xc={},mi=no(xc),rc=no(xc),ic=no(xc);function Oo(t){if(t===xc)throw Error(J(174));return t}function Iv(t,e){switch(it(ic,e),it(rc,t),it(mi,xc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cm(e,t)}ut(mi),it(mi,e)}function al(){ut(mi),ut(rc),ut(ic)}function gb(t){Oo(ic.current);var e=Oo(mi.current),n=Cm(e,t.type);e!==n&&(it(rc,t),it(mi,n))}function Sv(t){rc.current===t&&(ut(mi),ut(rc))}var mt=no(0);function Oh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $p=[];function Av(){for(var t=0;t<$p.length;t++)$p[t]._workInProgressVersionPrimary=null;$p.length=0}var eh=ss.ReactCurrentDispatcher,Up=ss.ReactCurrentBatchConfig,qo=0,gt=null,Ot=null,Ut=null,Dh=!1,Pu=!1,sc=0,DC=0;function en(){throw Error(J(321))}function kv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jr(t[n],e[n]))return!1;return!0}function xv(t,e,n,r,i,s){if(qo=s,gt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,eh.current=t===null||t.memoizedState===null?VC:FC,t=n(r,i),Pu){s=0;do{if(Pu=!1,sc=0,25<=s)throw Error(J(301));s+=1,Ut=Ot=null,e.updateQueue=null,eh.current=$C,t=n(r,i)}while(Pu)}if(eh.current=jh,e=Ot!==null&&Ot.next!==null,qo=0,Ut=Ot=gt=null,Dh=!1,e)throw Error(J(300));return t}function Cv(){var t=sc!==0;return sc=0,t}function di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?gt.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function Ir(){if(Ot===null){var t=gt.alternate;t=t!==null?t.memoizedState:null}else t=Ot.next;var e=Ut===null?gt.memoizedState:Ut.next;if(e!==null)Ut=e,Ot=t;else{if(t===null)throw Error(J(310));Ot=t,t={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ut===null?gt.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function oc(t,e){return typeof e=="function"?e(t):e}function Bp(t){var e=Ir(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Ot,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var d=c.lane;if((qo&d)===d)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,gt.lanes|=d,Ho|=d}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Jr(r,e.memoizedState)||(jn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,gt.lanes|=s,Ho|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function zp(t){var e=Ir(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Jr(s,e.memoizedState)||(jn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function vb(){}function _b(t,e){var n=gt,r=Ir(),i=e(),s=!Jr(r.memoizedState,i);if(s&&(r.memoizedState=i,jn=!0),r=r.queue,Rv(Eb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ut!==null&&Ut.memoizedState.tag&1){if(n.flags|=2048,ac(9,wb.bind(null,n,r,i,e),void 0,null),Bt===null)throw Error(J(349));qo&30||yb(n,e,i)}return i}function yb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wb(t,e,n,r){e.value=n,e.getSnapshot=r,Tb(e)&&bb(t)}function Eb(t,e,n){return n(function(){Tb(e)&&bb(t)})}function Tb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jr(t,n)}catch{return!0}}function bb(t){var e=Ji(t,1);e!==null&&Qr(e,t,1,-1)}function aw(t){var e=di();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oc,lastRenderedState:t},e.queue=t,t=t.dispatch=MC.bind(null,gt,t),[e.memoizedState,t]}function ac(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=gt.updateQueue,e===null?(e={lastEffect:null,stores:null},gt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Ib(){return Ir().memoizedState}function th(t,e,n,r){var i=di();gt.flags|=t,i.memoizedState=ac(1|e,n,void 0,r===void 0?null:r)}function _f(t,e,n,r){var i=Ir();r=r===void 0?null:r;var s=void 0;if(Ot!==null){var o=Ot.memoizedState;if(s=o.destroy,r!==null&&kv(r,o.deps)){i.memoizedState=ac(e,n,s,r);return}}gt.flags|=t,i.memoizedState=ac(1|e,n,s,r)}function lw(t,e){return th(8390656,8,t,e)}function Rv(t,e){return _f(2048,8,t,e)}function Sb(t,e){return _f(4,2,t,e)}function Ab(t,e){return _f(4,4,t,e)}function kb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xb(t,e,n){return n=n!=null?n.concat([t]):null,_f(4,4,kb.bind(null,e,t),n)}function Pv(){}function Cb(t,e){var n=Ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rb(t,e){var n=Ir();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Pb(t,e,n){return qo&21?(Jr(n,e)||(n=LT(),gt.lanes|=n,Ho|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jn=!0),t.memoizedState=n)}function jC(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var r=Up.transition;Up.transition={};try{t(!1),e()}finally{He=n,Up.transition=r}}function Nb(){return Ir().memoizedState}function LC(t,e,n){var r=qs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ob(t))Db(e,n);else if(n=pb(t,e,n,r),n!==null){var i=En();Qr(n,t,r,i),jb(n,e,r)}}function MC(t,e,n){var r=qs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ob(t))Db(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jr(a,o)){var l=e.interleaved;l===null?(i.next=i,Tv(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=pb(t,e,i,r),n!==null&&(i=En(),Qr(n,t,r,i),jb(n,e,r))}}function Ob(t){var e=t.alternate;return t===gt||e!==null&&e===gt}function Db(t,e){Pu=Dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,lv(t,n)}}var jh={readContext:br,useCallback:en,useContext:en,useEffect:en,useImperativeHandle:en,useInsertionEffect:en,useLayoutEffect:en,useMemo:en,useReducer:en,useRef:en,useState:en,useDebugValue:en,useDeferredValue:en,useTransition:en,useMutableSource:en,useSyncExternalStore:en,useId:en,unstable_isNewReconciler:!1},VC={readContext:br,useCallback:function(t,e){return di().memoizedState=[t,e===void 0?null:e],t},useContext:br,useEffect:lw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,th(4194308,4,kb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return th(4194308,4,t,e)},useInsertionEffect:function(t,e){return th(4,2,t,e)},useMemo:function(t,e){var n=di();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=di();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=LC.bind(null,gt,t),[r.memoizedState,t]},useRef:function(t){var e=di();return t={current:t},e.memoizedState=t},useState:aw,useDebugValue:Pv,useDeferredValue:function(t){return di().memoizedState=t},useTransition:function(){var t=aw(!1),e=t[0];return t=jC.bind(null,t[1]),di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=gt,i=di();if(ht){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),Bt===null)throw Error(J(349));qo&30||yb(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,lw(Eb.bind(null,r,s,t),[t]),r.flags|=2048,ac(9,wb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=di(),e=Bt.identifierPrefix;if(ht){var n=$i,r=Fi;n=(r&~(1<<32-Gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=sc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=DC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},FC={readContext:br,useCallback:Cb,useContext:br,useEffect:Rv,useImperativeHandle:xb,useInsertionEffect:Sb,useLayoutEffect:Ab,useMemo:Rb,useReducer:Bp,useRef:Ib,useState:function(){return Bp(oc)},useDebugValue:Pv,useDeferredValue:function(t){var e=Ir();return Pb(e,Ot.memoizedState,t)},useTransition:function(){var t=Bp(oc)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:vb,useSyncExternalStore:_b,useId:Nb,unstable_isNewReconciler:!1},$C={readContext:br,useCallback:Cb,useContext:br,useEffect:Rv,useImperativeHandle:xb,useInsertionEffect:Sb,useLayoutEffect:Ab,useMemo:Rb,useReducer:zp,useRef:Ib,useState:function(){return zp(oc)},useDebugValue:Pv,useDeferredValue:function(t){var e=Ir();return Ot===null?e.memoizedState=t:Pb(e,Ot.memoizedState,t)},useTransition:function(){var t=zp(oc)[0],e=Ir().memoizedState;return[t,e]},useMutableSource:vb,useSyncExternalStore:_b,useId:Nb,unstable_isNewReconciler:!1};function Br(t,e){if(t&&t.defaultProps){e=vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var yf={isMounted:function(t){return(t=t._reactInternals)?sa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=En(),i=qs(t),s=Hi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Bs(t,s,i),e!==null&&(Qr(e,t,i,r),Zd(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=En(),i=qs(t),s=Hi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bs(t,s,i),e!==null&&(Qr(e,t,i,r),Zd(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=En(),r=qs(t),i=Hi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bs(t,i,r),e!==null&&(Qr(e,t,r,n),Zd(e,t,r))}};function uw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zu(n,r)||!Zu(i,s):!0}function Lb(t,e,n){var r=!1,i=Js,s=e.contextType;return typeof s=="object"&&s!==null?s=br(s):(i=Mn(e)?Bo:un.current,r=e.contextTypes,s=(r=r!=null)?il(t,i):Js),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function cw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yf.enqueueReplaceState(e,e.state,null)}function Ym(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},bv(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=br(s):(s=Mn(e)?Bo:un.current,i.context=il(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&yf.enqueueReplaceState(i,i.state,null),Nh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ll(t,e){try{var n="",r=e;do n+=p1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function qp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UC=typeof WeakMap=="function"?WeakMap:Map;function Mb(t,e,n){n=Hi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Mh||(Mh=!0,lg=r),Xm(t,e)},n}function Vb(t,e,n){n=Hi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xm(t,e),typeof r!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=tR.bind(null,t,e,n),e.then(t,t))}function hw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hi(-1,1),e.tag=2,Bs(n,e,1))),n.lanes|=1),t)}var BC=ss.ReactCurrentOwner,jn=!1;function wn(t,e,n,r){e.child=t===null?fb(e,null,n,r):ol(e,t.child,n,r)}function pw(t,e,n,r,i){n=n.render;var s=e.ref;return Ja(e,i),r=xv(t,e,n,r,s,i),n=Cv(),t!==null&&!jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(ht&&n&&gv(e),e.flags|=1,wn(t,e,r,i),e.child)}function mw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Fv(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Fb(t,e,s,r,i)):(t=sh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Zu,n(o,r)&&t.ref===e.ref)return Yi(t,e,i)}return e.flags|=1,t=Hs(s,r),t.ref=e.ref,t.return=e,e.child=t}function Fb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Zu(s,r)&&t.ref===e.ref)if(jn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(jn=!0);else return e.lanes=t.lanes,Yi(t,e,i)}return Zm(t,e,n,r,i)}function $b(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(za,Gn),Gn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,it(za,Gn),Gn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,it(za,Gn),Gn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,it(za,Gn),Gn|=r;return wn(t,e,i,n),e.child}function Ub(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zm(t,e,n,r,i){var s=Mn(n)?Bo:un.current;return s=il(e,s),Ja(e,i),n=xv(t,e,n,r,s,i),r=Cv(),t!==null&&!jn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(ht&&r&&gv(e),e.flags|=1,wn(t,e,n,i),e.child)}function gw(t,e,n,r,i){if(Mn(n)){var s=!0;kh(e)}else s=!1;if(Ja(e,i),e.stateNode===null)nh(t,e),Lb(e,n,r),Ym(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=br(c):(c=Mn(n)?Bo:un.current,c=il(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&cw(e,o,r,c),Ss=!1;var g=e.memoizedState;o.state=g,Nh(e,r,o,i),l=e.memoizedState,a!==r||g!==l||Ln.current||Ss?(typeof d=="function"&&(Jm(e,n,d,r),l=e.memoizedState),(a=Ss||uw(e,n,a,r,g,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mb(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Br(e.type,a),o.props=c,f=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=br(l):(l=Mn(n)?Bo:un.current,l=il(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||g!==l)&&cw(e,o,r,l),Ss=!1,g=e.memoizedState,o.state=g,Nh(e,r,o,i);var S=e.memoizedState;a!==f||g!==S||Ln.current||Ss?(typeof y=="function"&&(Jm(e,n,y,r),S=e.memoizedState),(c=Ss||uw(e,n,c,r,g,S,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return eg(t,e,n,r,s,i)}function eg(t,e,n,r,i,s){Ub(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&tw(e,n,!1),Yi(t,e,s);r=e.stateNode,BC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ol(e,t.child,null,s),e.child=ol(e,null,a,s)):wn(t,e,a,s),e.memoizedState=r.state,i&&tw(e,n,!0),e.child}function Bb(t){var e=t.stateNode;e.pendingContext?ew(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ew(t,e.context,!1),Iv(t,e.containerInfo)}function vw(t,e,n,r,i){return sl(),_v(i),e.flags|=256,wn(t,e,n,r),e.child}var tg={dehydrated:null,treeContext:null,retryLane:0};function ng(t){return{baseLanes:t,cachePool:null,transitions:null}}function zb(t,e,n){var r=e.pendingProps,i=mt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),it(mt,i&1),t===null)return Gm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Tf(o,r,0,null),t=Fo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ng(n),e.memoizedState=tg,t):Nv(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return zC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hs(a,s):(s=Fo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ng(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tg,r}return s=t.child,t=s.sibling,r=Hs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Nv(t,e){return e=Tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nd(t,e,n,r){return r!==null&&_v(r),ol(e,t.child,null,n),t=Nv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=qp(Error(J(422))),Nd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Tf({mode:"visible",children:r.children},i,0,null),s=Fo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ol(e,t.child,null,o),e.child.memoizedState=ng(o),e.memoizedState=tg,s);if(!(e.mode&1))return Nd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(J(419)),r=qp(s,r,void 0),Nd(t,e,o,r)}if(a=(o&t.childLanes)!==0,jn||a){if(r=Bt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ji(t,i),Qr(r,t,i,-1))}return Vv(),r=qp(Error(J(421))),Nd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=nR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Yn=Us(i.nextSibling),Xn=e,ht=!0,Wr=null,t!==null&&(gr[vr++]=Fi,gr[vr++]=$i,gr[vr++]=zo,Fi=t.id,$i=t.overflow,zo=e),e=Nv(e,r.children),e.flags|=4096,e)}function _w(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qm(t.return,e,n)}function Hp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(wn(t,e,r.children,n),r=mt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_w(t,n,e);else if(t.tag===19)_w(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(it(mt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Oh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Hp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Oh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Hp(e,!0,n,null,s);break;case"together":Hp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function nh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ho|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Hs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function qC(t,e,n){switch(e.tag){case 3:Bb(e),sl();break;case 5:gb(e);break;case 1:Mn(e.type)&&kh(e);break;case 4:Iv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;it(Rh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(it(mt,mt.current&1),e.flags|=128,null):n&e.child.childLanes?zb(t,e,n):(it(mt,mt.current&1),t=Yi(t,e,n),t!==null?t.sibling:null);it(mt,mt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),it(mt,mt.current),r)break;return null;case 22:case 23:return e.lanes=0,$b(t,e,n)}return Yi(t,e,n)}var Hb,rg,Wb,Kb;Hb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rg=function(){};Wb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Oo(mi.current);var s=null;switch(n){case"input":i=Sm(t,i),r=Sm(t,r),s=[];break;case"select":i=vt({},i,{value:void 0}),r=vt({},r,{value:void 0}),s=[];break;case"textarea":i=xm(t,i),r=xm(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sh)}Rm(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Wu.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Wu.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&lt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Kb=function(t,e,n,r){n!==r&&(e.flags|=4)};function au(t,e){if(!ht)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function tn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function HC(t,e,n){var r=e.pendingProps;switch(vv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return tn(e),null;case 1:return Mn(e.type)&&Ah(),tn(e),null;case 3:return r=e.stateNode,al(),ut(Ln),ut(un),Av(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(dg(Wr),Wr=null))),rg(t,e),tn(e),null;case 5:Sv(e);var i=Oo(ic.current);if(n=e.type,t!==null&&e.stateNode!=null)Wb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return tn(e),null}if(t=Oo(mi.current),Rd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[hi]=e,r[nc]=s,t=(e.mode&1)!==0,n){case"dialog":lt("cancel",r),lt("close",r);break;case"iframe":case"object":case"embed":lt("load",r);break;case"video":case"audio":for(i=0;i<vu.length;i++)lt(vu[i],r);break;case"source":lt("error",r);break;case"img":case"image":case"link":lt("error",r),lt("load",r);break;case"details":lt("toggle",r);break;case"input":ky(r,s),lt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},lt("invalid",r);break;case"textarea":Cy(r,s),lt("invalid",r)}Rm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),i=["children",""+a]):Wu.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&lt("scroll",r)}switch(n){case"input":Ed(r),xy(r,s,!0);break;case"textarea":Ed(r),Ry(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Sh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ET(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hi]=e,t[nc]=r,Hb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pm(n,r),n){case"dialog":lt("cancel",t),lt("close",t),i=r;break;case"iframe":case"object":case"embed":lt("load",t),i=r;break;case"video":case"audio":for(i=0;i<vu.length;i++)lt(vu[i],t);i=r;break;case"source":lt("error",t),i=r;break;case"img":case"image":case"link":lt("error",t),lt("load",t),i=r;break;case"details":lt("toggle",t),i=r;break;case"input":ky(t,r),i=Sm(t,r),lt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=vt({},r,{value:void 0}),lt("invalid",t);break;case"textarea":Cy(t,r),i=xm(t,r),lt("invalid",t);break;default:i=r}Rm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?IT(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&TT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ku(t,l):typeof l=="number"&&Ku(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wu.hasOwnProperty(s)?l!=null&&s==="onScroll"&&lt("scroll",t):l!=null&&nv(t,s,l,o))}switch(n){case"input":Ed(t),xy(t,r,!1);break;case"textarea":Ed(t),Ry(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Wa(t,!!r.multiple,s,!1):r.defaultValue!=null&&Wa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Sh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return tn(e),null;case 6:if(t&&e.stateNode!=null)Kb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=Oo(ic.current),Oo(mi.current),Rd(e)){if(r=e.stateNode,n=e.memoizedProps,r[hi]=e,(s=r.nodeValue!==n)&&(t=Xn,t!==null))switch(t.tag){case 3:Cd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hi]=e,e.stateNode=r}return tn(e),null;case 13:if(ut(mt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ht&&Yn!==null&&e.mode&1&&!(e.flags&128))db(),sl(),e.flags|=98560,s=!1;else if(s=Rd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[hi]=e}else sl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;tn(e),s=!1}else Wr!==null&&(dg(Wr),Wr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||mt.current&1?Dt===0&&(Dt=3):Vv())),e.updateQueue!==null&&(e.flags|=4),tn(e),null);case 4:return al(),rg(t,e),t===null&&ec(e.stateNode.containerInfo),tn(e),null;case 10:return Ev(e.type._context),tn(e),null;case 17:return Mn(e.type)&&Ah(),tn(e),null;case 19:if(ut(mt),s=e.memoizedState,s===null)return tn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)au(s,!1);else{if(Dt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oh(t),o!==null){for(e.flags|=128,au(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return it(mt,mt.current&1|2),e.child}t=t.sibling}s.tail!==null&&It()>ul&&(e.flags|=128,r=!0,au(s,!1),e.lanes=4194304)}else{if(!r)if(t=Oh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),au(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ht)return tn(e),null}else 2*It()-s.renderingStartTime>ul&&n!==1073741824&&(e.flags|=128,r=!0,au(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=It(),e.sibling=null,n=mt.current,it(mt,r?n&1|2:n&1),e):(tn(e),null);case 22:case 23:return Mv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Gn&1073741824&&(tn(e),e.subtreeFlags&6&&(e.flags|=8192)):tn(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function WC(t,e){switch(vv(e),e.tag){case 1:return Mn(e.type)&&Ah(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return al(),ut(Ln),ut(un),Av(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Sv(e),null;case 13:if(ut(mt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));sl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ut(mt),null;case 4:return al(),null;case 10:return Ev(e.type._context),null;case 22:case 23:return Mv(),null;case 24:return null;default:return null}}var Od=!1,on=!1,KC=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wt(t,e,r)}else n.current=null}function ig(t,e,n){try{n()}catch(r){wt(t,e,r)}}var yw=!1;function GC(t,e){if(Um=Th,t=XT(),mv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,d=0,f=t,g=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)g=f,f=y;for(;;){if(f===t)break t;if(g===n&&++c===i&&(a=o),g===s&&++d===r&&(l=o),(y=f.nextSibling)!==null)break;f=g,g=f.parentNode}f=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bm={focusedElem:t,selectionRange:n},Th=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var x=S.memoizedProps,N=S.memoizedState,A=e.stateNode,E=A.getSnapshotBeforeUpdate(e.elementType===e.type?x:Br(e.type,x),N);A.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(D){wt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return S=yw,yw=!1,S}function Nu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ig(e,n,s)}i=i.next}while(i!==r)}}function wf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gb(t){var e=t.alternate;e!==null&&(t.alternate=null,Gb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hi],delete e[nc],delete e[Hm],delete e[RC],delete e[PC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qb(t){return t.tag===5||t.tag===3||t.tag===4}function ww(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function og(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sh));else if(r!==4&&(t=t.child,t!==null))for(og(t,e,n),t=t.sibling;t!==null;)og(t,e,n),t=t.sibling}function ag(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}var Ht=null,zr=!1;function ws(t,e,n){for(n=n.child;n!==null;)Jb(t,e,n),n=n.sibling}function Jb(t,e,n){if(pi&&typeof pi.onCommitFiberUnmount=="function")try{pi.onCommitFiberUnmount(hf,n)}catch{}switch(n.tag){case 5:on||Ba(n,e);case 6:var r=Ht,i=zr;Ht=null,ws(t,e,n),Ht=r,zr=i,Ht!==null&&(zr?(t=Ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ht.removeChild(n.stateNode));break;case 18:Ht!==null&&(zr?(t=Ht,n=n.stateNode,t.nodeType===8?Vp(t.parentNode,n):t.nodeType===1&&Vp(t,n),Yu(t)):Vp(Ht,n.stateNode));break;case 4:r=Ht,i=zr,Ht=n.stateNode.containerInfo,zr=!0,ws(t,e,n),Ht=r,zr=i;break;case 0:case 11:case 14:case 15:if(!on&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ig(n,e,o),i=i.next}while(i!==r)}ws(t,e,n);break;case 1:if(!on&&(Ba(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){wt(n,e,a)}ws(t,e,n);break;case 21:ws(t,e,n);break;case 22:n.mode&1?(on=(r=on)||n.memoizedState!==null,ws(t,e,n),on=r):ws(t,e,n);break;default:ws(t,e,n)}}function Ew(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KC),e.forEach(function(r){var i=rR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Fr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ht=a.stateNode,zr=!1;break e;case 3:Ht=a.stateNode.containerInfo,zr=!0;break e;case 4:Ht=a.stateNode.containerInfo,zr=!0;break e}a=a.return}if(Ht===null)throw Error(J(160));Jb(s,o,i),Ht=null,zr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){wt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Yb(e,t),e=e.sibling}function Yb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Fr(e,t),ci(t),r&4){try{Nu(3,t,t.return),wf(3,t)}catch(x){wt(t,t.return,x)}try{Nu(5,t,t.return)}catch(x){wt(t,t.return,x)}}break;case 1:Fr(e,t),ci(t),r&512&&n!==null&&Ba(n,n.return);break;case 5:if(Fr(e,t),ci(t),r&512&&n!==null&&Ba(n,n.return),t.flags&32){var i=t.stateNode;try{Ku(i,"")}catch(x){wt(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&yT(i,s),Pm(a,o);var c=Pm(a,s);for(o=0;o<l.length;o+=2){var d=l[o],f=l[o+1];d==="style"?IT(i,f):d==="dangerouslySetInnerHTML"?TT(i,f):d==="children"?Ku(i,f):nv(i,d,f,c)}switch(a){case"input":Am(i,s);break;case"textarea":wT(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Wa(i,!!s.multiple,y,!1):g!==!!s.multiple&&(s.defaultValue!=null?Wa(i,!!s.multiple,s.defaultValue,!0):Wa(i,!!s.multiple,s.multiple?[]:"",!1))}i[nc]=s}catch(x){wt(t,t.return,x)}}break;case 6:if(Fr(e,t),ci(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){wt(t,t.return,x)}}break;case 3:if(Fr(e,t),ci(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yu(e.containerInfo)}catch(x){wt(t,t.return,x)}break;case 4:Fr(e,t),ci(t);break;case 13:Fr(e,t),ci(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(jv=It())),r&4&&Ew(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(on=(c=on)||d,Fr(e,t),on=c):Fr(e,t),ci(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(re=t,d=t.child;d!==null;){for(f=re=d;re!==null;){switch(g=re,y=g.child,g.tag){case 0:case 11:case 14:case 15:Nu(4,g,g.return);break;case 1:Ba(g,g.return);var S=g.stateNode;if(typeof S.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(x){wt(r,n,x)}}break;case 5:Ba(g,g.return);break;case 22:if(g.memoizedState!==null){bw(f);continue}}y!==null?(y.return=g,re=y):bw(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=bT("display",o))}catch(x){wt(t,t.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){wt(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Fr(e,t),ci(t),r&4&&Ew(t);break;case 21:break;default:Fr(e,t),ci(t)}}function ci(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qb(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ku(i,""),r.flags&=-33);var s=ww(t);ag(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ww(t);og(t,a,o);break;default:throw Error(J(161))}}catch(l){wt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function QC(t,e,n){re=t,Xb(t)}function Xb(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Od;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||on;a=Od;var c=on;if(Od=o,(on=l)&&!c)for(re=i;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?Iw(i):l!==null?(l.return=o,re=l):Iw(i);for(;s!==null;)re=s,Xb(s),s=s.sibling;re=i,Od=a,on=c}Tw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):Tw(t)}}function Tw(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:on||wf(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!on)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Br(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ow(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ow(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Yu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}on||e.flags&512&&sg(e)}catch(g){wt(e,e.return,g)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function bw(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function Iw(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wf(4,e)}catch(l){wt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){wt(e,i,l)}}var s=e.return;try{sg(e)}catch(l){wt(e,s,l)}break;case 5:var o=e.return;try{sg(e)}catch(l){wt(e,o,l)}}}catch(l){wt(e,e.return,l)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var JC=Math.ceil,Lh=ss.ReactCurrentDispatcher,Ov=ss.ReactCurrentOwner,wr=ss.ReactCurrentBatchConfig,Ve=0,Bt=null,kt=null,Gt=0,Gn=0,za=no(0),Dt=0,lc=null,Ho=0,Ef=0,Dv=0,Ou=null,On=null,jv=0,ul=1/0,Li=null,Mh=!1,lg=null,zs=null,Dd=!1,Ls=null,Vh=0,Du=0,ug=null,rh=-1,ih=0;function En(){return Ve&6?It():rh!==-1?rh:rh=It()}function qs(t){return t.mode&1?Ve&2&&Gt!==0?Gt&-Gt:OC.transition!==null?(ih===0&&(ih=LT()),ih):(t=He,t!==0||(t=window.event,t=t===void 0?16:zT(t.type)),t):1}function Qr(t,e,n,r){if(50<Du)throw Du=0,ug=null,Error(J(185));Sc(t,n,r),(!(Ve&2)||t!==Bt)&&(t===Bt&&(!(Ve&2)&&(Ef|=n),Dt===4&&xs(t,Gt)),Vn(t,r),n===1&&Ve===0&&!(e.mode&1)&&(ul=It()+500,vf&&ro()))}function Vn(t,e){var n=t.callbackNode;O1(t,e);var r=Eh(t,t===Bt?Gt:0);if(r===0)n!==null&&Oy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Oy(n),e===1)t.tag===0?NC(Sw.bind(null,t)):lb(Sw.bind(null,t)),xC(function(){!(Ve&6)&&ro()}),n=null;else{switch(MT(r)){case 1:n=av;break;case 4:n=DT;break;case 16:n=wh;break;case 536870912:n=jT;break;default:n=wh}n=oI(n,Zb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Zb(t,e){if(rh=-1,ih=0,Ve&6)throw Error(J(327));var n=t.callbackNode;if(Ya()&&t.callbackNode!==n)return null;var r=Eh(t,t===Bt?Gt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Fh(t,r);else{e=r;var i=Ve;Ve|=2;var s=tI();(Bt!==t||Gt!==e)&&(Li=null,ul=It()+500,Vo(t,e));do try{ZC();break}catch(a){eI(t,a)}while(!0);wv(),Lh.current=s,Ve=i,kt!==null?e=0:(Bt=null,Gt=0,e=Dt)}if(e!==0){if(e===2&&(i=Lm(t),i!==0&&(r=i,e=cg(t,i))),e===1)throw n=lc,Vo(t,0),xs(t,r),Vn(t,It()),n;if(e===6)xs(t,r);else{if(i=t.current.alternate,!(r&30)&&!YC(i)&&(e=Fh(t,r),e===2&&(s=Lm(t),s!==0&&(r=s,e=cg(t,s))),e===1))throw n=lc,Vo(t,0),xs(t,r),Vn(t,It()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Ao(t,On,Li);break;case 3:if(xs(t,r),(r&130023424)===r&&(e=jv+500-It(),10<e)){if(Eh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){En(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qm(Ao.bind(null,t,On,Li),e);break}Ao(t,On,Li);break;case 4:if(xs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Gr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=It()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JC(r/1960))-r,10<r){t.timeoutHandle=qm(Ao.bind(null,t,On,Li),r);break}Ao(t,On,Li);break;case 5:Ao(t,On,Li);break;default:throw Error(J(329))}}}return Vn(t,It()),t.callbackNode===n?Zb.bind(null,t):null}function cg(t,e){var n=Ou;return t.current.memoizedState.isDehydrated&&(Vo(t,e).flags|=256),t=Fh(t,e),t!==2&&(e=On,On=n,e!==null&&dg(e)),t}function dg(t){On===null?On=t:On.push.apply(On,t)}function YC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xs(t,e){for(e&=~Dv,e&=~Ef,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gr(e),r=1<<n;t[n]=-1,e&=~r}}function Sw(t){if(Ve&6)throw Error(J(327));Ya();var e=Eh(t,0);if(!(e&1))return Vn(t,It()),null;var n=Fh(t,e);if(t.tag!==0&&n===2){var r=Lm(t);r!==0&&(e=r,n=cg(t,r))}if(n===1)throw n=lc,Vo(t,0),xs(t,e),Vn(t,It()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ao(t,On,Li),Vn(t,It()),null}function Lv(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(ul=It()+500,vf&&ro())}}function Wo(t){Ls!==null&&Ls.tag===0&&!(Ve&6)&&Ya();var e=Ve;Ve|=1;var n=wr.transition,r=He;try{if(wr.transition=null,He=1,t)return t()}finally{He=r,wr.transition=n,Ve=e,!(Ve&6)&&ro()}}function Mv(){Gn=za.current,ut(za)}function Vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,kC(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch(vv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ah();break;case 3:al(),ut(Ln),ut(un),Av();break;case 5:Sv(r);break;case 4:al();break;case 13:ut(mt);break;case 19:ut(mt);break;case 10:Ev(r.type._context);break;case 22:case 23:Mv()}n=n.return}if(Bt=t,kt=t=Hs(t.current,null),Gt=Gn=e,Dt=0,lc=null,Dv=Ef=Ho=0,On=Ou=null,No!==null){for(e=0;e<No.length;e++)if(n=No[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}No=null}return t}function eI(t,e){do{var n=kt;try{if(wv(),eh.current=jh,Dh){for(var r=gt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dh=!1}if(qo=0,Ut=Ot=gt=null,Pu=!1,sc=0,Ov.current=null,n===null||n.return===null){Dt=1,lc=e,kt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Gt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=hw(o);if(y!==null){y.flags&=-257,fw(y,o,a,s,e),y.mode&1&&dw(s,c,e),e=y,l=c;var S=e.updateQueue;if(S===null){var x=new Set;x.add(l),e.updateQueue=x}else S.add(l);break e}else{if(!(e&1)){dw(s,c,e),Vv();break e}l=Error(J(426))}}else if(ht&&a.mode&1){var N=hw(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),fw(N,o,a,s,e),_v(ll(l,a));break e}}s=l=ll(l,a),Dt!==4&&(Dt=2),Ou===null?Ou=[s]:Ou.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var A=Mb(s,l,e);sw(s,A);break e;case 1:a=l;var E=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zs===null||!zs.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=Vb(s,a,e);sw(s,D);break e}}s=s.return}while(s!==null)}rI(n)}catch(B){e=B,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function tI(){var t=Lh.current;return Lh.current=jh,t===null?jh:t}function Vv(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Bt===null||!(Ho&268435455)&&!(Ef&268435455)||xs(Bt,Gt)}function Fh(t,e){var n=Ve;Ve|=2;var r=tI();(Bt!==t||Gt!==e)&&(Li=null,Vo(t,e));do try{XC();break}catch(i){eI(t,i)}while(!0);if(wv(),Ve=n,Lh.current=r,kt!==null)throw Error(J(261));return Bt=null,Gt=0,Dt}function XC(){for(;kt!==null;)nI(kt)}function ZC(){for(;kt!==null&&!I1();)nI(kt)}function nI(t){var e=sI(t.alternate,t,Gn);t.memoizedProps=t.pendingProps,e===null?rI(t):kt=e,Ov.current=null}function rI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WC(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Dt=6,kt=null;return}}else if(n=HC(n,e,Gn),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Dt===0&&(Dt=5)}function Ao(t,e,n){var r=He,i=wr.transition;try{wr.transition=null,He=1,eR(t,e,n,r)}finally{wr.transition=i,He=r}return null}function eR(t,e,n,r){do Ya();while(Ls!==null);if(Ve&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(D1(t,s),t===Bt&&(kt=Bt=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dd||(Dd=!0,oI(wh,function(){return Ya(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=wr.transition,wr.transition=null;var o=He;He=1;var a=Ve;Ve|=4,Ov.current=null,GC(t,n),Yb(n,t),wC(Bm),Th=!!Um,Bm=Um=null,t.current=n,QC(n),S1(),Ve=a,He=o,wr.transition=s}else t.current=n;if(Dd&&(Dd=!1,Ls=t,Vh=i),s=t.pendingLanes,s===0&&(zs=null),x1(n.stateNode),Vn(t,It()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Mh)throw Mh=!1,t=lg,lg=null,t;return Vh&1&&t.tag!==0&&Ya(),s=t.pendingLanes,s&1?t===ug?Du++:(Du=0,ug=t):Du=0,ro(),null}function Ya(){if(Ls!==null){var t=MT(Vh),e=wr.transition,n=He;try{if(wr.transition=null,He=16>t?16:t,Ls===null)var r=!1;else{if(t=Ls,Ls=null,Vh=0,Ve&6)throw Error(J(331));var i=Ve;for(Ve|=4,re=t.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(re=c;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:Nu(8,d,s)}var f=d.child;if(f!==null)f.return=d,re=f;else for(;re!==null;){d=re;var g=d.sibling,y=d.return;if(Gb(d),d===c){re=null;break}if(g!==null){g.return=y,re=g;break}re=y}}}var S=s.alternate;if(S!==null){var x=S.child;if(x!==null){S.child=null;do{var N=x.sibling;x.sibling=null,x=N}while(x!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nu(9,s,s.return)}var A=s.sibling;if(A!==null){A.return=s.return,re=A;break e}re=s.return}}var E=t.current;for(re=E;re!==null;){o=re;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,re=b;else e:for(o=E;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wf(9,a)}}catch(B){wt(a,a.return,B)}if(a===o){re=null;break e}var D=a.sibling;if(D!==null){D.return=a.return,re=D;break e}re=a.return}}if(Ve=i,ro(),pi&&typeof pi.onPostCommitFiberRoot=="function")try{pi.onPostCommitFiberRoot(hf,t)}catch{}r=!0}return r}finally{He=n,wr.transition=e}}return!1}function Aw(t,e,n){e=ll(n,e),e=Mb(t,e,1),t=Bs(t,e,1),e=En(),t!==null&&(Sc(t,1,e),Vn(t,e))}function wt(t,e,n){if(t.tag===3)Aw(t,t,n);else for(;e!==null;){if(e.tag===3){Aw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zs===null||!zs.has(r))){t=ll(n,t),t=Vb(e,t,1),e=Bs(e,t,1),t=En(),e!==null&&(Sc(e,1,t),Vn(e,t));break}}e=e.return}}function tR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=En(),t.pingedLanes|=t.suspendedLanes&n,Bt===t&&(Gt&n)===n&&(Dt===4||Dt===3&&(Gt&130023424)===Gt&&500>It()-jv?Vo(t,0):Dv|=n),Vn(t,e)}function iI(t,e){e===0&&(t.mode&1?(e=Id,Id<<=1,!(Id&130023424)&&(Id=4194304)):e=1);var n=En();t=Ji(t,e),t!==null&&(Sc(t,e,n),Vn(t,n))}function nR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iI(t,n)}function rR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),iI(t,n)}var sI;sI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ln.current)jn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jn=!1,qC(t,e,n);jn=!!(t.flags&131072)}else jn=!1,ht&&e.flags&1048576&&ub(e,Ch,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;nh(t,e),t=e.pendingProps;var i=il(e,un.current);Ja(e,n),i=xv(null,e,r,t,i,n);var s=Cv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mn(r)?(s=!0,kh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bv(e),i.updater=yf,e.stateNode=i,i._reactInternals=e,Ym(e,r,t,n),e=eg(null,e,r,!0,s,n)):(e.tag=0,ht&&s&&gv(e),wn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(nh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=sR(r),t=Br(r,t),i){case 0:e=Zm(null,e,r,t,n);break e;case 1:e=gw(null,e,r,t,n);break e;case 11:e=pw(null,e,r,t,n);break e;case 14:e=mw(null,e,r,Br(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),Zm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),gw(t,e,r,i,n);case 3:e:{if(Bb(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mb(t,e),Nh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ll(Error(J(423)),e),e=vw(t,e,r,n,i);break e}else if(r!==i){i=ll(Error(J(424)),e),e=vw(t,e,r,n,i);break e}else for(Yn=Us(e.stateNode.containerInfo.firstChild),Xn=e,ht=!0,Wr=null,n=fb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sl(),r===i){e=Yi(t,e,n);break e}wn(t,e,r,n)}e=e.child}return e;case 5:return gb(e),t===null&&Gm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zm(r,i)?o=null:s!==null&&zm(r,s)&&(e.flags|=32),Ub(t,e),wn(t,e,o,n),e.child;case 6:return t===null&&Gm(e),null;case 13:return zb(t,e,n);case 4:return Iv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ol(e,null,r,n):wn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),pw(t,e,r,i,n);case 7:return wn(t,e,e.pendingProps,n),e.child;case 8:return wn(t,e,e.pendingProps.children,n),e.child;case 12:return wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,it(Rh,r._currentValue),r._currentValue=o,s!==null)if(Jr(s.value,o)){if(s.children===i.children&&!Ln.current){e=Yi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Hi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?l.next=l:(l.next=d.next,d.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}wn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ja(e,n),i=br(i),r=r(i),e.flags|=1,wn(t,e,r,n),e.child;case 14:return r=e.type,i=Br(r,e.pendingProps),i=Br(r.type,i),mw(t,e,r,i,n);case 15:return Fb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),nh(t,e),e.tag=1,Mn(r)?(t=!0,kh(e)):t=!1,Ja(e,n),Lb(e,r,i),Ym(e,r,i,n),eg(null,e,r,!0,t,n);case 19:return qb(t,e,n);case 22:return $b(t,e,n)}throw Error(J(156,e.tag))};function oI(t,e){return OT(t,e)}function iR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(t,e,n,r){return new iR(t,e,n,r)}function Fv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sR(t){if(typeof t=="function")return Fv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===iv)return 11;if(t===sv)return 14}return 2}function Hs(t,e){var n=t.alternate;return n===null?(n=yr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function sh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Fv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oa:return Fo(n.children,i,s,e);case rv:o=8,i|=8;break;case Em:return t=yr(12,n,e,i|2),t.elementType=Em,t.lanes=s,t;case Tm:return t=yr(13,n,e,i),t.elementType=Tm,t.lanes=s,t;case bm:return t=yr(19,n,e,i),t.elementType=bm,t.lanes=s,t;case gT:return Tf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case pT:o=10;break e;case mT:o=9;break e;case iv:o=11;break e;case sv:o=14;break e;case Is:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=yr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Fo(t,e,n,r){return t=yr(7,t,r,e),t.lanes=n,t}function Tf(t,e,n,r){return t=yr(22,t,r,e),t.elementType=gT,t.lanes=n,t.stateNode={isHidden:!1},t}function Wp(t,e,n){return t=yr(6,t,null,e),t.lanes=n,t}function Kp(t,e,n){return e=yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function oR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kp(0),this.expirationTimes=kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $v(t,e,n,r,i,s,o,a,l){return t=new oR(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=yr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bv(s),t}function aR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Na,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function aI(t){if(!t)return Js;t=t._reactInternals;e:{if(sa(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Mn(n))return ab(t,n,e)}return e}function lI(t,e,n,r,i,s,o,a,l){return t=$v(n,r,!0,t,i,s,o,a,l),t.context=aI(null),n=t.current,r=En(),i=qs(n),s=Hi(r,i),s.callback=e??null,Bs(n,s,i),t.current.lanes=i,Sc(t,i,r),Vn(t,r),t}function bf(t,e,n,r){var i=e.current,s=En(),o=qs(i);return n=aI(n),e.context===null?e.context=n:e.pendingContext=n,e=Hi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bs(i,e,o),t!==null&&(Qr(t,i,o,s),Zd(t,i,o)),o}function $h(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Uv(t,e){kw(t,e),(t=t.alternate)&&kw(t,e)}function lR(){return null}var uI=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bv(t){this._internalRoot=t}If.prototype.render=Bv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));bf(t,e,null,null)};If.prototype.unmount=Bv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wo(function(){bf(null,t,null,null)}),e[Qi]=null}};function If(t){this._internalRoot=t}If.prototype.unstable_scheduleHydration=function(t){if(t){var e=$T();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ks.length&&e!==0&&e<ks[n].priority;n++);ks.splice(n,0,t),n===0&&BT(t)}};function zv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Sf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xw(){}function uR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=$h(o);s.call(c)}}var o=lI(e,r,t,0,null,!1,!1,"",xw);return t._reactRootContainer=o,t[Qi]=o.current,ec(t.nodeType===8?t.parentNode:t),Wo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=$h(l);a.call(c)}}var l=$v(t,0,!1,null,null,!1,!1,"",xw);return t._reactRootContainer=l,t[Qi]=l.current,ec(t.nodeType===8?t.parentNode:t),Wo(function(){bf(e,l,n,r)}),l}function Af(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$h(o);a.call(l)}}bf(e,o,t,i)}else o=uR(n,e,t,i,r);return $h(o)}VT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gu(e.pendingLanes);n!==0&&(lv(e,n|1),Vn(e,It()),!(Ve&6)&&(ul=It()+500,ro()))}break;case 13:Wo(function(){var r=Ji(t,1);if(r!==null){var i=En();Qr(r,t,1,i)}}),Uv(t,1)}};uv=function(t){if(t.tag===13){var e=Ji(t,134217728);if(e!==null){var n=En();Qr(e,t,134217728,n)}Uv(t,134217728)}};FT=function(t){if(t.tag===13){var e=qs(t),n=Ji(t,e);if(n!==null){var r=En();Qr(n,t,e,r)}Uv(t,e)}};$T=function(){return He};UT=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};Om=function(t,e,n){switch(e){case"input":if(Am(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=gf(r);if(!i)throw Error(J(90));_T(r),Am(r,i)}}}break;case"textarea":wT(t,n);break;case"select":e=n.value,e!=null&&Wa(t,!!n.multiple,e,!1)}};kT=Lv;xT=Wo;var cR={usingClientEntryPoint:!1,Events:[kc,Ma,gf,ST,AT,Lv]},lu={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dR={bundleType:lu.bundleType,version:lu.version,rendererPackageName:lu.rendererPackageName,rendererConfig:lu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PT(t),t===null?null:t.stateNode},findFiberByHostInstance:lu.findFiberByHostInstance||lR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jd.isDisabled&&jd.supportsFiber)try{hf=jd.inject(dR),pi=jd}catch{}}sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cR;sr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zv(e))throw Error(J(200));return aR(t,e,null,n)};sr.createRoot=function(t,e){if(!zv(t))throw Error(J(299));var n=!1,r="",i=uI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$v(t,1,!1,null,null,n,!1,r,i),t[Qi]=e.current,ec(t.nodeType===8?t.parentNode:t),new Bv(e)};sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=PT(e),t=t===null?null:t.stateNode,t};sr.flushSync=function(t){return Wo(t)};sr.hydrate=function(t,e,n){if(!Sf(e))throw Error(J(200));return Af(null,t,e,!0,n)};sr.hydrateRoot=function(t,e,n){if(!zv(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=uI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=lI(e,null,t,1,n??null,i,!1,s,o),t[Qi]=e.current,ec(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new If(e)};sr.render=function(t,e,n){if(!Sf(e))throw Error(J(200));return Af(null,t,e,!1,n)};sr.unmountComponentAtNode=function(t){if(!Sf(t))throw Error(J(40));return t._reactRootContainer?(Wo(function(){Af(null,null,t,!1,function(){t._reactRootContainer=null,t[Qi]=null})}),!0):!1};sr.unstable_batchedUpdates=Lv;sr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Sf(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return Af(t,e,n,!1,r)};sr.version="18.3.1-next-f1338f8080-20240426";function cI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(cI)}catch(t){console.error(t)}}cI(),cT.exports=sr;var qv=cT.exports;const hR=YE(qv),fR=JE({__proto__:null,default:hR},[qv]);var Cw=qv;ym.createRoot=Cw.createRoot,ym.hydrateRoot=Cw.hydrateRoot;var Rw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},pR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},hI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let g=(a&15)<<2|c>>6,y=c&63;l||(y=64,o||(g=64)),r.push(n[d],n[f],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(dI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):pR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new mR;const g=s<<2|a>>4;if(r.push(g),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const S=c<<6&192|f;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class mR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const gR=function(t){const e=dI(t);return hI.encodeByteArray(e,!0)},Uh=function(t){return gR(t).replace(/\./g,"")},fI=function(t){try{return hI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R=()=>vR().__FIREBASE_DEFAULTS__,yR=()=>{if(typeof process>"u"||typeof Rw>"u")return;const t=Rw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},wR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fI(t[1]);return e&&JSON.parse(e)},kf=()=>{try{return _R()||yR()||wR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},pI=t=>{var e,n;return(n=(e=kf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},ER=t=>{const e=pI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mI=()=>{var t;return(t=kf())===null||t===void 0?void 0:t.config},gI=t=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TR=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Uh(JSON.stringify(n)),Uh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function IR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function SR(){var t;const e=(t=kf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function AR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kR(){const t=cn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function xR(){return!SR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _I(){try{return typeof indexedDB=="object"}catch{return!1}}function yI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function CR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="FirebaseError";class ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=RR,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oa.prototype.create)}}class oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?PR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ti(i,a,r)}}function PR(t,e){return t.replace(NR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const NR=/\{\$([^}]+)}/g;function OR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function uc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Pw(s)&&Pw(o)){if(!uc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Pw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _u(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function yu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DR(t,e){const n=new jR(t,e);return n.subscribe.bind(n)}class jR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Gp),i.error===void 0&&(i.error=Gp),i.complete===void 0&&(i.complete=Gp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Gp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=1e3,VR=2,FR=4*60*60*1e3,$R=.5;function Nw(t,e=MR,n=VR){const r=e*Math.pow(n,t),i=Math.round($R*r*(Math.random()-.5)*2);return Math.min(FR,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new TR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zR(e))try{this.getOrInitializeService({instanceIdentifier:ko})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ko){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ko){return this.instances.has(e)}getOptions(e=ko){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:BR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ko){return this.component?this.component.multipleInstances?e:ko:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BR(t){return t===ko?void 0:t}function zR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const HR={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},WR=De.INFO,KR={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},GR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=KR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xf{constructor(e){this.name=e,this._logLevel=WR,this._logHandler=GR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?HR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const QR=(t,e)=>e.some(n=>t instanceof n);let Ow,Dw;function JR(){return Ow||(Ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YR(){return Dw||(Dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wI=new WeakMap,hg=new WeakMap,EI=new WeakMap,Qp=new WeakMap,Hv=new WeakMap;function XR(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ws(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&wI.set(n,t)}).catch(()=>{}),Hv.set(e,t),e}function ZR(t){if(hg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hg.set(t,e)}let fg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||EI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function eP(t){fg=t(fg)}function tP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jp(this),e,...n);return EI.set(r,e.sort?e.sort():[e]),Ws(r)}:YR().includes(t)?function(...e){return t.apply(Jp(this),e),Ws(wI.get(this))}:function(...e){return Ws(t.apply(Jp(this),e))}}function nP(t){return typeof t=="function"?tP(t):(t instanceof IDBTransaction&&ZR(t),QR(t,JR())?new Proxy(t,fg):t)}function Ws(t){if(t instanceof IDBRequest)return XR(t);if(Qp.has(t))return Qp.get(t);const e=nP(t);return e!==t&&(Qp.set(t,e),Hv.set(e,t)),e}const Jp=t=>Hv.get(t);function TI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ws(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ws(o.result),l.oldVersion,l.newVersion,Ws(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const rP=["get","getKey","getAll","getAllKeys","count"],iP=["put","add","delete","clear"],Yp=new Map;function jw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yp.get(e))return Yp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=iP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||rP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return Yp.set(e,s),s}eP(t=>({...t,get:(e,n,r)=>jw(e,n)||t.get(e,n,r),has:(e,n)=>!!jw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(oP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function oP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pg="@firebase/app",Lw="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new xf("@firebase/app"),aP="@firebase/app-compat",lP="@firebase/analytics-compat",uP="@firebase/analytics",cP="@firebase/app-check-compat",dP="@firebase/app-check",hP="@firebase/auth",fP="@firebase/auth-compat",pP="@firebase/database",mP="@firebase/database-compat",gP="@firebase/functions",vP="@firebase/functions-compat",_P="@firebase/installations",yP="@firebase/installations-compat",wP="@firebase/messaging",EP="@firebase/messaging-compat",TP="@firebase/performance",bP="@firebase/performance-compat",IP="@firebase/remote-config",SP="@firebase/remote-config-compat",AP="@firebase/storage",kP="@firebase/storage-compat",xP="@firebase/firestore",CP="@firebase/vertexai-preview",RP="@firebase/firestore-compat",PP="firebase",NP="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="[DEFAULT]",OP={[pg]:"fire-core",[aP]:"fire-core-compat",[uP]:"fire-analytics",[lP]:"fire-analytics-compat",[dP]:"fire-app-check",[cP]:"fire-app-check-compat",[hP]:"fire-auth",[fP]:"fire-auth-compat",[pP]:"fire-rtdb",[mP]:"fire-rtdb-compat",[gP]:"fire-fn",[vP]:"fire-fn-compat",[_P]:"fire-iid",[yP]:"fire-iid-compat",[wP]:"fire-fcm",[EP]:"fire-fcm-compat",[TP]:"fire-perf",[bP]:"fire-perf-compat",[IP]:"fire-rc",[SP]:"fire-rc-compat",[AP]:"fire-gcs",[kP]:"fire-gcs-compat",[xP]:"fire-fst",[RP]:"fire-fst-compat",[CP]:"fire-vertex","fire-js":"fire-js",[PP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh=new Map,DP=new Map,gg=new Map;function Mw(t,e){try{t.container.addComponent(e)}catch(n){Xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bi(t){const e=t.name;if(gg.has(e))return Xi.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,t);for(const n of Bh.values())Mw(n,t);for(const n of DP.values())Mw(n,t);return!0}function aa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new oa("app","Firebase",jP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kl=NP;function bI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ks.create("bad-app-name",{appName:String(i)});if(n||(n=mI()),!n)throw Ks.create("no-options");const s=Bh.get(i);if(s){if(uc(n,s.options)&&uc(r,s.config))return s;throw Ks.create("duplicate-app",{appName:i})}const o=new qR(i);for(const l of gg.values())o.addComponent(l);const a=new LP(n,r,o);return Bh.set(i,a),a}function Wv(t=mg){const e=Bh.get(t);if(!e&&t===mg&&mI())return bI();if(!e)throw Ks.create("no-app",{appName:t});return e}function Er(t,e,n){var r;let i=(r=OP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xi.warn(a.join(" "));return}bi(new Yr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP="firebase-heartbeat-database",VP=1,cc="firebase-heartbeat-store";let Xp=null;function II(){return Xp||(Xp=TI(MP,VP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(cc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ks.create("idb-open",{originalErrorMessage:t.message})})),Xp}async function FP(t){try{const n=(await II()).transaction(cc),r=await n.objectStore(cc).get(SI(t));return await n.done,r}catch(e){if(e instanceof ti)Xi.warn(e.message);else{const n=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xi.warn(n.message)}}}async function Vw(t,e){try{const r=(await II()).transaction(cc,"readwrite");await r.objectStore(cc).put(e,SI(t)),await r.done}catch(n){if(n instanceof ti)Xi.warn(n.message);else{const r=Ks.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xi.warn(r.message)}}}function SI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=1024,UP=30*24*60*60*1e3;class BP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new qP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Fw();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=UP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fw(),{heartbeatsToSend:r,unsentEntries:i}=zP(this._heartbeatsCache.heartbeats),s=Uh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Xi.warn(n),""}}}function Fw(){return new Date().toISOString().substring(0,10)}function zP(t,e=$P){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),$w(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),$w(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class qP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _I()?yI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await FP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Vw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function $w(t){return Uh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t){bi(new Yr("platform-logger",e=>new sP(e),"PRIVATE")),bi(new Yr("heartbeat",e=>new BP(e),"PRIVATE")),Er(pg,Lw,t),Er(pg,Lw,"esm2017"),Er("fire-js","")}HP("");function Kv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function AI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const WP=AI,kI=new oa("auth","Firebase",AI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new xf("@firebase/auth");function KP(t,...e){zh.logLevel<=De.WARN&&zh.warn(`Auth (${kl}): ${t}`,...e)}function oh(t,...e){zh.logLevel<=De.ERROR&&zh.error(`Auth (${kl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,...e){throw Gv(t,...e)}function gi(t,...e){return Gv(t,...e)}function xI(t,e,n){const r=Object.assign(Object.assign({},WP()),{[e]:n});return new oa("auth","Firebase",r).create(e,{appName:t.name})}function Wi(t){return xI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gv(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kI.create(t,...e)}function me(t,e,...n){if(!t)throw Gv(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw oh(e),new Error(e)}function Zi(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function GP(){return Uw()==="http:"||Uw()==="https:"}function Uw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GP()||vI()||"connection"in navigator)?navigator.onLine:!0}function JP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zi(n>e,"Short delay should be less than long delay!"),this.isMobile=IR()||AR()}get(){return QP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t,e){Zi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=new Rc(3e4,6e4);function io(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function so(t,e,n,r,i={}){return RI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Cc(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),CI.fetch()(PI(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function RI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},YP),e);try{const i=new eN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ld(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ld(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ld(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw xI(t,d,c);Xr(t,d)}}catch(i){if(i instanceof ti)throw i;Xr(t,"network-request-failed",{message:String(i)})}}async function Pc(t,e,n,r,i={}){const s=await so(t,e,n,r,i);return"mfaPendingCredential"in s&&Xr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function PI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Qv(t.config,i):`${t.config.apiScheme}://${i}`}function ZP(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gi(this.auth,"network-request-failed")),XP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ld(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gi(t,e,r);return i.customData._tokenResponse=n,i}function Bw(t){return t!==void 0&&t.enterprise!==void 0}class tN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZP(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function nN(t,e){return so(t,"GET","/v2/recaptchaConfig",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(t,e){return so(t,"POST","/v1/accounts:delete",e)}async function NI(t,e){return so(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function iN(t,e=!1){const n=zt(t),r=await n.getIdToken(e),i=Jv(r);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ju(Zp(i.auth_time)),issuedAtTime:ju(Zp(i.iat)),expirationTime:ju(Zp(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Zp(t){return Number(t)*1e3}function Jv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return oh("JWT malformed, contained fewer than 3 sections"),null;try{const i=fI(n);return i?JSON.parse(i):(oh("Failed to decode base64 JWT payload"),null)}catch(i){return oh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function zw(t){const e=Jv(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ti&&sN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function sN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ju(this.lastLoginAt),this.creationTime=ju(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await dc(t,NI(n,{idToken:r}));me(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?OI(s.providerUserInfo):[],a=lN(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _g(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function aN(t){const e=zt(t);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function OI(t){return t.map(e=>{var{providerId:n}=e,r=Kv(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e){const n=await RI(t,{},async()=>{const r=Cc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=PI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",CI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cN(t,e){return so(t,"POST","/v2/accounts:revokeToken",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=zw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await uN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Xa;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Kv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _g(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await dc(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return iN(this,e)}reload(){return aN(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(Wi(this.auth));const e=await this.getIdToken();return await dc(this,rN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,A=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:D,isAnonymous:B,providerData:R,stsTokenManager:k}=n;me(b&&k,e,"internal-error");const w=Xa.fromJSON(this.name,k);me(typeof b=="string",e,"internal-error"),Es(f,e.name),Es(g,e.name),me(typeof D=="boolean",e,"internal-error"),me(typeof B=="boolean",e,"internal-error"),Es(y,e.name),Es(S,e.name),Es(x,e.name),Es(N,e.name),Es(A,e.name),Es(E,e.name);const I=new Bi({uid:b,auth:e,email:g,emailVerified:D,displayName:f,isAnonymous:B,photoURL:S,phoneNumber:y,tenantId:x,stsTokenManager:w,createdAt:A,lastLoginAt:E});return R&&Array.isArray(R)&&(I.providerData=R.map(C=>Object.assign({},C))),N&&(I._redirectEventId=N),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xa;i.updateFromServerResponse(n);const s=new Bi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?OI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Xa;a.updateFromIdToken(r);const l=new Bi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _g(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw=new Map;function zi(t){Zi(t instanceof Function,"Expected a class definition");let e=qw.get(t);return e?(Zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DI.type="NONE";const Hw=DI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(t,e,n){return`firebase:${t}:${e}:${n}`}class Za{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=ah(this.userKey,i.apiKey,s),this.fullPersistenceKey=ah("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Za(zi(Hw),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||zi(Hw);const o=ah(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=Bi._fromJSON(e,d);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Za(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Za(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(VI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($I(e))return"Blackberry";if(UI(e))return"Webos";if(LI(e))return"Safari";if((e.includes("chrome/")||MI(e))&&!e.includes("edge/"))return"Chrome";if(FI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function jI(t=cn()){return/firefox\//i.test(t)}function LI(t=cn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function MI(t=cn()){return/crios\//i.test(t)}function VI(t=cn()){return/iemobile/i.test(t)}function FI(t=cn()){return/android/i.test(t)}function $I(t=cn()){return/blackberry/i.test(t)}function UI(t=cn()){return/webos/i.test(t)}function Yv(t=cn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function dN(t=cn()){var e;return Yv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hN(){return kR()&&document.documentMode===10}function BI(t=cn()){return Yv(t)||FI(t)||UI(t)||$I(t)||/windows phone/i.test(t)||VI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(t,e=[]){let n;switch(t){case"Browser":n=Ww(cn());break;case"Worker":n=`${Ww(cn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${kl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t,e={}){return so(t,"GET","/v2/passwordPolicy",io(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=6;class gN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:mN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kw(this),this.idTokenSubscription=new Kw(this),this.beforeStateQueue=new fN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await NI(this,{idToken:e}),r=await Bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=JP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(Wi(this));const n=e?zt(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pN(this),n=new gN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await cN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zi(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&KP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function la(t){return zt(t)}class Kw{constructor(e){this.auth=e,this.observer=null,this.addObserver=DR(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _N(t){Cf=t}function qI(t){return Cf.loadJS(t)}function yN(){return Cf.recaptchaEnterpriseScript}function wN(){return Cf.gapiScript}function EN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const TN="recaptcha-enterprise",bN="NO_RECAPTCHA";class IN{constructor(e){this.type=TN,this.auth=la(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{nN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new tN(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;Bw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(bN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&Bw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=yN();l.length!==0&&(l+=a),qI(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Gw(t,e,n,r=!1){const i=new IN(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function yg(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Gw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Gw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(t,e){const n=aa(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(uc(s,e??{}))return i;Xr(i,"already-initialized")}return n.initialize({options:e})}function AN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function kN(t,e,n){const r=la(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=HI(e),{host:o,port:a}=xN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),CN()}function HI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xN(t){const e=HI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Qw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Qw(o)}}}function Qw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function CN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function RN(t,e){return so(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PN(t,e){return Pc(t,"POST","/v1/accounts:signInWithPassword",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t,e){return Pc(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}async function ON(t,e){return Pc(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Xv{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new hc(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new hc(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,n,"signInWithPassword",PN);case"emailLink":return NN(e,{email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,r,"signUpPassword",RN);case"emailLink":return ON(e,{idToken:n,email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t,e){return Pc(t,"POST","/v1/accounts:signInWithIdp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="http://localhost";class Ko extends Xv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=Kv(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ko(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return el(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,el(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,el(e,n)}buildRequest(){const e={requestUri:DN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function LN(t){const e=_u(yu(t)).link,n=e?_u(yu(e)).deep_link_id:null,r=_u(yu(t)).deep_link_id;return(r?_u(yu(r)).link:null)||r||n||e||t}class Zv{constructor(e){var n,r,i,s,o,a;const l=_u(yu(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,f=jN((i=l.mode)!==null&&i!==void 0?i:null);me(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=LN(e);try{return new Zv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(){this.providerId=xl.PROVIDER_ID}static credential(e,n){return hc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zv.parseLink(n);return me(r,"argument-error"),hc._fromEmailAndCode(e,r.code,r.tenantId)}}xl.PROVIDER_ID="password";xl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";xl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc extends WI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Nc{constructor(){super("facebook.com")}static credential(e){return Ko._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Nc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ko._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rs.credential(n,r)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Nc{constructor(){super("github.com")}static credential(e){return Ko._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Nc{constructor(){super("twitter.com")}static credential(e,n){return Ko._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(t,e){return Pc(t,"POST","/v1/accounts:signUp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Bi._fromIdTokenResponse(e,r,i),o=Jw(r);return new Go({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Jw(r);return new Go({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Jw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hh extends ti{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Hh(e,n,r,i)}}function KI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hh._fromErrorAndOperation(t,s,e,r):s})}async function VN(t,e,n=!1){const r=await dc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Go._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e,n=!1){const{auth:r}=t;if(fi(r.app))return Promise.reject(Wi(r));const i="reauthenticate";try{const s=await dc(t,KI(r,i,e,t),n);me(s.idToken,r,"internal-error");const o=Jv(s.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),Go._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GI(t,e,n=!1){if(fi(t.app))return Promise.reject(Wi(t));const r="signIn",i=await KI(t,r,e),s=await Go._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function $N(t,e){return GI(la(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(t){const e=la(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UN(t,e,n){if(fi(t.app))return Promise.reject(Wi(t));const r=la(t),o=await yg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",MN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&QI(t),l}),a=await Go._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function BN(t,e,n){return fi(t.app)?Promise.reject(Wi(t)):$N(zt(t),xl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&QI(t),r})}function zN(t,e,n,r){return zt(t).onIdTokenChanged(e,n,r)}function qN(t,e,n){return zt(t).beforeAuthStateChanged(e,n)}function JI(t,e,n,r){return zt(t).onAuthStateChanged(e,n,r)}function HN(t){return zt(t).signOut()}const Wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wh,"1"),this.storage.removeItem(Wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1e3,KN=10;class XI extends YI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);hN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,KN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XI.type="LOCAL";const GN=XI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI extends YI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ZI.type="SESSION";const eS=ZI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Rf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await QN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e_(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=e_("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const g=f;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(){return window}function YN(t){vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){return typeof vi().WorkerGlobalScope<"u"&&typeof vi().importScripts=="function"}async function XN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function ZN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function eO(){return tS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="firebaseLocalStorageDb",tO=1,Kh="firebaseLocalStorage",rS="fbase_key";class Oc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pf(t,e){return t.transaction([Kh],e?"readwrite":"readonly").objectStore(Kh)}function nO(){const t=indexedDB.deleteDatabase(nS);return new Oc(t).toPromise()}function wg(){const t=indexedDB.open(nS,tO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Kh,{keyPath:rS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Kh)?e(r):(r.close(),await nO(),e(await wg()))})})}async function Yw(t,e,n){const r=Pf(t,!0).put({[rS]:e,value:n});return new Oc(r).toPromise()}async function rO(t,e){const n=Pf(t,!1).get(e),r=await new Oc(n).toPromise();return r===void 0?null:r.value}function Xw(t,e){const n=Pf(t,!0).delete(e);return new Oc(n).toPromise()}const iO=800,sO=3;class iS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>sO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rf._getInstance(eO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await XN(),!this.activeServiceWorker)return;this.sender=new JN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||ZN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wg();return await Yw(e,Wh,"1"),await Xw(e,Wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>rO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Pf(i,!1).getAll();return new Oc(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),iO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iS.type="LOCAL";const oO=iS;new Rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t,e){return e?zi(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_ extends Xv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,n){return el(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function lO(t){return GI(t.auth,new t_(t),t.bypassAuthState)}function uO(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),FN(n,new t_(t),t.bypassAuthState)}async function cO(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),VN(n,new t_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lO;case"linkViaPopup":case"linkViaRedirect":return cO;case"reauthViaPopup":case"reauthViaRedirect":return uO;default:Xr(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO=new Rc(2e3,1e4);class qa extends sS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const e=e_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dO.get())};e()}}qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="pendingRedirect",lh=new Map;class fO extends sS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=lh.get(this.auth._key());if(!e){try{const r=await pO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}lh.set(this.auth._key(),e)}return this.bypassAuthState||lh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function pO(t,e){const n=vO(e),r=gO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function mO(t,e){lh.set(t._key(),e)}function gO(t){return zi(t._redirectPersistence)}function vO(t){return ah(hO,t.config.apiKey,t.name)}async function _O(t,e,n=!1){if(fi(t.app))return Promise.reject(Wi(t));const r=la(t),i=aO(r,e),o=await new fO(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=10*60*1e3;class wO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!EO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!oS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zw(e))}saveEventToCache(e){this.cachedEventUids.add(Zw(e)),this.lastProcessedEventTime=Date.now()}}function Zw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function oS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function EO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e={}){return so(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IO=/^https?/;async function SO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await TO(t);for(const n of e)try{if(AO(n))return}catch{}Xr(t,"unauthorized-domain")}function AO(t){const e=vg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!IO.test(n))return!1;if(bO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=new Rc(3e4,6e4);function e0(){const t=vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xO(t){return new Promise((e,n)=>{var r,i,s;function o(){e0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e0(),n(gi(t,"network-request-failed"))},timeout:kO.get()})}if(!((i=(r=vi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=vi().gapi)===null||s===void 0)&&s.load)o();else{const a=EN("iframefcb");return vi()[a]=()=>{gapi.load?o():n(gi(t,"network-request-failed"))},qI(`${wN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw uh=null,e})}let uh=null;function CO(t){return uh=uh||xO(t),uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=new Rc(5e3,15e3),PO="__/auth/iframe",NO="emulator/auth/iframe",OO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},DO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function jO(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qv(e,NO):`https://${t.config.authDomain}/${PO}`,r={apiKey:e.apiKey,appName:t.name,v:kl},i=DO.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Cc(r).slice(1)}`}async function LO(t){const e=await CO(t),n=vi().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:jO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=gi(t,"network-request-failed"),a=vi().setTimeout(()=>{s(o)},RO.get());function l(){vi().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VO=500,FO=600,$O="_blank",UO="http://localhost";class t0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function BO(t,e,n,r=VO,i=FO){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},MO),{width:r.toString(),height:i.toString(),top:s,left:o}),c=cn().toLowerCase();n&&(a=MI(c)?$O:n),jI(c)&&(e=e||UO,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[y,S])=>`${g}${y}=${S},`,"");if(dN(c)&&a!=="_self")return zO(e||"",a),new t0(null);const f=window.open(e||"",a,d);me(f,t,"popup-blocked");try{f.focus()}catch{}return new t0(f)}function zO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO="__/auth/handler",HO="emulator/auth/handler",WO=encodeURIComponent("fac");async function n0(t,e,n,r,i,s){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:kl,eventId:i};if(e instanceof WI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",OR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Nc){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),c=l?`#${WO}=${encodeURIComponent(l)}`:"";return`${KO(t)}?${Cc(a).slice(1)}${c}`}function KO({config:t}){return t.emulator?Qv(t,HO):`https://${t.authDomain}/${qO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="webStorageSupport";class GO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eS,this._completeRedirectFn=_O,this._overrideRedirectResult=mO}async _openPopup(e,n,r,i){var s;Zi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await n0(e,n,r,vg(),i);return BO(e,o,e_())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await n0(e,n,r,vg(),i);return YN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await LO(e),r=new wO(e);return n.register("authEvent",i=>(me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(em,{type:em},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[em];o!==void 0&&n(!!o),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=SO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BI()||LI()||Yv()}}const QO=GO;var r0="@firebase/auth",i0="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XO(t){bi(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zI(t)},c=new vN(r,i,s,l);return AN(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bi(new Yr("auth-internal",e=>{const n=la(e.getProvider("auth").getImmediate());return(r=>new JO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Er(r0,i0,YO(t)),Er(r0,i0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=5*60,eD=gI("authIdTokenMaxAge")||ZO;let s0=null;const tD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>eD)return;const i=n==null?void 0:n.token;s0!==i&&(s0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function nD(t=Wv()){const e=aa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=SN(t,{popupRedirectResolver:QO,persistence:[oO,GN,eS]}),r=gI("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=tD(s.toString());qN(n,o,()=>o(n.currentUser)),zN(n,a=>o(a))}}const i=pI("auth");return i&&kN(n,`http://${i}`),n}function rD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_N({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=gi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",rD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XO("Browser");var iD="firebase",sD="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Er(iD,sD,"app");var o0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $o,aS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function I(){}I.prototype=w.prototype,k.D=w.prototype,k.prototype=new I,k.prototype.constructor=k,k.C=function(C,O,V){for(var P=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)P[ge-2]=arguments[ge];return w.prototype[O].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,w,I){I||(I=0);var C=Array(16);if(typeof w=="string")for(var O=0;16>O;++O)C[O]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(O=0;16>O;++O)C[O]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=k.g[0],I=k.g[1],O=k.g[2];var V=k.g[3],P=w+(V^I&(O^V))+C[0]+3614090360&4294967295;w=I+(P<<7&4294967295|P>>>25),P=V+(O^w&(I^O))+C[1]+3905402710&4294967295,V=w+(P<<12&4294967295|P>>>20),P=O+(I^V&(w^I))+C[2]+606105819&4294967295,O=V+(P<<17&4294967295|P>>>15),P=I+(w^O&(V^w))+C[3]+3250441966&4294967295,I=O+(P<<22&4294967295|P>>>10),P=w+(V^I&(O^V))+C[4]+4118548399&4294967295,w=I+(P<<7&4294967295|P>>>25),P=V+(O^w&(I^O))+C[5]+1200080426&4294967295,V=w+(P<<12&4294967295|P>>>20),P=O+(I^V&(w^I))+C[6]+2821735955&4294967295,O=V+(P<<17&4294967295|P>>>15),P=I+(w^O&(V^w))+C[7]+4249261313&4294967295,I=O+(P<<22&4294967295|P>>>10),P=w+(V^I&(O^V))+C[8]+1770035416&4294967295,w=I+(P<<7&4294967295|P>>>25),P=V+(O^w&(I^O))+C[9]+2336552879&4294967295,V=w+(P<<12&4294967295|P>>>20),P=O+(I^V&(w^I))+C[10]+4294925233&4294967295,O=V+(P<<17&4294967295|P>>>15),P=I+(w^O&(V^w))+C[11]+2304563134&4294967295,I=O+(P<<22&4294967295|P>>>10),P=w+(V^I&(O^V))+C[12]+1804603682&4294967295,w=I+(P<<7&4294967295|P>>>25),P=V+(O^w&(I^O))+C[13]+4254626195&4294967295,V=w+(P<<12&4294967295|P>>>20),P=O+(I^V&(w^I))+C[14]+2792965006&4294967295,O=V+(P<<17&4294967295|P>>>15),P=I+(w^O&(V^w))+C[15]+1236535329&4294967295,I=O+(P<<22&4294967295|P>>>10),P=w+(O^V&(I^O))+C[1]+4129170786&4294967295,w=I+(P<<5&4294967295|P>>>27),P=V+(I^O&(w^I))+C[6]+3225465664&4294967295,V=w+(P<<9&4294967295|P>>>23),P=O+(w^I&(V^w))+C[11]+643717713&4294967295,O=V+(P<<14&4294967295|P>>>18),P=I+(V^w&(O^V))+C[0]+3921069994&4294967295,I=O+(P<<20&4294967295|P>>>12),P=w+(O^V&(I^O))+C[5]+3593408605&4294967295,w=I+(P<<5&4294967295|P>>>27),P=V+(I^O&(w^I))+C[10]+38016083&4294967295,V=w+(P<<9&4294967295|P>>>23),P=O+(w^I&(V^w))+C[15]+3634488961&4294967295,O=V+(P<<14&4294967295|P>>>18),P=I+(V^w&(O^V))+C[4]+3889429448&4294967295,I=O+(P<<20&4294967295|P>>>12),P=w+(O^V&(I^O))+C[9]+568446438&4294967295,w=I+(P<<5&4294967295|P>>>27),P=V+(I^O&(w^I))+C[14]+3275163606&4294967295,V=w+(P<<9&4294967295|P>>>23),P=O+(w^I&(V^w))+C[3]+4107603335&4294967295,O=V+(P<<14&4294967295|P>>>18),P=I+(V^w&(O^V))+C[8]+1163531501&4294967295,I=O+(P<<20&4294967295|P>>>12),P=w+(O^V&(I^O))+C[13]+2850285829&4294967295,w=I+(P<<5&4294967295|P>>>27),P=V+(I^O&(w^I))+C[2]+4243563512&4294967295,V=w+(P<<9&4294967295|P>>>23),P=O+(w^I&(V^w))+C[7]+1735328473&4294967295,O=V+(P<<14&4294967295|P>>>18),P=I+(V^w&(O^V))+C[12]+2368359562&4294967295,I=O+(P<<20&4294967295|P>>>12),P=w+(I^O^V)+C[5]+4294588738&4294967295,w=I+(P<<4&4294967295|P>>>28),P=V+(w^I^O)+C[8]+2272392833&4294967295,V=w+(P<<11&4294967295|P>>>21),P=O+(V^w^I)+C[11]+1839030562&4294967295,O=V+(P<<16&4294967295|P>>>16),P=I+(O^V^w)+C[14]+4259657740&4294967295,I=O+(P<<23&4294967295|P>>>9),P=w+(I^O^V)+C[1]+2763975236&4294967295,w=I+(P<<4&4294967295|P>>>28),P=V+(w^I^O)+C[4]+1272893353&4294967295,V=w+(P<<11&4294967295|P>>>21),P=O+(V^w^I)+C[7]+4139469664&4294967295,O=V+(P<<16&4294967295|P>>>16),P=I+(O^V^w)+C[10]+3200236656&4294967295,I=O+(P<<23&4294967295|P>>>9),P=w+(I^O^V)+C[13]+681279174&4294967295,w=I+(P<<4&4294967295|P>>>28),P=V+(w^I^O)+C[0]+3936430074&4294967295,V=w+(P<<11&4294967295|P>>>21),P=O+(V^w^I)+C[3]+3572445317&4294967295,O=V+(P<<16&4294967295|P>>>16),P=I+(O^V^w)+C[6]+76029189&4294967295,I=O+(P<<23&4294967295|P>>>9),P=w+(I^O^V)+C[9]+3654602809&4294967295,w=I+(P<<4&4294967295|P>>>28),P=V+(w^I^O)+C[12]+3873151461&4294967295,V=w+(P<<11&4294967295|P>>>21),P=O+(V^w^I)+C[15]+530742520&4294967295,O=V+(P<<16&4294967295|P>>>16),P=I+(O^V^w)+C[2]+3299628645&4294967295,I=O+(P<<23&4294967295|P>>>9),P=w+(O^(I|~V))+C[0]+4096336452&4294967295,w=I+(P<<6&4294967295|P>>>26),P=V+(I^(w|~O))+C[7]+1126891415&4294967295,V=w+(P<<10&4294967295|P>>>22),P=O+(w^(V|~I))+C[14]+2878612391&4294967295,O=V+(P<<15&4294967295|P>>>17),P=I+(V^(O|~w))+C[5]+4237533241&4294967295,I=O+(P<<21&4294967295|P>>>11),P=w+(O^(I|~V))+C[12]+1700485571&4294967295,w=I+(P<<6&4294967295|P>>>26),P=V+(I^(w|~O))+C[3]+2399980690&4294967295,V=w+(P<<10&4294967295|P>>>22),P=O+(w^(V|~I))+C[10]+4293915773&4294967295,O=V+(P<<15&4294967295|P>>>17),P=I+(V^(O|~w))+C[1]+2240044497&4294967295,I=O+(P<<21&4294967295|P>>>11),P=w+(O^(I|~V))+C[8]+1873313359&4294967295,w=I+(P<<6&4294967295|P>>>26),P=V+(I^(w|~O))+C[15]+4264355552&4294967295,V=w+(P<<10&4294967295|P>>>22),P=O+(w^(V|~I))+C[6]+2734768916&4294967295,O=V+(P<<15&4294967295|P>>>17),P=I+(V^(O|~w))+C[13]+1309151649&4294967295,I=O+(P<<21&4294967295|P>>>11),P=w+(O^(I|~V))+C[4]+4149444226&4294967295,w=I+(P<<6&4294967295|P>>>26),P=V+(I^(w|~O))+C[11]+3174756917&4294967295,V=w+(P<<10&4294967295|P>>>22),P=O+(w^(V|~I))+C[2]+718787259&4294967295,O=V+(P<<15&4294967295|P>>>17),P=I+(V^(O|~w))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+V&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var I=w-this.blockSize,C=this.B,O=this.h,V=0;V<w;){if(O==0)for(;V<=I;)i(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<w;)if(C[O++]=k.charCodeAt(V++),O==this.blockSize){i(this,C),O=0;break}}else for(;V<w;)if(C[O++]=k[V++],O==this.blockSize){i(this,C),O=0;break}}this.h=O,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var I=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=I&255,I/=256;for(this.u(k),k=Array(16),w=I=0;4>w;++w)for(var C=0;32>C;C+=8)k[I++]=this.g[w]>>>C&255;return k};function s(k,w){var I=a;return Object.prototype.hasOwnProperty.call(I,k)?I[k]:I[k]=w(k)}function o(k,w){this.h=w;for(var I=[],C=!0,O=k.length-1;0<=O;O--){var V=k[O]|0;C&&V==w||(I[O]=V,C=!1)}this.g=I}var a={};function l(k){return-128<=k&&128>k?s(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function c(k){if(isNaN(k)||!isFinite(k))return f;if(0>k)return N(c(-k));for(var w=[],I=1,C=0;k>=I;C++)w[C]=k/I|0,I*=4294967296;return new o(w,0)}function d(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return N(d(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(w,8)),C=f,O=0;O<k.length;O+=8){var V=Math.min(8,k.length-O),P=parseInt(k.substring(O,O+V),w);8>V?(V=c(Math.pow(w,V)),C=C.j(V).add(c(P))):(C=C.j(I),C=C.add(c(P)))}return C}var f=l(0),g=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(x(this))return-N(this).m();for(var k=0,w=1,I=0;I<this.g.length;I++){var C=this.i(I);k+=(0<=C?C:4294967296+C)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(S(this))return"0";if(x(this))return"-"+N(this).toString(k);for(var w=c(Math.pow(k,6)),I=this,C="";;){var O=D(I,w).g;I=A(I,O.j(w));var V=((0<I.g.length?I.g[0]:I.h)>>>0).toString(k);if(I=O,S(I))return V+C;for(;6>V.length;)V="0"+V;C=V+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function S(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function x(k){return k.h==-1}t.l=function(k){return k=A(this,k),x(k)?-1:S(k)?0:1};function N(k){for(var w=k.g.length,I=[],C=0;C<w;C++)I[C]=~k.g[C];return new o(I,~k.h).add(g)}t.abs=function(){return x(this)?N(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],C=0,O=0;O<=w;O++){var V=C+(this.i(O)&65535)+(k.i(O)&65535),P=(V>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);C=P>>>16,V&=65535,P&=65535,I[O]=P<<16|V}return new o(I,I[I.length-1]&-2147483648?-1:0)};function A(k,w){return k.add(N(w))}t.j=function(k){if(S(this)||S(k))return f;if(x(this))return x(k)?N(this).j(N(k)):N(N(this).j(k));if(x(k))return N(this.j(N(k)));if(0>this.l(y)&&0>k.l(y))return c(this.m()*k.m());for(var w=this.g.length+k.g.length,I=[],C=0;C<2*w;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var O=0;O<k.g.length;O++){var V=this.i(C)>>>16,P=this.i(C)&65535,ge=k.i(O)>>>16,Qe=k.i(O)&65535;I[2*C+2*O]+=P*Qe,E(I,2*C+2*O),I[2*C+2*O+1]+=V*Qe,E(I,2*C+2*O+1),I[2*C+2*O+1]+=P*ge,E(I,2*C+2*O+1),I[2*C+2*O+2]+=V*ge,E(I,2*C+2*O+2)}for(C=0;C<w;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=w;C<2*w;C++)I[C]=0;return new o(I,0)};function E(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function b(k,w){this.g=k,this.h=w}function D(k,w){if(S(w))throw Error("division by zero");if(S(k))return new b(f,f);if(x(k))return w=D(N(k),w),new b(N(w.g),N(w.h));if(x(w))return w=D(k,N(w)),new b(N(w.g),w.h);if(30<k.g.length){if(x(k)||x(w))throw Error("slowDivide_ only works with positive integers.");for(var I=g,C=w;0>=C.l(k);)I=B(I),C=B(C);var O=R(I,1),V=R(C,1);for(C=R(C,2),I=R(I,2);!S(C);){var P=V.add(C);0>=P.l(k)&&(O=O.add(I),V=P),C=R(C,1),I=R(I,1)}return w=A(k,O.j(w)),new b(O,w)}for(O=f;0<=k.l(w);){for(I=Math.max(1,Math.floor(k.m()/w.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),V=c(I),P=V.j(w);x(P)||0<P.l(k);)I-=C,V=c(I),P=V.j(w);S(V)&&(V=g),O=O.add(V),k=A(k,P)}return new b(O,k)}t.A=function(k){return D(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],C=0;C<w;C++)I[C]=this.i(C)&k.i(C);return new o(I,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],C=0;C<w;C++)I[C]=this.i(C)|k.i(C);return new o(I,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),I=[],C=0;C<w;C++)I[C]=this.i(C)^k.i(C);return new o(I,this.h^k.h)};function B(k){for(var w=k.g.length+1,I=[],C=0;C<w;C++)I[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(I,k.h)}function R(k,w){var I=w>>5;w%=32;for(var C=k.g.length-I,O=[],V=0;V<C;V++)O[V]=0<w?k.i(V+I)>>>w|k.i(V+I+1)<<32-w:k.i(V+I);return new o(O,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,aS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,$o=o}).apply(typeof o0<"u"?o0:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lS,uS,wu,cS,ch,Eg,dS,hS,fS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,v){return u==Array.prototype||u==Object.prototype||(u[m]=v.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var m=0;m<u.length;++m){var v=u[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function i(u,m){if(m)e:{var v=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var U=u[T];if(!(U in v))break e;v=v[U]}u=u[u.length-1],T=v[u],m=m(T),m!=T&&m!=null&&e(v,u,{configurable:!0,writable:!0,value:m})}}function s(u,m){u instanceof String&&(u+="");var v=0,T=!1,U={next:function(){if(!T&&v<u.length){var q=v++;return{value:m(q,u[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(u){return u||function(){return s(this,function(m,v){return v})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function c(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function d(u,m,v){return u.call.apply(u.bind,arguments)}function f(u,m,v){if(!u)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),u.apply(m,U)}}return function(){return u.apply(m,arguments)}}function g(u,m,v){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,m){var v=Array.prototype.slice.call(arguments,1);return function(){var T=v.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function S(u,m){function v(){}v.prototype=m.prototype,u.aa=m.prototype,u.prototype=new v,u.prototype.constructor=u,u.Qb=function(T,U,q){for(var Z=Array(arguments.length-2),je=2;je<arguments.length;je++)Z[je-2]=arguments[je];return m.prototype[U].apply(T,Z)}}function x(u){const m=u.length;if(0<m){const v=Array(m);for(let T=0;T<m;T++)v[T]=u[T];return v}return[]}function N(u,m){for(let v=1;v<arguments.length;v++){const T=arguments[v];if(l(T)){const U=u.length||0,q=T.length||0;u.length=U+q;for(let Z=0;Z<q;Z++)u[U+Z]=T[Z]}else u.push(T)}}class A{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function E(u){return/^[\s\xa0]*$/.test(u)}function b(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function D(u){return D[" "](u),u}D[" "]=function(){};var B=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function R(u,m,v){for(const T in u)m.call(v,u[T],T,u)}function k(u,m){for(const v in u)m.call(void 0,u[v],v,u)}function w(u){const m={};for(const v in u)m[v]=u[v];return m}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,m){let v,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(v in T)u[v]=T[v];for(let q=0;q<I.length;q++)v=I[q],Object.prototype.hasOwnProperty.call(T,v)&&(u[v]=T[v])}}function O(u){var m=1;u=u.split(":");const v=[];for(;0<m&&u.length;)v.push(u.shift()),m--;return u.length&&v.push(u.join(":")),v}function V(u){a.setTimeout(()=>{throw u},0)}function P(){var u=ae;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ge{constructor(){this.h=this.g=null}add(m,v){const T=Qe.get();T.set(m,v),this.h?this.h.next=T:this.g=T,this.h=T}}var Qe=new A(()=>new Je,u=>u.reset());class Je{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let we,X=!1,ae=new ge,de=()=>{const u=a.Promise.resolve(void 0);we=()=>{u.then(Ae)}};var Ae=()=>{for(var u;u=P();){try{u.h.call(u.g)}catch(v){V(v)}var m=Qe;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}X=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};a.addEventListener("test",v,m),a.removeEventListener("test",v,m)}catch{}return u}();function ze(u,m){if(H.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var v=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(B){e:{try{D(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else v=="mouseover"?m=u.fromElement:v=="mouseout"&&(m=u.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:Ye[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ze.aa.h.call(this)}}S(ze,H);var Ye={2:"touch",3:"pen",4:"mouse"};ze.prototype.h=function(){ze.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var et="closure_listenable_"+(1e6*Math.random()|0),Ct=0;function Rt(u,m,v,T,U){this.listener=u,this.proxy=null,this.src=m,this.type=v,this.capture=!!T,this.ha=U,this.key=++Ct,this.da=this.fa=!1}function ar(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ie(u){this.src=u,this.g={},this.h=0}ie.prototype.add=function(u,m,v,T,U){var q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);var Z=Xt(u,m,T,U);return-1<Z?(m=u[Z],v||(m.fa=!1)):(m=new Rt(m,this.src,q,!!T,U),m.fa=v,u.push(m)),m};function tt(u,m){var v=m.type;if(v in u.g){var T=u.g[v],U=Array.prototype.indexOf.call(T,m,void 0),q;(q=0<=U)&&Array.prototype.splice.call(T,U,1),q&&(ar(m),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Xt(u,m,v,T){for(var U=0;U<u.length;++U){var q=u[U];if(!q.da&&q.listener==m&&q.capture==!!v&&q.ha==T)return U}return-1}var ni="closure_lm_"+(1e6*Math.random()|0),ki={};function Pt(u,m,v,T,U){if(Array.isArray(m)){for(var q=0;q<m.length;q++)Pt(u,m[q],v,T,U);return null}return v=Bn(v),u&&u[et]?u.K(m,v,c(T)?!!T.capture:!!T,U):xi(u,m,v,!1,T,U)}function xi(u,m,v,T,U,q){if(!m)throw Error("Invalid event type");var Z=c(U)?!!U.capture:!!U,je=ri(u);if(je||(u[ni]=je=new ie(u)),v=je.add(m,v,T,Z,q),v.proxy)return v;if(T=Ar(),v.proxy=T,T.src=u,T.listener=v,u.addEventListener)$e||(U=Z),U===void 0&&(U=!1),u.addEventListener(m.toString(),T,U);else if(u.attachEvent)u.attachEvent(kr(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ar(){function u(v){return m.call(u.src,u.listener,v)}const m=ls;return u}function xn(u,m,v,T,U){if(Array.isArray(m))for(var q=0;q<m.length;q++)xn(u,m[q],v,T,U);else T=c(T)?!!T.capture:!!T,v=Bn(v),u&&u[et]?(u=u.i,m=String(m).toString(),m in u.g&&(q=u.g[m],v=Xt(q,v,T,U),-1<v&&(ar(q[v]),Array.prototype.splice.call(q,v,1),q.length==0&&(delete u.g[m],u.h--)))):u&&(u=ri(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Xt(m,v,T,U)),(v=-1<u?m[u]:null)&&hn(v))}function hn(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[et])tt(m.i,u);else{var v=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(v,T,u.capture):m.detachEvent?m.detachEvent(kr(v),T):m.addListener&&m.removeListener&&m.removeListener(T),(v=ri(m))?(tt(v,u),v.h==0&&(v.src=null,m[ni]=null)):ar(u)}}}function kr(u){return u in ki?ki[u]:ki[u]="on"+u}function ls(u,m){if(u.da)u=!0;else{m=new ze(m,this);var v=u.listener,T=u.ha||u.src;u.fa&&hn(u),u=v.call(T,m)}return u}function ri(u){return u=u[ni],u instanceof ie?u:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bn(u){return typeof u=="function"?u:(u[fn]||(u[fn]=function(m){return u.handleEvent(m)}),u[fn])}function ct(){Te.call(this),this.i=new ie(this),this.M=this,this.F=null}S(ct,Te),ct.prototype[et]=!0,ct.prototype.removeEventListener=function(u,m,v,T){xn(this,u,m,v,T)};function Xe(u,m){var v,T=u.F;if(T)for(v=[];T;T=T.F)v.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new H(m,u);else if(m instanceof H)m.target=m.target||u;else{var U=m;m=new H(T,u),C(m,U)}if(U=!0,v)for(var q=v.length-1;0<=q;q--){var Z=m.g=v[q];U=st(Z,T,!0,m)&&U}if(Z=m.g=u,U=st(Z,T,!0,m)&&U,U=st(Z,T,!1,m)&&U,v)for(q=0;q<v.length;q++)Z=m.g=v[q],U=st(Z,T,!1,m)&&U}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var v=u.g[m],T=0;T<v.length;T++)ar(v[T]);delete u.g[m],u.h--}}this.F=null},ct.prototype.K=function(u,m,v,T){return this.i.add(String(u),m,!1,v,T)},ct.prototype.L=function(u,m,v,T){return this.i.add(String(u),m,!0,v,T)};function st(u,m,v,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,q=0;q<m.length;++q){var Z=m[q];if(Z&&!Z.da&&Z.capture==v){var je=Z.listener,Tt=Z.ha||Z.src;Z.fa&&tt(u.i,Z),U=je.call(Tt,T)!==!1&&U}}return U&&!T.defaultPrevented}function pn(u,m,v){if(typeof u=="function")v&&(u=g(u,v));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(u,m||0)}function xr(u){u.g=pn(()=>{u.g=null,u.i&&(u.i=!1,xr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class zn extends Te{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:xr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cn(u){Te.call(this),this.h=u,this.g={}}S(Cn,Te);var Zt=[];function uo(u){R(u.g,function(m,v){this.g.hasOwnProperty(v)&&hn(m)},u),u.g={}}Cn.prototype.N=function(){Cn.aa.N.call(this),uo(this)},Cn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=a.JSON.stringify,pa=a.JSON.parse,$l=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function us(){}us.prototype.h=null;function Ci(u){return u.h||(u.h=u.i())}function co(){}var Cr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Rr(){H.call(this,"d")}S(Rr,H);function lr(){H.call(this,"c")}S(lr,H);var ur={},cs=null;function ds(){return cs=cs||new ct}ur.La="serverreachability";function ho(u){H.call(this,ur.La,u)}S(ho,H);function cr(u){const m=ds();Xe(m,new ho(m))}ur.STAT_EVENT="statevent";function Ri(u,m){H.call(this,ur.STAT_EVENT,u),this.stat=m}S(Ri,H);function dt(u){const m=ds();Xe(m,new Ri(m,u))}ur.Ma="timingevent";function si(u,m){H.call(this,ur.Ma,u),this.size=m}S(si,H);function L(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},m)}function $(){this.g=!0}$.prototype.xa=function(){this.g=!1};function z(u,m,v,T,U,q){u.info(function(){if(u.g)if(q)for(var Z="",je=q.split("&"),Tt=0;Tt<je.length;Tt++){var Ne=je[Tt].split("=");if(1<Ne.length){var Mt=Ne[0];Ne=Ne[1];var Vt=Mt.split("_");Z=2<=Vt.length&&Vt[1]=="type"?Z+(Mt+"="+Ne+"&"):Z+(Mt+"=redacted&")}}else Z=null;else Z=q;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+v+`
`+Z})}function W(u,m,v,T,U,q,Z){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+v+`
`+q+" "+Z})}function te(u,m,v,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+he(u,v)+(T?" "+T:"")})}function se(u,m){u.info(function(){return"TIMEOUT: "+m})}$.prototype.info=function(){};function he(u,m){if(!u.g)return m;if(!m)return null;try{var v=JSON.parse(m);if(v){for(u=0;u<v.length;u++)if(Array.isArray(v[u])){var T=v[u];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var Z=1;Z<U.length;Z++)U[Z]=""}}}}return ii(v)}catch{return m}}var Y={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ve={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ue;function ce(){}S(ce,us),ce.prototype.g=function(){return new XMLHttpRequest},ce.prototype.i=function(){return{}},ue=new ce;function ke(u,m,v,T){this.j=u,this.i=m,this.l=v,this.R=T||1,this.U=new Cn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var Me={},be={};function ot(u,m,v){u.L=1,u.v=Pi(fr(m)),u.m=v,u.P=!0,at(u,null)}function at(u,m){u.F=Date.now(),qn(u),u.A=fr(u.v);var v=u.A,T=u.R;Array.isArray(T)||(T=[String(T)]),td(v.i,"t",T),u.C=0,v=u.j.J,u.h=new xe,u.g=Yl(u.j,v?m:null,!u.m),0<u.O&&(u.M=new zn(g(u.Y,u,u.g),u.O)),m=u.U,v=u.g,T=u.ca;var U="readystatechange";Array.isArray(U)||(U&&(Zt[0]=U.toString()),U=Zt);for(var q=0;q<U.length;q++){var Z=Pt(v,U[q],T||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),cr(),z(u.i,u.u,u.A,u.l,u.R,u.m)}ke.prototype.ca=function(u){u=u.target;const m=this.M;m&&jr(u)==3?m.j():this.Y(u)},ke.prototype.Y=function(u){try{if(u==this.g)e:{const Vt=jr(this.g);var m=this.g.Ba();const _s=this.g.Z();if(!(3>Vt)&&(Vt!=3||this.g&&(this.h.h||this.g.oa()||ad(this.g)))){this.J||Vt!=4||m==7||(m==8||0>=_s?cr(3):cr(2)),hr(this);var v=this.g.Z();this.X=v;t:if(Pr(this)){var T=ad(this.g);u="";var U=T.length,q=jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){mn(this),Nt(this);var Z="";break t}this.h.i=new a.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,u+=this.h.i.decode(T[m],{stream:!(q&&m==U-1)});T.length=0,this.h.g+=u,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=v==200,W(this.i,this.u,this.A,this.l,this.R,Vt,v),this.o){if(this.T&&!this.K){t:{if(this.g){var je,Tt=this.g;if((je=Tt.g?Tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(je)){var Ne=je;break t}}Ne=null}if(v=Ne)te(this.i,this.l,v,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oi(this,v);else{this.o=!1,this.s=3,dt(12),mn(this),Nt(this);break e}}if(this.P){v=!0;let qt;for(;!this.J&&this.C<Z.length;)if(qt=dr(this,Z),qt==be){Vt==4&&(this.s=4,dt(14),v=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(qt==Me){this.s=4,dt(15),te(this.i,this.l,Z,"[Invalid Chunk]"),v=!1;break}else te(this.i,this.l,qt,null),oi(this,qt);if(Pr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vt!=4||Z.length!=0||this.h.h||(this.s=1,dt(16),v=!1),this.o=this.o&&v,!v)te(this.i,this.l,Z,"[Invalid Chunked Response]"),mn(this),Nt(this);else if(0<Z.length&&!this.W){this.W=!0;var Mt=this.j;Mt.g==this&&Mt.ba&&!Mt.M&&(Mt.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Ql(Mt),Mt.M=!0,dt(11))}}else te(this.i,this.l,Z,null),oi(this,Z);Vt==4&&mn(this),this.o&&!this.J&&(Vt==4?hd(this.j,this):(this.o=!1,qn(this)))}else gp(this.g),v==400&&0<Z.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),mn(this),Nt(this)}}}catch{}finally{}};function Pr(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function dr(u,m){var v=u.C,T=m.indexOf(`
`,v);return T==-1?be:(v=Number(m.substring(v,T)),isNaN(v)?Me:(T+=1,T+v>m.length?be:(m=m.slice(T,T+v),u.C=T+v,m)))}ke.prototype.cancel=function(){this.J=!0,mn(this)};function qn(u){u.S=Date.now()+u.I,Nr(u,u.I)}function Nr(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=L(g(u.ba,u),m)}function hr(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ke.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(se(this.i,this.A),this.L!=2&&(cr(),dt(17)),mn(this),this.s=2,Nt(this)):Nr(this,this.S-u)};function Nt(u){u.j.G==0||u.J||hd(u.j,u)}function mn(u){hr(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,uo(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function oi(u,m){try{var v=u.j;if(v.G!=0&&(v.g==u||Ue(v.h,u))){if(!u.K&&Ue(v.h,u)&&v.G==3){try{var T=v.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!v.u){if(v.g)if(v.g.F+3e3<u.F)Ea(v),ya(v);else break e;Gl(v),dt(18)}}else v.za=U[1],0<v.za-v.T&&37500>U[2]&&v.F&&v.v==0&&!v.C&&(v.C=L(g(v.Za,v),6e3));if(1>=Et(v.h)&&v.ca){try{v.ca()}catch{}v.ca=void 0}}else Lr(v,11)}else if((u.K||v.g==u)&&Ea(v),!E(m))for(U=v.Da.g.parse(m),m=0;m<U.length;m++){let Ne=U[m];if(v.T=Ne[0],Ne=Ne[1],v.G==2)if(Ne[0]=="c"){v.K=Ne[1],v.ia=Ne[2];const Mt=Ne[3];Mt!=null&&(v.la=Mt,v.j.info("VER="+v.la));const Vt=Ne[4];Vt!=null&&(v.Aa=Vt,v.j.info("SVER="+v.Aa));const _s=Ne[5];_s!=null&&typeof _s=="number"&&0<_s&&(T=1.5*_s,v.L=T,v.j.info("backChannelRequestTimeoutMs_="+T)),T=v;const qt=u.g;if(qt){const mr=qt.g?qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mr){var q=T.h;q.g||mr.indexOf("spdy")==-1&&mr.indexOf("quic")==-1&&mr.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(gn(q,q.h),q.h=null))}if(T.D){const Xl=qt.g?qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(T.ya=Xl,We(T.I,T.D,Xl))}}v.G=3,v.l&&v.l.ua(),v.ba&&(v.R=Date.now()-u.F,v.j.info("Handshake RTT: "+v.R+"ms")),T=v;var Z=u;if(T.qa=Jl(T,T.J?T.ia:null,T.W),Z.K){fo(T.h,Z);var je=Z,Tt=T.L;Tt&&(je.I=Tt),je.B&&(hr(je),qn(je)),T.g=Z}else cd(T);0<v.i.length&&wa(v)}else Ne[0]!="stop"&&Ne[0]!="close"||Lr(v,7);else v.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Lr(v,7):Kl(v):Ne[0]!="noop"&&v.l&&v.l.ta(Ne),v.v=0)}}cr(4)}catch{}}var Hn=class{constructor(u,m){this.g=u,this.map=m}};function pe(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ze(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Et(u){return u.h?1:u.g?u.g.size:0}function Ue(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function gn(u,m){u.g?u.g.add(m):u.h=m}function fo(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}pe.prototype.cancel=function(){if(this.i=ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function ma(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const v of u.g.values())m=m.concat(v.D);return m}return x(u.i)}function cp(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(l(u)){for(var m=[],v=u.length,T=0;T<v;T++)m.push(u[T]);return m}m=[],v=0;for(T in u)m[v++]=u[T];return m}function dp(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(l(u)||typeof u=="string"){var m=[];u=u.length;for(var v=0;v<u;v++)m.push(v);return m}m=[],v=0;for(const T in u)m[v++]=T;return m}}}function Kc(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(l(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var v=dp(u),T=cp(u),U=T.length,q=0;q<U;q++)m.call(void 0,T[q],v&&v[q],u)}var Gc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wn(u,m){if(u){u=u.split("&");for(var v=0;v<u.length;v++){var T=u[v].indexOf("="),U=null;if(0<=T){var q=u[v].substring(0,T);U=u[v].substring(T+1)}else q=u[v];m(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ai(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ai){this.h=u.h,po(this,u.j),this.o=u.o,this.g=u.g,ga(this,u.s),this.l=u.l;var m=u.i,v=new li;v.i=m.i,m.g&&(v.g=new Map(m.g),v.h=m.h),Qc(this,v),this.m=u.m}else u&&(m=String(u).match(Gc))?(this.h=!1,po(this,m[1]||"",!0),this.o=mo(m[2]||""),this.g=mo(m[3]||"",!0),ga(this,m[4]),this.l=mo(m[5]||"",!0),Qc(this,m[6]||"",!0),this.m=mo(m[7]||"")):(this.h=!1,this.i=new li(null,this.h))}ai.prototype.toString=function(){var u=[],m=this.j;m&&u.push(go(m,Yc,!0),":");var v=this.g;return(v||m=="file")&&(u.push("//"),(m=this.o)&&u.push(go(m,Yc,!0),"@"),u.push(encodeURIComponent(String(v)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.s,v!=null&&u.push(":",String(v))),(v=this.l)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(go(v,v.charAt(0)=="/"?Xc:hp,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",go(v,ed)),u.join("")};function fr(u){return new ai(u)}function po(u,m,v){u.j=v?mo(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function ga(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function Qc(u,m,v){m instanceof li?(u.i=m,nd(u.i,u.h)):(v||(m=go(m,Zc)),u.i=new li(m,u.h))}function We(u,m,v){u.i.set(m,v)}function Pi(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function mo(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function go(u,m,v){return typeof u=="string"?(u=encodeURI(u).replace(m,Jc),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Jc(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Yc=/[#\/\?@]/g,hp=/[#\?:]/g,Xc=/[#\?]/g,Zc=/[#\?@]/g,ed=/#/g;function li(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Or(u){u.g||(u.g=new Map,u.h=0,u.i&&Wn(u.i,function(m,v){u.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}t=li.prototype,t.add=function(u,m){Or(this),this.i=null,u=hs(this,u);var v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(m),this.h+=1,this};function va(u,m){Or(u),m=hs(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function vn(u,m){return Or(u),m=hs(u,m),u.g.has(m)}t.forEach=function(u,m){Or(this),this.g.forEach(function(v,T){v.forEach(function(U){u.call(m,U,T,this)},this)},this)},t.na=function(){Or(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),v=[];for(let T=0;T<m.length;T++){const U=u[T];for(let q=0;q<U.length;q++)v.push(m[T])}return v},t.V=function(u){Or(this);let m=[];if(typeof u=="string")vn(this,u)&&(m=m.concat(this.g.get(hs(this,u))));else{u=Array.from(this.g.values());for(let v=0;v<u.length;v++)m=m.concat(u[v])}return m},t.set=function(u,m){return Or(this),this.i=null,u=hs(this,u),vn(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},t.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function td(u,m,v){va(u,m),0<v.length&&(u.i=null,u.g.set(hs(u,m),x(v)),u.h+=v.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var v=0;v<m.length;v++){var T=m[v];const q=encodeURIComponent(String(T)),Z=this.V(T);for(T=0;T<Z.length;T++){var U=q;Z[T]!==""&&(U+="="+encodeURIComponent(String(Z[T]))),u.push(U)}}return this.i=u.join("&")};function hs(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function nd(u,m){m&&!u.j&&(Or(u),u.i=null,u.g.forEach(function(v,T){var U=T.toLowerCase();T!=U&&(va(this,T),td(this,U,v))},u)),u.j=m}function rd(u,m){const v=new $;if(a.Image){const T=new Image;T.onload=y(ui,v,"TestLoadImage: loaded",!0,m,T),T.onerror=y(ui,v,"TestLoadImage: error",!1,m,T),T.onabort=y(ui,v,"TestLoadImage: abort",!1,m,T),T.ontimeout=y(ui,v,"TestLoadImage: timeout",!1,m,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function fp(u,m){const v=new $,T=new AbortController,U=setTimeout(()=>{T.abort(),ui(v,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(q=>{clearTimeout(U),q.ok?ui(v,"TestPingServer: ok",!0,m):ui(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),ui(v,"TestPingServer: error",!1,m)})}function ui(u,m,v,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(v)}catch{}}function pp(){this.g=new $l}function mp(u,m,v){const T=v||"";try{Kc(u,function(U,q){let Z=U;c(U)&&(Z=ii(U)),m.push(T+q+"="+encodeURIComponent(Z))})}catch(U){throw m.push(T+"type="+encodeURIComponent("_badmap")),U}}function vo(u){this.l=u.Ub||null,this.j=u.eb||!1}S(vo,us),vo.prototype.g=function(){return new _a(this.l,this.j)},vo.prototype.i=function(u){return function(){return u}}({});function _a(u,m){ct.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(_a,ct),t=_a.prototype,t.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Ni(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ul(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ul(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?fs(this):Ni(this),this.readyState==3&&Ul(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,fs(this))},t.Qa=function(u){this.g&&(this.response=u,fs(this))},t.ga=function(){this.g&&fs(this)};function fs(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ni(u)}t.setRequestHeader=function(u,m){this.u.append(u,m)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=m.next();return u.join(`\r
`)};function Ni(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(_a.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function id(u){let m="";return R(u,function(v,T){m+=T,m+=":",m+=v,m+=`\r
`}),m}function Bl(u,m,v){e:{for(T in v){var T=!1;break e}T=!0}T||(v=id(v),typeof u=="string"?v!=null&&encodeURIComponent(String(v)):We(u,m,v))}function Be(u){ct.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Be,ct);var Dr=/^https?$/i,sd=["POST","PUT"];t=Be.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,m,v,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ue.g(),this.v=this.o?Ci(this.o):Ci(ue),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(q){od(this,q);return}if(u=v||"",v=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)v.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())v.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sd,m,void 0))||T||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,Z]of v)this.g.setRequestHeader(q,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hl(this),this.u=!0,this.g.send(u),this.u=!1}catch(q){od(this,q)}};function od(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,zl(u),_o(u)}function zl(u){u.A||(u.A=!0,Xe(u,"complete"),Xe(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Xe(this,"complete"),Xe(this,"abort"),_o(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_o(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ql(this):this.bb())},t.bb=function(){ql(this)};function ql(u){if(u.h&&typeof o<"u"&&(!u.v[1]||jr(u)!=4||u.Z()!=2)){if(u.u&&jr(u)==4)pn(u.Ea,0,u);else if(Xe(u,"readystatechange"),jr(u)==4){u.h=!1;try{const Z=u.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var T;if(T=Z===0){var U=String(u.D).match(Gc)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),T=!Dr.test(U?U.toLowerCase():"")}v=T}if(v)Xe(u,"complete"),Xe(u,"success");else{u.m=6;try{var q=2<jr(u)?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.Z()+"]",zl(u)}}finally{_o(u)}}}}function _o(u,m){if(u.g){Hl(u);const v=u.g,T=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||Xe(u,"ready");try{v.onreadystatechange=T}catch{}}}function Hl(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function jr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<jr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),pa(m)}};function ad(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function gp(u){const m={};u=(u.g&&2<=jr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(E(u[T]))continue;var v=O(u[T]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=m[U]||[];m[U]=q,q.push(v)}k(m,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(u,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||m}function Wl(u){this.Aa=0,this.i=[],this.j=new $,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ps("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ps("baseRetryDelayMs",5e3,u),this.cb=ps("retryDelaySeedMs",1e4,u),this.Wa=ps("forwardChannelMaxRetries",2,u),this.wa=ps("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new pe(u&&u.concurrentRequestLimit),this.Da=new pp,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wl.prototype,t.la=8,t.G=1,t.connect=function(u,m,v,T){dt(0),this.W=u,this.H=m||{},v&&T!==void 0&&(this.H.OSID=v,this.H.OAID=T),this.F=this.X,this.I=Jl(this,null,this.W),wa(this)};function Kl(u){if(ld(u),u.G==3){var m=u.U++,v=fr(u.I);if(We(v,"SID",u.K),We(v,"RID",m),We(v,"TYPE","terminate"),ms(u,v),m=new ke(u,u.j,m),m.L=2,m.v=Pi(fr(v)),v=!1,a.navigator&&a.navigator.sendBeacon)try{v=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!v&&a.Image&&(new Image().src=m.v,v=!0),v||(m.g=Yl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),qn(m)}yo(u)}function ya(u){u.g&&(Ql(u),u.g.cancel(),u.g=null)}function ld(u){ya(u),u.u&&(a.clearTimeout(u.u),u.u=null),Ea(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function wa(u){if(!Ze(u.h)&&!u.s){u.s=!0;var m=u.Ga;we||de(),X||(we(),X=!0),ae.add(m,u),u.B=0}}function vp(u,m){return Et(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=L(g(u.Ga,u,m),fd(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const U=new ke(this,this.j,u);let q=this.o;if(this.S&&(q?(q=w(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var T=this.i[v];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=ud(this,U,m),v=fr(this.I),We(v,"RID",u),We(v,"CVER",22),this.D&&We(v,"X-HTTP-Session-Id",this.D),ms(this,v),q&&(this.O?m="headers="+encodeURIComponent(String(id(q)))+"&"+m:this.m&&Bl(v,this.m,q)),gn(this.h,U),this.Ua&&We(v,"TYPE","init"),this.P?(We(v,"$req",m),We(v,"SID","null"),U.T=!0,ot(U,v,null)):ot(U,v,m),this.G=2}}else this.G==3&&(u?pr(this,u):this.i.length==0||Ze(this.h)||pr(this))};function pr(u,m){var v;m?v=m.l:v=u.U++;const T=fr(u.I);We(T,"SID",u.K),We(T,"RID",v),We(T,"AID",u.T),ms(u,T),u.m&&u.o&&Bl(T,u.m,u.o),v=new ke(u,u.j,v,u.B+1),u.m===null&&(v.H=u.o),m&&(u.i=m.D.concat(u.i)),m=ud(u,v,1e3),v.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),gn(u.h,v),ot(v,T,m)}function ms(u,m){u.H&&R(u.H,function(v,T){We(m,T,v)}),u.l&&Kc({},function(v,T){We(m,T,v)})}function ud(u,m,v){v=Math.min(u.i.length,v);var T=u.l?g(u.l.Na,u.l,u):null;e:{var U=u.i;let q=-1;for(;;){const Z=["count="+v];q==-1?0<v?(q=U[0].g,Z.push("ofs="+q)):q=0:Z.push("ofs="+q);let je=!0;for(let Tt=0;Tt<v;Tt++){let Ne=U[Tt].g;const Mt=U[Tt].map;if(Ne-=q,0>Ne)q=Math.max(0,U[Tt].g-100),je=!1;else try{mp(Mt,Z,"req"+Ne+"_")}catch{T&&T(Mt)}}if(je){T=Z.join("&");break e}}}return u=u.i.splice(0,v),m.D=u,T}function cd(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;we||de(),X||(we(),X=!0),ae.add(m,u),u.v=0}}function Gl(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=L(g(u.Fa,u),fd(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,dd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=L(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),ya(this),dd(this))};function Ql(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function dd(u){u.g=new ke(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=fr(u.qa);We(m,"RID","rpc"),We(m,"SID",u.K),We(m,"AID",u.T),We(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(m,"TO",u.ja),We(m,"TYPE","xmlhttp"),ms(u,m),u.m&&u.o&&Bl(m,u.m,u.o),u.L&&(u.g.I=u.L);var v=u.g;u=u.ia,v.L=1,v.v=Pi(fr(m)),v.m=null,v.P=!0,at(v,u)}t.Za=function(){this.C!=null&&(this.C=null,ya(this),Gl(this),dt(19))};function Ea(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function hd(u,m){var v=null;if(u.g==m){Ea(u),Ql(u),u.g=null;var T=2}else if(Ue(u.h,m))v=m.D,fo(u.h,m),T=1;else return;if(u.G!=0){if(m.o)if(T==1){v=m.m?m.m.length:0,m=Date.now()-m.F;var U=u.B;T=ds(),Xe(T,new si(T,v)),wa(u)}else cd(u);else if(U=m.s,U==3||U==0&&0<m.X||!(T==1&&vp(u,m)||T==2&&Gl(u)))switch(v&&0<v.length&&(m=u.h,m.i=m.i.concat(v)),U){case 1:Lr(u,5);break;case 4:Lr(u,10);break;case 3:Lr(u,6);break;default:Lr(u,2)}}}function fd(u,m){let v=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(v*=2),v*m}function Lr(u,m){if(u.j.info("Error code "+m),m==2){var v=g(u.fb,u),T=u.Xa;const U=!T;T=new ai(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||po(T,"https"),Pi(T),U?rd(T.toString(),v):fp(T.toString(),v)}else dt(2);u.G=0,u.l&&u.l.sa(m),yo(u),ld(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function yo(u){if(u.G=0,u.ka=[],u.l){const m=ma(u.h);(m.length!=0||u.i.length!=0)&&(N(u.ka,m),N(u.ka,u.i),u.h.i.length=0,x(u.i),u.i.length=0),u.l.ra()}}function Jl(u,m,v){var T=v instanceof ai?fr(v):new ai(v);if(T.g!="")m&&(T.g=m+"."+T.g),ga(T,T.s);else{var U=a.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var q=new ai(null);T&&po(q,T),m&&(q.g=m),U&&ga(q,U),v&&(q.l=v),T=q}return v=u.D,m=u.ya,v&&m&&We(T,v,m),We(T,"VER",u.la),ms(u,T),T}function Yl(u,m,v){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Be(new vo({eb:v})):new Be(u.pa),m.Ha(u.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gs(){}t=gs.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vs(){}vs.prototype.g=function(u,m){return new _n(u,m)};function _n(u,m){ct.call(this),this.g=new Wl(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!E(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!E(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Rn(this)}S(_n,ct),_n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Kl(this.g)},_n.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.u&&(v={},v.__data__=ii(u),u=v);m.i.push(new Hn(m.Ya++,u)),m.G==3&&wa(m)},_n.prototype.N=function(){this.g.l=null,delete this.j,Kl(this.g),delete this.g,_n.aa.N.call(this)};function pd(u){Rr.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const v in m){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}S(pd,Rr);function md(){lr.call(this),this.status=1}S(md,lr);function Rn(u){this.g=u}S(Rn,gs),Rn.prototype.ua=function(){Xe(this.g,"a")},Rn.prototype.ta=function(u){Xe(this.g,new pd(u))},Rn.prototype.sa=function(u){Xe(this.g,new md)},Rn.prototype.ra=function(){Xe(this.g,"b")},vs.prototype.createWebChannel=vs.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,fS=function(){return new vs},hS=function(){return ds()},dS=ur,Eg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Y.NO_ERROR=0,Y.TIMEOUT=8,Y.HTTP_ERROR=6,ch=Y,ve.COMPLETE="complete",cS=ve,co.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",ct.prototype.listen=ct.prototype.K,wu=co,uS=vo,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,lS=Be}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});const a0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new xf("@firebase/firestore");function uu(){return Qo.logLevel}function le(t,...e){if(Qo.logLevel<=De.DEBUG){const n=e.map(n_);Qo.debug(`Firestore (${Cl}): ${t}`,...n)}}function es(t,...e){if(Qo.logLevel<=De.ERROR){const n=e.map(n_);Qo.error(`Firestore (${Cl}): ${t}`,...n)}}function cl(t,...e){if(Qo.logLevel<=De.WARN){const n=e.map(n_);Qo.warn(`Firestore (${Cl}): ${t}`,...n)}}function n_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: `+t;throw es(e),new Error(e)}function Ge(t,e){t||_e()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(sn.UNAUTHENTICATED))}shutdown(){}}class aD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class lD{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new _i;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new _i,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new _i)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string"),new pS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new sn(e)}}class uD{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class cD{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new uD(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(sn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dD{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hD{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string"),this.R=n.token,new dD(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fD(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function dl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return jt.fromMillis(Date.now())}static fromDate(e){return jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new jt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new jt(0,0))}static max(){return new Ee(new jt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(),r===void 0?r=e.length-n:r>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fc.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fc?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class rt extends fc{construct(e,n,r){return new rt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new rt(n)}static emptyPath(){return new rt([])}}const pD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends fc{construct(e,n,r){return new Kt(e,n,r)}static isValidIdentifier(e){return pD.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(rt.fromString(e))}static fromName(e){return new fe(rt.fromString(e).popFirst(5))}static empty(){return new fe(rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&rt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return rt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new rt(e.slice()))}}function mD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new jt(n+1,0):new jt(n,r));return new Ys(i,fe.empty(),e)}function gD(t){return new Ys(t.readTime,t.key,-1)}class Ys{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ys(Ee.min(),fe.empty(),-1)}static max(){return new Ys(Ee.max(),fe.empty(),-1)}}function vD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class yD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dc(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==_D)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new Q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function wD(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function jc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}r_.oe=-1;function Nf(t){return t==null}function Gh(t){return t===0&&1/t==-1/0}function ED(t){return typeof t=="number"&&Number.isInteger(t)&&!Gh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TD(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function gS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new _t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new _t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Wt.RED,this.left=i??Wt.EMPTY,this.right=s??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Wt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Wt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new _t(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new Kr([])}unionWith(e){let n=new Qt(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vS("Invalid base64 string: "+s):s}}(e);return new Yt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Yt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Yt.EMPTY_BYTE_STRING=new Yt("");const bD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(t){if(Ge(!!t),typeof t=="string"){let e=0;const n=bD.exec(t);if(Ge(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(t.seconds),nanos:bt(t.nanos)}}function bt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jo(t){return typeof t=="string"?Yt.fromBase64String(t):Yt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function i_(t){const e=t.mapValue.fields.__previous_value__;return Of(e)?i_(e):e}function pc(t){const e=Xs(t.mapValue.fields.__local_write_time__.timestampValue);return new jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class mc{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new mc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Of(t)?4:AD(t)?9007199254740991:SD(t)?10:11:_e()}function Ii(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pc(t).isEqual(pc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xs(i.timestampValue),a=Xs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Jo(i.bytesValue).isEqual(Jo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return bt(i.geoPointValue.latitude)===bt(s.geoPointValue.latitude)&&bt(i.geoPointValue.longitude)===bt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bt(i.integerValue)===bt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bt(i.doubleValue),a=bt(s.doubleValue);return o===a?Gh(o)===Gh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(l0(o)!==l0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ii(o[l],a[l])))return!1;return!0}(t,e);default:return _e()}}function gc(t,e){return(t.values||[]).find(n=>Ii(n,e))!==void 0}function hl(t,e){if(t===e)return 0;const n=Yo(t),r=Yo(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=bt(s.integerValue||s.doubleValue),l=bt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return c0(t.timestampValue,e.timestampValue);case 4:return c0(pc(t),pc(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Jo(s),l=Jo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const d=Fe(a[c],l[c]);if(d!==0)return d}return Fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Fe(bt(s.latitude),bt(o.latitude));return a!==0?a:Fe(bt(s.longitude),bt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return d0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,d;const f=s.fields||{},g=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,S=(l=g.value)===null||l===void 0?void 0:l.arrayValue,x=Fe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((d=S==null?void 0:S.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:d0(y,S)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Fd.mapValue&&o===Fd.mapValue)return 0;if(s===Fd.mapValue)return 1;if(o===Fd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},d=Object.keys(c);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const g=Fe(l[f],d[f]);if(g!==0)return g;const y=hl(a[l[f]],c[d[f]]);if(y!==0)return y}return Fe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw _e()}}function c0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Xs(t),r=Xs(e),i=Fe(n.seconds,r.seconds);return i!==0?i:Fe(n.nanos,r.nanos)}function d0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=hl(n[i],r[i]);if(s)return s}return Fe(n.length,r.length)}function fl(t){return Tg(t)}function Tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Tg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Tg(n.fields[o])}`;return i+"}"}(t.mapValue):_e()}function Qh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bg(t){return!!t&&"integerValue"in t}function s_(t){return!!t&&"arrayValue"in t}function h0(t){return!!t&&"nullValue"in t}function f0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function dh(t){return!!t&&"mapValue"in t}function SD(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Lu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function AD(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.value=e}static empty(){return new _r({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lu(n)}setAll(e){let n=Kt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Lu(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];dh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Rl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new _r(Lu(this.value))}}function _S(t){const e=[];return Rl(t.fields,(n,r)=>{const i=new Kt([n]);if(dh(r)){const s=_S(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new an(e,0,Ee.min(),Ee.min(),Ee.min(),_r.empty(),0)}static newFoundDocument(e,n,r,i){return new an(e,1,n,Ee.min(),r,i,0)}static newNoDocument(e,n){return new an(e,2,n,Ee.min(),Ee.min(),_r.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,Ee.min(),Ee.min(),_r.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.position=e,this.inclusive=n}}function p0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=hl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function m0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,n="asc"){this.field=e,this.dir=n}}function kD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{}class xt extends yS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new CD(e,n,r):n==="array-contains"?new ND(e,r):n==="in"?new OD(e,r):n==="not-in"?new DD(e,r):n==="array-contains-any"?new jD(e,r):new xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new RD(e,r):new PD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hl(n,this.value)):n!==null&&Yo(this.value)===Yo(n)&&this.matchesComparison(hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends yS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zr(e,n)}matches(e){return wS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function wS(t){return t.op==="and"}function ES(t){return xD(t)&&wS(t)}function xD(t){for(const e of t.filters)if(e instanceof Zr)return!1;return!0}function Ig(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+fl(t.value);if(ES(t))return t.filters.map(e=>Ig(e)).join(",");{const e=t.filters.map(n=>Ig(n)).join(",");return`${t.op}(${e})`}}function TS(t,e){return t instanceof xt?function(r,i){return i instanceof xt&&r.op===i.op&&r.field.isEqual(i.field)&&Ii(r.value,i.value)}(t,e):t instanceof Zr?function(r,i){return i instanceof Zr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&TS(o,i.filters[a]),!0):!1}(t,e):void _e()}function bS(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${fl(n.value)}`}(t):t instanceof Zr?function(n){return n.op.toString()+" {"+n.getFilters().map(bS).join(" ,")+"}"}(t):"Filter"}class CD extends xt{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class RD extends xt{constructor(e,n){super(e,"in",n),this.keys=IS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class PD extends xt{constructor(e,n){super(e,"not-in",n),this.keys=IS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function IS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class ND extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return s_(n)&&gc(n.arrayValue,this.value)}}class OD extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gc(this.value.arrayValue,n)}}class DD extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!gc(this.value.arrayValue,n)}}class jD extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!s_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function g0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new LD(t,e,n,r,i,s,o)}function o_(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ig(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fl(r)).join(",")),e.ue=n}return e.ue}function a_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m0(t.startAt,e.startAt)&&m0(t.endAt,e.endAt)}function Sg(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function MD(t,e,n,r,i,s,o,a){return new ua(t,e,n,r,i,s,o,a)}function l_(t){return new ua(t)}function v0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function u_(t){return t.collectionGroup!==null}function tl(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qt(Kt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new vc(s,r))}),n.has(Kt.keyField().canonicalString())||e.ce.push(new vc(Kt.keyField(),r))}return e.ce}function yi(t){const e=ye(t);return e.le||(e.le=SS(e,tl(t))),e.le}function VD(t){const e=ye(t);return e.he||(e.he=SS(e,t.explicitOrderBy)),e.he}function SS(t,e){if(t.limitType==="F")return g0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new vc(i.field,s)});const n=t.endAt?new pl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pl(t.startAt.position,t.startAt.inclusive):null;return g0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ag(t,e){const n=t.filters.concat([e]);return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Jh(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return a_(yi(t),yi(e))&&t.limitType===e.limitType}function AS(t){return`${o_(yi(t))}|lt:${t.limitType}`}function xa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>bS(i)).join(", ")}]`),Nf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fl(i)).join(",")),`Target(${r})`}(yi(t))}; limitType=${t.limitType})`}function jf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of tl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=p0(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,tl(r),i)||r.endAt&&!function(o,a,l){const c=p0(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,tl(r),i))}(t,e)}function FD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kS(t){return(e,n)=>{let r=!1;for(const i of tl(t)){const s=$D(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function $D(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?hl(l,c):_e()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return gS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD=new _t(fe.comparator);function ts(){return UD}const xS=new _t(fe.comparator);function Eu(...t){let e=xS;for(const n of t)e=e.insert(n.key,n);return e}function CS(t){let e=xS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Do(){return Mu()}function RS(){return Mu()}function Mu(){return new Pl(t=>t.toString(),(t,e)=>t.isEqual(e))}const BD=new _t(fe.comparator),zD=new Qt(fe.comparator);function Pe(...t){let e=zD;for(const n of t)e=e.add(n);return e}const qD=new Qt(Fe);function HD(){return qD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gh(e)?"-0":e}}function PS(t){return{integerValue:""+t}}function WD(t,e){return ED(e)?PS(e):c_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this._=void 0}}function KD(t,e,n){return t instanceof Yh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Of(s)&&(s=i_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof _c?OS(t,e):t instanceof yc?DS(t,e):function(i,s){const o=NS(i,s),a=_0(o)+_0(i.Pe);return bg(o)&&bg(i.Pe)?PS(a):c_(i.serializer,a)}(t,e)}function GD(t,e,n){return t instanceof _c?OS(t,e):t instanceof yc?DS(t,e):n}function NS(t,e){return t instanceof Xh?function(r){return bg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Yh extends Lf{}class _c extends Lf{constructor(e){super(),this.elements=e}}function OS(t,e){const n=jS(e);for(const r of t.elements)n.some(i=>Ii(i,r))||n.push(r);return{arrayValue:{values:n}}}class yc extends Lf{constructor(e){super(),this.elements=e}}function DS(t,e){let n=jS(e);for(const r of t.elements)n=n.filter(i=>!Ii(i,r));return{arrayValue:{values:n}}}class Xh extends Lf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function _0(t){return bt(t.integerValue||t.doubleValue)}function jS(t){return s_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function QD(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof _c&&i instanceof _c||r instanceof yc&&i instanceof yc?dl(r.elements,i.elements,Ii):r instanceof Xh&&i instanceof Xh?Ii(r.Pe,i.Pe):r instanceof Yh&&i instanceof Yh}(t.transform,e.transform)}class JD{constructor(e,n){this.version=e,this.transformResults=n}}class wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mf{}function LS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new VS(t.key,wi.none()):new Lc(t.key,t.data,wi.none());{const n=t.data,r=_r.empty();let i=new Qt(Kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ca(t.key,r,new Kr(i.toArray()),wi.none())}}function YD(t,e,n){t instanceof Lc?function(i,s,o){const a=i.value.clone(),l=w0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ca?function(i,s,o){if(!hh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=w0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(MS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Vu(t,e,n,r){return t instanceof Lc?function(s,o,a,l){if(!hh(s.precondition,o))return a;const c=s.value.clone(),d=E0(s.fieldTransforms,l,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ca?function(s,o,a,l){if(!hh(s.precondition,o))return a;const c=E0(s.fieldTransforms,l,o),d=o.data;return d.setAll(MS(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return hh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function XD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=NS(r.transform,i||null);s!=null&&(n===null&&(n=_r.empty()),n.set(r.field,s))}return n||null}function y0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dl(r,i,(s,o)=>QD(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lc extends Mf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ca extends Mf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function MS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function w0(t,e,n){const r=new Map;Ge(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,GD(o,a,n[i]))}return r}function E0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,KD(s,o,e))}return r}class VS extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZD extends Mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&YD(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=LS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(n,r)=>y0(n,r))&&dl(this.baseMutations,e.baseMutations,(n,r)=>y0(n,r))}}class d_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ge(e.mutations.length===r.length);let i=function(){return BD}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new d_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var St,Le;function ij(t){switch(t){default:return _e();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function FS(t){if(t===void 0)return es("GRPC error has no .code"),K.UNKNOWN;switch(t){case St.OK:return K.OK;case St.CANCELLED:return K.CANCELLED;case St.UNKNOWN:return K.UNKNOWN;case St.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case St.INTERNAL:return K.INTERNAL;case St.UNAVAILABLE:return K.UNAVAILABLE;case St.UNAUTHENTICATED:return K.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case St.NOT_FOUND:return K.NOT_FOUND;case St.ALREADY_EXISTS:return K.ALREADY_EXISTS;case St.PERMISSION_DENIED:return K.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case St.ABORTED:return K.ABORTED;case St.OUT_OF_RANGE:return K.OUT_OF_RANGE;case St.UNIMPLEMENTED:return K.UNIMPLEMENTED;case St.DATA_LOSS:return K.DATA_LOSS;default:return _e()}}(Le=St||(St={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=new $o([4294967295,4294967295],0);function T0(t){const e=sj().encode(t),n=new aS;return n.update(e),new Uint8Array(n.digest())}function b0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $o([n,r],0),new $o([i,s],0)]}class h_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Tu(`Invalid padding: ${n}`);if(r<0)throw new Tu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$o.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($o.fromNumber(r)));return i.compare(oj)===1&&(i=new $o([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=T0(e),[r,i]=b0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new h_(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=T0(e),[r,i]=b0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Mc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vf(Ee.min(),i,new _t(Fe),ts(),Pe())}}class Mc{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Mc(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class $S{constructor(e,n){this.targetId=e,this.me=n}}class US{constructor(e,n,r=Yt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class I0{constructor(){this.fe=0,this.ge=A0(),this.pe=Yt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),r=Pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:_e()}}),new Mc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=A0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aj{constructor(e){this.Le=e,this.Be=new Map,this.ke=ts(),this.qe=S0(),this.Qe=new _t(Fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Sg(s))if(r===0){const o=new fe(s.path);this.Ue(n,o,an.newNoDocument(o,Ee.min()))}else Ge(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Jo(r).toUint8Array()}catch(l){if(l instanceof vS)return cl("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new h_(o,i,s)}catch(l){return cl(l instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Sg(a.target)){const l=new fe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,an.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Je(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Vf(e,n,this.Qe,this.ke,r);return this.ke=ts(),this.qe=S0(),this.Qe=new _t(Fe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new I0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Qt(Fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new I0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function S0(){return new _t(fe.comparator)}function A0(){return new _t(fe.comparator)}const lj={asc:"ASCENDING",desc:"DESCENDING"},uj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},cj={and:"AND",or:"OR"};class dj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function kg(t,e){return t.useProto3Json||Nf(e)?e:{value:e}}function Zh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function BS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hj(t,e){return Zh(t,e.toTimestamp())}function Ei(t){return Ge(!!t),Ee.fromTimestamp(function(n){const r=Xs(n);return new jt(r.seconds,r.nanos)}(t))}function f_(t,e){return xg(t,e).canonicalString()}function xg(t,e){const n=function(i){return new rt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zS(t){const e=rt.fromString(t);return Ge(QS(e)),e}function Cg(t,e){return f_(t.databaseId,e.path)}function tm(t,e){const n=zS(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(HS(n))}function qS(t,e){return f_(t.databaseId,e)}function fj(t){const e=zS(t);return e.length===4?rt.emptyPath():HS(e)}function Rg(t){return new rt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HS(t){return Ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function k0(t,e,n){return{name:Cg(t,e),fields:n.value.mapValue.fields}}function pj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Ge(d===void 0||typeof d=="string"),Yt.fromBase64String(d||"")):(Ge(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Yt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?K.UNKNOWN:FS(c.code);return new ne(d,c.message||"")}(o);n=new US(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=tm(t,r.document.name),s=Ei(r.document.updateTime),o=r.document.createTime?Ei(r.document.createTime):Ee.min(),a=new _r({mapValue:{fields:r.document.fields}}),l=an.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new fh(c,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=tm(t,r.document),s=r.readTime?Ei(r.readTime):Ee.min(),o=an.newNoDocument(i,s),a=r.removedTargetIds||[];n=new fh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=tm(t,r.document),s=r.removedTargetIds||[];n=new fh([],s,i,null)}else{if(!("filter"in e))return _e();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new rj(i,s),a=r.targetId;n=new $S(a,o)}}return n}function mj(t,e){let n;if(e instanceof Lc)n={update:k0(t,e.key,e.value)};else if(e instanceof VS)n={delete:Cg(t,e.key)};else if(e instanceof ca)n={update:k0(t,e.key,e.data),updateMask:Ij(e.fieldMask)};else{if(!(e instanceof ZD))return _e();n={verify:Cg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Yh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof _c)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw _e()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:hj(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:_e()}(t,e.precondition)),n}function gj(t,e){return t&&t.length>0?(Ge(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ei(i.updateTime):Ei(s);return o.isEqual(Ee.min())&&(o=Ei(s)),new JD(o,i.transformResults||[])}(n,e))):[]}function vj(t,e){return{documents:[qS(t,e.path)]}}function WS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=qS(t,i);const s=function(c){if(c.length!==0)return GS(Zr.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(g){return{field:Os(g.field),direction:Ej(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=kg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:i}}function _j(t,e,n,r){const{_t:i,parent:s}=WS(t,e),o={},a=[];let l=0;return n.forEach(c=>{const d="aggregate_"+l++;o[d]=c.alias,c.aggregateType==="count"?a.push({alias:d,count:{}}):c.aggregateType==="avg"?a.push({alias:d,avg:{field:Os(c.fieldPath)}}):c.aggregateType==="sum"&&a.push({alias:d,sum:{field:Os(c.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ut:o,parent:s}}function yj(t){let e=fj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ge(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const g=KS(f);return g instanceof Zr&&ES(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(S){return new vc(Ca(S.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Nf(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(f){const g=!!f.before,y=f.values||[];return new pl(y,g)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const g=!f.before,y=f.values||[];return new pl(y,g)}(n.endAt)),MD(e,i,o,s,a,"F",l,c)}function wj(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function KS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ca(n.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ca(n.unaryFilter.field);return xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ca(n.unaryFilter.field);return xt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ca(n.unaryFilter.field);return xt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):t.fieldFilter!==void 0?function(n){return xt.create(Ca(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zr.create(n.compositeFilter.filters.map(r=>KS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(t):_e()}function Ej(t){return lj[t]}function Tj(t){return uj[t]}function bj(t){return cj[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Ca(t){return Kt.fromServerFormat(t.fieldPath)}function GS(t){return t instanceof xt?function(n){if(n.op==="=="){if(f0(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(h0(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(f0(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(h0(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:Tj(n.op),value:n.value}}}(t):t instanceof Zr?function(n){const r=n.getFilters().map(i=>GS(i));return r.length===1?r[0]:{compositeFilter:{op:bj(n.op),filters:r}}}(t):_e()}function Ij(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function QS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,r,i,s=Ee.min(),o=Ee.min(),a=Yt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.ct=e}}function Aj(t){const e=yj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Jh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.un=new xj}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Ys.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class xj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qt(rt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qt(rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ml(0)}static kn(){return new ml(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(){this.changes=new Pl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Vu(r.mutation,i,Kr.empty(),jt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const i=Do();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Eu();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Do();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ts();const o=Mu(),a=function(){return Mu()}();return n.forEach((l,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ca)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Vu(d.mutation,c,d.mutation.getFieldMask(),jt.now())):o.set(c.key,Kr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new Rj(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Mu();let i=new _t((o,a)=>o-a),s=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let d=r.get(l)||Kr.empty();d=a.applyToLocalView(c,d),r.set(l,d);const f=(i.get(a.batchId)||Pe()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,d=l.value,f=RS();d.forEach(g=>{if(!s.has(g)){const y=LS(n.get(g),r.get(g));y!==null&&f.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):u_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Q.resolve(Do());let a=-1,l=s;return o.next(c=>Q.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,Pe())).next(d=>({batchId:a,changes:CS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=Eu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Eu();return this.indexManager.getCollectionParents(e,s).next(a=>Q.forEach(a,l=>{const c=function(f,g){return new ua(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,an.newInvalidDocument(d)))});let a=Eu();return o.forEach((l,c)=>{const d=s.get(l);d!==void 0&&Vu(d.mutation,c,Kr.empty(),jt.now()),jf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ei(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:Aj(i.bundledQuery),readTime:Ei(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.overlays=new _t(fe.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Do();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=Do(),s=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new _t((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Do(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Do(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return Q.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tj(n,r));let s=this.Ir.get(n);s===void 0&&(s=Pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.sessionToken=Yt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(){this.Tr=new Qt($t.Er),this.dr=new Qt($t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $t(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $t(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fe(new rt([])),r=new $t(n,e),i=new $t(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fe(new rt([])),r=new $t(n,e),i=new $t(n,e+1);let s=Pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new $t(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $t{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fe.comparator(e.key,n.key)||Fe(e.wr,n.wr)}static Ar(e,n){return Fe(e.wr,n.wr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Qt($t.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new ej(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new $t(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $t(n,0),i=new $t(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qt(Fe);return n.forEach(i=>{const s=new $t(i,0),o=new $t(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;fe.isDocumentKey(s)||(s=s.child(""));const o=new $t(new fe(s),0);let a=new Qt(Fe);return this.br.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.wr)),!0)},o),Q.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ge(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Q.forEach(n.mutations,i=>{const s=new $t(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $t(n,0),i=this.br.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(e){this.Mr=e,this.docs=function(){return new _t(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let r=ts();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():an.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ts();const o=n.path,a=new fe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||vD(gD(d),r)<=0||(i.has(d.key)||jf(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){_e()}Or(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Mj(this)}getSize(e){return Q.resolve(this.size)}}class Mj extends Cj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.persistence=e,this.Nr=new Pl(n=>o_(n),a_),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new p_,this.targetCount=0,this.kr=ml.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ml(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new r_(0),this.Kr=!1,this.Kr=!0,this.$r=new Dj,this.referenceDelegate=e(this),this.Ur=new Vj(this),this.indexManager=new kj,this.remoteDocumentCache=function(i){return new Lj(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Sj(n),this.Gr=new Nj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Oj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new jj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const i=new $j(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class $j extends yD{constructor(e){super(),this.currentSequenceNumber=e}}class m_{constructor(e){this.persistence=e,this.Jr=new p_,this.Yr=null}static Zr(e){return new m_(e)}get Xr(){if(this.Yr)return this.Yr;throw _e()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{const i=fe.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Pe(),i=Pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new g_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xR()?8:wD(cn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Uj;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(uu()<=De.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",xa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(uu()<=De.DEBUG&&le("QueryEngine","Query:",xa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(uu()<=De.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",xa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(n))):Q.resolve())}Yi(e,n){if(v0(n))return Q.resolve(null);let r=yi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Jh(n,null,"F"),r=yi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ts(n,a);return this.ns(n,c,o,l.readTime)?this.Yi(e,Jh(n,null,"F")):this.rs(e,c,n,l)}))})))}Zi(e,n,r,i){return v0(n)||i.isEqual(Ee.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Q.resolve(null):(uu()<=De.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xa(n)),this.rs(e,o,n,mD(i,-1)).next(a=>a))})}ts(e,n){let r=new Qt(kS(e));return n.forEach((i,s)=>{jf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return uu()<=De.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",xa(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ys.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new _t(Fe),this._s=new Pl(s=>o_(s),a_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function qj(t,e,n,r){return new zj(t,e,n,r)}async function JS(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Pe();for(const c of i){o.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function Hj(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,d){const f=c.batch,g=f.keys();let y=Q.resolve();return g.forEach(S=>{y=y.next(()=>d.getEntry(l,S)).next(x=>{const N=c.docVersions.get(S);Ge(N!==null),x.version.compareTo(N)<0&&(f.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function YS(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Wj(t,e){const n=ye(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,f)=>{const g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Yt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(x,N,A){return x.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(s,y))});let l=ts(),c=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Kj(s,o,e.documentUpdates).next(d=>{l=d.Ps,c=d.Is})),!r.isEqual(Ee.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return Q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.os=i,s))}function Kj(t,e,n){let r=Pe(),i=Pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ts();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function Gj(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qj(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ms(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Pg(t,e,n){const r=ye(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!jc(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function x0(t,e,n){const r=ye(t);let i=Ee.min(),s=Pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,d){const f=ye(l),g=f._s.get(d);return g!==void 0?Q.resolve(f.os.get(g)):f.Ur.getTargetData(c,d)}(r,o,yi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Ee.min(),n?s:Pe())).next(a=>(Jj(r,FD(e),a),{documents:a,Ts:s})))}function Jj(t,e,n){let r=t.us.get(e)||Ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class C0{constructor(){this.activeTargetIds=HD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yj{constructor(){this.so=new C0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new C0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d=null;function nm(){return $d===null?$d=function(){return 268435456+Math.round(2147483648*Math.random())}():$d++,"0x"+$d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nn="WebChannelConnection";class tL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=nm(),l=this.xo(n,r.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,s,o),this.No(n,l,c,i).then(d=>(le("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw cl("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=Zj[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=nm();return new Promise((o,a)=>{const l=new lS;l.setWithCredentials(!0),l.listenOnce(cS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ch.NO_ERROR:const d=l.getResponseJson();le(nn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case ch.TIMEOUT:le(nn,`RPC '${e}' ${s} timed out`),a(new ne(K.DEADLINE_EXCEEDED,"Request time out"));break;case ch.HTTP_ERROR:const f=l.getStatus();if(le(nn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const S=function(N){const A=N.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(A)>=0?A:K.UNKNOWN}(y.status);a(new ne(S,y.message))}else a(new ne(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(K.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{le(nn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);le(nn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}Bo(e,n,r){const i=nm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fS(),a=hS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.xmlHttpFactory=new uS({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");le(nn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=o.createWebChannel(d,l);let g=!1,y=!1;const S=new eL({Io:N=>{y?le(nn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(le(nn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),le(nn,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},To:()=>f.close()}),x=(N,A,E)=>{N.listen(A,b=>{try{E(b)}catch(D){setTimeout(()=>{throw D},0)}})};return x(f,wu.EventType.OPEN,()=>{y||(le(nn,`RPC '${e}' stream ${i} transport opened.`),S.yo())}),x(f,wu.EventType.CLOSE,()=>{y||(y=!0,le(nn,`RPC '${e}' stream ${i} transport closed`),S.So())}),x(f,wu.EventType.ERROR,N=>{y||(y=!0,cl(nn,`RPC '${e}' stream ${i} transport errored:`,N),S.So(new ne(K.UNAVAILABLE,"The operation could not be completed")))}),x(f,wu.EventType.MESSAGE,N=>{var A;if(!y){const E=N.data[0];Ge(!!E);const b=E,D=b.error||((A=b[0])===null||A===void 0?void 0:A.error);if(D){le(nn,`RPC '${e}' stream ${i} received error:`,D);const B=D.status;let R=function(I){const C=St[I];if(C!==void 0)return FS(C)}(B),k=D.message;R===void 0&&(R=K.INTERNAL,k="Unknown error status: "+B+" with message "+D.message),y=!0,S.So(new ne(R,k)),f.close()}else le(nn,`RPC '${e}' stream ${i} received:`,E),S.bo(E)}}),x(a,dS.STAT_EVENT,N=>{N.stat===Eg.PROXY?le(nn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Eg.NOPROXY&&le(nn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t){return new dj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new XS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(es(n.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ne(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class nL extends ZS{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=pj(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?Ei(o.readTime):Ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Rg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Sg(l)?{documents:vj(s,l)}:{query:WS(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BS(s,o.resumeToken);const c=kg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ee.min())>0){a.readTime=Zh(s,o.snapshotVersion.toTimestamp());const c=kg(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=wj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Rg(this.serializer),n.removeTarget=e,this.a_(n)}}class rL extends ZS{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=gj(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Rg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,xg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(K.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,xg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(K.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class sL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(es(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{da(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=ye(l);c.L_.add(4),await Vc(c),c.q_.set("Unknown"),c.L_.delete(4),await $f(c)}(this))})}),this.q_=new sL(r,i)}}async function $f(t){if(da(t))for(const e of t.B_)await e(!0)}async function Vc(t){for(const e of t.B_)await e(!1)}function eA(t,e){const n=ye(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),w_(n)?y_(n):Nl(n).r_()&&__(n,e))}function v_(t,e){const n=ye(t),r=Nl(n);n.N_.delete(e),r.r_()&&tA(n,e),n.N_.size===0&&(r.r_()?r.o_():da(n)&&n.q_.set("Unknown"))}function __(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nl(t).A_(e)}function tA(t,e){t.Q_.xe(e),Nl(t).R_(e)}function y_(t){t.Q_=new aj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Nl(t).start(),t.q_.v_()}function w_(t){return da(t)&&!Nl(t).n_()&&t.N_.size>0}function da(t){return ye(t).L_.size===0}function nA(t){t.Q_=void 0}async function aL(t){t.q_.set("Online")}async function lL(t){t.N_.forEach((e,n)=>{__(t,e)})}async function uL(t,e){nA(t),w_(t)?(t.q_.M_(e),y_(t)):t.q_.set("Unknown")}async function cL(t,e,n){if(t.q_.set("Online"),e instanceof US&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ef(t,r)}else if(e instanceof fh?t.Q_.Ke(e):e instanceof $S?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const r=await YS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(c);d&&s.N_.set(c,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(Yt.EMPTY_BYTE_STRING,d.snapshotVersion)),tA(s,l);const f=new Ms(d.target,l,c,d.sequenceNumber);__(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){le("RemoteStore","Failed to raise snapshot:",r),await ef(t,r)}}async function ef(t,e,n){if(!jc(e))throw e;t.L_.add(1),await Vc(t),t.q_.set("Offline"),n||(n=()=>YS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await $f(t)})}function rA(t,e){return e().catch(n=>ef(t,n,e))}async function Uf(t){const e=ye(t),n=Zs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;dL(e);)try{const i=await Gj(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,hL(e,i)}catch(i){await ef(e,i)}iA(e)&&sA(e)}function dL(t){return da(t)&&t.O_.length<10}function hL(t,e){t.O_.push(e);const n=Zs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function iA(t){return da(t)&&!Zs(t).n_()&&t.O_.length>0}function sA(t){Zs(t).start()}async function fL(t){Zs(t).p_()}async function pL(t){const e=Zs(t);for(const n of t.O_)e.m_(n.mutations)}async function mL(t,e,n){const r=t.O_.shift(),i=d_.from(r,e,n);await rA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Uf(t)}async function gL(t,e){e&&Zs(t).V_&&await async function(r,i){if(function(o){return ij(o)&&o!==K.ABORTED}(i.code)){const s=r.O_.shift();Zs(r).s_(),await rA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Uf(r)}}(t,e),iA(t)&&sA(t)}async function P0(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const r=da(n);n.L_.add(3),await Vc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await $f(n)}async function vL(t,e){const n=ye(t);e?(n.L_.delete(2),await $f(n)):e||(n.L_.add(2),await Vc(n),n.q_.set("Unknown"))}function Nl(t){return t.K_||(t.K_=function(n,r,i){const s=ye(n);return s.w_(),new nL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:aL.bind(null,t),Ro:lL.bind(null,t),mo:uL.bind(null,t),d_:cL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),w_(t)?y_(t):t.q_.set("Unknown")):(await t.K_.stop(),nA(t))})),t.K_}function Zs(t){return t.U_||(t.U_=function(n,r,i){const s=ye(n);return s.w_(),new rL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fL.bind(null,t),mo:gL.bind(null,t),f_:pL.bind(null,t),g_:mL.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Uf(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new _i,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new E_(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function T_(t,e){if(es("AsyncQueue",`${e}: ${t}`),jc(t))return new ne(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Eu(),this.sortedSet=new _t(this.comparator)}static emptySet(e){return new nl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.W_=new _t(fe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):_e():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class gl{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new gl(e,n,nl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yL{constructor(){this.queries=O0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ye(n),s=i.queries;i.queries=O0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ne(K.ABORTED,"Firestore shutting down"))}}function O0(){return new Pl(t=>AS(t),Df)}async function oA(t,e){const n=ye(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _L,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=T_(o,`Initialization of query '${xa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&b_(n)}async function aA(t,e){const n=ye(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wL(t,e){const n=ye(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&b_(n)}function EL(t,e,n){const r=ye(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function b_(t){t.Y_.forEach(e=>{e.next()})}var Ng,D0;(D0=Ng||(Ng={})).ea="default",D0.Cache="cache";class lA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ng.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.key=e}}class cA{constructor(e){this.key=e}}class TL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=kS(e),this.Ra=new nl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new N0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const g=i.get(d),y=jf(this.query,f)?f:null,S=!!g&&this.mutatedKeys.has(g.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let N=!1;g&&y?g.data.isEqual(y.data)?S!==x&&(r.track({type:3,doc:y}),N=!0):this.ga(g,y)||(r.track({type:2,doc:y}),N=!0,(l&&this.Aa(y,l)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(l||c)&&(a=!0)),N&&(y?(o=o.add(y),s=x?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(y,S){const x=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return x(y)-x(S)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,c=l!==this.Ea;return this.Ea=l,o.length!==0||c?{snapshot:new gl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new N0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new cA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new uA(r))}),n}ba(e){this.Ta=e.Ts,this.da=Pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return gl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class bL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class IL{constructor(e){this.key=e,this.va=!1}}class SL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Pl(a=>AS(a),Df),this.Ma=new Map,this.xa=new Set,this.Oa=new _t(fe.comparator),this.Na=new Map,this.La=new p_,this.Ba={},this.ka=new Map,this.qa=ml.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AL(t,e,n=!0){const r=gA(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await dA(r,e,n,!0),i}async function kL(t,e){const n=gA(t);await dA(n,e,!0,!1)}async function dA(t,e,n,r){const i=await Qj(t.localStore,yi(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await xL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&eA(t.remoteStore,i),a}async function xL(t,e,n,r,i){t.Ka=(f,g,y)=>async function(x,N,A,E){let b=N.view.ma(A);b.ns&&(b=await x0(x.localStore,N.query,!1).then(({documents:k})=>N.view.ma(k,b)));const D=E&&E.targetChanges.get(N.targetId),B=E&&E.targetMismatches.get(N.targetId)!=null,R=N.view.applyChanges(b,x.isPrimaryClient,D,B);return L0(x,N.targetId,R.wa),R.snapshot}(t,f,g,y);const s=await x0(t.localStore,e,!0),o=new TL(e,s.Ts),a=o.ma(s.documents),l=Mc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);L0(t,n,c.wa);const d=new bL(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function CL(t,e,n){const r=ye(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Df(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Pg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&v_(r.remoteStore,i.targetId),Og(r,i.targetId)}).catch(Dc)):(Og(r,i.targetId),await Pg(r.localStore,i.targetId,!0))}async function RL(t,e){const n=ye(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),v_(n.remoteStore,r.targetId))}async function PL(t,e,n){const r=VL(t);try{const i=await function(o,a){const l=ye(o),c=jt.now(),d=a.reduce((y,S)=>y.add(S.key),Pe());let f,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=ts(),x=Pe();return l.cs.getEntries(y,d).next(N=>{S=N,S.forEach((A,E)=>{E.isValidDocument()||(x=x.add(A))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,S)).next(N=>{f=N;const A=[];for(const E of a){const b=XD(E,f.get(E.key).overlayedDocument);b!=null&&A.push(new ca(E.key,b,_S(b.value.mapValue),wi.exists(!0)))}return l.mutationQueue.addMutationBatch(y,c,A,a)}).next(N=>{g=N;const A=N.applyToLocalDocumentSet(f,x);return l.documentOverlayCache.saveOverlays(y,N.batchId,A)})}).then(()=>({batchId:g.batchId,changes:CS(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Ba[o.currentUser.toKey()];c||(c=new _t(Fe)),c=c.insert(a,l),o.Ba[o.currentUser.toKey()]=c}(r,i.batchId,n),await Fc(r,i.changes),await Uf(r.remoteStore)}catch(i){const s=T_(i,"Failed to persist write");n.reject(s)}}async function hA(t,e){const n=ye(t);try{const r=await Wj(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ge(o.va):i.removedDocuments.size>0&&(Ge(o.va),o.va=!1))}),await Fc(n,r,e)}catch(r){await Dc(r)}}function j0(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let c=!1;l.queries.forEach((d,f)=>{for(const g of f.j_)g.Z_(a)&&(c=!0)}),c&&b_(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function NL(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new _t(fe.comparator);o=o.insert(s,an.newNoDocument(s,Ee.min()));const a=Pe().add(s),l=new Vf(Ee.min(),new Map,new _t(Fe),o,a);await hA(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),I_(r)}else await Pg(r.localStore,e,!1).then(()=>Og(r,e,n)).catch(Dc)}async function OL(t,e){const n=ye(t),r=e.batch.batchId;try{const i=await Hj(n.localStore,e);pA(n,r,null),fA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fc(n,i)}catch(i){await Dc(i)}}async function DL(t,e,n){const r=ye(t);try{const i=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ge(f!==null),d=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>l.localDocuments.getDocuments(c,d))})}(r.localStore,e);pA(r,e,n),fA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fc(r,i)}catch(i){await Dc(i)}}function fA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function pA(t,e,n){const r=ye(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Og(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||mA(t,r)})}function mA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(v_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),I_(t))}function L0(t,e,n){for(const r of n)r instanceof uA?(t.La.addReference(r.key,e),jL(t,r)):r instanceof cA?(le("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||mA(t,r.key)):_e()}function jL(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(r),I_(t))}function I_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fe(rt.fromString(e)),r=t.qa.next();t.Na.set(r,new IL(n)),t.Oa=t.Oa.insert(n,r),eA(t.remoteStore,new Ms(yi(l_(n.path)),r,"TargetPurposeLimboResolution",r_.oe))}}async function Fc(t,e,n){const r=ye(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=g_.Wi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,c){const d=ye(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Q.forEach(c,g=>Q.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>Q.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!jc(f))throw f;le("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const g=f.targetId;if(!f.fromCache){const y=d.os.get(g),S=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(S);d.os=d.os.insert(g,x)}}}(r.localStore,s))}async function LL(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const r=await JS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ne(K.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fc(n,r.hs)}}function ML(t,e){const n=ye(t),r=n.Na.get(e);if(r&&r.va)return Pe().add(r.key);{let i=Pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function gA(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ML.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NL.bind(null,e),e.Ca.d_=wL.bind(null,e.eventManager),e.Ca.$a=EL.bind(null,e.eventManager),e}function VL(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DL.bind(null,e),e}class M0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ff(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return qj(this.persistence,new Bj,e.initialUser,this.serializer)}createPersistence(e){return new Fj(m_.Zr,this.serializer)}createSharedClientState(e){return new Yj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class FL{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>j0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LL.bind(null,this.syncEngine),await vL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yL}()}createDatastore(e){const n=Ff(e.databaseInfo.databaseId),r=function(s){return new tL(s)}(e.databaseInfo);return function(s,o,a,l){return new iL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new oL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>j0(this.syncEngine,n,0),function(){return R0.D()?new R0:new Xj}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,d){const f=new SL(i,s,o,a,l,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ye(i);le("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Vc(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=sn.UNAUTHENTICATED,this.clientId=mS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{le("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(le("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new _i;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=T_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function im(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await JS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function V0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await BL(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>P0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>P0(e.remoteStore,i)),t._onlineComponents=e}function UL(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function BL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await im(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!UL(n))throw n;cl("Error using user provided cache. Falling back to memory cache: "+n),await im(t,new M0)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await im(t,new M0);return t._offlineComponents}async function S_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await V0(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await V0(t,new FL))),t._onlineComponents}function zL(t){return S_(t).then(e=>e.syncEngine)}function qL(t){return S_(t).then(e=>e.datastore)}async function _A(t){const e=await S_(t),n=e.eventManager;return n.onListen=AL.bind(null,e.syncEngine),n.onUnlisten=CL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=RL.bind(null,e.syncEngine),n}function HL(t,e,n={}){const r=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new vA({next:g=>{o.enqueueAndForget(()=>aA(s,f));const y=g.docs.has(a);!y&&g.fromCache?c.reject(new ne(K.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?c.reject(new ne(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new lA(l_(a.path),d,{includeMetadataChanges:!0,_a:!0});return oA(s,f)}(await _A(t),t.asyncQueue,e,n,r)),r.promise}function WL(t,e,n={}){const r=new _i;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const d=new vA({next:g=>{o.enqueueAndForget(()=>aA(s,f)),g.fromCache&&l.source==="server"?c.reject(new ne(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),f=new lA(a,d,{includeMetadataChanges:!0,_a:!0});return oA(s,f)}(await _A(t),t.asyncQueue,e,n,r)),r.promise}function KL(t,e,n){const r=new _i;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await qL(t);r.resolve(async function(o,a,l){var c;const d=ye(o),{request:f,ut:g,parent:y}=_j(d.serializer,VD(a),l);d.connection.Fo||delete f.parent;const S=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,f,1)).filter(N=>!!N.result);Ge(S.length===1);const x=(c=S[0].result)===null||c===void 0?void 0:c.aggregateFields;return Object.keys(x).reduce((N,A)=>(N[g[A]]=x[A],N),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t,e,n){if(!n)throw new ne(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GL(t,e,n,r){if(e===!0&&r===!0)throw new ne(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $0(t){if(!fe.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function U0(t){if(fe.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Bf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bf(t);throw new ne(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new B0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ne(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new B0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oD;switch(r.type){case"firstParty":return new cD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=F0.get(n);r&&(le("ComponentProvider","Removing Datastore"),F0.delete(n),r.terminate())}(this),Promise.resolve()}}function QL(t,e,n,r={}){var i;const s=(t=ns(t,zf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&cl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=sn.MOCK_USER;else{a=bR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ne(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new sn(c)}t._authCredentials=new aD(new pS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class Fn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class Gs extends os{constructor(e,n,r){super(e,n,l_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new fe(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function $c(t,e,...n){if(t=zt(t),wA("collection","path",e),t instanceof zf){const r=rt.fromString(e,...n);return U0(r),new Gs(t,null,r)}{if(!(t instanceof Fn||t instanceof Gs))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return U0(r),new Gs(t.firestore,null,r)}}function ei(t,e,...n){if(t=zt(t),arguments.length===1&&(e=mS.newId()),wA("doc","path",e),t instanceof zf){const r=rt.fromString(e,...n);return $0(r),new Fn(t,null,new fe(r))}{if(!(t instanceof Fn||t instanceof Gs))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(rt.fromString(e,...n));return $0(r),new Fn(t.firestore,t instanceof Gs?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new XS(this,"async_queue_retry"),this.Eu=()=>{const n=rm();n&&le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=rm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=rm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new _i;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!jc(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw es("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=E_.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&_e()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Ol extends zf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new JL}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||EA(this),this._firestoreClient.terminate()}}function YL(t,e){const n=Wv(),r="(default)",i=aa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=ER("firestore");s&&QL(i,...s)}return i}function qf(t){return t._firestoreClient||EA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function EA(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,d){return new ID(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,yA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new $L(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class ZL{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vl(Yt.fromBase64String(e))}catch(n){throw new ne(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vl(Yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=/^__.*__$/;class t2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ca(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lc(e,this.data,n,this.fieldTransforms)}}function bA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class C_{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new C_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return tf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(bA(this.wu)&&e2.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class n2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ff(e)}Nu(e,n,r,i=!1){return new C_({wu:e,methodName:n,Ou:r,path:Kt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hf(t){const e=t._freezeSettings(),n=Ff(t._databaseId);return new n2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function IA(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);xA("Data must be an object, but it was:",o,r);const a=AA(r,o);let l,c;if(s.merge)l=new Kr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const g=r2(e,f,n);if(!o.contains(g))throw new ne(K.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);s2(d,g)||d.push(g)}l=new Kr(d),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new t2(new _r(a),l,c)}function SA(t,e,n,r=!1){return R_(n,t.Nu(r?4:3,e))}function R_(t,e){if(kA(t=zt(t)))return xA("Unsupported field value:",e,t),AA(t,e);if(t instanceof TA)return function(r,i){if(!bA(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=R_(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=zt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WD(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=jt.fromDate(r);return{timestampValue:Zh(i.serializer,s)}}if(r instanceof jt){const s=new jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zh(i.serializer,s)}}if(r instanceof k_)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vl)return{bytesValue:BS(i.serializer,r._byteString)};if(r instanceof Fn){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:f_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof x_)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return c_(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Bf(r)}`)}(t,e)}function AA(t,e){const n={};return gS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rl(t,(r,i)=>{const s=R_(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function kA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof jt||t instanceof k_||t instanceof vl||t instanceof Fn||t instanceof TA||t instanceof x_)}function xA(t,e,n){if(!kA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Bf(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function r2(t,e,n){if((e=zt(e))instanceof A_)return e._internalPath;if(typeof e=="string")return CA(t,e);throw tf("Field path arguments must be of type string or ",t,!1,void 0,n)}const i2=new RegExp("[~\\*/\\[\\]]");function CA(t,e,n){if(e.search(i2)>=0)throw tf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new A_(...e.split("."))._internalPath}catch{throw tf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(K.INVALID_ARGUMENT,a+t+l)}function s2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new o2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(N_("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class o2 extends P_{data(){return super.data()}}function N_(t,e){return typeof e=="string"?CA(t,e):e instanceof A_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O_{}class Wf extends O_{}function l2(t,e,...n){let r=[];e instanceof O_&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof j_).length,a=s.filter(l=>l instanceof D_).length;if(o>1||o>0&&a>0)throw new ne(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class D_ extends Wf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new D_(e,n,r)}_apply(e){const n=this._parse(e);return RA(e._query,n),new os(e.firestore,e.converter,Ag(e._query,n))}_parse(e){const n=Hf(e.firestore);return function(s,o,a,l,c,d,f){let g;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ne(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){q0(f,d);const y=[];for(const S of f)y.push(z0(l,s,S));g={arrayValue:{values:y}}}else g=z0(l,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||q0(f,d),g=SA(a,o,f,d==="in"||d==="not-in");return xt.create(c,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class j_ extends O_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new j_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)RA(o,l),o=Ag(o,l)}(e._query,n),new os(e.firestore,e.converter,Ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class L_ extends Wf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new L_(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vc(s,o)}(e._query,this._field,this._direction);return new os(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ua(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function u2(t,e="asc"){const n=e,r=N_("orderBy",t);return L_._create(r,n)}class M_ extends Wf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new M_(e,n,r)}_apply(e){return new os(e.firestore,e.converter,Jh(e._query,this._limit,this._limitType))}}function c2(t){return M_._create("limit",t,"F")}class V_ extends Wf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new V_(e,n,r)}_apply(e){const n=h2(e,this.type,this._docOrFields,this._inclusive);return new os(e.firestore,e.converter,function(i,s){return new ua(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function d2(...t){return V_._create("startAfter",t,!1)}function h2(t,e,n,r){if(n[0]=zt(n[0]),n[0]instanceof P_)return function(s,o,a,l,c){if(!l)throw new ne(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of tl(s))if(f.field.isKeyField())d.push(Qh(o,l.key));else{const g=l.data.field(f.field);if(Of(g))throw new ne(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const y=f.field.canonicalString();throw new ne(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new pl(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Hf(t.firestore);return function(o,a,l,c,d,f){const g=o.explicitOrderBy;if(d.length>g.length)throw new ne(K.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let S=0;S<d.length;S++){const x=d[S];if(g[S].field.isKeyField()){if(typeof x!="string")throw new ne(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof x}`);if(!u_(o)&&x.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${x}' contains a slash.`);const N=o.path.child(rt.fromString(x));if(!fe.isDocumentKey(N))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const A=new fe(N);y.push(Qh(a,A))}else{const N=SA(l,c,x);y.push(N)}}return new pl(y,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function z0(t,e,n){if(typeof(n=zt(n))=="string"){if(n==="")throw new ne(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u_(e)&&n.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(rt.fromString(n));if(!fe.isDocumentKey(r))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Qh(t,new fe(r))}if(n instanceof Fn)return Qh(t,n._key);throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bf(n)}.`)}function q0(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function RA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class f2{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>bt(o.doubleValue));return new x_(s)}convertGeoPoint(e){return new k_(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=i_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=Xs(e);return new jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=rt.fromString(e);Ge(QS(r));const i=new mc(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||es(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function p2(){return new XL("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class NA extends P_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ph(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(N_("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ph extends NA{data(e={}){return super.data(e)}}class m2{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ph(this._firestore,this._userDataWriter,r.key,r,new bu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new ph(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new ph(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:g2(a.type),doc:l,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function g2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){t=ns(t,Fn);const e=ns(t.firestore,Ol);return HL(qf(e),t._key).then(n=>_2(e,t,n))}class F_ extends f2{constructor(e){super(),this.firestore=e}convertBytes(e){return new vl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,n)}}function OA(t){t=ns(t,os);const e=ns(t.firestore,Ol),n=qf(e),r=new F_(e);return a2(t._query),WL(n,t._query).then(i=>new m2(e,r,t,i))}function v2(t,e,n){t=ns(t,Fn);const r=ns(t.firestore,Ol),i=PA(t.converter,e);return DA(r,[IA(Hf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,wi.none())])}function $_(t,e){const n=ns(t.firestore,Ol),r=ei(t),i=PA(t.converter,e);return DA(n,[IA(Hf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,wi.exists(!1))]).then(()=>r)}function DA(t,e){return function(r,i){const s=new _i;return r.asyncQueue.enqueueAndForget(async()=>PL(await zL(r),i,s)),s.promise}(qf(t),e)}function _2(t,e,n){const r=n.docs.get(e._key),i=new F_(t);return new NA(t,i,e._key,r,new bu(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t){return w2(t,{count:p2()})}function w2(t,e){const n=ns(t.firestore,Ol),r=qf(n),i=TD(e,(s,o)=>new nj(o,s.aggregateType,s._internalFieldPath));return KL(r,t._query,i).then(s=>function(a,l,c){const d=new F_(a);return new ZL(l,d,c)}(n,t,s))}(function(e,n=!0){(function(i){Cl=i})(kl),bi(new Yr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ol(new lD(r.getProvider("auth-internal")),new hD(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ne(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mc(c.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Er(a0,"4.7.1",e),Er(a0,"4.7.1","esm2017")})();const jA="@firebase/installations",U_="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LA=1e4,MA=`w:${U_}`,VA="FIS_v2",E2="https://firebaseinstallations.googleapis.com/v1",T2=60*60*1e3,b2="installations",I2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xo=new oa(b2,I2,S2);function FA(t){return t instanceof ti&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $A({projectId:t}){return`${E2}/projects/${t}/installations`}function UA(t){return{token:t.token,requestStatus:2,expiresIn:k2(t.expiresIn),creationTime:Date.now()}}async function BA(t,e){const r=(await e.json()).error;return Xo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function zA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function A2(t,{refreshToken:e}){const n=zA(t);return n.append("Authorization",x2(e)),n}async function qA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function k2(t){return Number(t.replace("s","000"))}function x2(t){return`${VA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C2({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=$A(t),i=zA(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:VA,appId:t.appId,sdkVersion:MA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await qA(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:UA(c.authToken)}}else throw await BA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2=/^[cdef][\w-]{21}$/,Dg="";function N2(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=O2(t);return P2.test(n)?n:Dg}catch{return Dg}}function O2(t){return R2(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=new Map;function KA(t,e){const n=Kf(t);GA(n,e),D2(n,e)}function GA(t,e){const n=WA.get(t);if(n)for(const r of n)r(e)}function D2(t,e){const n=j2();n&&n.postMessage({key:t,fid:e}),L2()}let jo=null;function j2(){return!jo&&"BroadcastChannel"in self&&(jo=new BroadcastChannel("[Firebase] FID Change"),jo.onmessage=t=>{GA(t.data.key,t.data.fid)}),jo}function L2(){WA.size===0&&jo&&(jo.close(),jo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="firebase-installations-database",V2=1,Zo="firebase-installations-store";let sm=null;function B_(){return sm||(sm=TI(M2,V2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zo)}}})),sm}async function nf(t,e){const n=Kf(t),i=(await B_()).transaction(Zo,"readwrite"),s=i.objectStore(Zo),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&KA(t,e.fid),e}async function QA(t){const e=Kf(t),r=(await B_()).transaction(Zo,"readwrite");await r.objectStore(Zo).delete(e),await r.done}async function Gf(t,e){const n=Kf(t),i=(await B_()).transaction(Zo,"readwrite"),s=i.objectStore(Zo),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&KA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z_(t){let e;const n=await Gf(t.appConfig,r=>{const i=F2(r),s=$2(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Dg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function F2(t){const e=t||{fid:N2(),registrationStatus:0};return JA(e)}function $2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Xo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=U2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:B2(t)}:{installationEntry:e}}async function U2(t,e){try{const n=await C2(t,e);return nf(t.appConfig,n)}catch(n){throw FA(n)&&n.customData.serverCode===409?await QA(t.appConfig):await nf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function B2(t){let e=await H0(t.appConfig);for(;e.registrationStatus===1;)await HA(100),e=await H0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await z_(t);return r||n}return e}function H0(t){return Gf(t,e=>{if(!e)throw Xo.create("installation-not-found");return JA(e)})}function JA(t){return z2(t)?{fid:t.fid,registrationStatus:0}:t}function z2(t){return t.registrationStatus===1&&t.registrationTime+LA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q2({appConfig:t,heartbeatServiceProvider:e},n){const r=H2(t,n),i=A2(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:MA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await qA(()=>fetch(r,a));if(l.ok){const c=await l.json();return UA(c)}else throw await BA("Generate Auth Token",l)}function H2(t,{fid:e}){return`${$A(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q_(t,e=!1){let n;const r=await Gf(t.appConfig,s=>{if(!YA(s))throw Xo.create("not-registered");const o=s.authToken;if(!e&&G2(o))return s;if(o.requestStatus===1)return n=W2(t,e),s;{if(!navigator.onLine)throw Xo.create("app-offline");const a=J2(s);return n=K2(t,a),a}});return n?await n:r.authToken}async function W2(t,e){let n=await W0(t.appConfig);for(;n.authToken.requestStatus===1;)await HA(100),n=await W0(t.appConfig);const r=n.authToken;return r.requestStatus===0?q_(t,e):r}function W0(t){return Gf(t,e=>{if(!YA(e))throw Xo.create("not-registered");const n=e.authToken;return Y2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function K2(t,e){try{const n=await q2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await nf(t.appConfig,r),n}catch(n){if(FA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await QA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await nf(t.appConfig,r)}throw n}}function YA(t){return t!==void 0&&t.registrationStatus===2}function G2(t){return t.requestStatus===2&&!Q2(t)}function Q2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+T2}function J2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Y2(t){return t.requestStatus===1&&t.requestTime+LA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X2(t){const e=t,{installationEntry:n,registrationPromise:r}=await z_(e);return r?r.catch(console.error):q_(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t,e=!1){const n=t;return await eM(n),(await q_(n,e)).token}async function eM(t){const{registrationPromise:e}=await z_(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){if(!t||!t.options)throw om("App Configuration");if(!t.name)throw om("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw om(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function om(t){return Xo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="installations",nM="installations-internal",rM=t=>{const e=t.getProvider("app").getImmediate(),n=tM(e),r=aa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},iM=t=>{const e=t.getProvider("app").getImmediate(),n=aa(e,XA).getImmediate();return{getId:()=>X2(n),getToken:i=>Z2(n,i)}};function sM(){bi(new Yr(XA,rM,"PUBLIC")),bi(new Yr(nM,iM,"PRIVATE"))}sM();Er(jA,U_);Er(jA,U_,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf="analytics",oM="firebase_id",aM="origin",lM=60*1e3,uM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",H_="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=new xf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zn=new oa("analytics","Analytics",cM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){if(!t.startsWith(H_)){const e=Zn.create("invalid-gtag-resource",{gtagURL:t});return $n.warn(e.message),""}return t}function ZA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function hM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function fM(t,e){const n=hM("firebase-js-sdk-policy",{createScriptURL:dM}),r=document.createElement("script"),i=`${H_}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function pM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function mM(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await ZA(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){$n.error(a)}t("config",i,s)}async function gM(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await ZA(n);for(const l of o){const c=a.find(f=>f.measurementId===l),d=c&&e[c.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){$n.error(s)}}function vM(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await gM(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await mM(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){$n.error(a)}}return i}function _M(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=vM(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function yM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(H_)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=30,EM=1e3;class TM{constructor(e={},n=EM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ek=new TM;function bM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function IM(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:bM(r)},s=uM.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function SM(t,e=ek,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Zn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Zn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new xM;return setTimeout(async()=>{a.abort()},lM),tk({appId:r,apiKey:i,measurementId:s},o,a,e)}async function tk(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ek){var s;const{appId:o,measurementId:a}=t;try{await AM(r,e)}catch(l){if(a)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await IM(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!kM(c)){if(i.deleteThrottleMetadata(o),a)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?Nw(n,i.intervalMillis,wM):Nw(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,f),$n.debug(`Calling attemptFetch again in ${d} millis`),tk(t,f,r,i)}}function AM(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kM(t){if(!(t instanceof ti)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class xM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function CM(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(){if(_I())try{await yI()}catch(t){return $n.warn(Zn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return $n.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function PM(t,e,n,r,i,s,o){var a;const l=SM(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>$n.error(y)),e.push(l);const c=RM().then(y=>{if(y)return r.getId()}),[d,f]=await Promise.all([l,c]);yM(s)||fM(s,d.measurementId),i("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[aM]="firebase",g.update=!0,f!=null&&(g[oM]=f),i("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.app=e}_delete(){return delete Fu[this.app.options.appId],Promise.resolve()}}let Fu={},K0=[];const G0={};let am="dataLayer",OM="gtag",Q0,nk,J0=!1;function DM(){const t=[];if(vI()&&t.push("This is a browser extension environment."),CR()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Zn.create("invalid-analytics-context",{errorInfo:e});$n.warn(n.message)}}function jM(t,e,n){DM();const r=t.options.appId;if(!r)throw Zn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zn.create("no-api-key");if(Fu[r]!=null)throw Zn.create("already-exists",{id:r});if(!J0){pM(am);const{wrappedGtag:s,gtagCore:o}=_M(Fu,K0,G0,am,OM);nk=s,Q0=o,J0=!0}return Fu[r]=PM(t,K0,G0,e,Q0,am,n),new NM(t)}function LM(t=Wv()){t=zt(t);const e=aa(t,rf);return e.isInitialized()?e.getImmediate():MM(t)}function MM(t,e={}){const n=aa(t,rf);if(n.isInitialized()){const i=n.getImmediate();if(uc(e,n.getOptions()))return i;throw Zn.create("already-initialized")}return n.initialize({options:e})}function VM(t,e,n,r){t=zt(t),CM(nk,Fu[t.app.options.appId],e,n,r).catch(i=>$n.error(i))}const Y0="@firebase/analytics",X0="0.10.7";function FM(){bi(new Yr(rf,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return jM(r,i,n)},"PUBLIC")),bi(new Yr("analytics-internal",t,"PRIVATE")),Er(Y0,X0),Er(Y0,X0,"esm2017");function t(e){try{const n=e.getProvider(rf).getImmediate();return{logEvent:(r,i,s)=>VM(n,r,i,s)}}catch(n){throw Zn.create("interop-component-reg-failed",{reason:n})}}}FM();const $M={apiKey:"AIzaSyDR27NVCQmVwVNZfNXVGpLKSsJj8f2Filg",authDomain:"darelom-students.firebaseapp.com",projectId:"darelom-students",storageBucket:"darelom-students.appspot.com",messagingSenderId:"993473208393",appId:"1:993473208393:web:294652795108cc161c5f98",measurementId:"G-1K85RQXZQ1"},UM=bI($M),In=YL(),Uc=nD();LM(UM);/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pt(){return pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pt.apply(this,arguments)}var At;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(At||(At={}));const Z0="popstate";function BM(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=as(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wc("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:ta(s))}function r(i,s){ea(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return qM(e,n,r,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ea(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function zM(){return Math.random().toString(36).substr(2,8)}function eE(t,e){return{usr:t.state,key:t.key,idx:e}}function wc(t,e,n,r){return n===void 0&&(n=null),pt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?as(e):e,{state:n,key:e&&e.key||r||zM()})}function ta(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function as(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function qM(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=At.Pop,l=null,c=d();c==null&&(c=0,o.replaceState(pt({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=At.Pop;let N=d(),A=N==null?null:N-c;c=N,l&&l({action:a,location:x.location,delta:A})}function g(N,A){a=At.Push;let E=wc(x.location,N,A);n&&n(E,N),c=d()+1;let b=eE(E,c),D=x.createHref(E);try{o.pushState(b,"",D)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(D)}s&&l&&l({action:a,location:x.location,delta:1})}function y(N,A){a=At.Replace;let E=wc(x.location,N,A);n&&n(E,N),c=d();let b=eE(E,c),D=x.createHref(E);o.replaceState(b,"",D),s&&l&&l({action:a,location:x.location,delta:0})}function S(N){let A=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof N=="string"?N:ta(N);return E=E.replace(/ $/,"%20"),Se(A,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,A)}let x={get action(){return a},get location(){return t(i,o)},listen(N){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Z0,f),l=N,()=>{i.removeEventListener(Z0,f),l=null}},createHref(N){return e(i,N)},createURL:S,encodeLocation(N){let A=S(N);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:g,replace:y,go(N){return o.go(N)}};return x}var Ke;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ke||(Ke={}));const HM=new Set(["lazy","caseSensitive","path","id","index","children"]);function WM(t){return t.index===!0}function Ec(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Se(i.index!==!0||!i.children,"Cannot specify children on an index route"),Se(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),WM(i)){let l=pt({},i,e(i),{id:a});return r[a]=l,l}else{let l=pt({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Ec(i.children,e,o,r)),l}})}function Co(t,e,n){return n===void 0&&(n="/"),mh(t,e,n,!1)}function mh(t,e,n,r){let i=typeof e=="string"?as(e):e,s=Dl(i.pathname||"/",n);if(s==null)return null;let o=rk(t);GM(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=sV(s);a=rV(o[l],c,r)}return a}function KM(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function rk(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Se(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Ki([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Se(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),rk(s.children,e,d,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:tV(c,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of ik(s.path))i(s,o,l)}),e}function ik(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=ik(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function GM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:nV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const QM=/^:[\w-]+$/,JM=3,YM=2,XM=1,ZM=10,eV=-2,tE=t=>t==="*";function tV(t,e){let n=t.split("/"),r=n.length;return n.some(tE)&&(r+=eV),e&&(r+=YM),n.filter(i=>!tE(i)).reduce((i,s)=>i+(QM.test(s)?JM:s===""?XM:ZM),r)}function nV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function rV(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",f=nE({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},d),g=l.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=nE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:Ki([s,f.pathname]),pathnameBase:lV(Ki([s,f.pathnameBase])),route:g}),f.pathnameBase!=="/"&&(s=Ki([s,f.pathnameBase]))}return o}function nE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=iV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let x=a[f]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const S=a[f];return y&&!S?c[g]=void 0:c[g]=(S||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function iV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ea(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function sV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ea(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Dl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function oV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?as(t):t;return{pathname:n?n.startsWith("/")?n:aV(n,e):e,search:uV(r),hash:cV(i)}}function aV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function lm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Qf(t,e){let n=sk(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=as(t):(i=pt({},t),Se(!i.pathname||!i.pathname.includes("?"),lm("?","pathname","search",i)),Se(!i.pathname||!i.pathname.includes("#"),lm("#","pathname","hash",i)),Se(!i.search||!i.search.includes("#"),lm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),f-=1;i.pathname=g.join("/")}a=f>=0?e[f]:"/"}let l=oV(i,a),c=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||d)&&(l.pathname+="/"),l}const Ki=t=>t.join("/").replace(/\/\/+/g,"/"),lV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),uV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,cV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class sf{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Yf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ok=["post","put","patch","delete"],dV=new Set(ok),hV=["get",...ok],fV=new Set(hV),pV=new Set([301,302,303,307,308]),mV=new Set([307,308]),um={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},gV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},cu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},W_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vV=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),ak="remix-router-transitions";function _V(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Se(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;i=$=>({hasErrorBoundary:L($)})}else i=vV;let s={},o=Ec(t.routes,i,void 0,s),a,l=t.basename||"/",c=t.unstable_dataStrategy||bV,d=t.unstable_patchRoutesOnMiss,f=pt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,y=new Set,S=null,x=null,N=null,A=t.hydrationData!=null,E=Co(o,t.history.location,l),b=null;if(E==null&&!d){let L=yn(404,{pathname:t.history.location.pathname}),{matches:$,route:z}=hE(o);E=$,b={[z.id]:L}}E&&!t.hydrationData&&cr(E,o,t.history.location.pathname).active&&(E=null);let D;if(E)if(E.some(L=>L.route.lazy))D=!1;else if(!E.some(L=>L.route.loader))D=!0;else if(f.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,$=t.hydrationData?t.hydrationData.errors:null,z=W=>W.route.loader?typeof W.route.loader=="function"&&W.route.loader.hydrate===!0?!1:L&&L[W.route.id]!==void 0||$&&$[W.route.id]!==void 0:!0;if($){let W=E.findIndex(te=>$[te.route.id]!==void 0);D=E.slice(0,W+1).every(z)}else D=E.every(z)}else D=t.hydrationData!=null;else if(D=!1,E=[],f.v7_partialHydration){let L=cr(null,o,t.history.location.pathname);L.active&&L.matches&&(E=L.matches)}let B,R={historyAction:t.history.action,location:t.history.location,matches:E,initialized:D,navigation:um,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},k=At.Pop,w=!1,I,C=!1,O=new Map,V=null,P=!1,ge=!1,Qe=[],Je=new Set,we=new Map,X=0,ae=-1,de=new Map,Ae=new Set,Te=new Map,H=new Map,$e=new Set,ze=new Map,Ye=new Map,et=new Map,Ct=!1;function Rt(){if(g=t.history.listen(L=>{let{action:$,location:z,delta:W}=L;if(Ct){Ct=!1;return}ea(Ye.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=co({currentLocation:R.location,nextLocation:z,historyAction:$});if(te&&W!=null){Ct=!0,t.history.go(W*-1),Ci(te,{state:"blocked",location:z,proceed(){Ci(te,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),t.history.go(W)},reset(){let se=new Map(R.blockers);se.set(te,cu),tt({blockers:se})}});return}return Pt($,z)}),n){LV(e,O);let L=()=>MV(e,O);e.addEventListener("pagehide",L),V=()=>e.removeEventListener("pagehide",L)}return R.initialized||Pt(At.Pop,R.location,{initialHydration:!0}),B}function ar(){g&&g(),V&&V(),y.clear(),I&&I.abort(),R.fetchers.forEach((L,$)=>zn($)),R.blockers.forEach((L,$)=>us($))}function ie(L){return y.add(L),()=>y.delete(L)}function tt(L,$){$===void 0&&($={}),R=pt({},R,L);let z=[],W=[];f.v7_fetcherPersist&&R.fetchers.forEach((te,se)=>{te.state==="idle"&&($e.has(se)?W.push(se):z.push(se))}),[...y].forEach(te=>te(R,{deletedFetchers:W,unstable_viewTransitionOpts:$.viewTransitionOpts,unstable_flushSync:$.flushSync===!0})),f.v7_fetcherPersist&&(z.forEach(te=>R.fetchers.delete(te)),W.forEach(te=>zn(te)))}function Xt(L,$,z){var W,te;let{flushSync:se}=z===void 0?{}:z,he=R.actionData!=null&&R.navigation.formMethod!=null&&qr(R.navigation.formMethod)&&R.navigation.state==="loading"&&((W=L.state)==null?void 0:W._isRedirect)!==!0,Y;$.actionData?Object.keys($.actionData).length>0?Y=$.actionData:Y=null:he?Y=R.actionData:Y=null;let ve=$.loaderData?cE(R.loaderData,$.loaderData,$.matches||[],$.errors):R.loaderData,ue=R.blockers;ue.size>0&&(ue=new Map(ue),ue.forEach((xe,Me)=>ue.set(Me,cu)));let ce=w===!0||R.navigation.formMethod!=null&&qr(R.navigation.formMethod)&&((te=L.state)==null?void 0:te._isRedirect)!==!0;a&&(o=a,a=void 0),P||k===At.Pop||(k===At.Push?t.history.push(L,L.state):k===At.Replace&&t.history.replace(L,L.state));let ke;if(k===At.Pop){let xe=O.get(R.location.pathname);xe&&xe.has(L.pathname)?ke={currentLocation:R.location,nextLocation:L}:O.has(L.pathname)&&(ke={currentLocation:L,nextLocation:R.location})}else if(C){let xe=O.get(R.location.pathname);xe?xe.add(L.pathname):(xe=new Set([L.pathname]),O.set(R.location.pathname,xe)),ke={currentLocation:R.location,nextLocation:L}}tt(pt({},$,{actionData:Y,loaderData:ve,historyAction:k,location:L,initialized:!0,navigation:um,revalidation:"idle",restoreScrollPosition:ho(L,$.matches||R.matches),preventScrollReset:ce,blockers:ue}),{viewTransitionOpts:ke,flushSync:se===!0}),k=At.Pop,w=!1,C=!1,P=!1,ge=!1,Qe=[]}async function ni(L,$){if(typeof L=="number"){t.history.go(L);return}let z=jg(R.location,R.matches,l,f.v7_prependBasename,L,f.v7_relativeSplatPath,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:W,submission:te,error:se}=rE(f.v7_normalizeFormMethod,!1,z,$),he=R.location,Y=wc(R.location,W,$&&$.state);Y=pt({},Y,t.history.encodeLocation(Y));let ve=$&&$.replace!=null?$.replace:void 0,ue=At.Push;ve===!0?ue=At.Replace:ve===!1||te!=null&&qr(te.formMethod)&&te.formAction===R.location.pathname+R.location.search&&(ue=At.Replace);let ce=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,ke=($&&$.unstable_flushSync)===!0,xe=co({currentLocation:he,nextLocation:Y,historyAction:ue});if(xe){Ci(xe,{state:"blocked",location:Y,proceed(){Ci(xe,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),ni(L,$)},reset(){let Me=new Map(R.blockers);Me.set(xe,cu),tt({blockers:Me})}});return}return await Pt(ue,Y,{submission:te,pendingError:se,preventScrollReset:ce,replace:$&&$.replace,enableViewTransition:$&&$.unstable_viewTransition,flushSync:ke})}function ki(){if(Xe(),tt({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){Pt(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}Pt(k||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation})}}async function Pt(L,$,z){I&&I.abort(),I=null,k=L,P=(z&&z.startUninterruptedRevalidation)===!0,ds(R.location,R.matches),w=(z&&z.preventScrollReset)===!0,C=(z&&z.enableViewTransition)===!0;let W=a||o,te=z&&z.overrideNavigation,se=Co(W,$,l),he=(z&&z.flushSync)===!0,Y=cr(se,W,$.pathname);if(Y.active&&Y.matches&&(se=Y.matches),!se){let{error:be,notFoundMatches:ot,route:at}=Cr($.pathname);Xt($,{matches:ot,loaderData:{},errors:{[at.id]:be}},{flushSync:he});return}if(R.initialized&&!ge&&CV(R.location,$)&&!(z&&z.submission&&qr(z.submission.formMethod))){Xt($,{matches:se},{flushSync:he});return}I=new AbortController;let ve=ba(t.history,$,I.signal,z&&z.submission),ue;if(z&&z.pendingError)ue=[Ha(se).route.id,{type:Ke.error,error:z.pendingError}];else if(z&&z.submission&&qr(z.submission.formMethod)){let be=await xi(ve,$,z.submission,se,Y.active,{replace:z.replace,flushSync:he});if(be.shortCircuited)return;if(be.pendingActionResult){let[ot,at]=be.pendingActionResult;if(Qn(at)&&Yf(at.error)&&at.error.status===404){I=null,Xt($,{matches:be.matches,loaderData:{},errors:{[ot]:at.error}});return}}se=be.matches||se,ue=be.pendingActionResult,te=cm($,z.submission),he=!1,Y.active=!1,ve=ba(t.history,ve.url,ve.signal)}let{shortCircuited:ce,matches:ke,loaderData:xe,errors:Me}=await Ar(ve,$,se,Y.active,te,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,he,ue);ce||(I=null,Xt($,pt({matches:ke||se},dE(ue),{loaderData:xe,errors:Me})))}async function xi(L,$,z,W,te,se){se===void 0&&(se={}),Xe();let he=DV($,z);if(tt({navigation:he},{flushSync:se.flushSync===!0}),te){let ue=await Ri(W,$.pathname,L.signal);if(ue.type==="aborted")return{shortCircuited:!0};if(ue.type==="error"){let{boundaryId:ce,error:ke}=Rr($.pathname,ue);return{matches:ue.partialMatches,pendingActionResult:[ce,{type:Ke.error,error:ke}]}}else if(ue.matches)W=ue.matches;else{let{notFoundMatches:ce,error:ke,route:xe}=Cr($.pathname);return{matches:ce,pendingActionResult:[xe.id,{type:Ke.error,error:ke}]}}}let Y,ve=Iu(W,$);if(!ve.route.action&&!ve.route.lazy)Y={type:Ke.error,error:yn(405,{method:L.method,pathname:$.pathname,routeId:ve.route.id})};else if(Y=(await Bn("action",L,[ve],W))[0],L.signal.aborted)return{shortCircuited:!0};if(Mo(Y)){let ue;return se&&se.replace!=null?ue=se.replace:ue=aE(Y.response.headers.get("Location"),new URL(L.url),l)===R.location.pathname+R.location.search,await fn(L,Y,{submission:z,replace:ue}),{shortCircuited:!0}}if(Lo(Y))throw yn(400,{type:"defer-action"});if(Qn(Y)){let ue=Ha(W,ve.route.id);return(se&&se.replace)!==!0&&(k=At.Push),{matches:W,pendingActionResult:[ue.route.id,Y]}}return{matches:W,pendingActionResult:[ve.route.id,Y]}}async function Ar(L,$,z,W,te,se,he,Y,ve,ue,ce){let ke=te||cm($,se),xe=se||he||gE(ke),Me=!P&&(!f.v7_partialHydration||!ve);if(W){if(Me){let Ze=xn(ce);tt(pt({navigation:ke},Ze!==void 0?{actionData:Ze}:{}),{flushSync:ue})}let pe=await Ri(z,$.pathname,L.signal);if(pe.type==="aborted")return{shortCircuited:!0};if(pe.type==="error"){let{boundaryId:Ze,error:Et}=Rr($.pathname,pe);return{matches:pe.partialMatches,loaderData:{},errors:{[Ze]:Et}}}else if(pe.matches)z=pe.matches;else{let{error:Ze,notFoundMatches:Et,route:Ue}=Cr($.pathname);return{matches:Et,loaderData:{},errors:{[Ue.id]:Ze}}}}let be=a||o,[ot,at]=iE(t.history,R,z,xe,$,f.v7_partialHydration&&ve===!0,f.v7_skipActionErrorRevalidation,ge,Qe,Je,$e,Te,Ae,be,l,ce);if(lr(pe=>!(z&&z.some(Ze=>Ze.route.id===pe))||ot&&ot.some(Ze=>Ze.route.id===pe)),ae=++X,ot.length===0&&at.length===0){let pe=ii();return Xt($,pt({matches:z,loaderData:{},errors:ce&&Qn(ce[1])?{[ce[0]]:ce[1].error}:null},dE(ce),pe?{fetchers:new Map(R.fetchers)}:{}),{flushSync:ue}),{shortCircuited:!0}}if(Me){let pe={};if(!W){pe.navigation=ke;let Ze=xn(ce);Ze!==void 0&&(pe.actionData=Ze)}at.length>0&&(pe.fetchers=hn(at)),tt(pe,{flushSync:ue})}at.forEach(pe=>{we.has(pe.key)&&Zt(pe.key),pe.controller&&we.set(pe.key,pe.controller)});let Pr=()=>at.forEach(pe=>Zt(pe.key));I&&I.signal.addEventListener("abort",Pr);let{loaderResults:dr,fetcherResults:qn}=await ct(R.matches,z,ot,at,L);if(L.signal.aborted)return{shortCircuited:!0};I&&I.signal.removeEventListener("abort",Pr),at.forEach(pe=>we.delete(pe.key));let Nr=fE([...dr,...qn]);if(Nr){if(Nr.idx>=ot.length){let pe=at[Nr.idx-ot.length].key;Ae.add(pe)}return await fn(L,Nr.result,{replace:Y}),{shortCircuited:!0}}let{loaderData:hr,errors:Nt}=uE(R,z,ot,dr,ce,at,qn,ze);ze.forEach((pe,Ze)=>{pe.subscribe(Et=>{(Et||pe.done)&&ze.delete(Ze)})}),f.v7_partialHydration&&ve&&R.errors&&Object.entries(R.errors).filter(pe=>{let[Ze]=pe;return!ot.some(Et=>Et.route.id===Ze)}).forEach(pe=>{let[Ze,Et]=pe;Nt=Object.assign(Nt||{},{[Ze]:Et})});let mn=ii(),oi=pa(ae),Hn=mn||oi||at.length>0;return pt({matches:z,loaderData:hr,errors:Nt},Hn?{fetchers:new Map(R.fetchers)}:{})}function xn(L){if(L&&!Qn(L[1]))return{[L[0]]:L[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function hn(L){return L.forEach($=>{let z=R.fetchers.get($.key),W=du(void 0,z?z.data:void 0);R.fetchers.set($.key,W)}),new Map(R.fetchers)}function kr(L,$,z,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");we.has(L)&&Zt(L);let te=(W&&W.unstable_flushSync)===!0,se=a||o,he=jg(R.location,R.matches,l,f.v7_prependBasename,z,f.v7_relativeSplatPath,$,W==null?void 0:W.relative),Y=Co(se,he,l),ve=cr(Y,se,he);if(ve.active&&ve.matches&&(Y=ve.matches),!Y){pn(L,$,yn(404,{pathname:he}),{flushSync:te});return}let{path:ue,submission:ce,error:ke}=rE(f.v7_normalizeFormMethod,!0,he,W);if(ke){pn(L,$,ke,{flushSync:te});return}let xe=Iu(Y,ue);if(w=(W&&W.preventScrollReset)===!0,ce&&qr(ce.formMethod)){ls(L,$,ue,xe,Y,ve.active,te,ce);return}Te.set(L,{routeId:$,path:ue}),ri(L,$,ue,xe,Y,ve.active,te,ce)}async function ls(L,$,z,W,te,se,he,Y){Xe(),Te.delete(L);function ve(Ue){if(!Ue.route.action&&!Ue.route.lazy){let gn=yn(405,{method:Y.formMethod,pathname:z,routeId:$});return pn(L,$,gn,{flushSync:he}),!0}return!1}if(!se&&ve(W))return;let ue=R.fetchers.get(L);st(L,jV(Y,ue),{flushSync:he});let ce=new AbortController,ke=ba(t.history,z,ce.signal,Y);if(se){let Ue=await Ri(te,z,ke.signal);if(Ue.type==="aborted")return;if(Ue.type==="error"){let{error:gn}=Rr(z,Ue);pn(L,$,gn,{flushSync:he});return}else if(Ue.matches){if(te=Ue.matches,W=Iu(te,z),ve(W))return}else{pn(L,$,yn(404,{pathname:z}),{flushSync:he});return}}we.set(L,ce);let xe=X,be=(await Bn("action",ke,[W],te))[0];if(ke.signal.aborted){we.get(L)===ce&&we.delete(L);return}if(f.v7_fetcherPersist&&$e.has(L)){if(Mo(be)||Qn(be)){st(L,Ts(void 0));return}}else{if(Mo(be))if(we.delete(L),ae>xe){st(L,Ts(void 0));return}else return Ae.add(L),st(L,du(Y)),fn(ke,be,{fetcherSubmission:Y});if(Qn(be)){pn(L,$,be.error);return}}if(Lo(be))throw yn(400,{type:"defer-action"});let ot=R.navigation.location||R.location,at=ba(t.history,ot,ce.signal),Pr=a||o,dr=R.navigation.state!=="idle"?Co(Pr,R.navigation.location,l):R.matches;Se(dr,"Didn't find any matches after fetcher action");let qn=++X;de.set(L,qn);let Nr=du(Y,be.data);R.fetchers.set(L,Nr);let[hr,Nt]=iE(t.history,R,dr,Y,ot,!1,f.v7_skipActionErrorRevalidation,ge,Qe,Je,$e,Te,Ae,Pr,l,[W.route.id,be]);Nt.filter(Ue=>Ue.key!==L).forEach(Ue=>{let gn=Ue.key,fo=R.fetchers.get(gn),ma=du(void 0,fo?fo.data:void 0);R.fetchers.set(gn,ma),we.has(gn)&&Zt(gn),Ue.controller&&we.set(gn,Ue.controller)}),tt({fetchers:new Map(R.fetchers)});let mn=()=>Nt.forEach(Ue=>Zt(Ue.key));ce.signal.addEventListener("abort",mn);let{loaderResults:oi,fetcherResults:Hn}=await ct(R.matches,dr,hr,Nt,at);if(ce.signal.aborted)return;ce.signal.removeEventListener("abort",mn),de.delete(L),we.delete(L),Nt.forEach(Ue=>we.delete(Ue.key));let pe=fE([...oi,...Hn]);if(pe){if(pe.idx>=hr.length){let Ue=Nt[pe.idx-hr.length].key;Ae.add(Ue)}return fn(at,pe.result)}let{loaderData:Ze,errors:Et}=uE(R,R.matches,hr,oi,void 0,Nt,Hn,ze);if(R.fetchers.has(L)){let Ue=Ts(be.data);R.fetchers.set(L,Ue)}pa(qn),R.navigation.state==="loading"&&qn>ae?(Se(k,"Expected pending action"),I&&I.abort(),Xt(R.navigation.location,{matches:dr,loaderData:Ze,errors:Et,fetchers:new Map(R.fetchers)})):(tt({errors:Et,loaderData:cE(R.loaderData,Ze,dr,Et),fetchers:new Map(R.fetchers)}),ge=!1)}async function ri(L,$,z,W,te,se,he,Y){let ve=R.fetchers.get(L);st(L,du(Y,ve?ve.data:void 0),{flushSync:he});let ue=new AbortController,ce=ba(t.history,z,ue.signal);if(se){let be=await Ri(te,z,ce.signal);if(be.type==="aborted")return;if(be.type==="error"){let{error:ot}=Rr(z,be);pn(L,$,ot,{flushSync:he});return}else if(be.matches)te=be.matches,W=Iu(te,z);else{pn(L,$,yn(404,{pathname:z}),{flushSync:he});return}}we.set(L,ue);let ke=X,Me=(await Bn("loader",ce,[W],te))[0];if(Lo(Me)&&(Me=await hk(Me,ce.signal,!0)||Me),we.get(L)===ue&&we.delete(L),!ce.signal.aborted){if($e.has(L)){st(L,Ts(void 0));return}if(Mo(Me))if(ae>ke){st(L,Ts(void 0));return}else{Ae.add(L),await fn(ce,Me);return}if(Qn(Me)){pn(L,$,Me.error);return}Se(!Lo(Me),"Unhandled fetcher deferred data"),st(L,Ts(Me.data))}}async function fn(L,$,z){let{submission:W,fetcherSubmission:te,replace:se}=z===void 0?{}:z;$.response.headers.has("X-Remix-Revalidate")&&(ge=!0);let he=$.response.headers.get("Location");Se(he,"Expected a Location header on the redirect Response"),he=aE(he,new URL(L.url),l);let Y=wc(R.location,he,{_isRedirect:!0});if(n){let Me=!1;if($.response.headers.has("X-Remix-Reload-Document"))Me=!0;else if(W_.test(he)){const be=t.history.createURL(he);Me=be.origin!==e.location.origin||Dl(be.pathname,l)==null}if(Me){se?e.location.replace(he):e.location.assign(he);return}}I=null;let ve=se===!0||$.response.headers.has("X-Remix-Replace")?At.Replace:At.Push,{formMethod:ue,formAction:ce,formEncType:ke}=R.navigation;!W&&!te&&ue&&ce&&ke&&(W=gE(R.navigation));let xe=W||te;if(mV.has($.response.status)&&xe&&qr(xe.formMethod))await Pt(ve,Y,{submission:pt({},xe,{formAction:he}),preventScrollReset:w});else{let Me=cm(Y,W);await Pt(ve,Y,{overrideNavigation:Me,fetcherSubmission:te,preventScrollReset:w})}}async function Bn(L,$,z,W){try{let te=await IV(c,L,$,z,W,s,i);return await Promise.all(te.map((se,he)=>{if(PV(se)){let Y=se.result;return{type:Ke.redirect,response:kV(Y,$,z[he].route.id,W,l,f.v7_relativeSplatPath)}}return AV(se)}))}catch(te){return z.map(()=>({type:Ke.error,error:te}))}}async function ct(L,$,z,W,te){let[se,...he]=await Promise.all([z.length?Bn("loader",te,z,$):[],...W.map(Y=>{if(Y.matches&&Y.match&&Y.controller){let ve=ba(t.history,Y.path,Y.controller.signal);return Bn("loader",ve,[Y.match],Y.matches).then(ue=>ue[0])}else return Promise.resolve({type:Ke.error,error:yn(404,{pathname:Y.path})})})]);return await Promise.all([mE(L,z,se,se.map(()=>te.signal),!1,R.loaderData),mE(L,W.map(Y=>Y.match),he,W.map(Y=>Y.controller?Y.controller.signal:null),!0)]),{loaderResults:se,fetcherResults:he}}function Xe(){ge=!0,Qe.push(...lr()),Te.forEach((L,$)=>{we.has($)&&(Je.add($),Zt($))})}function st(L,$,z){z===void 0&&(z={}),R.fetchers.set(L,$),tt({fetchers:new Map(R.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function pn(L,$,z,W){W===void 0&&(W={});let te=Ha(R.matches,$);zn(L),tt({errors:{[te.route.id]:z},fetchers:new Map(R.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function xr(L){return f.v7_fetcherPersist&&(H.set(L,(H.get(L)||0)+1),$e.has(L)&&$e.delete(L)),R.fetchers.get(L)||gV}function zn(L){let $=R.fetchers.get(L);we.has(L)&&!($&&$.state==="loading"&&de.has(L))&&Zt(L),Te.delete(L),de.delete(L),Ae.delete(L),$e.delete(L),Je.delete(L),R.fetchers.delete(L)}function Cn(L){if(f.v7_fetcherPersist){let $=(H.get(L)||0)-1;$<=0?(H.delete(L),$e.add(L)):H.set(L,$)}else zn(L);tt({fetchers:new Map(R.fetchers)})}function Zt(L){let $=we.get(L);Se($,"Expected fetch controller: "+L),$.abort(),we.delete(L)}function uo(L){for(let $ of L){let z=xr($),W=Ts(z.data);R.fetchers.set($,W)}}function ii(){let L=[],$=!1;for(let z of Ae){let W=R.fetchers.get(z);Se(W,"Expected fetcher: "+z),W.state==="loading"&&(Ae.delete(z),L.push(z),$=!0)}return uo(L),$}function pa(L){let $=[];for(let[z,W]of de)if(W<L){let te=R.fetchers.get(z);Se(te,"Expected fetcher: "+z),te.state==="loading"&&(Zt(z),de.delete(z),$.push(z))}return uo($),$.length>0}function $l(L,$){let z=R.blockers.get(L)||cu;return Ye.get(L)!==$&&Ye.set(L,$),z}function us(L){R.blockers.delete(L),Ye.delete(L)}function Ci(L,$){let z=R.blockers.get(L)||cu;Se(z.state==="unblocked"&&$.state==="blocked"||z.state==="blocked"&&$.state==="blocked"||z.state==="blocked"&&$.state==="proceeding"||z.state==="blocked"&&$.state==="unblocked"||z.state==="proceeding"&&$.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+$.state);let W=new Map(R.blockers);W.set(L,$),tt({blockers:W})}function co(L){let{currentLocation:$,nextLocation:z,historyAction:W}=L;if(Ye.size===0)return;Ye.size>1&&ea(!1,"A router only supports one blocker at a time");let te=Array.from(Ye.entries()),[se,he]=te[te.length-1],Y=R.blockers.get(se);if(!(Y&&Y.state==="proceeding")&&he({currentLocation:$,nextLocation:z,historyAction:W}))return se}function Cr(L){let $=yn(404,{pathname:L}),z=a||o,{matches:W,route:te}=hE(z);return lr(),{notFoundMatches:W,route:te,error:$}}function Rr(L,$){return{boundaryId:Ha($.partialMatches).route.id,error:yn(400,{type:"route-discovery",pathname:L,message:$.error!=null&&"message"in $.error?$.error:String($.error)})}}function lr(L){let $=[];return ze.forEach((z,W)=>{(!L||L(W))&&(z.cancel(),$.push(W),ze.delete(W))}),$}function ur(L,$,z){if(S=L,N=$,x=z||null,!A&&R.navigation===um){A=!0;let W=ho(R.location,R.matches);W!=null&&tt({restoreScrollPosition:W})}return()=>{S=null,N=null,x=null}}function cs(L,$){return x&&x(L,$.map(W=>KM(W,R.loaderData)))||L.key}function ds(L,$){if(S&&N){let z=cs(L,$);S[z]=N()}}function ho(L,$){if(S){let z=cs(L,$),W=S[z];if(typeof W=="number")return W}return null}function cr(L,$,z){if(d)if(L){let W=L[L.length-1].route;if(W.path&&(W.path==="*"||W.path.endsWith("/*")))return{active:!0,matches:mh($,z,l,!0)}}else return{active:!0,matches:mh($,z,l,!0)||[]};return{active:!1,matches:null}}async function Ri(L,$,z){let W=L,te=W.length>0?W[W.length-1].route:null;for(;;){let se=a==null,he=a||o;try{await TV(d,$,W,he,s,i,et,z)}catch(ce){return{type:"error",error:ce,partialMatches:W}}finally{se&&(o=[...o])}if(z.aborted)return{type:"aborted"};let Y=Co(he,$,l),ve=!1;if(Y){let ce=Y[Y.length-1].route;if(ce.index)return{type:"success",matches:Y};if(ce.path&&ce.path.length>0)if(ce.path==="*")ve=!0;else return{type:"success",matches:Y}}let ue=mh(he,$,l,!0);if(!ue||W.map(ce=>ce.route.id).join("-")===ue.map(ce=>ce.route.id).join("-"))return{type:"success",matches:ve?Y:null};if(W=ue,te=W[W.length-1].route,te.path==="*")return{type:"success",matches:W}}}function dt(L){s={},a=Ec(L,i,void 0,s)}function si(L,$){let z=a==null;uk(L,$,a||o,s,i),z&&(o=[...o],tt({}))}return B={get basename(){return l},get future(){return f},get state(){return R},get routes(){return o},get window(){return e},initialize:Rt,subscribe:ie,enableScrollRestoration:ur,navigate:ni,fetch:kr,revalidate:ki,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:xr,deleteFetcher:Cn,dispose:ar,getBlocker:$l,deleteBlocker:us,patchRoutes:si,_internalFetchControllers:we,_internalActiveDeferreds:ze,_internalSetRoutes:dt},B}function yV(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function jg(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){c=f;break}}else l=e,c=e[e.length-1];let d=Jf(i||".",Qf(l,s),Dl(t.pathname,n)||t.pathname,a==="path");return i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!K_(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Ki([n,d.pathname])),ta(d)}function rE(t,e,n,r){if(!r||!yV(r))return{path:n};if(r.formMethod&&!OV(r.formMethod))return{path:n,error:yn(405,{method:r.formMethod})};let i=()=>({path:n,error:yn(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=ck(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!qr(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,S)=>{let[x,N]=S;return""+y+x+"="+N+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!qr(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}Se(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=Lg(r.formData),c=r.formData;else if(r.body instanceof FormData)l=Lg(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=lE(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=lE(l)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(qr(d.formMethod))return{path:n,submission:d};let f=as(n);return e&&f.search&&K_(f.search)&&l.append("index",""),f.search="?"+l,{path:ta(f),submission:d}}function wV(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function iE(t,e,n,r,i,s,o,a,l,c,d,f,g,y,S,x){let N=x?Qn(x[1])?x[1].error:x[1].data:void 0,A=t.createURL(e.location),E=t.createURL(i),b=x&&Qn(x[1])?x[0]:void 0,D=b?wV(n,b):n,B=x?x[1].statusCode:void 0,R=o&&B&&B>=400,k=D.filter((I,C)=>{let{route:O}=I;if(O.lazy)return!0;if(O.loader==null)return!1;if(s)return typeof O.loader!="function"||O.loader.hydrate?!0:e.loaderData[O.id]===void 0&&(!e.errors||e.errors[O.id]===void 0);if(EV(e.loaderData,e.matches[C],I)||l.some(ge=>ge===I.route.id))return!0;let V=e.matches[C],P=I;return sE(I,pt({currentUrl:A,currentParams:V.params,nextUrl:E,nextParams:P.params},r,{actionResult:N,actionStatus:B,defaultShouldRevalidate:R?!1:a||A.pathname+A.search===E.pathname+E.search||A.search!==E.search||lk(V,P)}))}),w=[];return f.forEach((I,C)=>{if(s||!n.some(Qe=>Qe.route.id===I.routeId)||d.has(C))return;let O=Co(y,I.path,S);if(!O){w.push({key:C,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let V=e.fetchers.get(C),P=Iu(O,I.path),ge=!1;g.has(C)?ge=!1:c.has(C)?(c.delete(C),ge=!0):V&&V.state!=="idle"&&V.data===void 0?ge=a:ge=sE(P,pt({currentUrl:A,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:N,actionStatus:B,defaultShouldRevalidate:R?!1:a})),ge&&w.push({key:C,routeId:I.routeId,path:I.path,matches:O,match:P,controller:new AbortController})}),[k,w]}function EV(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function lk(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function sE(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function TV(t,e,n,r,i,s,o,a){let l=[e,...n.map(c=>c.route.id)].join("-");try{let c=o.get(l);c||(c=t({path:e,matches:n,patch:(d,f)=>{a.aborted||uk(d,f,r,i,s)}}),o.set(l,c)),c&&RV(c)&&await c}finally{o.delete(l)}}function uk(t,e,n,r,i){if(t){var s;let o=r[t];Se(o,"No route found to patch children into: routeId = "+t);let a=Ec(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=Ec(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function oE(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Se(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ea(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!HM.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,pt({},e(i),{lazy:void 0}))}function bV(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function IV(t,e,n,r,i,s,o,a){let l=r.reduce((f,g)=>f.add(g.route.id),new Set),c=new Set,d=await t({matches:i.map(f=>{let g=l.has(f.route.id);return pt({},f,{shouldLoad:g,resolve:S=>(c.add(f.route.id),g?SV(e,n,f,s,o,S,a):Promise.resolve({type:Ke.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(f=>Se(c.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((f,g)=>l.has(i[g].route.id))}async function SV(t,e,n,r,i,s,o){let a,l,c=d=>{let f,g=new Promise((x,N)=>f=N);l=()=>f(),e.signal.addEventListener("abort",l);let y=x=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):d({request:e,params:n.params,context:o},...x!==void 0?[x]:[]),S;return s?S=s(x=>y(x)):S=(async()=>{try{return{type:"data",result:await y()}}catch(x){return{type:"error",result:x}}})(),Promise.race([S,g])};try{let d=n.route[t];if(n.route.lazy)if(d){let f,[g]=await Promise.all([c(d).catch(y=>{f=y}),oE(n.route,i,r)]);if(f!==void 0)throw f;a=g}else if(await oE(n.route,i,r),d=n.route[t],d)a=await c(d);else if(t==="action"){let f=new URL(e.url),g=f.pathname+f.search;throw yn(405,{method:e.method,pathname:g,routeId:n.route.id})}else return{type:Ke.data,result:void 0};else if(d)a=await c(d);else{let f=new URL(e.url),g=f.pathname+f.search;throw yn(404,{pathname:g})}Se(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Ke.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function AV(t){let{result:e,type:n}=t;if(dk(e)){let c;try{let d=e.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(d){return{type:Ke.error,error:d}}return n===Ke.error?{type:Ke.error,error:new sf(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:Ke.data,data:c,statusCode:e.status,headers:e.headers}}if(n===Ke.error){if(pE(e)){var r;if(e.data instanceof Error){var i;return{type:Ke.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new sf(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:Ke.error,error:e,statusCode:Yf(e)?e.status:void 0}}if(NV(e)){var s,o;return{type:Ke.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(pE(e)){var a,l;return{type:Ke.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Ke.data,data:e}}function kV(t,e,n,r,i,s){let o=t.headers.get("Location");if(Se(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!W_.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=jg(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function aE(t,e,n){if(W_.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=Dl(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function ba(t,e,n,r){let i=t.createURL(ck(e)).toString(),s={signal:n};if(r&&qr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Lg(r.formData):s.body=r.formData}return new Request(i,s)}function Lg(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function lE(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function xV(t,e,n,r,i,s){let o={},a=null,l,c=!1,d={},f=r&&Qn(r[1])?r[1].error:void 0;return n.forEach((g,y)=>{let S=e[y].route.id;if(Se(!Mo(g),"Cannot handle redirect results in processLoaderData"),Qn(g)){let x=g.error;f!==void 0&&(x=f,f=void 0),a=a||{};{let N=Ha(t,S);a[N.route.id]==null&&(a[N.route.id]=x)}o[S]=void 0,c||(c=!0,l=Yf(g.error)?g.error.status:500),g.headers&&(d[S]=g.headers)}else Lo(g)?(i.set(S,g.deferredData),o[S]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!c&&(l=g.statusCode),g.headers&&(d[S]=g.headers)):(o[S]=g.data,g.statusCode&&g.statusCode!==200&&!c&&(l=g.statusCode),g.headers&&(d[S]=g.headers))}),f!==void 0&&r&&(a={[r[0]]:f},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:d}}function uE(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=xV(e,n,r,i,a);for(let d=0;d<s.length;d++){let{key:f,match:g,controller:y}=s[d];Se(o!==void 0&&o[d]!==void 0,"Did not find corresponding fetcher result");let S=o[d];if(!(y&&y.signal.aborted))if(Qn(S)){let x=Ha(t.matches,g==null?void 0:g.route.id);c&&c[x.route.id]||(c=pt({},c,{[x.route.id]:S.error})),t.fetchers.delete(f)}else if(Mo(S))Se(!1,"Unhandled fetcher revalidation redirect");else if(Lo(S))Se(!1,"Unhandled fetcher deferred data");else{let x=Ts(S.data);t.fetchers.set(f,x)}}return{loaderData:l,errors:c}}function cE(t,e,n,r){let i=pt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function dE(t){return t?Qn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ha(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function hE(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function yn(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new sf(t||500,a,new Error(l),!0)}function fE(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Mo(n))return{result:n,idx:e}}}function ck(t){let e=typeof t=="string"?as(t):t;return ta(pt({},e,{hash:""}))}function CV(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function RV(t){return typeof t=="object"&&t!=null&&"then"in t}function PV(t){return dk(t.result)&&pV.has(t.result.status)}function Lo(t){return t.type===Ke.deferred}function Qn(t){return t.type===Ke.error}function Mo(t){return(t&&t.type)===Ke.redirect}function pE(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function NV(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function dk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function OV(t){return fV.has(t.toLowerCase())}function qr(t){return dV.has(t.toLowerCase())}async function mE(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(f=>f.route.id===l.route.id),d=c!=null&&!lk(c,l)&&(s&&s[l.route.id])!==void 0;if(Lo(a)&&(i||d)){let f=r[o];Se(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await hk(a,f,i).then(g=>{g&&(n[o]=g||n[o])})}}}async function hk(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ke.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ke.error,error:i}}return{type:Ke.data,data:t.deferredData.data}}}function K_(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Iu(t,e){let n=typeof e=="string"?as(e).search:e.search;if(t[t.length-1].route.index&&K_(n||""))return t[t.length-1];let r=sk(t);return r[r.length-1]}function gE(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function cm(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function DV(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function du(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function jV(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ts(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function LV(t,e){try{let n=t.sessionStorage.getItem(ak);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function MV(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(ak,JSON.stringify(n))}catch(r){ea(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function of(){return of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},of.apply(this,arguments)}const Xf=F.createContext(null),fk=F.createContext(null),oo=F.createContext(null),G_=F.createContext(null),Ai=F.createContext({outlet:null,matches:[],isDataRoute:!1}),pk=F.createContext(null);function VV(t,e){let{relative:n}=e===void 0?{}:e;jl()||Se(!1);let{basename:r,navigator:i}=F.useContext(oo),{hash:s,pathname:o,search:a}=gk(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ki([r,o])),i.createHref({pathname:l,search:a,hash:s})}function jl(){return F.useContext(G_)!=null}function Sr(){return jl()||Se(!1),F.useContext(G_).location}function mk(t){F.useContext(oo).static||F.useLayoutEffect(t)}function yt(){let{isDataRoute:t}=F.useContext(Ai);return t?XV():FV()}function FV(){jl()||Se(!1);let t=F.useContext(Xf),{basename:e,future:n,navigator:r}=F.useContext(oo),{matches:i}=F.useContext(Ai),{pathname:s}=Sr(),o=JSON.stringify(Qf(i,n.v7_relativeSplatPath)),a=F.useRef(!1);return mk(()=>{a.current=!0}),F.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=Jf(c,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Ki([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,s,t])}const $V=F.createContext(null);function UV(t){let e=F.useContext(Ai).outlet;return e&&F.createElement($V.Provider,{value:t},e)}function kn(){let{matches:t}=F.useContext(Ai),e=t[t.length-1];return e?e.params:{}}function gk(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(oo),{matches:i}=F.useContext(Ai),{pathname:s}=Sr(),o=JSON.stringify(Qf(i,r.v7_relativeSplatPath));return F.useMemo(()=>Jf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function BV(t,e,n,r){jl()||Se(!1);let{navigator:i}=F.useContext(oo),{matches:s}=F.useContext(Ai),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Sr(),d;d=c;let f=d.pathname||"/",g=f;if(l!=="/"){let x=l.replace(/^\//,"").split("/");g="/"+f.replace(/^\//,"").split("/").slice(x.length).join("/")}let y=Co(t,{pathname:g});return KV(y&&y.map(x=>Object.assign({},x,{params:Object.assign({},a,x.params),pathname:Ki([l,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?l:Ki([l,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r)}function zV(){let t=YV(),e=Yf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,null)}const qV=F.createElement(zV,null);class HV extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(Ai.Provider,{value:this.props.routeContext},F.createElement(pk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WV(t){let{routeContext:e,match:n,children:r}=t,i=F.useContext(Xf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(Ai.Provider,{value:e},r)}function KV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||Se(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:g,errors:y}=n,S=f.route.loader&&g[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||S){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,g)=>{let y,S=!1,x=null,N=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||qV,l&&(c<0&&g===0?(S=!0,N=null):c===g&&(S=!0,N=f.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,g+1)),E=()=>{let b;return y?b=x:S?b=N:f.route.Component?b=F.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=d,F.createElement(WV,{match:f,routeContext:{outlet:d,matches:A,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||g===0)?F.createElement(HV,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:E(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):E()},null)}var vk=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vk||{}),af=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(af||{});function GV(t){let e=F.useContext(Xf);return e||Se(!1),e}function QV(t){let e=F.useContext(fk);return e||Se(!1),e}function JV(t){let e=F.useContext(Ai);return e||Se(!1),e}function _k(t){let e=JV(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function YV(){var t;let e=F.useContext(pk),n=QV(af.UseRouteError),r=_k(af.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function XV(){let{router:t}=GV(vk.UseNavigateStable),e=_k(af.UseNavigateStable),n=F.useRef(!1);return mk(()=>{n.current=!0}),F.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,of({fromRouteId:e},s)))},[t,e])}function vE(t){let{to:e,replace:n,state:r,relative:i}=t;jl()||Se(!1);let{future:s,static:o}=F.useContext(oo),{matches:a}=F.useContext(Ai),{pathname:l}=Sr(),c=yt(),d=Jf(e,Qf(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(d);return F.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function ZV(t){return UV(t.context)}function qe(t){Se(!1)}function eF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=At.Pop,navigator:s,static:o=!1,future:a}=t;jl()&&Se(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:s,static:o,future:of({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=as(r));let{pathname:d="/",search:f="",hash:g="",state:y=null,key:S="default"}=r,x=F.useMemo(()=>{let N=Dl(d,l);return N==null?null:{location:{pathname:N,search:f,hash:g,state:y,key:S},navigationType:i}},[l,d,f,g,y,S,i]);return x==null?null:F.createElement(oo.Provider,{value:c},F.createElement(G_.Provider,{children:n,value:x}))}new Promise(()=>{});function Mg(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let s=[...e,i];if(r.type===F.Fragment){n.push.apply(n,Mg(r.props.children,s));return}r.type!==qe&&Se(!1),!r.props.index||!r.props.children||Se(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Mg(r.props.children,s)),n.push(o)}),n}function tF(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:F.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:F.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:F.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tc(){return Tc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tc.apply(this,arguments)}function nF(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function iF(t,e){return t.button===0&&(!e||e==="_self")&&!rF(t)}function Vg(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function sF(t,e){let n=Vg(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const oF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],aF="6";try{window.__reactRouterVersion=aF}catch{}function lF(t,e){return _V({basename:void 0,future:Tc({},void 0,{v7_prependBasename:!0}),history:BM({window:void 0}),hydrationData:uF(),routes:t,mapRouteProperties:tF,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function uF(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Tc({},e,{errors:cF(e.errors)})),e}function cF(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new sf(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const dF=F.createContext({isTransitioning:!1}),hF=F.createContext(new Map),fF="startTransition",_E=t1[fF],pF="flushSync",yE=fR[pF];function mF(t){_E?_E(t):t()}function hu(t){yE?yE(t):t()}let gF=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function vF(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=F.useState(n.state),[o,a]=F.useState(),[l,c]=F.useState({isTransitioning:!1}),[d,f]=F.useState(),[g,y]=F.useState(),[S,x]=F.useState(),N=F.useRef(new Map),{v7_startTransition:A}=r||{},E=F.useCallback(w=>{A?mF(w):w()},[A]),b=F.useCallback((w,I)=>{let{deletedFetchers:C,unstable_flushSync:O,unstable_viewTransitionOpts:V}=I;C.forEach(ge=>N.current.delete(ge)),w.fetchers.forEach((ge,Qe)=>{ge.data!==void 0&&N.current.set(Qe,ge.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!V||P){O?hu(()=>s(w)):E(()=>s(w));return}if(O){hu(()=>{g&&(d&&d.resolve(),g.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let ge=n.window.document.startViewTransition(()=>{hu(()=>s(w))});ge.finished.finally(()=>{hu(()=>{f(void 0),y(void 0),a(void 0),c({isTransitioning:!1})})}),hu(()=>y(ge));return}g?(d&&d.resolve(),g.skipTransition(),x({state:w,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(a(w),c({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,g,d,N,E]);F.useLayoutEffect(()=>n.subscribe(b),[n,b]),F.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new gF)},[l]),F.useEffect(()=>{if(d&&o&&n.window){let w=o,I=d.promise,C=n.window.document.startViewTransition(async()=>{E(()=>s(w)),await I});C.finished.finally(()=>{f(void 0),y(void 0),a(void 0),c({isTransitioning:!1})}),y(C)}},[E,o,d,n.window]),F.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,g,i.location,o]),F.useEffect(()=>{!l.isTransitioning&&S&&(a(S.state),c({isTransitioning:!0,flushSync:!1,currentLocation:S.currentLocation,nextLocation:S.nextLocation}),x(void 0))},[l.isTransitioning,S]),F.useEffect(()=>{},[]);let D=F.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,I,C)=>n.navigate(w,{state:I,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:(w,I,C)=>n.navigate(w,{replace:!0,state:I,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[n]),B=n.basename||"/",R=F.useMemo(()=>({router:n,navigator:D,static:!1,basename:B}),[n,D,B]),k=F.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return F.createElement(F.Fragment,null,F.createElement(Xf.Provider,{value:R},F.createElement(fk.Provider,{value:i},F.createElement(hF.Provider,{value:N.current},F.createElement(dF.Provider,{value:l},F.createElement(eF,{basename:B,location:i.location,navigationType:i.historyAction,navigator:D,future:k},i.initialized||n.future.v7_partialHydration?F.createElement(_F,{routes:n.routes,future:n.future,state:i}):e))))),null)}const _F=F.memo(yF);function yF(t){let{routes:e,future:n,state:r}=t;return BV(e,void 0,r,n)}const wF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ln=F.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:d,unstable_viewTransition:f}=e,g=nF(e,oF),{basename:y}=F.useContext(oo),S,x=!1;if(typeof c=="string"&&EF.test(c)&&(S=c,wF))try{let b=new URL(window.location.href),D=c.startsWith("//")?new URL(b.protocol+c):new URL(c),B=Dl(D.pathname,y);D.origin===b.origin&&B!=null?c=B+D.search+D.hash:x=!0}catch{}let N=VV(c,{relative:i}),A=TF(c,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:f});function E(b){r&&r(b),b.defaultPrevented||A(b)}return F.createElement("a",Tc({},g,{href:S||N,onClick:x||s?r:E,ref:n,target:l}))});var wE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(wE||(wE={}));var EE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(EE||(EE={}));function TF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=yt(),c=Sr(),d=gk(t,{relative:o});return F.useCallback(f=>{if(iF(f,n)){f.preventDefault();let g=r!==void 0?r:ta(c)===ta(d);l(t,{replace:g,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,d,r,i,n,t,s,o,a])}function bF(t){let e=F.useRef(Vg(t)),n=F.useRef(!1),r=Sr(),i=F.useMemo(()=>sF(r.search,n.current?null:e.current),[r.search]),s=yt(),o=F.useCallback((a,l)=>{const c=Vg(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var IF={exports:{}},Tn="top",nr="bottom",rr="right",bn="left",Zf="auto",Ll=[Tn,nr,rr,bn],na="start",_l="end",yk="clippingParents",Q_="viewport",Ra="popper",wk="reference",Fg=Ll.reduce(function(t,e){return t.concat([e+"-"+na,e+"-"+_l])},[]),J_=[].concat(Ll,[Zf]).reduce(function(t,e){return t.concat([e,e+"-"+na,e+"-"+_l])},[]),Ek="beforeRead",Tk="read",bk="afterRead",Ik="beforeMain",Sk="main",Ak="afterMain",kk="beforeWrite",xk="write",Ck="afterWrite",Rk=[Ek,Tk,bk,Ik,Sk,Ak,kk,xk,Ck];function Si(t){return t?(t.nodeName||"").toLowerCase():null}function ir(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ra(t){var e=ir(t).Element;return t instanceof e||t instanceof Element}function Tr(t){var e=ir(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Y_(t){if(typeof ShadowRoot>"u")return!1;var e=ir(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function SF(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Tr(s)||!Si(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function AF(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Tr(i)||!Si(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const X_={name:"applyStyles",enabled:!0,phase:"write",fn:SF,effect:AF,requires:["computeStyles"]};function Ti(t){return t.split("-")[0]}var Uo=Math.max,lf=Math.min,yl=Math.round;function $g(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Pk(){return!/^((?!chrome|android).)*safari/i.test($g())}function wl(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Tr(t)&&(i=t.offsetWidth>0&&yl(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&yl(r.height)/t.offsetHeight||1);var o=ra(t)?ir(t):window,a=o.visualViewport,l=!Pk()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,d=(r.top+(l&&a?a.offsetTop:0))/s,f=r.width/i,g=r.height/s;return{width:f,height:g,top:d,right:c+f,bottom:d+g,left:c,x:c,y:d}}function Z_(t){var e=wl(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Nk(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Y_(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function is(t){return ir(t).getComputedStyle(t)}function kF(t){return["table","td","th"].indexOf(Si(t))>=0}function ao(t){return((ra(t)?t.ownerDocument:t.document)||window.document).documentElement}function ep(t){return Si(t)==="html"?t:t.assignedSlot||t.parentNode||(Y_(t)?t.host:null)||ao(t)}function TE(t){return!Tr(t)||is(t).position==="fixed"?null:t.offsetParent}function xF(t){var e=/firefox/i.test($g()),n=/Trident/i.test($g());if(n&&Tr(t)){var r=is(t);if(r.position==="fixed")return null}var i=ep(t);for(Y_(i)&&(i=i.host);Tr(i)&&["html","body"].indexOf(Si(i))<0;){var s=is(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Bc(t){for(var e=ir(t),n=TE(t);n&&kF(n)&&is(n).position==="static";)n=TE(n);return n&&(Si(n)==="html"||Si(n)==="body"&&is(n).position==="static")?e:n||xF(t)||e}function ey(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function $u(t,e,n){return Uo(t,lf(e,n))}function CF(t,e,n){var r=$u(t,e,n);return r>n?n:r}function Ok(){return{top:0,right:0,bottom:0,left:0}}function Dk(t){return Object.assign({},Ok(),t)}function jk(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var RF=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Dk(typeof e!="number"?e:jk(e,Ll))};function PF(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ti(n.placement),l=ey(a),c=[bn,rr].indexOf(a)>=0,d=c?"height":"width";if(!(!s||!o)){var f=RF(i.padding,n),g=Z_(s),y=l==="y"?Tn:bn,S=l==="y"?nr:rr,x=n.rects.reference[d]+n.rects.reference[l]-o[l]-n.rects.popper[d],N=o[l]-n.rects.reference[l],A=Bc(s),E=A?l==="y"?A.clientHeight||0:A.clientWidth||0:0,b=x/2-N/2,D=f[y],B=E-g[d]-f[S],R=E/2-g[d]/2+b,k=$u(D,R,B),w=l;n.modifiersData[r]=(e={},e[w]=k,e.centerOffset=k-R,e)}}function NF(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Nk(e.elements.popper,i)&&(e.elements.arrow=i))}const Lk={name:"arrow",enabled:!0,phase:"main",fn:PF,effect:NF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function El(t){return t.split("-")[1]}var OF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function DF(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:yl(n*i)/i||0,y:yl(r*i)/i||0}}function bE(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,d=t.roundOffsets,f=t.isFixed,g=o.x,y=g===void 0?0:g,S=o.y,x=S===void 0?0:S,N=typeof d=="function"?d({x:y,y:x}):{x:y,y:x};y=N.x,x=N.y;var A=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),b=bn,D=Tn,B=window;if(c){var R=Bc(n),k="clientHeight",w="clientWidth";if(R===ir(n)&&(R=ao(n),is(R).position!=="static"&&a==="absolute"&&(k="scrollHeight",w="scrollWidth")),R=R,i===Tn||(i===bn||i===rr)&&s===_l){D=nr;var I=f&&R===B&&B.visualViewport?B.visualViewport.height:R[k];x-=I-r.height,x*=l?1:-1}if(i===bn||(i===Tn||i===nr)&&s===_l){b=rr;var C=f&&R===B&&B.visualViewport?B.visualViewport.width:R[w];y-=C-r.width,y*=l?1:-1}}var O=Object.assign({position:a},c&&OF),V=d===!0?DF({x:y,y:x},ir(n)):{x:y,y:x};if(y=V.x,x=V.y,l){var P;return Object.assign({},O,(P={},P[D]=E?"0":"",P[b]=A?"0":"",P.transform=(B.devicePixelRatio||1)<=1?"translate("+y+"px, "+x+"px)":"translate3d("+y+"px, "+x+"px, 0)",P))}return Object.assign({},O,(e={},e[D]=E?x+"px":"",e[b]=A?y+"px":"",e.transform="",e))}function jF(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Ti(e.placement),variation:El(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,bE(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,bE(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ty={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jF,data:{}};var Ud={passive:!0};function LF(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=ir(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(d){d.addEventListener("scroll",n.update,Ud)}),a&&l.addEventListener("resize",n.update,Ud),function(){s&&c.forEach(function(d){d.removeEventListener("scroll",n.update,Ud)}),a&&l.removeEventListener("resize",n.update,Ud)}}const ny={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:LF,data:{}};var MF={left:"right",right:"left",bottom:"top",top:"bottom"};function gh(t){return t.replace(/left|right|bottom|top/g,function(e){return MF[e]})}var VF={start:"end",end:"start"};function IE(t){return t.replace(/start|end/g,function(e){return VF[e]})}function ry(t){var e=ir(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function iy(t){return wl(ao(t)).left+ry(t).scrollLeft}function FF(t,e){var n=ir(t),r=ao(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=Pk();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+iy(t),y:l}}function $F(t){var e,n=ao(t),r=ry(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Uo(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Uo(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+iy(t),l=-r.scrollTop;return is(i||n).direction==="rtl"&&(a+=Uo(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function sy(t){var e=is(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Mk(t){return["html","body","#document"].indexOf(Si(t))>=0?t.ownerDocument.body:Tr(t)&&sy(t)?t:Mk(ep(t))}function Uu(t,e){var n;e===void 0&&(e=[]);var r=Mk(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=ir(r),o=i?[s].concat(s.visualViewport||[],sy(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Uu(ep(o)))}function Ug(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function UF(t,e){var n=wl(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function SE(t,e,n){return e===Q_?Ug(FF(t,n)):ra(e)?UF(e,n):Ug($F(ao(t)))}function BF(t){var e=Uu(ep(t)),n=["absolute","fixed"].indexOf(is(t).position)>=0,r=n&&Tr(t)?Bc(t):t;return ra(r)?e.filter(function(i){return ra(i)&&Nk(i,r)&&Si(i)!=="body"}):[]}function zF(t,e,n,r){var i=e==="clippingParents"?BF(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var d=SE(t,c,r);return l.top=Uo(d.top,l.top),l.right=lf(d.right,l.right),l.bottom=lf(d.bottom,l.bottom),l.left=Uo(d.left,l.left),l},SE(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Vk(t){var e=t.reference,n=t.element,r=t.placement,i=r?Ti(r):null,s=r?El(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Tn:l={x:o,y:e.y-n.height};break;case nr:l={x:o,y:e.y+e.height};break;case rr:l={x:e.x+e.width,y:a};break;case bn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?ey(i):null;if(c!=null){var d=c==="y"?"height":"width";switch(s){case na:l[c]=l[c]-(e[d]/2-n[d]/2);break;case _l:l[c]=l[c]+(e[d]/2-n[d]/2);break}}return l}function Tl(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?yk:a,c=n.rootBoundary,d=c===void 0?Q_:c,f=n.elementContext,g=f===void 0?Ra:f,y=n.altBoundary,S=y===void 0?!1:y,x=n.padding,N=x===void 0?0:x,A=Dk(typeof N!="number"?N:jk(N,Ll)),E=g===Ra?wk:Ra,b=t.rects.popper,D=t.elements[S?E:g],B=zF(ra(D)?D:D.contextElement||ao(t.elements.popper),l,d,o),R=wl(t.elements.reference),k=Vk({reference:R,element:b,strategy:"absolute",placement:i}),w=Ug(Object.assign({},b,k)),I=g===Ra?w:R,C={top:B.top-I.top+A.top,bottom:I.bottom-B.bottom+A.bottom,left:B.left-I.left+A.left,right:I.right-B.right+A.right},O=t.modifiersData.offset;if(g===Ra&&O){var V=O[i];Object.keys(C).forEach(function(P){var ge=[rr,nr].indexOf(P)>=0?1:-1,Qe=[Tn,nr].indexOf(P)>=0?"y":"x";C[P]+=V[Qe]*ge})}return C}function qF(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?J_:l,d=El(r),f=d?a?Fg:Fg.filter(function(S){return El(S)===d}):Ll,g=f.filter(function(S){return c.indexOf(S)>=0});g.length===0&&(g=f);var y=g.reduce(function(S,x){return S[x]=Tl(t,{placement:x,boundary:i,rootBoundary:s,padding:o})[Ti(x)],S},{});return Object.keys(y).sort(function(S,x){return y[S]-y[x]})}function HF(t){if(Ti(t)===Zf)return[];var e=gh(t);return[IE(t),e,IE(e)]}function WF(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,d=n.boundary,f=n.rootBoundary,g=n.altBoundary,y=n.flipVariations,S=y===void 0?!0:y,x=n.allowedAutoPlacements,N=e.options.placement,A=Ti(N),E=A===N,b=l||(E||!S?[gh(N)]:HF(N)),D=[N].concat(b).reduce(function($e,ze){return $e.concat(Ti(ze)===Zf?qF(e,{placement:ze,boundary:d,rootBoundary:f,padding:c,flipVariations:S,allowedAutoPlacements:x}):ze)},[]),B=e.rects.reference,R=e.rects.popper,k=new Map,w=!0,I=D[0],C=0;C<D.length;C++){var O=D[C],V=Ti(O),P=El(O)===na,ge=[Tn,nr].indexOf(V)>=0,Qe=ge?"width":"height",Je=Tl(e,{placement:O,boundary:d,rootBoundary:f,altBoundary:g,padding:c}),we=ge?P?rr:bn:P?nr:Tn;B[Qe]>R[Qe]&&(we=gh(we));var X=gh(we),ae=[];if(s&&ae.push(Je[V]<=0),a&&ae.push(Je[we]<=0,Je[X]<=0),ae.every(function($e){return $e})){I=O,w=!1;break}k.set(O,ae)}if(w)for(var de=S?3:1,Ae=function(ze){var Ye=D.find(function(et){var Ct=k.get(et);if(Ct)return Ct.slice(0,ze).every(function(Rt){return Rt})});if(Ye)return I=Ye,"break"},Te=de;Te>0;Te--){var H=Ae(Te);if(H==="break")break}e.placement!==I&&(e.modifiersData[r]._skip=!0,e.placement=I,e.reset=!0)}}const Fk={name:"flip",enabled:!0,phase:"main",fn:WF,requiresIfExists:["offset"],data:{_skip:!1}};function AE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function kE(t){return[Tn,rr,nr,bn].some(function(e){return t[e]>=0})}function KF(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Tl(e,{elementContext:"reference"}),a=Tl(e,{altBoundary:!0}),l=AE(o,r),c=AE(a,i,s),d=kE(l),f=kE(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:d,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":f})}const $k={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:KF};function GF(t,e,n){var r=Ti(t),i=[bn,Tn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[bn,rr].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function QF(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=J_.reduce(function(d,f){return d[f]=GF(f,e.rects,s),d},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const Uk={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:QF};function JF(t){var e=t.state,n=t.name;e.modifiersData[n]=Vk({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const oy={name:"popperOffsets",enabled:!0,phase:"read",fn:JF,data:{}};function YF(t){return t==="x"?"y":"x"}function XF(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,d=n.altBoundary,f=n.padding,g=n.tether,y=g===void 0?!0:g,S=n.tetherOffset,x=S===void 0?0:S,N=Tl(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:d}),A=Ti(e.placement),E=El(e.placement),b=!E,D=ey(A),B=YF(D),R=e.modifiersData.popperOffsets,k=e.rects.reference,w=e.rects.popper,I=typeof x=="function"?x(Object.assign({},e.rects,{placement:e.placement})):x,C=typeof I=="number"?{mainAxis:I,altAxis:I}:Object.assign({mainAxis:0,altAxis:0},I),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(R){if(s){var P,ge=D==="y"?Tn:bn,Qe=D==="y"?nr:rr,Je=D==="y"?"height":"width",we=R[D],X=we+N[ge],ae=we-N[Qe],de=y?-w[Je]/2:0,Ae=E===na?k[Je]:w[Je],Te=E===na?-w[Je]:-k[Je],H=e.elements.arrow,$e=y&&H?Z_(H):{width:0,height:0},ze=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ok(),Ye=ze[ge],et=ze[Qe],Ct=$u(0,k[Je],$e[Je]),Rt=b?k[Je]/2-de-Ct-Ye-C.mainAxis:Ae-Ct-Ye-C.mainAxis,ar=b?-k[Je]/2+de+Ct+et+C.mainAxis:Te+Ct+et+C.mainAxis,ie=e.elements.arrow&&Bc(e.elements.arrow),tt=ie?D==="y"?ie.clientTop||0:ie.clientLeft||0:0,Xt=(P=O==null?void 0:O[D])!=null?P:0,ni=we+Rt-Xt-tt,ki=we+ar-Xt,Pt=$u(y?lf(X,ni):X,we,y?Uo(ae,ki):ae);R[D]=Pt,V[D]=Pt-we}if(a){var xi,Ar=D==="x"?Tn:bn,xn=D==="x"?nr:rr,hn=R[B],kr=B==="y"?"height":"width",ls=hn+N[Ar],ri=hn-N[xn],fn=[Tn,bn].indexOf(A)!==-1,Bn=(xi=O==null?void 0:O[B])!=null?xi:0,ct=fn?ls:hn-k[kr]-w[kr]-Bn+C.altAxis,Xe=fn?hn+k[kr]+w[kr]-Bn-C.altAxis:ri,st=y&&fn?CF(ct,hn,Xe):$u(y?ct:ls,hn,y?Xe:ri);R[B]=st,V[B]=st-hn}e.modifiersData[r]=V}}const Bk={name:"preventOverflow",enabled:!0,phase:"main",fn:XF,requiresIfExists:["offset"]};function ZF(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function e$(t){return t===ir(t)||!Tr(t)?ry(t):ZF(t)}function t$(t){var e=t.getBoundingClientRect(),n=yl(e.width)/t.offsetWidth||1,r=yl(e.height)/t.offsetHeight||1;return n!==1||r!==1}function n$(t,e,n){n===void 0&&(n=!1);var r=Tr(e),i=Tr(e)&&t$(e),s=ao(e),o=wl(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Si(e)!=="body"||sy(s))&&(a=e$(e)),Tr(e)?(l=wl(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=iy(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function r$(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function i$(t){var e=r$(t);return Rk.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function s$(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function o$(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var xE={placement:"bottom",modifiers:[],strategy:"absolute"};function CE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function tp(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?xE:i;return function(a,l,c){c===void 0&&(c=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},xE,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],g=!1,y={state:d,setOptions:function(A){var E=typeof A=="function"?A(d.options):A;x(),d.options=Object.assign({},s,d.options,E),d.scrollParents={reference:ra(a)?Uu(a):a.contextElement?Uu(a.contextElement):[],popper:Uu(l)};var b=i$(o$([].concat(r,d.options.modifiers)));return d.orderedModifiers=b.filter(function(D){return D.enabled}),S(),y.update()},forceUpdate:function(){if(!g){var A=d.elements,E=A.reference,b=A.popper;if(CE(E,b)){d.rects={reference:n$(E,Bc(b),d.options.strategy==="fixed"),popper:Z_(b)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(C){return d.modifiersData[C.name]=Object.assign({},C.data)});for(var D=0;D<d.orderedModifiers.length;D++){if(d.reset===!0){d.reset=!1,D=-1;continue}var B=d.orderedModifiers[D],R=B.fn,k=B.options,w=k===void 0?{}:k,I=B.name;typeof R=="function"&&(d=R({state:d,options:w,name:I,instance:y})||d)}}}},update:s$(function(){return new Promise(function(N){y.forceUpdate(),N(d)})}),destroy:function(){x(),g=!0}};if(!CE(a,l))return y;y.setOptions(c).then(function(N){!g&&c.onFirstUpdate&&c.onFirstUpdate(N)});function S(){d.orderedModifiers.forEach(function(N){var A=N.name,E=N.options,b=E===void 0?{}:E,D=N.effect;if(typeof D=="function"){var B=D({state:d,name:A,instance:y,options:b}),R=function(){};f.push(B||R)}})}function x(){f.forEach(function(N){return N()}),f=[]}return y}}var a$=tp(),l$=[ny,oy,ty,X_],u$=tp({defaultModifiers:l$}),c$=[ny,oy,ty,X_,Uk,Fk,Bk,Lk,$k],d$=tp({defaultModifiers:c$});const h$=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Ak,afterRead:bk,afterWrite:Ck,applyStyles:X_,arrow:Lk,auto:Zf,basePlacements:Ll,beforeMain:Ik,beforeRead:Ek,beforeWrite:kk,bottom:nr,clippingParents:yk,computeStyles:ty,createPopper:d$,createPopperBase:a$,createPopperLite:u$,detectOverflow:Tl,end:_l,eventListeners:ny,flip:Fk,hide:$k,left:bn,main:Sk,modifierPhases:Rk,offset:Uk,placements:J_,popper:Ra,popperGenerator:tp,popperOffsets:oy,preventOverflow:Bk,read:Tk,reference:wk,right:rr,start:na,top:Tn,variationPlacements:Fg,viewport:Q_,write:xk},Symbol.toStringTag,{value:"Module"})),f$=XE(h$);/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r(f$)})(er,function(n){function r(M){const h=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(M){for(const _ in M)if(_!=="default"){const j=Object.getOwnPropertyDescriptor(M,_);Object.defineProperty(h,_,j.get?j:{enumerable:!0,get:()=>M[_]})}}return h.default=M,Object.freeze(h)}const i=r(n),s=new Map,o={set(M,h,_){s.has(M)||s.set(M,new Map);const j=s.get(M);j.has(h)||j.size===0?j.set(h,_):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(j.keys())[0]}.`)},get:(M,h)=>s.has(M)&&s.get(M).get(h)||null,remove(M,h){if(!s.has(M))return;const _=s.get(M);_.delete(h),_.size===0&&s.delete(M)}},a="transitionend",l=M=>(M&&window.CSS&&window.CSS.escape&&(M=M.replace(/#([^\s"#']+)/g,(h,_)=>`#${CSS.escape(_)}`)),M),c=M=>{M.dispatchEvent(new Event(a))},d=M=>!(!M||typeof M!="object")&&(M.jquery!==void 0&&(M=M[0]),M.nodeType!==void 0),f=M=>d(M)?M.jquery?M[0]:M:typeof M=="string"&&M.length>0?document.querySelector(l(M)):null,g=M=>{if(!d(M)||M.getClientRects().length===0)return!1;const h=getComputedStyle(M).getPropertyValue("visibility")==="visible",_=M.closest("details:not([open])");if(!_)return h;if(_!==M){const j=M.closest("summary");if(j&&j.parentNode!==_||j===null)return!1}return h},y=M=>!M||M.nodeType!==Node.ELEMENT_NODE||!!M.classList.contains("disabled")||(M.disabled!==void 0?M.disabled:M.hasAttribute("disabled")&&M.getAttribute("disabled")!=="false"),S=M=>{if(!document.documentElement.attachShadow)return null;if(typeof M.getRootNode=="function"){const h=M.getRootNode();return h instanceof ShadowRoot?h:null}return M instanceof ShadowRoot?M:M.parentNode?S(M.parentNode):null},x=()=>{},N=M=>{M.offsetHeight},A=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E=[],b=()=>document.documentElement.dir==="rtl",D=M=>{var h;h=()=>{const _=A();if(_){const j=M.NAME,G=_.fn[j];_.fn[j]=M.jQueryInterface,_.fn[j].Constructor=M,_.fn[j].noConflict=()=>(_.fn[j]=G,M.jQueryInterface)}},document.readyState==="loading"?(E.length||document.addEventListener("DOMContentLoaded",()=>{for(const _ of E)_()}),E.push(h)):h()},B=(M,h=[],_=M)=>typeof M=="function"?M(...h):_,R=(M,h,_=!0)=>{if(!_)return void B(M);const j=(oe=>{if(!oe)return 0;let{transitionDuration:Oe,transitionDelay:ft}=window.getComputedStyle(oe);const Pn=Number.parseFloat(Oe),Kn=Number.parseFloat(ft);return Pn||Kn?(Oe=Oe.split(",")[0],ft=ft.split(",")[0],1e3*(Number.parseFloat(Oe)+Number.parseFloat(ft))):0})(h)+5;let G=!1;const ee=({target:oe})=>{oe===h&&(G=!0,h.removeEventListener(a,ee),B(M))};h.addEventListener(a,ee),setTimeout(()=>{G||c(h)},j)},k=(M,h,_,j)=>{const G=M.length;let ee=M.indexOf(h);return ee===-1?!_&&j?M[G-1]:M[0]:(ee+=_?1:-1,j&&(ee=(ee+G)%G),M[Math.max(0,Math.min(ee,G-1))])},w=/[^.]*(?=\..*)\.|.*/,I=/\..*/,C=/::\d+$/,O={};let V=1;const P={mouseenter:"mouseover",mouseleave:"mouseout"},ge=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Qe(M,h){return h&&`${h}::${V++}`||M.uidEvent||V++}function Je(M){const h=Qe(M);return M.uidEvent=h,O[h]=O[h]||{},O[h]}function we(M,h,_=null){return Object.values(M).find(j=>j.callable===h&&j.delegationSelector===_)}function X(M,h,_){const j=typeof h=="string",G=j?_:h||_;let ee=Te(M);return ge.has(ee)||(ee=M),[j,G,ee]}function ae(M,h,_,j,G){if(typeof h!="string"||!M)return;let[ee,oe,Oe]=X(h,_,j);h in P&&(oe=(To=>function(Vr){if(!Vr.relatedTarget||Vr.relatedTarget!==Vr.delegateTarget&&!Vr.delegateTarget.contains(Vr.relatedTarget))return To.call(this,Vr)})(oe));const ft=Je(M),Pn=ft[Oe]||(ft[Oe]={}),Kn=we(Pn,oe,ee?_:null);if(Kn)return void(Kn.oneOff=Kn.oneOff&&G);const Mr=Qe(oe,h.replace(w,"")),Oi=ee?function(Di,To,Vr){return function eu(_d){const Mx=Di.querySelectorAll(To);for(let{target:bo}=_d;bo&&bo!==this;bo=bo.parentNode)for(const Vx of Mx)if(Vx===bo)return $e(_d,{delegateTarget:bo}),eu.oneOff&&H.off(Di,_d.type,To,Vr),Vr.apply(bo,[_d])}}(M,_,oe):function(Di,To){return function Vr(eu){return $e(eu,{delegateTarget:Di}),Vr.oneOff&&H.off(Di,eu.type,To),To.apply(Di,[eu])}}(M,oe);Oi.delegationSelector=ee?_:null,Oi.callable=oe,Oi.oneOff=G,Oi.uidEvent=Mr,Pn[Mr]=Oi,M.addEventListener(Oe,Oi,ee)}function de(M,h,_,j,G){const ee=we(h[_],j,G);ee&&(M.removeEventListener(_,ee,!!G),delete h[_][ee.uidEvent])}function Ae(M,h,_,j){const G=h[_]||{};for(const[ee,oe]of Object.entries(G))ee.includes(j)&&de(M,h,_,oe.callable,oe.delegationSelector)}function Te(M){return M=M.replace(I,""),P[M]||M}const H={on(M,h,_,j){ae(M,h,_,j,!1)},one(M,h,_,j){ae(M,h,_,j,!0)},off(M,h,_,j){if(typeof h!="string"||!M)return;const[G,ee,oe]=X(h,_,j),Oe=oe!==h,ft=Je(M),Pn=ft[oe]||{},Kn=h.startsWith(".");if(ee===void 0){if(Kn)for(const Mr of Object.keys(ft))Ae(M,ft,Mr,h.slice(1));for(const[Mr,Oi]of Object.entries(Pn)){const Di=Mr.replace(C,"");Oe&&!h.includes(Di)||de(M,ft,oe,Oi.callable,Oi.delegationSelector)}}else{if(!Object.keys(Pn).length)return;de(M,ft,oe,ee,G?_:null)}},trigger(M,h,_){if(typeof h!="string"||!M)return null;const j=A();let G=null,ee=!0,oe=!0,Oe=!1;h!==Te(h)&&j&&(G=j.Event(h,_),j(M).trigger(G),ee=!G.isPropagationStopped(),oe=!G.isImmediatePropagationStopped(),Oe=G.isDefaultPrevented());const ft=$e(new Event(h,{bubbles:ee,cancelable:!0}),_);return Oe&&ft.preventDefault(),oe&&M.dispatchEvent(ft),ft.defaultPrevented&&G&&G.preventDefault(),ft}};function $e(M,h={}){for(const[_,j]of Object.entries(h))try{M[_]=j}catch{Object.defineProperty(M,_,{configurable:!0,get:()=>j})}return M}function ze(M){if(M==="true")return!0;if(M==="false")return!1;if(M===Number(M).toString())return Number(M);if(M===""||M==="null")return null;if(typeof M!="string")return M;try{return JSON.parse(decodeURIComponent(M))}catch{return M}}function Ye(M){return M.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const et={setDataAttribute(M,h,_){M.setAttribute(`data-bs-${Ye(h)}`,_)},removeDataAttribute(M,h){M.removeAttribute(`data-bs-${Ye(h)}`)},getDataAttributes(M){if(!M)return{};const h={},_=Object.keys(M.dataset).filter(j=>j.startsWith("bs")&&!j.startsWith("bsConfig"));for(const j of _){let G=j.replace(/^bs/,"");G=G.charAt(0).toLowerCase()+G.slice(1,G.length),h[G]=ze(M.dataset[j])}return h},getDataAttribute:(M,h)=>ze(M.getAttribute(`data-bs-${Ye(h)}`))};class Ct{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,_){const j=d(_)?et.getDataAttribute(_,"config"):{};return{...this.constructor.Default,...typeof j=="object"?j:{},...d(_)?et.getDataAttributes(_):{},...typeof h=="object"?h:{}}}_typeCheckConfig(h,_=this.constructor.DefaultType){for(const[G,ee]of Object.entries(_)){const oe=h[G],Oe=d(oe)?"element":(j=oe)==null?`${j}`:Object.prototype.toString.call(j).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(Oe))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${G}" provided type "${Oe}" but expected type "${ee}".`)}var j}}class Rt extends Ct{constructor(h,_){super(),(h=f(h))&&(this._element=h,this._config=this._getConfig(_),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),H.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,_,j=!0){R(h,_,j)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return o.get(f(h),this.DATA_KEY)}static getOrCreateInstance(h,_={}){return this.getInstance(h)||new this(h,typeof _=="object"?_:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const ar=M=>{let h=M.getAttribute("data-bs-target");if(!h||h==="#"){let _=M.getAttribute("href");if(!_||!_.includes("#")&&!_.startsWith("."))return null;_.includes("#")&&!_.startsWith("#")&&(_=`#${_.split("#")[1]}`),h=_&&_!=="#"?_.trim():null}return h?h.split(",").map(_=>l(_)).join(","):null},ie={find:(M,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,M)),findOne:(M,h=document.documentElement)=>Element.prototype.querySelector.call(h,M),children:(M,h)=>[].concat(...M.children).filter(_=>_.matches(h)),parents(M,h){const _=[];let j=M.parentNode.closest(h);for(;j;)_.push(j),j=j.parentNode.closest(h);return _},prev(M,h){let _=M.previousElementSibling;for(;_;){if(_.matches(h))return[_];_=_.previousElementSibling}return[]},next(M,h){let _=M.nextElementSibling;for(;_;){if(_.matches(h))return[_];_=_.nextElementSibling}return[]},focusableChildren(M){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(_=>`${_}:not([tabindex^="-"])`).join(",");return this.find(h,M).filter(_=>!y(_)&&g(_))},getSelectorFromElement(M){const h=ar(M);return h&&ie.findOne(h)?h:null},getElementFromSelector(M){const h=ar(M);return h?ie.findOne(h):null},getMultipleElementsFromSelector(M){const h=ar(M);return h?ie.find(h):[]}},tt=(M,h="hide")=>{const _=`click.dismiss${M.EVENT_KEY}`,j=M.NAME;H.on(document,_,`[data-bs-dismiss="${j}"]`,function(G){if(["A","AREA"].includes(this.tagName)&&G.preventDefault(),y(this))return;const ee=ie.getElementFromSelector(this)||this.closest(`.${j}`);M.getOrCreateInstance(ee)[h]()})},Xt=".bs.alert",ni=`close${Xt}`,ki=`closed${Xt}`;class Pt extends Rt{static get NAME(){return"alert"}close(){if(H.trigger(this._element,ni).defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),H.trigger(this._element,ki),this.dispose()}static jQueryInterface(h){return this.each(function(){const _=Pt.getOrCreateInstance(this);if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h](this)}})}}tt(Pt,"close"),D(Pt);const xi='[data-bs-toggle="button"]';class Ar extends Rt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const _=Ar.getOrCreateInstance(this);h==="toggle"&&_[h]()})}}H.on(document,"click.bs.button.data-api",xi,M=>{M.preventDefault();const h=M.target.closest(xi);Ar.getOrCreateInstance(h).toggle()}),D(Ar);const xn=".bs.swipe",hn=`touchstart${xn}`,kr=`touchmove${xn}`,ls=`touchend${xn}`,ri=`pointerdown${xn}`,fn=`pointerup${xn}`,Bn={endCallback:null,leftCallback:null,rightCallback:null},ct={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Xe extends Ct{constructor(h,_){super(),this._element=h,h&&Xe.isSupported()&&(this._config=this._getConfig(_),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Bn}static get DefaultType(){return ct}static get NAME(){return"swipe"}dispose(){H.off(this._element,xn)}_start(h){this._supportPointerEvents?this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX):this._deltaX=h.touches[0].clientX}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),B(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=40)return;const _=h/this._deltaX;this._deltaX=0,_&&B(_>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(H.on(this._element,ri,h=>this._start(h)),H.on(this._element,fn,h=>this._end(h)),this._element.classList.add("pointer-event")):(H.on(this._element,hn,h=>this._start(h)),H.on(this._element,kr,h=>this._move(h)),H.on(this._element,ls,h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&(h.pointerType==="pen"||h.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const st=".bs.carousel",pn=".data-api",xr="next",zn="prev",Cn="left",Zt="right",uo=`slide${st}`,ii=`slid${st}`,pa=`keydown${st}`,$l=`mouseenter${st}`,us=`mouseleave${st}`,Ci=`dragstart${st}`,co=`load${st}${pn}`,Cr=`click${st}${pn}`,Rr="carousel",lr="active",ur=".active",cs=".carousel-item",ds=ur+cs,ho={ArrowLeft:Zt,ArrowRight:Cn},cr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ri={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class dt extends Rt{constructor(h,_){super(h,_),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ie.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Rr&&this.cycle()}static get Default(){return cr}static get DefaultType(){return Ri}static get NAME(){return"carousel"}next(){this._slide(xr)}nextWhenVisible(){!document.hidden&&g(this._element)&&this.next()}prev(){this._slide(zn)}pause(){this._isSliding&&c(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?H.one(this._element,ii,()=>this.cycle()):this.cycle())}to(h){const _=this._getItems();if(h>_.length-1||h<0)return;if(this._isSliding)return void H.one(this._element,ii,()=>this.to(h));const j=this._getItemIndex(this._getActive());if(j===h)return;const G=h>j?xr:zn;this._slide(G,_[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&H.on(this._element,pa,h=>this._keydown(h)),this._config.pause==="hover"&&(H.on(this._element,$l,()=>this.pause()),H.on(this._element,us,()=>this._maybeEnableCycle())),this._config.touch&&Xe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const _ of ie.find(".carousel-item img",this._element))H.on(_,Ci,j=>j.preventDefault());const h={leftCallback:()=>this._slide(this._directionToOrder(Cn)),rightCallback:()=>this._slide(this._directionToOrder(Zt)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Xe(this._element,h)}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const _=ho[h.key];_&&(h.preventDefault(),this._slide(this._directionToOrder(_)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const _=ie.findOne(ur,this._indicatorsElement);_.classList.remove(lr),_.removeAttribute("aria-current");const j=ie.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);j&&(j.classList.add(lr),j.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const _=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=_||this._config.defaultInterval}_slide(h,_=null){if(this._isSliding)return;const j=this._getActive(),G=h===xr,ee=_||k(this._getItems(),j,G,this._config.wrap);if(ee===j)return;const oe=this._getItemIndex(ee),Oe=Mr=>H.trigger(this._element,Mr,{relatedTarget:ee,direction:this._orderToDirection(h),from:this._getItemIndex(j),to:oe});if(Oe(uo).defaultPrevented||!j||!ee)return;const ft=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(oe),this._activeElement=ee;const Pn=G?"carousel-item-start":"carousel-item-end",Kn=G?"carousel-item-next":"carousel-item-prev";ee.classList.add(Kn),N(ee),j.classList.add(Pn),ee.classList.add(Pn),this._queueCallback(()=>{ee.classList.remove(Pn,Kn),ee.classList.add(lr),j.classList.remove(lr,Kn,Pn),this._isSliding=!1,Oe(ii)},j,this._isAnimated()),ft&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ie.findOne(ds,this._element)}_getItems(){return ie.find(cs,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return b()?h===Cn?zn:xr:h===Cn?xr:zn}_orderToDirection(h){return b()?h===zn?Cn:Zt:h===zn?Zt:Cn}static jQueryInterface(h){return this.each(function(){const _=dt.getOrCreateInstance(this,h);if(typeof h!="number"){if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h]()}}else _.to(h)})}}H.on(document,Cr,"[data-bs-slide], [data-bs-slide-to]",function(M){const h=ie.getElementFromSelector(this);if(!h||!h.classList.contains(Rr))return;M.preventDefault();const _=dt.getOrCreateInstance(h),j=this.getAttribute("data-bs-slide-to");return j?(_.to(j),void _._maybeEnableCycle()):et.getDataAttribute(this,"slide")==="next"?(_.next(),void _._maybeEnableCycle()):(_.prev(),void _._maybeEnableCycle())}),H.on(window,co,()=>{const M=ie.find('[data-bs-ride="carousel"]');for(const h of M)dt.getOrCreateInstance(h)}),D(dt);const si=".bs.collapse",L=`show${si}`,$=`shown${si}`,z=`hide${si}`,W=`hidden${si}`,te=`click${si}.data-api`,se="show",he="collapse",Y="collapsing",ve=`:scope .${he} .${he}`,ue='[data-bs-toggle="collapse"]',ce={parent:null,toggle:!0},ke={parent:"(null|element)",toggle:"boolean"};class xe extends Rt{constructor(h,_){super(h,_),this._isTransitioning=!1,this._triggerArray=[];const j=ie.find(ue);for(const G of j){const ee=ie.getSelectorFromElement(G),oe=ie.find(ee).filter(Oe=>Oe===this._element);ee!==null&&oe.length&&this._triggerArray.push(G)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ce}static get DefaultType(){return ke}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(G=>G!==this._element).map(G=>xe.getOrCreateInstance(G,{toggle:!1}))),h.length&&h[0]._isTransitioning||H.trigger(this._element,L).defaultPrevented)return;for(const G of h)G.hide();const _=this._getDimension();this._element.classList.remove(he),this._element.classList.add(Y),this._element.style[_]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const j=`scroll${_[0].toUpperCase()+_.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he,se),this._element.style[_]="",H.trigger(this._element,$)},this._element,!0),this._element.style[_]=`${this._element[j]}px`}hide(){if(this._isTransitioning||!this._isShown()||H.trigger(this._element,z).defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,N(this._element),this._element.classList.add(Y),this._element.classList.remove(he,se);for(const _ of this._triggerArray){const j=ie.getElementFromSelector(_);j&&!this._isShown(j)&&this._addAriaAndCollapsedClass([_],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he),H.trigger(this._element,W)},this._element,!0)}_isShown(h=this._element){return h.classList.contains(se)}_configAfterMerge(h){return h.toggle=!!h.toggle,h.parent=f(h.parent),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren(ue);for(const _ of h){const j=ie.getElementFromSelector(_);j&&this._addAriaAndCollapsedClass([_],this._isShown(j))}}_getFirstLevelChildren(h){const _=ie.find(ve,this._config.parent);return ie.find(h,this._config.parent).filter(j=>!_.includes(j))}_addAriaAndCollapsedClass(h,_){if(h.length)for(const j of h)j.classList.toggle("collapsed",!_),j.setAttribute("aria-expanded",_)}static jQueryInterface(h){const _={};return typeof h=="string"&&/show|hide/.test(h)&&(_.toggle=!1),this.each(function(){const j=xe.getOrCreateInstance(this,_);if(typeof h=="string"){if(j[h]===void 0)throw new TypeError(`No method named "${h}"`);j[h]()}})}}H.on(document,te,ue,function(M){(M.target.tagName==="A"||M.delegateTarget&&M.delegateTarget.tagName==="A")&&M.preventDefault();for(const h of ie.getMultipleElementsFromSelector(this))xe.getOrCreateInstance(h,{toggle:!1}).toggle()}),D(xe);const Me="dropdown",be=".bs.dropdown",ot=".data-api",at="ArrowUp",Pr="ArrowDown",dr=`hide${be}`,qn=`hidden${be}`,Nr=`show${be}`,hr=`shown${be}`,Nt=`click${be}${ot}`,mn=`keydown${be}${ot}`,oi=`keyup${be}${ot}`,Hn="show",pe='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ze=`${pe}.${Hn}`,Et=".dropdown-menu",Ue=b()?"top-end":"top-start",gn=b()?"top-start":"top-end",fo=b()?"bottom-end":"bottom-start",ma=b()?"bottom-start":"bottom-end",cp=b()?"left-start":"right-start",dp=b()?"right-start":"left-start",Kc={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Gc={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Wn extends Rt{constructor(h,_){super(h,_),this._popper=null,this._parent=this._element.parentNode,this._menu=ie.next(this._element,Et)[0]||ie.prev(this._element,Et)[0]||ie.findOne(Et,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Kc}static get DefaultType(){return Gc}static get NAME(){return Me}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!H.trigger(this._element,Nr,h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const _ of[].concat(...document.body.children))H.on(_,"mouseover",x);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Hn),this._element.classList.add(Hn),H.trigger(this._element,hr,h)}}hide(){if(y(this._element)||!this._isShown())return;const h={relatedTarget:this._element};this._completeHide(h)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!H.trigger(this._element,dr,h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const _ of[].concat(...document.body.children))H.off(_,"mouseover",x);this._popper&&this._popper.destroy(),this._menu.classList.remove(Hn),this._element.classList.remove(Hn),this._element.setAttribute("aria-expanded","false"),et.removeDataAttribute(this._menu,"popper"),H.trigger(this._element,qn,h)}}_getConfig(h){if(typeof(h=super._getConfig(h)).reference=="object"&&!d(h.reference)&&typeof h.reference.getBoundingClientRect!="function")throw new TypeError(`${Me.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(i===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let h=this._element;this._config.reference==="parent"?h=this._parent:d(this._config.reference)?h=f(this._config.reference):typeof this._config.reference=="object"&&(h=this._config.reference);const _=this._getPopperConfig();this._popper=i.createPopper(h,this._menu,_)}_isShown(){return this._menu.classList.contains(Hn)}_getPlacement(){const h=this._parent;if(h.classList.contains("dropend"))return cp;if(h.classList.contains("dropstart"))return dp;if(h.classList.contains("dropup-center"))return"top";if(h.classList.contains("dropdown-center"))return"bottom";const _=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return h.classList.contains("dropup")?_?gn:Ue:_?ma:fo}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(_=>Number.parseInt(_,10)):typeof h=="function"?_=>h(_,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(et.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,...B(this._config.popperConfig,[h])}}_selectMenuItem({key:h,target:_}){const j=ie.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(G=>g(G));j.length&&k(j,_,h===Pr,!j.includes(_)).focus()}static jQueryInterface(h){return this.each(function(){const _=Wn.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0)throw new TypeError(`No method named "${h}"`);_[h]()}})}static clearMenus(h){if(h.button===2||h.type==="keyup"&&h.key!=="Tab")return;const _=ie.find(Ze);for(const j of _){const G=Wn.getInstance(j);if(!G||G._config.autoClose===!1)continue;const ee=h.composedPath(),oe=ee.includes(G._menu);if(ee.includes(G._element)||G._config.autoClose==="inside"&&!oe||G._config.autoClose==="outside"&&oe||G._menu.contains(h.target)&&(h.type==="keyup"&&h.key==="Tab"||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const Oe={relatedTarget:G._element};h.type==="click"&&(Oe.clickEvent=h),G._completeHide(Oe)}}static dataApiKeydownHandler(h){const _=/input|textarea/i.test(h.target.tagName),j=h.key==="Escape",G=[at,Pr].includes(h.key);if(!G&&!j||_&&!j)return;h.preventDefault();const ee=this.matches(pe)?this:ie.prev(this,pe)[0]||ie.next(this,pe)[0]||ie.findOne(pe,h.delegateTarget.parentNode),oe=Wn.getOrCreateInstance(ee);if(G)return h.stopPropagation(),oe.show(),void oe._selectMenuItem(h);oe._isShown()&&(h.stopPropagation(),oe.hide(),ee.focus())}}H.on(document,mn,pe,Wn.dataApiKeydownHandler),H.on(document,mn,Et,Wn.dataApiKeydownHandler),H.on(document,Nt,Wn.clearMenus),H.on(document,oi,Wn.clearMenus),H.on(document,Nt,pe,function(M){M.preventDefault(),Wn.getOrCreateInstance(this).toggle()}),D(Wn);const ai="backdrop",fr="show",po=`mousedown.bs.${ai}`,ga={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Qc={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class We extends Ct{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return ga}static get DefaultType(){return Qc}static get NAME(){return ai}show(h){if(!this._config.isVisible)return void B(h);this._append();const _=this._getElement();this._config.isAnimated&&N(_),_.classList.add(fr),this._emulateAnimation(()=>{B(h)})}hide(h){this._config.isVisible?(this._getElement().classList.remove(fr),this._emulateAnimation(()=>{this.dispose(),B(h)})):B(h)}dispose(){this._isAppended&&(H.off(this._element,po),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=f(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),H.on(h,po,()=>{B(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){R(h,this._getElement(),this._config.isAnimated)}}const Pi=".bs.focustrap",mo=`focusin${Pi}`,go=`keydown.tab${Pi}`,Jc="backward",Yc={autofocus:!0,trapElement:null},hp={autofocus:"boolean",trapElement:"element"};class Xc extends Ct{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Yc}static get DefaultType(){return hp}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),H.off(document,Pi),H.on(document,mo,h=>this._handleFocusin(h)),H.on(document,go,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,H.off(document,Pi))}_handleFocusin(h){const{trapElement:_}=this._config;if(h.target===document||h.target===_||_.contains(h.target))return;const j=ie.focusableChildren(_);j.length===0?_.focus():this._lastTabNavDirection===Jc?j[j.length-1].focus():j[0].focus()}_handleKeydown(h){h.key==="Tab"&&(this._lastTabNavDirection=h.shiftKey?Jc:"forward")}}const Zc=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ed=".sticky-top",li="padding-right",Or="margin-right";class va{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,li,_=>_+h),this._setElementAttributes(Zc,li,_=>_+h),this._setElementAttributes(ed,Or,_=>_-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,li),this._resetElementAttributes(Zc,li),this._resetElementAttributes(ed,Or)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,_,j){const G=this.getWidth();this._applyManipulationCallback(h,ee=>{if(ee!==this._element&&window.innerWidth>ee.clientWidth+G)return;this._saveInitialAttribute(ee,_);const oe=window.getComputedStyle(ee).getPropertyValue(_);ee.style.setProperty(_,`${j(Number.parseFloat(oe))}px`)})}_saveInitialAttribute(h,_){const j=h.style.getPropertyValue(_);j&&et.setDataAttribute(h,_,j)}_resetElementAttributes(h,_){this._applyManipulationCallback(h,j=>{const G=et.getDataAttribute(j,_);G!==null?(et.removeDataAttribute(j,_),j.style.setProperty(_,G)):j.style.removeProperty(_)})}_applyManipulationCallback(h,_){if(d(h))_(h);else for(const j of ie.find(h,this._element))_(j)}}const vn=".bs.modal",td=`hide${vn}`,hs=`hidePrevented${vn}`,nd=`hidden${vn}`,rd=`show${vn}`,fp=`shown${vn}`,ui=`resize${vn}`,pp=`click.dismiss${vn}`,mp=`mousedown.dismiss${vn}`,vo=`keydown.dismiss${vn}`,_a=`click${vn}.data-api`,Ul="modal-open",fs="show",Ni="modal-static",id={backdrop:!0,focus:!0,keyboard:!0},Bl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Be extends Rt{constructor(h,_){super(h,_),this._dialog=ie.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new va,this._addEventListeners()}static get Default(){return id}static get DefaultType(){return Bl}static get NAME(){return"modal"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||H.trigger(this._element,rd,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ul),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){this._isShown&&!this._isTransitioning&&(H.trigger(this._element,td).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(fs),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){H.off(window,vn),H.off(this._dialog,vn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new We({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Xc({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const _=ie.findOne(".modal-body",this._dialog);_&&(_.scrollTop=0),N(this._element),this._element.classList.add(fs),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,H.trigger(this._element,fp,{relatedTarget:h})},this._dialog,this._isAnimated())}_addEventListeners(){H.on(this._element,vo,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),H.on(window,ui,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),H.on(this._element,mp,h=>{H.one(this._element,pp,_=>{this._element===h.target&&this._element===_.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ul),this._resetAdjustments(),this._scrollBar.reset(),H.trigger(this._element,nd)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(H.trigger(this._element,hs).defaultPrevented)return;const h=this._element.scrollHeight>document.documentElement.clientHeight,_=this._element.style.overflowY;_==="hidden"||this._element.classList.contains(Ni)||(h||(this._element.style.overflowY="hidden"),this._element.classList.add(Ni),this._queueCallback(()=>{this._element.classList.remove(Ni),this._queueCallback(()=>{this._element.style.overflowY=_},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,_=this._scrollBar.getWidth(),j=_>0;if(j&&!h){const G=b()?"paddingLeft":"paddingRight";this._element.style[G]=`${_}px`}if(!j&&h){const G=b()?"paddingRight":"paddingLeft";this._element.style[G]=`${_}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,_){return this.each(function(){const j=Be.getOrCreateInstance(this,h);if(typeof h=="string"){if(j[h]===void 0)throw new TypeError(`No method named "${h}"`);j[h](_)}})}}H.on(document,_a,'[data-bs-toggle="modal"]',function(M){const h=ie.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&M.preventDefault(),H.one(h,rd,j=>{j.defaultPrevented||H.one(h,nd,()=>{g(this)&&this.focus()})});const _=ie.findOne(".modal.show");_&&Be.getInstance(_).hide(),Be.getOrCreateInstance(h).toggle(this)}),tt(Be),D(Be);const Dr=".bs.offcanvas",sd=".data-api",od=`load${Dr}${sd}`,zl="show",ql="showing",_o="hiding",Hl=".offcanvas.show",jr=`show${Dr}`,ad=`shown${Dr}`,gp=`hide${Dr}`,ps=`hidePrevented${Dr}`,Wl=`hidden${Dr}`,Kl=`resize${Dr}`,ya=`click${Dr}${sd}`,ld=`keydown.dismiss${Dr}`,wa={backdrop:!0,keyboard:!0,scroll:!1},vp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class pr extends Rt{constructor(h,_){super(h,_),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return wa}static get DefaultType(){return vp}static get NAME(){return"offcanvas"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||H.trigger(this._element,jr,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new va().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ql),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(zl),this._element.classList.remove(ql),H.trigger(this._element,ad,{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(H.trigger(this._element,gp).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(_o),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(zl,_o),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new va().reset(),H.trigger(this._element,Wl)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=!!this._config.backdrop;return new We({className:"offcanvas-backdrop",isVisible:h,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:h?()=>{this._config.backdrop!=="static"?this.hide():H.trigger(this._element,ps)}:null})}_initializeFocusTrap(){return new Xc({trapElement:this._element})}_addEventListeners(){H.on(this._element,ld,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():H.trigger(this._element,ps))})}static jQueryInterface(h){return this.each(function(){const _=pr.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h](this)}})}}H.on(document,ya,'[data-bs-toggle="offcanvas"]',function(M){const h=ie.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this))return;H.one(h,Wl,()=>{g(this)&&this.focus()});const _=ie.findOne(Hl);_&&_!==h&&pr.getInstance(_).hide(),pr.getOrCreateInstance(h).toggle(this)}),H.on(window,od,()=>{for(const M of ie.find(Hl))pr.getOrCreateInstance(M).show()}),H.on(window,Kl,()=>{for(const M of ie.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(M).position!=="fixed"&&pr.getOrCreateInstance(M).hide()}),tt(pr),D(pr);const ms={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},ud=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),cd=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Gl=(M,h)=>{const _=M.nodeName.toLowerCase();return h.includes(_)?!ud.has(_)||!!cd.test(M.nodeValue):h.filter(j=>j instanceof RegExp).some(j=>j.test(_))},Ql={allowList:ms,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},dd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ea={entry:"(string|element|function|null)",selector:"(string|element)"};class hd extends Ct{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return Ql}static get DefaultType(){return dd}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[G,ee]of Object.entries(this._config.content))this._setContent(h,ee,G);const _=h.children[0],j=this._resolvePossibleFunction(this._config.extraClass);return j&&_.classList.add(...j.split(" ")),_}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[_,j]of Object.entries(h))super._typeCheckConfig({selector:_,entry:j},Ea)}_setContent(h,_,j){const G=ie.findOne(j,h);G&&((_=this._resolvePossibleFunction(_))?d(_)?this._putElementInTemplate(f(_),G):this._config.html?G.innerHTML=this._maybeSanitize(_):G.textContent=_:G.remove())}_maybeSanitize(h){return this._config.sanitize?function(_,j,G){if(!_.length)return _;if(G&&typeof G=="function")return G(_);const ee=new window.DOMParser().parseFromString(_,"text/html"),oe=[].concat(...ee.body.querySelectorAll("*"));for(const Oe of oe){const ft=Oe.nodeName.toLowerCase();if(!Object.keys(j).includes(ft)){Oe.remove();continue}const Pn=[].concat(...Oe.attributes),Kn=[].concat(j["*"]||[],j[ft]||[]);for(const Mr of Pn)Gl(Mr,Kn)||Oe.removeAttribute(Mr.nodeName)}return ee.body.innerHTML}(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return B(h,[this])}_putElementInTemplate(h,_){if(this._config.html)return _.innerHTML="",void _.append(h);_.textContent=h.textContent}}const fd=new Set(["sanitize","allowList","sanitizeFn"]),Lr="fade",yo="show",Jl=".modal",Yl="hide.bs.modal",gs="hover",vs="focus",_n={AUTO:"auto",TOP:"top",RIGHT:b()?"left":"right",BOTTOM:"bottom",LEFT:b()?"right":"left"},pd={allowList:ms,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},md={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Rn extends Rt{constructor(h,_){if(i===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(h,_),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return pd}static get DefaultType(){return md}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),H.off(this._element.closest(Jl),Yl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const h=H.trigger(this._element,this.constructor.eventName("show")),_=(S(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!_)return;this._disposePopper();const j=this._getTipElement();this._element.setAttribute("aria-describedby",j.getAttribute("id"));const{container:G}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(G.append(j),H.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(j),j.classList.add(yo),"ontouchstart"in document.documentElement)for(const ee of[].concat(...document.body.children))H.on(ee,"mouseover",x);this._queueCallback(()=>{H.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!H.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(yo),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))H.off(h,"mouseover",x);this._activeTrigger.click=!1,this._activeTrigger[vs]=!1,this._activeTrigger[gs]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),H.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const _=this._getTemplateFactory(h).toHtml();if(!_)return null;_.classList.remove(Lr,yo),_.classList.add(`bs-${this.constructor.NAME}-auto`);const j=(G=>{do G+=Math.floor(1e6*Math.random());while(document.getElementById(G));return G})(this.constructor.NAME).toString();return _.setAttribute("id",j),this._isAnimated()&&_.classList.add(Lr),_}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new hd({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Lr)}_isShown(){return this.tip&&this.tip.classList.contains(yo)}_createPopper(h){const _=B(this._config.placement,[this,h,this._element]),j=_n[_.toUpperCase()];return i.createPopper(this._element,h,this._getPopperConfig(j))}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(_=>Number.parseInt(_,10)):typeof h=="function"?_=>h(_,this._element):h}_resolvePossibleFunction(h){return B(h,[this._element])}_getPopperConfig(h){const _={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:j=>{this._getTipElement().setAttribute("data-popper-placement",j.state.placement)}}]};return{..._,...B(this._config.popperConfig,[_])}}_setListeners(){const h=this._config.trigger.split(" ");for(const _ of h)if(_==="click")H.on(this._element,this.constructor.eventName("click"),this._config.selector,j=>{this._initializeOnDelegatedTarget(j).toggle()});else if(_!=="manual"){const j=_===gs?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),G=_===gs?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");H.on(this._element,j,this._config.selector,ee=>{const oe=this._initializeOnDelegatedTarget(ee);oe._activeTrigger[ee.type==="focusin"?vs:gs]=!0,oe._enter()}),H.on(this._element,G,this._config.selector,ee=>{const oe=this._initializeOnDelegatedTarget(ee);oe._activeTrigger[ee.type==="focusout"?vs:gs]=oe._element.contains(ee.relatedTarget),oe._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},H.on(this._element.closest(Jl),Yl,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,_){clearTimeout(this._timeout),this._timeout=setTimeout(h,_)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const _=et.getDataAttributes(this._element);for(const j of Object.keys(_))fd.has(j)&&delete _[j];return h={..._,...typeof h=="object"&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=h.container===!1?document.body:f(h.container),typeof h.delay=="number"&&(h.delay={show:h.delay,hide:h.delay}),typeof h.title=="number"&&(h.title=h.title.toString()),typeof h.content=="number"&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const[_,j]of Object.entries(this._config))this.constructor.Default[_]!==j&&(h[_]=j);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const _=Rn.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0)throw new TypeError(`No method named "${h}"`);_[h]()}})}}D(Rn);const u={...Rn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},m={...Rn.DefaultType,content:"(null|string|element|function)"};class v extends Rn{static get Default(){return u}static get DefaultType(){return m}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const _=v.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0)throw new TypeError(`No method named "${h}"`);_[h]()}})}}D(v);const T=".bs.scrollspy",U=`activate${T}`,q=`click${T}`,Z=`load${T}.data-api`,je="active",Tt="[href]",Ne=".nav-link",Mt=`${Ne}, .nav-item > ${Ne}, .list-group-item`,Vt={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},_s={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class qt extends Rt{constructor(h,_){super(h,_),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Vt}static get DefaultType(){return _s}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=f(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,typeof h.threshold=="string"&&(h.threshold=h.threshold.split(",").map(_=>Number.parseFloat(_))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(H.off(this._config.target,q),H.on(this._config.target,q,Tt,h=>{const _=this._observableSections.get(h.target.hash);if(_){h.preventDefault();const j=this._rootElement||window,G=_.offsetTop-this._element.offsetTop;if(j.scrollTo)return void j.scrollTo({top:G,behavior:"smooth"});j.scrollTop=G}}))}_getNewObserver(){const h={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(_=>this._observerCallback(_),h)}_observerCallback(h){const _=oe=>this._targetLinks.get(`#${oe.target.id}`),j=oe=>{this._previousScrollData.visibleEntryTop=oe.target.offsetTop,this._process(_(oe))},G=(this._rootElement||document.documentElement).scrollTop,ee=G>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=G;for(const oe of h){if(!oe.isIntersecting){this._activeTarget=null,this._clearActiveClass(_(oe));continue}const Oe=oe.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ee&&Oe){if(j(oe),!G)return}else ee||Oe||j(oe)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=ie.find(Tt,this._config.target);for(const _ of h){if(!_.hash||y(_))continue;const j=ie.findOne(decodeURI(_.hash),this._element);g(j)&&(this._targetLinks.set(decodeURI(_.hash),_),this._observableSections.set(_.hash,j))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(je),this._activateParents(h),H.trigger(this._element,U,{relatedTarget:h}))}_activateParents(h){if(h.classList.contains("dropdown-item"))ie.findOne(".dropdown-toggle",h.closest(".dropdown")).classList.add(je);else for(const _ of ie.parents(h,".nav, .list-group"))for(const j of ie.prev(_,Mt))j.classList.add(je)}_clearActiveClass(h){h.classList.remove(je);const _=ie.find(`${Tt}.${je}`,h);for(const j of _)j.classList.remove(je)}static jQueryInterface(h){return this.each(function(){const _=qt.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h]()}})}}H.on(window,Z,()=>{for(const M of ie.find('[data-bs-spy="scroll"]'))qt.getOrCreateInstance(M)}),D(qt);const mr=".bs.tab",Xl=`hide${mr}`,_x=`hidden${mr}`,yx=`show${mr}`,wx=`shown${mr}`,Ex=`click${mr}`,Tx=`keydown${mr}`,bx=`load${mr}`,Ix="ArrowLeft",py="ArrowRight",Sx="ArrowUp",my="ArrowDown",_p="Home",gy="End",wo="active",vy="fade",yp="show",_y=".dropdown-toggle",wp=`:not(${_y})`,yy='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ep=`.nav-link${wp}, .list-group-item${wp}, [role="tab"]${wp}, ${yy}`,Ax=`.${wo}[data-bs-toggle="tab"], .${wo}[data-bs-toggle="pill"], .${wo}[data-bs-toggle="list"]`;class Eo extends Rt{constructor(h){super(h),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),H.on(this._element,Tx,_=>this._keydown(_)))}static get NAME(){return"tab"}show(){const h=this._element;if(this._elemIsActive(h))return;const _=this._getActiveElem(),j=_?H.trigger(_,Xl,{relatedTarget:h}):null;H.trigger(h,yx,{relatedTarget:_}).defaultPrevented||j&&j.defaultPrevented||(this._deactivate(_,h),this._activate(h,_))}_activate(h,_){h&&(h.classList.add(wo),this._activate(ie.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),H.trigger(h,wx,{relatedTarget:_})):h.classList.add(yp)},h,h.classList.contains(vy)))}_deactivate(h,_){h&&(h.classList.remove(wo),h.blur(),this._deactivate(ie.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),H.trigger(h,_x,{relatedTarget:_})):h.classList.remove(yp)},h,h.classList.contains(vy)))}_keydown(h){if(![Ix,py,Sx,my,_p,gy].includes(h.key))return;h.stopPropagation(),h.preventDefault();const _=this._getChildren().filter(G=>!y(G));let j;if([_p,gy].includes(h.key))j=_[h.key===_p?0:_.length-1];else{const G=[py,my].includes(h.key);j=k(_,h.target,G,!0)}j&&(j.focus({preventScroll:!0}),Eo.getOrCreateInstance(j).show())}_getChildren(){return ie.find(Ep,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,_){this._setAttributeIfNotExists(h,"role","tablist");for(const j of _)this._setInitialAttributesOnChild(j)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const _=this._elemIsActive(h),j=this._getOuterElement(h);h.setAttribute("aria-selected",_),j!==h&&this._setAttributeIfNotExists(j,"role","presentation"),_||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const _=ie.getElementFromSelector(h);_&&(this._setAttributeIfNotExists(_,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(_,"aria-labelledby",`${h.id}`))}_toggleDropDown(h,_){const j=this._getOuterElement(h);if(!j.classList.contains("dropdown"))return;const G=(ee,oe)=>{const Oe=ie.findOne(ee,j);Oe&&Oe.classList.toggle(oe,_)};G(_y,wo),G(".dropdown-menu",yp),j.setAttribute("aria-expanded",_)}_setAttributeIfNotExists(h,_,j){h.hasAttribute(_)||h.setAttribute(_,j)}_elemIsActive(h){return h.classList.contains(wo)}_getInnerElement(h){return h.matches(Ep)?h:ie.findOne(Ep,h)}_getOuterElement(h){return h.closest(".nav-item, .list-group-item")||h}static jQueryInterface(h){return this.each(function(){const _=Eo.getOrCreateInstance(this);if(typeof h=="string"){if(_[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);_[h]()}})}}H.on(document,Ex,yy,function(M){["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this)||Eo.getOrCreateInstance(this).show()}),H.on(window,bx,()=>{for(const M of ie.find(Ax))Eo.getOrCreateInstance(M)}),D(Eo);const ys=".bs.toast",kx=`mouseover${ys}`,xx=`mouseout${ys}`,Cx=`focusin${ys}`,Rx=`focusout${ys}`,Px=`hide${ys}`,Nx=`hidden${ys}`,Ox=`show${ys}`,Dx=`shown${ys}`,wy="hide",gd="show",vd="showing",jx={animation:"boolean",autohide:"boolean",delay:"number"},Lx={animation:!0,autohide:!0,delay:5e3};class Zl extends Rt{constructor(h,_){super(h,_),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Lx}static get DefaultType(){return jx}static get NAME(){return"toast"}show(){H.trigger(this._element,Ox).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(wy),N(this._element),this._element.classList.add(gd,vd),this._queueCallback(()=>{this._element.classList.remove(vd),H.trigger(this._element,Dx),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(H.trigger(this._element,Px).defaultPrevented||(this._element.classList.add(vd),this._queueCallback(()=>{this._element.classList.add(wy),this._element.classList.remove(vd,gd),H.trigger(this._element,Nx)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(gd),super.dispose()}isShown(){return this._element.classList.contains(gd)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,_){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=_;break;case"focusin":case"focusout":this._hasKeyboardInteraction=_}if(_)return void this._clearTimeout();const j=h.relatedTarget;this._element===j||this._element.contains(j)||this._maybeScheduleHide()}_setListeners(){H.on(this._element,kx,h=>this._onInteraction(h,!0)),H.on(this._element,xx,h=>this._onInteraction(h,!1)),H.on(this._element,Cx,h=>this._onInteraction(h,!0)),H.on(this._element,Rx,h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const _=Zl.getOrCreateInstance(this,h);if(typeof h=="string"){if(_[h]===void 0)throw new TypeError(`No method named "${h}"`);_[h](this)}})}}return tt(Zl),D(Zl),{Alert:Pt,Button:Ar,Carousel:dt,Collapse:xe,Dropdown:Wn,Modal:Be,Offcanvas:pr,Popover:v,ScrollSpy:qt,Tab:Eo,Toast:Zl,Tooltip:Rn}})})(IF);const p$=()=>p.jsx("header",{className:"header text-center border-bottom py-3",children:p.jsx("h1",{className:"fw-bold",children:p.jsx(ln,{to:"/",className:"text-dark",children:"   "})})}),m$=()=>p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"subheader bg-dark text-light fs-6",style:{padding:"11px 0"},children:p.jsxs("div",{className:"container-xl text-center",children:["  : ",p.jsx("a",{href:"https://t.me/darelom_students",children:" ."})]})}),p.jsx("div",{className:"subheader bg-dark border-top text-light fs-6",style:{padding:"11px 0"},children:p.jsxs("div",{className:"container-xl text-center",children:["   : ",p.jsx(ln,{to:"/find_student",children:"  "}),"."]})})]}),g$=()=>p.jsx("footer",{className:"footer bg-black py-4",children:p.jsxs("div",{className:"container text-center text-light",children:[p.jsxs("div",{className:"d-flex flex-wrap gap-4 gap-sm-5",children:[p.jsxs(dm,{title:" ",children:[p.jsxs($r,{children:[p.jsx("span",{children:"  : "}),p.jsx(ln,{to:"/send_problem",children:"  "}),"."]}),p.jsxs($r,{children:[p.jsx("span",{children:" : "}),p.jsx(ln,{to:"/send_suggestion",children:"  "}),"."]}),p.jsxs($r,{children:[p.jsx("span",{children:" : "}),p.jsx("a",{href:"https://t.me/darelom_students",children:" "}),"."]})]}),p.jsxs(dm,{title:" ",children:[p.jsx($r,{children:p.jsx(ln,{to:"/degrees/grade_1/2023_24",children:"  2023/24."})}),p.jsx($r,{children:p.jsx(ln,{to:"/degrees/grade_2/2023_24",children:"  2023/24."})}),p.jsx($r,{children:p.jsx(ln,{to:"/degrees/grade_3/2023_24",children:"  2023/24."})}),p.jsx($r,{children:p.jsx(ln,{to:"/degrees/grade_4/2023_24",children:"  2023/24."})})]}),p.jsxs(dm,{title:" ",children:[p.jsx($r,{children:p.jsx("a",{href:"https://github.com/iabdwahab/darelom-students",children:"   GitHub."})}),p.jsx($r,{children:p.jsx("a",{href:"https://iabdwahab.github.io",children:" ."})}),p.jsx($r,{children:p.jsx("a",{href:"https://www.linkedin.com/in/iabdwahab/",children:"LinkedIn."})}),p.jsx($r,{children:p.jsx("a",{href:"https://github.com/iabdwahab",children:"GitHub."})})]})]}),p.jsx("hr",{}),p.jsxs("p",{className:"m-0",children:[p.jsx("span",{children:"   : "}),p.jsx("span",{className:"text-warning",children:"  153."})]})]})});function dm({title:t,children:e}){return p.jsxs("div",{className:"text-end",children:[p.jsxs("h4",{className:"mb-3",children:[t,":"]}),e]})}function $r({children:t}){return p.jsxs("p",{className:"m-0",children:["- ",t]})}const v$=()=>{const{pathname:t}=Sr();F.useEffect(()=>{window.scrollTo(0,0)},[t])},_$=()=>{const[t,e]=F.useState(localStorage.getItem("theme")||"light");function n(){document.documentElement.getAttribute("data-bs-theme")==="dark"?(document.documentElement.setAttribute("data-bs-theme","light"),localStorage.setItem("theme","light"),e("light")):(document.documentElement.setAttribute("data-bs-theme","dark"),localStorage.setItem("theme","dark"),e("dark"))}return p.jsx("button",{className:"btn btn-primary w-100 mt-2 p-2",onClick:n,children:t==="light"?"  []":"  [ ]"})},y$=()=>{const t=yt(),e=JSON.parse(localStorage.getItem("loggedinUser")),n=JSON.parse(localStorage.getItem("loggedinUserInfo"));async function r(){await HN(Uc),localStorage.setItem("loggedinUser",null),localStorage.setItem("loggedinUserInfo",null),t("/")}return p.jsx("div",{className:"border-bottom",children:p.jsxs("div",{className:"container-xl py-3",children:[e&&p.jsx(p.Fragment,{children:p.jsxs("p",{className:"fs-4",children:[p.jsx("span",{children:" "}),p.jsxs("span",{className:"fw-bold",children:[n.name,"!"]})]})}),n?p.jsxs("div",{className:"d-flex gap-2",children:[p.jsxs("button",{className:`btn btn-primary w-100 p-2 ${!(n!=null&&n.write_permission)&&"disabled"}`,onClick:()=>t(`/${n==null?void 0:n.grade}/send_question_selector`),children:["  ",!(n!=null&&n.write_permission)&&"[  ]"]}),p.jsx("button",{className:"btn btn-danger w-100 p-2",onClick:r,children:" "})]}):p.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t("signin"),children:" "}),p.jsx(_$,{})]})})},dn=({hasText:t=!0})=>p.jsxs("div",{className:"d-block text-center py-4",children:[p.jsx("div",{className:"spinner-border text-primary",role:"status",children:p.jsx("span",{className:"sr-only d-none",children:"..."})}),t?p.jsx("p",{className:"fw-bold fs-5 mt-2",children:"  ."}):""]}),w$=()=>{const[t,e]=F.useState(!0);return F.useEffect(()=>{JI(Uc,()=>{e(!1)})},[]),p.jsxs("div",{className:"d-flex flex-column min-vh-100",children:[p.jsx(p$,{}),p.jsx(m$,{}),p.jsx(y$,{}),p.jsx("div",{className:"container-xl flex-grow-1 py-3",children:p.jsx("div",{children:t?p.jsx(dn,{}):p.jsx(ZV,{})})}),p.jsx(g$,{}),p.jsx(v$,{})]})},E$=({currentStepIndex:t,setCurrentStepIndex:e,selections:n,setSelections:r})=>{function i(){t>0&&(e(t-1),r(n.slice(0,n.length-1)))}const s=t===0;return p.jsx("button",{className:`btn btn-danger ${s?"d-none":"d-block"}`,onClick:i,children:""})},T$=({option:t,stepsList:e,currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})=>{const o=yt();function a(){if(t.option_data==="test_yourself")return o("/test_yourself");n<e.length-1&&t.will_next?(r(n+1),s([...i,t.option_data])):o(`${i.join("/")}/${t.option_data}`)}const l=`${t.option_text}`;return p.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:a,children:l})},b$=({stepsList:t})=>{var a,l;const e=Sr(),[n,r]=F.useState(((a=e.state)==null?void 0:a.initialStepIndex)||0),[i,s]=F.useState(((l=e.state)==null?void 0:l.selections)||[]),o=t[n];return p.jsxs("div",{children:[p.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[p.jsx("h2",{children:o.title}),p.jsx(E$,{currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})]}),p.jsx("div",{className:"row g-2 my-2",children:o.options.map((c,d)=>{var f;if(n===0||(f=c.availableAt)!=null&&f.includes(i[0]))return p.jsx("div",{className:"col-sm-6",children:p.jsx(T$,{option:c,stepsList:t,currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})},d)})})]})},Un=({children:t,fontSize:e,py:n})=>p.jsx("h2",{className:`fs-${e||4} py-${n||2} fw-medium bg-dark text-center text-light`,children:t}),I$=()=>p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{scope:"col",children:"#"}),p.jsx("th",{scope:"col",children:""}),p.jsx("th",{scope:"col",className:"text-center",children:""})]})}),eo="https://iabdwahab.github.io";async function S$(){return await(await fetch(`${eo}/darelom-students-data/top_degrees.json`)).json()}const A$=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0);return F.useEffect(()=>{async function i(){let s;s=await S$(),e(s),r(!1)}i()},[]),p.jsxs("div",{className:"top-students",children:[p.jsx(Un,{children:" "}),n?p.jsx(dn,{}):p.jsx("div",{className:"row g-2 mt-1",children:t.map((i,s)=>p.jsxs("div",{className:"border-secondary-subtle rounded-2 py-1 my-0 col-lg-6",children:[p.jsx("h3",{className:"fs-5 bg-dark text-light p-2 my-0",children:i.grade_ar_name}),p.jsxs("table",{className:"table table-striped border",children:[p.jsx(I$,{}),p.jsx(k$,{gradeDegree:i})]}),p.jsx(ln,{to:`degrees/${i.grade}/2024_25`,className:"d-block my-2 btn btn-primary fw-bold",children:"  "})]},s))})]})};function k$({gradeDegree:t}){return p.jsx("tbody",{children:t.list.map((e,n)=>p.jsx(x$,{student:e,grade:t.grade},n))})}function x$({student:t,grade:e}){const n=yt();return p.jsxs("tr",{className:"degree_tr-linked",onClick:()=>n(`/degrees/${e}/2024_25/${t.id}`),children:[p.jsx("th",{scope:"row",children:t.rank}),p.jsx("td",{children:t.name}),p.jsxs("td",{className:"text-center",children:["%",t.total_percentage]})]})}const C$=[{title:" :",options:[{option_text:" ",option_data:"grade_1",will_next:!0,available:!0},{option_text:" ",option_data:"grade_2",will_next:!0,available:!0},{option_text:" ",option_data:"grade_3",will_next:!0,available:!0},{option_text:" ",option_data:"grade_4",will_next:!0,available:!0},{option_text:" ",option_data:"general_subjects",will_next:!1,available:!0}]},{title:" ",options:[{option_text:" ",option_data:"schedule",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"books",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"lectures_recordings",will_next:!0,availableAt:["grade_1","grade_2","grade_3"]},{option_text:"  -  ",option_data:"test_yourself_students",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"  [ ]",option_data:"test_yourself",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"more_resources",will_next:!0,availableAt:["grade_2"]},{option_text:"",option_data:"explanations",will_next:!1,availableAt:[]},{option_text:"  ",option_data:"final_exams",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]},{title:"  :",options:[{option_text:"  ",option_data:"term_1",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"  ",option_data:"term_2",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]}],R$=()=>p.jsxs(p.Fragment,{children:[p.jsx(b$,{stepsList:C$}),p.jsx(A$,{})]});async function P$(t,e){const r=await(await fetch(`${eo}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();return r.degrees.sort((i,s)=>s.total-i.total),{degrees:r.degrees,studentsCount:r.degrees.length}}async function N$(t){const e=await OA(t),n=e.docs.map(i=>i.data()),r=e.docs[e.docs.length-1];return{degreesData:n,lastStudentData:r}}async function O$(t){return(await y2(t)).data().count}function Lt(t){return{grade_1:" ",grade_2:" ",grade_3:" ",grade_4:" ",term_1:"  ",term_2:"  ",nahw:"",sarf:"",english:"",elm_allugha:" ",albalagha:"",adab_gahily:" ",falsafa:"",seera_khoalfaa:"  ",quran_ebadat:" ",naqd_qadim:"  ",nsoos_gahilya:" ",farsy:"",ebry:"",riyadat_aamal:" ",nazm_oslobiya:" ",quran_ahwal:"   ",adab_islamy_omawy:"  ",arood:"",mawarith:"",maajim_aswat:"  ",balaghat_quran:" ",qaet_bahth:" ",nsoos_islamya_omawya:"  ",tareekh_omawy_abasy:"  ",aqida:"",adab_moqaran:" ",adab_abasy_andalusy:"  ",olom_quran:" ",tareekh_misr:"  ",tafseer:"",elm_kalam:" ",nsoos_abasya_andalusya:"  ",ittijahat_lughawiya:" ",adab_hadith:" ",hadara_nozom:" ",tasawof:"",osool_fiqh:" ",horoob_salibiya:" ",nsoos_haditha:"  ",naqd_hadith:"  ",mojalad_tasgilat:"  ",groupped_channel:"  "}[t]}const D$=({student:t,grade:e,year:n})=>{const{id:r,name:i,rank:s,total:o,total_percentage:a}=t,l=yt();function c(){l(`/degrees/${e}/${n}/${t.id}`)}return p.jsxs("tr",{className:"degree_tr-linked",onClick:c,children:[p.jsx("th",{scope:"row",className:"text-center",children:s}),p.jsx("td",{className:"text-center",children:r}),p.jsx("td",{style:{whiteSpace:"nowrap"},children:i}),p.jsx("td",{className:"text-center",children:o}),p.jsxs("td",{className:"text-center",children:["%",a]})]})},j$=()=>{const t=[{isCentered:!0,text:"#"},{isCentered:!0,text:" "},{isCentered:!1,text:""},{isCentered:!0,text:""},{isCentered:!0,text:""}];return p.jsx("thead",{children:p.jsx("tr",{children:t.map((e,n)=>p.jsx("th",{scope:"col",className:`${e.isCentered&&"text-center"}`,children:e.text},n))})})},L$=({studentsCount:t})=>{const e=p.jsx("span",{className:"fw-bold",children:t||" "});return p.jsxs("h3",{className:"py-2 fs-4",children:[" : ",e,"."]})},M$=({degreesCollection:t,lastStudent:e,setDataAndHideLoaderFirestore:n})=>{function r(){const i=l2(t,u2("rank","asc"),d2(e),c2(40));n(i)}return p.jsx("button",{className:"btn btn-primary w-100",onClick:r,children:" "})},V$=()=>p.jsx("h3",{className:"fw-bold text-center fs-5",children:" ."}),Ml=()=>p.jsx("button",{className:"btn btn-primary w-100 disabled",children:p.jsx("div",{className:"spinner-border spinner-border-sm",role:"status"})}),F$=()=>{const{grade:t}=kn(),e=yt(),n=F.useRef(null),[r,i]=F.useState(!1);return F.useEffect(()=>{const s=n.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();try{i(!0);const a=s["student_id-input"].value;if(s.checkValidity()){const l=ei(In,`${t}/degrees/2023_24`,a);(await rs(l)).exists()?e(`${a}`):s.classList.add("was-validated"),n.current.reset()}else s.classList.add("was-validated")}catch(a){console.log(a.message)}finally{i(!1)}})},[]),p.jsxs("form",{className:"row g-3 mt-0 needs-validation",noValidate:!0,ref:n,children:[p.jsx("p",{className:"mb-2 fw-bold",children:"  :"}),p.jsxs("div",{className:"col-12 col-sm-10 m-0 mb-2",children:[p.jsx("input",{type:"text",className:"form-control py-2",id:"student_id-input",placeholder:" ",minLength:5,maxLength:5,required:!0}),p.jsx("div",{className:"invalid-feedback",children:"   ."})]}),p.jsx("div",{className:"col-12 col-sm-2 m-0",children:r?p.jsx(Ml,{}):p.jsx("button",{type:"submit",className:"btn btn-primary mb-3 py-2 w-100",children:""})})]})};function RE(t,e){if(t.length)if(e==="duplicated"){t.sort((i,s)=>s.total-i.total);let n=1,r=t[0].total;for(let i=0;i<t.length;i++)t[i].total!==r&&(n=n+1,r=t[i].total),t[i].rank=n}else for(let n=0;n<t.length;n++)t[n].rank=n+1}const $$=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0),{grade:i,year:s}=kn(),[o,a]=F.useState(null),[l,c]=F.useState(null),[d,f]=F.useState(!1),[g,y]=F.useState("normal"),S=F.useRef(null),{pathname:x}=Sr(),[N,A]=bF(),E=$c(In,`${i}/degrees/${s}`);async function b(R){const k=await O$(E),{degreesData:w,lastStudentData:I}=await N$(R);a(k),e([...t,...w]),c(I),I.data().rank===k&&f(!0),r(!1)}async function D(){const R=await P$(i,s);e(R.degrees),a(R.degrees.length),r(!1),f(!0)}function B(R){y(R.target.value),RE(t,R.target.value),A({sortMethod:R.target.value})}return F.useEffect(()=>{D(),S.current&&(S.current.value="normal")},[x]),RE(t,N.get("sortMethod")||"normal"),p.jsxs("div",{children:[p.jsxs(Un,{fontSize:3,py:3,children:["  ",Lt(i)," ",s.split("_").join("/")]}),p.jsx(L$,{studentsCount:o}),p.jsx(F$,{}),p.jsxs("div",{className:"d-flex flex-column gap-2 mb-4",children:[p.jsx("h5",{children:" :"}),p.jsxs("select",{ref:S,onChange:B,className:"form-select w-100","aria-label":"Default select example",style:{width:"100%",maxWidth:"400px"},children:[p.jsx("option",{value:"normal",defaultValue:!0,children:" "}),p.jsx("option",{value:"duplicated",children:"  "})]})]}),p.jsxs("div",{className:"table-responsive border",children:[p.jsxs("table",{className:"table table-striped table-bordered",children:[p.jsx(j$,{}),p.jsx("tbody",{children:t.map(R=>p.jsx(D$,{student:R,grade:i,year:s},R.id))})]}),n&&p.jsx(dn,{})]}),p.jsx("div",{className:"mt-3 mb-1",children:d?p.jsx(V$,{}):p.jsx(M$,{degreesCollection:E,lastStudent:l,setDataAndHideLoaderFirestore:b})})]})},U$=({subject:t,student:e,index:n})=>{const r=e.degrees[n],i=r>=50?"bg-success":"bg-danger";return p.jsxs("tr",{children:[p.jsx("th",{scope:"row",children:t.name},n),p.jsx("td",{className:`text-center text-light ${i}`,children:r})]})},B$=()=>{},z$=({title:t,value:e})=>p.jsxs("h4",{className:"mb-1",children:[p.jsxs("span",{className:"fw-bold text-primary",children:[t,": "]}),p.jsxs("span",{children:[e,"."]})]}),q$=({student:t})=>{const e=[{title:"",value:t.name},{title:" ",value:t.id},{title:"",value:t.rank},{title:"",value:t.total_grade}];return p.jsx("div",{children:e.map((n,r)=>p.jsx(z$,{title:n.title,value:n.value},r))})};async function H$(t,e,n,r){const s=await(await fetch(`${eo}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();let o;return s.degrees.forEach(a=>{a.id==n&&(o=a)}),r(s.subjects),o}const W$=()=>{const{grade:t,year:e,studentId:n}=kn(),[r,i]=F.useState({}),[s,o]=F.useState([]),[a,l]=F.useState(!0);return F.useEffect(()=>{async function c(){let d;d=await H$(t,e,n,o),i(d),l(!1)}c()},[]),p.jsxs(p.Fragment,{children:[p.jsx(Un,{fontSize:3,children:" "}),a?p.jsx(dn,{}):p.jsxs("div",{className:"mt-3",children:[p.jsx(q$,{student:r}),p.jsxs("table",{className:"table table-striped border table-bordered mt-4",children:[p.jsx(B$,{}),p.jsx("tbody",{children:s.map((c,d)=>p.jsx(U$,{subject:c,student:r,index:d},d))})]})]})]})},K$=()=>p.jsxs("div",{className:"min-vh-100 d-flex flex-column gap-4 justify-content-center align-items-center",children:[p.jsx("h1",{children:"  ."}),p.jsx(ln,{to:"/",className:"btn btn-primary",children:" "})]}),ay=({grade:t,backFrom:e})=>{const n=yt();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return p.jsx("button",{className:"btn btn-danger",onClick:r,children:""})};function qi({text:t,color:e,widthPercentage:n,onClick:r}){return p.jsx("button",{className:`btn btn-${e||"primary"} w-${n||"100"} p-2`,onClick:r,children:t})}const zk=({pdf:t})=>{const e=yt(),[n,r]=F.useState(!1);function i(){window.location.href=`https://drive.google.com/uc?export=download&id=${t.book_gdrive_id}`}function s(){e(`/book/${t.book_gdrive_id}`,{state:{book_name:t.book_name}})}return n?p.jsxs("div",{className:"d-flex gap-2",children:[p.jsx(qi,{text:"",color:"success",onClick:s}),p.jsx(qi,{text:"",onClick:i}),p.jsx(qi,{text:"",color:"danger",onClick:()=>r(!1)})]}):p.jsx(qi,{text:t.book_name,onClick:()=>r(!0)})},ha=()=>{const t=yt();function e(){t("/")}return p.jsx("button",{className:"btn btn-danger",onClick:e,children:" "})},G$=()=>{const{grade:t,term:e}=kn(),[n,r]=F.useState([]),[i,s]=F.useState(!0);return F.useEffect(()=>{fetch(`${eo}/darelom-students-data/books/2023_24/books_${t}.json`).then(o=>o.json()).then(o=>{r(o[e]),s(!1)})},[]),p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[p.jsx("h2",{children:" :"}),p.jsxs("div",{className:"d-flex gap-2",children:[p.jsx(ay,{grade:t,backFrom:"books"}),p.jsx(ha,{})]})]}),p.jsxs(Un,{children:[Lt(t)," - ",Lt(e)]}),i?p.jsx(dn,{}):p.jsx("div",{className:"row g-2 my-2",children:n.map((o,a)=>p.jsx("div",{className:"col-sm-6",children:p.jsx(zk,{pdf:o})},a))})]})};function Q$(){const t="btn btn-danger p-2 px-5 w-100",e=yt();function n(){e(-1)}return p.jsx("button",{className:t,onClick:n,children:""})}const J$=({bookId:t,isIframeLoading:e,setIsIframeLoading:n})=>{const r=`https://drive.google.com/file/d/${t}/preview`,i=`${e&&"d-none"} w-100`,s={height:"500px"};function o(){n(!1)}return p.jsx("iframe",{src:r,onLoad:o,className:i,style:s})},Y$=({bookId:t})=>{const e="btn btn-primary p-2 px-5 w-100";function n(){window.location.href=`https://drive.google.com/uc?export=download&id=${t}`}return p.jsx("button",{className:e,onClick:n,children:""})},PE=({children:t})=>p.jsx("div",{className:"col-md-auto col-6",children:t}),NE=()=>{var s;const{bookId:t}=kn(),n=(s=Sr().state)==null?void 0:s.book_name,[r,i]=F.useState(!0);return p.jsxs(p.Fragment,{children:[p.jsxs(Un,{children:['"',n,'".']}),p.jsxs("div",{className:"my-2 d-flex justify-content-end row gx-2",children:[p.jsx(PE,{children:p.jsx(Y$,{bookId:t})}),p.jsx(PE,{children:p.jsx(Q$,{})})]}),r&&p.jsx(dn,{}),p.jsx(J$,{bookId:t,isIframeLoading:r,setIsIframeLoading:i})]})},X$=({currentQuestionIndex:t,questionsLength:e})=>{const n=t+1;return p.jsx("div",{className:"d-flex justify-content-between ",children:p.jsxs("p",{className:"mb-0",children:["",p.jsxs("span",{className:"fw-bold",children:[" ",n," "]}),"",p.jsxs("span",{className:"fw-bold",children:[" ",e]}),"."]})})},Z$=({questionText:t})=>p.jsx("h3",{className:"bg-black text-light p-2 py-3 text-center my-4 rounded-2 lh-base",children:t});function eU({currentQuestionIndex:t,setCurrentQuestionIndex:e,setIsAnswered:n,answerButtons:r}){function i(){n(!1),e(t+1),r.forEach(s=>{s.disabled=!1,s.classList.remove("btn-danger","btn-success")})}return p.jsx(qi,{text:"",onClick:i})}function tU({questionsLength:t,score:e}){const n=yt();function r(){n("/test_yourself/test_result",{state:{result:e,fullMark:t}})}return p.jsx(qi,{text:" ",onClick:r})}const nU=({children:t})=>p.jsx("div",{className:"modal-header",children:p.jsx("h5",{className:"modal-title text-center w-100",children:t})}),rU=({children:t})=>p.jsx("div",{className:"modal-body pb-1",children:p.jsx("p",{className:"text-center fw-bold",children:t})}),iU=({children:t})=>p.jsx("div",{className:"modal-footer border-0 pt-0",children:t}),sU=({setIsModalOpen:t,answerReason:e})=>p.jsx("div",{className:"modal d-block bg-black bg-opacity-75",tabIndex:"-1",children:p.jsx("div",{className:"modal-dialog modal-dialog-centered",children:p.jsxs("div",{className:"modal-content",children:[p.jsx(nU,{children:'"   "'}),p.jsx(rU,{children:e||"      ."}),p.jsx(iU,{children:p.jsx(qi,{text:"",color:"danger",onClick:()=>t(!1)})})]})})}),oU=({setIsModalOpen:t})=>p.jsx(qi,{text:" ",onClick:()=>t(!0)});function aU(t,e,n,r,i,s,o,a){function l(){r.current.forEach(f=>{f.disabled=!0}),d.disabled=!1}n(!0);const c=r.current[s[i].question_answer],d=t.target;e==s[i].question_answer?(d.classList.add("btn-success"),o(a+1),l()):(l(),d.classList.add("btn-danger"),c.classList.add("btn-success"))}const hm=()=>{var D,B,R,k,w,I;const{grade:t,term:e,subject:n}=kn(),[r,i]=F.useState(!1),[s,o]=F.useState(((D=location.state)==null?void 0:D.currentQuestionIndex)||0),[a,l]=F.useState(0),[c,d]=F.useState([]),[f,g]=F.useState(!1),y=F.useRef([]),[S,x]=F.useState(!0),A=Sr().pathname;function E(C){OA($c(In,C)).then(O=>{const V=[];O.docs.forEach(P=>{V.push(P.data())}),d(V),x(!1)})}F.useEffect(()=>{A=="/test_yourself/sended_questions"?E("test_yourself/sended_questions"):A==`/${t}/${e}/${n}/test_yourself_students`?E(`${t}/test_yourself_students/questions/${e}/${n}`):fetch(`${eo}/darelom-students-data/questions/test_questions.json`).then(C=>C.json()).then(C=>{d(C),x(!1)})},[]);const b=s>=c.length-1;return p.jsxs(p.Fragment,{children:[p.jsx(Un,{fontSize:"2",children:" "}),S?p.jsx(dn,{}):c.length?p.jsxs("div",{className:"mt-2",children:[p.jsx(X$,{currentQuestionIndex:s,questionsLength:c.length,creatorName:(R=(B=c[s])==null?void 0:B.question_creator)==null?void 0:R.name}),p.jsx(Z$,{questionText:(k=c[s])==null?void 0:k.question_text}),p.jsx("div",{className:"row g-2",children:(w=c[s])==null?void 0:w.question_options.map((C,O)=>p.jsx("div",{className:"col-sm-6",children:p.jsx("button",{className:"btn btn-primary w-100 p-2",ref:V=>y.current[O]=V,onClick:V=>aU(V,O,i,y,s,c,l,a),children:C})},O))}),p.jsx("hr",{}),p.jsxs("div",{className:"mt-3 d-flex gap-2",children:[r&&b?p.jsx(tU,{questionsLength:c.length,score:a}):r&&!b&&p.jsx(eU,{currentQuestionIndex:s,setCurrentQuestionIndex:o,setIsAnswered:i,answerButtons:y.current}),r&&p.jsx(oU,{setIsModalOpen:g})]}),f&&p.jsx(sU,{setIsModalOpen:g,answerReason:(I=c[s])==null?void 0:I.answer_reason})]}):p.jsx("p",{className:"text-center fs-2 fw-bold my-2",children:"   ."})]})},lU=()=>{const t=Sr(),{result:e,fullMark:n}=t.state;return p.jsxs(p.Fragment,{children:[p.jsx("h2",{children:" :"}),p.jsxs("p",{className:"text-center fs-1",children:[p.jsxs("span",{className:"fw-bold",children:[e," "]}),"",p.jsxs("span",{className:"fw-bold",children:[" ",n]}),"."]})]})},uU=()=>{const t=yt(),{grade:e,term:n}=kn(),[r,i]=F.useState([]),[s,o]=F.useState(!0);return F.useEffect(()=>{async function a(){var d;const c=(d=(await rs(ei(In,`${e}/test_yourself_students/questions`,n))).data())==null?void 0:d.subjects;i(c),o(!1)}a()},[]),p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[p.jsx("h2",{children:" :"}),p.jsxs("div",{className:"d-flex gap-2",children:[p.jsx(ay,{grade:e,backFrom:"test_yourself_students"}),p.jsx(ha,{})]})]}),s?p.jsx(dn,{}):p.jsx("div",{className:"row g-2 my-2",children:r==null?void 0:r.map((a,l)=>p.jsx("div",{className:"col-sm-6",children:p.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/${a}/test_yourself_students`),children:Lt(a)})},l))})]})},cU=()=>p.jsxs("div",{className:"row g-2",children:[p.jsx("div",{className:"col-sm-6",children:p.jsx(ln,{to:"term_1",className:"btn btn-primary w-100",children:"  "})}),p.jsx("div",{className:"col-sm-6",children:p.jsx(ln,{to:"term_2",className:"btn btn-primary w-100",children:"  "})})]}),dU=()=>{const t=yt(),[e,n]=F.useState(!0),{grade:r,term:i}=kn(),[s,o]=F.useState([]);return F.useEffect(()=>{rs(ei(In,`${r}/test_yourself_students/questions/${i}`)).then(a=>{o(a.data().subjects),n(!1)})},[]),p.jsx(p.Fragment,{children:e?p.jsx(dn,{}):p.jsx("div",{className:"row g-2",children:s.map((a,l)=>p.jsx("div",{className:"col-sm-6",children:p.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t(`/${r}/${i}/${a}/send_question`),children:Lt(a)})},l))})})},qk=({formRef:t,children:e})=>p.jsx("form",{className:"mx-auto mt-3 needs-validation",noValidate:!0,style:{maxWidth:"480px"},ref:t,children:e}),Jn=({field:t,marginBottom:e=3})=>p.jsx("div",{className:`mb-${e}`,children:t}),Hk=()=>p.jsxs(p.Fragment,{children:[p.jsx("label",{htmlFor:"email-input",className:"form-label fw-bold",children:" :"}),p.jsx("input",{type:"email",className:"form-control",pattern:"^[^@]+@[^@]+\\.[^@]{2,}$",id:"email-input",placeholder:"folan.alfolany@gmail.com","aria-describedby":"emailHelp",required:!0}),p.jsx("div",{className:"invalid-feedback",children:"    ."})]}),Wk=()=>p.jsxs(p.Fragment,{children:[p.jsx("label",{htmlFor:"password-input",className:"form-label fw-bold",children:" :"}),p.jsx("input",{type:"password",placeholder:"_____",minLength:"6",className:"form-control",id:"password-input",autoComplete:"off",required:!0}),p.jsx("div",{className:"invalid-feedback",children:"      6   ."})]}),hU=()=>p.jsxs(p.Fragment,{children:[p.jsx("label",{htmlFor:"name-input",className:"form-label fw-bold",children:":"}),p.jsx("input",{type:"text",className:"form-control",minLength:3,id:"name-input",placeholder:" ",required:!0}),p.jsx("div",{className:"invalid-feedback",children:"     3   ."})]}),fU=()=>p.jsxs(p.Fragment,{children:[p.jsx("label",{className:"fw-bold",children:" :"}),p.jsxs("select",{className:"form-select mt-2",id:"grade-input",required:!0,children:[p.jsx("option",{value:"grade_1",children:" "}),p.jsx("option",{value:"grade_2",children:" "}),p.jsx("option",{value:"grade_3",children:" "}),p.jsx("option",{value:"grade_4",children:" "})]}),p.jsx("div",{className:"invalid-feedback",children:"  ."})]}),zc=({text:t})=>p.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-bold",children:t}),np=({label:t,placeholder:e,invalidFeedback:n,minLength:r=10,rows:i=4,fontSize:s=5,id:o="textarea-field"})=>p.jsxs(p.Fragment,{children:[p.jsx("label",{className:`fw-bold fs-${s} mb-1`,htmlFor:o,children:t}),p.jsx("textarea",{className:"form-control",id:o,rows:i,placeholder:e,minLength:r,required:!0}),p.jsx("div",{className:"invalid-feedback",children:n})]}),pU=()=>{const t=yt(),[e,n]=F.useState(!1),[r,i]=F.useState(!1),s=F.useRef(null);return F.useEffect(()=>{const o=s.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{i(!0);const l=a.target["name-input"].value,c=a.target["email-input"].value,d=a.target["grade-input"].value,f=a.target["password-input"].value,g=a.target["textarea-field"].value,S=(await UN(Uc,c,f)).user.uid;await v2(ei(In,"users",S),{name:l,email:c,grade:d,uid:S,message:g,write_permission:!1}),t("/")}catch(l){console.log(l.code),n(!0)}finally{i(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),p.jsxs("div",{children:[p.jsx(Un,{children:"  "}),p.jsxs(qk,{formRef:s,children:[p.jsx(Jn,{field:p.jsx(hU,{})}),p.jsx(Jn,{field:p.jsx(Hk,{})}),p.jsx(Jn,{field:p.jsx(fU,{})}),p.jsx(Jn,{field:p.jsx(np,{placeholder:"    .",label:"    :",fontSize:6,minLength:100,invalidFeedback:"     100   ."})}),p.jsx(Jn,{field:p.jsx(Wk,{})}),r?p.jsx(Ml,{}):p.jsx(zc,{text:"  "}),e&&p.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})]})},Bd=()=>{const t=yt(),[e,n]=F.useState(!1),[r,i]=F.useState(!1),s=F.useRef(null);return F.useEffect(()=>{const o=s.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{i(!0);const l=a.target["email-input"].value,c=a.target["password-input"].value;await BN(Uc,l,c),t("/")}catch(l){console.log(l.code),n(!0)}finally{i(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),p.jsxs("div",{children:[p.jsx(Un,{children:" "}),p.jsxs(qk,{formRef:s,children:[p.jsx(Jn,{field:p.jsx(Hk,{})}),p.jsx(Jn,{field:p.jsx(Wk,{})}),r?p.jsx(Ml,{}):p.jsx(zc,{text:" "}),e&&p.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]}),p.jsxs("p",{className:"text-center mt-2 fw-bold",children:["    ",p.jsx(ln,{to:"/signup",children:" "}),"."]})]})},ly=({formRef:t,children:e})=>p.jsx("form",{className:"mt-3 needs-validation",noValidate:!0,ref:t,children:e}),mU=({optionsRef:t})=>{const e=["","","",""];return p.jsxs(p.Fragment,{children:[p.jsx("label",{className:"fw-bold fs-5 mb-1",children:":"}),p.jsx("div",{className:"row g-2",children:e.map((n,r)=>p.jsx("div",{className:"col-sm-6",children:p.jsx("input",{type:"text",className:"form-control",placeholder:` ${n}.`,ref:i=>t.current[r]=i,required:!0})},r))})]})},gU=()=>p.jsxs(p.Fragment,{children:[p.jsx("label",{className:"fw-bold fs-5 mb-1",children:"  :"}),p.jsxs("select",{className:"form-control",id:"options-input",children:[p.jsx("option",{value:"0",children:"1"}),p.jsx("option",{value:"1",children:"2"}),p.jsx("option",{value:"2",children:"3"}),p.jsx("option",{value:"3",children:"4"})]})]}),vU=()=>p.jsxs(p.Fragment,{children:[p.jsx("label",{className:"fw-bold fs-5 mb-1",children:":"}),p.jsx("input",{type:"text",className:"form-control",placeholder:" .",id:"answer-reason-input"})]}),_U=()=>p.jsx(np,{placeholder:"   .",label:" :",invalidFeedback:"      10   ."}),yU=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),{grade:i,term:s,subject:o}=kn(),a=F.useRef([]),l=F.useRef(null);return F.useEffect(()=>{const c=l.current;c.addEventListener("submit",async d=>{d.preventDefault(),d.stopPropagation();const f=c["textarea-field"].value,g=[],y=Number(c["options-input"].value),S=c["answer-reason-input"].value;if(a.current.forEach(x=>{g.push(x.value)}),c.checkValidity())try{e(!0);const{name:x,uid:N}=JSON.parse(localStorage.getItem("loggedinUserInfo"));await $_($c(In,`${i}/test_yourself_students/questions/${s}/${o}`),{question_text:f,question_answer:y,question_options:g,answer_reason:S,question_creator:{name:x,uid:N}}),l.current.reset(),c.classList.remove("was-validated"),r("success")}catch(x){console.log(x.code),c.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else c.classList.add("was-validated")})},[]),p.jsxs(p.Fragment,{children:[p.jsx(Un,{children:"  []"}),p.jsxs("p",{className:"text-center mt-2 fw-bold",children:[`${Lt(i)} - ${Lt(s)} - ${Lt(o)}`,"."]}),p.jsxs(ly,{formRef:l,children:[p.jsx(Jn,{field:p.jsx(_U,{})}),p.jsx(Jn,{field:p.jsx(mU,{optionsRef:a})}),p.jsx(Jn,{field:p.jsx(gU,{})}),p.jsx(Jn,{field:p.jsx(vU,{})}),t?p.jsx(Ml,{}):p.jsx(zc,{text:" "})]}),n==="initial"?null:n==="success"?p.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):p.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},wU=()=>p.jsx(np,{placeholder:"  .",label:":",invalidFeedback:"      10   .",rows:7}),EU=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),i=F.useRef(null);return F.useEffect(()=>{const s=i.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();const a=s["textarea-field"].value;if(s.checkValidity())try{e(!0),await $_($c(In,"suggestions"),{suggestion:a}),i.current.reset(),s.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),s.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else s.classList.add("was-validated")})},[]),p.jsxs(p.Fragment,{children:[p.jsx(Un,{children:" "}),p.jsxs(ly,{formRef:i,children:[p.jsx(Jn,{field:p.jsx(wU,{})}),t?p.jsx(Ml,{}):p.jsx(zc,{text:" "})]}),n==="initial"?null:n==="success"?p.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):p.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},TU=()=>p.jsx(np,{placeholder:"          .",label:":",invalidFeedback:"      10   .",rows:7}),bU=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),i=F.useRef(null);return F.useEffect(()=>{const s=i.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation(),console.log("s");const a=s["textarea-field"].value;if(s.checkValidity())try{e(!0),await $_($c(In,"problems"),{problem:a}),i.current.reset(),s.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),s.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else s.classList.add("was-validated")})},[]),p.jsxs(p.Fragment,{children:[p.jsx(Un,{children:"  "}),p.jsxs(ly,{formRef:i,children:[p.jsx(Jn,{field:p.jsx(TU,{})}),t?p.jsx(Ml,{}):p.jsx(zc,{text:" "})]}),n==="initial"?null:n==="success"?p.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):p.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},IU=()=>async(t,e)=>{try{const r=await(await fetch(t)).blob(),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(n){console.log(n)}},SU=()=>{const{grade:t}=kn(),[e,n]=F.useState(!1),[r,i]=F.useState(!0);let s="",o;t==="exams_schedule"?(s=`${eo}/darelom-students-data/schedule/exams_schedule.jpg`,o="     2025"):(s=`${eo}/darelom-students-data/schedule/${t}.jpg`,o=`  ${Lt(t)}`);const a=IU();function l(){n(!1),i(!1)}function c(){n(!0),i(!1)}return p.jsxs("div",{className:"container",children:[r?p.jsx(dn,{}):p.jsx(p.Fragment,{children:!e&&p.jsx(p.Fragment,{children:p.jsxs("p",{className:"text-center fw-bold fs-5",children:["  ",Lt(t),"   ."]})})}),p.jsxs("div",{className:`d-${e?"block":"none"}`,children:[p.jsx("img",{src:s,className:"w-100",alt:"Schecule",onError:l,onLoad:c}),p.jsx("button",{className:"btn btn-primary w-100 mt-3",onClick:()=>a(s,o),children:" "})]})]})},AU=({grade:t,backFrom:e})=>{const n=yt();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return p.jsx("button",{className:"btn btn-danger",onClick:r,children:""})},kU=()=>{const{grade:t,term:e}=kn(),[n,r]=F.useState({}),[i,s]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{rs(ei(In,`${t}/lectures_recordings`)).then(l=>{var d;const c=(d=l.data())==null?void 0:d[e];if(c&&Object.keys(c).length){const f=Object.keys(c);if(f.includes("mojalad_tasgilat")){const g=["mojalad_tasgilat",...f.filter(y=>y!=="mojalad_tasgilat")];s(g)}else s(f);r(c)}a(!1)})},[]),p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[p.jsx("h2",{children:" :"}),p.jsxs("div",{className:"d-flex gap-2",children:[p.jsx(AU,{grade:t,backFrom:"lectures_recordings"}),p.jsx(ha,{})]})]}),p.jsxs(Un,{children:[Lt(t)," - ",Lt(e)]}),o?p.jsx(dn,{}):p.jsx(p.Fragment,{children:Object.keys(n).length?p.jsx("div",{className:"row g-2 my-2",children:i.map((l,c)=>p.jsx("div",{className:"col-sm-6",children:p.jsx(qi,{text:Lt(l),onClick:()=>window.location.href=n[l]})},c))}):p.jsx("p",{className:"text-center fw-bold mt-4 fs-4",children:"   ."})})]})},xU=()=>{const t=yt(),{grade:e,term:n}=kn(),[r,i]=F.useState([]),[s,o]=F.useState(!0);return F.useEffect(()=>{async function a(){var d;const c=((d=(await rs(ei(In,`${e}/more_resources/`))).data())==null?void 0:d[n])||[];i(c),o(!1)}a()},[]),p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[p.jsx("h2",{children:" :"}),p.jsxs("div",{className:"d-flex gap-2",children:[p.jsx(ay,{grade:e,backFrom:"more_resources"}),p.jsx(ha,{})]})]}),s?p.jsx(dn,{}):p.jsx("div",{className:"row g-2 my-2",children:r!=null&&r.length?r==null?void 0:r.map((a,l)=>p.jsx("div",{className:"col-sm-6",children:p.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/more_resources/${a}`),children:Lt(a)})},l)):p.jsx("p",{className:"fw-bold text-center fs-3",children:"   ."})})]})},OE=()=>{const t=yt(),{grade:e,term:n,subject:r}=kn(),[i,s]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{async function l(){var f;let c;e?c=await rs(ei(In,`${e}/more_resources/${n}/${r}`)):c=await rs(ei(In,`general_subjects/${r}`));const d=((f=c.data())==null?void 0:f.resources)||[];s(d),a(!1)}l()},[]),p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[p.jsx("h2",{children:" :"}),p.jsxs("div",{className:"d-flex gap-2",children:[p.jsx("button",{className:"btn btn-danger",onClick:()=>t(-1),children:""}),p.jsx(ha,{})]})]}),o?p.jsx(dn,{}):p.jsx("div",{className:"row g-2 my-2",children:i!=null&&i.length?i==null?void 0:i.map((l,c)=>p.jsx("div",{className:"col-sm-6",children:p.jsx(ln,{className:"btn btn-primary w-100",to:l!=null&&l.isBook?`/book/${l.link}`:l.link,state:{book_name:l.title},children:l.title})},c)):p.jsx("p",{className:"fw-bold text-center fs-3",children:"   ."})})]})},CU=({grade:t,backFrom:e})=>{const n=yt();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return p.jsx("button",{className:"btn btn-danger",onClick:r,children:""})},RU=()=>{const[t,e]=F.useState(!1),{grade:n,term:r}=kn(),[i,s]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{fetch(`${eo}/darelom-students-data/final_exams/final_exams_${n}.json`).then(l=>l.json()).then(l=>{l[r].length?(s(l[r]),a(!1)):t(!0)}).catch(l=>{e(!0)})},[]),p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[p.jsx("h2",{children:" :"}),p.jsxs("div",{className:"d-flex gap-2",children:[p.jsx(CU,{grade:n,backFrom:"final_exams"}),p.jsx(ha,{})]})]}),p.jsxs(Un,{children:[Lt(n)," - ",Lt(r)]}),t?p.jsx("p",{className:"fw-bold text-center fs-4 mt-4",children:"   ."}):o?p.jsx(dn,{}):p.jsx("div",{className:"row g-2 my-2",children:i.map((l,c)=>p.jsx("div",{className:"col-sm-6",children:p.jsx(zk,{pdf:l})},c))})]})},PU=()=>{const t=yt(),[e,n]=F.useState([]),[r,i]=F.useState(!0);return F.useEffect(()=>{async function s(){var l;const a=(l=(await rs(ei(In,"general_subjects","subjects"))).data())==null?void 0:l.ids;n(a),i(!1)}s()},[]),p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[p.jsx("h2",{children:" :"}),p.jsx("div",{className:"d-flex gap-2",children:p.jsx(ha,{})})]}),r?p.jsx(dn,{}):p.jsx("div",{className:"row g-2 my-2",children:e==null?void 0:e.map((s,o)=>p.jsx("div",{className:"col-sm-6",children:p.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/general_subjects/${s}`),children:Lt(s)})},o))})]})},NU="modulepreload",OU=function(t){return"/darelom-students/"+t},DE={},qc=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(a=>{if(a=OU(a),a in DE)return;DE[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":NU,l||(d.as="script",d.crossOrigin=""),d.href=a,o&&d.setAttribute("nonce",o),document.head.appendChild(d),l)return new Promise((f,g)=>{d.addEventListener("load",f),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},DU=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qc(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class uy extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class jU extends uy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class LU extends uy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class MU extends uy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bg||(Bg={}));var VU=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class FU{constructor(e,{headers:n={},customFetch:r,region:i=Bg.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=DU(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return VU(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(S=>{throw new jU(S)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new LU(d);if(!d.ok)throw new MU(d);let g=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield d.json():g==="application/octet-stream"?y=yield d.blob():g==="text/event-stream"?y=d:g==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(i){return{data:null,error:i}}})}}var Dn={},cy={},rp={},Hc={},ip={},sp={},$U=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bl=$U();const UU=bl.fetch,Kk=bl.fetch.bind(bl),Gk=bl.Headers,BU=bl.Request,zU=bl.Response,Vl=Object.freeze(Object.defineProperty({__proto__:null,Headers:Gk,Request:BU,Response:zU,default:Kk,fetch:UU},Symbol.toStringTag,{value:"Module"})),qU=XE(Vl);var op={};Object.defineProperty(op,"__esModule",{value:!0});let HU=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};op.default=HU;var Qk=er&&er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sp,"__esModule",{value:!0});const WU=Qk(qU),KU=Qk(op);let GU=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=WU.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let c=null,d=null,f=null,g=s.status,y=s.statusText;if(s.ok){if(this.method!=="HEAD"){const A=await s.text();A===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=A:d=JSON.parse(A))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),N=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");x&&N&&N.length>1&&(f=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,g=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await s.text();try{c=JSON.parse(x),Array.isArray(c)&&s.status===404&&(d=[],c=null,g=200,y="OK")}catch{s.status===404&&x===""?(g=204,y="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((l=c==null?void 0:c.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,g=200,y="OK"),c&&this.shouldThrowOnError)throw new KU.default(c)}return{error:c,data:d,count:f,status:g,statusText:y}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};sp.default=GU;var QU=er&&er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ip,"__esModule",{value:!0});const JU=QU(sp);let YU=class extends JU.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ip.default=YU;var XU=er&&er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hc,"__esModule",{value:!0});const ZU=XU(ip);let e4=class extends ZU.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};Hc.default=e4;var t4=er&&er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rp,"__esModule",{value:!0});const fu=t4(Hc);let n4=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new fu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new fu.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(l.length>0){const c=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new fu.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new fu.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new fu.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};rp.default=n4;var ap={},lp={};Object.defineProperty(lp,"__esModule",{value:!0});lp.version=void 0;lp.version="0.0.0-automated";Object.defineProperty(ap,"__esModule",{value:!0});ap.DEFAULT_HEADERS=void 0;const r4=lp;ap.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${r4.version}`};var Jk=er&&er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cy,"__esModule",{value:!0});const i4=Jk(rp),s4=Jk(Hc),o4=ap;let a4=class Yk{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},o4.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new i4.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Yk(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{a.searchParams.append(d,f)})):(o="POST",l=n);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new s4.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};cy.default=a4;var Fl=er&&er.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.PostgrestError=Dn.PostgrestBuilder=Dn.PostgrestTransformBuilder=Dn.PostgrestFilterBuilder=Dn.PostgrestQueryBuilder=Dn.PostgrestClient=void 0;const Xk=Fl(cy);Dn.PostgrestClient=Xk.default;const Zk=Fl(rp);Dn.PostgrestQueryBuilder=Zk.default;const ex=Fl(Hc);Dn.PostgrestFilterBuilder=ex.default;const tx=Fl(ip);Dn.PostgrestTransformBuilder=tx.default;const nx=Fl(sp);Dn.PostgrestBuilder=nx.default;const rx=Fl(op);Dn.PostgrestError=rx.default;var l4=Dn.default={PostgrestClient:Xk.default,PostgrestQueryBuilder:Zk.default,PostgrestFilterBuilder:ex.default,PostgrestTransformBuilder:tx.default,PostgrestBuilder:nx.default,PostgrestError:rx.default};const{PostgrestClient:u4,PostgrestQueryBuilder:c3,PostgrestFilterBuilder:d3,PostgrestTransformBuilder:h3,PostgrestBuilder:f3,PostgrestError:p3}=l4;function c4(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const d4=c4(),h4="2.11.15",f4=`realtime-js/${h4}`,p4="1.0.0",ix=1e4,m4=1e3;var Bu;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Bu||(Bu={}));var rn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rn||(rn={}));var Hr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Hr||(Hr={}));var zg;(function(t){t.websocket="websocket"})(zg||(zg={}));var Ro;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ro||(Ro={}));class g4{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class sx{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var nt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(nt||(nt={}));const jE=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=v4(o,t,e,i),s),{})},v4=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?ox(s,o):qg(o)},ox=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return E4(e,n)}switch(t){case nt.bool:return _4(e);case nt.float4:case nt.float8:case nt.int2:case nt.int4:case nt.int8:case nt.numeric:case nt.oid:return y4(e);case nt.json:case nt.jsonb:return w4(e);case nt.timestamp:return T4(e);case nt.abstime:case nt.date:case nt.daterange:case nt.int4range:case nt.int8range:case nt.money:case nt.reltime:case nt.text:case nt.time:case nt.timestamptz:case nt.timetz:case nt.tsrange:case nt.tstzrange:return qg(e);default:return qg(e)}},qg=t=>t,_4=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},y4=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},w4=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},E4=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>ox(e,a))}return t},T4=t=>typeof t=="string"?t.replace(" ","T"):t,ax=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class fm{constructor(e,n,r={},i=ix){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var LE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(LE||(LE={}));class zu{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zu.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=zu.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=zu.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,d)=>{o[c]||(l[c]=d)}),this.map(o,(c,d)=>{const f=s[c];if(f){const g=d.map(N=>N.presence_ref),y=f.map(N=>N.presence_ref),S=d.filter(N=>y.indexOf(N.presence_ref)<0),x=f.filter(N=>g.indexOf(N.presence_ref)<0);S.length>0&&(a[c]=S),x.length>0&&(l[c]=x)}else a[c]=d}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const d=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),d.length>0){const f=e[a].map(y=>y.presence_ref),g=d.filter(y=>f.indexOf(y.presence_ref)<0);e[a].unshift(...g)}r(a,d,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const d=l.map(f=>f.presence_ref);c=c.filter(f=>d.indexOf(f.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ME;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(ME||(ME={}));var VE;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(VE||(VE={}));var Mi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Mi||(Mi={}));class dy{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new fm(this,Hr.join,this.params,this.timeout),this.rejoinTimer=new sx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rn.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hr.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new zu(this),this.broadcastEndpointURL=ax(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==rn.closed){const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Mi.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Mi.CLOSED));const l={},c={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){e==null||e(Mi.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(f=g==null?void 0:g.length)!==null&&f!==void 0?f:0,S=[];for(let x=0;x<y;x++){const N=g[x],{filter:{event:A,schema:E,table:b,filter:D}}=N,B=d&&d[x];if(B&&B.event===A&&B.schema===E&&B.table===b&&B.filter===D)S.push(Object.assign(Object.assign({},N),{id:B.id}));else{this.unsubscribe(),this.state=rn.errored,e==null||e(Mi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(Mi.SUBSCRIBED);return}}).receive("error",d=>{this.state=rn.errored,e==null||e(Mi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Mi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new fm(this,Hr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new fm(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:d}=Hr;if(r&&[a,l,c,d].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var S,x,N;return((S=y.filter)===null||S===void 0?void 0:S.event)==="*"||((N=(x=y.filter)===null||x===void 0?void 0:x.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===o}).map(y=>y.callback(g,r)):(s=this.bindings[o])===null||s===void 0||s.filter(y=>{var S,x,N,A,E,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const D=y.id,B=(S=y.filter)===null||S===void 0?void 0:S.event;return D&&((x=n.ids)===null||x===void 0?void 0:x.includes(D))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const D=(E=(A=y==null?void 0:y.filter)===null||A===void 0?void 0:A.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return D==="*"||D===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof g=="object"&&"ids"in g){const S=g.data,{schema:x,table:N,commit_timestamp:A,type:E,errors:b}=S;g=Object.assign(Object.assign({},{schema:x,table:N,commit_timestamp:A,eventType:E,new:{},old:{},errors:b}),this._getPayloadRecords(S))}y.callback(g,r)})}_isClosed(){return this.state===rn.closed}_isJoined(){return this.state===rn.joined}_isJoining(){return this.state===rn.joining}_isLeaving(){return this.state===rn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&dy.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hr.close,{},e)}_onError(e){this._on(Hr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=jE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=jE(e.columns,e.old_record)),n}}const FE=()=>{},b4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class I4{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ix,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=FE,this.ref=0,this.logger=FE,this.conn=null,this.sendBuffer=[],this.serializer=new g4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>qc(async()=>{const{default:l}=await Promise.resolve().then(()=>Vl);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${zg.websocket}`,this.httpEndpoint=ax(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new sx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=d4),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:p4}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bu.connecting:return Ro.Connecting;case Bu.open:return Ro.Open;case Bu.closing:return Ro.Closing;default:return Ro.Closed}}isConnected(){return this.connectionState()===Ro.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new dy(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:f4};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Hr.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(m4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([b4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class hy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ft(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class S4 extends hy{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Hg extends hy{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var A4=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const lx=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qc(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},k4=()=>A4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield qc(()=>Promise.resolve().then(()=>Vl),void 0)).Response:Response}),Wg=t=>{if(Array.isArray(t))return t.map(n=>Wg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Wg(r)}),e};var fa=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const pm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),x4=(t,e,n)=>fa(void 0,void 0,void 0,function*(){const r=yield k4();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new S4(pm(i),t.status||500))}).catch(i=>{e(new Hg(pm(i),i))}):e(new Hg(pm(t),t))}),C4=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Wc(t,e,n,r,i,s){return fa(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,C4(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>x4(l,a,r))})})}function uf(t,e,n,r){return fa(this,void 0,void 0,function*(){return Wc(t,"GET",e,n,r)})}function As(t,e,n,r,i){return fa(this,void 0,void 0,function*(){return Wc(t,"POST",e,r,i,n)})}function R4(t,e,n,r,i){return fa(this,void 0,void 0,function*(){return Wc(t,"PUT",e,r,i,n)})}function P4(t,e,n,r){return fa(this,void 0,void 0,function*(){return Wc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function ux(t,e,n,r,i){return fa(this,void 0,void 0,function*(){return Wc(t,"DELETE",e,r,i,n)})}var Nn=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const N4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$E={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class O4{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=lx(i)}uploadOrUpdate(e,n,r,i){return Nn(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},$E),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),d=this._getFinalPath(c),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),g=yield f.json();return f.ok?{data:{path:c,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(s){if(Ft(s))return{data:null,error:s};throw s}})}upload(e,n,r){return Nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return Nn(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:$E.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const f=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),g=yield f.json();return f.ok?{data:{path:s,fullPath:g.Key},error:null}:{data:null,error:g}}catch(l){if(Ft(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return Nn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield As(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new hy("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Ft(r))return{data:null,error:r};throw r}})}update(e,n,r){return Nn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return Nn(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ft(i))return{data:null,error:i};throw i}})}copy(e,n,r){return Nn(this,void 0,void 0,function*(){try{return{data:{path:(yield As(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ft(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return Nn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield As(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Ft(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return Nn(this,void 0,void 0,function*(){try{const i=yield As(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Ft(i))return{data:null,error:i};throw i}})}download(e,n){return Nn(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield uf(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ft(a))return{data:null,error:a};throw a}})}info(e){return Nn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield uf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Wg(r),error:null}}catch(r){if(Ft(r))return{data:null,error:r};throw r}})}exists(e){return Nn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield P4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ft(r)&&r instanceof Hg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return Nn(this,void 0,void 0,function*(){try{return{data:yield ux(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ft(n))return{data:null,error:n};throw n}})}list(e,n,r){return Nn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},N4),n),{prefix:e||""});return{data:yield As(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ft(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const D4="2.7.1",j4={"X-Client-Info":`storage-js/${D4}`};var Ia=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class L4{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},j4),n),this.fetch=lx(r)}listBuckets(){return Ia(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ft(e))return{data:null,error:e};throw e}})}getBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ft(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ia(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ft(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ia(this,void 0,void 0,function*(){try{return{data:yield R4(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ft(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ft(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield ux(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ft(n))return{data:null,error:n};throw n}})}}class M4 extends L4{constructor(e,n={},r){super(e,n,r)}from(e){return new O4(this.url,this.headers,e,this.fetch)}}const V4="2.50.2";let Su="";typeof Deno<"u"?Su="deno":typeof document<"u"?Su="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Su="react-native":Su="node";const F4={"X-Client-Info":`supabase-js-${Su}/${V4}`},$4={headers:F4},U4={schema:"public"},B4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},z4={};var q4=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};const H4=t=>{let e;return t?e=t:typeof fetch>"u"?e=Kk:e=fetch,(...n)=>e(...n)},W4=()=>typeof Headers>"u"?Gk:Headers,K4=(t,e,n)=>{const r=H4(n),i=W4();return(s,o)=>q4(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))})};var G4=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};function Q4(t){return t.endsWith("/")?t:t+"/"}function J4(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:d,global:f}=e,g={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>G4(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const cx="2.70.0",Pa=30*1e3,Kg=3,mm=Kg*Pa,Y4="http://localhost:9999",X4="supabase.auth.token",Z4={"X-Client-Info":`gotrue-js/${cx}`},Gg="X-Supabase-Api-Version",dx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},eB=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,tB=6e5;class fy extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class nB extends fy{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function rB(t){return Ie(t)&&t.name==="AuthApiError"}class hx extends fy{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class lo extends fy{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class bs extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function iB(t){return Ie(t)&&t.name==="AuthSessionMissingError"}class zd extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qd extends lo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hd extends lo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function sB(t){return Ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class UE extends lo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qg extends lo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function gm(t){return Ie(t)&&t.name==="AuthRetryableFetchError"}class BE extends lo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class qu extends lo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const cf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zE=` 	
\r=`.split(""),oB=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<zE.length;e+=1)t[zE[e].charCodeAt(0)]=-2;for(let e=0;e<cf.length;e+=1)t[cf[e].charCodeAt(0)]=e;return t})();function qE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(cf[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(cf[r]),e.queuedBits-=6}}function fx(t,e,n){const r=oB[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function HE(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{uB(o,r,n)};for(let o=0;o<t.length;o+=1)fx(t.charCodeAt(o),i,s);return e.join("")}function aB(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function lB(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}aB(r,e)}}function uB(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function cB(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)fx(t.charCodeAt(i),n,r);return new Uint8Array(e)}function dB(t){const e=[];return lB(t,n=>e.push(n)),new Uint8Array(e)}function hB(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>qE(i,n,r)),qE(null,n,r),e.join("")}function fB(t){return Math.round(Date.now()/1e3)+t}function pB(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ur=()=>typeof window<"u"&&typeof document<"u",Io={tested:!1,writable:!1},Hu=()=>{if(!Ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Io.tested)return Io.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Io.tested=!0,Io.writable=!0}catch{Io.tested=!0,Io.writable=!1}return Io.writable};function mB(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const px=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>qc(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},gB=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",mx=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Wd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Kd=async(t,e)=>{await t.removeItem(e)};class up{constructor(){this.promise=new up.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}up.promiseConstructor=Promise;function vm(t){const e=t.split(".");if(e.length!==3)throw new qu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!eB.test(e[r]))throw new qu("JWT not in base64url format");return{header:JSON.parse(HE(e[0])),payload:JSON.parse(HE(e[1])),signature:cB(e[2]),raw:{header:e[0],payload:e[1]}}}async function vB(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function _B(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function yB(t){return("0"+t.toString(16)).substr(-2)}function wB(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,yB).join("")}async function EB(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function TB(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await EB(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(t,e,n=!1){const r=wB();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await mx(t,`${e}-code-verifier`,i);const s=await TB(r);return[s,r===s?"plain":"s256"]}const bB=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function IB(t){const e=t.headers.get(Gg);if(!e||!e.match(bB))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function SB(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function AB(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const kB=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Aa(t){if(!kB.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var xB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const xo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),CB=[502,503,504];async function WE(t){var e;if(!gB(t))throw new Qg(xo(t),0);if(CB.includes(t.status))throw new Qg(xo(t),t.status);let n;try{n=await t.json()}catch(s){throw new hx(xo(s),s)}let r;const i=IB(t);if(i&&i.getTime()>=dx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new BE(xo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new bs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new BE(xo(n),t.status,n.weak_password.reasons);throw new nB(xo(n),t.status||500,r)}const RB=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ce(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Gg]||(s[Gg]=dx["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await PB(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function PB(t,e,n,r,i,s){const o=RB(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Qg(xo(l),0)}if(a.ok||await WE(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await WE(l)}}function ji(t){var e;let n=null;jB(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=fB(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function KE(t){const e=ji(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Ds(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function NB(t){return{data:t,error:null}}function OB(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=xB(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function DB(t){return t}function jB(t){return t.access_token&&t.refresh_token&&t.expires_in}const _m=["global","local","others"];var LB=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class MB{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=px(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=_m[0]){if(_m.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_m.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ds})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=LB(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:OB,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Ds})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},d=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:DB});if(d.error)throw d.error;const f=await d.json(),g=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(S=>{const x=parseInt(S.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(S.split(";")[1].split("=")[1]);c[`${N}Page`]=x}),c.total=parseInt(g)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(Ie(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Aa(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Ds})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Aa(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Ds})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Aa(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ds})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Aa(e.userId);try{const{data:n,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Aa(e.userId),Aa(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}const VB={getItem:t=>Hu()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Hu()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Hu()&&globalThis.localStorage.removeItem(t)}};function GE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function FB(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const ka={debug:!!(globalThis&&Hu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class $B extends gx{}async function UB(t,e,n){ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),ka.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw ka.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new $B(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(ka.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}FB();const BB={url:Y4,storageKey:X4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Z4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function QE(t,e,n){return await n()}class bc{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bc.nextInstanceID,bc.nextInstanceID+=1,this.instanceID>0&&Ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},BB),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new MB({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=px(i.fetch),this.lock=i.lock||QE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ur()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=UB:this.lock=QE,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Hu()?this.storage=VB:(this.memoryStorage={},this.storage=GE(this.memoryStorage)):(this.memoryStorage={},this.storage=GE(this.memoryStorage)),Ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${cx}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=mB(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ur()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),sB(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?{error:n}:{error:new hx("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:ji}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:d,password:f,options:g}=e;let y=null,S=null;this.flowType==="pkce"&&([y,S]=await Sa(this.storage,this.storageKey)),s=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:f,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:S},xform:ji})}else if("phone"in e){const{phone:d,password:f,options:g}=e;s=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(i=g==null?void 0:g.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:ji})}else throw new qd("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:KE})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:KE})}else throw new qd("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new zd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,s,o,a,l,c,d,f,g,y;let S,x;if("message"in e)S=e.message,x=e.signature;else{const{chain:N,wallet:A,statement:E,options:b}=e;let D;if(Ur())if(typeof A=="object")D=A;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))D=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=A}const B=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in D&&D.signIn){const R=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),E?{statement:E}:null));let k;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")k=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)k=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)S=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),x=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${B.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(i=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const R=await D.signMessage(new TextEncoder().encode(S),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=R}}try{const{data:N,error:A}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:hB(x)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:ji});if(A)throw A;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new zd}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:A})}catch(N){if(Ie(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const n=await Wd(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:ji});if(await Kd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new zd}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Ie(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ji}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new zd}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Sa(this.storage,this.storageKey));const{error:f}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:d}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new qd("You must provide either an email or phone number.")}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:ji});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Sa(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:NB})}catch(s){if(Ie(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new bs;const{error:i}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new qd("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Wd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<mm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,d))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Ds}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bs}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:Ds})})}catch(n){if(Ie(n))return iB(n)&&(await this._removeSession(),await Kd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new bs;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Sa(this.storage,this.storageKey));const{data:c,error:d}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Ds});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bs;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=vm(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new bs;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ur())throw new Hd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new UE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new UE("No code detected.");const{data:E,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Hd("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(a);let g=d+f;l&&(g=parseInt(l));const y=g-d;y*1e3<=Pa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${f}s`);const S=g-f;d-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,g,d):d-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,g,d);const{data:x,error:N}=await this._getUser(s);if(N)throw N;const A={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:g,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:A,redirectType:e.type},error:null}}catch(r){if(Ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Wd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(rB(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Kd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=pB(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Sa(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Ie(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,d;const{data:f,error:g}=s;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ur()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await _B(async i=>(i>0&&await vB(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ji})),(i,s)=>{const o=200*Math.pow(2,i);return s&&gm(s)&&Date.now()+o-r<Pa})}catch(r){if(this._debug(n,"error",r),Ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ur()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Wd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<mm;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${mm}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),gm(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new bs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new up;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new bs;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Ie(s)){const o={session:null,error:s};return gm(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await mx(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Kd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ur()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Pa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Pa}ms, refresh threshold is ${Kg} ticks`),i<=Kg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof gx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Sa(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:c}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=vm(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+tB>Date.now()))return r;const{data:i,error:s}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new qu("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new qu("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:y,error:S}=await this.getSession();if(S||!y.session)return{data:null,error:S};r=y.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=vm(r);if(SB(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:s,header:i,signature:o},error:null}}const c=AB(i.alg),d=await this.fetchJwk(i.kid,n),f=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,f,o,dB(`${a}.${l}`)))throw new qu("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}}bc.nextInstanceID=0;const zB=bc;class qB extends zB{constructor(e){super(e)}}var HB=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{c(r.next(d))}catch(f){o(f)}}function l(d){try{c(r.throw(d))}catch(f){o(f)}}function c(d){d.done?s(d.value):i(d.value).then(a,l)}c((r=r.apply(t,e||[])).next())})};class WB{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=Q4(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:U4,realtime:z4,auth:Object.assign(Object.assign({},B4),{storageKey:c}),global:$4},f=J4(r??{},d);this.storageKey=(i=f.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=f.global.headers)!==null&&s!==void 0?s:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=K4(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new u4(new URL("rest/v1",l).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new FU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new M4(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return HB(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qB({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),c),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new I4(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const KB=(t,e,n)=>new WB(t,e,n),GB="https://tilyikrjfydofqprandn.supabase.co",QB="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpbHlpa3JqZnlkb2ZxcHJhbmRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMzU3NzksImV4cCI6MjA2NjkxMTc3OX0.dATkafpW2h3BF59iipyHtb8SQQaIqu_I5gycuHu15_k",vx=KB(GB,QB);function JB(t){let e=0,n=0;return t.map(i=>i.degrees).flat().forEach(i=>{i.isCalculatedInTotal&&(e+=i.finalDegree,i.degree.startsWith("/")?n+=Number(i.degree.slice(1)):isNaN(Number(i.degree))||(n+=Number(i.degree)))}),{max:e,total:n}}function YB(){const[t,e]=F.useState({name:"",totalDegree:{max:0,total:0},firstGradeInPlatform:2024}),[n,r]=F.useState({}),[i,s]=F.useState(!1),[o,a]=F.useState(!1),{student_id:l}=kn(),c=F.useRef(null);F.useEffect(()=>{s(!0),d()},[l]);async function d(){const{data:f,error:g}=await vx.from("degrees").select("*").eq("student_id",l).order("grade",{ascending:!0}).order("term",{ascending:!0});if(console.log(f),f&&f.length){e({name:f[0].name,totalDegree:JB(f),firstGradeInPlatform:f[0].grade});const y={};f.forEach(S=>{y[S.grade]||(y[S.grade]=[]),y[S.grade].push(S)}),r(y),a(!1)}else a(!0);s(!1)}return i?p.jsx(dn,{}):o?p.jsxs("main",{children:[p.jsxs("div",{className:"alert alert-danger text-center my-5",children:["         .   "," ",p.jsx("button",{type:"button",className:"text-decoration-underline p-0 m-0 align-baseline",style:{color:"rgb(110 168 254)",fontSize:"1em",verticalAlign:"middle",background:"none",border:"none"},"data-bs-toggle":"modal","data-bs-target":"#idInfoModal",tabIndex:0,"aria-label":"   ",children:" "}),"  ",p.jsx(ln,{to:"/send_problem",children:"  "}),".   "," ",p.jsx(ln,{to:"/find_student",children:"   "}),"."]}),p.jsx("div",{className:"modal fade",id:"idInfoModal",tabIndex:-1,"aria-labelledby":"idInfoModalLabel","aria-hidden":"true",children:p.jsx("div",{className:"modal-dialog",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("div",{className:"modal-header",children:p.jsx("h5",{className:"modal-title",id:"idInfoModalLabel",children:"   "})}),p.jsxs("div",{className:"modal-body text-end",children:["          +     --:",p.jsx("br",{}),p.jsx("br",{}),'-         2024   : "12345"   : "123452024".',p.jsx("br",{}),p.jsx("br",{}),'-            : "34567"     2025   : "345672025".',p.jsx("br",{}),p.jsx("br",{}),'-         2024                          "34567"    "345672024".']}),p.jsx("div",{className:"modal-footer",children:p.jsx("button",{type:"button",className:"btn btn-danger w-100","data-bs-dismiss":"modal",children:""})})]})})})]}):p.jsxs("main",{children:[p.jsxs("section",{className:"d-grid gap-1",children:[t.firstGradeInPlatform>1&&p.jsxs("span",{className:"fs-6 text-danger mb-3",children:["*      ",Lt(`grade_${t.firstGradeInPlatform}`),"."]}),p.jsxs("h4",{className:"mb-1",children:[p.jsx("span",{className:"fw-bold text-primary",children:": "}),p.jsxs("span",{children:[t.name,"."]})]}),p.jsxs("h4",{className:"mb-1",children:[p.jsx("span",{className:"fw-bold text-primary",children:" : "}),p.jsxs("span",{children:[l,"."]})]}),p.jsxs("h4",{className:"mb-1",children:[p.jsx("span",{className:"fw-bold text-primary",children:" : "}),p.jsxs("span",{className:"fs-5",children:[t.totalDegree.total,"/",t.totalDegree.max," ",p.jsxs("span",{className:"fs-6",children:["(",(t.totalDegree.total*100/t.totalDegree.max).toFixed(2),"%)."]})]})]})]}),p.jsx("div",{className:"accordion mt-4",id:"gradesAccordion",ref:c,children:Object.entries(n).map(([f,g],y)=>p.jsxs("div",{className:"accordion-item",children:[p.jsx("h2",{className:"accordion-header",id:`heading${f}`,children:p.jsx("button",{className:`accordion-button ${y!==0?"collapsed":""}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${f}`,"aria-expanded":y===0,"aria-controls":`collapse${f}`,children:Lt(`grade_${f}`)})}),p.jsx("div",{id:`collapse${f}`,className:`accordion-collapse collapse ${y===0?"show":""}`,"aria-labelledby":`heading${f}`,"data-bs-parent":"#gradesAccordion",children:p.jsx("div",{className:"accordion-body",children:g.map(S=>p.jsx("div",{className:"mb-4",children:p.jsxs("div",{className:"table-responsive border-secondary-subtle rounded-2 py-1 my-0 ",children:[p.jsxs("h3",{className:"fs-5 p-2 my-0 mb-2",children:[" : ",S.term," -  : ",S.year,"."]}),p.jsxs("table",{className:"table table-striped border",children:[p.jsx("thead",{children:p.jsxs("tr",{children:[p.jsx("th",{className:"bg-dark text-white border-start py-2",children:""}),p.jsx("th",{className:"text-center bg-dark text-white py-2",children:""})]})}),p.jsx("tbody",{children:S.degrees.map((x,N)=>{const A=x.name||x.id;let E=x.degree;typeof E=="string"&&E.startsWith("/")&&(E=E.slice(1));const D=parseInt(E,10)>=50?"text-bg-success":"text-bg-danger";return p.jsxs("tr",{children:[p.jsx("td",{className:"fw-bold",children:A}),p.jsx("td",{className:`${D} text-center`,children:E})]},N)})})]})]})},S.term))})})]},f))})]})}function XB(){const[t,e]=F.useState(""),[n,r]=F.useState(!1),[i,s]=F.useState(null),o=yt(),a=async l=>{if(l.preventDefault(),r(!0),s(null),!/^\d{9}$/.test(t)){s("      9  ."),r(!1);return}try{const c=parseInt(t,10),{data:d,error:f}=await vx.from("degrees").select("student_id").eq("student_id",c).limit(1);if(f)throw f;d&&d.length>0?o(`/students/${c}`):s("    .        .")}catch(c){s("   .    ."),console.error("Error searching for student:",c)}finally{r(!1)}};return p.jsx("main",{className:"container",children:p.jsx("div",{className:"row justify-content-center",children:p.jsx("div",{children:p.jsx("div",{className:" shadow-sm",children:p.jsxs("div",{className:"card-body",children:[p.jsx(Un,{children:"   "}),p.jsxs("form",{onSubmit:a,className:"col-md-6 mx-auto",children:[p.jsxs("div",{className:"my-3",children:[p.jsxs("label",{htmlFor:"studentId",className:"form-label d-flex align-items-center gap-1",children:[" :",p.jsx("button",{type:"button",className:"btn btn-sm",style:{fontSize:"1.2em",verticalAlign:"middle",padding:0,lineHeight:1},"data-bs-toggle":"modal","data-bs-target":"#idInfoModal",tabIndex:-1,"aria-label":"   ",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",style:{width:"25px",height:"25px",transform:"scaleX(-1)"},children:p.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 0 1-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 0 1-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 0 1-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584ZM12 18a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"})})})]}),p.jsx("div",{className:"modal fade",id:"idInfoModal",tabIndex:-1,"aria-labelledby":"idInfoModalLabel","aria-hidden":"true",children:p.jsx("div",{className:"modal-dialog",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("div",{className:"modal-header",children:p.jsx("h5",{className:"modal-title",id:"idInfoModalLabel",children:"   "})}),p.jsxs("div",{className:"modal-body",children:["          +     --:",p.jsx("br",{}),p.jsx("br",{}),'-         2024   : "12345"   : "123452024".',p.jsx("br",{}),p.jsx("br",{}),'-            : "34567"     2025   : "345672025".',p.jsx("br",{}),p.jsx("br",{}),'-         2024                          "34567"    "345672024".']}),p.jsx("div",{className:"modal-footer",children:p.jsx("button",{type:"button",className:"btn btn-danger w-100","data-bs-dismiss":"modal",children:""})})]})})}),p.jsx("input",{type:"number",className:"form-control",id:"studentId",placeholder:"123456789",value:t,onChange:l=>{l.target.value.length<=9&&e(l.target.value)},required:!0})]}),i&&p.jsx("div",{className:"alert alert-danger",children:i}),p.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:n,children:n?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),p.jsx("span",{className:"visually-hidden",children:"Loading..."})]}):""})]})]})})})})})}function ZB(){const[t,e]=F.useState(null),[n,r]=F.useState(JSON.parse(localStorage.getItem("loggedInUserInfo")));F.useEffect(()=>{JI(Uc,async s=>{if(s){const a=(await rs(ei(In,`users/${s.uid}`))).data();localStorage.setItem("loggedinUserInfo",JSON.stringify(a)),r(a)}else localStorage.setItem("loggedinUserInfo",JSON.stringify(null)),r(null);e(s),localStorage.setItem("loggedinUser",JSON.stringify(s))})},[]);const i=lF(Mg(p.jsx(p.Fragment,{children:p.jsxs(qe,{path:"/",element:p.jsx(w$,{}),errorElement:p.jsx(K$,{}),children:[p.jsx(qe,{path:"/",element:p.jsx(R$,{})}),p.jsx(qe,{path:"/degrees/:grade/:year",element:p.jsx($$,{})}),p.jsx(qe,{path:"/degrees/:grade/:year/:studentId",element:p.jsx(W$,{})}),p.jsx(qe,{path:":grade/books/:term",element:p.jsx(G$,{})}),p.jsx(qe,{path:"/book/:bookId",element:p.jsx(NE,{})}),p.jsx(qe,{path:":grade/final_exams/:term",element:p.jsx(RU,{})}),p.jsx(qe,{path:"/final_exam/:examId",element:p.jsx(NE,{})}),p.jsx(qe,{path:":grade/more_resources/:term",element:p.jsx(xU,{})}),p.jsx(qe,{path:":grade/:term/more_resources/:subject",element:p.jsx(OE,{})}),p.jsx(qe,{path:"/general_subjects",element:p.jsx(PU,{})}),p.jsx(qe,{path:"/general_subjects/:subject",element:p.jsx(OE,{})}),p.jsx(qe,{path:"/test_yourself",element:p.jsx(hm,{})})," ",p.jsx(qe,{path:"/test_yourself/test_result",element:p.jsx(lU,{})}),p.jsx(qe,{path:":grade/test_yourself_students/:term",element:p.jsx(uU,{})}),p.jsx(qe,{path:"/test_yourself/sended_questions",element:p.jsx(hm,{})}),p.jsx(qe,{path:"/:grade/:term/:subject/test_yourself_students",element:p.jsx(hm,{})}),p.jsx(qe,{path:"/:grade/send_question_selector",element:n!=null&&n.write_permission?p.jsx(cU,{}):p.jsx(Bd,{})}),p.jsx(qe,{path:"/:grade/send_question_selector/:term",element:n!=null&&n.write_permission?p.jsx(dU,{}):p.jsx(Bd,{})}),p.jsx(qe,{path:"/:grade/:term/:subject/send_question",element:n!=null&&n.write_permission?p.jsx(yU,{}):p.jsx(Bd,{})}),p.jsx(qe,{path:"/signup",element:t?p.jsx(vE,{to:"/"}):p.jsx(pU,{})}),p.jsx(qe,{path:"/signin",element:t?p.jsx(vE,{to:"/"}):p.jsx(Bd,{})}),p.jsx(qe,{path:"/send_suggestion",element:p.jsx(EU,{})}),p.jsx(qe,{path:"/send_problem",element:p.jsx(bU,{})}),p.jsx(qe,{path:"/:grade/schedule",element:p.jsx(SU,{})}),p.jsx(qe,{path:"/:grade/lectures_recordings/:term",element:p.jsx(kU,{})}),p.jsx(qe,{path:"/students/:student_id",element:p.jsx(YB,{})}),p.jsx(qe,{path:"/find_student",element:p.jsx(XB,{})})]})})));return p.jsx(vF,{router:i})}ym.createRoot(document.getElementById("root")).render(p.jsx(ZB,{}));document.documentElement.setAttribute("data-bs-theme",localStorage.getItem("theme")||"light");
