function YE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function XE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ZE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var eT={exports:{}},hf={},tT={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu=Symbol.for("react.element"),Uk=Symbol.for("react.portal"),Bk=Symbol.for("react.fragment"),zk=Symbol.for("react.strict_mode"),qk=Symbol.for("react.profiler"),Hk=Symbol.for("react.provider"),Wk=Symbol.for("react.context"),Kk=Symbol.for("react.forward_ref"),Gk=Symbol.for("react.suspense"),Qk=Symbol.for("react.memo"),Jk=Symbol.for("react.lazy"),Ty=Symbol.iterator;function Yk(t){return t===null||typeof t!="object"?null:(t=Ty&&t[Ty]||t["@@iterator"],typeof t=="function"?t:null)}var nT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rT=Object.assign,iT={};function Il(t,e,n){this.props=t,this.context=e,this.refs=iT,this.updater=n||nT}Il.prototype.isReactComponent={};Il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sT(){}sT.prototype=Il.prototype;function Jg(t,e,n){this.props=t,this.context=e,this.refs=iT,this.updater=n||nT}var Yg=Jg.prototype=new sT;Yg.constructor=Jg;rT(Yg,Il.prototype);Yg.isPureReactComponent=!0;var by=Array.isArray,oT=Object.prototype.hasOwnProperty,Xg={current:null},aT={key:!0,ref:!0,__self:!0,__source:!0};function lT(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oT.call(e,r)&&!aT.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Iu,type:t,key:s,ref:o,props:i,_owner:Xg.current}}function Xk(t,e){return{$$typeof:Iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Iu}function Zk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Iy=/\/+/g;function bp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Zk(""+t.key):e.toString(36)}function Qd(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Iu:case Uk:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+bp(o,0):r,by(i)?(n="",t!=null&&(n=t.replace(Iy,"$&/")+"/"),Qd(i,e,n,"",function(u){return u})):i!=null&&(Zg(i)&&(i=Xk(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Iy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",by(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+bp(s,a);o+=Qd(s,e,n,l,i)}else if(l=Yk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+bp(s,a++),o+=Qd(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yd(t,e,n){if(t==null)return t;var r=[],i=0;return Qd(t,r,"","",function(s){return e.call(n,s,i++)}),r}function e1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},Jd={transition:null},t1={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:Jd,ReactCurrentOwner:Xg};function cT(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:yd,forEach:function(t,e,n){yd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yd(t,function(){e++}),e},toArray:function(t){return yd(t,function(e){return e})||[]},only:function(t){if(!Zg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Il;Re.Fragment=Bk;Re.Profiler=qk;Re.PureComponent=Jg;Re.StrictMode=zk;Re.Suspense=Gk;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t1;Re.act=cT;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rT({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Xg.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oT.call(e,l)&&!aT.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Iu,type:t.type,key:i,ref:s,props:r,_owner:o}};Re.createContext=function(t){return t={$$typeof:Wk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Hk,_context:t},t.Consumer=t};Re.createElement=lT;Re.createFactory=function(t){var e=lT.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:Kk,render:t}};Re.isValidElement=Zg;Re.lazy=function(t){return{$$typeof:Jk,_payload:{_status:-1,_result:t},_init:e1}};Re.memo=function(t,e){return{$$typeof:Qk,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=Jd.transition;Jd.transition={};try{t()}finally{Jd.transition=e}};Re.unstable_act=cT;Re.useCallback=function(t,e){return xn.current.useCallback(t,e)};Re.useContext=function(t){return xn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return xn.current.useEffect(t,e)};Re.useId=function(){return xn.current.useId()};Re.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return xn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};Re.useRef=function(t){return xn.current.useRef(t)};Re.useState=function(t){return xn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return xn.current.useTransition()};Re.version="18.3.1";tT.exports=Re;var F=tT.exports;const n1=XE(F),r1=YE({__proto__:null,default:n1},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1=F,s1=Symbol.for("react.element"),o1=Symbol.for("react.fragment"),a1=Object.prototype.hasOwnProperty,l1=i1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c1={key:!0,ref:!0,__self:!0,__source:!0};function uT(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)a1.call(e,r)&&!c1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:s1,type:t,key:s,ref:o,props:i,_owner:l1.current}}hf.Fragment=o1;hf.jsx=uT;hf.jsxs=uT;eT.exports=hf;var f=eT.exports,ym={},dT={exports:{}},or={},hT={exports:{}},fT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ae){var de=X.length;X.push(ae);e:for(;0<de;){var Ae=de-1>>>1,Te=X[Ae];if(0<i(Te,ae))X[Ae]=ae,X[de]=Te,de=Ae;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],de=X.pop();if(de!==ae){X[0]=de;e:for(var Ae=0,Te=X.length,H=Te>>>1;Ae<H;){var $e=2*(Ae+1)-1,qe=X[$e],Ye=$e+1,tt=X[Ye];if(0>i(qe,de))Ye<Te&&0>i(tt,qe)?(X[Ae]=tt,X[Ye]=de,Ae=Ye):(X[Ae]=qe,X[$e]=de,Ae=$e);else if(Ye<Te&&0>i(tt,de))X[Ae]=tt,X[Ye]=de,Ae=Ye;else break e}}return ae}function i(X,ae){var de=X.sortIndex-ae.sortIndex;return de!==0?de:X.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,p=null,g=3,y=!1,I=!1,A=!1,N=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(X){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=X)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(u)}}function j(X){if(A=!1,b(X),!I)if(n(l)!==null)I=!0,Je(B);else{var ae=n(u);ae!==null&&we(j,ae.startTime-X)}}function B(X,ae){I=!1,A&&(A=!1,x(w),w=-1),y=!0;var de=g;try{for(b(ae),p=n(l);p!==null&&(!(p.expirationTime>ae)||X&&!O());){var Ae=p.callback;if(typeof Ae=="function"){p.callback=null,g=p.priorityLevel;var Te=Ae(p.expirationTime<=ae);ae=t.unstable_now(),typeof Te=="function"?p.callback=Te:p===n(l)&&r(l),b(ae)}else r(l);p=n(l)}if(p!==null)var H=!0;else{var $e=n(u);$e!==null&&we(j,$e.startTime-ae),H=!1}return H}finally{p=null,g=de,y=!1}}var R=!1,k=null,w=-1,S=5,C=-1;function O(){return!(t.unstable_now()-C<S)}function V(){if(k!==null){var X=t.unstable_now();C=X;var ae=!0;try{ae=k(!0,X)}finally{ae?P():(R=!1,k=null)}}else R=!1}var P;if(typeof E=="function")P=function(){E(V)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Qe=ge.port2;ge.port1.onmessage=V,P=function(){Qe.postMessage(null)}}else P=function(){N(V,0)};function Je(X){k=X,R||(R=!0,P())}function we(X,ae){w=N(function(){X(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){I||y||(I=!0,Je(B))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(g){case 1:case 2:case 3:var ae=3;break;default:ae=g}var de=g;g=ae;try{return X()}finally{g=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=g;g=X;try{return ae()}finally{g=de}},t.unstable_scheduleCallback=function(X,ae,de){var Ae=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ae+de:Ae):de=Ae,X){case 1:var Te=-1;break;case 2:Te=250;break;case 5:Te=1073741823;break;case 4:Te=1e4;break;default:Te=5e3}return Te=de+Te,X={id:d++,callback:ae,priorityLevel:X,startTime:de,expirationTime:Te,sortIndex:-1},de>Ae?(X.sortIndex=de,e(u,X),n(l)===null&&X===n(u)&&(A?(x(w),w=-1):A=!0,we(j,de-Ae))):(X.sortIndex=Te,e(l,X),I||y||(I=!0,Je(B))),X},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(X){var ae=g;return function(){var de=g;g=ae;try{return X.apply(this,arguments)}finally{g=de}}}})(fT);hT.exports=fT;var u1=hT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1=F,nr=u1;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pT=new Set,Wc={};function ia(t,e){rl(t,e),rl(t+"Capture",e)}function rl(t,e){for(Wc[t]=e,t=0;t<e.length;t++)pT.add(e[t])}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wm=Object.prototype.hasOwnProperty,h1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sy={},Ay={};function f1(t){return wm.call(Ay,t)?!0:wm.call(Sy,t)?!1:h1.test(t)?Ay[t]=!0:(Sy[t]=!0,!1)}function p1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function m1(t,e,n,r){if(e===null||typeof e>"u"||p1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var e_=/[\-:]([a-z])/g;function t_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(e_,t_);Zt[e]=new kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(e_,t_);Zt[e]=new kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(e_,t_);Zt[e]=new kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new kn(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function n_(t,e,n,r){var i=Zt.hasOwnProperty(e)?Zt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(m1(e,n,i,r)&&(n=null),r||i===null?f1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ss=d1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wd=Symbol.for("react.element"),Na=Symbol.for("react.portal"),Oa=Symbol.for("react.fragment"),r_=Symbol.for("react.strict_mode"),Em=Symbol.for("react.profiler"),mT=Symbol.for("react.provider"),gT=Symbol.for("react.context"),i_=Symbol.for("react.forward_ref"),Tm=Symbol.for("react.suspense"),bm=Symbol.for("react.suspense_list"),s_=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),_T=Symbol.for("react.offscreen"),xy=Symbol.iterator;function tc(t){return t===null||typeof t!="object"?null:(t=xy&&t[xy]||t["@@iterator"],typeof t=="function"?t:null)}var wt=Object.assign,Ip;function pc(t){if(Ip===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ip=e&&e[1]||""}return`
`+Ip+t}var Sp=!1;function Ap(t,e){if(!t||Sp)return"";Sp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pc(t):""}function g1(t){switch(t.tag){case 5:return pc(t.type);case 16:return pc("Lazy");case 13:return pc("Suspense");case 19:return pc("SuspenseList");case 0:case 2:case 15:return t=Ap(t.type,!1),t;case 11:return t=Ap(t.type.render,!1),t;case 1:return t=Ap(t.type,!0),t;default:return""}}function Im(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Oa:return"Fragment";case Na:return"Portal";case Em:return"Profiler";case r_:return"StrictMode";case Tm:return"Suspense";case bm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gT:return(t.displayName||"Context")+".Consumer";case mT:return(t._context.displayName||"Context")+".Provider";case i_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case s_:return e=t.displayName||null,e!==null?e:Im(t.type)||"Memo";case Is:e=t._payload,t=t._init;try{return Im(t(e))}catch{}}return null}function _1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Im(e);case 8:return e===r_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function v1(t){var e=vT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ed(t){t._valueTracker||(t._valueTracker=v1(t))}function yT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sm(t,e){var n=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ky(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wT(t,e){e=e.checked,e!=null&&n_(t,"checked",e,!1)}function Am(t,e){wT(t,e);var n=Qs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xm(t,e.type,n):e.hasOwnProperty("defaultValue")&&xm(t,e.type,Qs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xm(t,e,n){(e!=="number"||vh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var mc=Array.isArray;function Wa(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function km(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ry(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(mc(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qs(n)}}function ET(t,e){var n=Qs(e.value),r=Qs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Py(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Td,bT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Td=Td||document.createElement("div"),Td.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Td.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ac={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y1=["Webkit","ms","Moz","O"];Object.keys(Ac).forEach(function(t){y1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ac[e]=Ac[t]})});function IT(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ac.hasOwnProperty(t)&&Ac[t]?(""+e).trim():e+"px"}function ST(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=IT(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var w1=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rm(t,e){if(e){if(w1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nm=null;function o_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Om=null,Ka=null,Ga=null;function Ny(t){if(t=xu(t)){if(typeof Om!="function")throw Error(J(280));var e=t.stateNode;e&&(e=_f(e),Om(t.stateNode,t.type,e))}}function AT(t){Ka?Ga?Ga.push(t):Ga=[t]:Ka=t}function xT(){if(Ka){var t=Ka,e=Ga;if(Ga=Ka=null,Ny(t),e)for(t=0;t<e.length;t++)Ny(e[t])}}function kT(t,e){return t(e)}function CT(){}var xp=!1;function RT(t,e,n){if(xp)return t(e,n);xp=!0;try{return kT(t,e,n)}finally{xp=!1,(Ka!==null||Ga!==null)&&(CT(),xT())}}function Gc(t,e){var n=t.stateNode;if(n===null)return null;var r=_f(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var jm=!1;if(Gi)try{var nc={};Object.defineProperty(nc,"passive",{get:function(){jm=!0}}),window.addEventListener("test",nc,nc),window.removeEventListener("test",nc,nc)}catch{jm=!1}function E1(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var xc=!1,yh=null,wh=!1,Dm=null,T1={onError:function(t){xc=!0,yh=t}};function b1(t,e,n,r,i,s,o,a,l){xc=!1,yh=null,E1.apply(T1,arguments)}function I1(t,e,n,r,i,s,o,a,l){if(b1.apply(this,arguments),xc){if(xc){var u=yh;xc=!1,yh=null}else throw Error(J(198));wh||(wh=!0,Dm=u)}}function sa(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Oy(t){if(sa(t)!==t)throw Error(J(188))}function S1(t){var e=t.alternate;if(!e){if(e=sa(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Oy(i),t;if(s===r)return Oy(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function NT(t){return t=S1(t),t!==null?OT(t):null}function OT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OT(t);if(e!==null)return e;t=t.sibling}return null}var jT=nr.unstable_scheduleCallback,jy=nr.unstable_cancelCallback,A1=nr.unstable_shouldYield,x1=nr.unstable_requestPaint,At=nr.unstable_now,k1=nr.unstable_getCurrentPriorityLevel,a_=nr.unstable_ImmediatePriority,DT=nr.unstable_UserBlockingPriority,Eh=nr.unstable_NormalPriority,C1=nr.unstable_LowPriority,LT=nr.unstable_IdlePriority,ff=null,pi=null;function R1(t){if(pi&&typeof pi.onCommitFiberRoot=="function")try{pi.onCommitFiberRoot(ff,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:O1,P1=Math.log,N1=Math.LN2;function O1(t){return t>>>=0,t===0?32:31-(P1(t)/N1|0)|0}var bd=64,Id=4194304;function gc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Th(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=gc(a):(s&=o,s!==0&&(r=gc(s)))}else o=n&~i,o!==0?r=gc(o):s!==0&&(r=gc(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gr(e),i=1<<n,r|=t[n],e&=~i;return r}function j1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Gr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=j1(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Lm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function MT(){var t=bd;return bd<<=1,!(bd&4194240)&&(bd=64),t}function kp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Su(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gr(e),t[e]=n}function L1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function l_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var He=0;function VT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FT,c_,$T,UT,BT,Mm=!1,Sd=[],Vs=null,Fs=null,$s=null,Qc=new Map,Jc=new Map,xs=[],M1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dy(t,e){switch(t){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":Fs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Qc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jc.delete(e.pointerId)}}function rc(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=xu(e),e!==null&&c_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function V1(t,e,n,r,i){switch(e){case"focusin":return Vs=rc(Vs,t,e,n,r,i),!0;case"dragenter":return Fs=rc(Fs,t,e,n,r,i),!0;case"mouseover":return $s=rc($s,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Qc.set(s,rc(Qc.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Jc.set(s,rc(Jc.get(s)||null,t,e,n,r,i)),!0}return!1}function zT(t){var e=Po(t.target);if(e!==null){var n=sa(e);if(n!==null){if(e=n.tag,e===13){if(e=PT(n),e!==null){t.blockedOn=e,BT(t.priority,function(){$T(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nm=r,n.target.dispatchEvent(r),Nm=null}else return e=xu(n),e!==null&&c_(e),t.blockedOn=n,!1;e.shift()}return!0}function Ly(t,e,n){Yd(t)&&n.delete(e)}function F1(){Mm=!1,Vs!==null&&Yd(Vs)&&(Vs=null),Fs!==null&&Yd(Fs)&&(Fs=null),$s!==null&&Yd($s)&&($s=null),Qc.forEach(Ly),Jc.forEach(Ly)}function ic(t,e){t.blockedOn===e&&(t.blockedOn=null,Mm||(Mm=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,F1)))}function Yc(t){function e(i){return ic(i,t)}if(0<Sd.length){ic(Sd[0],t);for(var n=1;n<Sd.length;n++){var r=Sd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vs!==null&&ic(Vs,t),Fs!==null&&ic(Fs,t),$s!==null&&ic($s,t),Qc.forEach(e),Jc.forEach(e),n=0;n<xs.length;n++)r=xs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xs.length&&(n=xs[0],n.blockedOn===null);)zT(n),n.blockedOn===null&&xs.shift()}var Qa=ss.ReactCurrentBatchConfig,bh=!0;function $1(t,e,n,r){var i=He,s=Qa.transition;Qa.transition=null;try{He=1,u_(t,e,n,r)}finally{He=i,Qa.transition=s}}function U1(t,e,n,r){var i=He,s=Qa.transition;Qa.transition=null;try{He=4,u_(t,e,n,r)}finally{He=i,Qa.transition=s}}function u_(t,e,n,r){if(bh){var i=Vm(t,e,n,r);if(i===null)Vp(t,e,r,Ih,n),Dy(t,r);else if(V1(i,t,e,n,r))r.stopPropagation();else if(Dy(t,r),e&4&&-1<M1.indexOf(t)){for(;i!==null;){var s=xu(i);if(s!==null&&FT(s),s=Vm(t,e,n,r),s===null&&Vp(t,e,r,Ih,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Vp(t,e,r,null,n)}}var Ih=null;function Vm(t,e,n,r){if(Ih=null,t=o_(r),t=Po(t),t!==null)if(e=sa(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PT(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ih=t,null}function qT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k1()){case a_:return 1;case DT:return 4;case Eh:case C1:return 16;case LT:return 536870912;default:return 16}default:return 16}}var Ds=null,d_=null,Xd=null;function HT(){if(Xd)return Xd;var t,e=d_,n=e.length,r,i="value"in Ds?Ds.value:Ds.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Xd=i.slice(t,1<r?1-r:void 0)}function Zd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ad(){return!0}function My(){return!1}function ar(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ad:My,this.isPropagationStopped=My,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),e}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h_=ar(Sl),Au=wt({},Sl,{view:0,detail:0}),B1=ar(Au),Cp,Rp,sc,pf=wt({},Au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sc&&(sc&&t.type==="mousemove"?(Cp=t.screenX-sc.screenX,Rp=t.screenY-sc.screenY):Rp=Cp=0,sc=t),Cp)},movementY:function(t){return"movementY"in t?t.movementY:Rp}}),Vy=ar(pf),z1=wt({},pf,{dataTransfer:0}),q1=ar(z1),H1=wt({},Au,{relatedTarget:0}),Pp=ar(H1),W1=wt({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),K1=ar(W1),G1=wt({},Sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Q1=ar(G1),J1=wt({},Sl,{data:0}),Fy=ar(J1),Y1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Z1[t])?!!e[t]:!1}function f_(){return eC}var tC=wt({},Au,{key:function(t){if(t.key){var e=Y1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?X1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f_,charCode:function(t){return t.type==="keypress"?Zd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nC=ar(tC),rC=wt({},pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$y=ar(rC),iC=wt({},Au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f_}),sC=ar(iC),oC=wt({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),aC=ar(oC),lC=wt({},pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cC=ar(lC),uC=[9,13,27,32],p_=Gi&&"CompositionEvent"in window,kc=null;Gi&&"documentMode"in document&&(kc=document.documentMode);var dC=Gi&&"TextEvent"in window&&!kc,WT=Gi&&(!p_||kc&&8<kc&&11>=kc),Uy=" ",By=!1;function KT(t,e){switch(t){case"keyup":return uC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ja=!1;function hC(t,e){switch(t){case"compositionend":return GT(e);case"keypress":return e.which!==32?null:(By=!0,Uy);case"textInput":return t=e.data,t===Uy&&By?null:t;default:return null}}function fC(t,e){if(ja)return t==="compositionend"||!p_&&KT(t,e)?(t=HT(),Xd=d_=Ds=null,ja=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WT&&e.locale!=="ko"?null:e.data;default:return null}}var pC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pC[t.type]:e==="textarea"}function QT(t,e,n,r){AT(r),e=Sh(e,"onChange"),0<e.length&&(n=new h_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cc=null,Xc=null;function mC(t){ob(t,0)}function mf(t){var e=Ma(t);if(yT(e))return t}function gC(t,e){if(t==="change")return e}var JT=!1;if(Gi){var Np;if(Gi){var Op="oninput"in document;if(!Op){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),Op=typeof qy.oninput=="function"}Np=Op}else Np=!1;JT=Np&&(!document.documentMode||9<document.documentMode)}function Hy(){Cc&&(Cc.detachEvent("onpropertychange",YT),Xc=Cc=null)}function YT(t){if(t.propertyName==="value"&&mf(Xc)){var e=[];QT(e,Xc,t,o_(t)),RT(mC,e)}}function _C(t,e,n){t==="focusin"?(Hy(),Cc=e,Xc=n,Cc.attachEvent("onpropertychange",YT)):t==="focusout"&&Hy()}function vC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mf(Xc)}function yC(t,e){if(t==="click")return mf(e)}function wC(t,e){if(t==="input"||t==="change")return mf(e)}function EC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jr=typeof Object.is=="function"?Object.is:EC;function Zc(t,e){if(Jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!wm.call(e,i)||!Jr(t[i],e[i]))return!1}return!0}function Wy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ky(t,e){var n=Wy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wy(n)}}function XT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZT(){for(var t=window,e=vh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vh(t.document)}return e}function m_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TC(t){var e=ZT(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XT(n.ownerDocument.documentElement,n)){if(r!==null&&m_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Ky(n,s);var o=Ky(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bC=Gi&&"documentMode"in document&&11>=document.documentMode,Da=null,Fm=null,Rc=null,$m=!1;function Gy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$m||Da==null||Da!==vh(r)||(r=Da,"selectionStart"in r&&m_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rc&&Zc(Rc,r)||(Rc=r,r=Sh(Fm,"onSelect"),0<r.length&&(e=new h_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Da)))}function xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var La={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},jp={},eb={};Gi&&(eb=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function gf(t){if(jp[t])return jp[t];if(!La[t])return t;var e=La[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eb)return jp[t]=e[n];return t}var tb=gf("animationend"),nb=gf("animationiteration"),rb=gf("animationstart"),ib=gf("transitionend"),sb=new Map,Qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(t,e){sb.set(t,e),ia(e,[t])}for(var Dp=0;Dp<Qy.length;Dp++){var Lp=Qy[Dp],IC=Lp.toLowerCase(),SC=Lp[0].toUpperCase()+Lp.slice(1);to(IC,"on"+SC)}to(tb,"onAnimationEnd");to(nb,"onAnimationIteration");to(rb,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(ib,"onTransitionEnd");rl("onMouseEnter",["mouseout","mouseover"]);rl("onMouseLeave",["mouseout","mouseover"]);rl("onPointerEnter",["pointerout","pointerover"]);rl("onPointerLeave",["pointerout","pointerover"]);ia("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ia("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ia("onBeforeInput",["compositionend","keypress","textInput","paste"]);ia("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ia("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("cancel close invalid load scroll toggle".split(" ").concat(_c));function Jy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,I1(r,e,void 0,t),t.currentTarget=null}function ob(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Jy(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Jy(i,a,u),s=l}}}if(wh)throw t=Dm,wh=!1,Dm=null,t}function ut(t,e){var n=e[Hm];n===void 0&&(n=e[Hm]=new Set);var r=t+"__bubble";n.has(r)||(ab(e,t,2,!1),n.add(r))}function Mp(t,e,n){var r=0;e&&(r|=4),ab(n,t,r,e)}var kd="_reactListening"+Math.random().toString(36).slice(2);function eu(t){if(!t[kd]){t[kd]=!0,pT.forEach(function(n){n!=="selectionchange"&&(AC.has(n)||Mp(n,!1,t),Mp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kd]||(e[kd]=!0,Mp("selectionchange",!1,e))}}function ab(t,e,n,r){switch(qT(e)){case 1:var i=$1;break;case 4:i=U1;break;default:i=u_}n=i.bind(null,e,n,t),i=void 0,!jm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Vp(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Po(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}RT(function(){var u=s,d=o_(n),p=[];e:{var g=sb.get(t);if(g!==void 0){var y=h_,I=t;switch(t){case"keypress":if(Zd(n)===0)break e;case"keydown":case"keyup":y=nC;break;case"focusin":I="focus",y=Pp;break;case"focusout":I="blur",y=Pp;break;case"beforeblur":case"afterblur":y=Pp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=q1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=sC;break;case tb:case nb:case rb:y=K1;break;case ib:y=aC;break;case"scroll":y=B1;break;case"wheel":y=cC;break;case"copy":case"cut":case"paste":y=Q1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=$y}var A=(e&4)!==0,N=!A&&t==="scroll",x=A?g!==null?g+"Capture":null:g;A=[];for(var E=u,b;E!==null;){b=E;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,x!==null&&(j=Gc(E,x),j!=null&&A.push(tu(E,j,b)))),N)break;E=E.return}0<A.length&&(g=new y(g,I,null,n,d),p.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",g&&n!==Nm&&(I=n.relatedTarget||n.fromElement)&&(Po(I)||I[Qi]))break e;if((y||g)&&(g=d.window===d?d:(g=d.ownerDocument)?g.defaultView||g.parentWindow:window,y?(I=n.relatedTarget||n.toElement,y=u,I=I?Po(I):null,I!==null&&(N=sa(I),I!==N||I.tag!==5&&I.tag!==6)&&(I=null)):(y=null,I=u),y!==I)){if(A=Vy,j="onMouseLeave",x="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(A=$y,j="onPointerLeave",x="onPointerEnter",E="pointer"),N=y==null?g:Ma(y),b=I==null?g:Ma(I),g=new A(j,E+"leave",y,n,d),g.target=N,g.relatedTarget=b,j=null,Po(d)===u&&(A=new A(x,E+"enter",I,n,d),A.target=b,A.relatedTarget=N,j=A),N=j,y&&I)t:{for(A=y,x=I,E=0,b=A;b;b=Ta(b))E++;for(b=0,j=x;j;j=Ta(j))b++;for(;0<E-b;)A=Ta(A),E--;for(;0<b-E;)x=Ta(x),b--;for(;E--;){if(A===x||x!==null&&A===x.alternate)break t;A=Ta(A),x=Ta(x)}A=null}else A=null;y!==null&&Yy(p,g,y,A,!1),I!==null&&N!==null&&Yy(p,N,I,A,!0)}}e:{if(g=u?Ma(u):window,y=g.nodeName&&g.nodeName.toLowerCase(),y==="select"||y==="input"&&g.type==="file")var B=gC;else if(zy(g))if(JT)B=wC;else{B=vC;var R=_C}else(y=g.nodeName)&&y.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(B=yC);if(B&&(B=B(t,u))){QT(p,B,n,d);break e}R&&R(t,g,u),t==="focusout"&&(R=g._wrapperState)&&R.controlled&&g.type==="number"&&xm(g,"number",g.value)}switch(R=u?Ma(u):window,t){case"focusin":(zy(R)||R.contentEditable==="true")&&(Da=R,Fm=u,Rc=null);break;case"focusout":Rc=Fm=Da=null;break;case"mousedown":$m=!0;break;case"contextmenu":case"mouseup":case"dragend":$m=!1,Gy(p,n,d);break;case"selectionchange":if(bC)break;case"keydown":case"keyup":Gy(p,n,d)}var k;if(p_)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else ja?KT(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(WT&&n.locale!=="ko"&&(ja||w!=="onCompositionStart"?w==="onCompositionEnd"&&ja&&(k=HT()):(Ds=d,d_="value"in Ds?Ds.value:Ds.textContent,ja=!0)),R=Sh(u,w),0<R.length&&(w=new Fy(w,t,null,n,d),p.push({event:w,listeners:R}),k?w.data=k:(k=GT(n),k!==null&&(w.data=k)))),(k=dC?hC(t,n):fC(t,n))&&(u=Sh(u,"onBeforeInput"),0<u.length&&(d=new Fy("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:u}),d.data=k))}ob(p,e)})}function tu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Gc(t,n),s!=null&&r.unshift(tu(t,s,i)),s=Gc(t,e),s!=null&&r.push(tu(t,s,i))),t=t.return}return r}function Ta(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yy(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Gc(n,s),l!=null&&o.unshift(tu(n,l,a))):i||(l=Gc(n,s),l!=null&&o.push(tu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xC=/\r\n?/g,kC=/\u0000|\uFFFD/g;function Xy(t){return(typeof t=="string"?t:""+t).replace(xC,`
`).replace(kC,"")}function Cd(t,e,n){if(e=Xy(e),Xy(t)!==e&&n)throw Error(J(425))}function Ah(){}var Um=null,Bm=null;function zm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qm=typeof setTimeout=="function"?setTimeout:void 0,CC=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,RC=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(t){return Zy.resolve(null).then(t).catch(PC)}:qm;function PC(t){setTimeout(function(){throw t})}function Fp(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Yc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Yc(e)}function Us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ew(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Al=Math.random().toString(36).slice(2),hi="__reactFiber$"+Al,nu="__reactProps$"+Al,Qi="__reactContainer$"+Al,Hm="__reactEvents$"+Al,NC="__reactListeners$"+Al,OC="__reactHandles$"+Al;function Po(t){var e=t[hi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qi]||n[hi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ew(t);t!==null;){if(n=t[hi])return n;t=ew(t)}return e}t=n,n=t.parentNode}return null}function xu(t){return t=t[hi]||t[Qi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ma(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function _f(t){return t[nu]||null}var Wm=[],Va=-1;function no(t){return{current:t}}function dt(t){0>Va||(t.current=Wm[Va],Wm[Va]=null,Va--)}function st(t,e){Va++,Wm[Va]=t.current,t.current=e}var Js={},dn=no(Js),Vn=no(!1),Bo=Js;function il(t,e){var n=t.type.contextTypes;if(!n)return Js;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fn(t){return t=t.childContextTypes,t!=null}function xh(){dt(Vn),dt(dn)}function tw(t,e,n){if(dn.current!==Js)throw Error(J(168));st(dn,e),st(Vn,n)}function lb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,_1(t)||"Unknown",i));return wt({},n,r)}function kh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Js,Bo=dn.current,st(dn,t),st(Vn,Vn.current),!0}function nw(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=lb(t,e,Bo),r.__reactInternalMemoizedMergedChildContext=t,dt(Vn),dt(dn),st(dn,t)):dt(Vn),st(Vn,n)}var Vi=null,vf=!1,$p=!1;function cb(t){Vi===null?Vi=[t]:Vi.push(t)}function jC(t){vf=!0,cb(t)}function ro(){if(!$p&&Vi!==null){$p=!0;var t=0,e=He;try{var n=Vi;for(He=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vi=null,vf=!1}catch(i){throw Vi!==null&&(Vi=Vi.slice(t+1)),jT(a_,ro),i}finally{He=e,$p=!1}}return null}var Fa=[],$a=0,Ch=null,Rh=0,vr=[],yr=0,zo=null,Fi=1,$i="";function So(t,e){Fa[$a++]=Rh,Fa[$a++]=Ch,Ch=t,Rh=e}function ub(t,e,n){vr[yr++]=Fi,vr[yr++]=$i,vr[yr++]=zo,zo=t;var r=Fi;t=$i;var i=32-Gr(r)-1;r&=~(1<<i),n+=1;var s=32-Gr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Fi=1<<32-Gr(e)+i|n<<i|r,$i=s+t}else Fi=1<<s|n<<i|r,$i=t}function g_(t){t.return!==null&&(So(t,1),ub(t,1,0))}function __(t){for(;t===Ch;)Ch=Fa[--$a],Fa[$a]=null,Rh=Fa[--$a],Fa[$a]=null;for(;t===zo;)zo=vr[--yr],vr[yr]=null,$i=vr[--yr],vr[yr]=null,Fi=vr[--yr],vr[yr]=null}var Zn=null,Xn=null,pt=!1,Wr=null;function db(t,e){var n=Er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zn=t,Xn=Us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zn=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zo!==null?{id:Fi,overflow:$i}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zn=t,Xn=null,!0):!1;default:return!1}}function Km(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gm(t){if(pt){var e=Xn;if(e){var n=e;if(!rw(t,e)){if(Km(t))throw Error(J(418));e=Us(n.nextSibling);var r=Zn;e&&rw(t,e)?db(r,n):(t.flags=t.flags&-4097|2,pt=!1,Zn=t)}}else{if(Km(t))throw Error(J(418));t.flags=t.flags&-4097|2,pt=!1,Zn=t}}}function iw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zn=t}function Rd(t){if(t!==Zn)return!1;if(!pt)return iw(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zm(t.type,t.memoizedProps)),e&&(e=Xn)){if(Km(t))throw hb(),Error(J(418));for(;e;)db(t,e),e=Us(e.nextSibling)}if(iw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xn=Us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=Zn?Us(t.stateNode.nextSibling):null;return!0}function hb(){for(var t=Xn;t;)t=Us(t.nextSibling)}function sl(){Xn=Zn=null,pt=!1}function v_(t){Wr===null?Wr=[t]:Wr.push(t)}var DC=ss.ReactCurrentBatchConfig;function oc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Pd(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sw(t){var e=t._init;return e(t._payload)}function fb(t){function e(x,E){if(t){var b=x.deletions;b===null?(x.deletions=[E],x.flags|=16):b.push(E)}}function n(x,E){if(!t)return null;for(;E!==null;)e(x,E),E=E.sibling;return null}function r(x,E){for(x=new Map;E!==null;)E.key!==null?x.set(E.key,E):x.set(E.index,E),E=E.sibling;return x}function i(x,E){return x=Hs(x,E),x.index=0,x.sibling=null,x}function s(x,E,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<E?(x.flags|=2,E):b):(x.flags|=2,E)):(x.flags|=1048576,E)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,E,b,j){return E===null||E.tag!==6?(E=Kp(b,x.mode,j),E.return=x,E):(E=i(E,b),E.return=x,E)}function l(x,E,b,j){var B=b.type;return B===Oa?d(x,E,b.props.children,j,b.key):E!==null&&(E.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Is&&sw(B)===E.type)?(j=i(E,b.props),j.ref=oc(x,E,b),j.return=x,j):(j=oh(b.type,b.key,b.props,null,x.mode,j),j.ref=oc(x,E,b),j.return=x,j)}function u(x,E,b,j){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=Gp(b,x.mode,j),E.return=x,E):(E=i(E,b.children||[]),E.return=x,E)}function d(x,E,b,j,B){return E===null||E.tag!==7?(E=Fo(b,x.mode,j,B),E.return=x,E):(E=i(E,b),E.return=x,E)}function p(x,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Kp(""+E,x.mode,b),E.return=x,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case wd:return b=oh(E.type,E.key,E.props,null,x.mode,b),b.ref=oc(x,null,E),b.return=x,b;case Na:return E=Gp(E,x.mode,b),E.return=x,E;case Is:var j=E._init;return p(x,j(E._payload),b)}if(mc(E)||tc(E))return E=Fo(E,x.mode,b,null),E.return=x,E;Pd(x,E)}return null}function g(x,E,b,j){var B=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return B!==null?null:a(x,E,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wd:return b.key===B?l(x,E,b,j):null;case Na:return b.key===B?u(x,E,b,j):null;case Is:return B=b._init,g(x,E,B(b._payload),j)}if(mc(b)||tc(b))return B!==null?null:d(x,E,b,j,null);Pd(x,b)}return null}function y(x,E,b,j,B){if(typeof j=="string"&&j!==""||typeof j=="number")return x=x.get(b)||null,a(E,x,""+j,B);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case wd:return x=x.get(j.key===null?b:j.key)||null,l(E,x,j,B);case Na:return x=x.get(j.key===null?b:j.key)||null,u(E,x,j,B);case Is:var R=j._init;return y(x,E,b,R(j._payload),B)}if(mc(j)||tc(j))return x=x.get(b)||null,d(E,x,j,B,null);Pd(E,j)}return null}function I(x,E,b,j){for(var B=null,R=null,k=E,w=E=0,S=null;k!==null&&w<b.length;w++){k.index>w?(S=k,k=null):S=k.sibling;var C=g(x,k,b[w],j);if(C===null){k===null&&(k=S);break}t&&k&&C.alternate===null&&e(x,k),E=s(C,E,w),R===null?B=C:R.sibling=C,R=C,k=S}if(w===b.length)return n(x,k),pt&&So(x,w),B;if(k===null){for(;w<b.length;w++)k=p(x,b[w],j),k!==null&&(E=s(k,E,w),R===null?B=k:R.sibling=k,R=k);return pt&&So(x,w),B}for(k=r(x,k);w<b.length;w++)S=y(k,x,w,b[w],j),S!==null&&(t&&S.alternate!==null&&k.delete(S.key===null?w:S.key),E=s(S,E,w),R===null?B=S:R.sibling=S,R=S);return t&&k.forEach(function(O){return e(x,O)}),pt&&So(x,w),B}function A(x,E,b,j){var B=tc(b);if(typeof B!="function")throw Error(J(150));if(b=B.call(b),b==null)throw Error(J(151));for(var R=B=null,k=E,w=E=0,S=null,C=b.next();k!==null&&!C.done;w++,C=b.next()){k.index>w?(S=k,k=null):S=k.sibling;var O=g(x,k,C.value,j);if(O===null){k===null&&(k=S);break}t&&k&&O.alternate===null&&e(x,k),E=s(O,E,w),R===null?B=O:R.sibling=O,R=O,k=S}if(C.done)return n(x,k),pt&&So(x,w),B;if(k===null){for(;!C.done;w++,C=b.next())C=p(x,C.value,j),C!==null&&(E=s(C,E,w),R===null?B=C:R.sibling=C,R=C);return pt&&So(x,w),B}for(k=r(x,k);!C.done;w++,C=b.next())C=y(k,x,w,C.value,j),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?w:C.key),E=s(C,E,w),R===null?B=C:R.sibling=C,R=C);return t&&k.forEach(function(V){return e(x,V)}),pt&&So(x,w),B}function N(x,E,b,j){if(typeof b=="object"&&b!==null&&b.type===Oa&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case wd:e:{for(var B=b.key,R=E;R!==null;){if(R.key===B){if(B=b.type,B===Oa){if(R.tag===7){n(x,R.sibling),E=i(R,b.props.children),E.return=x,x=E;break e}}else if(R.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Is&&sw(B)===R.type){n(x,R.sibling),E=i(R,b.props),E.ref=oc(x,R,b),E.return=x,x=E;break e}n(x,R);break}else e(x,R);R=R.sibling}b.type===Oa?(E=Fo(b.props.children,x.mode,j,b.key),E.return=x,x=E):(j=oh(b.type,b.key,b.props,null,x.mode,j),j.ref=oc(x,E,b),j.return=x,x=j)}return o(x);case Na:e:{for(R=b.key;E!==null;){if(E.key===R)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){n(x,E.sibling),E=i(E,b.children||[]),E.return=x,x=E;break e}else{n(x,E);break}else e(x,E);E=E.sibling}E=Gp(b,x.mode,j),E.return=x,x=E}return o(x);case Is:return R=b._init,N(x,E,R(b._payload),j)}if(mc(b))return I(x,E,b,j);if(tc(b))return A(x,E,b,j);Pd(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(n(x,E.sibling),E=i(E,b),E.return=x,x=E):(n(x,E),E=Kp(b,x.mode,j),E.return=x,x=E),o(x)):n(x,E)}return N}var ol=fb(!0),pb=fb(!1),Ph=no(null),Nh=null,Ua=null,y_=null;function w_(){y_=Ua=Nh=null}function E_(t){var e=Ph.current;dt(Ph),t._currentValue=e}function Qm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ja(t,e){Nh=t,y_=Ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mn=!0),t.firstContext=null)}function Sr(t){var e=t._currentValue;if(y_!==t)if(t={context:t,memoizedValue:e,next:null},Ua===null){if(Nh===null)throw Error(J(308));Ua=t,Nh.dependencies={lanes:0,firstContext:t}}else Ua=Ua.next=t;return e}var No=null;function T_(t){No===null?No=[t]:No.push(t)}function mb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,T_(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ji(t,r)}function Ji(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ss=!1;function b_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ji(t,n)}return i=r.interleaved,i===null?(e.next=e,T_(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ji(t,n)}function eh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,l_(t,n)}}function ow(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oh(t,e,n,r){var i=t.updateQueue;Ss=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var p=i.baseState;o=0,d=u=l=null,a=s;do{var g=a.lane,y=a.eventTime;if((r&g)===g){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,A=a;switch(g=e,y=n,A.tag){case 1:if(I=A.payload,typeof I=="function"){p=I.call(y,p,g);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=A.payload,g=typeof I=="function"?I.call(y,p,g):I,g==null)break e;p=wt({},p,g);break e;case 2:Ss=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,g=i.effects,g===null?i.effects=[a]:g.push(a))}else y={eventTime:y,lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=p):d=d.next=y,o|=g;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;g=a,a=g.next,g.next=null,i.lastBaseUpdate=g,i.shared.pending=null}}while(!0);if(d===null&&(l=p),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ho|=o,t.lanes=o,t.memoizedState=p}}function aw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var ku={},mi=no(ku),ru=no(ku),iu=no(ku);function Oo(t){if(t===ku)throw Error(J(174));return t}function I_(t,e){switch(st(iu,e),st(ru,t),st(mi,ku),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cm(e,t)}dt(mi),st(mi,e)}function al(){dt(mi),dt(ru),dt(iu)}function _b(t){Oo(iu.current);var e=Oo(mi.current),n=Cm(e,t.type);e!==n&&(st(ru,t),st(mi,n))}function S_(t){ru.current===t&&(dt(mi),dt(ru))}var vt=no(0);function jh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Up=[];function A_(){for(var t=0;t<Up.length;t++)Up[t]._workInProgressVersionPrimary=null;Up.length=0}var th=ss.ReactCurrentDispatcher,Bp=ss.ReactCurrentBatchConfig,qo=0,yt=null,Lt=null,zt=null,Dh=!1,Pc=!1,su=0,LC=0;function rn(){throw Error(J(321))}function x_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jr(t[n],e[n]))return!1;return!0}function k_(t,e,n,r,i,s){if(qo=s,yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,th.current=t===null||t.memoizedState===null?$C:UC,t=n(r,i),Pc){s=0;do{if(Pc=!1,su=0,25<=s)throw Error(J(301));s+=1,zt=Lt=null,e.updateQueue=null,th.current=BC,t=n(r,i)}while(Pc)}if(th.current=Lh,e=Lt!==null&&Lt.next!==null,qo=0,zt=Lt=yt=null,Dh=!1,e)throw Error(J(300));return t}function C_(){var t=su!==0;return su=0,t}function di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?yt.memoizedState=zt=t:zt=zt.next=t,zt}function Ar(){if(Lt===null){var t=yt.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var e=zt===null?yt.memoizedState:zt.next;if(e!==null)zt=e,Lt=t;else{if(t===null)throw Error(J(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},zt===null?yt.memoizedState=zt=t:zt=zt.next=t}return zt}function ou(t,e){return typeof e=="function"?e(t):e}function zp(t){var e=Ar(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Lt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((qo&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,yt.lanes|=d,Ho|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Jr(r,e.memoizedState)||(Mn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,yt.lanes|=s,Ho|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qp(t){var e=Ar(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Jr(s,e.memoizedState)||(Mn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function vb(){}function yb(t,e){var n=yt,r=Ar(),i=e(),s=!Jr(r.memoizedState,i);if(s&&(r.memoizedState=i,Mn=!0),r=r.queue,R_(Tb.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,au(9,Eb.bind(null,n,r,i,e),void 0,null),qt===null)throw Error(J(349));qo&30||wb(n,e,i)}return i}function wb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Eb(t,e,n,r){e.value=n,e.getSnapshot=r,bb(e)&&Ib(t)}function Tb(t,e,n){return n(function(){bb(e)&&Ib(t)})}function bb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jr(t,n)}catch{return!0}}function Ib(t){var e=Ji(t,1);e!==null&&Qr(e,t,1,-1)}function lw(t){var e=di();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:t},e.queue=t,t=t.dispatch=FC.bind(null,yt,t),[e.memoizedState,t]}function au(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sb(){return Ar().memoizedState}function nh(t,e,n,r){var i=di();yt.flags|=t,i.memoizedState=au(1|e,n,void 0,r===void 0?null:r)}function yf(t,e,n,r){var i=Ar();r=r===void 0?null:r;var s=void 0;if(Lt!==null){var o=Lt.memoizedState;if(s=o.destroy,r!==null&&x_(r,o.deps)){i.memoizedState=au(e,n,s,r);return}}yt.flags|=t,i.memoizedState=au(1|e,n,s,r)}function cw(t,e){return nh(8390656,8,t,e)}function R_(t,e){return yf(2048,8,t,e)}function Ab(t,e){return yf(4,2,t,e)}function xb(t,e){return yf(4,4,t,e)}function kb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Cb(t,e,n){return n=n!=null?n.concat([t]):null,yf(4,4,kb.bind(null,e,t),n)}function P_(){}function Rb(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Pb(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Nb(t,e,n){return qo&21?(Jr(n,e)||(n=MT(),yt.lanes|=n,Ho|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mn=!0),t.memoizedState=n)}function MC(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var r=Bp.transition;Bp.transition={};try{t(!1),e()}finally{He=n,Bp.transition=r}}function Ob(){return Ar().memoizedState}function VC(t,e,n){var r=qs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jb(t))Db(e,n);else if(n=mb(t,e,n,r),n!==null){var i=bn();Qr(n,t,r,i),Lb(n,e,r)}}function FC(t,e,n){var r=qs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jb(t))Db(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Jr(a,o)){var l=e.interleaved;l===null?(i.next=i,T_(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=mb(t,e,i,r),n!==null&&(i=bn(),Qr(n,t,r,i),Lb(n,e,r))}}function jb(t){var e=t.alternate;return t===yt||e!==null&&e===yt}function Db(t,e){Pc=Dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Lb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,l_(t,n)}}var Lh={readContext:Sr,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},$C={readContext:Sr,useCallback:function(t,e){return di().memoizedState=[t,e===void 0?null:e],t},useContext:Sr,useEffect:cw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nh(4194308,4,kb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nh(4194308,4,t,e)},useInsertionEffect:function(t,e){return nh(4,2,t,e)},useMemo:function(t,e){var n=di();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=di();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=VC.bind(null,yt,t),[r.memoizedState,t]},useRef:function(t){var e=di();return t={current:t},e.memoizedState=t},useState:lw,useDebugValue:P_,useDeferredValue:function(t){return di().memoizedState=t},useTransition:function(){var t=lw(!1),e=t[0];return t=MC.bind(null,t[1]),di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=yt,i=di();if(pt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),qt===null)throw Error(J(349));qo&30||wb(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,cw(Tb.bind(null,r,s,t),[t]),r.flags|=2048,au(9,Eb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=di(),e=qt.identifierPrefix;if(pt){var n=$i,r=Fi;n=(r&~(1<<32-Gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=su++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UC={readContext:Sr,useCallback:Rb,useContext:Sr,useEffect:R_,useImperativeHandle:Cb,useInsertionEffect:Ab,useLayoutEffect:xb,useMemo:Pb,useReducer:zp,useRef:Sb,useState:function(){return zp(ou)},useDebugValue:P_,useDeferredValue:function(t){var e=Ar();return Nb(e,Lt.memoizedState,t)},useTransition:function(){var t=zp(ou)[0],e=Ar().memoizedState;return[t,e]},useMutableSource:vb,useSyncExternalStore:yb,useId:Ob,unstable_isNewReconciler:!1},BC={readContext:Sr,useCallback:Rb,useContext:Sr,useEffect:R_,useImperativeHandle:Cb,useInsertionEffect:Ab,useLayoutEffect:xb,useMemo:Pb,useReducer:qp,useRef:Sb,useState:function(){return qp(ou)},useDebugValue:P_,useDeferredValue:function(t){var e=Ar();return Lt===null?e.memoizedState=t:Nb(e,Lt.memoizedState,t)},useTransition:function(){var t=qp(ou)[0],e=Ar().memoizedState;return[t,e]},useMutableSource:vb,useSyncExternalStore:yb,useId:Ob,unstable_isNewReconciler:!1};function Br(t,e){if(t&&t.defaultProps){e=wt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wf={isMounted:function(t){return(t=t._reactInternals)?sa(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bn(),i=qs(t),s=Hi(r,i);s.payload=e,n!=null&&(s.callback=n),e=Bs(t,s,i),e!==null&&(Qr(e,t,i,r),eh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bn(),i=qs(t),s=Hi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bs(t,s,i),e!==null&&(Qr(e,t,i,r),eh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bn(),r=qs(t),i=Hi(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bs(t,i,r),e!==null&&(Qr(e,t,r,n),eh(e,t,r))}};function uw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Zc(n,r)||!Zc(i,s):!0}function Mb(t,e,n){var r=!1,i=Js,s=e.contextType;return typeof s=="object"&&s!==null?s=Sr(s):(i=Fn(e)?Bo:dn.current,r=e.contextTypes,s=(r=r!=null)?il(t,i):Js),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function dw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wf.enqueueReplaceState(e,e.state,null)}function Ym(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},b_(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Sr(s):(s=Fn(e)?Bo:dn.current,i.context=il(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jm(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&wf.enqueueReplaceState(i,i.state,null),Oh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ll(t,e){try{var n="",r=e;do n+=g1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Hp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zC=typeof WeakMap=="function"?WeakMap:Map;function Vb(t,e,n){n=Hi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vh||(Vh=!0,lg=r),Xm(t,e)},n}function Fb(t,e,n){n=Hi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Xm(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Xm(t,e),typeof r!="function"&&(zs===null?zs=new Set([this]):zs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=rR.bind(null,t,e,n),e.then(t,t))}function fw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hi(-1,1),e.tag=2,Bs(n,e,1))),n.lanes|=1),t)}var qC=ss.ReactCurrentOwner,Mn=!1;function Tn(t,e,n,r){e.child=t===null?pb(e,null,n,r):ol(e,t.child,n,r)}function mw(t,e,n,r,i){n=n.render;var s=e.ref;return Ja(e,i),r=k_(t,e,n,r,s,i),n=C_(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(pt&&n&&g_(e),e.flags|=1,Tn(t,e,r,i),e.child)}function gw(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!F_(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$b(t,e,s,r,i)):(t=oh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Zc,n(o,r)&&t.ref===e.ref)return Yi(t,e,i)}return e.flags|=1,t=Hs(s,r),t.ref=e.ref,t.return=e,e.child=t}function $b(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Zc(s,r)&&t.ref===e.ref)if(Mn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Mn=!0);else return e.lanes=t.lanes,Yi(t,e,i)}return Zm(t,e,n,r,i)}function Ub(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},st(za,Qn),Qn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,st(za,Qn),Qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,st(za,Qn),Qn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,st(za,Qn),Qn|=r;return Tn(t,e,i,n),e.child}function Bb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zm(t,e,n,r,i){var s=Fn(n)?Bo:dn.current;return s=il(e,s),Ja(e,i),n=k_(t,e,n,r,s,i),r=C_(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yi(t,e,i)):(pt&&r&&g_(e),e.flags|=1,Tn(t,e,n,i),e.child)}function _w(t,e,n,r,i){if(Fn(n)){var s=!0;kh(e)}else s=!1;if(Ja(e,i),e.stateNode===null)rh(t,e),Mb(e,n,r),Ym(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Sr(u):(u=Fn(n)?Bo:dn.current,u=il(e,u));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&dw(e,o,r,u),Ss=!1;var g=e.memoizedState;o.state=g,Oh(e,r,o,i),l=e.memoizedState,a!==r||g!==l||Vn.current||Ss?(typeof d=="function"&&(Jm(e,n,d,r),l=e.memoizedState),(a=Ss||uw(e,n,a,r,g,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gb(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Br(e.type,a),o.props=u,p=e.pendingProps,g=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sr(l):(l=Fn(n)?Bo:dn.current,l=il(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||g!==l)&&dw(e,o,r,l),Ss=!1,g=e.memoizedState,o.state=g,Oh(e,r,o,i);var I=e.memoizedState;a!==p||g!==I||Vn.current||Ss?(typeof y=="function"&&(Jm(e,n,y,r),I=e.memoizedState),(u=Ss||uw(e,n,u,r,g,I,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return eg(t,e,n,r,s,i)}function eg(t,e,n,r,i,s){Bb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&nw(e,n,!1),Yi(t,e,s);r=e.stateNode,qC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ol(e,t.child,null,s),e.child=ol(e,null,a,s)):Tn(t,e,a,s),e.memoizedState=r.state,i&&nw(e,n,!0),e.child}function zb(t){var e=t.stateNode;e.pendingContext?tw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tw(t,e.context,!1),I_(t,e.containerInfo)}function vw(t,e,n,r,i){return sl(),v_(i),e.flags|=256,Tn(t,e,n,r),e.child}var tg={dehydrated:null,treeContext:null,retryLane:0};function ng(t){return{baseLanes:t,cachePool:null,transitions:null}}function qb(t,e,n){var r=e.pendingProps,i=vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),st(vt,i&1),t===null)return Gm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=bf(o,r,0,null),t=Fo(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ng(n),e.memoizedState=tg,t):N_(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return HC(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hs(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Hs(a,s):(s=Fo(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ng(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=tg,r}return s=t.child,t=s.sibling,r=Hs(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function N_(t,e){return e=bf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nd(t,e,n,r){return r!==null&&v_(r),ol(e,t.child,null,n),t=N_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Hp(Error(J(422))),Nd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=bf({mode:"visible",children:r.children},i,0,null),s=Fo(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ol(e,t.child,null,o),e.child.memoizedState=ng(o),e.memoizedState=tg,s);if(!(e.mode&1))return Nd(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(J(419)),r=Hp(s,r,void 0),Nd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Mn||a){if(r=qt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ji(t,i),Qr(r,t,i,-1))}return V_(),r=Hp(Error(J(421))),Nd(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=iR.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Xn=Us(i.nextSibling),Zn=e,pt=!0,Wr=null,t!==null&&(vr[yr++]=Fi,vr[yr++]=$i,vr[yr++]=zo,Fi=t.id,$i=t.overflow,zo=e),e=N_(e,r.children),e.flags|=4096,e)}function yw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qm(t.return,e,n)}function Wp(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Hb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Tn(t,e,r.children,n),r=vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yw(t,n,e);else if(t.tag===19)yw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(st(vt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Wp(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Wp(e,!0,n,null,s);break;case"together":Wp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ho|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Hs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WC(t,e,n){switch(e.tag){case 3:zb(e),sl();break;case 5:_b(e);break;case 1:Fn(e.type)&&kh(e);break;case 4:I_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;st(Ph,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(st(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?qb(t,e,n):(st(vt,vt.current&1),t=Yi(t,e,n),t!==null?t.sibling:null);st(vt,vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),st(vt,vt.current),r)break;return null;case 22:case 23:return e.lanes=0,Ub(t,e,n)}return Yi(t,e,n)}var Wb,rg,Kb,Gb;Wb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rg=function(){};Kb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Oo(mi.current);var s=null;switch(n){case"input":i=Sm(t,i),r=Sm(t,r),s=[];break;case"select":i=wt({},i,{value:void 0}),r=wt({},r,{value:void 0}),s=[];break;case"textarea":i=km(t,i),r=km(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ah)}Rm(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wc.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ut("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Gb=function(t,e,n,r){n!==r&&(e.flags|=4)};function ac(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KC(t,e,n){var r=e.pendingProps;switch(__(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return Fn(e.type)&&xh(),sn(e),null;case 3:return r=e.stateNode,al(),dt(Vn),dt(dn),A_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(dg(Wr),Wr=null))),rg(t,e),sn(e),null;case 5:S_(e);var i=Oo(iu.current);if(n=e.type,t!==null&&e.stateNode!=null)Kb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return sn(e),null}if(t=Oo(mi.current),Rd(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[hi]=e,r[nu]=s,t=(e.mode&1)!==0,n){case"dialog":ut("cancel",r),ut("close",r);break;case"iframe":case"object":case"embed":ut("load",r);break;case"video":case"audio":for(i=0;i<_c.length;i++)ut(_c[i],r);break;case"source":ut("error",r);break;case"img":case"image":case"link":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"input":ky(r,s),ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ut("invalid",r);break;case"textarea":Ry(r,s),ut("invalid",r)}Rm(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),i=["children",""+a]):Wc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ut("scroll",r)}switch(n){case"input":Ed(r),Cy(r,s,!0);break;case"textarea":Ed(r),Py(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ah)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hi]=e,t[nu]=r,Wb(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pm(n,r),n){case"dialog":ut("cancel",t),ut("close",t),i=r;break;case"iframe":case"object":case"embed":ut("load",t),i=r;break;case"video":case"audio":for(i=0;i<_c.length;i++)ut(_c[i],t);i=r;break;case"source":ut("error",t),i=r;break;case"img":case"image":case"link":ut("error",t),ut("load",t),i=r;break;case"details":ut("toggle",t),i=r;break;case"input":ky(t,r),i=Sm(t,r),ut("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=wt({},r,{value:void 0}),ut("invalid",t);break;case"textarea":Ry(t,r),i=km(t,r),ut("invalid",t);break;default:i=r}Rm(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?ST(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bT(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Kc(t,l):typeof l=="number"&&Kc(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Wc.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ut("scroll",t):l!=null&&n_(t,s,l,o))}switch(n){case"input":Ed(t),Cy(t,r,!1);break;case"textarea":Ed(t),Py(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qs(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Wa(t,!!r.multiple,s,!1):r.defaultValue!=null&&Wa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ah)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)Gb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=Oo(iu.current),Oo(mi.current),Rd(e)){if(r=e.stateNode,n=e.memoizedProps,r[hi]=e,(s=r.nodeValue!==n)&&(t=Zn,t!==null))switch(t.tag){case 3:Cd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cd(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hi]=e,e.stateNode=r}return sn(e),null;case 13:if(dt(vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&Xn!==null&&e.mode&1&&!(e.flags&128))hb(),sl(),e.flags|=98560,s=!1;else if(s=Rd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[hi]=e}else sl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),s=!1}else Wr!==null&&(dg(Wr),Wr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Mt===0&&(Mt=3):V_())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return al(),rg(t,e),t===null&&eu(e.stateNode.containerInfo),sn(e),null;case 10:return E_(e.type._context),sn(e),null;case 17:return Fn(e.type)&&xh(),sn(e),null;case 19:if(dt(vt),s=e.memoizedState,s===null)return sn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ac(s,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jh(t),o!==null){for(e.flags|=128,ac(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return st(vt,vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&At()>cl&&(e.flags|=128,r=!0,ac(s,!1),e.lanes=4194304)}else{if(!r)if(t=jh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ac(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!pt)return sn(e),null}else 2*At()-s.renderingStartTime>cl&&n!==1073741824&&(e.flags|=128,r=!0,ac(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=At(),e.sibling=null,n=vt.current,st(vt,r?n&1|2:n&1),e):(sn(e),null);case 22:case 23:return M_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qn&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function GC(t,e){switch(__(e),e.tag){case 1:return Fn(e.type)&&xh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return al(),dt(Vn),dt(dn),A_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return S_(e),null;case 13:if(dt(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));sl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dt(vt),null;case 4:return al(),null;case 10:return E_(e.type._context),null;case 22:case 23:return M_(),null;case 24:return null;default:return null}}var Od=!1,cn=!1,QC=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tt(t,e,r)}else n.current=null}function ig(t,e,n){try{n()}catch(r){Tt(t,e,r)}}var ww=!1;function JC(t,e){if(Um=bh,t=ZT(),m_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,p=t,g=null;t:for(;;){for(var y;p!==n||i!==0&&p.nodeType!==3||(a=o+i),p!==s||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)g=p,p=y;for(;;){if(p===t)break t;if(g===n&&++u===i&&(a=o),g===s&&++d===r&&(l=o),(y=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bm={focusedElem:t,selectionRange:n},bh=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var A=I.memoizedProps,N=I.memoizedState,x=e.stateNode,E=x.getSnapshotBeforeUpdate(e.elementType===e.type?A:Br(e.type,A),N);x.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(j){Tt(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return I=ww,ww=!1,I}function Nc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&ig(e,n,s)}i=i.next}while(i!==r)}}function Ef(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Qb(t){var e=t.alternate;e!==null&&(t.alternate=null,Qb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hi],delete e[nu],delete e[Hm],delete e[NC],delete e[OC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Jb(t){return t.tag===5||t.tag===3||t.tag===4}function Ew(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Jb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function og(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ah));else if(r!==4&&(t=t.child,t!==null))for(og(t,e,n),t=t.sibling;t!==null;)og(t,e,n),t=t.sibling}function ag(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ag(t,e,n),t=t.sibling;t!==null;)ag(t,e,n),t=t.sibling}var Gt=null,zr=!1;function ws(t,e,n){for(n=n.child;n!==null;)Yb(t,e,n),n=n.sibling}function Yb(t,e,n){if(pi&&typeof pi.onCommitFiberUnmount=="function")try{pi.onCommitFiberUnmount(ff,n)}catch{}switch(n.tag){case 5:cn||Ba(n,e);case 6:var r=Gt,i=zr;Gt=null,ws(t,e,n),Gt=r,zr=i,Gt!==null&&(zr?(t=Gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(zr?(t=Gt,n=n.stateNode,t.nodeType===8?Fp(t.parentNode,n):t.nodeType===1&&Fp(t,n),Yc(t)):Fp(Gt,n.stateNode));break;case 4:r=Gt,i=zr,Gt=n.stateNode.containerInfo,zr=!0,ws(t,e,n),Gt=r,zr=i;break;case 0:case 11:case 14:case 15:if(!cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&ig(n,e,o),i=i.next}while(i!==r)}ws(t,e,n);break;case 1:if(!cn&&(Ba(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Tt(n,e,a)}ws(t,e,n);break;case 21:ws(t,e,n);break;case 22:n.mode&1?(cn=(r=cn)||n.memoizedState!==null,ws(t,e,n),cn=r):ws(t,e,n);break;default:ws(t,e,n)}}function Tw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QC),e.forEach(function(r){var i=sR.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $r(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Gt=a.stateNode,zr=!1;break e;case 3:Gt=a.stateNode.containerInfo,zr=!0;break e;case 4:Gt=a.stateNode.containerInfo,zr=!0;break e}a=a.return}if(Gt===null)throw Error(J(160));Yb(s,o,i),Gt=null,zr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Tt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Xb(e,t),e=e.sibling}function Xb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($r(e,t),ui(t),r&4){try{Nc(3,t,t.return),Ef(3,t)}catch(A){Tt(t,t.return,A)}try{Nc(5,t,t.return)}catch(A){Tt(t,t.return,A)}}break;case 1:$r(e,t),ui(t),r&512&&n!==null&&Ba(n,n.return);break;case 5:if($r(e,t),ui(t),r&512&&n!==null&&Ba(n,n.return),t.flags&32){var i=t.stateNode;try{Kc(i,"")}catch(A){Tt(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wT(i,s),Pm(a,o);var u=Pm(a,s);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?ST(i,p):d==="dangerouslySetInnerHTML"?bT(i,p):d==="children"?Kc(i,p):n_(i,d,p,u)}switch(a){case"input":Am(i,s);break;case"textarea":ET(i,s);break;case"select":var g=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?Wa(i,!!s.multiple,y,!1):g!==!!s.multiple&&(s.defaultValue!=null?Wa(i,!!s.multiple,s.defaultValue,!0):Wa(i,!!s.multiple,s.multiple?[]:"",!1))}i[nu]=s}catch(A){Tt(t,t.return,A)}}break;case 6:if($r(e,t),ui(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(A){Tt(t,t.return,A)}}break;case 3:if($r(e,t),ui(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yc(e.containerInfo)}catch(A){Tt(t,t.return,A)}break;case 4:$r(e,t),ui(t);break;case 13:$r(e,t),ui(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(D_=At())),r&4&&Tw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(cn=(u=cn)||d,$r(e,t),cn=u):$r(e,t),ui(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(re=t,d=t.child;d!==null;){for(p=re=d;re!==null;){switch(g=re,y=g.child,g.tag){case 0:case 11:case 14:case 15:Nc(4,g,g.return);break;case 1:Ba(g,g.return);var I=g.stateNode;if(typeof I.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(A){Tt(r,n,A)}}break;case 5:Ba(g,g.return);break;case 22:if(g.memoizedState!==null){Iw(p);continue}}y!==null?(y.return=g,re=y):Iw(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{i=p.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=IT("display",o))}catch(A){Tt(t,t.return,A)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(A){Tt(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:$r(e,t),ui(t),r&4&&Tw(t);break;case 21:break;default:$r(e,t),ui(t)}}function ui(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Jb(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Kc(i,""),r.flags&=-33);var s=Ew(t);ag(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ew(t);og(t,a,o);break;default:throw Error(J(161))}}catch(l){Tt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YC(t,e,n){re=t,Zb(t)}function Zb(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var i=re,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Od;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||cn;a=Od;var u=cn;if(Od=o,(cn=l)&&!u)for(re=i;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?Sw(i):l!==null?(l.return=o,re=l):Sw(i);for(;s!==null;)re=s,Zb(s),s=s.sibling;re=i,Od=a,cn=u}bw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,re=s):bw(t)}}function bw(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||Ef(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Br(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&aw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}aw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Yc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}cn||e.flags&512&&sg(e)}catch(g){Tt(e,e.return,g)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Iw(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function Sw(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ef(4,e)}catch(l){Tt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Tt(e,i,l)}}var s=e.return;try{sg(e)}catch(l){Tt(e,s,l)}break;case 5:var o=e.return;try{sg(e)}catch(l){Tt(e,o,l)}}}catch(l){Tt(e,e.return,l)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var XC=Math.ceil,Mh=ss.ReactCurrentDispatcher,O_=ss.ReactCurrentOwner,Tr=ss.ReactCurrentBatchConfig,Ve=0,qt=null,Rt=null,Yt=0,Qn=0,za=no(0),Mt=0,lu=null,Ho=0,Tf=0,j_=0,Oc=null,Dn=null,D_=0,cl=1/0,Li=null,Vh=!1,lg=null,zs=null,jd=!1,Ls=null,Fh=0,jc=0,cg=null,ih=-1,sh=0;function bn(){return Ve&6?At():ih!==-1?ih:ih=At()}function qs(t){return t.mode&1?Ve&2&&Yt!==0?Yt&-Yt:DC.transition!==null?(sh===0&&(sh=MT()),sh):(t=He,t!==0||(t=window.event,t=t===void 0?16:qT(t.type)),t):1}function Qr(t,e,n,r){if(50<jc)throw jc=0,cg=null,Error(J(185));Su(t,n,r),(!(Ve&2)||t!==qt)&&(t===qt&&(!(Ve&2)&&(Tf|=n),Mt===4&&ks(t,Yt)),$n(t,r),n===1&&Ve===0&&!(e.mode&1)&&(cl=At()+500,vf&&ro()))}function $n(t,e){var n=t.callbackNode;D1(t,e);var r=Th(t,t===qt?Yt:0);if(r===0)n!==null&&jy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jy(n),e===1)t.tag===0?jC(Aw.bind(null,t)):cb(Aw.bind(null,t)),RC(function(){!(Ve&6)&&ro()}),n=null;else{switch(VT(r)){case 1:n=a_;break;case 4:n=DT;break;case 16:n=Eh;break;case 536870912:n=LT;break;default:n=Eh}n=aI(n,eI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eI(t,e){if(ih=-1,sh=0,Ve&6)throw Error(J(327));var n=t.callbackNode;if(Ya()&&t.callbackNode!==n)return null;var r=Th(t,t===qt?Yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$h(t,r);else{e=r;var i=Ve;Ve|=2;var s=nI();(qt!==t||Yt!==e)&&(Li=null,cl=At()+500,Vo(t,e));do try{tR();break}catch(a){tI(t,a)}while(!0);w_(),Mh.current=s,Ve=i,Rt!==null?e=0:(qt=null,Yt=0,e=Mt)}if(e!==0){if(e===2&&(i=Lm(t),i!==0&&(r=i,e=ug(t,i))),e===1)throw n=lu,Vo(t,0),ks(t,r),$n(t,At()),n;if(e===6)ks(t,r);else{if(i=t.current.alternate,!(r&30)&&!ZC(i)&&(e=$h(t,r),e===2&&(s=Lm(t),s!==0&&(r=s,e=ug(t,s))),e===1))throw n=lu,Vo(t,0),ks(t,r),$n(t,At()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Ao(t,Dn,Li);break;case 3:if(ks(t,r),(r&130023424)===r&&(e=D_+500-At(),10<e)){if(Th(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){bn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qm(Ao.bind(null,t,Dn,Li),e);break}Ao(t,Dn,Li);break;case 4:if(ks(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Gr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XC(r/1960))-r,10<r){t.timeoutHandle=qm(Ao.bind(null,t,Dn,Li),r);break}Ao(t,Dn,Li);break;case 5:Ao(t,Dn,Li);break;default:throw Error(J(329))}}}return $n(t,At()),t.callbackNode===n?eI.bind(null,t):null}function ug(t,e){var n=Oc;return t.current.memoizedState.isDehydrated&&(Vo(t,e).flags|=256),t=$h(t,e),t!==2&&(e=Dn,Dn=n,e!==null&&dg(e)),t}function dg(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function ZC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Jr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ks(t,e){for(e&=~j_,e&=~Tf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gr(e),r=1<<n;t[n]=-1,e&=~r}}function Aw(t){if(Ve&6)throw Error(J(327));Ya();var e=Th(t,0);if(!(e&1))return $n(t,At()),null;var n=$h(t,e);if(t.tag!==0&&n===2){var r=Lm(t);r!==0&&(e=r,n=ug(t,r))}if(n===1)throw n=lu,Vo(t,0),ks(t,e),$n(t,At()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ao(t,Dn,Li),$n(t,At()),null}function L_(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(cl=At()+500,vf&&ro())}}function Wo(t){Ls!==null&&Ls.tag===0&&!(Ve&6)&&Ya();var e=Ve;Ve|=1;var n=Tr.transition,r=He;try{if(Tr.transition=null,He=1,t)return t()}finally{He=r,Tr.transition=n,Ve=e,!(Ve&6)&&ro()}}function M_(){Qn=za.current,dt(za)}function Vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CC(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(__(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xh();break;case 3:al(),dt(Vn),dt(dn),A_();break;case 5:S_(r);break;case 4:al();break;case 13:dt(vt);break;case 19:dt(vt);break;case 10:E_(r.type._context);break;case 22:case 23:M_()}n=n.return}if(qt=t,Rt=t=Hs(t.current,null),Yt=Qn=e,Mt=0,lu=null,j_=Tf=Ho=0,Dn=Oc=null,No!==null){for(e=0;e<No.length;e++)if(n=No[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}No=null}return t}function tI(t,e){do{var n=Rt;try{if(w_(),th.current=Lh,Dh){for(var r=yt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dh=!1}if(qo=0,zt=Lt=yt=null,Pc=!1,su=0,O_.current=null,n===null||n.return===null){Mt=1,lu=e,Rt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var g=d.alternate;g?(d.updateQueue=g.updateQueue,d.memoizedState=g.memoizedState,d.lanes=g.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=fw(o);if(y!==null){y.flags&=-257,pw(y,o,a,s,e),y.mode&1&&hw(s,u,e),e=y,l=u;var I=e.updateQueue;if(I===null){var A=new Set;A.add(l),e.updateQueue=A}else I.add(l);break e}else{if(!(e&1)){hw(s,u,e),V_();break e}l=Error(J(426))}}else if(pt&&a.mode&1){var N=fw(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),pw(N,o,a,s,e),v_(ll(l,a));break e}}s=l=ll(l,a),Mt!==4&&(Mt=2),Oc===null?Oc=[s]:Oc.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=Vb(s,l,e);ow(s,x);break e;case 1:a=l;var E=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zs===null||!zs.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var j=Fb(s,a,e);ow(s,j);break e}}s=s.return}while(s!==null)}iI(n)}catch(B){e=B,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function nI(){var t=Mh.current;return Mh.current=Lh,t===null?Lh:t}function V_(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),qt===null||!(Ho&268435455)&&!(Tf&268435455)||ks(qt,Yt)}function $h(t,e){var n=Ve;Ve|=2;var r=nI();(qt!==t||Yt!==e)&&(Li=null,Vo(t,e));do try{eR();break}catch(i){tI(t,i)}while(!0);if(w_(),Ve=n,Mh.current=r,Rt!==null)throw Error(J(261));return qt=null,Yt=0,Mt}function eR(){for(;Rt!==null;)rI(Rt)}function tR(){for(;Rt!==null&&!A1();)rI(Rt)}function rI(t){var e=oI(t.alternate,t,Qn);t.memoizedProps=t.pendingProps,e===null?iI(t):Rt=e,O_.current=null}function iI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GC(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,Rt=null;return}}else if(n=KC(n,e,Qn),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Mt===0&&(Mt=5)}function Ao(t,e,n){var r=He,i=Tr.transition;try{Tr.transition=null,He=1,nR(t,e,n,r)}finally{Tr.transition=i,He=r}return null}function nR(t,e,n,r){do Ya();while(Ls!==null);if(Ve&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(L1(t,s),t===qt&&(Rt=qt=null,Yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||jd||(jd=!0,aI(Eh,function(){return Ya(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tr.transition,Tr.transition=null;var o=He;He=1;var a=Ve;Ve|=4,O_.current=null,JC(t,n),Xb(n,t),TC(Bm),bh=!!Um,Bm=Um=null,t.current=n,YC(n),x1(),Ve=a,He=o,Tr.transition=s}else t.current=n;if(jd&&(jd=!1,Ls=t,Fh=i),s=t.pendingLanes,s===0&&(zs=null),R1(n.stateNode),$n(t,At()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Vh)throw Vh=!1,t=lg,lg=null,t;return Fh&1&&t.tag!==0&&Ya(),s=t.pendingLanes,s&1?t===cg?jc++:(jc=0,cg=t):jc=0,ro(),null}function Ya(){if(Ls!==null){var t=VT(Fh),e=Tr.transition,n=He;try{if(Tr.transition=null,He=16>t?16:t,Ls===null)var r=!1;else{if(t=Ls,Ls=null,Fh=0,Ve&6)throw Error(J(331));var i=Ve;for(Ve|=4,re=t.current;re!==null;){var s=re,o=s.child;if(re.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(re=u;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:Nc(8,d,s)}var p=d.child;if(p!==null)p.return=d,re=p;else for(;re!==null;){d=re;var g=d.sibling,y=d.return;if(Qb(d),d===u){re=null;break}if(g!==null){g.return=y,re=g;break}re=y}}}var I=s.alternate;if(I!==null){var A=I.child;if(A!==null){I.child=null;do{var N=A.sibling;A.sibling=null,A=N}while(A!==null)}}re=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,re=o;else e:for(;re!==null;){if(s=re,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Nc(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,re=x;break e}re=s.return}}var E=t.current;for(re=E;re!==null;){o=re;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,re=b;else e:for(o=E;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ef(9,a)}}catch(B){Tt(a,a.return,B)}if(a===o){re=null;break e}var j=a.sibling;if(j!==null){j.return=a.return,re=j;break e}re=a.return}}if(Ve=i,ro(),pi&&typeof pi.onPostCommitFiberRoot=="function")try{pi.onPostCommitFiberRoot(ff,t)}catch{}r=!0}return r}finally{He=n,Tr.transition=e}}return!1}function xw(t,e,n){e=ll(n,e),e=Vb(t,e,1),t=Bs(t,e,1),e=bn(),t!==null&&(Su(t,1,e),$n(t,e))}function Tt(t,e,n){if(t.tag===3)xw(t,t,n);else for(;e!==null;){if(e.tag===3){xw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zs===null||!zs.has(r))){t=ll(n,t),t=Fb(e,t,1),e=Bs(e,t,1),t=bn(),e!==null&&(Su(e,1,t),$n(e,t));break}}e=e.return}}function rR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bn(),t.pingedLanes|=t.suspendedLanes&n,qt===t&&(Yt&n)===n&&(Mt===4||Mt===3&&(Yt&130023424)===Yt&&500>At()-D_?Vo(t,0):j_|=n),$n(t,e)}function sI(t,e){e===0&&(t.mode&1?(e=Id,Id<<=1,!(Id&130023424)&&(Id=4194304)):e=1);var n=bn();t=Ji(t,e),t!==null&&(Su(t,e,n),$n(t,n))}function iR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sI(t,n)}function sR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),sI(t,n)}var oI;oI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vn.current)Mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mn=!1,WC(t,e,n);Mn=!!(t.flags&131072)}else Mn=!1,pt&&e.flags&1048576&&ub(e,Rh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rh(t,e),t=e.pendingProps;var i=il(e,dn.current);Ja(e,n),i=k_(null,e,r,t,i,n);var s=C_();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(r)?(s=!0,kh(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,b_(e),i.updater=wf,e.stateNode=i,i._reactInternals=e,Ym(e,r,t,n),e=eg(null,e,r,!0,s,n)):(e.tag=0,pt&&s&&g_(e),Tn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rh(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=aR(r),t=Br(r,t),i){case 0:e=Zm(null,e,r,t,n);break e;case 1:e=_w(null,e,r,t,n);break e;case 11:e=mw(null,e,r,t,n);break e;case 14:e=gw(null,e,r,Br(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),Zm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),_w(t,e,r,i,n);case 3:e:{if(zb(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,gb(t,e),Oh(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ll(Error(J(423)),e),e=vw(t,e,r,n,i);break e}else if(r!==i){i=ll(Error(J(424)),e),e=vw(t,e,r,n,i);break e}else for(Xn=Us(e.stateNode.containerInfo.firstChild),Zn=e,pt=!0,Wr=null,n=pb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sl(),r===i){e=Yi(t,e,n);break e}Tn(t,e,r,n)}e=e.child}return e;case 5:return _b(e),t===null&&Gm(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,zm(r,i)?o=null:s!==null&&zm(r,s)&&(e.flags|=32),Bb(t,e),Tn(t,e,o,n),e.child;case 6:return t===null&&Gm(e),null;case 13:return qb(t,e,n);case 4:return I_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ol(e,null,r,n):Tn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),mw(t,e,r,i,n);case 7:return Tn(t,e,e.pendingProps,n),e.child;case 8:return Tn(t,e,e.pendingProps.children,n),e.child;case 12:return Tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,st(Ph,r._currentValue),r._currentValue=o,s!==null)if(Jr(s.value,o)){if(s.children===i.children&&!Vn.current){e=Yi(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Hi(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Qm(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qm(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Tn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ja(e,n),i=Sr(i),r=r(i),e.flags|=1,Tn(t,e,r,n),e.child;case 14:return r=e.type,i=Br(r,e.pendingProps),i=Br(r.type,i),gw(t,e,r,i,n);case 15:return $b(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Br(r,i),rh(t,e),e.tag=1,Fn(r)?(t=!0,kh(e)):t=!1,Ja(e,n),Mb(e,r,i),Ym(e,r,i,n),eg(null,e,r,!0,t,n);case 19:return Hb(t,e,n);case 22:return Ub(t,e,n)}throw Error(J(156,e.tag))};function aI(t,e){return jT(t,e)}function oR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(t,e,n,r){return new oR(t,e,n,r)}function F_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aR(t){if(typeof t=="function")return F_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===i_)return 11;if(t===s_)return 14}return 2}function Hs(t,e){var n=t.alternate;return n===null?(n=Er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oh(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")F_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Oa:return Fo(n.children,i,s,e);case r_:o=8,i|=8;break;case Em:return t=Er(12,n,e,i|2),t.elementType=Em,t.lanes=s,t;case Tm:return t=Er(13,n,e,i),t.elementType=Tm,t.lanes=s,t;case bm:return t=Er(19,n,e,i),t.elementType=bm,t.lanes=s,t;case _T:return bf(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mT:o=10;break e;case gT:o=9;break e;case i_:o=11;break e;case s_:o=14;break e;case Is:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Er(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Fo(t,e,n,r){return t=Er(7,t,r,e),t.lanes=n,t}function bf(t,e,n,r){return t=Er(22,t,r,e),t.elementType=_T,t.lanes=n,t.stateNode={isHidden:!1},t}function Kp(t,e,n){return t=Er(6,t,null,e),t.lanes=n,t}function Gp(t,e,n){return e=Er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kp(0),this.expirationTimes=kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $_(t,e,n,r,i,s,o,a,l){return t=new lR(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Er(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},b_(s),t}function cR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Na,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lI(t){if(!t)return Js;t=t._reactInternals;e:{if(sa(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Fn(n))return lb(t,n,e)}return e}function cI(t,e,n,r,i,s,o,a,l){return t=$_(n,r,!0,t,i,s,o,a,l),t.context=lI(null),n=t.current,r=bn(),i=qs(n),s=Hi(r,i),s.callback=e??null,Bs(n,s,i),t.current.lanes=i,Su(t,i,r),$n(t,r),t}function If(t,e,n,r){var i=e.current,s=bn(),o=qs(i);return n=lI(n),e.context===null?e.context=n:e.pendingContext=n,e=Hi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bs(i,e,o),t!==null&&(Qr(t,i,o,s),eh(t,i,o)),o}function Uh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function U_(t,e){kw(t,e),(t=t.alternate)&&kw(t,e)}function uR(){return null}var uI=typeof reportError=="function"?reportError:function(t){console.error(t)};function B_(t){this._internalRoot=t}Sf.prototype.render=B_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));If(t,e,null,null)};Sf.prototype.unmount=B_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wo(function(){If(null,t,null,null)}),e[Qi]=null}};function Sf(t){this._internalRoot=t}Sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=UT();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xs.length&&e!==0&&e<xs[n].priority;n++);xs.splice(n,0,t),n===0&&zT(t)}};function z_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cw(){}function dR(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=Uh(o);s.call(u)}}var o=cI(e,r,t,0,null,!1,!1,"",Cw);return t._reactRootContainer=o,t[Qi]=o.current,eu(t.nodeType===8?t.parentNode:t),Wo(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Uh(l);a.call(u)}}var l=$_(t,0,!1,null,null,!1,!1,"",Cw);return t._reactRootContainer=l,t[Qi]=l.current,eu(t.nodeType===8?t.parentNode:t),Wo(function(){If(e,l,n,r)}),l}function xf(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Uh(o);a.call(l)}}If(e,o,t,i)}else o=dR(n,e,t,i,r);return Uh(o)}FT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=gc(e.pendingLanes);n!==0&&(l_(e,n|1),$n(e,At()),!(Ve&6)&&(cl=At()+500,ro()))}break;case 13:Wo(function(){var r=Ji(t,1);if(r!==null){var i=bn();Qr(r,t,1,i)}}),U_(t,1)}};c_=function(t){if(t.tag===13){var e=Ji(t,134217728);if(e!==null){var n=bn();Qr(e,t,134217728,n)}U_(t,134217728)}};$T=function(t){if(t.tag===13){var e=qs(t),n=Ji(t,e);if(n!==null){var r=bn();Qr(n,t,e,r)}U_(t,e)}};UT=function(){return He};BT=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};Om=function(t,e,n){switch(e){case"input":if(Am(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_f(r);if(!i)throw Error(J(90));yT(r),Am(r,i)}}}break;case"textarea":ET(t,n);break;case"select":e=n.value,e!=null&&Wa(t,!!n.multiple,e,!1)}};kT=L_;CT=Wo;var hR={usingClientEntryPoint:!1,Events:[xu,Ma,_f,AT,xT,L_]},lc={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fR={bundleType:lc.bundleType,version:lc.version,rendererPackageName:lc.rendererPackageName,rendererConfig:lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=NT(t),t===null?null:t.stateNode},findFiberByHostInstance:lc.findFiberByHostInstance||uR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{ff=Dd.inject(fR),pi=Dd}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR;or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!z_(e))throw Error(J(200));return cR(t,e,null,n)};or.createRoot=function(t,e){if(!z_(t))throw Error(J(299));var n=!1,r="",i=uI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$_(t,1,!1,null,null,n,!1,r,i),t[Qi]=e.current,eu(t.nodeType===8?t.parentNode:t),new B_(e)};or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=NT(e),t=t===null?null:t.stateNode,t};or.flushSync=function(t){return Wo(t)};or.hydrate=function(t,e,n){if(!Af(e))throw Error(J(200));return xf(null,t,e,!0,n)};or.hydrateRoot=function(t,e,n){if(!z_(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=uI;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cI(e,null,t,1,n??null,i,!1,s,o),t[Qi]=e.current,eu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Sf(e)};or.render=function(t,e,n){if(!Af(e))throw Error(J(200));return xf(null,t,e,!1,n)};or.unmountComponentAtNode=function(t){if(!Af(t))throw Error(J(40));return t._reactRootContainer?(Wo(function(){xf(null,null,t,!1,function(){t._reactRootContainer=null,t[Qi]=null})}),!0):!1};or.unstable_batchedUpdates=L_;or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Af(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return xf(t,e,n,!1,r)};or.version="18.3.1-next-f1338f8080-20240426";function dI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dI)}catch(t){console.error(t)}}dI(),dT.exports=or;var q_=dT.exports;const pR=XE(q_),mR=YE({__proto__:null,default:pR},[q_]);var Rw=q_;ym.createRoot=Rw.createRoot,ym.hydrateRoot=Rw.hydrateRoot;var Pw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=s>>2,p=(s&3)<<4|a>>4;let g=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(g=64)),r.push(n[d],n[p],n[g],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new _R;const g=s<<2|a>>4;if(r.push(g),u!==64){const y=a<<4&240|u>>2;if(r.push(y),p!==64){const I=u<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vR=function(t){const e=hI(t);return fI.encodeByteArray(e,!0)},Bh=function(t){return vR(t).replace(/\./g,"")},pI=function(t){try{return fI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=()=>yR().__FIREBASE_DEFAULTS__,ER=()=>{if(typeof process>"u"||typeof Pw>"u")return;const t=Pw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},TR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pI(t[1]);return e&&JSON.parse(e)},kf=()=>{try{return wR()||ER()||TR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mI=t=>{var e,n;return(n=(e=kf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bR=t=>{const e=mI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gI=()=>{var t;return(t=kf())===null||t===void 0?void 0:t.config},_I=t=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IR=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bh(JSON.stringify(n)),Bh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function xR(){var t;const e=(t=kf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CR(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RR(){return!xR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yI(){try{return typeof indexedDB=="object"}catch{return!1}}function wI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function PR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NR="FirebaseError";class ti extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NR,Object.setPrototypeOf(this,ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oa.prototype.create)}}class oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?OR(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new ti(i,a,r)}}function OR(t,e){return t.replace(jR,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const jR=/\{\$([^}]+)}/g;function DR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Nw(s)&&Nw(o)){if(!cu(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Nw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function yc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LR(t,e){const n=new MR(t,e);return n.subscribe.bind(n)}class MR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VR(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Qp),i.error===void 0&&(i.error=Qp),i.complete===void 0&&(i.complete=Qp);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1e3,$R=2,UR=4*60*60*1e3,BR=.5;function Ow(t,e=FR,n=$R){const r=e*Math.pow(n,t),i=Math.round(BR*r*(Math.random()-.5)*2);return Math.min(UR,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HR(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qR(t){return t===xo?void 0:t}function HR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const KR={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},GR=je.INFO,QR={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},JR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=QR[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cf{constructor(e){this.name=e,this._logLevel=GR,this._logHandler=JR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const YR=(t,e)=>e.some(n=>t instanceof n);let jw,Dw;function XR(){return jw||(jw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZR(){return Dw||(Dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EI=new WeakMap,hg=new WeakMap,TI=new WeakMap,Jp=new WeakMap,H_=new WeakMap;function eP(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ws(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&EI.set(n,t)}).catch(()=>{}),H_.set(e,t),e}function tP(t){if(hg.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});hg.set(t,e)}let fg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ws(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nP(t){fg=t(fg)}function rP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yp(this),e,...n);return TI.set(r,e.sort?e.sort():[e]),Ws(r)}:ZR().includes(t)?function(...e){return t.apply(Yp(this),e),Ws(EI.get(this))}:function(...e){return Ws(t.apply(Yp(this),e))}}function iP(t){return typeof t=="function"?rP(t):(t instanceof IDBTransaction&&tP(t),YR(t,XR())?new Proxy(t,fg):t)}function Ws(t){if(t instanceof IDBRequest)return eP(t);if(Jp.has(t))return Jp.get(t);const e=iP(t);return e!==t&&(Jp.set(t,e),H_.set(e,t)),e}const Yp=t=>H_.get(t);function bI(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Ws(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ws(o.result),l.oldVersion,l.newVersion,Ws(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const sP=["get","getKey","getAll","getAllKeys","count"],oP=["put","add","delete","clear"],Xp=new Map;function Lw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=oP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||sP.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return Xp.set(e,s),s}nP(t=>({...t,get:(e,n,r)=>Lw(e,n)||t.get(e,n,r),has:(e,n)=>!!Lw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pg="@firebase/app",Mw="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new Cf("@firebase/app"),cP="@firebase/app-compat",uP="@firebase/analytics-compat",dP="@firebase/analytics",hP="@firebase/app-check-compat",fP="@firebase/app-check",pP="@firebase/auth",mP="@firebase/auth-compat",gP="@firebase/database",_P="@firebase/database-compat",vP="@firebase/functions",yP="@firebase/functions-compat",wP="@firebase/installations",EP="@firebase/installations-compat",TP="@firebase/messaging",bP="@firebase/messaging-compat",IP="@firebase/performance",SP="@firebase/performance-compat",AP="@firebase/remote-config",xP="@firebase/remote-config-compat",kP="@firebase/storage",CP="@firebase/storage-compat",RP="@firebase/firestore",PP="@firebase/vertexai-preview",NP="@firebase/firestore-compat",OP="firebase",jP="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="[DEFAULT]",DP={[pg]:"fire-core",[cP]:"fire-core-compat",[dP]:"fire-analytics",[uP]:"fire-analytics-compat",[fP]:"fire-app-check",[hP]:"fire-app-check-compat",[pP]:"fire-auth",[mP]:"fire-auth-compat",[gP]:"fire-rtdb",[_P]:"fire-rtdb-compat",[vP]:"fire-fn",[yP]:"fire-fn-compat",[wP]:"fire-iid",[EP]:"fire-iid-compat",[TP]:"fire-fcm",[bP]:"fire-fcm-compat",[IP]:"fire-perf",[SP]:"fire-perf-compat",[AP]:"fire-rc",[xP]:"fire-rc-compat",[kP]:"fire-gcs",[CP]:"fire-gcs-compat",[RP]:"fire-fst",[NP]:"fire-fst-compat",[PP]:"fire-vertex","fire-js":"fire-js",[OP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,LP=new Map,gg=new Map;function Vw(t,e){try{t.container.addComponent(e)}catch(n){Xi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bi(t){const e=t.name;if(gg.has(e))return Xi.debug(`There were multiple attempts to register component ${e}.`),!1;gg.set(e,t);for(const n of zh.values())Vw(n,t);for(const n of LP.values())Vw(n,t);return!0}function aa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ks=new oa("app","Firebase",MP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ks.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=jP;function II(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ks.create("bad-app-name",{appName:String(i)});if(n||(n=gI()),!n)throw Ks.create("no-options");const s=zh.get(i);if(s){if(cu(n,s.options)&&cu(r,s.config))return s;throw Ks.create("duplicate-app",{appName:i})}const o=new WR(i);for(const l of gg.values())o.addComponent(l);const a=new VP(n,r,o);return zh.set(i,a),a}function W_(t=mg){const e=zh.get(t);if(!e&&t===mg&&gI())return II();if(!e)throw Ks.create("no-app",{appName:t});return e}function br(t,e,n){var r;let i=(r=DP[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xi.warn(a.join(" "));return}bi(new Yr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="firebase-heartbeat-database",$P=1,uu="firebase-heartbeat-store";let Zp=null;function SI(){return Zp||(Zp=bI(FP,$P,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ks.create("idb-open",{originalErrorMessage:t.message})})),Zp}async function UP(t){try{const n=(await SI()).transaction(uu),r=await n.objectStore(uu).get(AI(t));return await n.done,r}catch(e){if(e instanceof ti)Xi.warn(e.message);else{const n=Ks.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xi.warn(n.message)}}}async function Fw(t,e){try{const r=(await SI()).transaction(uu,"readwrite");await r.objectStore(uu).put(e,AI(t)),await r.done}catch(n){if(n instanceof ti)Xi.warn(n.message);else{const r=Ks.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xi.warn(r.message)}}}function AI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=1024,zP=30*24*60*60*1e3;class qP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=$w();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=zP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$w(),{heartbeatsToSend:r,unsentEntries:i}=HP(this._heartbeatsCache.heartbeats),s=Bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Xi.warn(n),""}}}function $w(){return new Date().toISOString().substring(0,10)}function HP(t,e=BP){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Uw(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Uw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yI()?wI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Fw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Uw(t){return Bh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){bi(new Yr("platform-logger",e=>new aP(e),"PRIVATE")),bi(new Yr("heartbeat",e=>new qP(e),"PRIVATE")),br(pg,Mw,t),br(pg,Mw,"esm2017"),br("fire-js","")}KP("");function K_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function xI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GP=xI,kI=new oa("auth","Firebase",xI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Cf("@firebase/auth");function QP(t,...e){qh.logLevel<=je.WARN&&qh.warn(`Auth (${xl}): ${t}`,...e)}function ah(t,...e){qh.logLevel<=je.ERROR&&qh.error(`Auth (${xl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,...e){throw G_(t,...e)}function gi(t,...e){return G_(t,...e)}function CI(t,e,n){const r=Object.assign(Object.assign({},GP()),{[e]:n});return new oa("auth","Firebase",r).create(e,{appName:t.name})}function Wi(t){return CI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kI.create(t,...e)}function me(t,e,...n){if(!t)throw G_(e,...n)}function Ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ah(e),new Error(e)}function Zi(t,e){t||Ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _g(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JP(){return Bw()==="http:"||Bw()==="https:"}function Bw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JP()||vI()||"connection"in navigator)?navigator.onLine:!0}function XP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zi(n>e,"Short delay should be less than long delay!"),this.isMobile=AR()||kR()}get(){return YP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e){Zi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=new Ru(3e4,6e4);function io(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function so(t,e,n,r,i={}){return PI(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Cu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),RI.fetch()(NI(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function PI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZP),e);try{const i=new nN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Ld(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ld(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ld(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw CI(t,d,u);Xr(t,d)}}catch(i){if(i instanceof ti)throw i;Xr(t,"network-request-failed",{message:String(i)})}}async function Pu(t,e,n,r,i={}){const s=await so(t,e,n,r,i);return"mfaPendingCredential"in s&&Xr(t,"multi-factor-auth-required",{_serverResponse:s}),s}function NI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Q_(t.config,i):`${t.config.apiScheme}://${i}`}function tN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gi(this.auth,"network-request-failed")),eN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ld(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gi(t,e,r);return i.customData._tokenResponse=n,i}function zw(t){return t!==void 0&&t.enterprise!==void 0}class rN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function iN(t,e){return so(t,"GET","/v2/recaptchaConfig",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sN(t,e){return so(t,"POST","/v1/accounts:delete",e)}async function OI(t,e){return so(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oN(t,e=!1){const n=Ht(t),r=await n.getIdToken(e),i=J_(r);me(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Dc(em(i.auth_time)),issuedAtTime:Dc(em(i.iat)),expirationTime:Dc(em(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function em(t){return Number(t)*1e3}function J_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ah("JWT malformed, contained fewer than 3 sections"),null;try{const i=pI(n);return i?JSON.parse(i):(ah("Failed to decode base64 JWT payload"),null)}catch(i){return ah("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function qw(t){const e=J_(t);return me(e,"internal-error"),me(typeof e.exp<"u","internal-error"),me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ti&&aN(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dc(this.lastLoginAt),this.creationTime=Dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await du(t,OI(n,{idToken:r}));me(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?jI(s.providerUserInfo):[],a=uN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new vg(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function cN(t){const e=Ht(t);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uN(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jI(t){return t.map(e=>{var{providerId:n}=e,r=K_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(t,e){const n=await PI(t,{},async()=>{const r=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=NI(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",RI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hN(t,e){return so(t,"POST","/v2/accounts:revokeToken",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){me(e.idToken,"internal-error"),me(typeof e.idToken<"u","internal-error"),me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){me(e.length!==0,"internal-error");const n=qw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await dN(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Xa;return r&&(me(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(me(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(me(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return Ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t,e){me(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=K_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new vg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await du(this,this.stsTokenManager.getToken(this.auth,e));return me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oN(this,e)}reload(){return cN(this)}_assign(e){this!==e&&(me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fi(this.auth.app))return Promise.reject(Wi(this.auth));const e=await this.getIdToken();return await du(this,sN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,N=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:b,emailVerified:j,isAnonymous:B,providerData:R,stsTokenManager:k}=n;me(b&&k,e,"internal-error");const w=Xa.fromJSON(this.name,k);me(typeof b=="string",e,"internal-error"),Es(p,e.name),Es(g,e.name),me(typeof j=="boolean",e,"internal-error"),me(typeof B=="boolean",e,"internal-error"),Es(y,e.name),Es(I,e.name),Es(A,e.name),Es(N,e.name),Es(x,e.name),Es(E,e.name);const S=new Bi({uid:b,auth:e,email:g,emailVerified:j,displayName:p,isAnonymous:B,photoURL:I,phoneNumber:y,tenantId:A,stsTokenManager:w,createdAt:x,lastLoginAt:E});return R&&Array.isArray(R)&&(S.providerData=R.map(C=>Object.assign({},C))),N&&(S._redirectEventId=N),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new Xa;i.updateFromServerResponse(n);const s=new Bi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Hh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];me(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?jI(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Xa;a.updateFromIdToken(r);const l=new Bi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new vg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=new Map;function zi(t){Zi(t instanceof Function,"Expected a class definition");let e=Hw.get(t);return e?(Zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DI.type="NONE";const Ww=DI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t,e,n){return`firebase:${t}:${e}:${n}`}class Za{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=lh(this.userKey,i.apiKey,s),this.fullPersistenceKey=lh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Za(zi(Ww),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||zi(Ww);const o=lh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const p=Bi._fromJSON(e,d);u!==s&&(a=p),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Za(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Za(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UI(e))return"Blackberry";if(BI(e))return"Webos";if(MI(e))return"Safari";if((e.includes("chrome/")||VI(e))&&!e.includes("edge/"))return"Chrome";if($I(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LI(t=hn()){return/firefox\//i.test(t)}function MI(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VI(t=hn()){return/crios\//i.test(t)}function FI(t=hn()){return/iemobile/i.test(t)}function $I(t=hn()){return/android/i.test(t)}function UI(t=hn()){return/blackberry/i.test(t)}function BI(t=hn()){return/webos/i.test(t)}function Y_(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fN(t=hn()){var e;return Y_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pN(){return CR()&&document.documentMode===10}function zI(t=hn()){return Y_(t)||$I(t)||BI(t)||UI(t)||/windows phone/i.test(t)||FI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e=[]){let n;switch(t){case"Browser":n=Kw(hn());break;case"Worker":n=`${Kw(hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(t,e={}){return so(t,"GET","/v2/passwordPolicy",io(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=6;class vN{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_N,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gw(this),this.idTokenSubscription=new Gw(this),this.beforeStateQueue=new mN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zi(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await OI(this,{idToken:e}),r=await Bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fi(this.app))return Promise.reject(Wi(this));const n=e?Ht(e):null;return n&&me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fi(this.app)?Promise.reject(Wi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fi(this.app)?Promise.reject(Wi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gN(this),n=new vN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zi(e)||this._popupRedirectResolver;me(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(me(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function la(t){return Ht(t)}class Gw{constructor(e){this.auth=e,this.observer=null,this.addObserver=LR(n=>this.observer=n)}get next(){return me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wN(t){Rf=t}function HI(t){return Rf.loadJS(t)}function EN(){return Rf.recaptchaEnterpriseScript}function TN(){return Rf.gapiScript}function bN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const IN="recaptcha-enterprise",SN="NO_RECAPTCHA";class AN{constructor(e){this.type=IN,this.auth=la(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{iN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new rN(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;zw(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(SN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&zw(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=EN();l.length!==0&&(l+=a),HI(l).then(()=>{i(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Qw(t,e,n,r=!1){const i=new AN(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function yg(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Qw(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Qw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e){const n=aa(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(cu(s,e??{}))return i;Xr(i,"already-initialized")}return n.initialize({options:e})}function kN(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CN(t,e,n){const r=la(t);me(r._canInitEmulator,r,"emulator-config-failed"),me(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=WI(e),{host:o,port:a}=RN(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),PN()}function WI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RN(t){const e=WI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Jw(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Jw(o)}}}function Jw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ui("not implemented")}_getIdTokenResponse(e){return Ui("not implemented")}_linkToIdToken(e,n){return Ui("not implemented")}_getReauthenticationResolver(e){return Ui("not implemented")}}async function NN(t,e){return so(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e){return Pu(t,"POST","/v1/accounts:signInWithPassword",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(t,e){return Pu(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}async function DN(t,e){return Pu(t,"POST","/v1/accounts:signInWithEmailLink",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends X_{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new hu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new hu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,n,"signInWithPassword",ON);case"emailLink":return jN(e,{email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return yg(e,r,"signUpPassword",NN);case"emailLink":return DN(e,{idToken:n,email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t,e){return Pu(t,"POST","/v1/accounts:signInWithIdp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="http://localhost";class Ko extends X_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=K_(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ko(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return el(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,el(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,el(e,n)}buildRequest(){const e={requestUri:LN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VN(t){const e=vc(yc(t)).link,n=e?vc(yc(e)).deep_link_id:null,r=vc(yc(t)).deep_link_id;return(r?vc(yc(r)).link:null)||r||n||e||t}class Z_{constructor(e){var n,r,i,s,o,a;const l=vc(yc(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=MN((i=l.mode)!==null&&i!==void 0?i:null);me(u&&d&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=d,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=VN(e);try{return new Z_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.providerId=kl.PROVIDER_ID}static credential(e,n){return hu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Z_.parseLink(n);return me(r,"argument-error"),hu._fromEmailAndCode(e,r.code,r.tenantId)}}kl.PROVIDER_ID="password";kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends KI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends Nu{constructor(){super("facebook.com")}static credential(e){return Ko._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Nu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ko._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rs.credential(n,r)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Nu{constructor(){super("github.com")}static credential(e){return Ko._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ps.credential(e.oauthAccessToken)}catch{return null}}}Ps.GITHUB_SIGN_IN_METHOD="github.com";Ps.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Nu{constructor(){super("twitter.com")}static credential(e,n){return Ko._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ns.credential(n,r)}catch{return null}}}Ns.TWITTER_SIGN_IN_METHOD="twitter.com";Ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(t,e){return Pu(t,"POST","/v1/accounts:signUp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Bi._fromIdTokenResponse(e,r,i),o=Yw(r);return new Go({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Yw(r);return new Go({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Yw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends ti{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Wh(e,n,r,i)}}function GI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(t,s,e,r):s})}async function $N(t,e,n=!1){const r=await du(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Go._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e,n=!1){const{auth:r}=t;if(fi(r.app))return Promise.reject(Wi(r));const i="reauthenticate";try{const s=await du(t,GI(r,i,e,t),n);me(s.idToken,r,"internal-error");const o=J_(s.idToken);me(o,r,"internal-error");const{sub:a}=o;return me(t.uid===a,r,"user-mismatch"),Go._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Xr(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(t,e,n=!1){if(fi(t.app))return Promise.reject(Wi(t));const r="signIn",i=await GI(t,r,e),s=await Go._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function BN(t,e){return QI(la(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(t){const e=la(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zN(t,e,n){if(fi(t.app))return Promise.reject(Wi(t));const r=la(t),o=await yg(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&JI(t),l}),a=await Go._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function qN(t,e,n){return fi(t.app)?Promise.reject(Wi(t)):BN(Ht(t),kl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JI(t),r})}function HN(t,e,n,r){return Ht(t).onIdTokenChanged(e,n,r)}function WN(t,e,n){return Ht(t).beforeAuthStateChanged(e,n)}function YI(t,e,n,r){return Ht(t).onAuthStateChanged(e,n,r)}function KN(t){return Ht(t).signOut()}const Kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=1e3,QN=10;class ZI extends XI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);pN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,QN):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},GN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZI.type="LOCAL";const JN=ZI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS extends XI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eS.type="SESSION";const tS=eS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Pf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await YN(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=ev("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(){return window}function ZN(t){_i().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){return typeof _i().WorkerGlobalScope<"u"&&typeof _i().importScripts=="function"}async function eO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nO(){return nS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firebaseLocalStorageDb",rO=1,Gh="firebaseLocalStorage",iS="fbase_key";class Ou{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Nf(t,e){return t.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function iO(){const t=indexedDB.deleteDatabase(rS);return new Ou(t).toPromise()}function wg(){const t=indexedDB.open(rS,rO);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gh,{keyPath:iS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gh)?e(r):(r.close(),await iO(),e(await wg()))})})}async function Xw(t,e,n){const r=Nf(t,!0).put({[iS]:e,value:n});return new Ou(r).toPromise()}async function sO(t,e){const n=Nf(t,!1).get(e),r=await new Ou(n).toPromise();return r===void 0?null:r.value}function Zw(t,e){const n=Nf(t,!0).delete(e);return new Ou(n).toPromise()}const oO=800,aO=3;class sS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pf._getInstance(nO()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eO(),!this.activeServiceWorker)return;this.sender=new XN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wg();return await Xw(e,Kh,"1"),await Zw(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Xw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>sO(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Nf(i,!1).getAll();return new Ou(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sS.type="LOCAL";const lO=sS;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cO(t,e){return e?zi(e):(me(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends X_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,n){return el(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uO(t){return QI(t.auth,new tv(t),t.bypassAuthState)}function dO(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),UN(n,new tv(t),t.bypassAuthState)}async function hO(t){const{auth:e,user:n}=t;return me(n,e,"internal-error"),$N(n,new tv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uO;case"linkViaPopup":case"linkViaRedirect":return hO;case"reauthViaPopup":case"reauthViaRedirect":return dO;default:Xr(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=new Ru(2e3,1e4);class qa extends oS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return me(e,this.auth,"internal-error"),e}async onExecution(){Zi(this.filter.length===1,"Popup operations only handle one event");const e=ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fO.get())};e()}}qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="pendingRedirect",ch=new Map;class mO extends oS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ch.get(this.auth._key());if(!e){try{const r=await gO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ch.set(this.auth._key(),e)}return this.bypassAuthState||ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function gO(t,e){const n=yO(e),r=vO(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function _O(t,e){ch.set(t._key(),e)}function vO(t){return zi(t._redirectPersistence)}function yO(t){return lh(pO,t.config.apiKey,t.name)}async function wO(t,e,n=!1){if(fi(t.app))return Promise.reject(Wi(t));const r=la(t),i=cO(r,e),o=await new mO(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=10*60*1e3;class TO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bO(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!aS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EO&&this.cachedEventUids.clear(),this.cachedEventUids.has(e0(e))}saveEventToCache(e){this.cachedEventUids.add(e0(e)),this.lastProcessedEventTime=Date.now()}}function e0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(t,e={}){return so(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AO=/^https?/;async function xO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IO(t);for(const n of e)try{if(kO(n))return}catch{}Xr(t,"unauthorized-domain")}function kO(t){const e=_g(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!AO.test(n))return!1;if(SO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CO=new Ru(3e4,6e4);function t0(){const t=_i().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RO(t){return new Promise((e,n)=>{var r,i,s;function o(){t0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t0(),n(gi(t,"network-request-failed"))},timeout:CO.get()})}if(!((i=(r=_i().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=_i().gapi)===null||s===void 0)&&s.load)o();else{const a=bN("iframefcb");return _i()[a]=()=>{gapi.load?o():n(gi(t,"network-request-failed"))},HI(`${TN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw uh=null,e})}let uh=null;function PO(t){return uh=uh||RO(t),uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new Ru(5e3,15e3),OO="__/auth/iframe",jO="emulator/auth/iframe",DO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MO(t){const e=t.config;me(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Q_(e,jO):`https://${t.config.authDomain}/${OO}`,r={apiKey:e.apiKey,appName:t.name,v:xl},i=LO.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Cu(r).slice(1)}`}async function VO(t){const e=await PO(t),n=_i().gapi;return me(n,t,"internal-error"),e.open({where:document.body,url:MO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DO,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=gi(t,"network-request-failed"),a=_i().setTimeout(()=>{s(o)},NO.get());function l(){_i().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$O=500,UO=600,BO="_blank",zO="http://localhost";class n0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qO(t,e,n,r=$O,i=UO){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},FO),{width:r.toString(),height:i.toString(),top:s,left:o}),u=hn().toLowerCase();n&&(a=VI(u)?BO:n),LI(u)&&(e=e||zO,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[y,I])=>`${g}${y}=${I},`,"");if(fN(u)&&a!=="_self")return HO(e||"",a),new n0(null);const p=window.open(e||"",a,d);me(p,t,"popup-blocked");try{p.focus()}catch{}return new n0(p)}function HO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO="__/auth/handler",KO="emulator/auth/handler",GO=encodeURIComponent("fac");async function r0(t,e,n,r,i,s){me(t.config.authDomain,t,"auth-domain-config-required"),me(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xl,eventId:i};if(e instanceof KI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof Nu){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${GO}=${encodeURIComponent(l)}`:"";return`${QO(t)}?${Cu(a).slice(1)}${u}`}function QO({config:t}){return t.emulator?Q_(t,KO):`https://${t.authDomain}/${WO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm="webStorageSupport";class JO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tS,this._completeRedirectFn=wO,this._overrideRedirectResult=_O}async _openPopup(e,n,r,i){var s;Zi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await r0(e,n,r,_g(),i);return qO(e,o,ev())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await r0(e,n,r,_g(),i);return ZN(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zi(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VO(e),r=new TO(e);return n.register("authEvent",i=>(me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tm,{type:tm},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[tm];o!==void 0&&n(!!o),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zI()||MI()||Y_()}}const YO=JO;var i0="@firebase/auth",s0="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ej(t){bi(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;me(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qI(t)},u=new yN(r,i,s,l);return kN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bi(new Yr("auth-internal",e=>{const n=la(e.getProvider("auth").getImmediate());return(r=>new XO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),br(i0,s0,ZO(t)),br(i0,s0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=5*60,nj=_I("authIdTokenMaxAge")||tj;let o0=null;const rj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nj)return;const i=n==null?void 0:n.token;o0!==i&&(o0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ij(t=W_()){const e=aa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xN(t,{popupRedirectResolver:YO,persistence:[lO,JN,tS]}),r=_I("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=rj(s.toString());WN(n,o,()=>o(n.currentUser)),HN(n,a=>o(a))}}const i=mI("auth");return i&&CN(n,`http://${i}`),n}function sj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wN({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=gi("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",sj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ej("Browser");var oj="firebase",aj="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br(oj,aj,"app");var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $o,lS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function S(){}S.prototype=w.prototype,k.D=w.prototype,k.prototype=new S,k.prototype.constructor=k,k.C=function(C,O,V){for(var P=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)P[ge-2]=arguments[ge];return w.prototype[O].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,w,S){S||(S=0);var C=Array(16);if(typeof w=="string")for(var O=0;16>O;++O)C[O]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(O=0;16>O;++O)C[O]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=k.g[0],S=k.g[1],O=k.g[2];var V=k.g[3],P=w+(V^S&(O^V))+C[0]+3614090360&4294967295;w=S+(P<<7&4294967295|P>>>25),P=V+(O^w&(S^O))+C[1]+3905402710&4294967295,V=w+(P<<12&4294967295|P>>>20),P=O+(S^V&(w^S))+C[2]+606105819&4294967295,O=V+(P<<17&4294967295|P>>>15),P=S+(w^O&(V^w))+C[3]+3250441966&4294967295,S=O+(P<<22&4294967295|P>>>10),P=w+(V^S&(O^V))+C[4]+4118548399&4294967295,w=S+(P<<7&4294967295|P>>>25),P=V+(O^w&(S^O))+C[5]+1200080426&4294967295,V=w+(P<<12&4294967295|P>>>20),P=O+(S^V&(w^S))+C[6]+2821735955&4294967295,O=V+(P<<17&4294967295|P>>>15),P=S+(w^O&(V^w))+C[7]+4249261313&4294967295,S=O+(P<<22&4294967295|P>>>10),P=w+(V^S&(O^V))+C[8]+1770035416&4294967295,w=S+(P<<7&4294967295|P>>>25),P=V+(O^w&(S^O))+C[9]+2336552879&4294967295,V=w+(P<<12&4294967295|P>>>20),P=O+(S^V&(w^S))+C[10]+4294925233&4294967295,O=V+(P<<17&4294967295|P>>>15),P=S+(w^O&(V^w))+C[11]+2304563134&4294967295,S=O+(P<<22&4294967295|P>>>10),P=w+(V^S&(O^V))+C[12]+1804603682&4294967295,w=S+(P<<7&4294967295|P>>>25),P=V+(O^w&(S^O))+C[13]+4254626195&4294967295,V=w+(P<<12&4294967295|P>>>20),P=O+(S^V&(w^S))+C[14]+2792965006&4294967295,O=V+(P<<17&4294967295|P>>>15),P=S+(w^O&(V^w))+C[15]+1236535329&4294967295,S=O+(P<<22&4294967295|P>>>10),P=w+(O^V&(S^O))+C[1]+4129170786&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^O&(w^S))+C[6]+3225465664&4294967295,V=w+(P<<9&4294967295|P>>>23),P=O+(w^S&(V^w))+C[11]+643717713&4294967295,O=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(O^V))+C[0]+3921069994&4294967295,S=O+(P<<20&4294967295|P>>>12),P=w+(O^V&(S^O))+C[5]+3593408605&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^O&(w^S))+C[10]+38016083&4294967295,V=w+(P<<9&4294967295|P>>>23),P=O+(w^S&(V^w))+C[15]+3634488961&4294967295,O=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(O^V))+C[4]+3889429448&4294967295,S=O+(P<<20&4294967295|P>>>12),P=w+(O^V&(S^O))+C[9]+568446438&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^O&(w^S))+C[14]+3275163606&4294967295,V=w+(P<<9&4294967295|P>>>23),P=O+(w^S&(V^w))+C[3]+4107603335&4294967295,O=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(O^V))+C[8]+1163531501&4294967295,S=O+(P<<20&4294967295|P>>>12),P=w+(O^V&(S^O))+C[13]+2850285829&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^O&(w^S))+C[2]+4243563512&4294967295,V=w+(P<<9&4294967295|P>>>23),P=O+(w^S&(V^w))+C[7]+1735328473&4294967295,O=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(O^V))+C[12]+2368359562&4294967295,S=O+(P<<20&4294967295|P>>>12),P=w+(S^O^V)+C[5]+4294588738&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^O)+C[8]+2272392833&4294967295,V=w+(P<<11&4294967295|P>>>21),P=O+(V^w^S)+C[11]+1839030562&4294967295,O=V+(P<<16&4294967295|P>>>16),P=S+(O^V^w)+C[14]+4259657740&4294967295,S=O+(P<<23&4294967295|P>>>9),P=w+(S^O^V)+C[1]+2763975236&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^O)+C[4]+1272893353&4294967295,V=w+(P<<11&4294967295|P>>>21),P=O+(V^w^S)+C[7]+4139469664&4294967295,O=V+(P<<16&4294967295|P>>>16),P=S+(O^V^w)+C[10]+3200236656&4294967295,S=O+(P<<23&4294967295|P>>>9),P=w+(S^O^V)+C[13]+681279174&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^O)+C[0]+3936430074&4294967295,V=w+(P<<11&4294967295|P>>>21),P=O+(V^w^S)+C[3]+3572445317&4294967295,O=V+(P<<16&4294967295|P>>>16),P=S+(O^V^w)+C[6]+76029189&4294967295,S=O+(P<<23&4294967295|P>>>9),P=w+(S^O^V)+C[9]+3654602809&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^O)+C[12]+3873151461&4294967295,V=w+(P<<11&4294967295|P>>>21),P=O+(V^w^S)+C[15]+530742520&4294967295,O=V+(P<<16&4294967295|P>>>16),P=S+(O^V^w)+C[2]+3299628645&4294967295,S=O+(P<<23&4294967295|P>>>9),P=w+(O^(S|~V))+C[0]+4096336452&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~O))+C[7]+1126891415&4294967295,V=w+(P<<10&4294967295|P>>>22),P=O+(w^(V|~S))+C[14]+2878612391&4294967295,O=V+(P<<15&4294967295|P>>>17),P=S+(V^(O|~w))+C[5]+4237533241&4294967295,S=O+(P<<21&4294967295|P>>>11),P=w+(O^(S|~V))+C[12]+1700485571&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~O))+C[3]+2399980690&4294967295,V=w+(P<<10&4294967295|P>>>22),P=O+(w^(V|~S))+C[10]+4293915773&4294967295,O=V+(P<<15&4294967295|P>>>17),P=S+(V^(O|~w))+C[1]+2240044497&4294967295,S=O+(P<<21&4294967295|P>>>11),P=w+(O^(S|~V))+C[8]+1873313359&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~O))+C[15]+4264355552&4294967295,V=w+(P<<10&4294967295|P>>>22),P=O+(w^(V|~S))+C[6]+2734768916&4294967295,O=V+(P<<15&4294967295|P>>>17),P=S+(V^(O|~w))+C[13]+1309151649&4294967295,S=O+(P<<21&4294967295|P>>>11),P=w+(O^(S|~V))+C[4]+4149444226&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~O))+C[11]+3174756917&4294967295,V=w+(P<<10&4294967295|P>>>22),P=O+(w^(V|~S))+C[2]+718787259&4294967295,O=V+(P<<15&4294967295|P>>>17),P=S+(V^(O|~w))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+V&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var S=w-this.blockSize,C=this.B,O=this.h,V=0;V<w;){if(O==0)for(;V<=S;)i(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<w;)if(C[O++]=k.charCodeAt(V++),O==this.blockSize){i(this,C),O=0;break}}else for(;V<w;)if(C[O++]=k[V++],O==this.blockSize){i(this,C),O=0;break}}this.h=O,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var S=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=S&255,S/=256;for(this.u(k),k=Array(16),w=S=0;4>w;++w)for(var C=0;32>C;C+=8)k[S++]=this.g[w]>>>C&255;return k};function s(k,w){var S=a;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=w(k)}function o(k,w){this.h=w;for(var S=[],C=!0,O=k.length-1;0<=O;O--){var V=k[O]|0;C&&V==w||(S[O]=V,C=!1)}this.g=S}var a={};function l(k){return-128<=k&&128>k?s(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return N(u(-k));for(var w=[],S=1,C=0;k>=S;C++)w[C]=k/S|0,S*=4294967296;return new o(w,0)}function d(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return N(d(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(w,8)),C=p,O=0;O<k.length;O+=8){var V=Math.min(8,k.length-O),P=parseInt(k.substring(O,O+V),w);8>V?(V=u(Math.pow(w,V)),C=C.j(V).add(u(P))):(C=C.j(S),C=C.add(u(P)))}return C}var p=l(0),g=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-N(this).m();for(var k=0,w=1,S=0;S<this.g.length;S++){var C=this.i(S);k+=(0<=C?C:4294967296+C)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(I(this))return"0";if(A(this))return"-"+N(this).toString(k);for(var w=u(Math.pow(k,6)),S=this,C="";;){var O=j(S,w).g;S=x(S,O.j(w));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(k);if(S=O,I(S))return V+C;for(;6>V.length;)V="0"+V;C=V+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function I(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function A(k){return k.h==-1}t.l=function(k){return k=x(this,k),A(k)?-1:I(k)?0:1};function N(k){for(var w=k.g.length,S=[],C=0;C<w;C++)S[C]=~k.g[C];return new o(S,~k.h).add(g)}t.abs=function(){return A(this)?N(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0,O=0;O<=w;O++){var V=C+(this.i(O)&65535)+(k.i(O)&65535),P=(V>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);C=P>>>16,V&=65535,P&=65535,S[O]=P<<16|V}return new o(S,S[S.length-1]&-2147483648?-1:0)};function x(k,w){return k.add(N(w))}t.j=function(k){if(I(this)||I(k))return p;if(A(this))return A(k)?N(this).j(N(k)):N(N(this).j(k));if(A(k))return N(this.j(N(k)));if(0>this.l(y)&&0>k.l(y))return u(this.m()*k.m());for(var w=this.g.length+k.g.length,S=[],C=0;C<2*w;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(var O=0;O<k.g.length;O++){var V=this.i(C)>>>16,P=this.i(C)&65535,ge=k.i(O)>>>16,Qe=k.i(O)&65535;S[2*C+2*O]+=P*Qe,E(S,2*C+2*O),S[2*C+2*O+1]+=V*Qe,E(S,2*C+2*O+1),S[2*C+2*O+1]+=P*ge,E(S,2*C+2*O+1),S[2*C+2*O+2]+=V*ge,E(S,2*C+2*O+2)}for(C=0;C<w;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=w;C<2*w;C++)S[C]=0;return new o(S,0)};function E(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function b(k,w){this.g=k,this.h=w}function j(k,w){if(I(w))throw Error("division by zero");if(I(k))return new b(p,p);if(A(k))return w=j(N(k),w),new b(N(w.g),N(w.h));if(A(w))return w=j(k,N(w)),new b(N(w.g),w.h);if(30<k.g.length){if(A(k)||A(w))throw Error("slowDivide_ only works with positive integers.");for(var S=g,C=w;0>=C.l(k);)S=B(S),C=B(C);var O=R(S,1),V=R(C,1);for(C=R(C,2),S=R(S,2);!I(C);){var P=V.add(C);0>=P.l(k)&&(O=O.add(S),V=P),C=R(C,1),S=R(S,1)}return w=x(k,O.j(w)),new b(O,w)}for(O=p;0<=k.l(w);){for(S=Math.max(1,Math.floor(k.m()/w.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),V=u(S),P=V.j(w);A(P)||0<P.l(k);)S-=C,V=u(S),P=V.j(w);I(V)&&(V=g),O=O.add(V),k=x(k,P)}return new b(O,k)}t.A=function(k){return j(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)&k.i(C);return new o(S,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)|k.i(C);return new o(S,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)^k.i(C);return new o(S,this.h^k.h)};function B(k){for(var w=k.g.length+1,S=[],C=0;C<w;C++)S[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(S,k.h)}function R(k,w){var S=w>>5;w%=32;for(var C=k.g.length-S,O=[],V=0;V<C;V++)O[V]=0<w?k.i(V+S)>>>w|k.i(V+S+1)<<32-w:k.i(V+S);return new o(O,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,$o=o}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cS,uS,wc,dS,dh,Eg,hS,fS,pS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,_){return c==Array.prototype||c==Object.prototype||(c[m]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var m=0;m<c.length;++m){var _=c[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(c,m){if(m)e:{var _=r;c=c.split(".");for(var T=0;T<c.length-1;T++){var U=c[T];if(!(U in _))break e;_=_[U]}c=c[c.length-1],T=_[c],m=m(T),m!=T&&m!=null&&e(_,c,{configurable:!0,writable:!0,value:m})}}function s(c,m){c instanceof String&&(c+="");var _=0,T=!1,U={next:function(){if(!T&&_<c.length){var q=_++;return{value:m(q,c[q]),done:!1}}return T=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}i("Array.prototype.values",function(c){return c||function(){return s(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function u(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function d(c,m,_){return c.call.apply(c.bind,arguments)}function p(c,m,_){if(!c)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,T),c.apply(m,U)}}return function(){return c.apply(m,arguments)}}function g(c,m,_){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,g.apply(null,arguments)}function y(c,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),c.apply(this,T)}}function I(c,m){function _(){}_.prototype=m.prototype,c.aa=m.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(T,U,q){for(var Z=Array(arguments.length-2),De=2;De<arguments.length;De++)Z[De-2]=arguments[De];return m.prototype[U].apply(T,Z)}}function A(c){const m=c.length;if(0<m){const _=Array(m);for(let T=0;T<m;T++)_[T]=c[T];return _}return[]}function N(c,m){for(let _=1;_<arguments.length;_++){const T=arguments[_];if(l(T)){const U=c.length||0,q=T.length||0;c.length=U+q;for(let Z=0;Z<q;Z++)c[U+Z]=T[Z]}else c.push(T)}}class x{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function E(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function j(c){return j[" "](c),c}j[" "]=function(){};var B=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function R(c,m,_){for(const T in c)m.call(_,c[T],T,c)}function k(c,m){for(const _ in c)m.call(void 0,c[_],_,c)}function w(c){const m={};for(const _ in c)m[_]=c[_];return m}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,m){let _,T;for(let U=1;U<arguments.length;U++){T=arguments[U];for(_ in T)c[_]=T[_];for(let q=0;q<S.length;q++)_=S[q],Object.prototype.hasOwnProperty.call(T,_)&&(c[_]=T[_])}}function O(c){var m=1;c=c.split(":");const _=[];for(;0<m&&c.length;)_.push(c.shift()),m--;return c.length&&_.push(c.join(":")),_}function V(c){a.setTimeout(()=>{throw c},0)}function P(){var c=ae;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class ge{constructor(){this.h=this.g=null}add(m,_){const T=Qe.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Qe=new x(()=>new Je,c=>c.reset());class Je{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let we,X=!1,ae=new ge,de=()=>{const c=a.Promise.resolve(void 0);we=()=>{c.then(Ae)}};var Ae=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(_){V(_)}var m=Qe;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}X=!1};function Te(){this.s=this.s,this.C=this.C}Te.prototype.s=!1,Te.prototype.ma=function(){this.s||(this.s=!0,this.N())},Te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var $e=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};a.addEventListener("test",_,m),a.removeEventListener("test",_,m)}catch{}return c}();function qe(c,m){if(H.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,T=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(B){e:{try{j(m.nodeName);var U=!0;break e}catch{}U=!1}U||(m=null)}}else _=="mouseover"?m=c.fromElement:_=="mouseout"&&(m=c.toElement);this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ye[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&qe.aa.h.call(this)}}I(qe,H);var Ye={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),Nt=0;function Ot(c,m,_,T,U){this.listener=c,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=U,this.key=++Nt,this.da=this.fa=!1}function cr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ie(c){this.src=c,this.g={},this.h=0}ie.prototype.add=function(c,m,_,T,U){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var Z=tn(c,m,T,U);return-1<Z?(m=c[Z],_||(m.fa=!1)):(m=new Ot(m,this.src,q,!!T,U),m.fa=_,c.push(m)),m};function nt(c,m){var _=m.type;if(_ in c.g){var T=c.g[_],U=Array.prototype.indexOf.call(T,m,void 0),q;(q=0<=U)&&Array.prototype.splice.call(T,U,1),q&&(cr(m),c.g[_].length==0&&(delete c.g[_],c.h--))}}function tn(c,m,_,T){for(var U=0;U<c.length;++U){var q=c[U];if(!q.da&&q.listener==m&&q.capture==!!_&&q.ha==T)return U}return-1}var ni="closure_lm_"+(1e6*Math.random()|0),xi={};function jt(c,m,_,T,U){if(Array.isArray(m)){for(var q=0;q<m.length;q++)jt(c,m[q],_,T,U);return null}return _=zn(_),c&&c[tt]?c.K(m,_,u(T)?!!T.capture:!!T,U):ki(c,m,_,!1,T,U)}function ki(c,m,_,T,U,q){if(!m)throw Error("Invalid event type");var Z=u(U)?!!U.capture:!!U,De=ri(c);if(De||(c[ni]=De=new ie(c)),_=De.add(m,_,T,Z,q),_.proxy)return _;if(T=xr(),_.proxy=T,T.src=c,T.listener=_,c.addEventListener)$e||(U=Z),U===void 0&&(U=!1),c.addEventListener(m.toString(),T,U);else if(c.attachEvent)c.attachEvent(kr(m.toString()),T);else if(c.addListener&&c.removeListener)c.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function xr(){function c(_){return m.call(c.src,c.listener,_)}const m=ls;return c}function Rn(c,m,_,T,U){if(Array.isArray(m))for(var q=0;q<m.length;q++)Rn(c,m[q],_,T,U);else T=u(T)?!!T.capture:!!T,_=zn(_),c&&c[tt]?(c=c.i,m=String(m).toString(),m in c.g&&(q=c.g[m],_=tn(q,_,T,U),-1<_&&(cr(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete c.g[m],c.h--)))):c&&(c=ri(c))&&(m=c.g[m.toString()],c=-1,m&&(c=tn(m,_,T,U)),(_=-1<c?m[c]:null)&&pn(_))}function pn(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[tt])nt(m.i,c);else{var _=c.type,T=c.proxy;m.removeEventListener?m.removeEventListener(_,T,c.capture):m.detachEvent?m.detachEvent(kr(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=ri(m))?(nt(_,c),_.h==0&&(_.src=null,m[ni]=null)):cr(c)}}}function kr(c){return c in xi?xi[c]:xi[c]="on"+c}function ls(c,m){if(c.da)c=!0;else{m=new qe(m,this);var _=c.listener,T=c.ha||c.src;c.fa&&pn(c),c=_.call(T,m)}return c}function ri(c){return c=c[ni],c instanceof ie?c:null}var mn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(c){return typeof c=="function"?c:(c[mn]||(c[mn]=function(m){return c.handleEvent(m)}),c[mn])}function ht(){Te.call(this),this.i=new ie(this),this.M=this,this.F=null}I(ht,Te),ht.prototype[tt]=!0,ht.prototype.removeEventListener=function(c,m,_,T){Rn(this,c,m,_,T)};function Xe(c,m){var _,T=c.F;if(T)for(_=[];T;T=T.F)_.push(T);if(c=c.M,T=m.type||m,typeof m=="string")m=new H(m,c);else if(m instanceof H)m.target=m.target||c;else{var U=m;m=new H(T,c),C(m,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var Z=m.g=_[q];U=ot(Z,T,!0,m)&&U}if(Z=m.g=c,U=ot(Z,T,!0,m)&&U,U=ot(Z,T,!1,m)&&U,_)for(q=0;q<_.length;q++)Z=m.g=_[q],U=ot(Z,T,!1,m)&&U}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var _=c.g[m],T=0;T<_.length;T++)cr(_[T]);delete c.g[m],c.h--}}this.F=null},ht.prototype.K=function(c,m,_,T){return this.i.add(String(c),m,!1,_,T)},ht.prototype.L=function(c,m,_,T){return this.i.add(String(c),m,!0,_,T)};function ot(c,m,_,T){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var U=!0,q=0;q<m.length;++q){var Z=m[q];if(Z&&!Z.da&&Z.capture==_){var De=Z.listener,It=Z.ha||Z.src;Z.fa&&nt(c.i,Z),U=De.call(It,T)!==!1&&U}}return U&&!T.defaultPrevented}function gn(c,m,_){if(typeof c=="function")_&&(c=g(c,_));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(c,m||0)}function Cr(c){c.g=gn(()=>{c.g=null,c.i&&(c.i=!1,Cr(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class qn extends Te{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(c){Te.call(this),this.h=c,this.g={}}I(Pn,Te);var nn=[];function co(c){R(c.g,function(m,_){this.g.hasOwnProperty(_)&&pn(m)},c),c.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),co(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ii=a.JSON.stringify,pa=a.JSON.parse,$l=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function cs(){}cs.prototype.h=null;function Ci(c){return c.h||(c.h=c.i())}function uo(){}var Rr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pr(){H.call(this,"d")}I(Pr,H);function ur(){H.call(this,"c")}I(ur,H);var dr={},us=null;function ds(){return us=us||new ht}dr.La="serverreachability";function ho(c){H.call(this,dr.La,c)}I(ho,H);function hr(c){const m=ds();Xe(m,new ho(m))}dr.STAT_EVENT="statevent";function Ri(c,m){H.call(this,dr.STAT_EVENT,c),this.stat=m}I(Ri,H);function ft(c){const m=ds();Xe(m,new Ri(m,c))}dr.Ma="timingevent";function si(c,m){H.call(this,dr.Ma,c),this.size=m}I(si,H);function L(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},m)}function $(){this.g=!0}$.prototype.xa=function(){this.g=!1};function z(c,m,_,T,U,q){c.info(function(){if(c.g)if(q)for(var Z="",De=q.split("&"),It=0;It<De.length;It++){var Ne=De[It].split("=");if(1<Ne.length){var Ft=Ne[0];Ne=Ne[1];var $t=Ft.split("_");Z=2<=$t.length&&$t[1]=="type"?Z+(Ft+"="+Ne+"&"):Z+(Ft+"=redacted&")}}else Z=null;else Z=q;return"XMLHTTP REQ ("+T+") [attempt "+U+"]: "+m+`
`+_+`
`+Z})}function W(c,m,_,T,U,q,Z){c.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+U+"]: "+m+`
`+_+`
`+q+" "+Z})}function te(c,m,_,T){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+he(c,_)+(T?" "+T:"")})}function se(c,m){c.info(function(){return"TIMEOUT: "+m})}$.prototype.info=function(){};function he(c,m){if(!c.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var T=_[c];if(!(2>T.length)){var U=T[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var Z=1;Z<U.length;Z++)U[Z]=""}}}}return ii(_)}catch{return m}}var Y={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ce;function ue(){}I(ue,cs),ue.prototype.g=function(){return new XMLHttpRequest},ue.prototype.i=function(){return{}},ce=new ue;function xe(c,m,_,T){this.j=c,this.i=m,this.l=_,this.R=T||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ke}function ke(){this.i=null,this.g="",this.h=!1}var Me={},be={};function at(c,m,_){c.L=1,c.v=Pi(mr(m)),c.m=_,c.P=!0,lt(c,null)}function lt(c,m){c.F=Date.now(),Hn(c),c.A=mr(c.v);var _=c.A,T=c.R;Array.isArray(T)||(T=[String(T)]),td(_.i,"t",T),c.C=0,_=c.j.J,c.h=new ke,c.g=Yl(c.j,_?m:null,!c.m),0<c.O&&(c.M=new qn(g(c.Y,c,c.g),c.O)),m=c.U,_=c.g,T=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(nn[0]=U.toString()),U=nn);for(var q=0;q<U.length;q++){var Z=jt(_,U[q],T||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),hr(),z(c.i,c.u,c.A,c.l,c.R,c.m)}xe.prototype.ca=function(c){c=c.target;const m=this.M;m&&Lr(c)==3?m.j():this.Y(c)},xe.prototype.Y=function(c){try{if(c==this.g)e:{const $t=Lr(this.g);var m=this.g.Ba();const vs=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||ad(this.g)))){this.J||$t!=4||m==7||(m==8||0>=vs?hr(3):hr(2)),pr(this);var _=this.g.Z();this.X=_;t:if(Nr(this)){var T=ad(this.g);c="";var U=T.length,q=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),Dt(this);var Z="";break t}this.h.i=new a.TextDecoder}for(m=0;m<U;m++)this.h.h=!0,c+=this.h.i.decode(T[m],{stream:!(q&&m==U-1)});T.length=0,this.h.g+=c,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=_==200,W(this.i,this.u,this.A,this.l,this.R,$t,_),this.o){if(this.T&&!this.K){t:{if(this.g){var De,It=this.g;if((De=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(De)){var Ne=De;break t}}Ne=null}if(_=Ne)te(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oi(this,_);else{this.o=!1,this.s=3,ft(12),_n(this),Dt(this);break e}}if(this.P){_=!0;let Kt;for(;!this.J&&this.C<Z.length;)if(Kt=fr(this,Z),Kt==be){$t==4&&(this.s=4,ft(14),_=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Me){this.s=4,ft(15),te(this.i,this.l,Z,"[Invalid Chunk]"),_=!1;break}else te(this.i,this.l,Kt,null),oi(this,Kt);if(Nr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||Z.length!=0||this.h.h||(this.s=1,ft(16),_=!1),this.o=this.o&&_,!_)te(this.i,this.l,Z,"[Invalid Chunked Response]"),_n(this),Dt(this);else if(0<Z.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Ql(Ft),Ft.M=!0,ft(11))}}else te(this.i,this.l,Z,null),oi(this,Z);$t==4&&_n(this),this.o&&!this.J&&($t==4?hd(this.j,this):(this.o=!1,Hn(this)))}else _p(this.g),_==400&&0<Z.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),_n(this),Dt(this)}}}catch{}finally{}};function Nr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fr(c,m){var _=c.C,T=m.indexOf(`
`,_);return T==-1?be:(_=Number(m.substring(_,T)),isNaN(_)?Me:(T+=1,T+_>m.length?be:(m=m.slice(T,T+_),c.C=T+_,m)))}xe.prototype.cancel=function(){this.J=!0,_n(this)};function Hn(c){c.S=Date.now()+c.I,Or(c,c.I)}function Or(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=L(g(c.ba,c),m)}function pr(c){c.B&&(a.clearTimeout(c.B),c.B=null)}xe.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(se(this.i,this.A),this.L!=2&&(hr(),ft(17)),_n(this),this.s=2,Dt(this)):Or(this,this.S-c)};function Dt(c){c.j.G==0||c.J||hd(c.j,c)}function _n(c){pr(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,co(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function oi(c,m){try{var _=c.j;if(_.G!=0&&(_.g==c||Ue(_.h,c))){if(!c.K&&Ue(_.h,c)&&_.G==3){try{var T=_.Da.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var U=T;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ea(_),ya(_);else break e;Gl(_),ft(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=L(g(_.Za,_),6e3));if(1>=bt(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Mr(_,11)}else if((c.K||_.g==c)&&Ea(_),!E(m))for(U=_.Da.g.parse(m),m=0;m<U.length;m++){let Ne=U[m];if(_.T=Ne[0],Ne=Ne[1],_.G==2)if(Ne[0]=="c"){_.K=Ne[1],_.ia=Ne[2];const Ft=Ne[3];Ft!=null&&(_.la=Ft,_.j.info("VER="+_.la));const $t=Ne[4];$t!=null&&(_.Aa=$t,_.j.info("SVER="+_.Aa));const vs=Ne[5];vs!=null&&typeof vs=="number"&&0<vs&&(T=1.5*vs,_.L=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Kt=c.g;if(Kt){const _r=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_r){var q=T.h;q.g||_r.indexOf("spdy")==-1&&_r.indexOf("quic")==-1&&_r.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(vn(q,q.h),q.h=null))}if(T.D){const Xl=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(T.ya=Xl,We(T.I,T.D,Xl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),T=_;var Z=c;if(T.qa=Jl(T,T.J?T.ia:null,T.W),Z.K){fo(T.h,Z);var De=Z,It=T.L;It&&(De.I=It),De.B&&(pr(De),Hn(De)),T.g=Z}else ud(T);0<_.i.length&&wa(_)}else Ne[0]!="stop"&&Ne[0]!="close"||Mr(_,7);else _.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Mr(_,7):Kl(_):Ne[0]!="noop"&&_.l&&_.l.ta(Ne),_.v=0)}}hr(4)}catch{}}var Wn=class{constructor(c,m){this.g=c,this.map=m}};function pe(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ze(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function bt(c){return c.h?1:c.g?c.g.size:0}function Ue(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function vn(c,m){c.g?c.g.add(m):c.h=m}function fo(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}pe.prototype.cancel=function(){if(this.i=ma(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ma(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const _ of c.g.values())m=m.concat(_.D);return m}return A(c.i)}function dp(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var m=[],_=c.length,T=0;T<_;T++)m.push(c[T]);return m}m=[],_=0;for(T in c)m[_++]=c[T];return m}function hp(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var m=[];c=c.length;for(var _=0;_<c;_++)m.push(_);return m}m=[],_=0;for(const T in c)m[_++]=T;return m}}}function Ku(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var _=hp(c),T=dp(c),U=T.length,q=0;q<U;q++)m.call(void 0,T[q],_&&_[q],c)}var Gu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kn(c,m){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var T=c[_].indexOf("="),U=null;if(0<=T){var q=c[_].substring(0,T);U=c[_].substring(T+1)}else q=c[_];m(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function ai(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ai){this.h=c.h,po(this,c.j),this.o=c.o,this.g=c.g,ga(this,c.s),this.l=c.l;var m=c.i,_=new li;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),Qu(this,_),this.m=c.m}else c&&(m=String(c).match(Gu))?(this.h=!1,po(this,m[1]||"",!0),this.o=mo(m[2]||""),this.g=mo(m[3]||"",!0),ga(this,m[4]),this.l=mo(m[5]||"",!0),Qu(this,m[6]||"",!0),this.m=mo(m[7]||"")):(this.h=!1,this.i=new li(null,this.h))}ai.prototype.toString=function(){var c=[],m=this.j;m&&c.push(go(m,Yu,!0),":");var _=this.g;return(_||m=="file")&&(c.push("//"),(m=this.o)&&c.push(go(m,Yu,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(go(_,_.charAt(0)=="/"?Xu:fp,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",go(_,ed)),c.join("")};function mr(c){return new ai(c)}function po(c,m,_){c.j=_?mo(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function ga(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function Qu(c,m,_){m instanceof li?(c.i=m,nd(c.i,c.h)):(_||(m=go(m,Zu)),c.i=new li(m,c.h))}function We(c,m,_){c.i.set(m,_)}function Pi(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function mo(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function go(c,m,_){return typeof c=="string"?(c=encodeURI(c).replace(m,Ju),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ju(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Yu=/[#\/\?@]/g,fp=/[#\?:]/g,Xu=/[#\?]/g,Zu=/[#\?@]/g,ed=/#/g;function li(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function jr(c){c.g||(c.g=new Map,c.h=0,c.i&&Kn(c.i,function(m,_){c.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}t=li.prototype,t.add=function(c,m){jr(this),this.i=null,c=hs(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(m),this.h+=1,this};function _a(c,m){jr(c),m=hs(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function yn(c,m){return jr(c),m=hs(c,m),c.g.has(m)}t.forEach=function(c,m){jr(this),this.g.forEach(function(_,T){_.forEach(function(U){c.call(m,U,T,this)},this)},this)},t.na=function(){jr(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let T=0;T<m.length;T++){const U=c[T];for(let q=0;q<U.length;q++)_.push(m[T])}return _},t.V=function(c){jr(this);let m=[];if(typeof c=="string")yn(this,c)&&(m=m.concat(this.g.get(hs(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)m=m.concat(c[_])}return m},t.set=function(c,m){return jr(this),this.i=null,c=hs(this,c),yn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function td(c,m,_){_a(c,m),0<_.length&&(c.i=null,c.g.set(hs(c,m),A(_)),c.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var T=m[_];const q=encodeURIComponent(String(T)),Z=this.V(T);for(T=0;T<Z.length;T++){var U=q;Z[T]!==""&&(U+="="+encodeURIComponent(String(Z[T]))),c.push(U)}}return this.i=c.join("&")};function hs(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function nd(c,m){m&&!c.j&&(jr(c),c.i=null,c.g.forEach(function(_,T){var U=T.toLowerCase();T!=U&&(_a(this,T),td(this,U,_))},c)),c.j=m}function rd(c,m){const _=new $;if(a.Image){const T=new Image;T.onload=y(ci,_,"TestLoadImage: loaded",!0,m,T),T.onerror=y(ci,_,"TestLoadImage: error",!1,m,T),T.onabort=y(ci,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=y(ci,_,"TestLoadImage: timeout",!1,m,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=c}else m(!1)}function pp(c,m){const _=new $,T=new AbortController,U=setTimeout(()=>{T.abort(),ci(_,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:T.signal}).then(q=>{clearTimeout(U),q.ok?ci(_,"TestPingServer: ok",!0,m):ci(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),ci(_,"TestPingServer: error",!1,m)})}function ci(c,m,_,T,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),T(_)}catch{}}function mp(){this.g=new $l}function gp(c,m,_){const T=_||"";try{Ku(c,function(U,q){let Z=U;u(U)&&(Z=ii(U)),m.push(T+q+"="+encodeURIComponent(Z))})}catch(U){throw m.push(T+"type="+encodeURIComponent("_badmap")),U}}function _o(c){this.l=c.Ub||null,this.j=c.eb||!1}I(_o,cs),_o.prototype.g=function(){return new va(this.l,this.j)},_o.prototype.i=function(c){return function(){return c}}({});function va(c,m){ht.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(va,ht),t=va.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,Ni(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ul(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ul(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?fs(this):Ni(this),this.readyState==3&&Ul(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,fs(this))},t.Qa=function(c){this.g&&(this.response=c,fs(this))},t.ga=function(){this.g&&fs(this)};function fs(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ni(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=m.next();return c.join(`\r
`)};function Ni(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function id(c){let m="";return R(c,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Bl(c,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=id(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):We(c,m,_))}function Be(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Be,ht);var Dr=/^https?$/i,sd=["POST","PUT"];t=Be.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ce.g(),this.v=this.o?Ci(this.o):Ci(ce),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(q){od(this,q);return}if(c=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var U in T)_.set(U,T[U]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const q of T.keys())_.set(q,T.get(q));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sd,m,void 0))||T||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,Z]of _)this.g.setRequestHeader(q,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hl(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){od(this,q)}};function od(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,zl(c),vo(c)}function zl(c){c.A||(c.A=!0,Xe(c,"complete"),Xe(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Xe(this,"complete"),Xe(this,"abort"),vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),Be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ql(this):this.bb())},t.bb=function(){ql(this)};function ql(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Lr(c)!=4||c.Z()!=2)){if(c.u&&Lr(c)==4)gn(c.Ea,0,c);else if(Xe(c,"readystatechange"),Lr(c)==4){c.h=!1;try{const Z=c.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=Z===0){var U=String(c.D).match(Gu)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),T=!Dr.test(U?U.toLowerCase():"")}_=T}if(_)Xe(c,"complete"),Xe(c,"success");else{c.m=6;try{var q=2<Lr(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",zl(c)}}finally{vo(c)}}}}function vo(c,m){if(c.g){Hl(c);const _=c.g,T=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Xe(c,"ready");try{_.onreadystatechange=T}catch{}}}function Hl(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Lr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),pa(m)}};function ad(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function _p(c){const m={};c=(c.g&&2<=Lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<c.length;T++){if(E(c[T]))continue;var _=O(c[T]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=m[U]||[];m[U]=q,q.push(_)}k(m,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(c,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||m}function Wl(c){this.Aa=0,this.i=[],this.j=new $,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ps("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ps("baseRetryDelayMs",5e3,c),this.cb=ps("retryDelaySeedMs",1e4,c),this.Wa=ps("forwardChannelMaxRetries",2,c),this.wa=ps("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new pe(c&&c.concurrentRequestLimit),this.Da=new mp,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wl.prototype,t.la=8,t.G=1,t.connect=function(c,m,_,T){ft(0),this.W=c,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.I=Jl(this,null,this.W),wa(this)};function Kl(c){if(ld(c),c.G==3){var m=c.U++,_=mr(c.I);if(We(_,"SID",c.K),We(_,"RID",m),We(_,"TYPE","terminate"),ms(c,_),m=new xe(c,c.j,m),m.L=2,m.v=Pi(mr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=m.v,_=!0),_||(m.g=Yl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Hn(m)}yo(c)}function ya(c){c.g&&(Ql(c),c.g.cancel(),c.g=null)}function ld(c){ya(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ea(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function wa(c){if(!Ze(c.h)&&!c.s){c.s=!0;var m=c.Ga;we||de(),X||(we(),X=!0),ae.add(m,c),c.B=0}}function vp(c,m){return bt(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=L(g(c.Ga,c,m),fd(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new xe(this,this.j,c);let q=this.o;if(this.S&&(q?(q=w(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=cd(this,U,m),_=mr(this.I),We(_,"RID",c),We(_,"CVER",22),this.D&&We(_,"X-HTTP-Session-Id",this.D),ms(this,_),q&&(this.O?m="headers="+encodeURIComponent(String(id(q)))+"&"+m:this.m&&Bl(_,this.m,q)),vn(this.h,U),this.Ua&&We(_,"TYPE","init"),this.P?(We(_,"$req",m),We(_,"SID","null"),U.T=!0,at(U,_,null)):at(U,_,m),this.G=2}}else this.G==3&&(c?gr(this,c):this.i.length==0||Ze(this.h)||gr(this))};function gr(c,m){var _;m?_=m.l:_=c.U++;const T=mr(c.I);We(T,"SID",c.K),We(T,"RID",_),We(T,"AID",c.T),ms(c,T),c.m&&c.o&&Bl(T,c.m,c.o),_=new xe(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),m&&(c.i=m.D.concat(c.i)),m=cd(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),vn(c.h,_),at(_,T,m)}function ms(c,m){c.H&&R(c.H,function(_,T){We(m,T,_)}),c.l&&Ku({},function(_,T){We(m,T,_)})}function cd(c,m,_){_=Math.min(c.i.length,_);var T=c.l?g(c.l.Na,c.l,c):null;e:{var U=c.i;let q=-1;for(;;){const Z=["count="+_];q==-1?0<_?(q=U[0].g,Z.push("ofs="+q)):q=0:Z.push("ofs="+q);let De=!0;for(let It=0;It<_;It++){let Ne=U[It].g;const Ft=U[It].map;if(Ne-=q,0>Ne)q=Math.max(0,U[It].g-100),De=!1;else try{gp(Ft,Z,"req"+Ne+"_")}catch{T&&T(Ft)}}if(De){T=Z.join("&");break e}}}return c=c.i.splice(0,_),m.D=c,T}function ud(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;we||de(),X||(we(),X=!0),ae.add(m,c),c.v=0}}function Gl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=L(g(c.Fa,c),fd(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,dd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=L(g(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),ya(this),dd(this))};function Ql(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function dd(c){c.g=new xe(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=mr(c.qa);We(m,"RID","rpc"),We(m,"SID",c.K),We(m,"AID",c.T),We(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(m,"TO",c.ja),We(m,"TYPE","xmlhttp"),ms(c,m),c.m&&c.o&&Bl(m,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Pi(mr(m)),_.m=null,_.P=!0,lt(_,c)}t.Za=function(){this.C!=null&&(this.C=null,ya(this),Gl(this),ft(19))};function Ea(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function hd(c,m){var _=null;if(c.g==m){Ea(c),Ql(c),c.g=null;var T=2}else if(Ue(c.h,m))_=m.D,fo(c.h,m),T=1;else return;if(c.G!=0){if(m.o)if(T==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var U=c.B;T=ds(),Xe(T,new si(T,_)),wa(c)}else ud(c);else if(U=m.s,U==3||U==0&&0<m.X||!(T==1&&vp(c,m)||T==2&&Gl(c)))switch(_&&0<_.length&&(m=c.h,m.i=m.i.concat(_)),U){case 1:Mr(c,5);break;case 4:Mr(c,10);break;case 3:Mr(c,6);break;default:Mr(c,2)}}}function fd(c,m){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*m}function Mr(c,m){if(c.j.info("Error code "+m),m==2){var _=g(c.fb,c),T=c.Xa;const U=!T;T=new ai(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||po(T,"https"),Pi(T),U?rd(T.toString(),_):pp(T.toString(),_)}else ft(2);c.G=0,c.l&&c.l.sa(m),yo(c),ld(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function yo(c){if(c.G=0,c.ka=[],c.l){const m=ma(c.h);(m.length!=0||c.i.length!=0)&&(N(c.ka,m),N(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function Jl(c,m,_){var T=_ instanceof ai?mr(_):new ai(_);if(T.g!="")m&&(T.g=m+"."+T.g),ga(T,T.s);else{var U=a.location;T=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;var q=new ai(null);T&&po(q,T),m&&(q.g=m),U&&ga(q,U),_&&(q.l=_),T=q}return _=c.D,m=c.ya,_&&m&&We(T,_,m),We(T,"VER",c.la),ms(c,T),T}function Yl(c,m,_){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Be(new _o({eb:_})):new Be(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gs(){}t=gs.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _s(){}_s.prototype.g=function(c,m){return new wn(c,m)};function wn(c,m){ht.call(this),this.g=new Wl(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!E(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!E(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Nn(this)}I(wn,ht),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Kl(this.g)},wn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ii(c),c=_);m.i.push(new Wn(m.Ya++,c)),m.G==3&&wa(m)},wn.prototype.N=function(){this.g.l=null,delete this.j,Kl(this.g),delete this.g,wn.aa.N.call(this)};function pd(c){Pr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const _ in m){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}I(pd,Pr);function md(){ur.call(this),this.status=1}I(md,ur);function Nn(c){this.g=c}I(Nn,gs),Nn.prototype.ua=function(){Xe(this.g,"a")},Nn.prototype.ta=function(c){Xe(this.g,new pd(c))},Nn.prototype.sa=function(c){Xe(this.g,new md)},Nn.prototype.ra=function(){Xe(this.g,"b")},_s.prototype.createWebChannel=_s.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,pS=function(){return new _s},fS=function(){return ds()},hS=dr,Eg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Y.NO_ERROR=0,Y.TIMEOUT=8,Y.HTTP_ERROR=6,dh=Y,_e.COMPLETE="complete",dS=_e,uo.EventType=Rr,Rr.OPEN="a",Rr.CLOSE="b",Rr.ERROR="c",Rr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,wc=uo,uS=_o,Be.prototype.listenOnce=Be.prototype.L,Be.prototype.getLastError=Be.prototype.Ka,Be.prototype.getLastErrorCode=Be.prototype.Ba,Be.prototype.getStatus=Be.prototype.Z,Be.prototype.getResponseJson=Be.prototype.Oa,Be.prototype.getResponseText=Be.prototype.oa,Be.prototype.send=Be.prototype.ea,Be.prototype.setWithCredentials=Be.prototype.Ha,cS=Be}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});const l0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new Cf("@firebase/firestore");function cc(){return Qo.logLevel}function le(t,...e){if(Qo.logLevel<=je.DEBUG){const n=e.map(nv);Qo.debug(`Firestore (${Cl}): ${t}`,...n)}}function es(t,...e){if(Qo.logLevel<=je.ERROR){const n=e.map(nv);Qo.error(`Firestore (${Cl}): ${t}`,...n)}}function ul(t,...e){if(Qo.logLevel<=je.WARN){const n=e.map(nv);Qo.warn(`Firestore (${Cl}): ${t}`,...n)}}function nv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: `+t;throw es(e),new Error(e)}function Ge(t,e){t||ve()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ti{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class cj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uj{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new vi,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new vi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ge(typeof r.accessToken=="string"),new mS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ge(e===null||typeof e=="string"),new ln(e)}}class dj{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hj{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new dj(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pj{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ge(typeof n.token=="string"),this.R=n.token,new fj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=mj(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function dl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Vt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Vt(0,0))}static max(){return new Ee(new Vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class it extends fu{construct(e,n,r){return new it(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new it(n)}static emptyPath(){return new it([])}}const gj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends fu{construct(e,n,r){return new Jt(e,n,r)}static isValidIdentifier(e){return gj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new ne(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new ne(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(it.fromString(e))}static fromName(e){return new fe(it.fromString(e).popFirst(5))}static empty(){return new fe(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new it(e.slice()))}}function _j(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ee.fromTimestamp(r===1e9?new Vt(n+1,0):new Vt(n,r));return new Ys(i,fe.empty(),e)}function vj(t){return new Ys(t.readTime,t.key,-1)}class Ys{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ys(Ee.min(),fe.empty(),-1)}static max(){return new Ys(Ee.max(),fe.empty(),-1)}}function yj(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ej{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==wj)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new Q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Tj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Du(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rv.oe=-1;function Of(t){return t==null}function Qh(t){return t===0&&1/t==-1/0}function bj(t){return typeof t=="number"&&Number.isInteger(t)&&!Qh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ij(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function _S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Qt.RED,this.left=i??Qt.EMPTY,this.right=s??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Qt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Qt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Kr([])}unionWith(e){let n=new Xt(Jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vS("Invalid base64 string: "+s):s}}(e);return new en(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const Sj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(t){if(Ge(!!t),typeof t=="string"){let e=0;const n=Sj.exec(t);if(Ge(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(t.seconds),nanos:St(t.nanos)}}function St(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jo(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iv(t){const e=t.mapValue.fields.__previous_value__;return jf(e)?iv(e):e}function pu(t){const e=Xs(t.mapValue.fields.__local_write_time__.timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,r,i,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class mu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jf(t)?4:kj(t)?9007199254740991:xj(t)?10:11:ve()}function Ii(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pu(t).isEqual(pu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Xs(i.timestampValue),a=Xs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Jo(i.bytesValue).isEqual(Jo(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return St(i.geoPointValue.latitude)===St(s.geoPointValue.latitude)&&St(i.geoPointValue.longitude)===St(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return St(i.integerValue)===St(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=St(i.doubleValue),a=St(s.doubleValue);return o===a?Qh(o)===Qh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(c0(o)!==c0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ii(o[l],a[l])))return!1;return!0}(t,e);default:return ve()}}function gu(t,e){return(t.values||[]).find(n=>Ii(n,e))!==void 0}function hl(t,e){if(t===e)return 0;const n=Yo(t),r=Yo(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=St(s.integerValue||s.doubleValue),l=St(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return d0(t.timestampValue,e.timestampValue);case 4:return d0(pu(t),pu(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Jo(s),l=Jo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Fe(a[u],l[u]);if(d!==0)return d}return Fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Fe(St(s.latitude),St(o.latitude));return a!==0?a:Fe(St(s.longitude),St(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return h0(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,d;const p=s.fields||{},g=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,I=(l=g.value)===null||l===void 0?void 0:l.arrayValue,A=Fe(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:h0(y,I)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Fd.mapValue&&o===Fd.mapValue)return 0;if(s===Fd.mapValue)return 1;if(o===Fd.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=Fe(l[p],d[p]);if(g!==0)return g;const y=hl(a[l[p]],u[d[p]]);if(y!==0)return y}return Fe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ve()}}function d0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Xs(t),r=Xs(e),i=Fe(n.seconds,r.seconds);return i!==0?i:Fe(n.nanos,r.nanos)}function h0(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=hl(n[i],r[i]);if(s)return s}return Fe(n.length,r.length)}function fl(t){return Tg(t)}function Tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Tg(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Tg(n.fields[o])}`;return i+"}"}(t.mapValue):ve()}function Jh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function bg(t){return!!t&&"integerValue"in t}function sv(t){return!!t&&"arrayValue"in t}function f0(t){return!!t&&"nullValue"in t}function p0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hh(t){return!!t&&"mapValue"in t}function xj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Lc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lc(n)}setAll(e){let n=Jt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Lc(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Rl(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new wr(Lc(this.value))}}function yS(t){const e=[];return Rl(t.fields,(n,r)=>{const i=new Jt([n]);if(hh(r)){const s=yS(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new un(e,0,Ee.min(),Ee.min(),Ee.min(),wr.empty(),0)}static newFoundDocument(e,n,r,i){return new un(e,1,n,Ee.min(),r,i,0)}static newNoDocument(e,n){return new un(e,2,n,Ee.min(),Ee.min(),wr.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Ee.min(),Ee.min(),wr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.position=e,this.inclusive=n}}function m0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=hl(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function g0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n="asc"){this.field=e,this.dir=n}}function Cj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{}class Pt extends wS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Pj(e,n,r):n==="array-contains"?new jj(e,r):n==="in"?new Dj(e,r):n==="not-in"?new Lj(e,r):n==="array-contains-any"?new Mj(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Nj(e,r):new Oj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hl(n,this.value)):n!==null&&Yo(this.value)===Yo(n)&&this.matchesComparison(hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends wS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zr(e,n)}matches(e){return ES(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ES(t){return t.op==="and"}function TS(t){return Rj(t)&&ES(t)}function Rj(t){for(const e of t.filters)if(e instanceof Zr)return!1;return!0}function Ig(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+fl(t.value);if(TS(t))return t.filters.map(e=>Ig(e)).join(",");{const e=t.filters.map(n=>Ig(n)).join(",");return`${t.op}(${e})`}}function bS(t,e){return t instanceof Pt?function(r,i){return i instanceof Pt&&r.op===i.op&&r.field.isEqual(i.field)&&Ii(r.value,i.value)}(t,e):t instanceof Zr?function(r,i){return i instanceof Zr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&bS(o,i.filters[a]),!0):!1}(t,e):void ve()}function IS(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${fl(n.value)}`}(t):t instanceof Zr?function(n){return n.op.toString()+" {"+n.getFilters().map(IS).join(" ,")+"}"}(t):"Filter"}class Pj extends Pt{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Nj extends Pt{constructor(e,n){super(e,"in",n),this.keys=SS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Oj extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=SS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class jj extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return sv(n)&&gu(n.arrayValue,this.value)}}class Dj extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&gu(this.value.arrayValue,n)}}class Lj extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(gu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!gu(this.value.arrayValue,n)}}class Mj extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!sv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>gu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function _0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Vj(t,e,n,r,i,s,o)}function ov(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ig(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Of(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fl(r)).join(",")),e.ue=n}return e.ue}function av(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Cj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!bS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g0(t.startAt,e.startAt)&&g0(t.endAt,e.endAt)}function Sg(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Fj(t,e,n,r,i,s,o,a){return new ca(t,e,n,r,i,s,o,a)}function lv(t){return new ca(t)}function v0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cv(t){return t.collectionGroup!==null}function tl(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(Jt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new _u(s,r))}),n.has(Jt.keyField().canonicalString())||e.ce.push(new _u(Jt.keyField(),r))}return e.ce}function yi(t){const e=ye(t);return e.le||(e.le=AS(e,tl(t))),e.le}function $j(t){const e=ye(t);return e.he||(e.he=AS(e,t.explicitOrderBy)),e.he}function AS(t,e){if(t.limitType==="F")return _0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new _u(i.field,s)});const n=t.endAt?new pl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pl(t.startAt.position,t.startAt.inclusive):null;return _0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ag(t,e){const n=t.filters.concat([e]);return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yh(t,e,n){return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return av(yi(t),yi(e))&&t.limitType===e.limitType}function xS(t){return`${ov(yi(t))}|lt:${t.limitType}`}function ka(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>IS(i)).join(", ")}]`),Of(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fl(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fl(i)).join(",")),`Target(${r})`}(yi(t))}; limitType=${t.limitType})`}function Lf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):fe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of tl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=m0(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,tl(r),i)||r.endAt&&!function(o,a,l){const u=m0(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,tl(r),i))}(t,e)}function Uj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kS(t){return(e,n)=>{let r=!1;for(const i of tl(t)){const s=Bj(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Bj(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?hl(l,u):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Rl(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return _S(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=new Et(fe.comparator);function ts(){return zj}const CS=new Et(fe.comparator);function Ec(...t){let e=CS;for(const n of t)e=e.insert(n.key,n);return e}function RS(t){let e=CS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function jo(){return Mc()}function PS(){return Mc()}function Mc(){return new Pl(t=>t.toString(),(t,e)=>t.isEqual(e))}const qj=new Et(fe.comparator),Hj=new Xt(fe.comparator);function Pe(...t){let e=Hj;for(const n of t)e=e.add(n);return e}const Wj=new Xt(Fe);function Kj(){return Wj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function NS(t){return{integerValue:""+t}}function Gj(t,e){return bj(e)?NS(e):uv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this._=void 0}}function Qj(t,e,n){return t instanceof Xh?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jf(s)&&(s=iv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof vu?jS(t,e):t instanceof yu?DS(t,e):function(i,s){const o=OS(i,s),a=y0(o)+y0(i.Pe);return bg(o)&&bg(i.Pe)?NS(a):uv(i.serializer,a)}(t,e)}function Jj(t,e,n){return t instanceof vu?jS(t,e):t instanceof yu?DS(t,e):n}function OS(t,e){return t instanceof Zh?function(r){return bg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Xh extends Mf{}class vu extends Mf{constructor(e){super(),this.elements=e}}function jS(t,e){const n=LS(e);for(const r of t.elements)n.some(i=>Ii(i,r))||n.push(r);return{arrayValue:{values:n}}}class yu extends Mf{constructor(e){super(),this.elements=e}}function DS(t,e){let n=LS(e);for(const r of t.elements)n=n.filter(i=>!Ii(i,r));return{arrayValue:{values:n}}}class Zh extends Mf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function y0(t){return St(t.integerValue||t.doubleValue)}function LS(t){return sv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Yj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vu&&i instanceof vu||r instanceof yu&&i instanceof yu?dl(r.elements,i.elements,Ii):r instanceof Zh&&i instanceof Zh?Ii(r.Pe,i.Pe):r instanceof Xh&&i instanceof Xh}(t.transform,e.transform)}class Xj{constructor(e,n){this.version=e,this.transformResults=n}}class wi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wi}static exists(e){return new wi(void 0,e)}static updateTime(e){return new wi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vf{}function MS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new FS(t.key,wi.none()):new Lu(t.key,t.data,wi.none());{const n=t.data,r=wr.empty();let i=new Xt(Jt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ua(t.key,r,new Kr(i.toArray()),wi.none())}}function Zj(t,e,n){t instanceof Lu?function(i,s,o){const a=i.value.clone(),l=E0(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ua?function(i,s,o){if(!fh(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=E0(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(VS(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Vc(t,e,n,r){return t instanceof Lu?function(s,o,a,l){if(!fh(s.precondition,o))return a;const u=s.value.clone(),d=T0(s.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ua?function(s,o,a,l){if(!fh(s.precondition,o))return a;const u=T0(s.fieldTransforms,l,o),d=o.data;return d.setAll(VS(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return fh(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function eD(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=OS(r.transform,i||null);s!=null&&(n===null&&(n=wr.empty()),n.set(r.field,s))}return n||null}function w0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&dl(r,i,(s,o)=>Yj(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lu extends Vf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ua extends Vf{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function VS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function E0(t,e,n){const r=new Map;Ge(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Jj(o,a,n[i]))}return r}function T0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,Qj(s,o,e))}return r}class FS extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tD extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Zj(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PS();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=MS(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(n,r)=>w0(n,r))&&dl(this.baseMutations,e.baseMutations,(n,r)=>w0(n,r))}}class dv{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ge(e.mutations.length===r.length);let i=function(){return qj}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new dv(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Le;function oD(t){switch(t){default:return ve();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function $S(t){if(t===void 0)return es("GRPC error has no .code"),K.UNKNOWN;switch(t){case kt.OK:return K.OK;case kt.CANCELLED:return K.CANCELLED;case kt.UNKNOWN:return K.UNKNOWN;case kt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case kt.INTERNAL:return K.INTERNAL;case kt.UNAVAILABLE:return K.UNAVAILABLE;case kt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case kt.NOT_FOUND:return K.NOT_FOUND;case kt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case kt.ABORTED:return K.ABORTED;case kt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case kt.DATA_LOSS:return K.DATA_LOSS;default:return ve()}}(Le=kt||(kt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new $o([4294967295,4294967295],0);function b0(t){const e=aD().encode(t),n=new lS;return n.update(e),new Uint8Array(n.digest())}function I0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new $o([n,r],0),new $o([i,s],0)]}class hv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Tc(`Invalid padding: ${n}`);if(r<0)throw new Tc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Tc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Tc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$o.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply($o.fromNumber(r)));return i.compare(lD)===1&&(i=new $o([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=b0(e),[r,i]=I0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new hv(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=b0(e),[r,i]=I0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Tc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ff(Ee.min(),i,new Et(Fe),ts(),Pe())}}class Mu{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Mu(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class US{constructor(e,n){this.targetId=e,this.me=n}}class BS{constructor(e,n,r=en.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class S0{constructor(){this.fe=0,this.ge=x0(),this.pe=en.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),r=Pe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ve()}}),new Mu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=x0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ge(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cD{constructor(e){this.Le=e,this.Be=new Map,this.ke=ts(),this.qe=A0(),this.Qe=new Et(Fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const s=i.target;if(Sg(s))if(r===0){const o=new fe(s.path);this.Ue(n,o,un.newNoDocument(o,Ee.min()))}else Ge(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Jo(r).toUint8Array()}catch(l){if(l instanceof vS)return ul("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hv(o,i,s)}catch(l){return ul(l instanceof Tc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Sg(a.target)){const l=new fe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,un.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Pe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new Ff(e,n,this.Qe,this.ke,r);return this.ke=ts(),this.qe=A0(),this.Qe=new Et(Fe),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new S0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xt(Fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new S0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function A0(){return new Et(fe.comparator)}function x0(){return new Et(fe.comparator)}const uD={asc:"ASCENDING",desc:"DESCENDING"},dD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hD={and:"AND",or:"OR"};class fD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xg(t,e){return t.useProto3Json||Of(e)?e:{value:e}}function ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pD(t,e){return ef(t,e.toTimestamp())}function Ei(t){return Ge(!!t),Ee.fromTimestamp(function(n){const r=Xs(n);return new Vt(r.seconds,r.nanos)}(t))}function fv(t,e){return kg(t,e).canonicalString()}function kg(t,e){const n=function(i){return new it(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qS(t){const e=it.fromString(t);return Ge(JS(e)),e}function Cg(t,e){return fv(t.databaseId,e.path)}function nm(t,e){const n=qS(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(WS(n))}function HS(t,e){return fv(t.databaseId,e)}function mD(t){const e=qS(t);return e.length===4?it.emptyPath():WS(e)}function Rg(t){return new it(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WS(t){return Ge(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function k0(t,e,n){return{name:Cg(t,e),fields:n.value.mapValue.fields}}function gD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Ge(d===void 0||typeof d=="string"),en.fromBase64String(d||"")):(Ge(d===void 0||d instanceof Buffer||d instanceof Uint8Array),en.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?K.UNKNOWN:$S(u.code);return new ne(d,u.message||"")}(o);n=new BS(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=nm(t,r.document.name),s=Ei(r.document.updateTime),o=r.document.createTime?Ei(r.document.createTime):Ee.min(),a=new wr({mapValue:{fields:r.document.fields}}),l=un.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new ph(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=nm(t,r.document),s=r.readTime?Ei(r.readTime):Ee.min(),o=un.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ph([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=nm(t,r.document),s=r.removedTargetIds||[];n=new ph([],s,i,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new sD(i,s),a=r.targetId;n=new US(a,o)}}return n}function _D(t,e){let n;if(e instanceof Lu)n={update:k0(t,e.key,e.value)};else if(e instanceof FS)n={delete:Cg(t,e.key)};else if(e instanceof ua)n={update:k0(t,e.key,e.data),updateMask:AD(e.fieldMask)};else{if(!(e instanceof tD))return ve();n={verify:Cg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Xh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ve()}(t,e.precondition)),n}function vD(t,e){return t&&t.length>0?(Ge(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ei(i.updateTime):Ei(s);return o.isEqual(Ee.min())&&(o=Ei(s)),new Xj(o,i.transformResults||[])}(n,e))):[]}function yD(t,e){return{documents:[HS(t,e.path)]}}function KS(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HS(t,i);const s=function(u){if(u.length!==0)return QS(Zr.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:Os(g.field),direction:bD(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xg(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function wD(t,e,n,r){const{_t:i,parent:s}=KS(t,e),o={},a=[];let l=0;return n.forEach(u=>{const d="aggregate_"+l++;o[d]=u.alias,u.aggregateType==="count"?a.push({alias:d,count:{}}):u.aggregateType==="avg"?a.push({alias:d,avg:{field:Os(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:d,sum:{field:Os(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:i.structuredQuery},parent:i.parent},ut:o,parent:s}}function ED(t){let e=mD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ge(r===1);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(p){const g=GS(p);return g instanceof Zr&&TS(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(I){return new _u(Ca(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(p){let g;return g=typeof p=="object"?p.value:p,Of(g)?null:g}(n.limit));let l=null;n.startAt&&(l=function(p){const g=!!p.before,y=p.values||[];return new pl(y,g)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const g=!p.before,y=p.values||[];return new pl(y,g)}(n.endAt)),Fj(e,i,o,s,a,"F",l,u)}function TD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ca(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ca(n.unaryFilter.field);return Pt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ca(n.unaryFilter.field);return Pt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ca(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(Ca(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zr.create(n.compositeFilter.filters.map(r=>GS(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function bD(t){return uD[t]}function ID(t){return dD[t]}function SD(t){return hD[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Ca(t){return Jt.fromServerFormat(t.fieldPath)}function QS(t){return t instanceof Pt?function(n){if(n.op==="=="){if(p0(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(f0(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p0(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(f0(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:ID(n.op),value:n.value}}}(t):t instanceof Zr?function(n){const r=n.getFilters().map(i=>QS(i));return r.length===1?r[0]:{compositeFilter:{op:SD(n.op),filters:r}}}(t):ve()}function AD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n,r,i,s=Ee.min(),o=Ee.min(),a=en.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.ct=e}}function kD(t){const e=ED({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.un=new RD}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Ys.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class RD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Xt(it.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xt(it.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ml(0)}static kn(){return new ml(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.changes=new Pl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Vc(r.mutation,i,Kr.empty(),Vt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const i=jo();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ec();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=jo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ts();const o=Mc(),a=function(){return Mc()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof ua)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Vc(d.mutation,u,d.mutation.getFieldMask(),Vt.now())):o.set(u.key,Kr.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var p;return a.set(u,new ND(d,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Mc();let i=new Et((o,a)=>o-a),s=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||Kr.empty();d=a.applyToLocalView(u,d),r.set(l,d);const p=(i.get(a.batchId)||Pe()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,p=PS();d.forEach(g=>{if(!s.has(g)){const y=MS(n.get(g),r.get(g));y!==null&&p.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Q.resolve(jo());let a=-1,l=s;return o.next(u=>Q.forEach(u,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{l=l.insert(d,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,Pe())).next(d=>({batchId:a,changes:RS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let i=Ec();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ec();return this.indexManager.getCollectionParents(e,s).next(a=>Q.forEach(a,l=>{const u=function(p,g){return new ca(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,un.newInvalidDocument(d)))});let a=Ec();return o.forEach((l,u)=>{const d=s.get(l);d!==void 0&&Vc(d.mutation,u,Kr.empty(),Vt.now()),Lf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ei(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:kD(i.bundledQuery),readTime:Ei(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.overlays=new Et(fe.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=jo();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=jo(),s=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Et((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=jo(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=jo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return Q.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rD(n,r));let s=this.Ir.get(n);s===void 0&&(s=Pe(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.Tr=new Xt(Bt.Er),this.dr=new Xt(Bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Bt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Bt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fe(new it([])),r=new Bt(n,e),i=new Bt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fe(new it([])),r=new Bt(n,e),i=new Bt(n,e+1);let s=Pe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Bt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fe.comparator(e.key,n.key)||Fe(e.wr,n.wr)}static Ar(e,n){return Fe(e.wr,n.wr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xt(Bt.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nD(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.br=this.br.add(new Bt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bt(n,0),i=new Bt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{const a=this.Dr(o.wr);s.push(a)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(Fe);return n.forEach(i=>{const s=new Bt(i,0),o=new Bt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;fe.isDocumentKey(s)||(s=s.child(""));const o=new Bt(new fe(s),0);let a=new Xt(Fe);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.wr)),!0)},o),Q.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ge(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Q.forEach(n.mutations,i=>{const s=new Bt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Bt(n,0),i=this.br.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.Mr=e,this.docs=function(){return new Et(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let r=ts();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():un.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ts();const o=n.path,a=new fe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||yj(vj(d),r)<=0||(i.has(d.key)||Lf(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ve()}Or(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FD(this)}getSize(e){return Q.resolve(this.size)}}class FD extends PD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.persistence=e,this.Nr=new Pl(n=>ov(n),av),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pv,this.targetCount=0,this.kr=ml.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ml(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rv(0),this.Kr=!1,this.Kr=!0,this.$r=new LD,this.referenceDelegate=e(this),this.Ur=new $D(this),this.indexManager=new CD,this.remoteDocumentCache=function(i){return new VD(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xD(n),this.Gr=new jD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new MD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const i=new BD(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class BD extends Ej{constructor(e){super(),this.currentSequenceNumber=e}}class mv{constructor(e){this.persistence=e,this.Jr=new pv,this.Yr=null}static Zr(e){return new mv(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{const i=fe.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Pe(),i=Pe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new gv(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RR()?8:Tj(hn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new zD;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(cc()<=je.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(cc()<=je.DEBUG&&le("QueryEngine","Query:",ka(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(cc()<=je.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yi(n))):Q.resolve())}Yi(e,n){if(v0(n))return Q.resolve(null);let r=yi(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yh(n,null,"F"),r=yi(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=Pe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Yh(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,i){return v0(n)||i.isEqual(Ee.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const o=this.ts(n,s);return this.ns(n,o,r,i)?Q.resolve(null):(cc()<=je.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ka(n)),this.rs(e,o,n,_j(i,-1)).next(a=>a))})}ts(e,n){let r=new Xt(kS(e));return n.forEach((i,s)=>{Lf(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return cc()<=je.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",ka(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ys.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new Et(Fe),this._s=new Pl(s=>ov(s),av),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function WD(t,e,n,r){return new HD(t,e,n,r)}async function YS(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=Pe();for(const u of i){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of s){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function KD(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const p=u.batch,g=p.keys();let y=Q.resolve();return g.forEach(I=>{y=y.next(()=>d.getEntry(l,I)).next(A=>{const N=u.docVersions.get(I);Ge(N!==null),A.version.compareTo(N)<0&&(p.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),d.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function XS(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function GD(t,e){const n=ye(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const a=[];e.targetChanges.forEach((d,p)=>{const g=i.get(p);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,p)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(en.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(p,y),function(A,N,x){return A.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(s,y))});let l=ts(),u=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(QD(s,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(Ee.min())){const d=n.Ur.getLastRemoteSnapshotVersion(s).next(p=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return Q.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=i,s))}function QD(t,e,n){let r=Pe(),i=Pe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ts();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:i}})}function JD(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YD(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new Ms(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Pg(t,e,n){const r=ye(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Du(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function C0(t,e,n){const r=ye(t);let i=Ee.min(),s=Pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const p=ye(l),g=p._s.get(d);return g!==void 0?Q.resolve(p.os.get(g)):p.Ur.getTargetData(u,d)}(r,o,yi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:Ee.min(),n?s:Pe())).next(a=>(XD(r,Uj(e),a),{documents:a,Ts:s})))}function XD(t,e,n){let r=t.us.get(e)||Ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}class R0{constructor(){this.activeTargetIds=Kj()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZD{constructor(){this.so=new R0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new R0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d=null;function rm(){return $d===null?$d=function(){return 268435456+Math.round(2147483648*Math.random())}():$d++,"0x"+$d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class rL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){const a=rm(),l=this.xo(n,r.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,i).then(d=>(le("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ul("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){const i=tL[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const s=rm();return new Promise((o,a)=>{const l=new cS;l.setWithCredentials(!0),l.listenOnce(dS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case dh.NO_ERROR:const d=l.getResponseJson();le(on,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case dh.TIMEOUT:le(on,`RPC '${e}' ${s} timed out`),a(new ne(K.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:const p=l.getStatus();if(le(on,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const y=g==null?void 0:g.error;if(y&&y.status&&y.message){const I=function(N){const x=N.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(x)>=0?x:K.UNKNOWN}(y.status);a(new ne(I,y.message))}else a(new ne(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(K.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{le(on,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);le(on,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const i=rm(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pS(),a=fS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new uS({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=s.join("");le(on,`Creating RPC '${e}' stream ${i}: ${d}`,l);const p=o.createWebChannel(d,l);let g=!1,y=!1;const I=new nL({Io:N=>{y?le(on,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(g||(le(on,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),le(on,`RPC '${e}' stream ${i} sending:`,N),p.send(N))},To:()=>p.close()}),A=(N,x,E)=>{N.listen(x,b=>{try{E(b)}catch(j){setTimeout(()=>{throw j},0)}})};return A(p,wc.EventType.OPEN,()=>{y||(le(on,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),A(p,wc.EventType.CLOSE,()=>{y||(y=!0,le(on,`RPC '${e}' stream ${i} transport closed`),I.So())}),A(p,wc.EventType.ERROR,N=>{y||(y=!0,ul(on,`RPC '${e}' stream ${i} transport errored:`,N),I.So(new ne(K.UNAVAILABLE,"The operation could not be completed")))}),A(p,wc.EventType.MESSAGE,N=>{var x;if(!y){const E=N.data[0];Ge(!!E);const b=E,j=b.error||((x=b[0])===null||x===void 0?void 0:x.error);if(j){le(on,`RPC '${e}' stream ${i} received error:`,j);const B=j.status;let R=function(S){const C=kt[S];if(C!==void 0)return $S(C)}(B),k=j.message;R===void 0&&(R=K.INTERNAL,k="Unknown error status: "+B+" with message "+j.message),y=!0,I.So(new ne(R,k)),p.close()}else le(on,`RPC '${e}' stream ${i} received:`,E),I.bo(E)}}),A(a,hS.STAT_EVENT,N=>{N.stat===Eg.PROXY?le(on,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Eg.NOPROXY&&le(on,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function im(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t){return new fD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n,r,i,s,o,a,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ZS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(es(n.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new ne(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class iL extends eA{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=gD(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?Ei(o.readTime):Ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Rg(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Sg(l)?{documents:yD(s,l)}:{query:KS(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zS(s,o.resumeToken);const u=xg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ee.min())>0){a.readTime=ef(s,o.snapshotVersion.toTimestamp());const u=xg(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=TD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Rg(this.serializer),n.removeTarget=e,this.a_(n)}}class sL extends eA{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,Ge(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ge(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=vD(e.writeResults,e.commitTime),r=Ei(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Rg(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_D(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,kg(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ne(K.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,kg(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(K.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(es(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(async()=>{da(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ye(l);u.L_.add(4),await Vu(u),u.q_.set("Unknown"),u.L_.delete(4),await Uf(u)}(this))})}),this.q_=new aL(r,i)}}async function Uf(t){if(da(t))for(const e of t.B_)await e(!0)}async function Vu(t){for(const e of t.B_)await e(!1)}function tA(t,e){const n=ye(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wv(n)?yv(n):Nl(n).r_()&&vv(n,e))}function _v(t,e){const n=ye(t),r=Nl(n);n.N_.delete(e),r.r_()&&nA(n,e),n.N_.size===0&&(r.r_()?r.o_():da(n)&&n.q_.set("Unknown"))}function vv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Nl(t).A_(e)}function nA(t,e){t.Q_.xe(e),Nl(t).R_(e)}function yv(t){t.Q_=new cD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Nl(t).start(),t.q_.v_()}function wv(t){return da(t)&&!Nl(t).n_()&&t.N_.size>0}function da(t){return ye(t).L_.size===0}function rA(t){t.Q_=void 0}async function cL(t){t.q_.set("Online")}async function uL(t){t.N_.forEach((e,n)=>{vv(t,e)})}async function dL(t,e){rA(t),wv(t)?(t.q_.M_(e),yv(t)):t.q_.set("Unknown")}async function hL(t,e,n){if(t.q_.set("Online"),e instanceof BS&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.N_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))}(t,e)}catch(r){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tf(t,r)}else if(e instanceof ph?t.Q_.Ke(e):e instanceof US?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const r=await XS(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=s.N_.get(l);if(!d)return;s.N_.set(l,d.withResumeToken(en.EMPTY_BYTE_STRING,d.snapshotVersion)),nA(s,l);const p=new Ms(d.target,l,u,d.sequenceNumber);vv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){le("RemoteStore","Failed to raise snapshot:",r),await tf(t,r)}}async function tf(t,e,n){if(!Du(e))throw e;t.L_.add(1),await Vu(t),t.q_.set("Offline"),n||(n=()=>XS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Uf(t)})}function iA(t,e){return e().catch(n=>tf(t,n,e))}async function Bf(t){const e=ye(t),n=Zs(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fL(e);)try{const i=await JD(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,pL(e,i)}catch(i){await tf(e,i)}sA(e)&&oA(e)}function fL(t){return da(t)&&t.O_.length<10}function pL(t,e){t.O_.push(e);const n=Zs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function sA(t){return da(t)&&!Zs(t).n_()&&t.O_.length>0}function oA(t){Zs(t).start()}async function mL(t){Zs(t).p_()}async function gL(t){const e=Zs(t);for(const n of t.O_)e.m_(n.mutations)}async function _L(t,e,n){const r=t.O_.shift(),i=dv.from(r,e,n);await iA(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Bf(t)}async function vL(t,e){e&&Zs(t).V_&&await async function(r,i){if(function(o){return oD(o)&&o!==K.ABORTED}(i.code)){const s=r.O_.shift();Zs(r).s_(),await iA(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Bf(r)}}(t,e),sA(t)&&oA(t)}async function N0(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const r=da(n);n.L_.add(3),await Vu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Uf(n)}async function yL(t,e){const n=ye(t);e?(n.L_.delete(2),await Uf(n)):e||(n.L_.add(2),await Vu(n),n.q_.set("Unknown"))}function Nl(t){return t.K_||(t.K_=function(n,r,i){const s=ye(n);return s.w_(),new iL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:cL.bind(null,t),Ro:uL.bind(null,t),mo:dL.bind(null,t),d_:hL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wv(t)?yv(t):t.q_.set("Unknown")):(await t.K_.stop(),rA(t))})),t.K_}function Zs(t){return t.U_||(t.U_=function(n,r,i){const s=ye(n);return s.w_(),new sL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:mL.bind(null,t),mo:vL.bind(null,t),f_:gL.bind(null,t),g_:_L.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Bf(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new Ev(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tv(t,e){if(es("AsyncQueue",`${e}: ${t}`),Du(t))return new ne(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Ec(),this.sortedSet=new Et(this.comparator)}static emptySet(e){return new nl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(){this.W_=new Et(fe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class gl{constructor(e,n,r,i,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new gl(e,n,nl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class EL{constructor(){this.queries=j0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=ye(n),s=i.queries;i.queries=j0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ne(K.ABORTED,"Firestore shutting down"))}}function j0(){return new Pl(t=>xS(t),Df)}async function aA(t,e){const n=ye(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new wL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await n.onListen(i,!0);break;case 1:s.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=Tv(o,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&bv(n)}async function lA(t,e){const n=ye(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function TL(t,e){const n=ye(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&bv(n)}function bL(t,e,n){const r=ye(t),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(n);r.queries.delete(e)}function bv(t){t.Y_.forEach(e=>{e.next()})}var Ng,D0;(D0=Ng||(Ng={})).ea="default",D0.Cache="cache";class cA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ng.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.key=e}}class dA{constructor(e){this.key=e}}class IL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=kS(e),this.Ra=new nl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new O0,i=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,p)=>{const g=i.get(d),y=Lf(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let N=!1;g&&y?g.data.isEqual(y.data)?I!==A&&(r.track({type:3,doc:y}),N=!0):this.ga(g,y)||(r.track({type:2,doc:y}),N=!0,(l&&this.Aa(y,l)>0||u&&this.Aa(y,u)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),N=!0):g&&!y&&(r.track({type:1,doc:g}),N=!0,(l||u)&&(a=!0)),N&&(y?(o=o.add(y),s=A?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(y,I){const A=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return A(y)-A(I)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),i=i!=null&&i;const a=n&&!i?this.ya():[],l=this.da.size===0&&this.current&&!i?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new gl(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new O0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new dA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new uA(r))}),n}ba(e){this.Ta=e.Ts,this.da=Pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return gl.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class SL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AL{constructor(e){this.key=e,this.va=!1}}class xL{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Pl(a=>xS(a),Df),this.Ma=new Map,this.xa=new Set,this.Oa=new Et(fe.comparator),this.Na=new Map,this.La=new pv,this.Ba={},this.ka=new Map,this.qa=ml.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kL(t,e,n=!0){const r=_A(t);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await hA(r,e,n,!0),i}async function CL(t,e){const n=_A(t);await hA(n,e,!0,!1)}async function hA(t,e,n,r){const i=await YD(t.localStore,yi(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await RL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&tA(t.remoteStore,i),a}async function RL(t,e,n,r,i){t.Ka=(p,g,y)=>async function(A,N,x,E){let b=N.view.ma(x);b.ns&&(b=await C0(A.localStore,N.query,!1).then(({documents:k})=>N.view.ma(k,b)));const j=E&&E.targetChanges.get(N.targetId),B=E&&E.targetMismatches.get(N.targetId)!=null,R=N.view.applyChanges(b,A.isPrimaryClient,j,B);return M0(A,N.targetId,R.wa),R.snapshot}(t,p,g,y);const s=await C0(t.localStore,e,!0),o=new IL(e,s.Ts),a=o.ma(s.documents),l=Mu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,l);M0(t,n,u.wa);const d=new SL(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function PL(t,e,n){const r=ye(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Df(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Pg(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_v(r.remoteStore,i.targetId),Og(r,i.targetId)}).catch(ju)):(Og(r,i.targetId),await Pg(r.localStore,i.targetId,!0))}async function NL(t,e){const n=ye(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_v(n.remoteStore,r.targetId))}async function OL(t,e,n){const r=$L(t);try{const i=await function(o,a){const l=ye(o),u=Vt.now(),d=a.reduce((y,I)=>y.add(I.key),Pe());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=ts(),A=Pe();return l.cs.getEntries(y,d).next(N=>{I=N,I.forEach((x,E)=>{E.isValidDocument()||(A=A.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,I)).next(N=>{p=N;const x=[];for(const E of a){const b=eD(E,p.get(E.key).overlayedDocument);b!=null&&x.push(new ua(E.key,b,yS(b.value.mapValue),wi.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,x,a)}).next(N=>{g=N;const x=N.applyToLocalDocumentSet(p,A);return l.documentOverlayCache.saveOverlays(y,N.batchId,x)})}).then(()=>({batchId:g.batchId,changes:RS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Et(Fe)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,n),await Fu(r,i.changes),await Bf(r.remoteStore)}catch(i){const s=Tv(i,"Failed to persist write");n.reject(s)}}async function fA(t,e){const n=ye(t);try{const r=await GD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Na.get(s);o&&(Ge(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Ge(o.va):i.removedDocuments.size>0&&(Ge(o.va),o.va=!1))}),await Fu(n,r,e)}catch(r){await ju(r)}}function L0(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let u=!1;l.queries.forEach((d,p)=>{for(const g of p.j_)g.Z_(a)&&(u=!0)}),u&&bv(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jL(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),s=i&&i.key;if(s){let o=new Et(fe.comparator);o=o.insert(s,un.newNoDocument(s,Ee.min()));const a=Pe().add(s),l=new Ff(Ee.min(),new Map,new Et(Fe),o,a);await fA(r,l),r.Oa=r.Oa.remove(s),r.Na.delete(e),Iv(r)}else await Pg(r.localStore,e,!1).then(()=>Og(r,e,n)).catch(ju)}async function DL(t,e){const n=ye(t),r=e.batch.batchId;try{const i=await KD(n.localStore,e);mA(n,r,null),pA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fu(n,i)}catch(i){await ju(i)}}async function LL(t,e,n){const r=ye(t);try{const i=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Ge(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);mA(r,e,n),pA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fu(r,i)}catch(i){await ju(i)}}function pA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function mA(t,e,n){const r=ye(t);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Og(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||gA(t,r)})}function gA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_v(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Iv(t))}function M0(t,e,n){for(const r of n)r instanceof uA?(t.La.addReference(r.key,e),ML(t,r)):r instanceof dA?(le("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||gA(t,r.key)):ve()}function ML(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(r),Iv(t))}function Iv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fe(it.fromString(e)),r=t.qa.next();t.Na.set(r,new AL(n)),t.Oa=t.Oa.insert(n,r),tA(t.remoteStore,new Ms(yi(lv(n.path)),r,"TargetPurposeLimboResolution",rv.oe))}}async function Fu(t,e,n){const r=ye(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){i.push(u);const p=gv.Wi(l.targetId,u);s.push(p)}}))}),await Promise.all(o),r.Ca.d_(i),await async function(l,u){const d=ye(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Q.forEach(u,g=>Q.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>Q.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!Du(p))throw p;le("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const y=d.os.get(g),I=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(g,A)}}}(r.localStore,s))}async function VL(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const r=await YS(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new ne(K.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fu(n,r.hs)}}function FL(t,e){const n=ye(t),r=n.Na.get(e);if(r&&r.va)return Pe().add(r.key);{let i=Pe();const s=n.Ma.get(e);if(!s)return i;for(const o of s){const a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function _A(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jL.bind(null,e),e.Ca.d_=TL.bind(null,e.eventManager),e.Ca.$a=bL.bind(null,e.eventManager),e}function $L(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LL.bind(null,e),e}class V0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=$f(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return WD(this.persistence,new qD,e.initialUser,this.serializer)}createPersistence(e){return new UD(mv.Zr,this.serializer)}createSharedClientState(e){return new ZD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class UL{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>L0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VL.bind(null,this.syncEngine),await yL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EL}()}createDatastore(e){const n=$f(e.databaseInfo.databaseId),r=function(s){return new rL(s)}(e.databaseInfo);return function(s,o,a,l){return new oL(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new lL(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>L0(this.syncEngine,n,0),function(){return P0.D()?new P0:new eL}())}createSyncEngine(e,n){return function(i,s,o,a,l,u,d){const p=new xL(i,s,o,a,l,u);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ye(i);le("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await Vu(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ln.UNAUTHENTICATED,this.clientId=gS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{le("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(le("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function sm(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await YS(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function F0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qL(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>N0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>N0(e.remoteStore,i)),t._onlineComponents=e}function zL(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function qL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await sm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!zL(n))throw n;ul("Error using user provided cache. Falling back to memory cache: "+n),await sm(t,new V0)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await sm(t,new V0);return t._offlineComponents}async function Sv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await F0(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await F0(t,new UL))),t._onlineComponents}function HL(t){return Sv(t).then(e=>e.syncEngine)}function WL(t){return Sv(t).then(e=>e.datastore)}async function yA(t){const e=await Sv(t),n=e.eventManager;return n.onListen=kL.bind(null,e.syncEngine),n.onUnlisten=PL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=NL.bind(null,e.syncEngine),n}function KL(t,e,n={}){const r=new vi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new vA({next:g=>{o.enqueueAndForget(()=>lA(s,p));const y=g.docs.has(a);!y&&g.fromCache?u.reject(new ne(K.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&l&&l.source==="server"?u.reject(new ne(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new cA(lv(a.path),d,{includeMetadataChanges:!0,_a:!0});return aA(s,p)}(await yA(t),t.asyncQueue,e,n,r)),r.promise}function GL(t,e,n={}){const r=new vi;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const d=new vA({next:g=>{o.enqueueAndForget(()=>lA(s,p)),g.fromCache&&l.source==="server"?u.reject(new ne(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new cA(a,d,{includeMetadataChanges:!0,_a:!0});return aA(s,p)}(await yA(t),t.asyncQueue,e,n,r)),r.promise}function QL(t,e,n){const r=new vi;return t.asyncQueue.enqueueAndForget(async()=>{try{const i=await WL(t);r.resolve(async function(o,a,l){var u;const d=ye(o),{request:p,ut:g,parent:y}=wD(d.serializer,$j(a),l);d.connection.Fo||delete p.parent;const I=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,p,1)).filter(N=>!!N.result);Ge(I.length===1);const A=(u=I[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(A).reduce((N,x)=>(N[g[x]]=A[x],N),{})}(i,e,n))}catch(i){r.reject(i)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e,n){if(!n)throw new ne(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JL(t,e,n,r){if(e===!0&&r===!0)throw new ne(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U0(t){if(!fe.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function B0(t){if(fe.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function ns(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(t);throw new ne(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ne(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lj;switch(r.type){case"firstParty":return new hj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$0.get(n);r&&(le("ComponentProvider","Removing Datastore"),$0.delete(n),r.terminate())}(this),Promise.resolve()}}function YL(t,e,n,r={}){var i;const s=(t=ns(t,qf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ln.MOCK_USER;else{a=SR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ne(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ln(u)}t._authCredentials=new cj(new mS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class Un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class Gs extends os{constructor(e,n,r){super(e,n,lv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new fe(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function $u(t,e,...n){if(t=Ht(t),EA("collection","path",e),t instanceof qf){const r=it.fromString(e,...n);return B0(r),new Gs(t,null,r)}{if(!(t instanceof Un||t instanceof Gs))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return B0(r),new Gs(t.firestore,null,r)}}function ei(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=gS.newId()),EA("doc","path",e),t instanceof qf){const r=it.fromString(e,...n);return U0(r),new Un(t,null,new fe(r))}{if(!(t instanceof Un||t instanceof Gs))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(it.fromString(e,...n));return U0(r),new Un(t.firestore,t instanceof Gs?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new ZS(this,"async_queue_retry"),this.Eu=()=>{const n=im();n&&le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=im();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=im();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new vi;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Du(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw es("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const i=Ev.createAndSchedule(this,e,n,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&ve()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Ol extends qf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new XL}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||TA(this),this._firestoreClient.terminate()}}function ZL(t,e){const n=W_(),r="(default)",i=aa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=bR("firestore");s&&YL(i,...s)}return i}function Hf(t){return t._firestoreClient||TA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function TA(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,u,d){return new Aj(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,wA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new BL(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class t2{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l(en.fromBase64String(e))}catch(n){throw new ne(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _l(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^__.*__$/;class r2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ua(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lu(e,this.data,n,this.fieldTransforms)}}function IA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class Cv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return nf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(IA(this.wu)&&n2.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class i2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$f(e)}Nu(e,n,r,i=!1){return new Cv({wu:e,methodName:n,Ou:r,path:Jt.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wf(t){const e=t._freezeSettings(),n=$f(t._databaseId);return new i2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SA(t,e,n,r,i,s={}){const o=t.Nu(s.merge||s.mergeFields?2:0,e,n,i);CA("Data must be an object, but it was:",o,r);const a=xA(r,o);let l,u;if(s.merge)l=new Kr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const g=s2(e,p,n);if(!o.contains(g))throw new ne(K.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);a2(d,g)||d.push(g)}l=new Kr(d),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new r2(new wr(a),l,u)}function AA(t,e,n,r=!1){return Rv(n,t.Nu(r?4:3,e))}function Rv(t,e){if(kA(t=Ht(t)))return CA("Unsupported field value:",e,t),xA(t,e);if(t instanceof bA)return function(r,i){if(!IA(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Rv(a,i.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Gj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Vt.fromDate(r);return{timestampValue:ef(i.serializer,s)}}if(r instanceof Vt){const s=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(i.serializer,s)}}if(r instanceof xv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _l)return{bytesValue:zS(i.serializer,r._byteString)};if(r instanceof Un){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return uv(a.serializer,l)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${zf(r)}`)}(t,e)}function xA(t,e){const n={};return _S(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rl(t,(r,i)=>{const s=Rv(i,e.bu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function kA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof xv||t instanceof _l||t instanceof Un||t instanceof bA||t instanceof kv)}function CA(t,e,n){if(!kA(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=zf(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function s2(t,e,n){if((e=Ht(e))instanceof Av)return e._internalPath;if(typeof e=="string")return RA(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const o2=new RegExp("[~\\*/\\[\\]]");function RA(t,e,n){if(e.search(o2)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Av(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ne(K.INVALID_ARGUMENT,a+t+l)}function a2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class l2 extends Pv{data(){return super.data()}}function Nv(t,e){return typeof e=="string"?RA(t,e):e instanceof Av?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ov{}class Kf extends Ov{}function u2(t,e,...n){let r=[];e instanceof Ov&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Dv).length,a=s.filter(l=>l instanceof jv).length;if(o>1||o>0&&a>0)throw new ne(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class jv extends Kf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new jv(e,n,r)}_apply(e){const n=this._parse(e);return PA(e._query,n),new os(e.firestore,e.converter,Ag(e._query,n))}_parse(e){const n=Wf(e.firestore);return function(s,o,a,l,u,d,p){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ne(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){H0(p,d);const y=[];for(const I of p)y.push(q0(l,s,I));g={arrayValue:{values:y}}}else g=q0(l,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||H0(p,d),g=AA(a,o,p,d==="in"||d==="not-in");return Pt.create(u,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Dv extends Ov{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)PA(o,l),o=Ag(o,l)}(e._query,n),new os(e.firestore,e.converter,Ag(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lv extends Kf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lv(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(s,o)}(e._query,this._field,this._direction);return new os(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ca(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function d2(t,e="asc"){const n=e,r=Nv("orderBy",t);return Lv._create(r,n)}class Mv extends Kf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Mv(e,n,r)}_apply(e){return new os(e.firestore,e.converter,Yh(e._query,this._limit,this._limitType))}}function h2(t){return Mv._create("limit",t,"F")}class Vv extends Kf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vv(e,n,r)}_apply(e){const n=p2(e,this.type,this._docOrFields,this._inclusive);return new os(e.firestore,e.converter,function(i,s){return new ca(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function f2(...t){return Vv._create("startAfter",t,!1)}function p2(t,e,n,r){if(n[0]=Ht(n[0]),n[0]instanceof Pv)return function(s,o,a,l,u){if(!l)throw new ne(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const p of tl(s))if(p.field.isKeyField())d.push(Jh(o,l.key));else{const g=l.data.field(p.field);if(jf(g))throw new ne(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const y=p.field.canonicalString();throw new ne(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(g)}return new pl(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Wf(t.firestore);return function(o,a,l,u,d,p){const g=o.explicitOrderBy;if(d.length>g.length)throw new ne(K.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let I=0;I<d.length;I++){const A=d[I];if(g[I].field.isKeyField()){if(typeof A!="string")throw new ne(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof A}`);if(!cv(o)&&A.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${A}' contains a slash.`);const N=o.path.child(it.fromString(A));if(!fe.isDocumentKey(N))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const x=new fe(N);y.push(Jh(a,x))}else{const N=AA(l,u,A);y.push(N)}}return new pl(y,p)}(t._query,t.firestore._databaseId,i,e,n,r)}}function q0(t,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new ne(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cv(e)&&n.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(it.fromString(n));if(!fe.isDocumentKey(r))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jh(t,new fe(r))}if(n instanceof Un)return Jh(t,n._key);throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(n)}.`)}function H0(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PA(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class m2{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rl(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>St(o.doubleValue));return new kv(s)}convertGeoPoint(e){return new xv(St(e.latitude),St(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=iv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const n=Xs(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=it.fromString(e);Ge(JS(r));const i=new mu(r.get(1),r.get(3)),s=new fe(r.popFirst(5));return i.isEqual(n)||es(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function g2(){return new e2("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class OA extends Pv{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class mh extends OA{data(e={}){return super.data(e)}}class _2{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new bc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new mh(this._firestore,this._userDataWriter,r.key,r,new bc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new mh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new mh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:v2(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function v2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){t=ns(t,Un);const e=ns(t.firestore,Ol);return KL(Hf(e),t._key).then(n=>w2(e,t,n))}class Fv extends m2{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,n)}}function jA(t){t=ns(t,os);const e=ns(t.firestore,Ol),n=Hf(e),r=new Fv(e);return c2(t._query),GL(n,t._query).then(i=>new _2(e,r,t,i))}function y2(t,e,n){t=ns(t,Un);const r=ns(t.firestore,Ol),i=NA(t.converter,e);return DA(r,[SA(Wf(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,wi.none())])}function $v(t,e){const n=ns(t.firestore,Ol),r=ei(t),i=NA(t.converter,e);return DA(n,[SA(Wf(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,wi.exists(!1))]).then(()=>r)}function DA(t,e){return function(r,i){const s=new vi;return r.asyncQueue.enqueueAndForget(async()=>OL(await HL(r),i,s)),s.promise}(Hf(t),e)}function w2(t,e,n){const r=n.docs.get(e._key),i=new Fv(t);return new OA(t,i,e._key,r,new bc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t){return T2(t,{count:g2()})}function T2(t,e){const n=ns(t.firestore,Ol),r=Hf(n),i=Ij(e,(s,o)=>new iD(o,s.aggregateType,s._internalFieldPath));return QL(r,t._query,i).then(s=>function(a,l,u){const d=new Fv(a);return new t2(l,d,u)}(n,t,s))}(function(e,n=!0){(function(i){Cl=i})(xl),bi(new Yr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ol(new uj(r.getProvider("auth-internal")),new pj(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ne(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),br(l0,"4.7.1",e),br(l0,"4.7.1","esm2017")})();const LA="@firebase/installations",Uv="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=1e4,VA=`w:${Uv}`,FA="FIS_v2",b2="https://firebaseinstallations.googleapis.com/v1",I2=60*60*1e3,S2="installations",A2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xo=new oa(S2,A2,x2);function $A(t){return t instanceof ti&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA({projectId:t}){return`${b2}/projects/${t}/installations`}function BA(t){return{token:t.token,requestStatus:2,expiresIn:C2(t.expiresIn),creationTime:Date.now()}}async function zA(t,e){const r=(await e.json()).error;return Xo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function qA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function k2(t,{refreshToken:e}){const n=qA(t);return n.append("Authorization",R2(e)),n}async function HA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function C2(t){return Number(t.replace("s","000"))}function R2(t){return`${FA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=UA(t),i=qA(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:FA,appId:t.appId,sdkVersion:VA},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await HA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:BA(u.authToken)}}else throw await zA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O2=/^[cdef][\w-]{21}$/,jg="";function j2(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=D2(t);return O2.test(n)?n:jg}catch{return jg}}function D2(t){return N2(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new Map;function GA(t,e){const n=Gf(t);QA(n,e),L2(n,e)}function QA(t,e){const n=KA.get(t);if(n)for(const r of n)r(e)}function L2(t,e){const n=M2();n&&n.postMessage({key:t,fid:e}),V2()}let Do=null;function M2(){return!Do&&"BroadcastChannel"in self&&(Do=new BroadcastChannel("[Firebase] FID Change"),Do.onmessage=t=>{QA(t.data.key,t.data.fid)}),Do}function V2(){KA.size===0&&Do&&(Do.close(),Do=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="firebase-installations-database",$2=1,Zo="firebase-installations-store";let om=null;function Bv(){return om||(om=bI(F2,$2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zo)}}})),om}async function rf(t,e){const n=Gf(t),i=(await Bv()).transaction(Zo,"readwrite"),s=i.objectStore(Zo),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&GA(t,e.fid),e}async function JA(t){const e=Gf(t),r=(await Bv()).transaction(Zo,"readwrite");await r.objectStore(Zo).delete(e),await r.done}async function Qf(t,e){const n=Gf(t),i=(await Bv()).transaction(Zo,"readwrite"),s=i.objectStore(Zo),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&GA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zv(t){let e;const n=await Qf(t.appConfig,r=>{const i=U2(r),s=B2(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===jg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function U2(t){const e=t||{fid:j2(),registrationStatus:0};return YA(e)}function B2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Xo.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=z2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:q2(t)}:{installationEntry:e}}async function z2(t,e){try{const n=await P2(t,e);return rf(t.appConfig,n)}catch(n){throw $A(n)&&n.customData.serverCode===409?await JA(t.appConfig):await rf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function q2(t){let e=await W0(t.appConfig);for(;e.registrationStatus===1;)await WA(100),e=await W0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await zv(t);return r||n}return e}function W0(t){return Qf(t,e=>{if(!e)throw Xo.create("installation-not-found");return YA(e)})}function YA(t){return H2(t)?{fid:t.fid,registrationStatus:0}:t}function H2(t){return t.registrationStatus===1&&t.registrationTime+MA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2({appConfig:t,heartbeatServiceProvider:e},n){const r=K2(t,n),i=k2(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:VA,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await HA(()=>fetch(r,a));if(l.ok){const u=await l.json();return BA(u)}else throw await zA("Generate Auth Token",l)}function K2(t,{fid:e}){return`${UA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qv(t,e=!1){let n;const r=await Qf(t.appConfig,s=>{if(!XA(s))throw Xo.create("not-registered");const o=s.authToken;if(!e&&J2(o))return s;if(o.requestStatus===1)return n=G2(t,e),s;{if(!navigator.onLine)throw Xo.create("app-offline");const a=X2(s);return n=Q2(t,a),a}});return n?await n:r.authToken}async function G2(t,e){let n=await K0(t.appConfig);for(;n.authToken.requestStatus===1;)await WA(100),n=await K0(t.appConfig);const r=n.authToken;return r.requestStatus===0?qv(t,e):r}function K0(t){return Qf(t,e=>{if(!XA(e))throw Xo.create("not-registered");const n=e.authToken;return Z2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Q2(t,e){try{const n=await W2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await rf(t.appConfig,r),n}catch(n){if($A(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await JA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await rf(t.appConfig,r)}throw n}}function XA(t){return t!==void 0&&t.registrationStatus===2}function J2(t){return t.requestStatus===2&&!Y2(t)}function Y2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+I2}function X2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Z2(t){return t.requestStatus===1&&t.requestTime+MA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t){const e=t,{installationEntry:n,registrationPromise:r}=await zv(e);return r?r.catch(console.error):qv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e=!1){const n=t;return await nM(n),(await qv(n,e)).token}async function nM(t){const{registrationPromise:e}=await zv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t){if(!t||!t.options)throw am("App Configuration");if(!t.name)throw am("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw am(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function am(t){return Xo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="installations",iM="installations-internal",sM=t=>{const e=t.getProvider("app").getImmediate(),n=rM(e),r=aa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},oM=t=>{const e=t.getProvider("app").getImmediate(),n=aa(e,ZA).getImmediate();return{getId:()=>eM(n),getToken:i=>tM(n,i)}};function aM(){bi(new Yr(ZA,sM,"PUBLIC")),bi(new Yr(iM,oM,"PRIVATE"))}aM();br(LA,Uv);br(LA,Uv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="analytics",lM="firebase_id",cM="origin",uM=60*1e3,dM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Cf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},er=new oa("analytics","Analytics",hM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t){if(!t.startsWith(Hv)){const e=er.create("invalid-gtag-resource",{gtagURL:t});return Bn.warn(e.message),""}return t}function ex(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function pM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function mM(t,e){const n=pM("firebase-js-sdk-policy",{createScriptURL:fM}),r=document.createElement("script"),i=`${Hv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function gM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _M(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await ex(n)).find(u=>u.measurementId===i);l&&await e[l.appId]}}catch(a){Bn.error(a)}t("config",i,s)}async function vM(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await ex(n);for(const l of o){const u=a.find(p=>p.measurementId===l),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Bn.error(s)}}function yM(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await vM(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await _M(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Bn.error(a)}}return i}function wM(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=yM(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function EM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Hv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TM=30,bM=1e3;class IM{constructor(e={},n=bM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const tx=new IM;function SM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function AM(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:SM(r)},s=dM.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function xM(t,e=tx,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw er.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw er.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new RM;return setTimeout(async()=>{a.abort()},uM),nx({appId:r,apiKey:i,measurementId:s},o,a,e)}async function nx(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=tx){var s;const{appId:o,measurementId:a}=t;try{await kM(r,e)}catch(l){if(a)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await AM(t);return i.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!CM(u)){if(i.deleteThrottleMetadata(o),a)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const d=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?Ow(n,i.intervalMillis,TM):Ow(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return i.setThrottleMetadata(o,p),Bn.debug(`Calling attemptFetch again in ${d} millis`),nx(t,p,r,i)}}function kM(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(er.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function CM(t){if(!(t instanceof ti)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class RM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function PM(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NM(){if(yI())try{await wI()}catch(t){return Bn.warn(er.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Bn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function OM(t,e,n,r,i,s,o){var a;const l=xM(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Bn.error(y)),e.push(l);const u=NM().then(y=>{if(y)return r.getId()}),[d,p]=await Promise.all([l,u]);EM(s)||mM(s,d.measurementId),i("js",new Date);const g=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return g[cM]="firebase",g.update=!0,p!=null&&(g[lM]=p),i("config",d.measurementId,g),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jM{constructor(e){this.app=e}_delete(){return delete Fc[this.app.options.appId],Promise.resolve()}}let Fc={},G0=[];const Q0={};let lm="dataLayer",DM="gtag",J0,rx,Y0=!1;function LM(){const t=[];if(vI()&&t.push("This is a browser extension environment."),PR()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=er.create("invalid-analytics-context",{errorInfo:e});Bn.warn(n.message)}}function MM(t,e,n){LM();const r=t.options.appId;if(!r)throw er.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw er.create("no-api-key");if(Fc[r]!=null)throw er.create("already-exists",{id:r});if(!Y0){gM(lm);const{wrappedGtag:s,gtagCore:o}=wM(Fc,G0,Q0,lm,DM);rx=s,J0=o,Y0=!0}return Fc[r]=OM(t,G0,Q0,e,J0,lm,n),new jM(t)}function VM(t=W_()){t=Ht(t);const e=aa(t,sf);return e.isInitialized()?e.getImmediate():FM(t)}function FM(t,e={}){const n=aa(t,sf);if(n.isInitialized()){const i=n.getImmediate();if(cu(e,n.getOptions()))return i;throw er.create("already-initialized")}return n.initialize({options:e})}function $M(t,e,n,r){t=Ht(t),PM(rx,Fc[t.app.options.appId],e,n,r).catch(i=>Bn.error(i))}const X0="@firebase/analytics",Z0="0.10.7";function UM(){bi(new Yr(sf,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return MM(r,i,n)},"PUBLIC")),bi(new Yr("analytics-internal",t,"PRIVATE")),br(X0,Z0),br(X0,Z0,"esm2017");function t(e){try{const n=e.getProvider(sf).getImmediate();return{logEvent:(r,i,s)=>$M(n,r,i,s)}}catch(n){throw er.create("interop-component-reg-failed",{reason:n})}}}UM();const BM={apiKey:"AIzaSyDR27NVCQmVwVNZfNXVGpLKSsJj8f2Filg",authDomain:"darelom-students.firebaseapp.com",projectId:"darelom-students",storageBucket:"darelom-students.appspot.com",messagingSenderId:"993473208393",appId:"1:993473208393:web:294652795108cc161c5f98",measurementId:"G-1K85RQXZQ1"},zM=II(BM),An=ZL(),Uu=ij();VM(zM);/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _t(){return _t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_t.apply(this,arguments)}var Ct;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ct||(Ct={}));const eE="popstate";function qM(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=as(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wu("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof s=="string"?s:ta(s))}function r(i,s){ea(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return WM(e,n,r,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ea(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HM(){return Math.random().toString(36).substr(2,8)}function tE(t,e){return{usr:t.state,key:t.key,idx:e}}function wu(t,e,n,r){return n===void 0&&(n=null),_t({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?as(e):e,{state:n,key:e&&e.key||r||HM()})}function ta(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function as(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WM(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ct.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(_t({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function p(){a=Ct.Pop;let N=d(),x=N==null?null:N-u;u=N,l&&l({action:a,location:A.location,delta:x})}function g(N,x){a=Ct.Push;let E=wu(A.location,N,x);n&&n(E,N),u=d()+1;let b=tE(E,u),j=A.createHref(E);try{o.pushState(b,"",j)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(j)}s&&l&&l({action:a,location:A.location,delta:1})}function y(N,x){a=Ct.Replace;let E=wu(A.location,N,x);n&&n(E,N),u=d();let b=tE(E,u),j=A.createHref(E);o.replaceState(b,"",j),s&&l&&l({action:a,location:A.location,delta:0})}function I(N){let x=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof N=="string"?N:ta(N);return E=E.replace(/ $/,"%20"),Se(x,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,x)}let A={get action(){return a},get location(){return t(i,o)},listen(N){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(eE,p),l=N,()=>{i.removeEventListener(eE,p),l=null}},createHref(N){return e(i,N)},createURL:I,encodeLocation(N){let x=I(N);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:y,go(N){return o.go(N)}};return A}var Ke;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ke||(Ke={}));const KM=new Set(["lazy","caseSensitive","path","id","index","children"]);function GM(t){return t.index===!0}function Eu(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,String(s)],a=typeof i.id=="string"?i.id:o.join("-");if(Se(i.index!==!0||!i.children,"Cannot specify children on an index route"),Se(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),GM(i)){let l=_t({},i,e(i),{id:a});return r[a]=l,l}else{let l=_t({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=Eu(i.children,e,o,r)),l}})}function Co(t,e,n){return n===void 0&&(n="/"),gh(t,e,n,!1)}function gh(t,e,n,r){let i=typeof e=="string"?as(e):e,s=jl(i.pathname||"/",n);if(s==null)return null;let o=ix(t);JM(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=aV(s);a=sV(o[l],u,r)}return a}function QM(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function ix(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Se(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ki([r,l.relativePath]),d=n.concat(l);s.children&&s.children.length>0&&(Se(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),ix(s.children,e,d,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:rV(u,s.index),routesMeta:d})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of sx(s.path))i(s,o,l)}),e}function sx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=sx(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:iV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YM=/^:[\w-]+$/,XM=3,ZM=2,eV=1,tV=10,nV=-2,nE=t=>t==="*";function rV(t,e){let n=t.split("/"),r=n.length;return n.some(nE)&&(r+=nV),e&&(r+=ZM),n.filter(i=>!nE(i)).reduce((i,s)=>i+(YM.test(s)?XM:s===""?eV:tV),r)}function iV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function sV(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=s==="/"?e:e.slice(s.length)||"/",p=rE({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),g=l.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=rE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Ki([s,p.pathname]),pathnameBase:uV(Ki([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Ki([s,p.pathnameBase]))}return o}function rE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oV(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,d,p)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let A=a[p]||"";o=s.slice(0,s.length-A.length).replace(/(.)\/+$/,"$1")}const I=a[p];return y&&!I?u[g]=void 0:u[g]=(I||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function oV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ea(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function aV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ea(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function jl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function lV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?as(t):t;return{pathname:n?n.startsWith("/")?n:cV(n,e):e,search:dV(r),hash:hV(i)}}function cV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function cm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ox(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jf(t,e){let n=ox(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yf(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=as(t):(i=_t({},t),Se(!i.pathname||!i.pathname.includes("?"),cm("?","pathname","search",i)),Se(!i.pathname||!i.pathname.includes("#"),cm("#","pathname","hash",i)),Se(!i.search||!i.search.includes("#"),cm("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}a=p>=0?e[p]:"/"}let l=lV(i,a),u=o&&o!=="/"&&o.endsWith("/"),d=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Ki=t=>t.join("/").replace(/\/\/+/g,"/"),uV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class of{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Xf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ax=["post","put","patch","delete"],fV=new Set(ax),pV=["get",...ax],mV=new Set(pV),gV=new Set([301,302,303,307,308]),_V=new Set([307,308]),um={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},uc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Wv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yV=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),lx="remix-router-transitions";function wV(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Se(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;i=$=>({hasErrorBoundary:L($)})}else i=yV;let s={},o=Eu(t.routes,i,void 0,s),a,l=t.basename||"/",u=t.unstable_dataStrategy||SV,d=t.unstable_patchRoutesOnMiss,p=_t({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),g=null,y=new Set,I=null,A=null,N=null,x=t.hydrationData!=null,E=Co(o,t.history.location,l),b=null;if(E==null&&!d){let L=En(404,{pathname:t.history.location.pathname}),{matches:$,route:z}=fE(o);E=$,b={[z.id]:L}}E&&!t.hydrationData&&hr(E,o,t.history.location.pathname).active&&(E=null);let j;if(E)if(E.some(L=>L.route.lazy))j=!1;else if(!E.some(L=>L.route.loader))j=!0;else if(p.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,$=t.hydrationData?t.hydrationData.errors:null,z=W=>W.route.loader?typeof W.route.loader=="function"&&W.route.loader.hydrate===!0?!1:L&&L[W.route.id]!==void 0||$&&$[W.route.id]!==void 0:!0;if($){let W=E.findIndex(te=>$[te.route.id]!==void 0);j=E.slice(0,W+1).every(z)}else j=E.every(z)}else j=t.hydrationData!=null;else if(j=!1,E=[],p.v7_partialHydration){let L=hr(null,o,t.history.location.pathname);L.active&&L.matches&&(E=L.matches)}let B,R={historyAction:t.history.action,location:t.history.location,matches:E,initialized:j,navigation:um,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},k=Ct.Pop,w=!1,S,C=!1,O=new Map,V=null,P=!1,ge=!1,Qe=[],Je=new Set,we=new Map,X=0,ae=-1,de=new Map,Ae=new Set,Te=new Map,H=new Map,$e=new Set,qe=new Map,Ye=new Map,tt=new Map,Nt=!1;function Ot(){if(g=t.history.listen(L=>{let{action:$,location:z,delta:W}=L;if(Nt){Nt=!1;return}ea(Ye.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=uo({currentLocation:R.location,nextLocation:z,historyAction:$});if(te&&W!=null){Nt=!0,t.history.go(W*-1),Ci(te,{state:"blocked",location:z,proceed(){Ci(te,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),t.history.go(W)},reset(){let se=new Map(R.blockers);se.set(te,uc),nt({blockers:se})}});return}return jt($,z)}),n){VV(e,O);let L=()=>FV(e,O);e.addEventListener("pagehide",L),V=()=>e.removeEventListener("pagehide",L)}return R.initialized||jt(Ct.Pop,R.location,{initialHydration:!0}),B}function cr(){g&&g(),V&&V(),y.clear(),S&&S.abort(),R.fetchers.forEach((L,$)=>qn($)),R.blockers.forEach((L,$)=>cs($))}function ie(L){return y.add(L),()=>y.delete(L)}function nt(L,$){$===void 0&&($={}),R=_t({},R,L);let z=[],W=[];p.v7_fetcherPersist&&R.fetchers.forEach((te,se)=>{te.state==="idle"&&($e.has(se)?W.push(se):z.push(se))}),[...y].forEach(te=>te(R,{deletedFetchers:W,unstable_viewTransitionOpts:$.viewTransitionOpts,unstable_flushSync:$.flushSync===!0})),p.v7_fetcherPersist&&(z.forEach(te=>R.fetchers.delete(te)),W.forEach(te=>qn(te)))}function tn(L,$,z){var W,te;let{flushSync:se}=z===void 0?{}:z,he=R.actionData!=null&&R.navigation.formMethod!=null&&qr(R.navigation.formMethod)&&R.navigation.state==="loading"&&((W=L.state)==null?void 0:W._isRedirect)!==!0,Y;$.actionData?Object.keys($.actionData).length>0?Y=$.actionData:Y=null:he?Y=R.actionData:Y=null;let _e=$.loaderData?dE(R.loaderData,$.loaderData,$.matches||[],$.errors):R.loaderData,ce=R.blockers;ce.size>0&&(ce=new Map(ce),ce.forEach((ke,Me)=>ce.set(Me,uc)));let ue=w===!0||R.navigation.formMethod!=null&&qr(R.navigation.formMethod)&&((te=L.state)==null?void 0:te._isRedirect)!==!0;a&&(o=a,a=void 0),P||k===Ct.Pop||(k===Ct.Push?t.history.push(L,L.state):k===Ct.Replace&&t.history.replace(L,L.state));let xe;if(k===Ct.Pop){let ke=O.get(R.location.pathname);ke&&ke.has(L.pathname)?xe={currentLocation:R.location,nextLocation:L}:O.has(L.pathname)&&(xe={currentLocation:L,nextLocation:R.location})}else if(C){let ke=O.get(R.location.pathname);ke?ke.add(L.pathname):(ke=new Set([L.pathname]),O.set(R.location.pathname,ke)),xe={currentLocation:R.location,nextLocation:L}}nt(_t({},$,{actionData:Y,loaderData:_e,historyAction:k,location:L,initialized:!0,navigation:um,revalidation:"idle",restoreScrollPosition:ho(L,$.matches||R.matches),preventScrollReset:ue,blockers:ce}),{viewTransitionOpts:xe,flushSync:se===!0}),k=Ct.Pop,w=!1,C=!1,P=!1,ge=!1,Qe=[]}async function ni(L,$){if(typeof L=="number"){t.history.go(L);return}let z=Dg(R.location,R.matches,l,p.v7_prependBasename,L,p.v7_relativeSplatPath,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:W,submission:te,error:se}=iE(p.v7_normalizeFormMethod,!1,z,$),he=R.location,Y=wu(R.location,W,$&&$.state);Y=_t({},Y,t.history.encodeLocation(Y));let _e=$&&$.replace!=null?$.replace:void 0,ce=Ct.Push;_e===!0?ce=Ct.Replace:_e===!1||te!=null&&qr(te.formMethod)&&te.formAction===R.location.pathname+R.location.search&&(ce=Ct.Replace);let ue=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,xe=($&&$.unstable_flushSync)===!0,ke=uo({currentLocation:he,nextLocation:Y,historyAction:ce});if(ke){Ci(ke,{state:"blocked",location:Y,proceed(){Ci(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),ni(L,$)},reset(){let Me=new Map(R.blockers);Me.set(ke,uc),nt({blockers:Me})}});return}return await jt(ce,Y,{submission:te,pendingError:se,preventScrollReset:ue,replace:$&&$.replace,enableViewTransition:$&&$.unstable_viewTransition,flushSync:xe})}function xi(){if(Xe(),nt({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){jt(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}jt(k||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation})}}async function jt(L,$,z){S&&S.abort(),S=null,k=L,P=(z&&z.startUninterruptedRevalidation)===!0,ds(R.location,R.matches),w=(z&&z.preventScrollReset)===!0,C=(z&&z.enableViewTransition)===!0;let W=a||o,te=z&&z.overrideNavigation,se=Co(W,$,l),he=(z&&z.flushSync)===!0,Y=hr(se,W,$.pathname);if(Y.active&&Y.matches&&(se=Y.matches),!se){let{error:be,notFoundMatches:at,route:lt}=Rr($.pathname);tn($,{matches:at,loaderData:{},errors:{[lt.id]:be}},{flushSync:he});return}if(R.initialized&&!ge&&PV(R.location,$)&&!(z&&z.submission&&qr(z.submission.formMethod))){tn($,{matches:se},{flushSync:he});return}S=new AbortController;let _e=ba(t.history,$,S.signal,z&&z.submission),ce;if(z&&z.pendingError)ce=[Ha(se).route.id,{type:Ke.error,error:z.pendingError}];else if(z&&z.submission&&qr(z.submission.formMethod)){let be=await ki(_e,$,z.submission,se,Y.active,{replace:z.replace,flushSync:he});if(be.shortCircuited)return;if(be.pendingActionResult){let[at,lt]=be.pendingActionResult;if(Jn(lt)&&Xf(lt.error)&&lt.error.status===404){S=null,tn($,{matches:be.matches,loaderData:{},errors:{[at]:lt.error}});return}}se=be.matches||se,ce=be.pendingActionResult,te=dm($,z.submission),he=!1,Y.active=!1,_e=ba(t.history,_e.url,_e.signal)}let{shortCircuited:ue,matches:xe,loaderData:ke,errors:Me}=await xr(_e,$,se,Y.active,te,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,he,ce);ue||(S=null,tn($,_t({matches:xe||se},hE(ce),{loaderData:ke,errors:Me})))}async function ki(L,$,z,W,te,se){se===void 0&&(se={}),Xe();let he=LV($,z);if(nt({navigation:he},{flushSync:se.flushSync===!0}),te){let ce=await Ri(W,$.pathname,L.signal);if(ce.type==="aborted")return{shortCircuited:!0};if(ce.type==="error"){let{boundaryId:ue,error:xe}=Pr($.pathname,ce);return{matches:ce.partialMatches,pendingActionResult:[ue,{type:Ke.error,error:xe}]}}else if(ce.matches)W=ce.matches;else{let{notFoundMatches:ue,error:xe,route:ke}=Rr($.pathname);return{matches:ue,pendingActionResult:[ke.id,{type:Ke.error,error:xe}]}}}let Y,_e=Ic(W,$);if(!_e.route.action&&!_e.route.lazy)Y={type:Ke.error,error:En(405,{method:L.method,pathname:$.pathname,routeId:_e.route.id})};else if(Y=(await zn("action",L,[_e],W))[0],L.signal.aborted)return{shortCircuited:!0};if(Mo(Y)){let ce;return se&&se.replace!=null?ce=se.replace:ce=lE(Y.response.headers.get("Location"),new URL(L.url),l)===R.location.pathname+R.location.search,await mn(L,Y,{submission:z,replace:ce}),{shortCircuited:!0}}if(Lo(Y))throw En(400,{type:"defer-action"});if(Jn(Y)){let ce=Ha(W,_e.route.id);return(se&&se.replace)!==!0&&(k=Ct.Push),{matches:W,pendingActionResult:[ce.route.id,Y]}}return{matches:W,pendingActionResult:[_e.route.id,Y]}}async function xr(L,$,z,W,te,se,he,Y,_e,ce,ue){let xe=te||dm($,se),ke=se||he||_E(xe),Me=!P&&(!p.v7_partialHydration||!_e);if(W){if(Me){let Ze=Rn(ue);nt(_t({navigation:xe},Ze!==void 0?{actionData:Ze}:{}),{flushSync:ce})}let pe=await Ri(z,$.pathname,L.signal);if(pe.type==="aborted")return{shortCircuited:!0};if(pe.type==="error"){let{boundaryId:Ze,error:bt}=Pr($.pathname,pe);return{matches:pe.partialMatches,loaderData:{},errors:{[Ze]:bt}}}else if(pe.matches)z=pe.matches;else{let{error:Ze,notFoundMatches:bt,route:Ue}=Rr($.pathname);return{matches:bt,loaderData:{},errors:{[Ue.id]:Ze}}}}let be=a||o,[at,lt]=sE(t.history,R,z,ke,$,p.v7_partialHydration&&_e===!0,p.v7_skipActionErrorRevalidation,ge,Qe,Je,$e,Te,Ae,be,l,ue);if(ur(pe=>!(z&&z.some(Ze=>Ze.route.id===pe))||at&&at.some(Ze=>Ze.route.id===pe)),ae=++X,at.length===0&&lt.length===0){let pe=ii();return tn($,_t({matches:z,loaderData:{},errors:ue&&Jn(ue[1])?{[ue[0]]:ue[1].error}:null},hE(ue),pe?{fetchers:new Map(R.fetchers)}:{}),{flushSync:ce}),{shortCircuited:!0}}if(Me){let pe={};if(!W){pe.navigation=xe;let Ze=Rn(ue);Ze!==void 0&&(pe.actionData=Ze)}lt.length>0&&(pe.fetchers=pn(lt)),nt(pe,{flushSync:ce})}lt.forEach(pe=>{we.has(pe.key)&&nn(pe.key),pe.controller&&we.set(pe.key,pe.controller)});let Nr=()=>lt.forEach(pe=>nn(pe.key));S&&S.signal.addEventListener("abort",Nr);let{loaderResults:fr,fetcherResults:Hn}=await ht(R.matches,z,at,lt,L);if(L.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",Nr),lt.forEach(pe=>we.delete(pe.key));let Or=pE([...fr,...Hn]);if(Or){if(Or.idx>=at.length){let pe=lt[Or.idx-at.length].key;Ae.add(pe)}return await mn(L,Or.result,{replace:Y}),{shortCircuited:!0}}let{loaderData:pr,errors:Dt}=uE(R,z,at,fr,ue,lt,Hn,qe);qe.forEach((pe,Ze)=>{pe.subscribe(bt=>{(bt||pe.done)&&qe.delete(Ze)})}),p.v7_partialHydration&&_e&&R.errors&&Object.entries(R.errors).filter(pe=>{let[Ze]=pe;return!at.some(bt=>bt.route.id===Ze)}).forEach(pe=>{let[Ze,bt]=pe;Dt=Object.assign(Dt||{},{[Ze]:bt})});let _n=ii(),oi=pa(ae),Wn=_n||oi||lt.length>0;return _t({matches:z,loaderData:pr,errors:Dt},Wn?{fetchers:new Map(R.fetchers)}:{})}function Rn(L){if(L&&!Jn(L[1]))return{[L[0]]:L[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function pn(L){return L.forEach($=>{let z=R.fetchers.get($.key),W=dc(void 0,z?z.data:void 0);R.fetchers.set($.key,W)}),new Map(R.fetchers)}function kr(L,$,z,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");we.has(L)&&nn(L);let te=(W&&W.unstable_flushSync)===!0,se=a||o,he=Dg(R.location,R.matches,l,p.v7_prependBasename,z,p.v7_relativeSplatPath,$,W==null?void 0:W.relative),Y=Co(se,he,l),_e=hr(Y,se,he);if(_e.active&&_e.matches&&(Y=_e.matches),!Y){gn(L,$,En(404,{pathname:he}),{flushSync:te});return}let{path:ce,submission:ue,error:xe}=iE(p.v7_normalizeFormMethod,!0,he,W);if(xe){gn(L,$,xe,{flushSync:te});return}let ke=Ic(Y,ce);if(w=(W&&W.preventScrollReset)===!0,ue&&qr(ue.formMethod)){ls(L,$,ce,ke,Y,_e.active,te,ue);return}Te.set(L,{routeId:$,path:ce}),ri(L,$,ce,ke,Y,_e.active,te,ue)}async function ls(L,$,z,W,te,se,he,Y){Xe(),Te.delete(L);function _e(Ue){if(!Ue.route.action&&!Ue.route.lazy){let vn=En(405,{method:Y.formMethod,pathname:z,routeId:$});return gn(L,$,vn,{flushSync:he}),!0}return!1}if(!se&&_e(W))return;let ce=R.fetchers.get(L);ot(L,MV(Y,ce),{flushSync:he});let ue=new AbortController,xe=ba(t.history,z,ue.signal,Y);if(se){let Ue=await Ri(te,z,xe.signal);if(Ue.type==="aborted")return;if(Ue.type==="error"){let{error:vn}=Pr(z,Ue);gn(L,$,vn,{flushSync:he});return}else if(Ue.matches){if(te=Ue.matches,W=Ic(te,z),_e(W))return}else{gn(L,$,En(404,{pathname:z}),{flushSync:he});return}}we.set(L,ue);let ke=X,be=(await zn("action",xe,[W],te))[0];if(xe.signal.aborted){we.get(L)===ue&&we.delete(L);return}if(p.v7_fetcherPersist&&$e.has(L)){if(Mo(be)||Jn(be)){ot(L,Ts(void 0));return}}else{if(Mo(be))if(we.delete(L),ae>ke){ot(L,Ts(void 0));return}else return Ae.add(L),ot(L,dc(Y)),mn(xe,be,{fetcherSubmission:Y});if(Jn(be)){gn(L,$,be.error);return}}if(Lo(be))throw En(400,{type:"defer-action"});let at=R.navigation.location||R.location,lt=ba(t.history,at,ue.signal),Nr=a||o,fr=R.navigation.state!=="idle"?Co(Nr,R.navigation.location,l):R.matches;Se(fr,"Didn't find any matches after fetcher action");let Hn=++X;de.set(L,Hn);let Or=dc(Y,be.data);R.fetchers.set(L,Or);let[pr,Dt]=sE(t.history,R,fr,Y,at,!1,p.v7_skipActionErrorRevalidation,ge,Qe,Je,$e,Te,Ae,Nr,l,[W.route.id,be]);Dt.filter(Ue=>Ue.key!==L).forEach(Ue=>{let vn=Ue.key,fo=R.fetchers.get(vn),ma=dc(void 0,fo?fo.data:void 0);R.fetchers.set(vn,ma),we.has(vn)&&nn(vn),Ue.controller&&we.set(vn,Ue.controller)}),nt({fetchers:new Map(R.fetchers)});let _n=()=>Dt.forEach(Ue=>nn(Ue.key));ue.signal.addEventListener("abort",_n);let{loaderResults:oi,fetcherResults:Wn}=await ht(R.matches,fr,pr,Dt,lt);if(ue.signal.aborted)return;ue.signal.removeEventListener("abort",_n),de.delete(L),we.delete(L),Dt.forEach(Ue=>we.delete(Ue.key));let pe=pE([...oi,...Wn]);if(pe){if(pe.idx>=pr.length){let Ue=Dt[pe.idx-pr.length].key;Ae.add(Ue)}return mn(lt,pe.result)}let{loaderData:Ze,errors:bt}=uE(R,R.matches,pr,oi,void 0,Dt,Wn,qe);if(R.fetchers.has(L)){let Ue=Ts(be.data);R.fetchers.set(L,Ue)}pa(Hn),R.navigation.state==="loading"&&Hn>ae?(Se(k,"Expected pending action"),S&&S.abort(),tn(R.navigation.location,{matches:fr,loaderData:Ze,errors:bt,fetchers:new Map(R.fetchers)})):(nt({errors:bt,loaderData:dE(R.loaderData,Ze,fr,bt),fetchers:new Map(R.fetchers)}),ge=!1)}async function ri(L,$,z,W,te,se,he,Y){let _e=R.fetchers.get(L);ot(L,dc(Y,_e?_e.data:void 0),{flushSync:he});let ce=new AbortController,ue=ba(t.history,z,ce.signal);if(se){let be=await Ri(te,z,ue.signal);if(be.type==="aborted")return;if(be.type==="error"){let{error:at}=Pr(z,be);gn(L,$,at,{flushSync:he});return}else if(be.matches)te=be.matches,W=Ic(te,z);else{gn(L,$,En(404,{pathname:z}),{flushSync:he});return}}we.set(L,ce);let xe=X,Me=(await zn("loader",ue,[W],te))[0];if(Lo(Me)&&(Me=await fx(Me,ue.signal,!0)||Me),we.get(L)===ce&&we.delete(L),!ue.signal.aborted){if($e.has(L)){ot(L,Ts(void 0));return}if(Mo(Me))if(ae>xe){ot(L,Ts(void 0));return}else{Ae.add(L),await mn(ue,Me);return}if(Jn(Me)){gn(L,$,Me.error);return}Se(!Lo(Me),"Unhandled fetcher deferred data"),ot(L,Ts(Me.data))}}async function mn(L,$,z){let{submission:W,fetcherSubmission:te,replace:se}=z===void 0?{}:z;$.response.headers.has("X-Remix-Revalidate")&&(ge=!0);let he=$.response.headers.get("Location");Se(he,"Expected a Location header on the redirect Response"),he=lE(he,new URL(L.url),l);let Y=wu(R.location,he,{_isRedirect:!0});if(n){let Me=!1;if($.response.headers.has("X-Remix-Reload-Document"))Me=!0;else if(Wv.test(he)){const be=t.history.createURL(he);Me=be.origin!==e.location.origin||jl(be.pathname,l)==null}if(Me){se?e.location.replace(he):e.location.assign(he);return}}S=null;let _e=se===!0||$.response.headers.has("X-Remix-Replace")?Ct.Replace:Ct.Push,{formMethod:ce,formAction:ue,formEncType:xe}=R.navigation;!W&&!te&&ce&&ue&&xe&&(W=_E(R.navigation));let ke=W||te;if(_V.has($.response.status)&&ke&&qr(ke.formMethod))await jt(_e,Y,{submission:_t({},ke,{formAction:he}),preventScrollReset:w});else{let Me=dm(Y,W);await jt(_e,Y,{overrideNavigation:Me,fetcherSubmission:te,preventScrollReset:w})}}async function zn(L,$,z,W){try{let te=await AV(u,L,$,z,W,s,i);return await Promise.all(te.map((se,he)=>{if(OV(se)){let Y=se.result;return{type:Ke.redirect,response:CV(Y,$,z[he].route.id,W,l,p.v7_relativeSplatPath)}}return kV(se)}))}catch(te){return z.map(()=>({type:Ke.error,error:te}))}}async function ht(L,$,z,W,te){let[se,...he]=await Promise.all([z.length?zn("loader",te,z,$):[],...W.map(Y=>{if(Y.matches&&Y.match&&Y.controller){let _e=ba(t.history,Y.path,Y.controller.signal);return zn("loader",_e,[Y.match],Y.matches).then(ce=>ce[0])}else return Promise.resolve({type:Ke.error,error:En(404,{pathname:Y.path})})})]);return await Promise.all([gE(L,z,se,se.map(()=>te.signal),!1,R.loaderData),gE(L,W.map(Y=>Y.match),he,W.map(Y=>Y.controller?Y.controller.signal:null),!0)]),{loaderResults:se,fetcherResults:he}}function Xe(){ge=!0,Qe.push(...ur()),Te.forEach((L,$)=>{we.has($)&&(Je.add($),nn($))})}function ot(L,$,z){z===void 0&&(z={}),R.fetchers.set(L,$),nt({fetchers:new Map(R.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function gn(L,$,z,W){W===void 0&&(W={});let te=Ha(R.matches,$);qn(L),nt({errors:{[te.route.id]:z},fetchers:new Map(R.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Cr(L){return p.v7_fetcherPersist&&(H.set(L,(H.get(L)||0)+1),$e.has(L)&&$e.delete(L)),R.fetchers.get(L)||vV}function qn(L){let $=R.fetchers.get(L);we.has(L)&&!($&&$.state==="loading"&&de.has(L))&&nn(L),Te.delete(L),de.delete(L),Ae.delete(L),$e.delete(L),Je.delete(L),R.fetchers.delete(L)}function Pn(L){if(p.v7_fetcherPersist){let $=(H.get(L)||0)-1;$<=0?(H.delete(L),$e.add(L)):H.set(L,$)}else qn(L);nt({fetchers:new Map(R.fetchers)})}function nn(L){let $=we.get(L);Se($,"Expected fetch controller: "+L),$.abort(),we.delete(L)}function co(L){for(let $ of L){let z=Cr($),W=Ts(z.data);R.fetchers.set($,W)}}function ii(){let L=[],$=!1;for(let z of Ae){let W=R.fetchers.get(z);Se(W,"Expected fetcher: "+z),W.state==="loading"&&(Ae.delete(z),L.push(z),$=!0)}return co(L),$}function pa(L){let $=[];for(let[z,W]of de)if(W<L){let te=R.fetchers.get(z);Se(te,"Expected fetcher: "+z),te.state==="loading"&&(nn(z),de.delete(z),$.push(z))}return co($),$.length>0}function $l(L,$){let z=R.blockers.get(L)||uc;return Ye.get(L)!==$&&Ye.set(L,$),z}function cs(L){R.blockers.delete(L),Ye.delete(L)}function Ci(L,$){let z=R.blockers.get(L)||uc;Se(z.state==="unblocked"&&$.state==="blocked"||z.state==="blocked"&&$.state==="blocked"||z.state==="blocked"&&$.state==="proceeding"||z.state==="blocked"&&$.state==="unblocked"||z.state==="proceeding"&&$.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+$.state);let W=new Map(R.blockers);W.set(L,$),nt({blockers:W})}function uo(L){let{currentLocation:$,nextLocation:z,historyAction:W}=L;if(Ye.size===0)return;Ye.size>1&&ea(!1,"A router only supports one blocker at a time");let te=Array.from(Ye.entries()),[se,he]=te[te.length-1],Y=R.blockers.get(se);if(!(Y&&Y.state==="proceeding")&&he({currentLocation:$,nextLocation:z,historyAction:W}))return se}function Rr(L){let $=En(404,{pathname:L}),z=a||o,{matches:W,route:te}=fE(z);return ur(),{notFoundMatches:W,route:te,error:$}}function Pr(L,$){return{boundaryId:Ha($.partialMatches).route.id,error:En(400,{type:"route-discovery",pathname:L,message:$.error!=null&&"message"in $.error?$.error:String($.error)})}}function ur(L){let $=[];return qe.forEach((z,W)=>{(!L||L(W))&&(z.cancel(),$.push(W),qe.delete(W))}),$}function dr(L,$,z){if(I=L,N=$,A=z||null,!x&&R.navigation===um){x=!0;let W=ho(R.location,R.matches);W!=null&&nt({restoreScrollPosition:W})}return()=>{I=null,N=null,A=null}}function us(L,$){return A&&A(L,$.map(W=>QM(W,R.loaderData)))||L.key}function ds(L,$){if(I&&N){let z=us(L,$);I[z]=N()}}function ho(L,$){if(I){let z=us(L,$),W=I[z];if(typeof W=="number")return W}return null}function hr(L,$,z){if(d)if(L){let W=L[L.length-1].route;if(W.path&&(W.path==="*"||W.path.endsWith("/*")))return{active:!0,matches:gh($,z,l,!0)}}else return{active:!0,matches:gh($,z,l,!0)||[]};return{active:!1,matches:null}}async function Ri(L,$,z){let W=L,te=W.length>0?W[W.length-1].route:null;for(;;){let se=a==null,he=a||o;try{await IV(d,$,W,he,s,i,tt,z)}catch(ue){return{type:"error",error:ue,partialMatches:W}}finally{se&&(o=[...o])}if(z.aborted)return{type:"aborted"};let Y=Co(he,$,l),_e=!1;if(Y){let ue=Y[Y.length-1].route;if(ue.index)return{type:"success",matches:Y};if(ue.path&&ue.path.length>0)if(ue.path==="*")_e=!0;else return{type:"success",matches:Y}}let ce=gh(he,$,l,!0);if(!ce||W.map(ue=>ue.route.id).join("-")===ce.map(ue=>ue.route.id).join("-"))return{type:"success",matches:_e?Y:null};if(W=ce,te=W[W.length-1].route,te.path==="*")return{type:"success",matches:W}}}function ft(L){s={},a=Eu(L,i,void 0,s)}function si(L,$){let z=a==null;ux(L,$,a||o,s,i),z&&(o=[...o],nt({}))}return B={get basename(){return l},get future(){return p},get state(){return R},get routes(){return o},get window(){return e},initialize:Ot,subscribe:ie,enableScrollRestoration:dr,navigate:ni,fetch:kr,revalidate:xi,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:Cr,deleteFetcher:Pn,dispose:cr,getBlocker:$l,deleteBlocker:cs,patchRoutes:si,_internalFetchControllers:we,_internalActiveDeferreds:qe,_internalSetRoutes:ft},B}function EV(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Dg(t,e,n,r,i,s,o,a){let l,u;if(o){l=[];for(let p of e)if(l.push(p),p.route.id===o){u=p;break}}else l=e,u=e[e.length-1];let d=Yf(i||".",Jf(l,s),jl(t.pathname,n)||t.pathname,a==="path");return i==null&&(d.search=t.search,d.hash=t.hash),(i==null||i===""||i===".")&&u&&u.route.index&&!Kv(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Ki([n,d.pathname])),ta(d)}function iE(t,e,n,r){if(!r||!EV(r))return{path:n};if(r.formMethod&&!DV(r.formMethod))return{path:n,error:En(405,{method:r.formMethod})};let i=()=>({path:n,error:En(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=dx(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!qr(o))return i();let g=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,I)=>{let[A,N]=I;return""+y+A+"="+N+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:g}}}else if(r.formEncType==="application/json"){if(!qr(o))return i();try{let g=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:g,text:void 0}}}catch{return i()}}}Se(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=Lg(r.formData),u=r.formData;else if(r.body instanceof FormData)l=Lg(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=cE(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=cE(l)}catch{return i()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(qr(d.formMethod))return{path:n,submission:d};let p=as(n);return e&&p.search&&Kv(p.search)&&l.append("index",""),p.search="?"+l,{path:ta(p),submission:d}}function TV(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function sE(t,e,n,r,i,s,o,a,l,u,d,p,g,y,I,A){let N=A?Jn(A[1])?A[1].error:A[1].data:void 0,x=t.createURL(e.location),E=t.createURL(i),b=A&&Jn(A[1])?A[0]:void 0,j=b?TV(n,b):n,B=A?A[1].statusCode:void 0,R=o&&B&&B>=400,k=j.filter((S,C)=>{let{route:O}=S;if(O.lazy)return!0;if(O.loader==null)return!1;if(s)return typeof O.loader!="function"||O.loader.hydrate?!0:e.loaderData[O.id]===void 0&&(!e.errors||e.errors[O.id]===void 0);if(bV(e.loaderData,e.matches[C],S)||l.some(ge=>ge===S.route.id))return!0;let V=e.matches[C],P=S;return oE(S,_t({currentUrl:x,currentParams:V.params,nextUrl:E,nextParams:P.params},r,{actionResult:N,actionStatus:B,defaultShouldRevalidate:R?!1:a||x.pathname+x.search===E.pathname+E.search||x.search!==E.search||cx(V,P)}))}),w=[];return p.forEach((S,C)=>{if(s||!n.some(Qe=>Qe.route.id===S.routeId)||d.has(C))return;let O=Co(y,S.path,I);if(!O){w.push({key:C,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let V=e.fetchers.get(C),P=Ic(O,S.path),ge=!1;g.has(C)?ge=!1:u.has(C)?(u.delete(C),ge=!0):V&&V.state!=="idle"&&V.data===void 0?ge=a:ge=oE(P,_t({currentUrl:x,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:N,actionStatus:B,defaultShouldRevalidate:R?!1:a})),ge&&w.push({key:C,routeId:S.routeId,path:S.path,matches:O,match:P,controller:new AbortController})}),[k,w]}function bV(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function cx(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function oE(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function IV(t,e,n,r,i,s,o,a){let l=[e,...n.map(u=>u.route.id)].join("-");try{let u=o.get(l);u||(u=t({path:e,matches:n,patch:(d,p)=>{a.aborted||ux(d,p,r,i,s)}}),o.set(l,u)),u&&NV(u)&&await u}finally{o.delete(l)}}function ux(t,e,n,r,i){if(t){var s;let o=r[t];Se(o,"No route found to patch children into: routeId = "+t);let a=Eu(e,i,[t,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=Eu(e,i,["patch",String(n.length||"0")],r);n.push(...o)}}async function aE(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Se(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";ea(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!KM.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,_t({},e(i),{lazy:void 0}))}function SV(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function AV(t,e,n,r,i,s,o,a){let l=r.reduce((p,g)=>p.add(g.route.id),new Set),u=new Set,d=await t({matches:i.map(p=>{let g=l.has(p.route.id);return _t({},p,{shouldLoad:g,resolve:I=>(u.add(p.route.id),g?xV(e,n,p,s,o,I,a):Promise.resolve({type:Ke.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(p=>Se(u.has(p.route.id),'`match.resolve()` was not called for route id "'+p.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((p,g)=>l.has(i[g].route.id))}async function xV(t,e,n,r,i,s,o){let a,l,u=d=>{let p,g=new Promise((A,N)=>p=N);l=()=>p(),e.signal.addEventListener("abort",l);let y=A=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):d({request:e,params:n.params,context:o},...A!==void 0?[A]:[]),I;return s?I=s(A=>y(A)):I=(async()=>{try{return{type:"data",result:await y()}}catch(A){return{type:"error",result:A}}})(),Promise.race([I,g])};try{let d=n.route[t];if(n.route.lazy)if(d){let p,[g]=await Promise.all([u(d).catch(y=>{p=y}),aE(n.route,i,r)]);if(p!==void 0)throw p;a=g}else if(await aE(n.route,i,r),d=n.route[t],d)a=await u(d);else if(t==="action"){let p=new URL(e.url),g=p.pathname+p.search;throw En(405,{method:e.method,pathname:g,routeId:n.route.id})}else return{type:Ke.data,result:void 0};else if(d)a=await u(d);else{let p=new URL(e.url),g=p.pathname+p.search;throw En(404,{pathname:g})}Se(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Ke.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function kV(t){let{result:e,type:n}=t;if(hx(e)){let u;try{let d=e.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(d){return{type:Ke.error,error:d}}return n===Ke.error?{type:Ke.error,error:new of(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:Ke.data,data:u,statusCode:e.status,headers:e.headers}}if(n===Ke.error){if(mE(e)){var r;if(e.data instanceof Error){var i;return{type:Ke.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new of(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:Ke.error,error:e,statusCode:Xf(e)?e.status:void 0}}if(jV(e)){var s,o;return{type:Ke.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(mE(e)){var a,l;return{type:Ke.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Ke.data,data:e}}function CV(t,e,n,r,i,s){let o=t.headers.get("Location");if(Se(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Wv.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Dg(new URL(e.url),a,i,!0,o,s),t.headers.set("Location",o)}return t}function lE(t,e,n){if(Wv.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),s=jl(i.pathname,n)!=null;if(i.origin===e.origin&&s)return i.pathname+i.search+i.hash}return t}function ba(t,e,n,r){let i=t.createURL(dx(e)).toString(),s={signal:n};if(r&&qr(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Lg(r.formData):s.body=r.formData}return new Request(i,s)}function Lg(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function cE(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function RV(t,e,n,r,i,s){let o={},a=null,l,u=!1,d={},p=r&&Jn(r[1])?r[1].error:void 0;return n.forEach((g,y)=>{let I=e[y].route.id;if(Se(!Mo(g),"Cannot handle redirect results in processLoaderData"),Jn(g)){let A=g.error;p!==void 0&&(A=p,p=void 0),a=a||{};{let N=Ha(t,I);a[N.route.id]==null&&(a[N.route.id]=A)}o[I]=void 0,u||(u=!0,l=Xf(g.error)?g.error.status:500),g.headers&&(d[I]=g.headers)}else Lo(g)?(i.set(I,g.deferredData),o[I]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!u&&(l=g.statusCode),g.headers&&(d[I]=g.headers)):(o[I]=g.data,g.statusCode&&g.statusCode!==200&&!u&&(l=g.statusCode),g.headers&&(d[I]=g.headers))}),p!==void 0&&r&&(a={[r[0]]:p},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:d}}function uE(t,e,n,r,i,s,o,a){let{loaderData:l,errors:u}=RV(e,n,r,i,a);for(let d=0;d<s.length;d++){let{key:p,match:g,controller:y}=s[d];Se(o!==void 0&&o[d]!==void 0,"Did not find corresponding fetcher result");let I=o[d];if(!(y&&y.signal.aborted))if(Jn(I)){let A=Ha(t.matches,g==null?void 0:g.route.id);u&&u[A.route.id]||(u=_t({},u,{[A.route.id]:I.error})),t.fetchers.delete(p)}else if(Mo(I))Se(!1,"Unhandled fetcher revalidation redirect");else if(Lo(I))Se(!1,"Unhandled fetcher deferred data");else{let A=Ts(I.data);t.fetchers.set(p,A)}}return{loaderData:l,errors:u}}function dE(t,e,n,r){let i=_t({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function hE(t){return t?Jn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ha(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function fE(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function En(t,e){let{pathname:n,routeId:r,method:i,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+o):i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new of(t||500,a,new Error(l),!0)}function pE(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Mo(n))return{result:n,idx:e}}}function dx(t){let e=typeof t=="string"?as(t):t;return ta(_t({},e,{hash:""}))}function PV(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function NV(t){return typeof t=="object"&&t!=null&&"then"in t}function OV(t){return hx(t.result)&&gV.has(t.result.status)}function Lo(t){return t.type===Ke.deferred}function Jn(t){return t.type===Ke.error}function Mo(t){return(t&&t.type)===Ke.redirect}function mE(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function jV(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function hx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function DV(t){return mV.has(t.toLowerCase())}function qr(t){return fV.has(t.toLowerCase())}async function gE(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let u=t.find(p=>p.route.id===l.route.id),d=u!=null&&!cx(u,l)&&(s&&s[l.route.id])!==void 0;if(Lo(a)&&(i||d)){let p=r[o];Se(p,"Expected an AbortSignal for revalidating fetcher deferred result"),await fx(a,p,i).then(g=>{g&&(n[o]=g||n[o])})}}}async function fx(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ke.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Ke.error,error:i}}return{type:Ke.data,data:t.deferredData.data}}}function Kv(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Ic(t,e){let n=typeof e=="string"?as(e).search:e.search;if(t[t.length-1].route.index&&Kv(n||""))return t[t.length-1];let r=ox(t);return r[r.length-1]}function _E(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function dm(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function LV(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function dc(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function MV(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ts(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function VV(t,e){try{let n=t.sessionStorage.getItem(lx);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function FV(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(lx,JSON.stringify(n))}catch(r){ea(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function af(){return af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},af.apply(this,arguments)}const Zf=F.createContext(null),px=F.createContext(null),oo=F.createContext(null),Gv=F.createContext(null),Ai=F.createContext({outlet:null,matches:[],isDataRoute:!1}),mx=F.createContext(null);function $V(t,e){let{relative:n}=e===void 0?{}:e;Dl()||Se(!1);let{basename:r,navigator:i}=F.useContext(oo),{hash:s,pathname:o,search:a}=_x(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ki([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Dl(){return F.useContext(Gv)!=null}function lr(){return Dl()||Se(!1),F.useContext(Gv).location}function gx(t){F.useContext(oo).static||F.useLayoutEffect(t)}function mt(){let{isDataRoute:t}=F.useContext(Ai);return t?eF():UV()}function UV(){Dl()||Se(!1);let t=F.useContext(Zf),{basename:e,future:n,navigator:r}=F.useContext(oo),{matches:i}=F.useContext(Ai),{pathname:s}=lr(),o=JSON.stringify(Jf(i,n.v7_relativeSplatPath)),a=F.useRef(!1);return gx(()=>{a.current=!0}),F.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let p=Yf(u,JSON.parse(o),s,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ki([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,s,t])}const BV=F.createContext(null);function zV(t){let e=F.useContext(Ai).outlet;return e&&F.createElement(BV.Provider,{value:t},e)}function fn(){let{matches:t}=F.useContext(Ai),e=t[t.length-1];return e?e.params:{}}function _x(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(oo),{matches:i}=F.useContext(Ai),{pathname:s}=lr(),o=JSON.stringify(Jf(i,r.v7_relativeSplatPath));return F.useMemo(()=>Yf(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function qV(t,e,n,r){Dl()||Se(!1);let{navigator:i}=F.useContext(oo),{matches:s}=F.useContext(Ai),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=lr(),d;d=u;let p=d.pathname||"/",g=p;if(l!=="/"){let A=l.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let y=Co(t,{pathname:g});return QV(y&&y.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:Ki([l,i.encodeLocation?i.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:Ki([l,i.encodeLocation?i.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),s,n,r)}function HV(){let t=ZV(),e=Xf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:i},n):null,null)}const WV=F.createElement(HV,null);class KV extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(Ai.Provider,{value:this.props.routeContext},F.createElement(mx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GV(t){let{routeContext:e,match:n,children:r}=t,i=F.useContext(Zf);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(Ai.Provider,{value:e},r)}function QV(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let d=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);d>=0||Se(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:g,errors:y}=n,I=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||I){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,p,g)=>{let y,I=!1,A=null,N=null;n&&(y=a&&p.route.id?a[p.route.id]:void 0,A=p.route.errorElement||WV,l&&(u<0&&g===0?(I=!0,N=null):u===g&&(I=!0,N=p.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,g+1)),E=()=>{let b;return y?b=A:I?b=N:p.route.Component?b=F.createElement(p.route.Component,null):p.route.element?b=p.route.element:b=d,F.createElement(GV,{match:p,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:b})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?F.createElement(KV,{location:n.location,revalidation:n.revalidation,component:A,error:y,children:E(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):E()},null)}var vx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vx||{}),lf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lf||{});function JV(t){let e=F.useContext(Zf);return e||Se(!1),e}function YV(t){let e=F.useContext(px);return e||Se(!1),e}function XV(t){let e=F.useContext(Ai);return e||Se(!1),e}function yx(t){let e=XV(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function ZV(){var t;let e=F.useContext(mx),n=YV(lf.UseRouteError),r=yx(lf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function eF(){let{router:t}=JV(vx.UseNavigateStable),e=yx(lf.UseNavigateStable),n=F.useRef(!1);return gx(()=>{n.current=!0}),F.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,af({fromRouteId:e},s)))},[t,e])}function vE(t){let{to:e,replace:n,state:r,relative:i}=t;Dl()||Se(!1);let{future:s,static:o}=F.useContext(oo),{matches:a}=F.useContext(Ai),{pathname:l}=lr(),u=mt(),d=Yf(e,Jf(a,s.v7_relativeSplatPath),l,i==="path"),p=JSON.stringify(d);return F.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:i}),[u,p,i,n,r]),null}function tF(t){return zV(t.context)}function ze(t){Se(!1)}function nF(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Ct.Pop,navigator:s,static:o=!1,future:a}=t;Dl()&&Se(!1);let l=e.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:l,navigator:s,static:o,future:af({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=as(r));let{pathname:d="/",search:p="",hash:g="",state:y=null,key:I="default"}=r,A=F.useMemo(()=>{let N=jl(d,l);return N==null?null:{location:{pathname:N,search:p,hash:g,state:y,key:I},navigationType:i}},[l,d,p,g,y,I,i]);return A==null?null:F.createElement(oo.Provider,{value:u},F.createElement(Gv.Provider,{children:n,value:A}))}new Promise(()=>{});function Mg(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,i)=>{if(!F.isValidElement(r))return;let s=[...e,i];if(r.type===F.Fragment){n.push.apply(n,Mg(r.props.children,s));return}r.type!==ze&&Se(!1),!r.props.index||!r.props.children||Se(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Mg(r.props.children,s)),n.push(o)}),n}function rF(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:F.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:F.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:F.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Tu(){return Tu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Tu.apply(this,arguments)}function iF(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function sF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function oF(t,e){return t.button===0&&(!e||e==="_self")&&!sF(t)}function Vg(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function aF(t,e){let n=Vg(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const lF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],cF="6";try{window.__reactRouterVersion=cF}catch{}function uF(t,e){return wV({basename:void 0,future:Tu({},void 0,{v7_prependBasename:!0}),history:qM({window:void 0}),hydrationData:dF(),routes:t,mapRouteProperties:rF,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function dF(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Tu({},e,{errors:hF(e.errors)})),e}function hF(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new of(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const fF=F.createContext({isTransitioning:!1}),pF=F.createContext(new Map),mF="startTransition",yE=r1[mF],gF="flushSync",wE=mR[gF];function _F(t){yE?yE(t):t()}function hc(t){wE?wE(t):t()}let vF=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function yF(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=F.useState(n.state),[o,a]=F.useState(),[l,u]=F.useState({isTransitioning:!1}),[d,p]=F.useState(),[g,y]=F.useState(),[I,A]=F.useState(),N=F.useRef(new Map),{v7_startTransition:x}=r||{},E=F.useCallback(w=>{x?_F(w):w()},[x]),b=F.useCallback((w,S)=>{let{deletedFetchers:C,unstable_flushSync:O,unstable_viewTransitionOpts:V}=S;C.forEach(ge=>N.current.delete(ge)),w.fetchers.forEach((ge,Qe)=>{ge.data!==void 0&&N.current.set(Qe,ge.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!V||P){O?hc(()=>s(w)):E(()=>s(w));return}if(O){hc(()=>{g&&(d&&d.resolve(),g.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let ge=n.window.document.startViewTransition(()=>{hc(()=>s(w))});ge.finished.finally(()=>{hc(()=>{p(void 0),y(void 0),a(void 0),u({isTransitioning:!1})})}),hc(()=>y(ge));return}g?(d&&d.resolve(),g.skipTransition(),A({state:w,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(a(w),u({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,g,d,N,E]);F.useLayoutEffect(()=>n.subscribe(b),[n,b]),F.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new vF)},[l]),F.useEffect(()=>{if(d&&o&&n.window){let w=o,S=d.promise,C=n.window.document.startViewTransition(async()=>{E(()=>s(w)),await S});C.finished.finally(()=>{p(void 0),y(void 0),a(void 0),u({isTransitioning:!1})}),y(C)}},[E,o,d,n.window]),F.useEffect(()=>{d&&o&&i.location.key===o.location.key&&d.resolve()},[d,g,i.location,o]),F.useEffect(()=>{!l.isTransitioning&&I&&(a(I.state),u({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}),A(void 0))},[l.isTransitioning,I]),F.useEffect(()=>{},[]);let j=F.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,S,C)=>n.navigate(w,{state:S,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:(w,S,C)=>n.navigate(w,{replace:!0,state:S,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[n]),B=n.basename||"/",R=F.useMemo(()=>({router:n,navigator:j,static:!1,basename:B}),[n,j,B]),k=F.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return F.createElement(F.Fragment,null,F.createElement(Zf.Provider,{value:R},F.createElement(px.Provider,{value:i},F.createElement(pF.Provider,{value:N.current},F.createElement(fF.Provider,{value:l},F.createElement(nF,{basename:B,location:i.location,navigationType:i.historyAction,navigator:j,future:k},i.initialized||n.future.v7_partialHydration?F.createElement(wF,{routes:n.routes,future:n.future,state:i}):e))))),null)}const wF=F.memo(EF);function EF(t){let{routes:e,future:n,state:r}=t;return qV(e,void 0,r,n)}const TF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,et=F.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:d,unstable_viewTransition:p}=e,g=iF(e,lF),{basename:y}=F.useContext(oo),I,A=!1;if(typeof u=="string"&&bF.test(u)&&(I=u,TF))try{let b=new URL(window.location.href),j=u.startsWith("//")?new URL(b.protocol+u):new URL(u),B=jl(j.pathname,y);j.origin===b.origin&&B!=null?u=B+j.search+j.hash:A=!0}catch{}let N=$V(u,{relative:i}),x=IF(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:i,unstable_viewTransition:p});function E(b){r&&r(b),b.defaultPrevented||x(b)}return F.createElement("a",Tu({},g,{href:I||N,onClick:A||s?r:E,ref:n,target:l}))});var EE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(EE||(EE={}));var TE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(TE||(TE={}));function IF(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=mt(),u=lr(),d=_x(t,{relative:o});return F.useCallback(p=>{if(oF(p,n)){p.preventDefault();let g=r!==void 0?r:ta(u)===ta(d);l(t,{replace:g,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,d,r,i,n,t,s,o,a])}function SF(t){let e=F.useRef(Vg(t)),n=F.useRef(!1),r=lr(),i=F.useMemo(()=>aF(r.search,n.current?null:e.current),[r.search]),s=mt(),o=F.useCallback((a,l)=>{const u=Vg(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}var AF={exports:{}},In="top",rr="bottom",ir="right",Sn="left",ep="auto",Ll=[In,rr,ir,Sn],na="start",vl="end",wx="clippingParents",Qv="viewport",Ra="popper",Ex="reference",Fg=Ll.reduce(function(t,e){return t.concat([e+"-"+na,e+"-"+vl])},[]),Jv=[].concat(Ll,[ep]).reduce(function(t,e){return t.concat([e,e+"-"+na,e+"-"+vl])},[]),Tx="beforeRead",bx="read",Ix="afterRead",Sx="beforeMain",Ax="main",xx="afterMain",kx="beforeWrite",Cx="write",Rx="afterWrite",Px=[Tx,bx,Ix,Sx,Ax,xx,kx,Cx,Rx];function Si(t){return t?(t.nodeName||"").toLowerCase():null}function sr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ra(t){var e=sr(t).Element;return t instanceof e||t instanceof Element}function Ir(t){var e=sr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Yv(t){if(typeof ShadowRoot>"u")return!1;var e=sr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function xF(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Ir(s)||!Si(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function kF(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!Ir(i)||!Si(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const Xv={name:"applyStyles",enabled:!0,phase:"write",fn:xF,effect:kF,requires:["computeStyles"]};function Ti(t){return t.split("-")[0]}var Uo=Math.max,cf=Math.min,yl=Math.round;function $g(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Nx(){return!/^((?!chrome|android).)*safari/i.test($g())}function wl(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Ir(t)&&(i=t.offsetWidth>0&&yl(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&yl(r.height)/t.offsetHeight||1);var o=ra(t)?sr(t):window,a=o.visualViewport,l=!Nx()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/i,d=(r.top+(l&&a?a.offsetTop:0))/s,p=r.width/i,g=r.height/s;return{width:p,height:g,top:d,right:u+p,bottom:d+g,left:u,x:u,y:d}}function Zv(t){var e=wl(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Ox(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Yv(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function is(t){return sr(t).getComputedStyle(t)}function CF(t){return["table","td","th"].indexOf(Si(t))>=0}function ao(t){return((ra(t)?t.ownerDocument:t.document)||window.document).documentElement}function tp(t){return Si(t)==="html"?t:t.assignedSlot||t.parentNode||(Yv(t)?t.host:null)||ao(t)}function bE(t){return!Ir(t)||is(t).position==="fixed"?null:t.offsetParent}function RF(t){var e=/firefox/i.test($g()),n=/Trident/i.test($g());if(n&&Ir(t)){var r=is(t);if(r.position==="fixed")return null}var i=tp(t);for(Yv(i)&&(i=i.host);Ir(i)&&["html","body"].indexOf(Si(i))<0;){var s=is(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Bu(t){for(var e=sr(t),n=bE(t);n&&CF(n)&&is(n).position==="static";)n=bE(n);return n&&(Si(n)==="html"||Si(n)==="body"&&is(n).position==="static")?e:n||RF(t)||e}function ey(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function $c(t,e,n){return Uo(t,cf(e,n))}function PF(t,e,n){var r=$c(t,e,n);return r>n?n:r}function jx(){return{top:0,right:0,bottom:0,left:0}}function Dx(t){return Object.assign({},jx(),t)}function Lx(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var NF=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Dx(typeof e!="number"?e:Lx(e,Ll))};function OF(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ti(n.placement),l=ey(a),u=[Sn,ir].indexOf(a)>=0,d=u?"height":"width";if(!(!s||!o)){var p=NF(i.padding,n),g=Zv(s),y=l==="y"?In:Sn,I=l==="y"?rr:ir,A=n.rects.reference[d]+n.rects.reference[l]-o[l]-n.rects.popper[d],N=o[l]-n.rects.reference[l],x=Bu(s),E=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,b=A/2-N/2,j=p[y],B=E-g[d]-p[I],R=E/2-g[d]/2+b,k=$c(j,R,B),w=l;n.modifiersData[r]=(e={},e[w]=k,e.centerOffset=k-R,e)}}function jF(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Ox(e.elements.popper,i)&&(e.elements.arrow=i))}const Mx={name:"arrow",enabled:!0,phase:"main",fn:OF,effect:jF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function El(t){return t.split("-")[1]}var DF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function LF(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:yl(n*i)/i||0,y:yl(r*i)/i||0}}function IE(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,d=t.roundOffsets,p=t.isFixed,g=o.x,y=g===void 0?0:g,I=o.y,A=I===void 0?0:I,N=typeof d=="function"?d({x:y,y:A}):{x:y,y:A};y=N.x,A=N.y;var x=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),b=Sn,j=In,B=window;if(u){var R=Bu(n),k="clientHeight",w="clientWidth";if(R===sr(n)&&(R=ao(n),is(R).position!=="static"&&a==="absolute"&&(k="scrollHeight",w="scrollWidth")),R=R,i===In||(i===Sn||i===ir)&&s===vl){j=rr;var S=p&&R===B&&B.visualViewport?B.visualViewport.height:R[k];A-=S-r.height,A*=l?1:-1}if(i===Sn||(i===In||i===rr)&&s===vl){b=ir;var C=p&&R===B&&B.visualViewport?B.visualViewport.width:R[w];y-=C-r.width,y*=l?1:-1}}var O=Object.assign({position:a},u&&DF),V=d===!0?LF({x:y,y:A},sr(n)):{x:y,y:A};if(y=V.x,A=V.y,l){var P;return Object.assign({},O,(P={},P[j]=E?"0":"",P[b]=x?"0":"",P.transform=(B.devicePixelRatio||1)<=1?"translate("+y+"px, "+A+"px)":"translate3d("+y+"px, "+A+"px, 0)",P))}return Object.assign({},O,(e={},e[j]=E?A+"px":"",e[b]=x?y+"px":"",e.transform="",e))}function MF(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:Ti(e.placement),variation:El(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,IE(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,IE(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ty={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:MF,data:{}};var Ud={passive:!0};function VF(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=sr(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(d){d.addEventListener("scroll",n.update,Ud)}),a&&l.addEventListener("resize",n.update,Ud),function(){s&&u.forEach(function(d){d.removeEventListener("scroll",n.update,Ud)}),a&&l.removeEventListener("resize",n.update,Ud)}}const ny={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:VF,data:{}};var FF={left:"right",right:"left",bottom:"top",top:"bottom"};function _h(t){return t.replace(/left|right|bottom|top/g,function(e){return FF[e]})}var $F={start:"end",end:"start"};function SE(t){return t.replace(/start|end/g,function(e){return $F[e]})}function ry(t){var e=sr(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function iy(t){return wl(ao(t)).left+ry(t).scrollLeft}function UF(t,e){var n=sr(t),r=ao(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var u=Nx();(u||!u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+iy(t),y:l}}function BF(t){var e,n=ao(t),r=ry(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Uo(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Uo(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+iy(t),l=-r.scrollTop;return is(i||n).direction==="rtl"&&(a+=Uo(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function sy(t){var e=is(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Vx(t){return["html","body","#document"].indexOf(Si(t))>=0?t.ownerDocument.body:Ir(t)&&sy(t)?t:Vx(tp(t))}function Uc(t,e){var n;e===void 0&&(e=[]);var r=Vx(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=sr(r),o=i?[s].concat(s.visualViewport||[],sy(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Uc(tp(o)))}function Ug(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function zF(t,e){var n=wl(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function AE(t,e,n){return e===Qv?Ug(UF(t,n)):ra(e)?zF(e,n):Ug(BF(ao(t)))}function qF(t){var e=Uc(tp(t)),n=["absolute","fixed"].indexOf(is(t).position)>=0,r=n&&Ir(t)?Bu(t):t;return ra(r)?e.filter(function(i){return ra(i)&&Ox(i,r)&&Si(i)!=="body"}):[]}function HF(t,e,n,r){var i=e==="clippingParents"?qF(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,u){var d=AE(t,u,r);return l.top=Uo(d.top,l.top),l.right=cf(d.right,l.right),l.bottom=cf(d.bottom,l.bottom),l.left=Uo(d.left,l.left),l},AE(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Fx(t){var e=t.reference,n=t.element,r=t.placement,i=r?Ti(r):null,s=r?El(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case In:l={x:o,y:e.y-n.height};break;case rr:l={x:o,y:e.y+e.height};break;case ir:l={x:e.x+e.width,y:a};break;case Sn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=i?ey(i):null;if(u!=null){var d=u==="y"?"height":"width";switch(s){case na:l[u]=l[u]-(e[d]/2-n[d]/2);break;case vl:l[u]=l[u]+(e[d]/2-n[d]/2);break}}return l}function Tl(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?wx:a,u=n.rootBoundary,d=u===void 0?Qv:u,p=n.elementContext,g=p===void 0?Ra:p,y=n.altBoundary,I=y===void 0?!1:y,A=n.padding,N=A===void 0?0:A,x=Dx(typeof N!="number"?N:Lx(N,Ll)),E=g===Ra?Ex:Ra,b=t.rects.popper,j=t.elements[I?E:g],B=HF(ra(j)?j:j.contextElement||ao(t.elements.popper),l,d,o),R=wl(t.elements.reference),k=Fx({reference:R,element:b,strategy:"absolute",placement:i}),w=Ug(Object.assign({},b,k)),S=g===Ra?w:R,C={top:B.top-S.top+x.top,bottom:S.bottom-B.bottom+x.bottom,left:B.left-S.left+x.left,right:S.right-B.right+x.right},O=t.modifiersData.offset;if(g===Ra&&O){var V=O[i];Object.keys(C).forEach(function(P){var ge=[ir,rr].indexOf(P)>=0?1:-1,Qe=[In,rr].indexOf(P)>=0?"y":"x";C[P]+=V[Qe]*ge})}return C}function WF(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?Jv:l,d=El(r),p=d?a?Fg:Fg.filter(function(I){return El(I)===d}):Ll,g=p.filter(function(I){return u.indexOf(I)>=0});g.length===0&&(g=p);var y=g.reduce(function(I,A){return I[A]=Tl(t,{placement:A,boundary:i,rootBoundary:s,padding:o})[Ti(A)],I},{});return Object.keys(y).sort(function(I,A){return y[I]-y[A]})}function KF(t){if(Ti(t)===ep)return[];var e=_h(t);return[SE(t),e,SE(e)]}function GF(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,d=n.boundary,p=n.rootBoundary,g=n.altBoundary,y=n.flipVariations,I=y===void 0?!0:y,A=n.allowedAutoPlacements,N=e.options.placement,x=Ti(N),E=x===N,b=l||(E||!I?[_h(N)]:KF(N)),j=[N].concat(b).reduce(function($e,qe){return $e.concat(Ti(qe)===ep?WF(e,{placement:qe,boundary:d,rootBoundary:p,padding:u,flipVariations:I,allowedAutoPlacements:A}):qe)},[]),B=e.rects.reference,R=e.rects.popper,k=new Map,w=!0,S=j[0],C=0;C<j.length;C++){var O=j[C],V=Ti(O),P=El(O)===na,ge=[In,rr].indexOf(V)>=0,Qe=ge?"width":"height",Je=Tl(e,{placement:O,boundary:d,rootBoundary:p,altBoundary:g,padding:u}),we=ge?P?ir:Sn:P?rr:In;B[Qe]>R[Qe]&&(we=_h(we));var X=_h(we),ae=[];if(s&&ae.push(Je[V]<=0),a&&ae.push(Je[we]<=0,Je[X]<=0),ae.every(function($e){return $e})){S=O,w=!1;break}k.set(O,ae)}if(w)for(var de=I?3:1,Ae=function(qe){var Ye=j.find(function(tt){var Nt=k.get(tt);if(Nt)return Nt.slice(0,qe).every(function(Ot){return Ot})});if(Ye)return S=Ye,"break"},Te=de;Te>0;Te--){var H=Ae(Te);if(H==="break")break}e.placement!==S&&(e.modifiersData[r]._skip=!0,e.placement=S,e.reset=!0)}}const $x={name:"flip",enabled:!0,phase:"main",fn:GF,requiresIfExists:["offset"],data:{_skip:!1}};function xE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function kE(t){return[In,ir,rr,Sn].some(function(e){return t[e]>=0})}function QF(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Tl(e,{elementContext:"reference"}),a=Tl(e,{altBoundary:!0}),l=xE(o,r),u=xE(a,i,s),d=kE(l),p=kE(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}const Ux={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:QF};function JF(t,e,n){var r=Ti(t),i=[Sn,In].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Sn,ir].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function YF(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=Jv.reduce(function(d,p){return d[p]=JF(p,e.rects,s),d},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const Bx={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:YF};function XF(t){var e=t.state,n=t.name;e.modifiersData[n]=Fx({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const oy={name:"popperOffsets",enabled:!0,phase:"read",fn:XF,data:{}};function ZF(t){return t==="x"?"y":"x"}function e$(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,d=n.altBoundary,p=n.padding,g=n.tether,y=g===void 0?!0:g,I=n.tetherOffset,A=I===void 0?0:I,N=Tl(e,{boundary:l,rootBoundary:u,padding:p,altBoundary:d}),x=Ti(e.placement),E=El(e.placement),b=!E,j=ey(x),B=ZF(j),R=e.modifiersData.popperOffsets,k=e.rects.reference,w=e.rects.popper,S=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,C=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(R){if(s){var P,ge=j==="y"?In:Sn,Qe=j==="y"?rr:ir,Je=j==="y"?"height":"width",we=R[j],X=we+N[ge],ae=we-N[Qe],de=y?-w[Je]/2:0,Ae=E===na?k[Je]:w[Je],Te=E===na?-w[Je]:-k[Je],H=e.elements.arrow,$e=y&&H?Zv(H):{width:0,height:0},qe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:jx(),Ye=qe[ge],tt=qe[Qe],Nt=$c(0,k[Je],$e[Je]),Ot=b?k[Je]/2-de-Nt-Ye-C.mainAxis:Ae-Nt-Ye-C.mainAxis,cr=b?-k[Je]/2+de+Nt+tt+C.mainAxis:Te+Nt+tt+C.mainAxis,ie=e.elements.arrow&&Bu(e.elements.arrow),nt=ie?j==="y"?ie.clientTop||0:ie.clientLeft||0:0,tn=(P=O==null?void 0:O[j])!=null?P:0,ni=we+Ot-tn-nt,xi=we+cr-tn,jt=$c(y?cf(X,ni):X,we,y?Uo(ae,xi):ae);R[j]=jt,V[j]=jt-we}if(a){var ki,xr=j==="x"?In:Sn,Rn=j==="x"?rr:ir,pn=R[B],kr=B==="y"?"height":"width",ls=pn+N[xr],ri=pn-N[Rn],mn=[In,Sn].indexOf(x)!==-1,zn=(ki=O==null?void 0:O[B])!=null?ki:0,ht=mn?ls:pn-k[kr]-w[kr]-zn+C.altAxis,Xe=mn?pn+k[kr]+w[kr]-zn-C.altAxis:ri,ot=y&&mn?PF(ht,pn,Xe):$c(y?ht:ls,pn,y?Xe:ri);R[B]=ot,V[B]=ot-pn}e.modifiersData[r]=V}}const zx={name:"preventOverflow",enabled:!0,phase:"main",fn:e$,requiresIfExists:["offset"]};function t$(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function n$(t){return t===sr(t)||!Ir(t)?ry(t):t$(t)}function r$(t){var e=t.getBoundingClientRect(),n=yl(e.width)/t.offsetWidth||1,r=yl(e.height)/t.offsetHeight||1;return n!==1||r!==1}function i$(t,e,n){n===void 0&&(n=!1);var r=Ir(e),i=Ir(e)&&r$(e),s=ao(e),o=wl(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Si(e)!=="body"||sy(s))&&(a=n$(e)),Ir(e)?(l=wl(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=iy(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function s$(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function o$(t){var e=s$(t);return Px.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function a$(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function l$(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var CE={placement:"bottom",modifiers:[],strategy:"absolute"};function RE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function np(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?CE:i;return function(a,l,u){u===void 0&&(u=s);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},CE,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],g=!1,y={state:d,setOptions:function(x){var E=typeof x=="function"?x(d.options):x;A(),d.options=Object.assign({},s,d.options,E),d.scrollParents={reference:ra(a)?Uc(a):a.contextElement?Uc(a.contextElement):[],popper:Uc(l)};var b=o$(l$([].concat(r,d.options.modifiers)));return d.orderedModifiers=b.filter(function(j){return j.enabled}),I(),y.update()},forceUpdate:function(){if(!g){var x=d.elements,E=x.reference,b=x.popper;if(RE(E,b)){d.rects={reference:i$(E,Bu(b),d.options.strategy==="fixed"),popper:Zv(b)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(C){return d.modifiersData[C.name]=Object.assign({},C.data)});for(var j=0;j<d.orderedModifiers.length;j++){if(d.reset===!0){d.reset=!1,j=-1;continue}var B=d.orderedModifiers[j],R=B.fn,k=B.options,w=k===void 0?{}:k,S=B.name;typeof R=="function"&&(d=R({state:d,options:w,name:S,instance:y})||d)}}}},update:a$(function(){return new Promise(function(N){y.forceUpdate(),N(d)})}),destroy:function(){A(),g=!0}};if(!RE(a,l))return y;y.setOptions(u).then(function(N){!g&&u.onFirstUpdate&&u.onFirstUpdate(N)});function I(){d.orderedModifiers.forEach(function(N){var x=N.name,E=N.options,b=E===void 0?{}:E,j=N.effect;if(typeof j=="function"){var B=j({state:d,name:x,instance:y,options:b}),R=function(){};p.push(B||R)}})}function A(){p.forEach(function(N){return N()}),p=[]}return y}}var c$=np(),u$=[ny,oy,ty,Xv],d$=np({defaultModifiers:u$}),h$=[ny,oy,ty,Xv,Bx,$x,zx,Mx,Ux],f$=np({defaultModifiers:h$});const p$=Object.freeze(Object.defineProperty({__proto__:null,afterMain:xx,afterRead:Ix,afterWrite:Rx,applyStyles:Xv,arrow:Mx,auto:ep,basePlacements:Ll,beforeMain:Sx,beforeRead:Tx,beforeWrite:kx,bottom:rr,clippingParents:wx,computeStyles:ty,createPopper:f$,createPopperBase:c$,createPopperLite:d$,detectOverflow:Tl,end:vl,eventListeners:ny,flip:$x,hide:Ux,left:Sn,main:Ax,modifierPhases:Px,offset:Bx,placements:Jv,popper:Ra,popperGenerator:np,popperOffsets:oy,preventOverflow:zx,read:bx,reference:Ex,right:ir,start:na,top:In,variationPlacements:Fg,viewport:Qv,write:Cx},Symbol.toStringTag,{value:"Module"})),m$=ZE(p$);/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r(m$)})(tr,function(n){function r(M){const h=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(M){for(const v in M)if(v!=="default"){const D=Object.getOwnPropertyDescriptor(M,v);Object.defineProperty(h,v,D.get?D:{enumerable:!0,get:()=>M[v]})}}return h.default=M,Object.freeze(h)}const i=r(n),s=new Map,o={set(M,h,v){s.has(M)||s.set(M,new Map);const D=s.get(M);D.has(h)||D.size===0?D.set(h,v):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(D.keys())[0]}.`)},get:(M,h)=>s.has(M)&&s.get(M).get(h)||null,remove(M,h){if(!s.has(M))return;const v=s.get(M);v.delete(h),v.size===0&&s.delete(M)}},a="transitionend",l=M=>(M&&window.CSS&&window.CSS.escape&&(M=M.replace(/#([^\s"#']+)/g,(h,v)=>`#${CSS.escape(v)}`)),M),u=M=>{M.dispatchEvent(new Event(a))},d=M=>!(!M||typeof M!="object")&&(M.jquery!==void 0&&(M=M[0]),M.nodeType!==void 0),p=M=>d(M)?M.jquery?M[0]:M:typeof M=="string"&&M.length>0?document.querySelector(l(M)):null,g=M=>{if(!d(M)||M.getClientRects().length===0)return!1;const h=getComputedStyle(M).getPropertyValue("visibility")==="visible",v=M.closest("details:not([open])");if(!v)return h;if(v!==M){const D=M.closest("summary");if(D&&D.parentNode!==v||D===null)return!1}return h},y=M=>!M||M.nodeType!==Node.ELEMENT_NODE||!!M.classList.contains("disabled")||(M.disabled!==void 0?M.disabled:M.hasAttribute("disabled")&&M.getAttribute("disabled")!=="false"),I=M=>{if(!document.documentElement.attachShadow)return null;if(typeof M.getRootNode=="function"){const h=M.getRootNode();return h instanceof ShadowRoot?h:null}return M instanceof ShadowRoot?M:M.parentNode?I(M.parentNode):null},A=()=>{},N=M=>{M.offsetHeight},x=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E=[],b=()=>document.documentElement.dir==="rtl",j=M=>{var h;h=()=>{const v=x();if(v){const D=M.NAME,G=v.fn[D];v.fn[D]=M.jQueryInterface,v.fn[D].Constructor=M,v.fn[D].noConflict=()=>(v.fn[D]=G,M.jQueryInterface)}},document.readyState==="loading"?(E.length||document.addEventListener("DOMContentLoaded",()=>{for(const v of E)v()}),E.push(h)):h()},B=(M,h=[],v=M)=>typeof M=="function"?M(...h):v,R=(M,h,v=!0)=>{if(!v)return void B(M);const D=(oe=>{if(!oe)return 0;let{transitionDuration:Oe,transitionDelay:gt}=window.getComputedStyle(oe);const On=Number.parseFloat(Oe),Gn=Number.parseFloat(gt);return On||Gn?(Oe=Oe.split(",")[0],gt=gt.split(",")[0],1e3*(Number.parseFloat(Oe)+Number.parseFloat(gt))):0})(h)+5;let G=!1;const ee=({target:oe})=>{oe===h&&(G=!0,h.removeEventListener(a,ee),B(M))};h.addEventListener(a,ee),setTimeout(()=>{G||u(h)},D)},k=(M,h,v,D)=>{const G=M.length;let ee=M.indexOf(h);return ee===-1?!v&&D?M[G-1]:M[0]:(ee+=v?1:-1,D&&(ee=(ee+G)%G),M[Math.max(0,Math.min(ee,G-1))])},w=/[^.]*(?=\..*)\.|.*/,S=/\..*/,C=/::\d+$/,O={};let V=1;const P={mouseenter:"mouseover",mouseleave:"mouseout"},ge=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Qe(M,h){return h&&`${h}::${V++}`||M.uidEvent||V++}function Je(M){const h=Qe(M);return M.uidEvent=h,O[h]=O[h]||{},O[h]}function we(M,h,v=null){return Object.values(M).find(D=>D.callable===h&&D.delegationSelector===v)}function X(M,h,v){const D=typeof h=="string",G=D?v:h||v;let ee=Te(M);return ge.has(ee)||(ee=M),[D,G,ee]}function ae(M,h,v,D,G){if(typeof h!="string"||!M)return;let[ee,oe,Oe]=X(h,v,D);h in P&&(oe=(To=>function(Fr){if(!Fr.relatedTarget||Fr.relatedTarget!==Fr.delegateTarget&&!Fr.delegateTarget.contains(Fr.relatedTarget))return To.call(this,Fr)})(oe));const gt=Je(M),On=gt[Oe]||(gt[Oe]={}),Gn=we(On,oe,ee?v:null);if(Gn)return void(Gn.oneOff=Gn.oneOff&&G);const Vr=Qe(oe,h.replace(w,"")),Oi=ee?function(ji,To,Fr){return function ec(vd){const Fk=ji.querySelectorAll(To);for(let{target:bo}=vd;bo&&bo!==this;bo=bo.parentNode)for(const $k of Fk)if($k===bo)return $e(vd,{delegateTarget:bo}),ec.oneOff&&H.off(ji,vd.type,To,Fr),Fr.apply(bo,[vd])}}(M,v,oe):function(ji,To){return function Fr(ec){return $e(ec,{delegateTarget:ji}),Fr.oneOff&&H.off(ji,ec.type,To),To.apply(ji,[ec])}}(M,oe);Oi.delegationSelector=ee?v:null,Oi.callable=oe,Oi.oneOff=G,Oi.uidEvent=Vr,On[Vr]=Oi,M.addEventListener(Oe,Oi,ee)}function de(M,h,v,D,G){const ee=we(h[v],D,G);ee&&(M.removeEventListener(v,ee,!!G),delete h[v][ee.uidEvent])}function Ae(M,h,v,D){const G=h[v]||{};for(const[ee,oe]of Object.entries(G))ee.includes(D)&&de(M,h,v,oe.callable,oe.delegationSelector)}function Te(M){return M=M.replace(S,""),P[M]||M}const H={on(M,h,v,D){ae(M,h,v,D,!1)},one(M,h,v,D){ae(M,h,v,D,!0)},off(M,h,v,D){if(typeof h!="string"||!M)return;const[G,ee,oe]=X(h,v,D),Oe=oe!==h,gt=Je(M),On=gt[oe]||{},Gn=h.startsWith(".");if(ee===void 0){if(Gn)for(const Vr of Object.keys(gt))Ae(M,gt,Vr,h.slice(1));for(const[Vr,Oi]of Object.entries(On)){const ji=Vr.replace(C,"");Oe&&!h.includes(ji)||de(M,gt,oe,Oi.callable,Oi.delegationSelector)}}else{if(!Object.keys(On).length)return;de(M,gt,oe,ee,G?v:null)}},trigger(M,h,v){if(typeof h!="string"||!M)return null;const D=x();let G=null,ee=!0,oe=!0,Oe=!1;h!==Te(h)&&D&&(G=D.Event(h,v),D(M).trigger(G),ee=!G.isPropagationStopped(),oe=!G.isImmediatePropagationStopped(),Oe=G.isDefaultPrevented());const gt=$e(new Event(h,{bubbles:ee,cancelable:!0}),v);return Oe&&gt.preventDefault(),oe&&M.dispatchEvent(gt),gt.defaultPrevented&&G&&G.preventDefault(),gt}};function $e(M,h={}){for(const[v,D]of Object.entries(h))try{M[v]=D}catch{Object.defineProperty(M,v,{configurable:!0,get:()=>D})}return M}function qe(M){if(M==="true")return!0;if(M==="false")return!1;if(M===Number(M).toString())return Number(M);if(M===""||M==="null")return null;if(typeof M!="string")return M;try{return JSON.parse(decodeURIComponent(M))}catch{return M}}function Ye(M){return M.replace(/[A-Z]/g,h=>`-${h.toLowerCase()}`)}const tt={setDataAttribute(M,h,v){M.setAttribute(`data-bs-${Ye(h)}`,v)},removeDataAttribute(M,h){M.removeAttribute(`data-bs-${Ye(h)}`)},getDataAttributes(M){if(!M)return{};const h={},v=Object.keys(M.dataset).filter(D=>D.startsWith("bs")&&!D.startsWith("bsConfig"));for(const D of v){let G=D.replace(/^bs/,"");G=G.charAt(0).toLowerCase()+G.slice(1,G.length),h[G]=qe(M.dataset[D])}return h},getDataAttribute:(M,h)=>qe(M.getAttribute(`data-bs-${Ye(h)}`))};class Nt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(h){return h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h}_mergeConfigObj(h,v){const D=d(v)?tt.getDataAttribute(v,"config"):{};return{...this.constructor.Default,...typeof D=="object"?D:{},...d(v)?tt.getDataAttributes(v):{},...typeof h=="object"?h:{}}}_typeCheckConfig(h,v=this.constructor.DefaultType){for(const[G,ee]of Object.entries(v)){const oe=h[G],Oe=d(oe)?"element":(D=oe)==null?`${D}`:Object.prototype.toString.call(D).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(Oe))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${G}" provided type "${Oe}" but expected type "${ee}".`)}var D}}class Ot extends Nt{constructor(h,v){super(),(h=p(h))&&(this._element=h,this._config=this._getConfig(v),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),H.off(this._element,this.constructor.EVENT_KEY);for(const h of Object.getOwnPropertyNames(this))this[h]=null}_queueCallback(h,v,D=!0){R(h,v,D)}_getConfig(h){return h=this._mergeConfigObj(h,this._element),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}static getInstance(h){return o.get(p(h),this.DATA_KEY)}static getOrCreateInstance(h,v={}){return this.getInstance(h)||new this(h,typeof v=="object"?v:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(h){return`${h}${this.EVENT_KEY}`}}const cr=M=>{let h=M.getAttribute("data-bs-target");if(!h||h==="#"){let v=M.getAttribute("href");if(!v||!v.includes("#")&&!v.startsWith("."))return null;v.includes("#")&&!v.startsWith("#")&&(v=`#${v.split("#")[1]}`),h=v&&v!=="#"?v.trim():null}return h?h.split(",").map(v=>l(v)).join(","):null},ie={find:(M,h=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(h,M)),findOne:(M,h=document.documentElement)=>Element.prototype.querySelector.call(h,M),children:(M,h)=>[].concat(...M.children).filter(v=>v.matches(h)),parents(M,h){const v=[];let D=M.parentNode.closest(h);for(;D;)v.push(D),D=D.parentNode.closest(h);return v},prev(M,h){let v=M.previousElementSibling;for(;v;){if(v.matches(h))return[v];v=v.previousElementSibling}return[]},next(M,h){let v=M.nextElementSibling;for(;v;){if(v.matches(h))return[v];v=v.nextElementSibling}return[]},focusableChildren(M){const h=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(v=>`${v}:not([tabindex^="-"])`).join(",");return this.find(h,M).filter(v=>!y(v)&&g(v))},getSelectorFromElement(M){const h=cr(M);return h&&ie.findOne(h)?h:null},getElementFromSelector(M){const h=cr(M);return h?ie.findOne(h):null},getMultipleElementsFromSelector(M){const h=cr(M);return h?ie.find(h):[]}},nt=(M,h="hide")=>{const v=`click.dismiss${M.EVENT_KEY}`,D=M.NAME;H.on(document,v,`[data-bs-dismiss="${D}"]`,function(G){if(["A","AREA"].includes(this.tagName)&&G.preventDefault(),y(this))return;const ee=ie.getElementFromSelector(this)||this.closest(`.${D}`);M.getOrCreateInstance(ee)[h]()})},tn=".bs.alert",ni=`close${tn}`,xi=`closed${tn}`;class jt extends Ot{static get NAME(){return"alert"}close(){if(H.trigger(this._element,ni).defaultPrevented)return;this._element.classList.remove("show");const h=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,h)}_destroyElement(){this._element.remove(),H.trigger(this._element,xi),this.dispose()}static jQueryInterface(h){return this.each(function(){const v=jt.getOrCreateInstance(this);if(typeof h=="string"){if(v[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);v[h](this)}})}}nt(jt,"close"),j(jt);const ki='[data-bs-toggle="button"]';class xr extends Ot{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(h){return this.each(function(){const v=xr.getOrCreateInstance(this);h==="toggle"&&v[h]()})}}H.on(document,"click.bs.button.data-api",ki,M=>{M.preventDefault();const h=M.target.closest(ki);xr.getOrCreateInstance(h).toggle()}),j(xr);const Rn=".bs.swipe",pn=`touchstart${Rn}`,kr=`touchmove${Rn}`,ls=`touchend${Rn}`,ri=`pointerdown${Rn}`,mn=`pointerup${Rn}`,zn={endCallback:null,leftCallback:null,rightCallback:null},ht={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Xe extends Nt{constructor(h,v){super(),this._element=h,h&&Xe.isSupported()&&(this._config=this._getConfig(v),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return zn}static get DefaultType(){return ht}static get NAME(){return"swipe"}dispose(){H.off(this._element,Rn)}_start(h){this._supportPointerEvents?this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX):this._deltaX=h.touches[0].clientX}_end(h){this._eventIsPointerPenTouch(h)&&(this._deltaX=h.clientX-this._deltaX),this._handleSwipe(),B(this._config.endCallback)}_move(h){this._deltaX=h.touches&&h.touches.length>1?0:h.touches[0].clientX-this._deltaX}_handleSwipe(){const h=Math.abs(this._deltaX);if(h<=40)return;const v=h/this._deltaX;this._deltaX=0,v&&B(v>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(H.on(this._element,ri,h=>this._start(h)),H.on(this._element,mn,h=>this._end(h)),this._element.classList.add("pointer-event")):(H.on(this._element,pn,h=>this._start(h)),H.on(this._element,kr,h=>this._move(h)),H.on(this._element,ls,h=>this._end(h)))}_eventIsPointerPenTouch(h){return this._supportPointerEvents&&(h.pointerType==="pen"||h.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ot=".bs.carousel",gn=".data-api",Cr="next",qn="prev",Pn="left",nn="right",co=`slide${ot}`,ii=`slid${ot}`,pa=`keydown${ot}`,$l=`mouseenter${ot}`,cs=`mouseleave${ot}`,Ci=`dragstart${ot}`,uo=`load${ot}${gn}`,Rr=`click${ot}${gn}`,Pr="carousel",ur="active",dr=".active",us=".carousel-item",ds=dr+us,ho={ArrowLeft:nn,ArrowRight:Pn},hr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ri={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ft extends Ot{constructor(h,v){super(h,v),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ie.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Pr&&this.cycle()}static get Default(){return hr}static get DefaultType(){return Ri}static get NAME(){return"carousel"}next(){this._slide(Cr)}nextWhenVisible(){!document.hidden&&g(this._element)&&this.next()}prev(){this._slide(qn)}pause(){this._isSliding&&u(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?H.one(this._element,ii,()=>this.cycle()):this.cycle())}to(h){const v=this._getItems();if(h>v.length-1||h<0)return;if(this._isSliding)return void H.one(this._element,ii,()=>this.to(h));const D=this._getItemIndex(this._getActive());if(D===h)return;const G=h>D?Cr:qn;this._slide(G,v[h])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(h){return h.defaultInterval=h.interval,h}_addEventListeners(){this._config.keyboard&&H.on(this._element,pa,h=>this._keydown(h)),this._config.pause==="hover"&&(H.on(this._element,$l,()=>this.pause()),H.on(this._element,cs,()=>this._maybeEnableCycle())),this._config.touch&&Xe.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const v of ie.find(".carousel-item img",this._element))H.on(v,Ci,D=>D.preventDefault());const h={leftCallback:()=>this._slide(this._directionToOrder(Pn)),rightCallback:()=>this._slide(this._directionToOrder(nn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Xe(this._element,h)}_keydown(h){if(/input|textarea/i.test(h.target.tagName))return;const v=ho[h.key];v&&(h.preventDefault(),this._slide(this._directionToOrder(v)))}_getItemIndex(h){return this._getItems().indexOf(h)}_setActiveIndicatorElement(h){if(!this._indicatorsElement)return;const v=ie.findOne(dr,this._indicatorsElement);v.classList.remove(ur),v.removeAttribute("aria-current");const D=ie.findOne(`[data-bs-slide-to="${h}"]`,this._indicatorsElement);D&&(D.classList.add(ur),D.setAttribute("aria-current","true"))}_updateInterval(){const h=this._activeElement||this._getActive();if(!h)return;const v=Number.parseInt(h.getAttribute("data-bs-interval"),10);this._config.interval=v||this._config.defaultInterval}_slide(h,v=null){if(this._isSliding)return;const D=this._getActive(),G=h===Cr,ee=v||k(this._getItems(),D,G,this._config.wrap);if(ee===D)return;const oe=this._getItemIndex(ee),Oe=Vr=>H.trigger(this._element,Vr,{relatedTarget:ee,direction:this._orderToDirection(h),from:this._getItemIndex(D),to:oe});if(Oe(co).defaultPrevented||!D||!ee)return;const gt=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(oe),this._activeElement=ee;const On=G?"carousel-item-start":"carousel-item-end",Gn=G?"carousel-item-next":"carousel-item-prev";ee.classList.add(Gn),N(ee),D.classList.add(On),ee.classList.add(On),this._queueCallback(()=>{ee.classList.remove(On,Gn),ee.classList.add(ur),D.classList.remove(ur,Gn,On),this._isSliding=!1,Oe(ii)},D,this._isAnimated()),gt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ie.findOne(ds,this._element)}_getItems(){return ie.find(us,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(h){return b()?h===Pn?qn:Cr:h===Pn?Cr:qn}_orderToDirection(h){return b()?h===qn?Pn:nn:h===qn?nn:Pn}static jQueryInterface(h){return this.each(function(){const v=ft.getOrCreateInstance(this,h);if(typeof h!="number"){if(typeof h=="string"){if(v[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);v[h]()}}else v.to(h)})}}H.on(document,Rr,"[data-bs-slide], [data-bs-slide-to]",function(M){const h=ie.getElementFromSelector(this);if(!h||!h.classList.contains(Pr))return;M.preventDefault();const v=ft.getOrCreateInstance(h),D=this.getAttribute("data-bs-slide-to");return D?(v.to(D),void v._maybeEnableCycle()):tt.getDataAttribute(this,"slide")==="next"?(v.next(),void v._maybeEnableCycle()):(v.prev(),void v._maybeEnableCycle())}),H.on(window,uo,()=>{const M=ie.find('[data-bs-ride="carousel"]');for(const h of M)ft.getOrCreateInstance(h)}),j(ft);const si=".bs.collapse",L=`show${si}`,$=`shown${si}`,z=`hide${si}`,W=`hidden${si}`,te=`click${si}.data-api`,se="show",he="collapse",Y="collapsing",_e=`:scope .${he} .${he}`,ce='[data-bs-toggle="collapse"]',ue={parent:null,toggle:!0},xe={parent:"(null|element)",toggle:"boolean"};class ke extends Ot{constructor(h,v){super(h,v),this._isTransitioning=!1,this._triggerArray=[];const D=ie.find(ce);for(const G of D){const ee=ie.getSelectorFromElement(G),oe=ie.find(ee).filter(Oe=>Oe===this._element);ee!==null&&oe.length&&this._triggerArray.push(G)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ue}static get DefaultType(){return xe}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let h=[];if(this._config.parent&&(h=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(G=>G!==this._element).map(G=>ke.getOrCreateInstance(G,{toggle:!1}))),h.length&&h[0]._isTransitioning||H.trigger(this._element,L).defaultPrevented)return;for(const G of h)G.hide();const v=this._getDimension();this._element.classList.remove(he),this._element.classList.add(Y),this._element.style[v]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const D=`scroll${v[0].toUpperCase()+v.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he,se),this._element.style[v]="",H.trigger(this._element,$)},this._element,!0),this._element.style[v]=`${this._element[D]}px`}hide(){if(this._isTransitioning||!this._isShown()||H.trigger(this._element,z).defaultPrevented)return;const h=this._getDimension();this._element.style[h]=`${this._element.getBoundingClientRect()[h]}px`,N(this._element),this._element.classList.add(Y),this._element.classList.remove(he,se);for(const v of this._triggerArray){const D=ie.getElementFromSelector(v);D&&!this._isShown(D)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0,this._element.style[h]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he),H.trigger(this._element,W)},this._element,!0)}_isShown(h=this._element){return h.classList.contains(se)}_configAfterMerge(h){return h.toggle=!!h.toggle,h.parent=p(h.parent),h}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const h=this._getFirstLevelChildren(ce);for(const v of h){const D=ie.getElementFromSelector(v);D&&this._addAriaAndCollapsedClass([v],this._isShown(D))}}_getFirstLevelChildren(h){const v=ie.find(_e,this._config.parent);return ie.find(h,this._config.parent).filter(D=>!v.includes(D))}_addAriaAndCollapsedClass(h,v){if(h.length)for(const D of h)D.classList.toggle("collapsed",!v),D.setAttribute("aria-expanded",v)}static jQueryInterface(h){const v={};return typeof h=="string"&&/show|hide/.test(h)&&(v.toggle=!1),this.each(function(){const D=ke.getOrCreateInstance(this,v);if(typeof h=="string"){if(D[h]===void 0)throw new TypeError(`No method named "${h}"`);D[h]()}})}}H.on(document,te,ce,function(M){(M.target.tagName==="A"||M.delegateTarget&&M.delegateTarget.tagName==="A")&&M.preventDefault();for(const h of ie.getMultipleElementsFromSelector(this))ke.getOrCreateInstance(h,{toggle:!1}).toggle()}),j(ke);const Me="dropdown",be=".bs.dropdown",at=".data-api",lt="ArrowUp",Nr="ArrowDown",fr=`hide${be}`,Hn=`hidden${be}`,Or=`show${be}`,pr=`shown${be}`,Dt=`click${be}${at}`,_n=`keydown${be}${at}`,oi=`keyup${be}${at}`,Wn="show",pe='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ze=`${pe}.${Wn}`,bt=".dropdown-menu",Ue=b()?"top-end":"top-start",vn=b()?"top-start":"top-end",fo=b()?"bottom-end":"bottom-start",ma=b()?"bottom-start":"bottom-end",dp=b()?"left-start":"right-start",hp=b()?"right-start":"left-start",Ku={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Gu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Kn extends Ot{constructor(h,v){super(h,v),this._popper=null,this._parent=this._element.parentNode,this._menu=ie.next(this._element,bt)[0]||ie.prev(this._element,bt)[0]||ie.findOne(bt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ku}static get DefaultType(){return Gu}static get NAME(){return Me}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const h={relatedTarget:this._element};if(!H.trigger(this._element,Or,h).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const v of[].concat(...document.body.children))H.on(v,"mouseover",A);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Wn),this._element.classList.add(Wn),H.trigger(this._element,pr,h)}}hide(){if(y(this._element)||!this._isShown())return;const h={relatedTarget:this._element};this._completeHide(h)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(h){if(!H.trigger(this._element,fr,h).defaultPrevented){if("ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))H.off(v,"mouseover",A);this._popper&&this._popper.destroy(),this._menu.classList.remove(Wn),this._element.classList.remove(Wn),this._element.setAttribute("aria-expanded","false"),tt.removeDataAttribute(this._menu,"popper"),H.trigger(this._element,Hn,h)}}_getConfig(h){if(typeof(h=super._getConfig(h)).reference=="object"&&!d(h.reference)&&typeof h.reference.getBoundingClientRect!="function")throw new TypeError(`${Me.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return h}_createPopper(){if(i===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let h=this._element;this._config.reference==="parent"?h=this._parent:d(this._config.reference)?h=p(this._config.reference):typeof this._config.reference=="object"&&(h=this._config.reference);const v=this._getPopperConfig();this._popper=i.createPopper(h,this._menu,v)}_isShown(){return this._menu.classList.contains(Wn)}_getPlacement(){const h=this._parent;if(h.classList.contains("dropend"))return dp;if(h.classList.contains("dropstart"))return hp;if(h.classList.contains("dropup-center"))return"top";if(h.classList.contains("dropdown-center"))return"bottom";const v=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return h.classList.contains("dropup")?v?vn:Ue:v?ma:fo}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(v=>Number.parseInt(v,10)):typeof h=="function"?v=>h(v,this._element):h}_getPopperConfig(){const h={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(tt.setDataAttribute(this._menu,"popper","static"),h.modifiers=[{name:"applyStyles",enabled:!1}]),{...h,...B(this._config.popperConfig,[h])}}_selectMenuItem({key:h,target:v}){const D=ie.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(G=>g(G));D.length&&k(D,v,h===Nr,!D.includes(v)).focus()}static jQueryInterface(h){return this.each(function(){const v=Kn.getOrCreateInstance(this,h);if(typeof h=="string"){if(v[h]===void 0)throw new TypeError(`No method named "${h}"`);v[h]()}})}static clearMenus(h){if(h.button===2||h.type==="keyup"&&h.key!=="Tab")return;const v=ie.find(Ze);for(const D of v){const G=Kn.getInstance(D);if(!G||G._config.autoClose===!1)continue;const ee=h.composedPath(),oe=ee.includes(G._menu);if(ee.includes(G._element)||G._config.autoClose==="inside"&&!oe||G._config.autoClose==="outside"&&oe||G._menu.contains(h.target)&&(h.type==="keyup"&&h.key==="Tab"||/input|select|option|textarea|form/i.test(h.target.tagName)))continue;const Oe={relatedTarget:G._element};h.type==="click"&&(Oe.clickEvent=h),G._completeHide(Oe)}}static dataApiKeydownHandler(h){const v=/input|textarea/i.test(h.target.tagName),D=h.key==="Escape",G=[lt,Nr].includes(h.key);if(!G&&!D||v&&!D)return;h.preventDefault();const ee=this.matches(pe)?this:ie.prev(this,pe)[0]||ie.next(this,pe)[0]||ie.findOne(pe,h.delegateTarget.parentNode),oe=Kn.getOrCreateInstance(ee);if(G)return h.stopPropagation(),oe.show(),void oe._selectMenuItem(h);oe._isShown()&&(h.stopPropagation(),oe.hide(),ee.focus())}}H.on(document,_n,pe,Kn.dataApiKeydownHandler),H.on(document,_n,bt,Kn.dataApiKeydownHandler),H.on(document,Dt,Kn.clearMenus),H.on(document,oi,Kn.clearMenus),H.on(document,Dt,pe,function(M){M.preventDefault(),Kn.getOrCreateInstance(this).toggle()}),j(Kn);const ai="backdrop",mr="show",po=`mousedown.bs.${ai}`,ga={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Qu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class We extends Nt{constructor(h){super(),this._config=this._getConfig(h),this._isAppended=!1,this._element=null}static get Default(){return ga}static get DefaultType(){return Qu}static get NAME(){return ai}show(h){if(!this._config.isVisible)return void B(h);this._append();const v=this._getElement();this._config.isAnimated&&N(v),v.classList.add(mr),this._emulateAnimation(()=>{B(h)})}hide(h){this._config.isVisible?(this._getElement().classList.remove(mr),this._emulateAnimation(()=>{this.dispose(),B(h)})):B(h)}dispose(){this._isAppended&&(H.off(this._element,po),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const h=document.createElement("div");h.className=this._config.className,this._config.isAnimated&&h.classList.add("fade"),this._element=h}return this._element}_configAfterMerge(h){return h.rootElement=p(h.rootElement),h}_append(){if(this._isAppended)return;const h=this._getElement();this._config.rootElement.append(h),H.on(h,po,()=>{B(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(h){R(h,this._getElement(),this._config.isAnimated)}}const Pi=".bs.focustrap",mo=`focusin${Pi}`,go=`keydown.tab${Pi}`,Ju="backward",Yu={autofocus:!0,trapElement:null},fp={autofocus:"boolean",trapElement:"element"};class Xu extends Nt{constructor(h){super(),this._config=this._getConfig(h),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Yu}static get DefaultType(){return fp}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),H.off(document,Pi),H.on(document,mo,h=>this._handleFocusin(h)),H.on(document,go,h=>this._handleKeydown(h)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,H.off(document,Pi))}_handleFocusin(h){const{trapElement:v}=this._config;if(h.target===document||h.target===v||v.contains(h.target))return;const D=ie.focusableChildren(v);D.length===0?v.focus():this._lastTabNavDirection===Ju?D[D.length-1].focus():D[0].focus()}_handleKeydown(h){h.key==="Tab"&&(this._lastTabNavDirection=h.shiftKey?Ju:"forward")}}const Zu=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ed=".sticky-top",li="padding-right",jr="margin-right";class _a{constructor(){this._element=document.body}getWidth(){const h=document.documentElement.clientWidth;return Math.abs(window.innerWidth-h)}hide(){const h=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,li,v=>v+h),this._setElementAttributes(Zu,li,v=>v+h),this._setElementAttributes(ed,jr,v=>v-h)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,li),this._resetElementAttributes(Zu,li),this._resetElementAttributes(ed,jr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(h,v,D){const G=this.getWidth();this._applyManipulationCallback(h,ee=>{if(ee!==this._element&&window.innerWidth>ee.clientWidth+G)return;this._saveInitialAttribute(ee,v);const oe=window.getComputedStyle(ee).getPropertyValue(v);ee.style.setProperty(v,`${D(Number.parseFloat(oe))}px`)})}_saveInitialAttribute(h,v){const D=h.style.getPropertyValue(v);D&&tt.setDataAttribute(h,v,D)}_resetElementAttributes(h,v){this._applyManipulationCallback(h,D=>{const G=tt.getDataAttribute(D,v);G!==null?(tt.removeDataAttribute(D,v),D.style.setProperty(v,G)):D.style.removeProperty(v)})}_applyManipulationCallback(h,v){if(d(h))v(h);else for(const D of ie.find(h,this._element))v(D)}}const yn=".bs.modal",td=`hide${yn}`,hs=`hidePrevented${yn}`,nd=`hidden${yn}`,rd=`show${yn}`,pp=`shown${yn}`,ci=`resize${yn}`,mp=`click.dismiss${yn}`,gp=`mousedown.dismiss${yn}`,_o=`keydown.dismiss${yn}`,va=`click${yn}.data-api`,Ul="modal-open",fs="show",Ni="modal-static",id={backdrop:!0,focus:!0,keyboard:!0},Bl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Be extends Ot{constructor(h,v){super(h,v),this._dialog=ie.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new _a,this._addEventListeners()}static get Default(){return id}static get DefaultType(){return Bl}static get NAME(){return"modal"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||this._isTransitioning||H.trigger(this._element,rd,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ul),this._adjustDialog(),this._backdrop.show(()=>this._showElement(h)))}hide(){this._isShown&&!this._isTransitioning&&(H.trigger(this._element,td).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(fs),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){H.off(window,yn),H.off(this._dialog,yn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new We({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Xu({trapElement:this._element})}_showElement(h){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const v=ie.findOne(".modal-body",this._dialog);v&&(v.scrollTop=0),N(this._element),this._element.classList.add(fs),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,H.trigger(this._element,pp,{relatedTarget:h})},this._dialog,this._isAnimated())}_addEventListeners(){H.on(this._element,_o,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),H.on(window,ci,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),H.on(this._element,gp,h=>{H.one(this._element,mp,v=>{this._element===h.target&&this._element===v.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ul),this._resetAdjustments(),this._scrollBar.reset(),H.trigger(this._element,nd)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(H.trigger(this._element,hs).defaultPrevented)return;const h=this._element.scrollHeight>document.documentElement.clientHeight,v=this._element.style.overflowY;v==="hidden"||this._element.classList.contains(Ni)||(h||(this._element.style.overflowY="hidden"),this._element.classList.add(Ni),this._queueCallback(()=>{this._element.classList.remove(Ni),this._queueCallback(()=>{this._element.style.overflowY=v},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const h=this._element.scrollHeight>document.documentElement.clientHeight,v=this._scrollBar.getWidth(),D=v>0;if(D&&!h){const G=b()?"paddingLeft":"paddingRight";this._element.style[G]=`${v}px`}if(!D&&h){const G=b()?"paddingRight":"paddingLeft";this._element.style[G]=`${v}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(h,v){return this.each(function(){const D=Be.getOrCreateInstance(this,h);if(typeof h=="string"){if(D[h]===void 0)throw new TypeError(`No method named "${h}"`);D[h](v)}})}}H.on(document,va,'[data-bs-toggle="modal"]',function(M){const h=ie.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&M.preventDefault(),H.one(h,rd,D=>{D.defaultPrevented||H.one(h,nd,()=>{g(this)&&this.focus()})});const v=ie.findOne(".modal.show");v&&Be.getInstance(v).hide(),Be.getOrCreateInstance(h).toggle(this)}),nt(Be),j(Be);const Dr=".bs.offcanvas",sd=".data-api",od=`load${Dr}${sd}`,zl="show",ql="showing",vo="hiding",Hl=".offcanvas.show",Lr=`show${Dr}`,ad=`shown${Dr}`,_p=`hide${Dr}`,ps=`hidePrevented${Dr}`,Wl=`hidden${Dr}`,Kl=`resize${Dr}`,ya=`click${Dr}${sd}`,ld=`keydown.dismiss${Dr}`,wa={backdrop:!0,keyboard:!0,scroll:!1},vp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class gr extends Ot{constructor(h,v){super(h,v),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return wa}static get DefaultType(){return vp}static get NAME(){return"offcanvas"}toggle(h){return this._isShown?this.hide():this.show(h)}show(h){this._isShown||H.trigger(this._element,Lr,{relatedTarget:h}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new _a().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ql),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(zl),this._element.classList.remove(ql),H.trigger(this._element,ad,{relatedTarget:h})},this._element,!0))}hide(){this._isShown&&(H.trigger(this._element,_p).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(vo),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(zl,vo),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new _a().reset(),H.trigger(this._element,Wl)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const h=!!this._config.backdrop;return new We({className:"offcanvas-backdrop",isVisible:h,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:h?()=>{this._config.backdrop!=="static"?this.hide():H.trigger(this._element,ps)}:null})}_initializeFocusTrap(){return new Xu({trapElement:this._element})}_addEventListeners(){H.on(this._element,ld,h=>{h.key==="Escape"&&(this._config.keyboard?this.hide():H.trigger(this._element,ps))})}static jQueryInterface(h){return this.each(function(){const v=gr.getOrCreateInstance(this,h);if(typeof h=="string"){if(v[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);v[h](this)}})}}H.on(document,ya,'[data-bs-toggle="offcanvas"]',function(M){const h=ie.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this))return;H.one(h,Wl,()=>{g(this)&&this.focus()});const v=ie.findOne(Hl);v&&v!==h&&gr.getInstance(v).hide(),gr.getOrCreateInstance(h).toggle(this)}),H.on(window,od,()=>{for(const M of ie.find(Hl))gr.getOrCreateInstance(M).show()}),H.on(window,Kl,()=>{for(const M of ie.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(M).position!=="fixed"&&gr.getOrCreateInstance(M).hide()}),nt(gr),j(gr);const ms={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},cd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ud=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Gl=(M,h)=>{const v=M.nodeName.toLowerCase();return h.includes(v)?!cd.has(v)||!!ud.test(M.nodeValue):h.filter(D=>D instanceof RegExp).some(D=>D.test(v))},Ql={allowList:ms,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},dd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ea={entry:"(string|element|function|null)",selector:"(string|element)"};class hd extends Nt{constructor(h){super(),this._config=this._getConfig(h)}static get Default(){return Ql}static get DefaultType(){return dd}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(h=>this._resolvePossibleFunction(h)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(h){return this._checkContent(h),this._config.content={...this._config.content,...h},this}toHtml(){const h=document.createElement("div");h.innerHTML=this._maybeSanitize(this._config.template);for(const[G,ee]of Object.entries(this._config.content))this._setContent(h,ee,G);const v=h.children[0],D=this._resolvePossibleFunction(this._config.extraClass);return D&&v.classList.add(...D.split(" ")),v}_typeCheckConfig(h){super._typeCheckConfig(h),this._checkContent(h.content)}_checkContent(h){for(const[v,D]of Object.entries(h))super._typeCheckConfig({selector:v,entry:D},Ea)}_setContent(h,v,D){const G=ie.findOne(D,h);G&&((v=this._resolvePossibleFunction(v))?d(v)?this._putElementInTemplate(p(v),G):this._config.html?G.innerHTML=this._maybeSanitize(v):G.textContent=v:G.remove())}_maybeSanitize(h){return this._config.sanitize?function(v,D,G){if(!v.length)return v;if(G&&typeof G=="function")return G(v);const ee=new window.DOMParser().parseFromString(v,"text/html"),oe=[].concat(...ee.body.querySelectorAll("*"));for(const Oe of oe){const gt=Oe.nodeName.toLowerCase();if(!Object.keys(D).includes(gt)){Oe.remove();continue}const On=[].concat(...Oe.attributes),Gn=[].concat(D["*"]||[],D[gt]||[]);for(const Vr of On)Gl(Vr,Gn)||Oe.removeAttribute(Vr.nodeName)}return ee.body.innerHTML}(h,this._config.allowList,this._config.sanitizeFn):h}_resolvePossibleFunction(h){return B(h,[this])}_putElementInTemplate(h,v){if(this._config.html)return v.innerHTML="",void v.append(h);v.textContent=h.textContent}}const fd=new Set(["sanitize","allowList","sanitizeFn"]),Mr="fade",yo="show",Jl=".modal",Yl="hide.bs.modal",gs="hover",_s="focus",wn={AUTO:"auto",TOP:"top",RIGHT:b()?"left":"right",BOTTOM:"bottom",LEFT:b()?"right":"left"},pd={allowList:ms,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},md={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Nn extends Ot{constructor(h,v){if(i===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(h,v),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return pd}static get DefaultType(){return md}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),H.off(this._element.closest(Jl),Yl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const h=H.trigger(this._element,this.constructor.eventName("show")),v=(I(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(h.defaultPrevented||!v)return;this._disposePopper();const D=this._getTipElement();this._element.setAttribute("aria-describedby",D.getAttribute("id"));const{container:G}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(G.append(D),H.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(D),D.classList.add(yo),"ontouchstart"in document.documentElement)for(const ee of[].concat(...document.body.children))H.on(ee,"mouseover",A);this._queueCallback(()=>{H.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!H.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(yo),"ontouchstart"in document.documentElement)for(const h of[].concat(...document.body.children))H.off(h,"mouseover",A);this._activeTrigger.click=!1,this._activeTrigger[_s]=!1,this._activeTrigger[gs]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),H.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(h){const v=this._getTemplateFactory(h).toHtml();if(!v)return null;v.classList.remove(Mr,yo),v.classList.add(`bs-${this.constructor.NAME}-auto`);const D=(G=>{do G+=Math.floor(1e6*Math.random());while(document.getElementById(G));return G})(this.constructor.NAME).toString();return v.setAttribute("id",D),this._isAnimated()&&v.classList.add(Mr),v}setContent(h){this._newContent=h,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(h){return this._templateFactory?this._templateFactory.changeContent(h):this._templateFactory=new hd({...this._config,content:h,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(h){return this.constructor.getOrCreateInstance(h.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Mr)}_isShown(){return this.tip&&this.tip.classList.contains(yo)}_createPopper(h){const v=B(this._config.placement,[this,h,this._element]),D=wn[v.toUpperCase()];return i.createPopper(this._element,h,this._getPopperConfig(D))}_getOffset(){const{offset:h}=this._config;return typeof h=="string"?h.split(",").map(v=>Number.parseInt(v,10)):typeof h=="function"?v=>h(v,this._element):h}_resolvePossibleFunction(h){return B(h,[this._element])}_getPopperConfig(h){const v={placement:h,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:D=>{this._getTipElement().setAttribute("data-popper-placement",D.state.placement)}}]};return{...v,...B(this._config.popperConfig,[v])}}_setListeners(){const h=this._config.trigger.split(" ");for(const v of h)if(v==="click")H.on(this._element,this.constructor.eventName("click"),this._config.selector,D=>{this._initializeOnDelegatedTarget(D).toggle()});else if(v!=="manual"){const D=v===gs?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),G=v===gs?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");H.on(this._element,D,this._config.selector,ee=>{const oe=this._initializeOnDelegatedTarget(ee);oe._activeTrigger[ee.type==="focusin"?_s:gs]=!0,oe._enter()}),H.on(this._element,G,this._config.selector,ee=>{const oe=this._initializeOnDelegatedTarget(ee);oe._activeTrigger[ee.type==="focusout"?_s:gs]=oe._element.contains(ee.relatedTarget),oe._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},H.on(this._element.closest(Jl),Yl,this._hideModalHandler)}_fixTitle(){const h=this._element.getAttribute("title");h&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",h),this._element.setAttribute("data-bs-original-title",h),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(h,v){clearTimeout(this._timeout),this._timeout=setTimeout(h,v)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(h){const v=tt.getDataAttributes(this._element);for(const D of Object.keys(v))fd.has(D)&&delete v[D];return h={...v,...typeof h=="object"&&h?h:{}},h=this._mergeConfigObj(h),h=this._configAfterMerge(h),this._typeCheckConfig(h),h}_configAfterMerge(h){return h.container=h.container===!1?document.body:p(h.container),typeof h.delay=="number"&&(h.delay={show:h.delay,hide:h.delay}),typeof h.title=="number"&&(h.title=h.title.toString()),typeof h.content=="number"&&(h.content=h.content.toString()),h}_getDelegateConfig(){const h={};for(const[v,D]of Object.entries(this._config))this.constructor.Default[v]!==D&&(h[v]=D);return h.selector=!1,h.trigger="manual",h}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(h){return this.each(function(){const v=Nn.getOrCreateInstance(this,h);if(typeof h=="string"){if(v[h]===void 0)throw new TypeError(`No method named "${h}"`);v[h]()}})}}j(Nn);const c={...Nn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},m={...Nn.DefaultType,content:"(null|string|element|function)"};class _ extends Nn{static get Default(){return c}static get DefaultType(){return m}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(h){return this.each(function(){const v=_.getOrCreateInstance(this,h);if(typeof h=="string"){if(v[h]===void 0)throw new TypeError(`No method named "${h}"`);v[h]()}})}}j(_);const T=".bs.scrollspy",U=`activate${T}`,q=`click${T}`,Z=`load${T}.data-api`,De="active",It="[href]",Ne=".nav-link",Ft=`${Ne}, .nav-item > ${Ne}, .list-group-item`,$t={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},vs={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Kt extends Ot{constructor(h,v){super(h,v),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return $t}static get DefaultType(){return vs}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const h of this._observableSections.values())this._observer.observe(h)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(h){return h.target=p(h.target)||document.body,h.rootMargin=h.offset?`${h.offset}px 0px -30%`:h.rootMargin,typeof h.threshold=="string"&&(h.threshold=h.threshold.split(",").map(v=>Number.parseFloat(v))),h}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(H.off(this._config.target,q),H.on(this._config.target,q,It,h=>{const v=this._observableSections.get(h.target.hash);if(v){h.preventDefault();const D=this._rootElement||window,G=v.offsetTop-this._element.offsetTop;if(D.scrollTo)return void D.scrollTo({top:G,behavior:"smooth"});D.scrollTop=G}}))}_getNewObserver(){const h={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(v=>this._observerCallback(v),h)}_observerCallback(h){const v=oe=>this._targetLinks.get(`#${oe.target.id}`),D=oe=>{this._previousScrollData.visibleEntryTop=oe.target.offsetTop,this._process(v(oe))},G=(this._rootElement||document.documentElement).scrollTop,ee=G>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=G;for(const oe of h){if(!oe.isIntersecting){this._activeTarget=null,this._clearActiveClass(v(oe));continue}const Oe=oe.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ee&&Oe){if(D(oe),!G)return}else ee||Oe||D(oe)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const h=ie.find(It,this._config.target);for(const v of h){if(!v.hash||y(v))continue;const D=ie.findOne(decodeURI(v.hash),this._element);g(D)&&(this._targetLinks.set(decodeURI(v.hash),v),this._observableSections.set(v.hash,D))}}_process(h){this._activeTarget!==h&&(this._clearActiveClass(this._config.target),this._activeTarget=h,h.classList.add(De),this._activateParents(h),H.trigger(this._element,U,{relatedTarget:h}))}_activateParents(h){if(h.classList.contains("dropdown-item"))ie.findOne(".dropdown-toggle",h.closest(".dropdown")).classList.add(De);else for(const v of ie.parents(h,".nav, .list-group"))for(const D of ie.prev(v,Ft))D.classList.add(De)}_clearActiveClass(h){h.classList.remove(De);const v=ie.find(`${It}.${De}`,h);for(const D of v)D.classList.remove(De)}static jQueryInterface(h){return this.each(function(){const v=Kt.getOrCreateInstance(this,h);if(typeof h=="string"){if(v[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);v[h]()}})}}H.on(window,Z,()=>{for(const M of ie.find('[data-bs-spy="scroll"]'))Kt.getOrCreateInstance(M)}),j(Kt);const _r=".bs.tab",Xl=`hide${_r}`,wk=`hidden${_r}`,Ek=`show${_r}`,Tk=`shown${_r}`,bk=`click${_r}`,Ik=`keydown${_r}`,Sk=`load${_r}`,Ak="ArrowLeft",my="ArrowRight",xk="ArrowUp",gy="ArrowDown",yp="Home",_y="End",wo="active",vy="fade",wp="show",yy=".dropdown-toggle",Ep=`:not(${yy})`,wy='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Tp=`.nav-link${Ep}, .list-group-item${Ep}, [role="tab"]${Ep}, ${wy}`,kk=`.${wo}[data-bs-toggle="tab"], .${wo}[data-bs-toggle="pill"], .${wo}[data-bs-toggle="list"]`;class Eo extends Ot{constructor(h){super(h),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),H.on(this._element,Ik,v=>this._keydown(v)))}static get NAME(){return"tab"}show(){const h=this._element;if(this._elemIsActive(h))return;const v=this._getActiveElem(),D=v?H.trigger(v,Xl,{relatedTarget:h}):null;H.trigger(h,Ek,{relatedTarget:v}).defaultPrevented||D&&D.defaultPrevented||(this._deactivate(v,h),this._activate(h,v))}_activate(h,v){h&&(h.classList.add(wo),this._activate(ie.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.removeAttribute("tabindex"),h.setAttribute("aria-selected",!0),this._toggleDropDown(h,!0),H.trigger(h,Tk,{relatedTarget:v})):h.classList.add(wp)},h,h.classList.contains(vy)))}_deactivate(h,v){h&&(h.classList.remove(wo),h.blur(),this._deactivate(ie.getElementFromSelector(h)),this._queueCallback(()=>{h.getAttribute("role")==="tab"?(h.setAttribute("aria-selected",!1),h.setAttribute("tabindex","-1"),this._toggleDropDown(h,!1),H.trigger(h,wk,{relatedTarget:v})):h.classList.remove(wp)},h,h.classList.contains(vy)))}_keydown(h){if(![Ak,my,xk,gy,yp,_y].includes(h.key))return;h.stopPropagation(),h.preventDefault();const v=this._getChildren().filter(G=>!y(G));let D;if([yp,_y].includes(h.key))D=v[h.key===yp?0:v.length-1];else{const G=[my,gy].includes(h.key);D=k(v,h.target,G,!0)}D&&(D.focus({preventScroll:!0}),Eo.getOrCreateInstance(D).show())}_getChildren(){return ie.find(Tp,this._parent)}_getActiveElem(){return this._getChildren().find(h=>this._elemIsActive(h))||null}_setInitialAttributes(h,v){this._setAttributeIfNotExists(h,"role","tablist");for(const D of v)this._setInitialAttributesOnChild(D)}_setInitialAttributesOnChild(h){h=this._getInnerElement(h);const v=this._elemIsActive(h),D=this._getOuterElement(h);h.setAttribute("aria-selected",v),D!==h&&this._setAttributeIfNotExists(D,"role","presentation"),v||h.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(h,"role","tab"),this._setInitialAttributesOnTargetPanel(h)}_setInitialAttributesOnTargetPanel(h){const v=ie.getElementFromSelector(h);v&&(this._setAttributeIfNotExists(v,"role","tabpanel"),h.id&&this._setAttributeIfNotExists(v,"aria-labelledby",`${h.id}`))}_toggleDropDown(h,v){const D=this._getOuterElement(h);if(!D.classList.contains("dropdown"))return;const G=(ee,oe)=>{const Oe=ie.findOne(ee,D);Oe&&Oe.classList.toggle(oe,v)};G(yy,wo),G(".dropdown-menu",wp),D.setAttribute("aria-expanded",v)}_setAttributeIfNotExists(h,v,D){h.hasAttribute(v)||h.setAttribute(v,D)}_elemIsActive(h){return h.classList.contains(wo)}_getInnerElement(h){return h.matches(Tp)?h:ie.findOne(Tp,h)}_getOuterElement(h){return h.closest(".nav-item, .list-group-item")||h}static jQueryInterface(h){return this.each(function(){const v=Eo.getOrCreateInstance(this);if(typeof h=="string"){if(v[h]===void 0||h.startsWith("_")||h==="constructor")throw new TypeError(`No method named "${h}"`);v[h]()}})}}H.on(document,bk,wy,function(M){["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this)||Eo.getOrCreateInstance(this).show()}),H.on(window,Sk,()=>{for(const M of ie.find(kk))Eo.getOrCreateInstance(M)}),j(Eo);const ys=".bs.toast",Ck=`mouseover${ys}`,Rk=`mouseout${ys}`,Pk=`focusin${ys}`,Nk=`focusout${ys}`,Ok=`hide${ys}`,jk=`hidden${ys}`,Dk=`show${ys}`,Lk=`shown${ys}`,Ey="hide",gd="show",_d="showing",Mk={animation:"boolean",autohide:"boolean",delay:"number"},Vk={animation:!0,autohide:!0,delay:5e3};class Zl extends Ot{constructor(h,v){super(h,v),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Vk}static get DefaultType(){return Mk}static get NAME(){return"toast"}show(){H.trigger(this._element,Dk).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Ey),N(this._element),this._element.classList.add(gd,_d),this._queueCallback(()=>{this._element.classList.remove(_d),H.trigger(this._element,Lk),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(H.trigger(this._element,Ok).defaultPrevented||(this._element.classList.add(_d),this._queueCallback(()=>{this._element.classList.add(Ey),this._element.classList.remove(_d,gd),H.trigger(this._element,jk)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(gd),super.dispose()}isShown(){return this._element.classList.contains(gd)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(h,v){switch(h.type){case"mouseover":case"mouseout":this._hasMouseInteraction=v;break;case"focusin":case"focusout":this._hasKeyboardInteraction=v}if(v)return void this._clearTimeout();const D=h.relatedTarget;this._element===D||this._element.contains(D)||this._maybeScheduleHide()}_setListeners(){H.on(this._element,Ck,h=>this._onInteraction(h,!0)),H.on(this._element,Rk,h=>this._onInteraction(h,!1)),H.on(this._element,Pk,h=>this._onInteraction(h,!0)),H.on(this._element,Nk,h=>this._onInteraction(h,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(h){return this.each(function(){const v=Zl.getOrCreateInstance(this,h);if(typeof h=="string"){if(v[h]===void 0)throw new TypeError(`No method named "${h}"`);v[h](this)}})}}return nt(Zl),j(Zl),{Alert:jt,Button:xr,Carousel:ft,Collapse:ke,Dropdown:Kn,Modal:Be,Offcanvas:gr,Popover:_,ScrollSpy:Kt,Tab:Eo,Toast:Zl,Tooltip:Nn}})})(AF);const g$=()=>f.jsx("header",{className:"header text-center border-bottom py-3",children:f.jsx("h1",{className:"fw-bold",children:f.jsx(et,{to:"/",className:"text-dark",children:"   "})})}),_$=()=>f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"subheader bg-dark text-light fs-6",style:{padding:"11px 0"},children:f.jsxs("div",{className:"container-xl text-center",children:["  : ",f.jsx("a",{href:"https://t.me/darelom_students",children:" ."})]})}),f.jsx("div",{className:"subheader bg-dark border-top text-light fs-6",style:{padding:"11px 0"},children:f.jsx("div",{className:"container-xl text-center",children:"      2025."})})]}),v$=()=>f.jsx("footer",{className:"footer bg-black py-4",children:f.jsxs("div",{className:"container text-center text-light",children:[f.jsxs("div",{className:"d-flex flex-wrap gap-4 gap-sm-5",children:[f.jsxs(Bd,{title:" ",children:[f.jsxs(ct,{children:[f.jsx("span",{children:"  : "}),f.jsx(et,{to:"/send_problem",children:"  "}),"."]}),f.jsxs(ct,{children:[f.jsx("span",{children:" : "}),f.jsx(et,{to:"/send_suggestion",children:"  "}),"."]}),f.jsxs(ct,{children:[f.jsx("span",{children:" : "}),f.jsx("a",{href:"https://t.me/darelom_students",children:" "}),"."]}),f.jsx(ct,{children:f.jsx("a",{href:"https://github.com/iabdwahab/darelom-students",children:"   GitHub."})})]}),f.jsxs(Bd,{title:"  ",children:[f.jsx(ct,{children:f.jsx(et,{to:"/degrees/grade_1/2023_24",children:"  / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/degrees/grade_2/2023_24",children:"  / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/degrees/grade_3/2023_24",children:"  / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/degrees/grade_4/2023_24",children:"  / 2024."})})]}),f.jsxs(Bd,{title:"  ",children:[f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_1/term_1/2024",children:"  /   / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_1/term_2/2024",children:"  /   / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_1/term_1/2025",children:"  /   / 2025."})}),f.jsx("hr",{}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_2/term_1/2024",children:"  /   / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_2/term_2/2024",children:"  /   / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_2/term_1/2025",children:"  /   / 2025."})}),f.jsx("hr",{}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_3/term_1/2024",children:"  /   / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_3/term_2/2024",children:"  /   / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_3/term_1/2025",children:"  /   / 2025."})}),f.jsx("hr",{}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_4/term_1/2024",children:"  /   / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_4/term_2/2024",children:"  /   / 2024."})}),f.jsx(ct,{children:f.jsx(et,{to:"/ranking/grade_4/term_1/2025",children:"  /   / 2025."})})]}),f.jsxs(Bd,{title:"  ",children:[f.jsx(ct,{children:f.jsx("a",{href:"https://iabdwahab.github.io",children:" ."})}),f.jsx(ct,{children:f.jsx("a",{href:"https://wa.me/+201280552925",children:"WhatsApp."})}),f.jsx(ct,{children:f.jsx("a",{href:"http://t.me/iabdwahab",children:"Telegram."})}),f.jsx(ct,{children:f.jsx("a",{href:"https://www.linkedin.com/in/iabdwahab/",children:"LinkedIn."})}),f.jsx(ct,{children:f.jsx("a",{href:"https://github.com/iabdwahab",children:"GitHub."})})]})]}),f.jsx("hr",{}),f.jsxs("p",{className:"m-0",children:[f.jsx("span",{children:"   : "}),f.jsx("span",{className:"text-warning",children:"  153."})]})]})});function Bd({title:t,children:e}){return f.jsxs("div",{className:"text-end",children:[f.jsxs("h4",{className:"mb-3",children:[t,":"]}),e]})}function ct({children:t}){return f.jsxs("p",{className:"m-0",children:["- ",t]})}const y$=()=>{const{pathname:t}=lr();F.useEffect(()=>{window.scrollTo(0,0)},[t])},w$=()=>{const[t,e]=F.useState(localStorage.getItem("theme")||"light");function n(){document.documentElement.getAttribute("data-bs-theme")==="dark"?(document.documentElement.setAttribute("data-bs-theme","light"),localStorage.setItem("theme","light"),e("light")):(document.documentElement.setAttribute("data-bs-theme","dark"),localStorage.setItem("theme","dark"),e("dark"))}return f.jsx("button",{className:"btn btn-primary w-100 mt-2 p-2",onClick:n,children:t==="light"?"  []":"  [ ]"})},E$=()=>{const t=mt(),e=JSON.parse(localStorage.getItem("loggedinUser")),n=JSON.parse(localStorage.getItem("loggedinUserInfo"));async function r(){await KN(Uu),localStorage.setItem("loggedinUser",null),localStorage.setItem("loggedinUserInfo",null),t("/")}return f.jsx("div",{className:"border-bottom",children:f.jsxs("div",{className:"container-xl py-3",children:[e&&f.jsx(f.Fragment,{children:f.jsxs("p",{className:"fs-4",children:[f.jsx("span",{children:" "}),f.jsxs("span",{className:"fw-bold",children:[n.name,"!"]})]})}),n?f.jsxs("div",{className:"d-flex gap-2",children:[f.jsxs("button",{className:`btn btn-primary w-100 p-2 ${!(n!=null&&n.write_permission)&&"disabled"}`,onClick:()=>t(`/${n==null?void 0:n.grade}/send_question_selector`),children:["  ",!(n!=null&&n.write_permission)&&"[  ]"]}),f.jsx("button",{className:"btn btn-danger w-100 p-2",onClick:r,children:" "})]}):f.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t("signin"),children:" "}),f.jsx(w$,{})]})})},Wt=({hasText:t=!0})=>f.jsxs("div",{className:"d-block text-center py-4",children:[f.jsx("div",{className:"spinner-border text-primary",role:"status",children:f.jsx("span",{className:"sr-only d-none",children:"..."})}),t?f.jsx("p",{className:"fw-bold fs-5 mt-2",children:"  ."}):""]}),T$=()=>{const[t,e]=F.useState(!0);return F.useEffect(()=>{YI(Uu,()=>{e(!1)})},[]),f.jsxs("div",{className:"d-flex flex-column min-vh-100",children:[f.jsx(g$,{}),f.jsx(_$,{}),f.jsx(E$,{}),f.jsx("div",{className:"container-xl flex-grow-1 py-3",children:f.jsx("div",{children:t?f.jsx(Wt,{}):f.jsx(tF,{})})}),f.jsx(v$,{}),f.jsx(y$,{})]})},b$=({currentStepIndex:t,setCurrentStepIndex:e,selections:n,setSelections:r})=>{function i(){t>0&&(e(t-1),r(n.slice(0,n.length-1)))}const s=t===0;return f.jsx("button",{className:`btn btn-danger ${s?"d-none":"d-block"}`,onClick:i,children:""})},I$=({option:t,stepsList:e,currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})=>{const o=mt();function a(){if(t.option_data==="test_yourself")return o("/test_yourself");n<e.length-1&&t.will_next?(r(n+1),s([...i,t.option_data])):o(`${i.join("/")}/${t.option_data}`)}const l=`${t.option_text}`;return f.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:a,children:l})},S$=({stepsList:t})=>{var a,l;const e=lr(),[n,r]=F.useState(((a=e.state)==null?void 0:a.initialStepIndex)||0),[i,s]=F.useState(((l=e.state)==null?void 0:l.selections)||[]),o=t[n];return f.jsxs("div",{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:o.title}),f.jsx(b$,{currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})]}),f.jsx("div",{className:"row g-2 my-2",children:o.options.map((u,d)=>{var p;if(n===0||(p=u.availableAt)!=null&&p.includes(i[0]))return f.jsx("div",{className:"col-sm-6",children:f.jsx(I$,{option:u,stepsList:t,currentStepIndex:n,setCurrentStepIndex:r,selections:i,setSelections:s})},d)})})]})},Cn=({children:t,fontSize:e,py:n})=>f.jsx("h2",{className:`fs-${e||4} py-${n||2} fw-medium bg-dark text-center text-light`,children:t}),A$=()=>f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{scope:"col",children:"#"}),f.jsx("th",{scope:"col",children:""}),f.jsx("th",{scope:"col",className:"text-center",children:""})]})}),eo="https://iabdwahab.github.io";async function x$(){return await(await fetch(`${eo}/darelom-students-data/top_degrees.json`)).json()}const k$=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0);return F.useEffect(()=>{async function i(){let s;s=await x$(),e(s),r(!1)}i()},[]),f.jsxs("div",{className:"top-students",children:[f.jsx(Cn,{children:" "}),n?f.jsx(Wt,{}):f.jsx("div",{className:"row g-2 mt-1",children:t.map((i,s)=>f.jsxs("div",{className:"border-secondary-subtle rounded-2 py-1 my-0 col-lg-6",children:[f.jsx("h3",{className:"fs-5 bg-dark text-light p-2 my-0",children:i.grade_ar_name}),f.jsxs("table",{className:"table table-striped border",children:[f.jsx(A$,{}),f.jsx(C$,{gradeDegree:i})]}),f.jsx(et,{to:`degrees/${i.grade}/2024_25`,className:"d-block my-2 btn btn-primary fw-bold",children:"  "})]},s))})]})};function C$({gradeDegree:t}){return f.jsx("tbody",{children:t.list.map((e,n)=>f.jsx(R$,{student:e,grade:t.grade},n))})}function R$({student:t,grade:e}){const n=mt();return f.jsxs("tr",{className:"degree_tr-linked",onClick:()=>n(`/degrees/${e}/2024_25/${t.id}`),children:[f.jsx("th",{scope:"row",children:t.rank}),f.jsx("td",{children:t.name}),f.jsxs("td",{className:"text-center",children:["%",t.total_percentage]})]})}const P$=[{title:" :",options:[{option_text:" ",option_data:"grade_1",will_next:!0,available:!0},{option_text:" ",option_data:"grade_2",will_next:!0,available:!0},{option_text:" ",option_data:"grade_3",will_next:!0,available:!0},{option_text:" ",option_data:"grade_4",will_next:!0,available:!0},{option_text:" ",option_data:"general_subjects",will_next:!1,available:!0}]},{title:" ",options:[{option_text:" ",option_data:"schedule",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"books",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"lectures_recordings",will_next:!0,availableAt:["grade_1","grade_2","grade_3"]},{option_text:"  -  ",option_data:"test_yourself_students",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"  [ ]",option_data:"test_yourself",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:" ",option_data:"more_resources",will_next:!0,availableAt:["grade_2"]},{option_text:"",option_data:"explanations",will_next:!1,availableAt:[]},{option_text:"  ",option_data:"final_exams",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]},{title:"  :",options:[{option_text:"  ",option_data:"term_1",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"  ",option_data:"term_2",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]}],N$=()=>f.jsxs(f.Fragment,{children:[f.jsx(S$,{stepsList:P$}),f.jsx(k$,{})]});async function O$(t,e){const r=await(await fetch(`${eo}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();return r.degrees.sort((i,s)=>s.total-i.total),{degrees:r.degrees,studentsCount:r.degrees.length}}async function j$(t){const e=await jA(t),n=e.docs.map(i=>i.data()),r=e.docs[e.docs.length-1];return{degreesData:n,lastStudentData:r}}async function D$(t){return(await E2(t)).data().count}function xt(t){return{grade_1:" ",grade_2:" ",grade_3:" ",grade_4:" ",term_1:"  ",term_2:"  ",nahw:"",sarf:"",english:"",elm_allugha:" ",albalagha:"",adab_gahily:" ",falsafa:"",seera_khoalfaa:"  ",quran_ebadat:" ",naqd_qadim:"  ",nsoos_gahilya:" ",farsy:"",ebry:"",riyadat_aamal:" ",nazm_oslobiya:" ",quran_ahwal:"   ",adab_islamy_omawy:"  ",arood:"",mawarith:"",maajim_aswat:"  ",balaghat_quran:" ",qaet_bahth:" ",nsoos_islamya_omawya:"  ",tareekh_omawy_abasy:"  ",aqida:"",adab_moqaran:" ",adab_abasy_andalusy:"  ",olom_quran:" ",tareekh_misr:"  ",tafseer:"",elm_kalam:" ",nsoos_abasya_andalusya:"  ",ittijahat_lughawiya:" ",adab_hadith:" ",hadara_nozom:" ",tasawof:"",osool_fiqh:" ",horoob_salibiya:" ",nsoos_haditha:"  ",naqd_hadith:"  ",mojalad_tasgilat:"  ",groupped_channel:"  "}[t]}const L$=({student:t,grade:e,year:n})=>{const{id:r,name:i,rank:s,total:o,total_percentage:a}=t,l=mt();function u(){l(`/degrees/${e}/${n}/${t.id}`)}return f.jsxs("tr",{className:"degree_tr-linked",onClick:u,children:[f.jsx("th",{scope:"row",className:"text-center",children:s}),f.jsx("td",{className:"text-center",children:r}),f.jsx("td",{style:{whiteSpace:"nowrap"},children:i}),f.jsx("td",{className:"text-center",children:o}),f.jsxs("td",{className:"text-center",children:["%",a]})]})},qx=()=>{const t=[{isCentered:!0,text:"#"},{isCentered:!0,text:" "},{isCentered:!1,text:""},{isCentered:!0,text:""},{isCentered:!0,text:""}];return f.jsx("thead",{children:f.jsx("tr",{children:t.map((e,n)=>f.jsx("th",{scope:"col",className:`${e.isCentered&&"text-center"}`,children:e.text},n))})})},Hx=({studentsCount:t})=>{const e=f.jsx("span",{className:"fw-bold",children:t||" "});return f.jsxs("h3",{className:"py-2 fs-4",children:[" : ",e,"."]})},M$=({degreesCollection:t,lastStudent:e,setDataAndHideLoaderFirestore:n})=>{function r(){const i=u2(t,d2("rank","asc"),f2(e),h2(40));n(i)}return f.jsx("button",{className:"btn btn-primary w-100",onClick:r,children:" "})},V$=()=>f.jsx("h3",{className:"fw-bold text-center fs-5",children:" ."}),Ml=()=>f.jsx("button",{className:"btn btn-primary w-100 disabled",children:f.jsx("div",{className:"spinner-border spinner-border-sm",role:"status"})}),F$=()=>{const{grade:t}=fn(),e=mt(),n=F.useRef(null),[r,i]=F.useState(!1);return F.useEffect(()=>{const s=n.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();try{i(!0);const a=s["student_id-input"].value;if(s.checkValidity()){const l=ei(An,`${t}/degrees/2023_24`,a);(await rs(l)).exists()?e(`${a}`):s.classList.add("was-validated"),n.current.reset()}else s.classList.add("was-validated")}catch(a){console.log(a.message)}finally{i(!1)}})},[]),f.jsxs("form",{className:"row g-3 mt-0 needs-validation",noValidate:!0,ref:n,children:[f.jsx("p",{className:"mb-2 fw-bold",children:"  :"}),f.jsxs("div",{className:"col-12 col-sm-10 m-0 mb-2",children:[f.jsx("input",{type:"text",className:"form-control py-2",id:"student_id-input",placeholder:" ",minLength:5,maxLength:5,required:!0}),f.jsx("div",{className:"invalid-feedback",children:"   ."})]}),f.jsx("div",{className:"col-12 col-sm-2 m-0",children:r?f.jsx(Ml,{}):f.jsx("button",{type:"submit",className:"btn btn-primary mb-3 py-2 w-100",children:""})})]})};function PE(t,e){if(t.length)if(e==="duplicated"){t.sort((i,s)=>s.total-i.total);let n=1,r=t[0].total;for(let i=0;i<t.length;i++)t[i].total!==r&&(n=n+1,r=t[i].total),t[i].rank=n}else for(let n=0;n<t.length;n++)t[n].rank=n+1}const $$=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0),{grade:i,year:s}=fn(),[o,a]=F.useState(null),[l,u]=F.useState(null),[d,p]=F.useState(!1),[g,y]=F.useState("normal"),I=F.useRef(null),{pathname:A}=lr(),[N,x]=SF(),E=$u(An,`${i}/degrees/${s}`);async function b(R){const k=await D$(E),{degreesData:w,lastStudentData:S}=await j$(R);a(k),e([...t,...w]),u(S),S.data().rank===k&&p(!0),r(!1)}async function j(){const R=await O$(i,s);e(R.degrees),a(R.degrees.length),r(!1),p(!0)}function B(R){y(R.target.value),PE(t,R.target.value),x({sortMethod:R.target.value})}return F.useEffect(()=>{j(),I.current&&(I.current.value="normal")},[A]),PE(t,N.get("sortMethod")||"normal"),f.jsxs("div",{children:[f.jsxs(Cn,{fontSize:3,py:3,children:["  ",xt(i)," ",s.split("_").join("/")]}),f.jsx(Hx,{studentsCount:o}),f.jsx(F$,{}),f.jsxs("div",{className:"d-flex flex-column gap-2 mb-4",children:[f.jsx("h5",{children:" :"}),f.jsxs("select",{ref:I,onChange:B,className:"form-select w-100","aria-label":"Default select example",style:{width:"100%",maxWidth:"400px"},children:[f.jsx("option",{value:"normal",defaultValue:!0,children:" "}),f.jsx("option",{value:"duplicated",children:"  "})]})]}),f.jsxs("div",{className:"table-responsive border",children:[f.jsxs("table",{className:"table table-striped table-bordered",children:[f.jsx(qx,{}),f.jsx("tbody",{children:t.map(R=>f.jsx(L$,{student:R,grade:i,year:s},R.id))})]}),n&&f.jsx(Wt,{})]}),f.jsx("div",{className:"mt-3 mb-1",children:d?f.jsx(V$,{}):f.jsx(M$,{degreesCollection:E,lastStudent:l,setDataAndHideLoaderFirestore:b})})]})},U$="modulepreload",B$=function(t){return"/darelom-students/"+t},NE={},zu=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(a=>{if(a=B$(a),a in NE)return;NE[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":U$,l||(d.as="script",d.crossOrigin=""),d.href=a,o&&d.setAttribute("nonce",o),document.head.appendChild(d),l)return new Promise((p,g)=>{d.addEventListener("load",p),d.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},z$=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zu(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ay extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class q$ extends ay{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class H$ extends ay{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class W$ extends ay{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bg;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bg||(Bg={}));var K$=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class G${constructor(e,{headers:n={},customFetch:r,region:i=Bg.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=z$(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return K$(this,void 0,void 0,function*(){try{const{headers:i,method:s,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:u}).catch(I=>{throw new q$(I)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new H$(d);if(!d.ok)throw new W$(d);let g=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return g==="application/json"?y=yield d.json():g==="application/octet-stream"?y=yield d.blob():g==="text/event-stream"?y=d:g==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(i){return{data:null,error:i}}})}}var Ln={},ly={},rp={},qu={},ip={},sp={},Q$=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},bl=Q$();const J$=bl.fetch,Wx=bl.fetch.bind(bl),Kx=bl.Headers,Y$=bl.Request,X$=bl.Response,Vl=Object.freeze(Object.defineProperty({__proto__:null,Headers:Kx,Request:Y$,Response:X$,default:Wx,fetch:J$},Symbol.toStringTag,{value:"Module"})),Z$=ZE(Vl);var op={};Object.defineProperty(op,"__esModule",{value:!0});let eU=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};op.default=eU;var Gx=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sp,"__esModule",{value:!0});const tU=Gx(Z$),nU=Gx(op);let rU=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=tU.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var o,a,l;let u=null,d=null,p=null,g=s.status,y=s.statusText;if(s.ok){if(this.method!=="HEAD"){const x=await s.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const A=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),N=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");A&&N&&N.length>1&&(p=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,g=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const A=await s.text();try{u=JSON.parse(A),Array.isArray(u)&&s.status===404&&(d=[],u=null,g=200,y="OK")}catch{s.status===404&&A===""?(g=204,y="No Content"):u={message:A}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,g=200,y="OK"),u&&this.shouldThrowOnError)throw new nU.default(u)}return{error:u,data:d,count:p,status:g,statusText:y}});return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s==null?void 0:s.name)!==null&&o!==void 0?o:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(a=s==null?void 0:s.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,n)}returns(){return this}overrideTypes(){return this}};sp.default=rU;var iU=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ip,"__esModule",{value:!0});const sU=iU(sp);let oU=class extends sU.default{select(e){let n=!1;const r=(e??"*").split("").map(i=>/\s/.test(i)&&!n?"":(i==='"'&&(n=!n),i)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:i,referencedTable:s=i}={}){const o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:i=r}={}){const s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};ip.default=oU;var aU=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qu,"__esModule",{value:!0});const lU=aU(ip);let cU=class extends lU.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const i=r?`${r}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};qu.default=cU;var uU=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rp,"__esModule",{value:!0});const fc=uU(qu);let dU=class{constructor(e,{headers:n={},schema:r,fetch:i}){this.url=e,this.headers=n,this.schema=r,this.fetch=i}select(e,{head:n=!1,count:r}={}){const i=n?"HEAD":"GET";let s=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new fc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new fc.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:i,defaultToNull:s=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new fc.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),this.headers.Prefer=i.join(","),new fc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new fc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};rp.default=dU;var ap={},lp={};Object.defineProperty(lp,"__esModule",{value:!0});lp.version=void 0;lp.version="0.0.0-automated";Object.defineProperty(ap,"__esModule",{value:!0});ap.DEFAULT_HEADERS=void 0;const hU=lp;ap.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${hU.version}`};var Qx=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ly,"__esModule",{value:!0});const fU=Qx(rp),pU=Qx(qu),mU=ap;let gU=class Jx{constructor(e,{headers:n={},schema:r,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},mU.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=i}from(e){const n=new URL(`${this.url}/${e}`);return new fU.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Jx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:i=!1,count:s}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||i?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{a.searchParams.append(d,p)})):(o="POST",l=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new pU.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};ly.default=gU;var Fl=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.PostgrestError=Ln.PostgrestBuilder=Ln.PostgrestTransformBuilder=Ln.PostgrestFilterBuilder=Ln.PostgrestQueryBuilder=Ln.PostgrestClient=void 0;const Yx=Fl(ly);Ln.PostgrestClient=Yx.default;const Xx=Fl(rp);Ln.PostgrestQueryBuilder=Xx.default;const Zx=Fl(qu);Ln.PostgrestFilterBuilder=Zx.default;const ek=Fl(ip);Ln.PostgrestTransformBuilder=ek.default;const tk=Fl(sp);Ln.PostgrestBuilder=tk.default;const nk=Fl(op);Ln.PostgrestError=nk.default;var _U=Ln.default={PostgrestClient:Yx.default,PostgrestQueryBuilder:Xx.default,PostgrestFilterBuilder:Zx.default,PostgrestTransformBuilder:ek.default,PostgrestBuilder:tk.default,PostgrestError:nk.default};const{PostgrestClient:vU,PostgrestQueryBuilder:d3,PostgrestFilterBuilder:h3,PostgrestTransformBuilder:f3,PostgrestBuilder:p3,PostgrestError:m3}=_U;function yU(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const wU=yU(),EU="2.11.15",TU=`realtime-js/${EU}`,bU="1.0.0",rk=1e4,IU=1e3;var Bc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Bc||(Bc={}));var an;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(an||(an={}));var Hr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Hr||(Hr={}));var zg;(function(t){t.websocket="websocket"})(zg||(zg={}));var Ro;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ro||(Ro={}));class SU{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class ik{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(rt||(rt={}));const OE=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((s,o)=>(s[o]=AU(o,t,e,i),s),{})},AU=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?sk(s,o):qg(o)},sk=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return RU(e,n)}switch(t){case rt.bool:return xU(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return kU(e);case rt.json:case rt.jsonb:return CU(e);case rt.timestamp:return PU(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return qg(e);default:return qg(e)}},qg=t=>t,xU=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},kU=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},CU=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},RU=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>sk(e,a))}return t},PU=t=>typeof t=="string"?t.replace(" ","T"):t,ok=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class hm{constructor(e,n,r={},i=rk){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var jE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(jE||(jE={}));class zc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zc.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=zc.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=zc.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const p=s[u];if(p){const g=d.map(N=>N.presence_ref),y=p.map(N=>N.presence_ref),I=d.filter(N=>y.indexOf(N.presence_ref)<0),A=p.filter(N=>g.indexOf(N.presence_ref)<0);I.length>0&&(a[u]=I),A.length>0&&(l[u]=A)}else a[u]=d}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const p=e[a].map(y=>y.presence_ref),g=d.filter(y=>p.indexOf(y.presence_ref)<0);e[a].unshift(...g)}r(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(p=>p.presence_ref);u=u.filter(p=>d.indexOf(p.presence_ref)<0),e[a]=u,i(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var DE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(DE||(DE={}));var LE;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(LE||(LE={}));var Mi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Mi||(Mi={}));class cy{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=an.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hm(this,Hr.join,this.params,this.timeout),this.rejoinTimer=new ik(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=an.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=an.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=an.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=an.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hr.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new zc(this),this.broadcastEndpointURL=ok(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,i;if(this.socket.isConnected()||this.socket.connect(),this.state==an.closed){const{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Mi.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Mi.CLOSED));const l={},u={broadcast:s,presence:o,postgres_changes:(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket.setAuth(),d===void 0){e==null||e(Mi.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,y=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,I=[];for(let A=0;A<y;A++){const N=g[A],{filter:{event:x,schema:E,table:b,filter:j}}=N,B=d&&d[A];if(B&&B.event===x&&B.schema===E&&B.table===b&&B.filter===j)I.push(Object.assign(Object.assign({},N),{id:B.id}));else{this.unsubscribe(),this.state=an.errored,e==null||e(Mi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,e&&e(Mi.SUBSCRIBED);return}}).receive("error",d=>{this.state=an.errored,e==null||e(Mi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Mi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=an.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new hm(this,Hr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new hm(this,e,n,r);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Hr;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let g=this._onMessage(o,n,r);if(n&&!g)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(y=>{var I,A,N;return((I=y.filter)===null||I===void 0?void 0:I.event)==="*"||((N=(A=y.filter)===null||A===void 0?void 0:A.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===o}).map(y=>y.callback(g,r)):(s=this.bindings[o])===null||s===void 0||s.filter(y=>{var I,A,N,x,E,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const j=y.id,B=(I=y.filter)===null||I===void 0?void 0:I.event;return j&&((A=n.ids)===null||A===void 0?void 0:A.includes(j))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const j=(E=(x=y==null?void 0:y.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return j==="*"||j===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof g=="object"&&"ids"in g){const I=g.data,{schema:A,table:N,commit_timestamp:x,type:E,errors:b}=I;g=Object.assign(Object.assign({},{schema:A,table:N,commit_timestamp:x,eventType:E,new:{},old:{},errors:b}),this._getPayloadRecords(I))}y.callback(g,r)})}_isClosed(){return this.state===an.closed}_isJoined(){return this.state===an.joined}_isJoining(){return this.state===an.joining}_isLeaving(){return this.state===an.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&cy.isEqual(i.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hr.close,{},e)}_onError(e){this._on(Hr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=an.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=OE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=OE(e.columns,e.old_record)),n}}const ME=()=>{},NU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class OU{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=rk,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ME,this.ref=0,this.logger=ME,this.conn=null,this.sendBuffer=[],this.serializer=new SU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>zu(async()=>{const{default:l}=await Promise.resolve().then(()=>Vl);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${zg.websocket}`,this.httpEndpoint=ok(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const i=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,o)=>o(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ik(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=wU),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bU}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bc.connecting:return Ro.Connecting;case Bc.open:return Ro.Open;case Bc.closing:return Ro.Closing;default:return Ro.Closed}}isConnected(){return this.connectionState()===Ro.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new cy(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:TU};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Hr.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(IU,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:i,payload:s,ref:o}=n;r==="phoenix"&&i==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${r} ${i} ${o&&"("+o+")"||""}`,s),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([NU],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class uy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ut(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class jU extends uy{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Hg extends uy{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var DU=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const ak=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zu(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},LU=()=>DU(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zu(()=>Promise.resolve().then(()=>Vl),void 0)).Response:Response}),Wg=t=>{if(Array.isArray(t))return t.map(n=>Wg(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=Wg(r)}),e};var ha=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const fm=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),MU=(t,e,n)=>ha(void 0,void 0,void 0,function*(){const r=yield LU();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{e(new jU(fm(i),t.status||500))}).catch(i=>{e(new Hg(fm(i),i))}):e(new Hg(fm(t),t))}),VU=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(i.body=JSON.stringify(r)),Object.assign(Object.assign({},i),n))};function Hu(t,e,n,r,i,s){return ha(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,VU(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>MU(l,a,r))})})}function uf(t,e,n,r){return ha(this,void 0,void 0,function*(){return Hu(t,"GET",e,n,r)})}function As(t,e,n,r,i){return ha(this,void 0,void 0,function*(){return Hu(t,"POST",e,r,i,n)})}function FU(t,e,n,r,i){return ha(this,void 0,void 0,function*(){return Hu(t,"PUT",e,r,i,n)})}function $U(t,e,n,r){return ha(this,void 0,void 0,function*(){return Hu(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function lk(t,e,n,r,i){return ha(this,void 0,void 0,function*(){return Hu(t,"DELETE",e,r,i,n)})}var jn=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const UU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},VE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class BU{constructor(e,n={},r,i){this.url=e,this.headers=n,this.bucketId=r,this.fetch=ak(i)}uploadOrUpdate(e,n,r,i){return jn(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},VE),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),p=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:s,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),g=yield p.json();return p.ok?{data:{path:u,id:g.Id,fullPath:g.Key},error:null}:{data:null,error:g}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}upload(e,n,r){return jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return jn(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:VE.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const p=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),g=yield p.json();return p.ok?{data:{path:s,fullPath:g.Key},error:null}:{data:null,error:g}}catch(l){if(Ut(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return jn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield As(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new uy("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}update(e,n,r){return jn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return jn(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}copy(e,n,r){return jn(this,void 0,void 0,function*(){try{return{data:{path:(yield As(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return jn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield As(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return jn(this,void 0,void 0,function*(){try{const i=yield As(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}download(e,n){return jn(this,void 0,void 0,function*(){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield uf(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ut(a))return{data:null,error:a};throw a}})}info(e){return jn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield uf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Wg(r),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}exists(e){return jn(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield $U(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ut(r)&&r instanceof Hg){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return jn(this,void 0,void 0,function*(){try{return{data:yield lk(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}list(e,n,r){return jn(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},UU),n),{prefix:e||""});return{data:yield As(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const zU="2.7.1",qU={"X-Client-Info":`storage-js/${zU}`};var Ia=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class HU{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},qU),n),this.fetch=ak(r)}listBuckets(){return Ia(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ut(e))return{data:null,error:e};throw e}})}getBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ia(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ia(this,void 0,void 0,function*(){try{return{data:yield FU(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield lk(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}}class WU extends HU{constructor(e,n={},r){super(e,n,r)}from(e){return new BU(this.url,this.headers,e,this.fetch)}}const KU="2.50.2";let Sc="";typeof Deno<"u"?Sc="deno":typeof document<"u"?Sc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sc="react-native":Sc="node";const GU={"X-Client-Info":`supabase-js-${Sc}/${KU}`},QU={headers:GU},JU={schema:"public"},YU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},XU={};var ZU=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const e4=t=>{let e;return t?e=t:typeof fetch>"u"?e=Wx:e=fetch,(...n)=>e(...n)},t4=()=>typeof Headers>"u"?Kx:Headers,n4=(t,e,n)=>{const r=e4(n),i=t4();return(s,o)=>ZU(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:u}))})};var r4=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function i4(t){return t.endsWith("/")?t:t+"/"}function s4(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:u,realtime:d,global:p}=e,g={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),s),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>r4(this,void 0,void 0,function*(){return""})};return t.accessToken?g.accessToken=t.accessToken:delete g.accessToken,g}const ck="2.70.0",Pa=30*1e3,Kg=3,pm=Kg*Pa,o4="http://localhost:9999",a4="supabase.auth.token",l4={"X-Client-Info":`gotrue-js/${ck}`},Gg="X-Supabase-Api-Version",uk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},c4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,u4=6e5;class dy extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class d4 extends dy{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function h4(t){return Ie(t)&&t.name==="AuthApiError"}class dk extends dy{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class lo extends dy{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class bs extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function f4(t){return Ie(t)&&t.name==="AuthSessionMissingError"}class zd extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qd extends lo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hd extends lo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function p4(t){return Ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class FE extends lo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qg extends lo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function mm(t){return Ie(t)&&t.name==="AuthRetryableFetchError"}class $E extends lo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class qc extends lo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),UE=` 	
\r=`.split(""),m4=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<UE.length;e+=1)t[UE[e].charCodeAt(0)]=-2;for(let e=0;e<df.length;e+=1)t[df[e].charCodeAt(0)]=e;return t})();function BE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(df[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(df[r]),e.queuedBits-=6}}function hk(t,e,n){const r=m4[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function zE(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{v4(o,r,n)};for(let o=0;o<t.length;o+=1)hk(t.charCodeAt(o),i,s);return e.join("")}function g4(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function _4(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}g4(r,e)}}function v4(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function y4(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)hk(t.charCodeAt(i),n,r);return new Uint8Array(e)}function w4(t){const e=[];return _4(t,n=>e.push(n)),new Uint8Array(e)}function E4(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>BE(i,n,r)),BE(null,n,r),e.join("")}function T4(t){return Math.round(Date.now()/1e3)+t}function b4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ur=()=>typeof window<"u"&&typeof document<"u",Io={tested:!1,writable:!1},Hc=()=>{if(!Ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Io.tested)return Io.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Io.tested=!0,Io.writable=!0}catch{Io.tested=!0,Io.writable=!1}return Io.writable};function I4(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const fk=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zu(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},S4=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",pk=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Wd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Kd=async(t,e)=>{await t.removeItem(e)};class cp{constructor(){this.promise=new cp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}cp.promiseConstructor=Promise;function gm(t){const e=t.split(".");if(e.length!==3)throw new qc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!c4.test(e[r]))throw new qc("JWT not in base64url format");return{header:JSON.parse(zE(e[0])),payload:JSON.parse(zE(e[1])),signature:y4(e[2]),raw:{header:e[0],payload:e[1]}}}async function A4(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function x4(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function k4(t){return("0"+t.toString(16)).substr(-2)}function C4(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,k4).join("")}async function R4(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function P4(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await R4(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(t,e,n=!1){const r=C4();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await pk(t,`${e}-code-verifier`,i);const s=await P4(r);return[s,r===s?"plain":"s256"]}const N4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function O4(t){const e=t.headers.get(Gg);if(!e||!e.match(N4))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function j4(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function D4(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const L4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Aa(t){if(!L4.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var M4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};const ko=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),V4=[502,503,504];async function qE(t){var e;if(!S4(t))throw new Qg(ko(t),0);if(V4.includes(t.status))throw new Qg(ko(t),t.status);let n;try{n=await t.json()}catch(s){throw new dk(ko(s),s)}let r;const i=O4(t);if(i&&i.getTime()>=uk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $E(ko(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new bs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new $E(ko(n),t.status,n.weak_password.reasons);throw new d4(ko(n),t.status||500,r)}const F4=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Ce(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[Gg]||(s[Gg]=uk["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await $4(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function $4(t,e,n,r,i,s){const o=F4(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Qg(ko(l),0)}if(a.ok||await qE(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await qE(l)}}function Di(t){var e;let n=null;q4(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=T4(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function HE(t){const e=Di(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function js(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function U4(t){return{data:t,error:null}}function B4(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=M4(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function z4(t){return t}function q4(t){return t.access_token&&t.refresh_token&&t.expires_in}const _m=["global","local","others"];var H4=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};class W4{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=fk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=_m[0]){if(_m.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_m.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:js})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=H4(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:B4,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:js})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:z4});if(d.error)throw d.error;const p=await d.json(),g=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(I=>{const A=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(I.split(";")[1].split("=")[1]);u[`${N}Page`]=A}),u.total=parseInt(g)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Ie(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Aa(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:js})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Aa(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:js})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Aa(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:js})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Aa(e.userId);try{const{data:n,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Aa(e.userId),Aa(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}const K4={getItem:t=>Hc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Hc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Hc()&&globalThis.localStorage.removeItem(t)}};function WE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function G4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xa={debug:!!(globalThis&&Hc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class mk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Q4 extends mk{}async function J4(t,e,n){xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),xa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Q4(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xa.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}G4();const Y4={url:o4,storageKey:a4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:l4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function KE(t,e,n){return await n()}class bu{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=bu.nextInstanceID,bu.nextInstanceID+=1,this.instanceID>0&&Ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Y4),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new W4({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=fk(i.fetch),this.lock=i.lock||KE,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Ur()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=J4:this.lock=KE,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:Hc()?this.storage=K4:(this.memoryStorage={},this.storage=WE(this.memoryStorage)):(this.memoryStorage={},this.storage=WE(this.memoryStorage)),Ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ck}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=I4(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ur()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),p4(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?{error:n}:{error:new dk("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Di}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:d,password:p,options:g}=e;let y=null,I=null;this.flowType==="pkce"&&([y,I]=await Sa(this.storage,this.storageKey)),s=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:g==null?void 0:g.emailRedirectTo,body:{email:d,password:p,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:y,code_challenge_method:I},xform:Di})}else if("phone"in e){const{phone:d,password:p,options:g}=e;s=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},channel:(i=g==null?void 0:g.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:Di})}else throw new qd("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:HE})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:HE})}else throw new qd("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new zd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,i,s,o,a,l,u,d,p,g,y;let I,A;if("message"in e)I=e.message,A=e.signature;else{const{chain:N,wallet:x,statement:E,options:b}=e;let j;if(Ur())if(typeof x=="object")j=x;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))j=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=x}const B=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const R=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),E?{statement:E}:null));let k;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")k=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)k=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)I=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),A=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${B.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(i=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((u=b==null?void 0:b.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((p=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const R=await j.signMessage(new TextEncoder().encode(I),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=R}}try{const{data:N,error:x}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:E4(A)},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Di});if(x)throw x;return!N||!N.session||!N.user?{data:{user:null,session:null},error:new zd}:(N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),{data:Object.assign({},N),error:x})}catch(N){if(Ie(N))return{data:{user:null,session:null},error:N};throw N}}async _exchangeCodeForSession(e){const n=await Wd(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Di});if(await Kd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new zd}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(Ie(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Di}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new zd}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Sa(this.storage,this.storageKey));const{error:p}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new qd("You must provide either an email or phone number.")}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Di});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await Sa(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:U4})}catch(s){if(Ie(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new bs;const{error:i}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(Ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new qd("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Wd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<pm:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:js}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bs}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:js})})}catch(n){if(Ie(n))return f4(n)&&(await this._removeSession(),await Kd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new bs;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Sa(this.storage,this.storageKey));const{data:u,error:d}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:js});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new bs;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=gm(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(Ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new bs;const{session:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ur())throw new Hd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new FE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new FE("No code detected.");const{data:E,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!s||!a||!o||!u)throw new Hd("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(a);let g=d+p;l&&(g=parseInt(l));const y=g-d;y*1e3<=Pa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const I=g-p;d-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,g,d):d-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,g,d);const{data:A,error:N}=await this._getUser(s);if(N)throw N;const x={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:p,expires_at:g,refresh_token:o,token_type:u,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Wd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(h4(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Kd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=b4(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await Sa(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(Ie(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,u,d;const{data:p,error:g}=s;if(g)throw g;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return Ur()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await x4(async i=>(i>0&&await A4(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Di})),(i,s)=>{const o=200*Math.pow(2,i);return s&&mm(s)&&Date.now()+o-r<Pa})}catch(r){if(this._debug(n,"error",r),Ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ur()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Wd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const i=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<pm;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${pm}s`),i){if(this.autoRefreshToken&&r.refresh_token){const{error:s}=await this._callRefreshToken(r.refresh_token);s&&(console.error(s),mm(s)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",s),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new bs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new cp;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new bs;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),Ie(s)){const o={session:null,error:s};return mm(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await pk(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Kd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ur()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Pa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Pa}ms, refresh threshold is ${Kg} ticks`),i<=Kg&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof mk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await Sa(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const{data:o,error:a}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],i=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),s=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:i,phone:s},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=gm(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+u4>Date.now()))return r;const{data:i,error:s}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(s)throw s;if(!i.keys||i.keys.length===0)throw new qc("JWKS is empty");if(this.jwks=i,this.jwks_cached_at=Date.now(),r=i.keys.find(o=>o.kid===e),!r)throw new qc("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:y,error:I}=await this.getSession();if(I||!y.session)return{data:null,error:I};r=y.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=gm(r);if(j4(s.exp),!i.kid||i.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:s,header:i,signature:o},error:null}}const u=D4(i.alg),d=await this.fetchJwk(i.kid,n),p=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,p,o,w4(`${a}.${l}`)))throw new qc("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}}bu.nextInstanceID=0;const X4=bu;class Z4 extends X4{constructor(e){super(e)}}var eB=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class tB{constructor(e,n,r){var i,s,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=i4(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:JU,realtime:XU,auth:Object.assign(Object.assign({},YU),{storageKey:u}),global:QU},p=s4(r??{},d);this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=p.global.headers)!==null&&s!==void 0?s:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=n4(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new vU(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new G$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new WU(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return eB(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:s,flowType:o,lock:a,debug:l},u,d){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Z4({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new OU(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const nB=(t,e,n)=>new tB(t,e,n),rB="https://tilyikrjfydofqprandn.supabase.co",iB="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpbHlpa3JqZnlkb2ZxcHJhbmRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMzU3NzksImV4cCI6MjA2NjkxMTc3OX0.dATkafpW2h3BF59iipyHtb8SQQaIqu_I5gycuHu15_k",hy=nB(rB,iB);function sB(){const{grade:t,term:e,year:n}=fn(),[r,i]=F.useState([]),[s,o]=F.useState(!0),[a,l]=F.useState(!1),u=mt(),{pathname:d}=lr();return F.useEffect(()=>{async function p(g,y,I){g=g.split("_")[1],y=y.split("_")[1];try{o(!0),l(!1);const{data:A,error:N}=await hy.from("degrees").select("student_id, name, seat_number, total_degree, rank").eq("grade",g).eq("term",y).eq("year",I).order("rank",{ascending:!0});A!=null&&A.length||l(!0),i(A),o(!1)}catch(A){console.log(A),l(!0)}}t&&e&&n&&p(t,e,n)},[d]),s?f.jsx(Wt,{}):a?f.jsx("main",{children:f.jsx("h2",{className:"text-center py-5",children:"    .    ."})}):f.jsxs("main",{children:[f.jsxs(Cn,{fontSize:3,py:3,children:["  ",xt(t)," - ",xt(e)," - ",n==null?void 0:n.split("_").join("/"),"."]}),f.jsx(Hx,{studentsCount:r.length}),f.jsxs("div",{className:"table-responsive border mt-2",children:[f.jsxs("table",{className:"table table-striped table-bordered",children:[f.jsx(qx,{}),f.jsx("tbody",{children:r.map(p=>f.jsxs("tr",{className:"degree_tr-linked",onClick:()=>{u(`/students/${p.student_id}`)},children:[f.jsx("th",{scope:"row",className:"text-center",children:p.rank}),f.jsx("td",{className:"text-center",children:p.seat_number}),f.jsx("td",{style:{whiteSpace:"nowrap"},children:p.name}),f.jsx("td",{className:"text-center",children:p.total_degree.total}),f.jsxs("td",{className:"text-center",children:["%",p.total_degree.percentage]})]},p.seat_number))})]}),s&&f.jsx(Wt,{})]})]})}const oB=({subject:t,student:e,index:n})=>{const r=e.degrees[n],i=r>=50?"bg-success":"bg-danger";return f.jsxs("tr",{children:[f.jsx("th",{scope:"row",children:t.name},n),f.jsx("td",{className:`text-center text-light ${i}`,children:r})]})},aB=()=>{},lB=({title:t,value:e})=>f.jsxs("h4",{className:"mb-1",children:[f.jsxs("span",{className:"fw-bold text-primary",children:[t,": "]}),f.jsxs("span",{children:[e,"."]})]}),cB=({student:t})=>{const e=[{title:"",value:t.name},{title:" ",value:t.id},{title:"",value:t.rank},{title:"",value:t.total_grade}];return f.jsx("div",{children:e.map((n,r)=>f.jsx(lB,{title:n.title,value:n.value},r))})};async function uB(t,e,n,r){const s=await(await fetch(`${eo}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();let o;return s.degrees.forEach(a=>{a.id==n&&(o=a)}),r(s.subjects),o}const dB=()=>{const{grade:t,year:e,studentId:n}=fn(),[r,i]=F.useState({}),[s,o]=F.useState([]),[a,l]=F.useState(!0);return F.useEffect(()=>{async function u(){let d;d=await uB(t,e,n,o),i(d),l(!1)}u()},[]),f.jsxs(f.Fragment,{children:[f.jsx(Cn,{fontSize:3,children:" "}),a?f.jsx(Wt,{}):f.jsxs("div",{className:"mt-3",children:[f.jsx(cB,{student:r}),f.jsxs("table",{className:"table table-striped border table-bordered mt-4",children:[f.jsx(aB,{}),f.jsx("tbody",{children:s.map((u,d)=>f.jsx(oB,{subject:u,student:r,index:d},d))})]})]})]})},hB=()=>f.jsxs("div",{className:"min-vh-100 d-flex flex-column gap-4 justify-content-center align-items-center",children:[f.jsx("h1",{children:"  ."}),f.jsx(et,{to:"/",className:"btn btn-primary",children:" "})]}),fy=({grade:t,backFrom:e})=>{const n=mt();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return f.jsx("button",{className:"btn btn-danger",onClick:r,children:""})};function qi({text:t,color:e,widthPercentage:n,onClick:r}){return f.jsx("button",{className:`btn btn-${e||"primary"} w-${n||"100"} p-2`,onClick:r,children:t})}const gk=({pdf:t})=>{const e=mt(),[n,r]=F.useState(!1);function i(){window.location.href=`https://drive.google.com/uc?export=download&id=${t.book_gdrive_id}`}function s(){e(`/book/${t.book_gdrive_id}`,{state:{book_name:t.book_name}})}return n?f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(qi,{text:"",color:"success",onClick:s}),f.jsx(qi,{text:"",onClick:i}),f.jsx(qi,{text:"",color:"danger",onClick:()=>r(!1)})]}):f.jsx(qi,{text:t.book_name,onClick:()=>r(!0)})},fa=()=>{const t=mt();function e(){t("/")}return f.jsx("button",{className:"btn btn-danger",onClick:e,children:" "})},fB=()=>{const{grade:t,term:e}=fn(),[n,r]=F.useState([]),[i,s]=F.useState(!0);return F.useEffect(()=>{fetch(`${eo}/darelom-students-data/books/2023_24/books_${t}.json`).then(o=>o.json()).then(o=>{r(o[e]),s(!1)})},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[f.jsx("h2",{children:" :"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(fy,{grade:t,backFrom:"books"}),f.jsx(fa,{})]})]}),f.jsxs(Cn,{children:[xt(t)," - ",xt(e)]}),i?f.jsx(Wt,{}):f.jsx("div",{className:"row g-2 my-2",children:n.map((o,a)=>f.jsx("div",{className:"col-sm-6",children:f.jsx(gk,{pdf:o})},a))})]})};function pB(){const t="btn btn-danger p-2 px-5 w-100",e=mt();function n(){e(-1)}return f.jsx("button",{className:t,onClick:n,children:""})}const mB=({bookId:t,isIframeLoading:e,setIsIframeLoading:n})=>{const r=`https://drive.google.com/file/d/${t}/preview`,i=`${e&&"d-none"} w-100`,s={height:"500px"};function o(){n(!1)}return f.jsx("iframe",{src:r,onLoad:o,className:i,style:s})},gB=({bookId:t})=>{const e="btn btn-primary p-2 px-5 w-100";function n(){window.location.href=`https://drive.google.com/uc?export=download&id=${t}`}return f.jsx("button",{className:e,onClick:n,children:""})},GE=({children:t})=>f.jsx("div",{className:"col-md-auto col-6",children:t}),QE=()=>{var s;const{bookId:t}=fn(),n=(s=lr().state)==null?void 0:s.book_name,[r,i]=F.useState(!0);return f.jsxs(f.Fragment,{children:[f.jsxs(Cn,{children:['"',n,'".']}),f.jsxs("div",{className:"my-2 d-flex justify-content-end row gx-2",children:[f.jsx(GE,{children:f.jsx(gB,{bookId:t})}),f.jsx(GE,{children:f.jsx(pB,{})})]}),r&&f.jsx(Wt,{}),f.jsx(mB,{bookId:t,isIframeLoading:r,setIsIframeLoading:i})]})},_B=({currentQuestionIndex:t,questionsLength:e})=>{const n=t+1;return f.jsx("div",{className:"d-flex justify-content-between ",children:f.jsxs("p",{className:"mb-0",children:["",f.jsxs("span",{className:"fw-bold",children:[" ",n," "]}),"",f.jsxs("span",{className:"fw-bold",children:[" ",e]}),"."]})})},vB=({questionText:t})=>f.jsx("h3",{className:"bg-black text-light p-2 py-3 text-center my-4 rounded-2 lh-base",children:t});function yB({currentQuestionIndex:t,setCurrentQuestionIndex:e,setIsAnswered:n,answerButtons:r}){function i(){n(!1),e(t+1),r.forEach(s=>{s.disabled=!1,s.classList.remove("btn-danger","btn-success")})}return f.jsx(qi,{text:"",onClick:i})}function wB({questionsLength:t,score:e}){const n=mt();function r(){n("/test_yourself/test_result",{state:{result:e,fullMark:t}})}return f.jsx(qi,{text:" ",onClick:r})}const EB=({children:t})=>f.jsx("div",{className:"modal-header",children:f.jsx("h5",{className:"modal-title text-center w-100",children:t})}),TB=({children:t})=>f.jsx("div",{className:"modal-body pb-1",children:f.jsx("p",{className:"text-center fw-bold",children:t})}),bB=({children:t})=>f.jsx("div",{className:"modal-footer border-0 pt-0",children:t}),IB=({setIsModalOpen:t,answerReason:e})=>f.jsx("div",{className:"modal d-block bg-black bg-opacity-75",tabIndex:"-1",children:f.jsx("div",{className:"modal-dialog modal-dialog-centered",children:f.jsxs("div",{className:"modal-content",children:[f.jsx(EB,{children:'"   "'}),f.jsx(TB,{children:e||"      ."}),f.jsx(bB,{children:f.jsx(qi,{text:"",color:"danger",onClick:()=>t(!1)})})]})})}),SB=({setIsModalOpen:t})=>f.jsx(qi,{text:" ",onClick:()=>t(!0)});function AB(t,e,n,r,i,s,o,a){function l(){r.current.forEach(p=>{p.disabled=!0}),d.disabled=!1}n(!0);const u=r.current[s[i].question_answer],d=t.target;e==s[i].question_answer?(d.classList.add("btn-success"),o(a+1),l()):(l(),d.classList.add("btn-danger"),u.classList.add("btn-success"))}const vm=()=>{var j,B,R,k,w,S;const{grade:t,term:e,subject:n}=fn(),[r,i]=F.useState(!1),[s,o]=F.useState(((j=location.state)==null?void 0:j.currentQuestionIndex)||0),[a,l]=F.useState(0),[u,d]=F.useState([]),[p,g]=F.useState(!1),y=F.useRef([]),[I,A]=F.useState(!0),x=lr().pathname;function E(C){jA($u(An,C)).then(O=>{const V=[];O.docs.forEach(P=>{V.push(P.data())}),d(V),A(!1)})}F.useEffect(()=>{x=="/test_yourself/sended_questions"?E("test_yourself/sended_questions"):x==`/${t}/${e}/${n}/test_yourself_students`?E(`${t}/test_yourself_students/questions/${e}/${n}`):fetch(`${eo}/darelom-students-data/questions/test_questions.json`).then(C=>C.json()).then(C=>{d(C),A(!1)})},[]);const b=s>=u.length-1;return f.jsxs(f.Fragment,{children:[f.jsx(Cn,{fontSize:"2",children:" "}),I?f.jsx(Wt,{}):u.length?f.jsxs("div",{className:"mt-2",children:[f.jsx(_B,{currentQuestionIndex:s,questionsLength:u.length,creatorName:(R=(B=u[s])==null?void 0:B.question_creator)==null?void 0:R.name}),f.jsx(vB,{questionText:(k=u[s])==null?void 0:k.question_text}),f.jsx("div",{className:"row g-2",children:(w=u[s])==null?void 0:w.question_options.map((C,O)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100 p-2",ref:V=>y.current[O]=V,onClick:V=>AB(V,O,i,y,s,u,l,a),children:C})},O))}),f.jsx("hr",{}),f.jsxs("div",{className:"mt-3 d-flex gap-2",children:[r&&b?f.jsx(wB,{questionsLength:u.length,score:a}):r&&!b&&f.jsx(yB,{currentQuestionIndex:s,setCurrentQuestionIndex:o,setIsAnswered:i,answerButtons:y.current}),r&&f.jsx(SB,{setIsModalOpen:g})]}),p&&f.jsx(IB,{setIsModalOpen:g,answerReason:(S=u[s])==null?void 0:S.answer_reason})]}):f.jsx("p",{className:"text-center fs-2 fw-bold my-2",children:"   ."})]})},xB=()=>{const t=lr(),{result:e,fullMark:n}=t.state;return f.jsxs(f.Fragment,{children:[f.jsx("h2",{children:" :"}),f.jsxs("p",{className:"text-center fs-1",children:[f.jsxs("span",{className:"fw-bold",children:[e," "]}),"",f.jsxs("span",{className:"fw-bold",children:[" ",n]}),"."]})]})},kB=()=>{const t=mt(),{grade:e,term:n}=fn(),[r,i]=F.useState([]),[s,o]=F.useState(!0);return F.useEffect(()=>{async function a(){var d;const u=(d=(await rs(ei(An,`${e}/test_yourself_students/questions`,n))).data())==null?void 0:d.subjects;i(u),o(!1)}a()},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:" :"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(fy,{grade:e,backFrom:"test_yourself_students"}),f.jsx(fa,{})]})]}),s?f.jsx(Wt,{}):f.jsx("div",{className:"row g-2 my-2",children:r==null?void 0:r.map((a,l)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/${a}/test_yourself_students`),children:xt(a)})},l))})]})},CB=()=>f.jsxs("div",{className:"row g-2",children:[f.jsx("div",{className:"col-sm-6",children:f.jsx(et,{to:"term_1",className:"btn btn-primary w-100",children:"  "})}),f.jsx("div",{className:"col-sm-6",children:f.jsx(et,{to:"term_2",className:"btn btn-primary w-100",children:"  "})})]}),RB=()=>{const t=mt(),[e,n]=F.useState(!0),{grade:r,term:i}=fn(),[s,o]=F.useState([]);return F.useEffect(()=>{rs(ei(An,`${r}/test_yourself_students/questions/${i}`)).then(a=>{o(a.data().subjects),n(!1)})},[]),f.jsx(f.Fragment,{children:e?f.jsx(Wt,{}):f.jsx("div",{className:"row g-2",children:s.map((a,l)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t(`/${r}/${i}/${a}/send_question`),children:xt(a)})},l))})})},_k=({formRef:t,children:e})=>f.jsx("form",{className:"mx-auto mt-3 needs-validation",noValidate:!0,style:{maxWidth:"480px"},ref:t,children:e}),Yn=({field:t,marginBottom:e=3})=>f.jsx("div",{className:`mb-${e}`,children:t}),vk=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{htmlFor:"email-input",className:"form-label fw-bold",children:" :"}),f.jsx("input",{type:"email",className:"form-control",pattern:"^[^@]+@[^@]+\\.[^@]{2,}$",id:"email-input",placeholder:"folan.alfolany@gmail.com","aria-describedby":"emailHelp",required:!0}),f.jsx("div",{className:"invalid-feedback",children:"    ."})]}),yk=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{htmlFor:"password-input",className:"form-label fw-bold",children:" :"}),f.jsx("input",{type:"password",placeholder:"_____",minLength:"6",className:"form-control",id:"password-input",autoComplete:"off",required:!0}),f.jsx("div",{className:"invalid-feedback",children:"      6   ."})]}),PB=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{htmlFor:"name-input",className:"form-label fw-bold",children:":"}),f.jsx("input",{type:"text",className:"form-control",minLength:3,id:"name-input",placeholder:" ",required:!0}),f.jsx("div",{className:"invalid-feedback",children:"     3   ."})]}),NB=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"fw-bold",children:" :"}),f.jsxs("select",{className:"form-select mt-2",id:"grade-input",required:!0,children:[f.jsx("option",{value:"grade_1",children:" "}),f.jsx("option",{value:"grade_2",children:" "}),f.jsx("option",{value:"grade_3",children:" "}),f.jsx("option",{value:"grade_4",children:" "})]}),f.jsx("div",{className:"invalid-feedback",children:"  ."})]}),Wu=({text:t})=>f.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-bold",children:t}),up=({label:t,placeholder:e,invalidFeedback:n,minLength:r=10,rows:i=4,fontSize:s=5,id:o="textarea-field"})=>f.jsxs(f.Fragment,{children:[f.jsx("label",{className:`fw-bold fs-${s} mb-1`,htmlFor:o,children:t}),f.jsx("textarea",{className:"form-control",id:o,rows:i,placeholder:e,minLength:r,required:!0}),f.jsx("div",{className:"invalid-feedback",children:n})]}),OB=()=>{const t=mt(),[e,n]=F.useState(!1),[r,i]=F.useState(!1),s=F.useRef(null);return F.useEffect(()=>{const o=s.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{i(!0);const l=a.target["name-input"].value,u=a.target["email-input"].value,d=a.target["grade-input"].value,p=a.target["password-input"].value,g=a.target["textarea-field"].value,I=(await zN(Uu,u,p)).user.uid;await y2(ei(An,"users",I),{name:l,email:u,grade:d,uid:I,message:g,write_permission:!1}),t("/")}catch(l){console.log(l.code),n(!0)}finally{i(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),f.jsxs("div",{children:[f.jsx(Cn,{children:"  "}),f.jsxs(_k,{formRef:s,children:[f.jsx(Yn,{field:f.jsx(PB,{})}),f.jsx(Yn,{field:f.jsx(vk,{})}),f.jsx(Yn,{field:f.jsx(NB,{})}),f.jsx(Yn,{field:f.jsx(up,{placeholder:"    .",label:"    :",fontSize:6,minLength:100,invalidFeedback:"     100   ."})}),f.jsx(Yn,{field:f.jsx(yk,{})}),r?f.jsx(Ml,{}):f.jsx(Wu,{text:"  "}),e&&f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})]})},Gd=()=>{const t=mt(),[e,n]=F.useState(!1),[r,i]=F.useState(!1),s=F.useRef(null);return F.useEffect(()=>{const o=s.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{i(!0);const l=a.target["email-input"].value,u=a.target["password-input"].value;await qN(Uu,l,u),t("/")}catch(l){console.log(l.code),n(!0)}finally{i(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),f.jsxs("div",{children:[f.jsx(Cn,{children:" "}),f.jsxs(_k,{formRef:s,children:[f.jsx(Yn,{field:f.jsx(vk,{})}),f.jsx(Yn,{field:f.jsx(yk,{})}),r?f.jsx(Ml,{}):f.jsx(Wu,{text:" "}),e&&f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]}),f.jsxs("p",{className:"text-center mt-2 fw-bold",children:["    ",f.jsx(et,{to:"/signup",children:" "}),"."]})]})},py=({formRef:t,children:e})=>f.jsx("form",{className:"mt-3 needs-validation",noValidate:!0,ref:t,children:e}),jB=({optionsRef:t})=>{const e=["","","",""];return f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"fw-bold fs-5 mb-1",children:":"}),f.jsx("div",{className:"row g-2",children:e.map((n,r)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("input",{type:"text",className:"form-control",placeholder:` ${n}.`,ref:i=>t.current[r]=i,required:!0})},r))})]})},DB=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"fw-bold fs-5 mb-1",children:"  :"}),f.jsxs("select",{className:"form-control",id:"options-input",children:[f.jsx("option",{value:"0",children:"1"}),f.jsx("option",{value:"1",children:"2"}),f.jsx("option",{value:"2",children:"3"}),f.jsx("option",{value:"3",children:"4"})]})]}),LB=()=>f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"fw-bold fs-5 mb-1",children:":"}),f.jsx("input",{type:"text",className:"form-control",placeholder:" .",id:"answer-reason-input"})]}),MB=()=>f.jsx(up,{placeholder:"   .",label:" :",invalidFeedback:"      10   ."}),VB=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),{grade:i,term:s,subject:o}=fn(),a=F.useRef([]),l=F.useRef(null);return F.useEffect(()=>{const u=l.current;u.addEventListener("submit",async d=>{d.preventDefault(),d.stopPropagation();const p=u["textarea-field"].value,g=[],y=Number(u["options-input"].value),I=u["answer-reason-input"].value;if(a.current.forEach(A=>{g.push(A.value)}),u.checkValidity())try{e(!0);const{name:A,uid:N}=JSON.parse(localStorage.getItem("loggedinUserInfo"));await $v($u(An,`${i}/test_yourself_students/questions/${s}/${o}`),{question_text:p,question_answer:y,question_options:g,answer_reason:I,question_creator:{name:A,uid:N}}),l.current.reset(),u.classList.remove("was-validated"),r("success")}catch(A){console.log(A.code),u.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else u.classList.add("was-validated")})},[]),f.jsxs(f.Fragment,{children:[f.jsx(Cn,{children:"  []"}),f.jsxs("p",{className:"text-center mt-2 fw-bold",children:[`${xt(i)} - ${xt(s)} - ${xt(o)}`,"."]}),f.jsxs(py,{formRef:l,children:[f.jsx(Yn,{field:f.jsx(MB,{})}),f.jsx(Yn,{field:f.jsx(jB,{optionsRef:a})}),f.jsx(Yn,{field:f.jsx(DB,{})}),f.jsx(Yn,{field:f.jsx(LB,{})}),t?f.jsx(Ml,{}):f.jsx(Wu,{text:" "})]}),n==="initial"?null:n==="success"?f.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},FB=()=>f.jsx(up,{placeholder:"  .",label:":",invalidFeedback:"      10   .",rows:7}),$B=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),i=F.useRef(null);return F.useEffect(()=>{const s=i.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();const a=s["textarea-field"].value;if(s.checkValidity())try{e(!0),await $v($u(An,"suggestions"),{suggestion:a}),i.current.reset(),s.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),s.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else s.classList.add("was-validated")})},[]),f.jsxs(f.Fragment,{children:[f.jsx(Cn,{children:" "}),f.jsxs(py,{formRef:i,children:[f.jsx(Yn,{field:f.jsx(FB,{})}),t?f.jsx(Ml,{}):f.jsx(Wu,{text:" "})]}),n==="initial"?null:n==="success"?f.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},UB=()=>f.jsx(up,{placeholder:"          .",label:":",invalidFeedback:"      10   .",rows:7}),BB=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),i=F.useRef(null);return F.useEffect(()=>{const s=i.current;s.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation(),console.log("s");const a=s["textarea-field"].value;if(s.checkValidity())try{e(!0),await $v($u(An,"problems"),{problem:a}),i.current.reset(),s.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),s.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else s.classList.add("was-validated")})},[]),f.jsxs(f.Fragment,{children:[f.jsx(Cn,{children:"  "}),f.jsxs(py,{formRef:i,children:[f.jsx(Yn,{field:f.jsx(UB,{})}),t?f.jsx(Ml,{}):f.jsx(Wu,{text:" "})]}),n==="initial"?null:n==="success"?f.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"  ."}):f.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:" ."})]})},zB=()=>async(t,e)=>{try{const r=await(await fetch(t)).blob(),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}catch(n){console.log(n)}},qB=()=>{const{grade:t}=fn(),[e,n]=F.useState(!1),[r,i]=F.useState(!0);let s="",o;t==="exams_schedule"?(s=`${eo}/darelom-students-data/schedule/exams_schedule.jpg`,o="     2025"):(s=`${eo}/darelom-students-data/schedule/${t}.jpg`,o=`  ${xt(t)}`);const a=zB();function l(){n(!1),i(!1)}function u(){n(!0),i(!1)}return f.jsxs("div",{className:"container",children:[r?f.jsx(Wt,{}):f.jsx(f.Fragment,{children:!e&&f.jsx(f.Fragment,{children:f.jsxs("p",{className:"text-center fw-bold fs-5",children:["  ",xt(t),"   ."]})})}),f.jsxs("div",{className:`d-${e?"block":"none"}`,children:[f.jsx("img",{src:s,className:"w-100",alt:"Schecule",onError:l,onLoad:u}),f.jsx("button",{className:"btn btn-primary w-100 mt-3",onClick:()=>a(s,o),children:" "})]})]})},HB=({grade:t,backFrom:e})=>{const n=mt();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return f.jsx("button",{className:"btn btn-danger",onClick:r,children:""})},WB=()=>{const{grade:t,term:e}=fn(),[n,r]=F.useState({}),[i,s]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{rs(ei(An,`${t}/lectures_recordings`)).then(l=>{var d;const u=(d=l.data())==null?void 0:d[e];if(u&&Object.keys(u).length){const p=Object.keys(u);if(p.includes("mojalad_tasgilat")){const g=["mojalad_tasgilat",...p.filter(y=>y!=="mojalad_tasgilat")];s(g)}else s(p);r(u)}a(!1)})},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[f.jsx("h2",{children:" :"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(HB,{grade:t,backFrom:"lectures_recordings"}),f.jsx(fa,{})]})]}),f.jsxs(Cn,{children:[xt(t)," - ",xt(e)]}),o?f.jsx(Wt,{}):f.jsx(f.Fragment,{children:Object.keys(n).length?f.jsx("div",{className:"row g-2 my-2",children:i.map((l,u)=>f.jsx("div",{className:"col-sm-6",children:f.jsx(qi,{text:xt(l),onClick:()=>window.location.href=n[l]})},u))}):f.jsx("p",{className:"text-center fw-bold mt-4 fs-4",children:"   ."})})]})},KB=()=>{const t=mt(),{grade:e,term:n}=fn(),[r,i]=F.useState([]),[s,o]=F.useState(!0);return F.useEffect(()=>{async function a(){var d;const u=((d=(await rs(ei(An,`${e}/more_resources/`))).data())==null?void 0:d[n])||[];i(u),o(!1)}a()},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:" :"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(fy,{grade:e,backFrom:"more_resources"}),f.jsx(fa,{})]})]}),s?f.jsx(Wt,{}):f.jsx("div",{className:"row g-2 my-2",children:r!=null&&r.length?r==null?void 0:r.map((a,l)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/more_resources/${a}`),children:xt(a)})},l)):f.jsx("p",{className:"fw-bold text-center fs-3",children:"   ."})})]})},JE=()=>{const t=mt(),{grade:e,term:n,subject:r}=fn(),[i,s]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{async function l(){var p;let u;e?u=await rs(ei(An,`${e}/more_resources/${n}/${r}`)):u=await rs(ei(An,`general_subjects/${r}`));const d=((p=u.data())==null?void 0:p.resources)||[];s(d),a(!1)}l()},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:" :"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx("button",{className:"btn btn-danger",onClick:()=>t(-1),children:""}),f.jsx(fa,{})]})]}),o?f.jsx(Wt,{}):f.jsx("div",{className:"row g-2 my-2",children:i!=null&&i.length?i==null?void 0:i.map((l,u)=>f.jsx("div",{className:"col-sm-6",children:f.jsx(et,{className:"btn btn-primary w-100",to:l!=null&&l.isBook?`/book/${l.link}`:l.link,state:{book_name:l.title},children:l.title})},u)):f.jsx("p",{className:"fw-bold text-center fs-3",children:"   ."})})]})},GB=({grade:t,backFrom:e})=>{const n=mt();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return f.jsx("button",{className:"btn btn-danger",onClick:r,children:""})},QB=()=>{const[t,e]=F.useState(!1),{grade:n,term:r}=fn(),[i,s]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{fetch(`${eo}/darelom-students-data/final_exams/final_exams_${n}.json`).then(l=>l.json()).then(l=>{l[r].length?(s(l[r]),a(!1)):t(!0)}).catch(l=>{e(!0)})},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[f.jsx("h2",{children:" :"}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(GB,{grade:n,backFrom:"final_exams"}),f.jsx(fa,{})]})]}),f.jsxs(Cn,{children:[xt(n)," - ",xt(r)]}),t?f.jsx("p",{className:"fw-bold text-center fs-4 mt-4",children:"   ."}):o?f.jsx(Wt,{}):f.jsx("div",{className:"row g-2 my-2",children:i.map((l,u)=>f.jsx("div",{className:"col-sm-6",children:f.jsx(gk,{pdf:l})},u))})]})},JB=()=>{const t=mt(),[e,n]=F.useState([]),[r,i]=F.useState(!0);return F.useEffect(()=>{async function s(){var l;const a=(l=(await rs(ei(An,"general_subjects","subjects"))).data())==null?void 0:l.ids;n(a),i(!1)}s()},[]),f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[f.jsx("h2",{children:" :"}),f.jsx("div",{className:"d-flex gap-2",children:f.jsx(fa,{})})]}),r?f.jsx(Wt,{}):f.jsx("div",{className:"row g-2 my-2",children:e==null?void 0:e.map((s,o)=>f.jsx("div",{className:"col-sm-6",children:f.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/general_subjects/${s}`),children:xt(s)})},o))})]})};function YB(t){let e=0,n=0;return t.map(i=>i.degrees).flat().forEach(i=>{i.isCalculatedInTotal&&(e+=i.finalDegree,i.degree.startsWith("/")?n+=Number(i.degree.slice(1)):isNaN(Number(i.degree))||(n+=Number(i.degree)))}),{max:e,total:n}}function XB(){const[t,e]=F.useState({name:"",totalDegree:{max:0,total:0},firstGradeInPlatform:2024}),[n,r]=F.useState({}),[i,s]=F.useState(!1),[o,a]=F.useState(!1),{student_id:l}=fn(),u=F.useRef(null);F.useEffect(()=>{s(!0),d()},[l]);async function d(){const{data:p,error:g}=await hy.from("degrees").select("*").eq("student_id",l).order("grade",{ascending:!0}).order("term",{ascending:!0});if(console.log(p),p&&p.length){e({name:p[0].name,totalDegree:YB(p),firstGradeInPlatform:p[0].grade});const y={};p.forEach(I=>{y[I.grade]||(y[I.grade]=[]),y[I.grade].push(I)}),r(y),a(!1)}else a(!0);s(!1)}return i?f.jsx(Wt,{}):o?f.jsxs("main",{children:[f.jsxs("div",{className:"alert alert-danger text-center my-5",children:["         .   "," ",f.jsx("button",{type:"button",className:"text-decoration-underline p-0 m-0 align-baseline",style:{color:"rgb(110 168 254)",fontSize:"1em",verticalAlign:"middle",background:"none",border:"none"},"data-bs-toggle":"modal","data-bs-target":"#idInfoModal",tabIndex:0,"aria-label":"   ",children:" "}),"  ",f.jsx(et,{to:"/send_problem",children:"  "}),".   "," ",f.jsx(et,{to:"/find_student",children:"   "}),"."]}),f.jsx("div",{className:"modal fade",id:"idInfoModal",tabIndex:-1,"aria-labelledby":"idInfoModalLabel","aria-hidden":"true",children:f.jsx("div",{className:"modal-dialog",children:f.jsxs("div",{className:"modal-content",children:[f.jsx("div",{className:"modal-header",children:f.jsx("h5",{className:"modal-title",id:"idInfoModalLabel",children:"   "})}),f.jsxs("div",{className:"modal-body text-end",children:["          +     --:",f.jsx("br",{}),f.jsx("br",{}),'-         2024   : "12345"   : "123452024".',f.jsx("br",{}),f.jsx("br",{}),'-            : "34567"     2025   : "345672025".',f.jsx("br",{}),f.jsx("br",{}),'-         2024                          "34567"    "345672024".']}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{type:"button",className:"btn btn-danger w-100","data-bs-dismiss":"modal",children:""})})]})})})]}):f.jsxs("main",{children:[f.jsxs("section",{className:"d-grid gap-1",children:[t.firstGradeInPlatform>1&&f.jsxs("span",{className:"fs-6 text-danger mb-3",children:["*      ",xt(`grade_${t.firstGradeInPlatform}`),"."]}),f.jsxs("h4",{className:"mb-1",children:[f.jsx("span",{className:"fw-bold text-primary",children:": "}),f.jsxs("span",{children:[t.name,"."]})]}),f.jsxs("h4",{className:"mb-1",children:[f.jsx("span",{className:"fw-bold text-primary",children:" : "}),f.jsxs("span",{children:[l,"."]})]}),f.jsxs("h4",{className:"mb-1",children:[f.jsx("span",{className:"fw-bold text-primary",children:" : "}),f.jsxs("span",{className:"fs-5",children:[t.totalDegree.total,"/",t.totalDegree.max," ",f.jsxs("span",{className:"fs-6",children:["(",(t.totalDegree.total*100/t.totalDegree.max).toFixed(2),"%)."]})]})]})]}),f.jsx("div",{className:"accordion mt-4",id:"gradesAccordion",ref:u,children:Object.entries(n).map(([p,g],y)=>f.jsxs("div",{className:"accordion-item",children:[f.jsx("h2",{className:"accordion-header",id:`heading${p}`,children:f.jsx("button",{className:`accordion-button ${y!==0?"collapsed":""}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${p}`,"aria-expanded":y===0,"aria-controls":`collapse${p}`,children:xt(`grade_${p}`)})}),f.jsx("div",{id:`collapse${p}`,className:`accordion-collapse collapse ${y===0?"show":""}`,"aria-labelledby":`heading${p}`,"data-bs-parent":"#gradesAccordion",children:f.jsx("div",{className:"accordion-body",children:g.map(I=>f.jsx("div",{className:"mb-4",children:f.jsxs("div",{className:"table-responsive border-secondary-subtle rounded-2 py-1 my-0 ",children:[f.jsxs("div",{className:"mb-4",children:[f.jsxs("h4",{className:"mb-1 fs-5",children:[f.jsx("span",{className:"fw-bold text-primary",children:" : "}),f.jsxs("span",{children:[I.term,"."]})]}),f.jsxs("h4",{className:"mb-1 fs-5",children:[f.jsx("span",{className:"fw-bold text-primary",children:" : "}),f.jsxs("span",{children:[I.year,"."]})]}),f.jsxs("h4",{className:"mb-1 fs-5",children:[f.jsx("span",{className:"fw-bold text-primary",children:": "}),f.jsxs("span",{className:"fs-5",children:[I.total_degree.total," ",f.jsxs("span",{className:"fs-6",children:["(",I.total_degree.percentage,"%)"]}),"."]})]}),f.jsxs("h4",{className:"mb-1 fs-5",children:[f.jsx("span",{className:"fw-bold text-primary",children:": "}),f.jsxs("span",{className:"fs-5",children:[I.rank,"#."]})]})]}),f.jsxs("table",{className:"table table-striped border",children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{className:"bg-dark text-white border-start py-2",children:""}),f.jsx("th",{className:"text-center bg-dark text-white py-2",children:""})]})}),f.jsx("tbody",{children:I.degrees.map((A,N)=>{const x=A.name||A.id;let E=A.degree;typeof E=="string"&&E.startsWith("/")&&(E=E.slice(1));const j=parseInt(E,10)>=50?"text-bg-success":"text-bg-danger";return f.jsxs("tr",{children:[f.jsx("td",{className:"fw-bold",children:x}),f.jsx("td",{className:`${j} text-center`,children:E})]},N)})})]})]})},I.term))})})]},p))})]})}function ZB(){const[t,e]=F.useState(""),[n,r]=F.useState(!1),[i,s]=F.useState(null),o=mt(),a=async l=>{if(l.preventDefault(),r(!0),s(null),!/^\d{9}$/.test(t)){s("      9  ."),r(!1);return}try{const u=parseInt(t,10),{data:d,error:p}=await hy.from("degrees").select("student_id").eq("student_id",u).limit(1);if(p)throw p;d&&d.length>0?o(`/students/${u}`):s("    .        .")}catch(u){s("   .    ."),console.error("Error searching for student:",u)}finally{r(!1)}};return f.jsx("main",{className:"container",children:f.jsx("div",{className:"row justify-content-center",children:f.jsx("div",{children:f.jsx("div",{className:" shadow-sm",children:f.jsxs("div",{className:"card-body",children:[f.jsx(Cn,{children:"   "}),f.jsxs("form",{onSubmit:a,className:"col-md-6 mx-auto",children:[f.jsxs("div",{className:"my-3",children:[f.jsxs("label",{htmlFor:"studentId",className:"form-label d-flex align-items-center gap-1",children:[" :",f.jsx("button",{type:"button",className:"btn btn-sm",style:{fontSize:"1.2em",verticalAlign:"middle",padding:0,lineHeight:1},"data-bs-toggle":"modal","data-bs-target":"#idInfoModal",tabIndex:-1,"aria-label":"   ",children:f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",style:{width:"25px",height:"25px",transform:"scaleX(-1)"},children:f.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 0 1-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 0 1-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 0 1-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584ZM12 18a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"})})})]}),f.jsx("div",{className:"modal fade",id:"idInfoModal",tabIndex:-1,"aria-labelledby":"idInfoModalLabel","aria-hidden":"true",children:f.jsx("div",{className:"modal-dialog",children:f.jsxs("div",{className:"modal-content",children:[f.jsx("div",{className:"modal-header",children:f.jsx("h5",{className:"modal-title",id:"idInfoModalLabel",children:"   "})}),f.jsxs("div",{className:"modal-body",children:["          +     --:",f.jsx("br",{}),f.jsx("br",{}),'-         2024   : "12345"   : "123452024".',f.jsx("br",{}),f.jsx("br",{}),'-            : "34567"     2025   : "345672025".',f.jsx("br",{}),f.jsx("br",{}),'-         2024                          "34567"    "345672024".']}),f.jsx("div",{className:"modal-footer",children:f.jsx("button",{type:"button",className:"btn btn-danger w-100","data-bs-dismiss":"modal",children:""})})]})})}),f.jsx("input",{type:"number",className:"form-control",id:"studentId",placeholder:"123456789",value:t,onChange:l=>{l.target.value.length<=9&&e(l.target.value)},required:!0})]}),i&&f.jsx("div",{className:"alert alert-danger",children:i}),f.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:n,children:n?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),f.jsx("span",{className:"visually-hidden",children:"Loading..."})]}):""})]})]})})})})})}function e3(){const[t,e]=F.useState(null),[n,r]=F.useState(JSON.parse(localStorage.getItem("loggedInUserInfo")));F.useEffect(()=>{YI(Uu,async s=>{if(s){const a=(await rs(ei(An,`users/${s.uid}`))).data();localStorage.setItem("loggedinUserInfo",JSON.stringify(a)),r(a)}else localStorage.setItem("loggedinUserInfo",JSON.stringify(null)),r(null);e(s),localStorage.setItem("loggedinUser",JSON.stringify(s))})},[]);const i=uF(Mg(f.jsx(f.Fragment,{children:f.jsxs(ze,{path:"/",element:f.jsx(T$,{}),errorElement:f.jsx(hB,{}),children:[f.jsx(ze,{path:"/",element:f.jsx(N$,{})}),f.jsx(ze,{path:"/degrees/:grade/:year",element:f.jsx($$,{})}),f.jsx(ze,{path:"/degrees/:grade/:year/:studentId",element:f.jsx(dB,{})}),f.jsx(ze,{path:"/ranking/:grade/:term/:year",element:f.jsx(sB,{})}),f.jsx(ze,{path:":grade/books/:term",element:f.jsx(fB,{})}),f.jsx(ze,{path:"/book/:bookId",element:f.jsx(QE,{})}),f.jsx(ze,{path:":grade/final_exams/:term",element:f.jsx(QB,{})}),f.jsx(ze,{path:"/final_exam/:examId",element:f.jsx(QE,{})}),f.jsx(ze,{path:":grade/more_resources/:term",element:f.jsx(KB,{})}),f.jsx(ze,{path:":grade/:term/more_resources/:subject",element:f.jsx(JE,{})}),f.jsx(ze,{path:"/general_subjects",element:f.jsx(JB,{})}),f.jsx(ze,{path:"/general_subjects/:subject",element:f.jsx(JE,{})}),f.jsx(ze,{path:"/test_yourself",element:f.jsx(vm,{})})," ",f.jsx(ze,{path:"/test_yourself/test_result",element:f.jsx(xB,{})}),f.jsx(ze,{path:":grade/test_yourself_students/:term",element:f.jsx(kB,{})}),f.jsx(ze,{path:"/test_yourself/sended_questions",element:f.jsx(vm,{})}),f.jsx(ze,{path:"/:grade/:term/:subject/test_yourself_students",element:f.jsx(vm,{})}),f.jsx(ze,{path:"/:grade/send_question_selector",element:n!=null&&n.write_permission?f.jsx(CB,{}):f.jsx(Gd,{})}),f.jsx(ze,{path:"/:grade/send_question_selector/:term",element:n!=null&&n.write_permission?f.jsx(RB,{}):f.jsx(Gd,{})}),f.jsx(ze,{path:"/:grade/:term/:subject/send_question",element:n!=null&&n.write_permission?f.jsx(VB,{}):f.jsx(Gd,{})}),f.jsx(ze,{path:"/signup",element:t?f.jsx(vE,{to:"/"}):f.jsx(OB,{})}),f.jsx(ze,{path:"/signin",element:t?f.jsx(vE,{to:"/"}):f.jsx(Gd,{})}),f.jsx(ze,{path:"/send_suggestion",element:f.jsx($B,{})}),f.jsx(ze,{path:"/send_problem",element:f.jsx(BB,{})}),f.jsx(ze,{path:"/:grade/schedule",element:f.jsx(qB,{})}),f.jsx(ze,{path:"/:grade/lectures_recordings/:term",element:f.jsx(WB,{})}),f.jsx(ze,{path:"/students/:student_id",element:f.jsx(XB,{})}),f.jsx(ze,{path:"/find_student",element:f.jsx(ZB,{})})]})})));return f.jsx(yF,{router:i})}ym.createRoot(document.getElementById("root")).render(f.jsx(e3,{}));document.documentElement.setAttribute("data-bs-theme",localStorage.getItem("theme")||"light");
