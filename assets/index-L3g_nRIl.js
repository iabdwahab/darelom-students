function YE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function XE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ZE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var eb={exports:{}},hf={},tb={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iu=Symbol.for("react.element"),U1=Symbol.for("react.portal"),B1=Symbol.for("react.fragment"),z1=Symbol.for("react.strict_mode"),q1=Symbol.for("react.profiler"),H1=Symbol.for("react.provider"),W1=Symbol.for("react.context"),K1=Symbol.for("react.forward_ref"),G1=Symbol.for("react.suspense"),Q1=Symbol.for("react.memo"),J1=Symbol.for("react.lazy"),by=Symbol.iterator;function Y1(t){return t===null||typeof t!="object"?null:(t=by&&t[by]||t["@@iterator"],typeof t=="function"?t:null)}var nb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rb=Object.assign,sb={};function Il(t,e,n){this.props=t,this.context=e,this.refs=sb,this.updater=n||nb}Il.prototype.isReactComponent={};Il.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Il.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ib(){}ib.prototype=Il.prototype;function Jm(t,e,n){this.props=t,this.context=e,this.refs=sb,this.updater=n||nb}var Ym=Jm.prototype=new ib;Ym.constructor=Jm;rb(Ym,Il.prototype);Ym.isPureReactComponent=!0;var Ty=Array.isArray,ob=Object.prototype.hasOwnProperty,Xm={current:null},ab={key:!0,ref:!0,__self:!0,__source:!0};function lb(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ob.call(e,r)&&!ab.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Iu,type:t,key:i,ref:o,props:s,_owner:Xm.current}}function X1(t,e){return{$$typeof:Iu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Zm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Iu}function Z1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Iy=/\/+/g;function Tp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Z1(""+t.key):e.toString(36)}function Qd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Iu:case U1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tp(o,0):r,Ty(s)?(n="",t!=null&&(n=t.replace(Iy,"$&/")+"/"),Qd(s,e,n,"",function(u){return u})):s!=null&&(Zm(s)&&(s=X1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Iy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ty(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Tp(i,a);o+=Qd(i,e,n,l,s)}else if(l=Y1(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Tp(i,a++),o+=Qd(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yd(t,e,n){if(t==null)return t;var r=[],s=0;return Qd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function ek(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},Jd={transition:null},tk={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:Jd,ReactCurrentOwner:Xm};function cb(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:yd,forEach:function(t,e,n){yd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yd(t,function(){e++}),e},toArray:function(t){return yd(t,function(e){return e})||[]},only:function(t){if(!Zm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=Il;Re.Fragment=B1;Re.Profiler=q1;Re.PureComponent=Jm;Re.StrictMode=z1;Re.Suspense=G1;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tk;Re.act=cb;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rb({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Xm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ob.call(e,l)&&!ab.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Iu,type:t.type,key:s,ref:i,props:r,_owner:o}};Re.createContext=function(t){return t={$$typeof:W1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:H1,_context:t},t.Consumer=t};Re.createElement=lb;Re.createFactory=function(t){var e=lb.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:K1,render:t}};Re.isValidElement=Zm;Re.lazy=function(t){return{$$typeof:J1,_payload:{_status:-1,_result:t},_init:ek}};Re.memo=function(t,e){return{$$typeof:Q1,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=Jd.transition;Jd.transition={};try{t()}finally{Jd.transition=e}};Re.unstable_act=cb;Re.useCallback=function(t,e){return xn.current.useCallback(t,e)};Re.useContext=function(t){return xn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return xn.current.useEffect(t,e)};Re.useId=function(){return xn.current.useId()};Re.useImperativeHandle=function(t,e,n){return xn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return xn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return xn.current.useReducer(t,e,n)};Re.useRef=function(t){return xn.current.useRef(t)};Re.useState=function(t){return xn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return xn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return xn.current.useTransition()};Re.version="18.3.1";tb.exports=Re;var F=tb.exports;const nk=XE(F),rk=YE({__proto__:null,default:nk},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sk=F,ik=Symbol.for("react.element"),ok=Symbol.for("react.fragment"),ak=Object.prototype.hasOwnProperty,lk=sk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ck={key:!0,ref:!0,__self:!0,__source:!0};function ub(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)ak.call(e,r)&&!ck.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:ik,type:t,key:i,ref:o,props:s,_owner:lk.current}}hf.Fragment=ok;hf.jsx=ub;hf.jsxs=ub;eb.exports=hf;var h=eb.exports,yg={},db={exports:{}},or={},hb={exports:{}},fb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ae){var de=X.length;X.push(ae);e:for(;0<de;){var Ae=de-1>>>1,be=X[Ae];if(0<s(be,ae))X[Ae]=ae,X[de]=be,de=Ae;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],de=X.pop();if(de!==ae){X[0]=de;e:for(var Ae=0,be=X.length,H=be>>>1;Ae<H;){var Ue=2*(Ae+1)-1,qe=X[Ue],Xe=Ue+1,tt=X[Xe];if(0>s(qe,de))Xe<be&&0>s(tt,qe)?(X[Ae]=tt,X[Xe]=de,Ae=Xe):(X[Ae]=qe,X[Ue]=de,Ae=Ue);else if(Xe<be&&0>s(tt,de))X[Ae]=tt,X[Xe]=de,Ae=Xe;else break e}}return ae}function s(X,ae){var de=X.sortIndex-ae.sortIndex;return de!==0?de:X.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,p=null,m=3,y=!1,I=!1,A=!1,j=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(X){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=X)r(u),ae.sortIndex=ae.expirationTime,e(l,ae);else break;ae=n(u)}}function O(X){if(A=!1,T(X),!I)if(n(l)!==null)I=!0,Ye(B);else{var ae=n(u);ae!==null&&we(O,ae.startTime-X)}}function B(X,ae){I=!1,A&&(A=!1,x(w),w=-1),y=!0;var de=m;try{for(T(ae),p=n(l);p!==null&&(!(p.expirationTime>ae)||X&&!N());){var Ae=p.callback;if(typeof Ae=="function"){p.callback=null,m=p.priorityLevel;var be=Ae(p.expirationTime<=ae);ae=t.unstable_now(),typeof be=="function"?p.callback=be:p===n(l)&&r(l),T(ae)}else r(l);p=n(l)}if(p!==null)var H=!0;else{var Ue=n(u);Ue!==null&&we(O,Ue.startTime-ae),H=!1}return H}finally{p=null,m=de,y=!1}}var R=!1,k=null,w=-1,S=5,C=-1;function N(){return!(t.unstable_now()-C<S)}function V(){if(k!==null){var X=t.unstable_now();C=X;var ae=!0;try{ae=k(!0,X)}finally{ae?P():(R=!1,k=null)}}else R=!1}var P;if(typeof E=="function")P=function(){E(V)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,Je=me.port2;me.port1.onmessage=V,P=function(){Je.postMessage(null)}}else P=function(){j(V,0)};function Ye(X){k=X,R||(R=!0,P())}function we(X,ae){w=j(function(){X(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){I||y||(I=!0,Ye(B))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(X){switch(m){case 1:case 2:case 3:var ae=3;break;default:ae=m}var de=m;m=ae;try{return X()}finally{m=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var de=m;m=X;try{return ae()}finally{m=de}},t.unstable_scheduleCallback=function(X,ae,de){var Ae=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ae+de:Ae):de=Ae,X){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=de+be,X={id:d++,callback:ae,priorityLevel:X,startTime:de,expirationTime:be,sortIndex:-1},de>Ae?(X.sortIndex=de,e(u,X),n(l)===null&&X===n(u)&&(A?(x(w),w=-1):A=!0,we(O,de-Ae))):(X.sortIndex=be,e(l,X),I||y||(I=!0,Ye(B))),X},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(X){var ae=m;return function(){var de=m;m=ae;try{return X.apply(this,arguments)}finally{m=de}}}})(fb);hb.exports=fb;var uk=hb.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dk=F,nr=uk;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pb=new Set,Wc={};function sa(t,e){rl(t,e),rl(t+"Capture",e)}function rl(t,e){for(Wc[t]=e,t=0;t<e.length;t++)pb.add(e[t])}var Gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wg=Object.prototype.hasOwnProperty,hk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sy={},Ay={};function fk(t){return wg.call(Ay,t)?!0:wg.call(Sy,t)?!1:hk.test(t)?Ay[t]=!0:(Sy[t]=!0,!1)}function pk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gk(t,e,n,r){if(e===null||typeof e>"u"||pk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kn(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var e_=/[\-:]([a-z])/g;function t_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(e_,t_);Zt[e]=new kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(e_,t_);Zt[e]=new kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(e_,t_);Zt[e]=new kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new kn(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function n_(t,e,n,r){var s=Zt.hasOwnProperty(e)?Zt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gk(e,n,s,r)&&(n=null),r||s===null?fk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ii=dk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wd=Symbol.for("react.element"),ja=Symbol.for("react.portal"),Na=Symbol.for("react.fragment"),r_=Symbol.for("react.strict_mode"),Eg=Symbol.for("react.profiler"),gb=Symbol.for("react.provider"),mb=Symbol.for("react.context"),s_=Symbol.for("react.forward_ref"),bg=Symbol.for("react.suspense"),Tg=Symbol.for("react.suspense_list"),i_=Symbol.for("react.memo"),Ii=Symbol.for("react.lazy"),_b=Symbol.for("react.offscreen"),xy=Symbol.iterator;function tc(t){return t===null||typeof t!="object"?null:(t=xy&&t[xy]||t["@@iterator"],typeof t=="function"?t:null)}var wt=Object.assign,Ip;function pc(t){if(Ip===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ip=e&&e[1]||""}return`
`+Ip+t}var Sp=!1;function Ap(t,e){if(!t||Sp)return"";Sp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Sp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?pc(t):""}function mk(t){switch(t.tag){case 5:return pc(t.type);case 16:return pc("Lazy");case 13:return pc("Suspense");case 19:return pc("SuspenseList");case 0:case 2:case 15:return t=Ap(t.type,!1),t;case 11:return t=Ap(t.type.render,!1),t;case 1:return t=Ap(t.type,!0),t;default:return""}}function Ig(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Na:return"Fragment";case ja:return"Portal";case Eg:return"Profiler";case r_:return"StrictMode";case bg:return"Suspense";case Tg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case mb:return(t.displayName||"Context")+".Consumer";case gb:return(t._context.displayName||"Context")+".Provider";case s_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case i_:return e=t.displayName||null,e!==null?e:Ig(t.type)||"Memo";case Ii:e=t._payload,t=t._init;try{return Ig(t(e))}catch{}}return null}function _k(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ig(e);case 8:return e===r_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function vb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vk(t){var e=vb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ed(t){t._valueTracker||(t._valueTracker=vk(t))}function yb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=vb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function vh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Sg(t,e){var n=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ky(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wb(t,e){e=e.checked,e!=null&&n_(t,"checked",e,!1)}function Ag(t,e){wb(t,e);var n=Qi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xg(t,e.type,n):e.hasOwnProperty("defaultValue")&&xg(t,e.type,Qi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xg(t,e,n){(e!=="number"||vh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var gc=Array.isArray;function Wa(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function kg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ry(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(gc(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qi(n)}}function Eb(t,e){var n=Qi(e.value),r=Qi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Py(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bd,Tb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bd=bd||document.createElement("div"),bd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Kc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ac={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yk=["Webkit","ms","Moz","O"];Object.keys(Ac).forEach(function(t){yk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ac[e]=Ac[t]})});function Ib(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ac.hasOwnProperty(t)&&Ac[t]?(""+e).trim():e+"px"}function Sb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ib(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var wk=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rg(t,e){if(e){if(wk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function Pg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jg=null;function o_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ng=null,Ka=null,Ga=null;function jy(t){if(t=xu(t)){if(typeof Ng!="function")throw Error(J(280));var e=t.stateNode;e&&(e=_f(e),Ng(t.stateNode,t.type,e))}}function Ab(t){Ka?Ga?Ga.push(t):Ga=[t]:Ka=t}function xb(){if(Ka){var t=Ka,e=Ga;if(Ga=Ka=null,jy(t),e)for(t=0;t<e.length;t++)jy(e[t])}}function kb(t,e){return t(e)}function Cb(){}var xp=!1;function Rb(t,e,n){if(xp)return t(e,n);xp=!0;try{return kb(t,e,n)}finally{xp=!1,(Ka!==null||Ga!==null)&&(Cb(),xb())}}function Gc(t,e){var n=t.stateNode;if(n===null)return null;var r=_f(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var Og=!1;if(Gs)try{var nc={};Object.defineProperty(nc,"passive",{get:function(){Og=!0}}),window.addEventListener("test",nc,nc),window.removeEventListener("test",nc,nc)}catch{Og=!1}function Ek(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var xc=!1,yh=null,wh=!1,Dg=null,bk={onError:function(t){xc=!0,yh=t}};function Tk(t,e,n,r,s,i,o,a,l){xc=!1,yh=null,Ek.apply(bk,arguments)}function Ik(t,e,n,r,s,i,o,a,l){if(Tk.apply(this,arguments),xc){if(xc){var u=yh;xc=!1,yh=null}else throw Error(J(198));wh||(wh=!0,Dg=u)}}function ia(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Pb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ny(t){if(ia(t)!==t)throw Error(J(188))}function Sk(t){var e=t.alternate;if(!e){if(e=ia(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ny(s),t;if(i===r)return Ny(s),e;i=i.sibling}throw Error(J(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function jb(t){return t=Sk(t),t!==null?Nb(t):null}function Nb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Nb(t);if(e!==null)return e;t=t.sibling}return null}var Ob=nr.unstable_scheduleCallback,Oy=nr.unstable_cancelCallback,Ak=nr.unstable_shouldYield,xk=nr.unstable_requestPaint,At=nr.unstable_now,kk=nr.unstable_getCurrentPriorityLevel,a_=nr.unstable_ImmediatePriority,Db=nr.unstable_UserBlockingPriority,Eh=nr.unstable_NormalPriority,Ck=nr.unstable_LowPriority,Lb=nr.unstable_IdlePriority,ff=null,ps=null;function Rk(t){if(ps&&typeof ps.onCommitFiberRoot=="function")try{ps.onCommitFiberRoot(ff,t,void 0,(t.current.flags&128)===128)}catch{}}var Gr=Math.clz32?Math.clz32:Nk,Pk=Math.log,jk=Math.LN2;function Nk(t){return t>>>=0,t===0?32:31-(Pk(t)/jk|0)|0}var Td=64,Id=4194304;function mc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function bh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=mc(a):(i&=o,i!==0&&(r=mc(i)))}else o=n&~s,o!==0?r=mc(o):i!==0&&(r=mc(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gr(e),s=1<<n,r|=t[n],e&=~s;return r}function Ok(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dk(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Gr(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=Ok(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function Lg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Mb(){var t=Td;return Td<<=1,!(Td&4194240)&&(Td=64),t}function kp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Su(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gr(e),t[e]=n}function Lk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Gr(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function l_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gr(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var He=0;function Vb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fb,c_,$b,Ub,Bb,Mg=!1,Sd=[],Vi=null,Fi=null,$i=null,Qc=new Map,Jc=new Map,xi=[],Mk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dy(t,e){switch(t){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":$i=null;break;case"pointerover":case"pointerout":Qc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jc.delete(e.pointerId)}}function rc(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=xu(e),e!==null&&c_(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Vk(t,e,n,r,s){switch(e){case"focusin":return Vi=rc(Vi,t,e,n,r,s),!0;case"dragenter":return Fi=rc(Fi,t,e,n,r,s),!0;case"mouseover":return $i=rc($i,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Qc.set(i,rc(Qc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Jc.set(i,rc(Jc.get(i)||null,t,e,n,r,s)),!0}return!1}function zb(t){var e=Po(t.target);if(e!==null){var n=ia(e);if(n!==null){if(e=n.tag,e===13){if(e=Pb(n),e!==null){t.blockedOn=e,Bb(t.priority,function(){$b(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jg=r,n.target.dispatchEvent(r),jg=null}else return e=xu(n),e!==null&&c_(e),t.blockedOn=n,!1;e.shift()}return!0}function Ly(t,e,n){Yd(t)&&n.delete(e)}function Fk(){Mg=!1,Vi!==null&&Yd(Vi)&&(Vi=null),Fi!==null&&Yd(Fi)&&(Fi=null),$i!==null&&Yd($i)&&($i=null),Qc.forEach(Ly),Jc.forEach(Ly)}function sc(t,e){t.blockedOn===e&&(t.blockedOn=null,Mg||(Mg=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,Fk)))}function Yc(t){function e(s){return sc(s,t)}if(0<Sd.length){sc(Sd[0],t);for(var n=1;n<Sd.length;n++){var r=Sd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Vi!==null&&sc(Vi,t),Fi!==null&&sc(Fi,t),$i!==null&&sc($i,t),Qc.forEach(e),Jc.forEach(e),n=0;n<xi.length;n++)r=xi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)zb(n),n.blockedOn===null&&xi.shift()}var Qa=ii.ReactCurrentBatchConfig,Th=!0;function $k(t,e,n,r){var s=He,i=Qa.transition;Qa.transition=null;try{He=1,u_(t,e,n,r)}finally{He=s,Qa.transition=i}}function Uk(t,e,n,r){var s=He,i=Qa.transition;Qa.transition=null;try{He=4,u_(t,e,n,r)}finally{He=s,Qa.transition=i}}function u_(t,e,n,r){if(Th){var s=Vg(t,e,n,r);if(s===null)Vp(t,e,r,Ih,n),Dy(t,r);else if(Vk(s,t,e,n,r))r.stopPropagation();else if(Dy(t,r),e&4&&-1<Mk.indexOf(t)){for(;s!==null;){var i=xu(s);if(i!==null&&Fb(i),i=Vg(t,e,n,r),i===null&&Vp(t,e,r,Ih,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vp(t,e,r,null,n)}}var Ih=null;function Vg(t,e,n,r){if(Ih=null,t=o_(r),t=Po(t),t!==null)if(e=ia(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Pb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ih=t,null}function qb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kk()){case a_:return 1;case Db:return 4;case Eh:case Ck:return 16;case Lb:return 536870912;default:return 16}default:return 16}}var Di=null,d_=null,Xd=null;function Hb(){if(Xd)return Xd;var t,e=d_,n=e.length,r,s="value"in Di?Di.value:Di.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xd=s.slice(t,1<r?1-r:void 0)}function Zd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ad(){return!0}function My(){return!1}function ar(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ad:My,this.isPropagationStopped=My,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ad)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ad)},persist:function(){},isPersistent:Ad}),e}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h_=ar(Sl),Au=wt({},Sl,{view:0,detail:0}),Bk=ar(Au),Cp,Rp,ic,pf=wt({},Au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ic&&(ic&&t.type==="mousemove"?(Cp=t.screenX-ic.screenX,Rp=t.screenY-ic.screenY):Rp=Cp=0,ic=t),Cp)},movementY:function(t){return"movementY"in t?t.movementY:Rp}}),Vy=ar(pf),zk=wt({},pf,{dataTransfer:0}),qk=ar(zk),Hk=wt({},Au,{relatedTarget:0}),Pp=ar(Hk),Wk=wt({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),Kk=ar(Wk),Gk=wt({},Sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qk=ar(Gk),Jk=wt({},Sl,{data:0}),Fy=ar(Jk),Yk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Zk[t])?!!e[t]:!1}function f_(){return eC}var tC=wt({},Au,{key:function(t){if(t.key){var e=Yk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f_,charCode:function(t){return t.type==="keypress"?Zd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),nC=ar(tC),rC=wt({},pf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$y=ar(rC),sC=wt({},Au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f_}),iC=ar(sC),oC=wt({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),aC=ar(oC),lC=wt({},pf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),cC=ar(lC),uC=[9,13,27,32],p_=Gs&&"CompositionEvent"in window,kc=null;Gs&&"documentMode"in document&&(kc=document.documentMode);var dC=Gs&&"TextEvent"in window&&!kc,Wb=Gs&&(!p_||kc&&8<kc&&11>=kc),Uy=" ",By=!1;function Kb(t,e){switch(t){case"keyup":return uC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oa=!1;function hC(t,e){switch(t){case"compositionend":return Gb(e);case"keypress":return e.which!==32?null:(By=!0,Uy);case"textInput":return t=e.data,t===Uy&&By?null:t;default:return null}}function fC(t,e){if(Oa)return t==="compositionend"||!p_&&Kb(t,e)?(t=Hb(),Xd=d_=Di=null,Oa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Wb&&e.locale!=="ko"?null:e.data;default:return null}}var pC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pC[t.type]:e==="textarea"}function Qb(t,e,n,r){Ab(r),e=Sh(e,"onChange"),0<e.length&&(n=new h_("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Cc=null,Xc=null;function gC(t){oT(t,0)}function gf(t){var e=Ma(t);if(yb(e))return t}function mC(t,e){if(t==="change")return e}var Jb=!1;if(Gs){var jp;if(Gs){var Np="oninput"in document;if(!Np){var qy=document.createElement("div");qy.setAttribute("oninput","return;"),Np=typeof qy.oninput=="function"}jp=Np}else jp=!1;Jb=jp&&(!document.documentMode||9<document.documentMode)}function Hy(){Cc&&(Cc.detachEvent("onpropertychange",Yb),Xc=Cc=null)}function Yb(t){if(t.propertyName==="value"&&gf(Xc)){var e=[];Qb(e,Xc,t,o_(t)),Rb(gC,e)}}function _C(t,e,n){t==="focusin"?(Hy(),Cc=e,Xc=n,Cc.attachEvent("onpropertychange",Yb)):t==="focusout"&&Hy()}function vC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return gf(Xc)}function yC(t,e){if(t==="click")return gf(e)}function wC(t,e){if(t==="input"||t==="change")return gf(e)}function EC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Jr=typeof Object.is=="function"?Object.is:EC;function Zc(t,e){if(Jr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!wg.call(e,s)||!Jr(t[s],e[s]))return!1}return!0}function Wy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ky(t,e){var n=Wy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wy(n)}}function Xb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Xb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zb(){for(var t=window,e=vh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vh(t.document)}return e}function g_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function bC(t){var e=Zb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Xb(n.ownerDocument.documentElement,n)){if(r!==null&&g_(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ky(n,i);var o=Ky(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var TC=Gs&&"documentMode"in document&&11>=document.documentMode,Da=null,Fg=null,Rc=null,$g=!1;function Gy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$g||Da==null||Da!==vh(r)||(r=Da,"selectionStart"in r&&g_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Rc&&Zc(Rc,r)||(Rc=r,r=Sh(Fg,"onSelect"),0<r.length&&(e=new h_("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Da)))}function xd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var La={animationend:xd("Animation","AnimationEnd"),animationiteration:xd("Animation","AnimationIteration"),animationstart:xd("Animation","AnimationStart"),transitionend:xd("Transition","TransitionEnd")},Op={},eT={};Gs&&(eT=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function mf(t){if(Op[t])return Op[t];if(!La[t])return t;var e=La[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eT)return Op[t]=e[n];return t}var tT=mf("animationend"),nT=mf("animationiteration"),rT=mf("animationstart"),sT=mf("transitionend"),iT=new Map,Qy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(t,e){iT.set(t,e),sa(e,[t])}for(var Dp=0;Dp<Qy.length;Dp++){var Lp=Qy[Dp],IC=Lp.toLowerCase(),SC=Lp[0].toUpperCase()+Lp.slice(1);to(IC,"on"+SC)}to(tT,"onAnimationEnd");to(nT,"onAnimationIteration");to(rT,"onAnimationStart");to("dblclick","onDoubleClick");to("focusin","onFocus");to("focusout","onBlur");to(sT,"onTransitionEnd");rl("onMouseEnter",["mouseout","mouseover"]);rl("onMouseLeave",["mouseout","mouseover"]);rl("onPointerEnter",["pointerout","pointerover"]);rl("onPointerLeave",["pointerout","pointerover"]);sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sa("onBeforeInput",["compositionend","keypress","textInput","paste"]);sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),AC=new Set("cancel close invalid load scroll toggle".split(" ").concat(_c));function Jy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Ik(r,e,void 0,t),t.currentTarget=null}function oT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Jy(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Jy(s,a,u),i=l}}}if(wh)throw t=Dg,wh=!1,Dg=null,t}function ut(t,e){var n=e[Hg];n===void 0&&(n=e[Hg]=new Set);var r=t+"__bubble";n.has(r)||(aT(e,t,2,!1),n.add(r))}function Mp(t,e,n){var r=0;e&&(r|=4),aT(n,t,r,e)}var kd="_reactListening"+Math.random().toString(36).slice(2);function eu(t){if(!t[kd]){t[kd]=!0,pb.forEach(function(n){n!=="selectionchange"&&(AC.has(n)||Mp(n,!1,t),Mp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[kd]||(e[kd]=!0,Mp("selectionchange",!1,e))}}function aT(t,e,n,r){switch(qb(e)){case 1:var s=$k;break;case 4:s=Uk;break;default:s=u_}n=s.bind(null,e,n,t),s=void 0,!Og||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vp(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Po(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Rb(function(){var u=i,d=o_(n),p=[];e:{var m=iT.get(t);if(m!==void 0){var y=h_,I=t;switch(t){case"keypress":if(Zd(n)===0)break e;case"keydown":case"keyup":y=nC;break;case"focusin":I="focus",y=Pp;break;case"focusout":I="blur",y=Pp;break;case"beforeblur":case"afterblur":y=Pp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=qk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=iC;break;case tT:case nT:case rT:y=Kk;break;case sT:y=aC;break;case"scroll":y=Bk;break;case"wheel":y=cC;break;case"copy":case"cut":case"paste":y=Qk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=$y}var A=(e&4)!==0,j=!A&&t==="scroll",x=A?m!==null?m+"Capture":null:m;A=[];for(var E=u,T;E!==null;){T=E;var O=T.stateNode;if(T.tag===5&&O!==null&&(T=O,x!==null&&(O=Gc(E,x),O!=null&&A.push(tu(E,O,T)))),j)break;E=E.return}0<A.length&&(m=new y(m,I,null,n,d),p.push({event:m,listeners:A}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==jg&&(I=n.relatedTarget||n.fromElement)&&(Po(I)||I[Qs]))break e;if((y||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,y?(I=n.relatedTarget||n.toElement,y=u,I=I?Po(I):null,I!==null&&(j=ia(I),I!==j||I.tag!==5&&I.tag!==6)&&(I=null)):(y=null,I=u),y!==I)){if(A=Vy,O="onMouseLeave",x="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(A=$y,O="onPointerLeave",x="onPointerEnter",E="pointer"),j=y==null?m:Ma(y),T=I==null?m:Ma(I),m=new A(O,E+"leave",y,n,d),m.target=j,m.relatedTarget=T,O=null,Po(d)===u&&(A=new A(x,E+"enter",I,n,d),A.target=T,A.relatedTarget=j,O=A),j=O,y&&I)t:{for(A=y,x=I,E=0,T=A;T;T=ba(T))E++;for(T=0,O=x;O;O=ba(O))T++;for(;0<E-T;)A=ba(A),E--;for(;0<T-E;)x=ba(x),T--;for(;E--;){if(A===x||x!==null&&A===x.alternate)break t;A=ba(A),x=ba(x)}A=null}else A=null;y!==null&&Yy(p,m,y,A,!1),I!==null&&j!==null&&Yy(p,j,I,A,!0)}}e:{if(m=u?Ma(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var B=mC;else if(zy(m))if(Jb)B=wC;else{B=vC;var R=_C}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(B=yC);if(B&&(B=B(t,u))){Qb(p,B,n,d);break e}R&&R(t,m,u),t==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&xg(m,"number",m.value)}switch(R=u?Ma(u):window,t){case"focusin":(zy(R)||R.contentEditable==="true")&&(Da=R,Fg=u,Rc=null);break;case"focusout":Rc=Fg=Da=null;break;case"mousedown":$g=!0;break;case"contextmenu":case"mouseup":case"dragend":$g=!1,Gy(p,n,d);break;case"selectionchange":if(TC)break;case"keydown":case"keyup":Gy(p,n,d)}var k;if(p_)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Oa?Kb(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(Wb&&n.locale!=="ko"&&(Oa||w!=="onCompositionStart"?w==="onCompositionEnd"&&Oa&&(k=Hb()):(Di=d,d_="value"in Di?Di.value:Di.textContent,Oa=!0)),R=Sh(u,w),0<R.length&&(w=new Fy(w,t,null,n,d),p.push({event:w,listeners:R}),k?w.data=k:(k=Gb(n),k!==null&&(w.data=k)))),(k=dC?hC(t,n):fC(t,n))&&(u=Sh(u,"onBeforeInput"),0<u.length&&(d=new Fy("onBeforeInput","beforeinput",null,n,d),p.push({event:d,listeners:u}),d.data=k))}oT(p,e)})}function tu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sh(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Gc(t,n),i!=null&&r.unshift(tu(t,i,s)),i=Gc(t,e),i!=null&&r.push(tu(t,i,s))),t=t.return}return r}function ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Gc(n,i),l!=null&&o.unshift(tu(n,l,a))):s||(l=Gc(n,i),l!=null&&o.push(tu(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xC=/\r\n?/g,kC=/\u0000|\uFFFD/g;function Xy(t){return(typeof t=="string"?t:""+t).replace(xC,`
`).replace(kC,"")}function Cd(t,e,n){if(e=Xy(e),Xy(t)!==e&&n)throw Error(J(425))}function Ah(){}var Ug=null,Bg=null;function zg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qg=typeof setTimeout=="function"?setTimeout:void 0,CC=typeof clearTimeout=="function"?clearTimeout:void 0,Zy=typeof Promise=="function"?Promise:void 0,RC=typeof queueMicrotask=="function"?queueMicrotask:typeof Zy<"u"?function(t){return Zy.resolve(null).then(t).catch(PC)}:qg;function PC(t){setTimeout(function(){throw t})}function Fp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Yc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Yc(e)}function Ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ew(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Al=Math.random().toString(36).slice(2),hs="__reactFiber$"+Al,nu="__reactProps$"+Al,Qs="__reactContainer$"+Al,Hg="__reactEvents$"+Al,jC="__reactListeners$"+Al,NC="__reactHandles$"+Al;function Po(t){var e=t[hs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qs]||n[hs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ew(t);t!==null;){if(n=t[hs])return n;t=ew(t)}return e}t=n,n=t.parentNode}return null}function xu(t){return t=t[hs]||t[Qs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ma(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function _f(t){return t[nu]||null}var Wg=[],Va=-1;function no(t){return{current:t}}function dt(t){0>Va||(t.current=Wg[Va],Wg[Va]=null,Va--)}function it(t,e){Va++,Wg[Va]=t.current,t.current=e}var Ji={},dn=no(Ji),Vn=no(!1),Bo=Ji;function sl(t,e){var n=t.type.contextTypes;if(!n)return Ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Fn(t){return t=t.childContextTypes,t!=null}function xh(){dt(Vn),dt(dn)}function tw(t,e,n){if(dn.current!==Ji)throw Error(J(168));it(dn,e),it(Vn,n)}function lT(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(J(108,_k(t)||"Unknown",s));return wt({},n,r)}function kh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,Bo=dn.current,it(dn,t),it(Vn,Vn.current),!0}function nw(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=lT(t,e,Bo),r.__reactInternalMemoizedMergedChildContext=t,dt(Vn),dt(dn),it(dn,t)):dt(Vn),it(Vn,n)}var Vs=null,vf=!1,$p=!1;function cT(t){Vs===null?Vs=[t]:Vs.push(t)}function OC(t){vf=!0,cT(t)}function ro(){if(!$p&&Vs!==null){$p=!0;var t=0,e=He;try{var n=Vs;for(He=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Vs=null,vf=!1}catch(s){throw Vs!==null&&(Vs=Vs.slice(t+1)),Ob(a_,ro),s}finally{He=e,$p=!1}}return null}var Fa=[],$a=0,Ch=null,Rh=0,vr=[],yr=0,zo=null,Fs=1,$s="";function So(t,e){Fa[$a++]=Rh,Fa[$a++]=Ch,Ch=t,Rh=e}function uT(t,e,n){vr[yr++]=Fs,vr[yr++]=$s,vr[yr++]=zo,zo=t;var r=Fs;t=$s;var s=32-Gr(r)-1;r&=~(1<<s),n+=1;var i=32-Gr(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Fs=1<<32-Gr(e)+s|n<<s|r,$s=i+t}else Fs=1<<i|n<<s|r,$s=t}function m_(t){t.return!==null&&(So(t,1),uT(t,1,0))}function __(t){for(;t===Ch;)Ch=Fa[--$a],Fa[$a]=null,Rh=Fa[--$a],Fa[$a]=null;for(;t===zo;)zo=vr[--yr],vr[yr]=null,$s=vr[--yr],vr[yr]=null,Fs=vr[--yr],vr[yr]=null}var Zn=null,Xn=null,pt=!1,Wr=null;function dT(t,e){var n=Er(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zn=t,Xn=Ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zn=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zo!==null?{id:Fs,overflow:$s}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Er(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zn=t,Xn=null,!0):!1;default:return!1}}function Kg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Gg(t){if(pt){var e=Xn;if(e){var n=e;if(!rw(t,e)){if(Kg(t))throw Error(J(418));e=Ui(n.nextSibling);var r=Zn;e&&rw(t,e)?dT(r,n):(t.flags=t.flags&-4097|2,pt=!1,Zn=t)}}else{if(Kg(t))throw Error(J(418));t.flags=t.flags&-4097|2,pt=!1,Zn=t}}}function sw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zn=t}function Rd(t){if(t!==Zn)return!1;if(!pt)return sw(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zg(t.type,t.memoizedProps)),e&&(e=Xn)){if(Kg(t))throw hT(),Error(J(418));for(;e;)dT(t,e),e=Ui(e.nextSibling)}if(sw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xn=Ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=Zn?Ui(t.stateNode.nextSibling):null;return!0}function hT(){for(var t=Xn;t;)t=Ui(t.nextSibling)}function il(){Xn=Zn=null,pt=!1}function v_(t){Wr===null?Wr=[t]:Wr.push(t)}var DC=ii.ReactCurrentBatchConfig;function oc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function Pd(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function iw(t){var e=t._init;return e(t._payload)}function fT(t){function e(x,E){if(t){var T=x.deletions;T===null?(x.deletions=[E],x.flags|=16):T.push(E)}}function n(x,E){if(!t)return null;for(;E!==null;)e(x,E),E=E.sibling;return null}function r(x,E){for(x=new Map;E!==null;)E.key!==null?x.set(E.key,E):x.set(E.index,E),E=E.sibling;return x}function s(x,E){return x=Hi(x,E),x.index=0,x.sibling=null,x}function i(x,E,T){return x.index=T,t?(T=x.alternate,T!==null?(T=T.index,T<E?(x.flags|=2,E):T):(x.flags|=2,E)):(x.flags|=1048576,E)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,E,T,O){return E===null||E.tag!==6?(E=Kp(T,x.mode,O),E.return=x,E):(E=s(E,T),E.return=x,E)}function l(x,E,T,O){var B=T.type;return B===Na?d(x,E,T.props.children,O,T.key):E!==null&&(E.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ii&&iw(B)===E.type)?(O=s(E,T.props),O.ref=oc(x,E,T),O.return=x,O):(O=oh(T.type,T.key,T.props,null,x.mode,O),O.ref=oc(x,E,T),O.return=x,O)}function u(x,E,T,O){return E===null||E.tag!==4||E.stateNode.containerInfo!==T.containerInfo||E.stateNode.implementation!==T.implementation?(E=Gp(T,x.mode,O),E.return=x,E):(E=s(E,T.children||[]),E.return=x,E)}function d(x,E,T,O,B){return E===null||E.tag!==7?(E=Fo(T,x.mode,O,B),E.return=x,E):(E=s(E,T),E.return=x,E)}function p(x,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Kp(""+E,x.mode,T),E.return=x,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case wd:return T=oh(E.type,E.key,E.props,null,x.mode,T),T.ref=oc(x,null,E),T.return=x,T;case ja:return E=Gp(E,x.mode,T),E.return=x,E;case Ii:var O=E._init;return p(x,O(E._payload),T)}if(gc(E)||tc(E))return E=Fo(E,x.mode,T,null),E.return=x,E;Pd(x,E)}return null}function m(x,E,T,O){var B=E!==null?E.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return B!==null?null:a(x,E,""+T,O);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case wd:return T.key===B?l(x,E,T,O):null;case ja:return T.key===B?u(x,E,T,O):null;case Ii:return B=T._init,m(x,E,B(T._payload),O)}if(gc(T)||tc(T))return B!==null?null:d(x,E,T,O,null);Pd(x,T)}return null}function y(x,E,T,O,B){if(typeof O=="string"&&O!==""||typeof O=="number")return x=x.get(T)||null,a(E,x,""+O,B);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case wd:return x=x.get(O.key===null?T:O.key)||null,l(E,x,O,B);case ja:return x=x.get(O.key===null?T:O.key)||null,u(E,x,O,B);case Ii:var R=O._init;return y(x,E,T,R(O._payload),B)}if(gc(O)||tc(O))return x=x.get(T)||null,d(E,x,O,B,null);Pd(E,O)}return null}function I(x,E,T,O){for(var B=null,R=null,k=E,w=E=0,S=null;k!==null&&w<T.length;w++){k.index>w?(S=k,k=null):S=k.sibling;var C=m(x,k,T[w],O);if(C===null){k===null&&(k=S);break}t&&k&&C.alternate===null&&e(x,k),E=i(C,E,w),R===null?B=C:R.sibling=C,R=C,k=S}if(w===T.length)return n(x,k),pt&&So(x,w),B;if(k===null){for(;w<T.length;w++)k=p(x,T[w],O),k!==null&&(E=i(k,E,w),R===null?B=k:R.sibling=k,R=k);return pt&&So(x,w),B}for(k=r(x,k);w<T.length;w++)S=y(k,x,w,T[w],O),S!==null&&(t&&S.alternate!==null&&k.delete(S.key===null?w:S.key),E=i(S,E,w),R===null?B=S:R.sibling=S,R=S);return t&&k.forEach(function(N){return e(x,N)}),pt&&So(x,w),B}function A(x,E,T,O){var B=tc(T);if(typeof B!="function")throw Error(J(150));if(T=B.call(T),T==null)throw Error(J(151));for(var R=B=null,k=E,w=E=0,S=null,C=T.next();k!==null&&!C.done;w++,C=T.next()){k.index>w?(S=k,k=null):S=k.sibling;var N=m(x,k,C.value,O);if(N===null){k===null&&(k=S);break}t&&k&&N.alternate===null&&e(x,k),E=i(N,E,w),R===null?B=N:R.sibling=N,R=N,k=S}if(C.done)return n(x,k),pt&&So(x,w),B;if(k===null){for(;!C.done;w++,C=T.next())C=p(x,C.value,O),C!==null&&(E=i(C,E,w),R===null?B=C:R.sibling=C,R=C);return pt&&So(x,w),B}for(k=r(x,k);!C.done;w++,C=T.next())C=y(k,x,w,C.value,O),C!==null&&(t&&C.alternate!==null&&k.delete(C.key===null?w:C.key),E=i(C,E,w),R===null?B=C:R.sibling=C,R=C);return t&&k.forEach(function(V){return e(x,V)}),pt&&So(x,w),B}function j(x,E,T,O){if(typeof T=="object"&&T!==null&&T.type===Na&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case wd:e:{for(var B=T.key,R=E;R!==null;){if(R.key===B){if(B=T.type,B===Na){if(R.tag===7){n(x,R.sibling),E=s(R,T.props.children),E.return=x,x=E;break e}}else if(R.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===Ii&&iw(B)===R.type){n(x,R.sibling),E=s(R,T.props),E.ref=oc(x,R,T),E.return=x,x=E;break e}n(x,R);break}else e(x,R);R=R.sibling}T.type===Na?(E=Fo(T.props.children,x.mode,O,T.key),E.return=x,x=E):(O=oh(T.type,T.key,T.props,null,x.mode,O),O.ref=oc(x,E,T),O.return=x,x=O)}return o(x);case ja:e:{for(R=T.key;E!==null;){if(E.key===R)if(E.tag===4&&E.stateNode.containerInfo===T.containerInfo&&E.stateNode.implementation===T.implementation){n(x,E.sibling),E=s(E,T.children||[]),E.return=x,x=E;break e}else{n(x,E);break}else e(x,E);E=E.sibling}E=Gp(T,x.mode,O),E.return=x,x=E}return o(x);case Ii:return R=T._init,j(x,E,R(T._payload),O)}if(gc(T))return I(x,E,T,O);if(tc(T))return A(x,E,T,O);Pd(x,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,E!==null&&E.tag===6?(n(x,E.sibling),E=s(E,T),E.return=x,x=E):(n(x,E),E=Kp(T,x.mode,O),E.return=x,x=E),o(x)):n(x,E)}return j}var ol=fT(!0),pT=fT(!1),Ph=no(null),jh=null,Ua=null,y_=null;function w_(){y_=Ua=jh=null}function E_(t){var e=Ph.current;dt(Ph),t._currentValue=e}function Qg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ja(t,e){jh=t,y_=Ua=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mn=!0),t.firstContext=null)}function Sr(t){var e=t._currentValue;if(y_!==t)if(t={context:t,memoizedValue:e,next:null},Ua===null){if(jh===null)throw Error(J(308));Ua=t,jh.dependencies={lanes:0,firstContext:t}}else Ua=Ua.next=t;return e}var jo=null;function b_(t){jo===null?jo=[t]:jo.push(t)}function gT(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,b_(e)):(n.next=s.next,s.next=n),e.interleaved=n,Js(t,r)}function Js(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Si=!1;function T_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Hs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ve&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Js(t,n)}return s=r.interleaved,s===null?(e.next=e,b_(r)):(e.next=s.next,s.next=e),r.interleaved=e,Js(t,n)}function eh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,l_(t,n)}}function ow(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Nh(t,e,n,r){var s=t.updateQueue;Si=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(i!==null){var p=s.baseState;o=0,d=u=l=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var I=t,A=a;switch(m=e,y=n,A.tag){case 1:if(I=A.payload,typeof I=="function"){p=I.call(y,p,m);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=A.payload,m=typeof I=="function"?I.call(y,p,m):I,m==null)break e;p=wt({},p,m);break e;case 2:Si=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=y,l=p):d=d.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(l=p),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ho|=o,t.lanes=o,t.memoizedState=p}}function aw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(J(191,s));s.call(r)}}}var ku={},gs=no(ku),ru=no(ku),su=no(ku);function No(t){if(t===ku)throw Error(J(174));return t}function I_(t,e){switch(it(su,e),it(ru,t),it(gs,ku),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cg(e,t)}dt(gs),it(gs,e)}function al(){dt(gs),dt(ru),dt(su)}function _T(t){No(su.current);var e=No(gs.current),n=Cg(e,t.type);e!==n&&(it(ru,t),it(gs,n))}function S_(t){ru.current===t&&(dt(gs),dt(ru))}var vt=no(0);function Oh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Up=[];function A_(){for(var t=0;t<Up.length;t++)Up[t]._workInProgressVersionPrimary=null;Up.length=0}var th=ii.ReactCurrentDispatcher,Bp=ii.ReactCurrentBatchConfig,qo=0,yt=null,Lt=null,zt=null,Dh=!1,Pc=!1,iu=0,LC=0;function rn(){throw Error(J(321))}function x_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Jr(t[n],e[n]))return!1;return!0}function k_(t,e,n,r,s,i){if(qo=i,yt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,th.current=t===null||t.memoizedState===null?$C:UC,t=n(r,s),Pc){i=0;do{if(Pc=!1,iu=0,25<=i)throw Error(J(301));i+=1,zt=Lt=null,e.updateQueue=null,th.current=BC,t=n(r,s)}while(Pc)}if(th.current=Lh,e=Lt!==null&&Lt.next!==null,qo=0,zt=Lt=yt=null,Dh=!1,e)throw Error(J(300));return t}function C_(){var t=iu!==0;return iu=0,t}function ds(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?yt.memoizedState=zt=t:zt=zt.next=t,zt}function Ar(){if(Lt===null){var t=yt.alternate;t=t!==null?t.memoizedState:null}else t=Lt.next;var e=zt===null?yt.memoizedState:zt.next;if(e!==null)zt=e,Lt=t;else{if(t===null)throw Error(J(310));Lt=t,t={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},zt===null?yt.memoizedState=zt=t:zt=zt.next=t}return zt}function ou(t,e){return typeof e=="function"?e(t):e}function zp(t){var e=Ar(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=Lt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var d=u.lane;if((qo&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=p,o=r):l=l.next=p,yt.lanes|=d,Ho|=d}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Jr(r,e.memoizedState)||(Mn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,yt.lanes|=i,Ho|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qp(t){var e=Ar(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Jr(i,e.memoizedState)||(Mn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function vT(){}function yT(t,e){var n=yt,r=Ar(),s=e(),i=!Jr(r.memoizedState,s);if(i&&(r.memoizedState=s,Mn=!0),r=r.queue,R_(bT.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,au(9,ET.bind(null,n,r,s,e),void 0,null),qt===null)throw Error(J(349));qo&30||wT(n,e,s)}return s}function wT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ET(t,e,n,r){e.value=n,e.getSnapshot=r,TT(e)&&IT(t)}function bT(t,e,n){return n(function(){TT(e)&&IT(t)})}function TT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Jr(t,n)}catch{return!0}}function IT(t){var e=Js(t,1);e!==null&&Qr(e,t,1,-1)}function lw(t){var e=ds();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ou,lastRenderedState:t},e.queue=t,t=t.dispatch=FC.bind(null,yt,t),[e.memoizedState,t]}function au(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=yt.updateQueue,e===null?(e={lastEffect:null,stores:null},yt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ST(){return Ar().memoizedState}function nh(t,e,n,r){var s=ds();yt.flags|=t,s.memoizedState=au(1|e,n,void 0,r===void 0?null:r)}function yf(t,e,n,r){var s=Ar();r=r===void 0?null:r;var i=void 0;if(Lt!==null){var o=Lt.memoizedState;if(i=o.destroy,r!==null&&x_(r,o.deps)){s.memoizedState=au(e,n,i,r);return}}yt.flags|=t,s.memoizedState=au(1|e,n,i,r)}function cw(t,e){return nh(8390656,8,t,e)}function R_(t,e){return yf(2048,8,t,e)}function AT(t,e){return yf(4,2,t,e)}function xT(t,e){return yf(4,4,t,e)}function kT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function CT(t,e,n){return n=n!=null?n.concat([t]):null,yf(4,4,kT.bind(null,e,t),n)}function P_(){}function RT(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function PT(t,e){var n=Ar();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&x_(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function jT(t,e,n){return qo&21?(Jr(n,e)||(n=Mb(),yt.lanes|=n,Ho|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mn=!0),t.memoizedState=n)}function MC(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var r=Bp.transition;Bp.transition={};try{t(!1),e()}finally{He=n,Bp.transition=r}}function NT(){return Ar().memoizedState}function VC(t,e,n){var r=qi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OT(t))DT(e,n);else if(n=gT(t,e,n,r),n!==null){var s=Tn();Qr(n,t,r,s),LT(n,e,r)}}function FC(t,e,n){var r=qi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OT(t))DT(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Jr(a,o)){var l=e.interleaved;l===null?(s.next=s,b_(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=gT(t,e,s,r),n!==null&&(s=Tn(),Qr(n,t,r,s),LT(n,e,r))}}function OT(t){var e=t.alternate;return t===yt||e!==null&&e===yt}function DT(t,e){Pc=Dh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function LT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,l_(t,n)}}var Lh={readContext:Sr,useCallback:rn,useContext:rn,useEffect:rn,useImperativeHandle:rn,useInsertionEffect:rn,useLayoutEffect:rn,useMemo:rn,useReducer:rn,useRef:rn,useState:rn,useDebugValue:rn,useDeferredValue:rn,useTransition:rn,useMutableSource:rn,useSyncExternalStore:rn,useId:rn,unstable_isNewReconciler:!1},$C={readContext:Sr,useCallback:function(t,e){return ds().memoizedState=[t,e===void 0?null:e],t},useContext:Sr,useEffect:cw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nh(4194308,4,kT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nh(4194308,4,t,e)},useInsertionEffect:function(t,e){return nh(4,2,t,e)},useMemo:function(t,e){var n=ds();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ds();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=VC.bind(null,yt,t),[r.memoizedState,t]},useRef:function(t){var e=ds();return t={current:t},e.memoizedState=t},useState:lw,useDebugValue:P_,useDeferredValue:function(t){return ds().memoizedState=t},useTransition:function(){var t=lw(!1),e=t[0];return t=MC.bind(null,t[1]),ds().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=yt,s=ds();if(pt){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),qt===null)throw Error(J(349));qo&30||wT(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,cw(bT.bind(null,r,i,t),[t]),r.flags|=2048,au(9,ET.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ds(),e=qt.identifierPrefix;if(pt){var n=$s,r=Fs;n=(r&~(1<<32-Gr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=iu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UC={readContext:Sr,useCallback:RT,useContext:Sr,useEffect:R_,useImperativeHandle:CT,useInsertionEffect:AT,useLayoutEffect:xT,useMemo:PT,useReducer:zp,useRef:ST,useState:function(){return zp(ou)},useDebugValue:P_,useDeferredValue:function(t){var e=Ar();return jT(e,Lt.memoizedState,t)},useTransition:function(){var t=zp(ou)[0],e=Ar().memoizedState;return[t,e]},useMutableSource:vT,useSyncExternalStore:yT,useId:NT,unstable_isNewReconciler:!1},BC={readContext:Sr,useCallback:RT,useContext:Sr,useEffect:R_,useImperativeHandle:CT,useInsertionEffect:AT,useLayoutEffect:xT,useMemo:PT,useReducer:qp,useRef:ST,useState:function(){return qp(ou)},useDebugValue:P_,useDeferredValue:function(t){var e=Ar();return Lt===null?e.memoizedState=t:jT(e,Lt.memoizedState,t)},useTransition:function(){var t=qp(ou)[0],e=Ar().memoizedState;return[t,e]},useMutableSource:vT,useSyncExternalStore:yT,useId:NT,unstable_isNewReconciler:!1};function Br(t,e){if(t&&t.defaultProps){e=wt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var wf={isMounted:function(t){return(t=t._reactInternals)?ia(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tn(),s=qi(t),i=Hs(r,s);i.payload=e,n!=null&&(i.callback=n),e=Bi(t,i,s),e!==null&&(Qr(e,t,s,r),eh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tn(),s=qi(t),i=Hs(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Bi(t,i,s),e!==null&&(Qr(e,t,s,r),eh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tn(),r=qi(t),s=Hs(n,r);s.tag=2,e!=null&&(s.callback=e),e=Bi(t,s,r),e!==null&&(Qr(e,t,r,n),eh(e,t,r))}};function uw(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Zc(n,r)||!Zc(s,i):!0}function MT(t,e,n){var r=!1,s=Ji,i=e.contextType;return typeof i=="object"&&i!==null?i=Sr(i):(s=Fn(e)?Bo:dn.current,r=e.contextTypes,i=(r=r!=null)?sl(t,s):Ji),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=wf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function dw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&wf.enqueueReplaceState(e,e.state,null)}function Yg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},T_(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Sr(i):(i=Fn(e)?Bo:dn.current,s.context=sl(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Jg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&wf.enqueueReplaceState(s,s.state,null),Nh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ll(t,e){try{var n="",r=e;do n+=mk(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Xg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zC=typeof WeakMap=="function"?WeakMap:Map;function VT(t,e,n){n=Hs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vh||(Vh=!0,lm=r),Xg(t,e)},n}function FT(t,e,n){n=Hs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Xg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Xg(t,e),typeof r!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zC;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=rR.bind(null,t,e,n),e.then(t,t))}function fw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function pw(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Hs(-1,1),e.tag=2,Bi(n,e,1))),n.lanes|=1),t)}var qC=ii.ReactCurrentOwner,Mn=!1;function bn(t,e,n,r){e.child=t===null?pT(e,null,n,r):ol(e,t.child,n,r)}function gw(t,e,n,r,s){n=n.render;var i=e.ref;return Ja(e,s),r=k_(t,e,n,r,i,s),n=C_(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ys(t,e,s)):(pt&&n&&m_(e),e.flags|=1,bn(t,e,r,s),e.child)}function mw(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!F_(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,$T(t,e,i,r,s)):(t=oh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Zc,n(o,r)&&t.ref===e.ref)return Ys(t,e,s)}return e.flags|=1,t=Hi(i,r),t.ref=e.ref,t.return=e,e.child=t}function $T(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Zc(i,r)&&t.ref===e.ref)if(Mn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Mn=!0);else return e.lanes=t.lanes,Ys(t,e,s)}return Zg(t,e,n,r,s)}function UT(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(za,Qn),Qn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,it(za,Qn),Qn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,it(za,Qn),Qn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,it(za,Qn),Qn|=r;return bn(t,e,s,n),e.child}function BT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zg(t,e,n,r,s){var i=Fn(n)?Bo:dn.current;return i=sl(e,i),Ja(e,s),n=k_(t,e,n,r,i,s),r=C_(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ys(t,e,s)):(pt&&r&&m_(e),e.flags|=1,bn(t,e,n,s),e.child)}function _w(t,e,n,r,s){if(Fn(n)){var i=!0;kh(e)}else i=!1;if(Ja(e,s),e.stateNode===null)rh(t,e),MT(e,n,r),Yg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Sr(u):(u=Fn(n)?Bo:dn.current,u=sl(e,u));var d=n.getDerivedStateFromProps,p=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&dw(e,o,r,u),Si=!1;var m=e.memoizedState;o.state=m,Nh(e,r,o,s),l=e.memoizedState,a!==r||m!==l||Vn.current||Si?(typeof d=="function"&&(Jg(e,n,d,r),l=e.memoizedState),(a=Si||uw(e,n,a,r,m,l,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Br(e.type,a),o.props=u,p=e.pendingProps,m=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sr(l):(l=Fn(n)?Bo:dn.current,l=sl(e,l));var y=n.getDerivedStateFromProps;(d=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&dw(e,o,r,l),Si=!1,m=e.memoizedState,o.state=m,Nh(e,r,o,s);var I=e.memoizedState;a!==p||m!==I||Vn.current||Si?(typeof y=="function"&&(Jg(e,n,y,r),I=e.memoizedState),(u=Si||uw(e,n,u,r,m,I,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return em(t,e,n,r,i,s)}function em(t,e,n,r,s,i){BT(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&nw(e,n,!1),Ys(t,e,i);r=e.stateNode,qC.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ol(e,t.child,null,i),e.child=ol(e,null,a,i)):bn(t,e,a,i),e.memoizedState=r.state,s&&nw(e,n,!0),e.child}function zT(t){var e=t.stateNode;e.pendingContext?tw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tw(t,e.context,!1),I_(t,e.containerInfo)}function vw(t,e,n,r,s){return il(),v_(s),e.flags|=256,bn(t,e,n,r),e.child}var tm={dehydrated:null,treeContext:null,retryLane:0};function nm(t){return{baseLanes:t,cachePool:null,transitions:null}}function qT(t,e,n){var r=e.pendingProps,s=vt.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),it(vt,s&1),t===null)return Gg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Tf(o,r,0,null),t=Fo(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=nm(n),e.memoizedState=tm,t):j_(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return HC(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Hi(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Hi(a,i):(i=Fo(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?nm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=tm,r}return i=t.child,t=i.sibling,r=Hi(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function j_(t,e){return e=Tf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jd(t,e,n,r){return r!==null&&v_(r),ol(e,t.child,null,n),t=j_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HC(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Hp(Error(J(422))),jd(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Tf({mode:"visible",children:r.children},s,0,null),i=Fo(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ol(e,t.child,null,o),e.child.memoizedState=nm(o),e.memoizedState=tm,i);if(!(e.mode&1))return jd(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(J(419)),r=Hp(i,r,void 0),jd(t,e,o,r)}if(a=(o&t.childLanes)!==0,Mn||a){if(r=qt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Js(t,s),Qr(r,t,s,-1))}return V_(),r=Hp(Error(J(421))),jd(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=sR.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Xn=Ui(s.nextSibling),Zn=e,pt=!0,Wr=null,t!==null&&(vr[yr++]=Fs,vr[yr++]=$s,vr[yr++]=zo,Fs=t.id,$s=t.overflow,zo=e),e=j_(e,r.children),e.flags|=4096,e)}function yw(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Qg(t.return,e,n)}function Wp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function HT(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(bn(t,e,r.children,n),r=vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yw(t,n,e);else if(t.tag===19)yw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(it(vt,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Oh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Wp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Oh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Wp(e,!0,n,null,i);break;case"together":Wp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ys(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ho|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function WC(t,e,n){switch(e.tag){case 3:zT(e),il();break;case 5:_T(e);break;case 1:Fn(e.type)&&kh(e);break;case 4:I_(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;it(Ph,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(it(vt,vt.current&1),e.flags|=128,null):n&e.child.childLanes?qT(t,e,n):(it(vt,vt.current&1),t=Ys(t,e,n),t!==null?t.sibling:null);it(vt,vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return HT(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),it(vt,vt.current),r)break;return null;case 22:case 23:return e.lanes=0,UT(t,e,n)}return Ys(t,e,n)}var WT,rm,KT,GT;WT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rm=function(){};KT=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,No(gs.current);var i=null;switch(n){case"input":s=Sg(t,s),r=Sg(t,r),i=[];break;case"select":s=wt({},s,{value:void 0}),r=wt({},r,{value:void 0}),i=[];break;case"textarea":s=kg(t,s),r=kg(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ah)}Rg(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wc.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ut("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};GT=function(t,e,n,r){n!==r&&(e.flags|=4)};function ac(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function sn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KC(t,e,n){var r=e.pendingProps;switch(__(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(e),null;case 1:return Fn(e.type)&&xh(),sn(e),null;case 3:return r=e.stateNode,al(),dt(Vn),dt(dn),A_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wr!==null&&(dm(Wr),Wr=null))),rm(t,e),sn(e),null;case 5:S_(e);var s=No(su.current);if(n=e.type,t!==null&&e.stateNode!=null)KT(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return sn(e),null}if(t=No(gs.current),Rd(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[hs]=e,r[nu]=i,t=(e.mode&1)!==0,n){case"dialog":ut("cancel",r),ut("close",r);break;case"iframe":case"object":case"embed":ut("load",r);break;case"video":case"audio":for(s=0;s<_c.length;s++)ut(_c[s],r);break;case"source":ut("error",r);break;case"img":case"image":case"link":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"input":ky(r,i),ut("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ut("invalid",r);break;case"textarea":Ry(r,i),ut("invalid",r)}Rg(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Cd(r.textContent,a,t),s=["children",""+a]):Wc.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ut("scroll",r)}switch(n){case"input":Ed(r),Cy(r,i,!0);break;case"textarea":Ed(r),Py(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ah)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hs]=e,t[nu]=r,WT(t,e,!1,!1),e.stateNode=t;e:{switch(o=Pg(n,r),n){case"dialog":ut("cancel",t),ut("close",t),s=r;break;case"iframe":case"object":case"embed":ut("load",t),s=r;break;case"video":case"audio":for(s=0;s<_c.length;s++)ut(_c[s],t);s=r;break;case"source":ut("error",t),s=r;break;case"img":case"image":case"link":ut("error",t),ut("load",t),s=r;break;case"details":ut("toggle",t),s=r;break;case"input":ky(t,r),s=Sg(t,r),ut("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=wt({},r,{value:void 0}),ut("invalid",t);break;case"textarea":Ry(t,r),s=kg(t,r),ut("invalid",t);break;default:s=r}Rg(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?Sb(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Tb(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Kc(t,l):typeof l=="number"&&Kc(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Wc.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ut("scroll",t):l!=null&&n_(t,i,l,o))}switch(n){case"input":Ed(t),Cy(t,r,!1);break;case"textarea":Ed(t),Py(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qi(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Wa(t,!!r.multiple,i,!1):r.defaultValue!=null&&Wa(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ah)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return sn(e),null;case 6:if(t&&e.stateNode!=null)GT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=No(su.current),No(gs.current),Rd(e)){if(r=e.stateNode,n=e.memoizedProps,r[hs]=e,(i=r.nodeValue!==n)&&(t=Zn,t!==null))switch(t.tag){case 3:Cd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Cd(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hs]=e,e.stateNode=r}return sn(e),null;case 13:if(dt(vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&Xn!==null&&e.mode&1&&!(e.flags&128))hT(),il(),e.flags|=98560,i=!1;else if(i=Rd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(J(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(J(317));i[hs]=e}else il(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;sn(e),i=!1}else Wr!==null&&(dm(Wr),Wr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Mt===0&&(Mt=3):V_())),e.updateQueue!==null&&(e.flags|=4),sn(e),null);case 4:return al(),rm(t,e),t===null&&eu(e.stateNode.containerInfo),sn(e),null;case 10:return E_(e.type._context),sn(e),null;case 17:return Fn(e.type)&&xh(),sn(e),null;case 19:if(dt(vt),i=e.memoizedState,i===null)return sn(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ac(i,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Oh(t),o!==null){for(e.flags|=128,ac(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return it(vt,vt.current&1|2),e.child}t=t.sibling}i.tail!==null&&At()>cl&&(e.flags|=128,r=!0,ac(i,!1),e.lanes=4194304)}else{if(!r)if(t=Oh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ac(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!pt)return sn(e),null}else 2*At()-i.renderingStartTime>cl&&n!==1073741824&&(e.flags|=128,r=!0,ac(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=At(),e.sibling=null,n=vt.current,it(vt,r?n&1|2:n&1),e):(sn(e),null);case 22:case 23:return M_(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Qn&1073741824&&(sn(e),e.subtreeFlags&6&&(e.flags|=8192)):sn(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function GC(t,e){switch(__(e),e.tag){case 1:return Fn(e.type)&&xh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return al(),dt(Vn),dt(dn),A_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return S_(e),null;case 13:if(dt(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));il()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dt(vt),null;case 4:return al(),null;case 10:return E_(e.type._context),null;case 22:case 23:return M_(),null;case 24:return null;default:return null}}var Nd=!1,cn=!1,QC=typeof WeakSet=="function"?WeakSet:Set,re=null;function Ba(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){bt(t,e,r)}else n.current=null}function sm(t,e,n){try{n()}catch(r){bt(t,e,r)}}var ww=!1;function JC(t,e){if(Ug=Th,t=Zb(),g_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,p=t,m=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(a=o+s),p!==i||r!==0&&p.nodeType!==3||(l=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++u===s&&(a=o),m===i&&++d===r&&(l=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bg={focusedElem:t,selectionRange:n},Th=!1,re=e;re!==null;)if(e=re,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,re=t;else for(;re!==null;){e=re;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var A=I.memoizedProps,j=I.memoizedState,x=e.stateNode,E=x.getSnapshotBeforeUpdate(e.elementType===e.type?A:Br(e.type,A),j);x.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(O){bt(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,re=t;break}re=e.return}return I=ww,ww=!1,I}function jc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&sm(e,n,i)}s=s.next}while(s!==r)}}function Ef(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function im(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function QT(t){var e=t.alternate;e!==null&&(t.alternate=null,QT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hs],delete e[nu],delete e[Hg],delete e[jC],delete e[NC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function JT(t){return t.tag===5||t.tag===3||t.tag===4}function Ew(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||JT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function om(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ah));else if(r!==4&&(t=t.child,t!==null))for(om(t,e,n),t=t.sibling;t!==null;)om(t,e,n),t=t.sibling}function am(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(am(t,e,n),t=t.sibling;t!==null;)am(t,e,n),t=t.sibling}var Gt=null,zr=!1;function wi(t,e,n){for(n=n.child;n!==null;)YT(t,e,n),n=n.sibling}function YT(t,e,n){if(ps&&typeof ps.onCommitFiberUnmount=="function")try{ps.onCommitFiberUnmount(ff,n)}catch{}switch(n.tag){case 5:cn||Ba(n,e);case 6:var r=Gt,s=zr;Gt=null,wi(t,e,n),Gt=r,zr=s,Gt!==null&&(zr?(t=Gt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Gt.removeChild(n.stateNode));break;case 18:Gt!==null&&(zr?(t=Gt,n=n.stateNode,t.nodeType===8?Fp(t.parentNode,n):t.nodeType===1&&Fp(t,n),Yc(t)):Fp(Gt,n.stateNode));break;case 4:r=Gt,s=zr,Gt=n.stateNode.containerInfo,zr=!0,wi(t,e,n),Gt=r,zr=s;break;case 0:case 11:case 14:case 15:if(!cn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&sm(n,e,o),s=s.next}while(s!==r)}wi(t,e,n);break;case 1:if(!cn&&(Ba(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){bt(n,e,a)}wi(t,e,n);break;case 21:wi(t,e,n);break;case 22:n.mode&1?(cn=(r=cn)||n.memoizedState!==null,wi(t,e,n),cn=r):wi(t,e,n);break;default:wi(t,e,n)}}function bw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new QC),e.forEach(function(r){var s=iR.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function $r(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Gt=a.stateNode,zr=!1;break e;case 3:Gt=a.stateNode.containerInfo,zr=!0;break e;case 4:Gt=a.stateNode.containerInfo,zr=!0;break e}a=a.return}if(Gt===null)throw Error(J(160));YT(i,o,s),Gt=null,zr=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){bt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)XT(e,t),e=e.sibling}function XT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($r(e,t),us(t),r&4){try{jc(3,t,t.return),Ef(3,t)}catch(A){bt(t,t.return,A)}try{jc(5,t,t.return)}catch(A){bt(t,t.return,A)}}break;case 1:$r(e,t),us(t),r&512&&n!==null&&Ba(n,n.return);break;case 5:if($r(e,t),us(t),r&512&&n!==null&&Ba(n,n.return),t.flags&32){var s=t.stateNode;try{Kc(s,"")}catch(A){bt(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&wb(s,i),Pg(a,o);var u=Pg(a,i);for(o=0;o<l.length;o+=2){var d=l[o],p=l[o+1];d==="style"?Sb(s,p):d==="dangerouslySetInnerHTML"?Tb(s,p):d==="children"?Kc(s,p):n_(s,d,p,u)}switch(a){case"input":Ag(s,i);break;case"textarea":Eb(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Wa(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Wa(s,!!i.multiple,i.defaultValue,!0):Wa(s,!!i.multiple,i.multiple?[]:"",!1))}s[nu]=i}catch(A){bt(t,t.return,A)}}break;case 6:if($r(e,t),us(t),r&4){if(t.stateNode===null)throw Error(J(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){bt(t,t.return,A)}}break;case 3:if($r(e,t),us(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yc(e.containerInfo)}catch(A){bt(t,t.return,A)}break;case 4:$r(e,t),us(t);break;case 13:$r(e,t),us(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(D_=At())),r&4&&bw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(cn=(u=cn)||d,$r(e,t),cn=u):$r(e,t),us(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(re=t,d=t.child;d!==null;){for(p=re=d;re!==null;){switch(m=re,y=m.child,m.tag){case 0:case 11:case 14:case 15:jc(4,m,m.return);break;case 1:Ba(m,m.return);var I=m.stateNode;if(typeof I.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(A){bt(r,n,A)}}break;case 5:Ba(m,m.return);break;case 22:if(m.memoizedState!==null){Iw(p);continue}}y!==null?(y.return=m,re=y):Iw(p)}d=d.sibling}e:for(d=null,p=t;;){if(p.tag===5){if(d===null){d=p;try{s=p.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ib("display",o))}catch(A){bt(t,t.return,A)}}}else if(p.tag===6){if(d===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(A){bt(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:$r(e,t),us(t),r&4&&bw(t);break;case 21:break;default:$r(e,t),us(t)}}function us(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(JT(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Kc(s,""),r.flags&=-33);var i=Ew(t);am(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ew(t);om(t,a,o);break;default:throw Error(J(161))}}catch(l){bt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YC(t,e,n){re=t,ZT(t)}function ZT(t,e,n){for(var r=(t.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Nd;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||cn;a=Nd;var u=cn;if(Nd=o,(cn=l)&&!u)for(re=s;re!==null;)o=re,l=o.child,o.tag===22&&o.memoizedState!==null?Sw(s):l!==null?(l.return=o,re=l):Sw(s);for(;i!==null;)re=i,ZT(i),i=i.sibling;re=s,Nd=a,cn=u}Tw(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):Tw(t)}}function Tw(t){for(;re!==null;){var e=re;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:cn||Ef(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!cn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Br(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&aw(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}aw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var p=d.dehydrated;p!==null&&Yc(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}cn||e.flags&512&&im(e)}catch(m){bt(e,e.return,m)}}if(e===t){re=null;break}if(n=e.sibling,n!==null){n.return=e.return,re=n;break}re=e.return}}function Iw(t){for(;re!==null;){var e=re;if(e===t){re=null;break}var n=e.sibling;if(n!==null){n.return=e.return,re=n;break}re=e.return}}function Sw(t){for(;re!==null;){var e=re;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ef(4,e)}catch(l){bt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){bt(e,s,l)}}var i=e.return;try{im(e)}catch(l){bt(e,i,l)}break;case 5:var o=e.return;try{im(e)}catch(l){bt(e,o,l)}}}catch(l){bt(e,e.return,l)}if(e===t){re=null;break}var a=e.sibling;if(a!==null){a.return=e.return,re=a;break}re=e.return}}var XC=Math.ceil,Mh=ii.ReactCurrentDispatcher,N_=ii.ReactCurrentOwner,br=ii.ReactCurrentBatchConfig,Ve=0,qt=null,Rt=null,Yt=0,Qn=0,za=no(0),Mt=0,lu=null,Ho=0,bf=0,O_=0,Nc=null,Dn=null,D_=0,cl=1/0,Ls=null,Vh=!1,lm=null,zi=null,Od=!1,Li=null,Fh=0,Oc=0,cm=null,sh=-1,ih=0;function Tn(){return Ve&6?At():sh!==-1?sh:sh=At()}function qi(t){return t.mode&1?Ve&2&&Yt!==0?Yt&-Yt:DC.transition!==null?(ih===0&&(ih=Mb()),ih):(t=He,t!==0||(t=window.event,t=t===void 0?16:qb(t.type)),t):1}function Qr(t,e,n,r){if(50<Oc)throw Oc=0,cm=null,Error(J(185));Su(t,n,r),(!(Ve&2)||t!==qt)&&(t===qt&&(!(Ve&2)&&(bf|=n),Mt===4&&ki(t,Yt)),$n(t,r),n===1&&Ve===0&&!(e.mode&1)&&(cl=At()+500,vf&&ro()))}function $n(t,e){var n=t.callbackNode;Dk(t,e);var r=bh(t,t===qt?Yt:0);if(r===0)n!==null&&Oy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Oy(n),e===1)t.tag===0?OC(Aw.bind(null,t)):cT(Aw.bind(null,t)),RC(function(){!(Ve&6)&&ro()}),n=null;else{switch(Vb(r)){case 1:n=a_;break;case 4:n=Db;break;case 16:n=Eh;break;case 536870912:n=Lb;break;default:n=Eh}n=aI(n,eI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function eI(t,e){if(sh=-1,ih=0,Ve&6)throw Error(J(327));var n=t.callbackNode;if(Ya()&&t.callbackNode!==n)return null;var r=bh(t,t===qt?Yt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$h(t,r);else{e=r;var s=Ve;Ve|=2;var i=nI();(qt!==t||Yt!==e)&&(Ls=null,cl=At()+500,Vo(t,e));do try{tR();break}catch(a){tI(t,a)}while(!0);w_(),Mh.current=i,Ve=s,Rt!==null?e=0:(qt=null,Yt=0,e=Mt)}if(e!==0){if(e===2&&(s=Lg(t),s!==0&&(r=s,e=um(t,s))),e===1)throw n=lu,Vo(t,0),ki(t,r),$n(t,At()),n;if(e===6)ki(t,r);else{if(s=t.current.alternate,!(r&30)&&!ZC(s)&&(e=$h(t,r),e===2&&(i=Lg(t),i!==0&&(r=i,e=um(t,i))),e===1))throw n=lu,Vo(t,0),ki(t,r),$n(t,At()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:Ao(t,Dn,Ls);break;case 3:if(ki(t,r),(r&130023424)===r&&(e=D_+500-At(),10<e)){if(bh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=qg(Ao.bind(null,t,Dn,Ls),e);break}Ao(t,Dn,Ls);break;case 4:if(ki(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Gr(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*XC(r/1960))-r,10<r){t.timeoutHandle=qg(Ao.bind(null,t,Dn,Ls),r);break}Ao(t,Dn,Ls);break;case 5:Ao(t,Dn,Ls);break;default:throw Error(J(329))}}}return $n(t,At()),t.callbackNode===n?eI.bind(null,t):null}function um(t,e){var n=Nc;return t.current.memoizedState.isDehydrated&&(Vo(t,e).flags|=256),t=$h(t,e),t!==2&&(e=Dn,Dn=n,e!==null&&dm(e)),t}function dm(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function ZC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Jr(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ki(t,e){for(e&=~O_,e&=~bf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gr(e),r=1<<n;t[n]=-1,e&=~r}}function Aw(t){if(Ve&6)throw Error(J(327));Ya();var e=bh(t,0);if(!(e&1))return $n(t,At()),null;var n=$h(t,e);if(t.tag!==0&&n===2){var r=Lg(t);r!==0&&(e=r,n=um(t,r))}if(n===1)throw n=lu,Vo(t,0),ki(t,e),$n(t,At()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ao(t,Dn,Ls),$n(t,At()),null}function L_(t,e){var n=Ve;Ve|=1;try{return t(e)}finally{Ve=n,Ve===0&&(cl=At()+500,vf&&ro())}}function Wo(t){Li!==null&&Li.tag===0&&!(Ve&6)&&Ya();var e=Ve;Ve|=1;var n=br.transition,r=He;try{if(br.transition=null,He=1,t)return t()}finally{He=r,br.transition=n,Ve=e,!(Ve&6)&&ro()}}function M_(){Qn=za.current,dt(za)}function Vo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CC(n)),Rt!==null)for(n=Rt.return;n!==null;){var r=n;switch(__(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&xh();break;case 3:al(),dt(Vn),dt(dn),A_();break;case 5:S_(r);break;case 4:al();break;case 13:dt(vt);break;case 19:dt(vt);break;case 10:E_(r.type._context);break;case 22:case 23:M_()}n=n.return}if(qt=t,Rt=t=Hi(t.current,null),Yt=Qn=e,Mt=0,lu=null,O_=bf=Ho=0,Dn=Nc=null,jo!==null){for(e=0;e<jo.length;e++)if(n=jo[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}jo=null}return t}function tI(t,e){do{var n=Rt;try{if(w_(),th.current=Lh,Dh){for(var r=yt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Dh=!1}if(qo=0,zt=Lt=yt=null,Pc=!1,iu=0,N_.current=null,n===null||n.return===null){Mt=1,lu=e,Rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=Yt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,p=d.tag;if(!(d.mode&1)&&(p===0||p===11||p===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var y=fw(o);if(y!==null){y.flags&=-257,pw(y,o,a,i,e),y.mode&1&&hw(i,u,e),e=y,l=u;var I=e.updateQueue;if(I===null){var A=new Set;A.add(l),e.updateQueue=A}else I.add(l);break e}else{if(!(e&1)){hw(i,u,e),V_();break e}l=Error(J(426))}}else if(pt&&a.mode&1){var j=fw(o);if(j!==null){!(j.flags&65536)&&(j.flags|=256),pw(j,o,a,i,e),v_(ll(l,a));break e}}i=l=ll(l,a),Mt!==4&&(Mt=2),Nc===null?Nc=[i]:Nc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=VT(i,l,e);ow(i,x);break e;case 1:a=l;var E=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(zi===null||!zi.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=FT(i,a,e);ow(i,O);break e}}i=i.return}while(i!==null)}sI(n)}catch(B){e=B,Rt===n&&n!==null&&(Rt=n=n.return);continue}break}while(!0)}function nI(){var t=Mh.current;return Mh.current=Lh,t===null?Lh:t}function V_(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),qt===null||!(Ho&268435455)&&!(bf&268435455)||ki(qt,Yt)}function $h(t,e){var n=Ve;Ve|=2;var r=nI();(qt!==t||Yt!==e)&&(Ls=null,Vo(t,e));do try{eR();break}catch(s){tI(t,s)}while(!0);if(w_(),Ve=n,Mh.current=r,Rt!==null)throw Error(J(261));return qt=null,Yt=0,Mt}function eR(){for(;Rt!==null;)rI(Rt)}function tR(){for(;Rt!==null&&!Ak();)rI(Rt)}function rI(t){var e=oI(t.alternate,t,Qn);t.memoizedProps=t.pendingProps,e===null?sI(t):Rt=e,N_.current=null}function sI(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GC(n,e),n!==null){n.flags&=32767,Rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,Rt=null;return}}else if(n=KC(n,e,Qn),n!==null){Rt=n;return}if(e=e.sibling,e!==null){Rt=e;return}Rt=e=t}while(e!==null);Mt===0&&(Mt=5)}function Ao(t,e,n){var r=He,s=br.transition;try{br.transition=null,He=1,nR(t,e,n,r)}finally{br.transition=s,He=r}return null}function nR(t,e,n,r){do Ya();while(Li!==null);if(Ve&6)throw Error(J(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Lk(t,i),t===qt&&(Rt=qt=null,Yt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Od||(Od=!0,aI(Eh,function(){return Ya(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=br.transition,br.transition=null;var o=He;He=1;var a=Ve;Ve|=4,N_.current=null,JC(t,n),XT(n,t),bC(Bg),Th=!!Ug,Bg=Ug=null,t.current=n,YC(n),xk(),Ve=a,He=o,br.transition=i}else t.current=n;if(Od&&(Od=!1,Li=t,Fh=s),i=t.pendingLanes,i===0&&(zi=null),Rk(n.stateNode),$n(t,At()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vh)throw Vh=!1,t=lm,lm=null,t;return Fh&1&&t.tag!==0&&Ya(),i=t.pendingLanes,i&1?t===cm?Oc++:(Oc=0,cm=t):Oc=0,ro(),null}function Ya(){if(Li!==null){var t=Vb(Fh),e=br.transition,n=He;try{if(br.transition=null,He=16>t?16:t,Li===null)var r=!1;else{if(t=Li,Li=null,Fh=0,Ve&6)throw Error(J(331));var s=Ve;for(Ve|=4,re=t.current;re!==null;){var i=re,o=i.child;if(re.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(re=u;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:jc(8,d,i)}var p=d.child;if(p!==null)p.return=d,re=p;else for(;re!==null;){d=re;var m=d.sibling,y=d.return;if(QT(d),d===u){re=null;break}if(m!==null){m.return=y,re=m;break}re=y}}}var I=i.alternate;if(I!==null){var A=I.child;if(A!==null){I.child=null;do{var j=A.sibling;A.sibling=null,A=j}while(A!==null)}}re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,re=o;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:jc(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,re=x;break e}re=i.return}}var E=t.current;for(re=E;re!==null;){o=re;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,re=T;else e:for(o=E;re!==null;){if(a=re,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ef(9,a)}}catch(B){bt(a,a.return,B)}if(a===o){re=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,re=O;break e}re=a.return}}if(Ve=s,ro(),ps&&typeof ps.onPostCommitFiberRoot=="function")try{ps.onPostCommitFiberRoot(ff,t)}catch{}r=!0}return r}finally{He=n,br.transition=e}}return!1}function xw(t,e,n){e=ll(n,e),e=VT(t,e,1),t=Bi(t,e,1),e=Tn(),t!==null&&(Su(t,1,e),$n(t,e))}function bt(t,e,n){if(t.tag===3)xw(t,t,n);else for(;e!==null;){if(e.tag===3){xw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zi===null||!zi.has(r))){t=ll(n,t),t=FT(e,t,1),e=Bi(e,t,1),t=Tn(),e!==null&&(Su(e,1,t),$n(e,t));break}}e=e.return}}function rR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tn(),t.pingedLanes|=t.suspendedLanes&n,qt===t&&(Yt&n)===n&&(Mt===4||Mt===3&&(Yt&130023424)===Yt&&500>At()-D_?Vo(t,0):O_|=n),$n(t,e)}function iI(t,e){e===0&&(t.mode&1?(e=Id,Id<<=1,!(Id&130023424)&&(Id=4194304)):e=1);var n=Tn();t=Js(t,e),t!==null&&(Su(t,e,n),$n(t,n))}function sR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),iI(t,n)}function iR(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),iI(t,n)}var oI;oI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vn.current)Mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Mn=!1,WC(t,e,n);Mn=!!(t.flags&131072)}else Mn=!1,pt&&e.flags&1048576&&uT(e,Rh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rh(t,e),t=e.pendingProps;var s=sl(e,dn.current);Ja(e,n),s=k_(null,e,r,t,s,n);var i=C_();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fn(r)?(i=!0,kh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,T_(e),s.updater=wf,e.stateNode=s,s._reactInternals=e,Yg(e,r,t,n),e=em(null,e,r,!0,i,n)):(e.tag=0,pt&&i&&m_(e),bn(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=aR(r),t=Br(r,t),s){case 0:e=Zg(null,e,r,t,n);break e;case 1:e=_w(null,e,r,t,n);break e;case 11:e=gw(null,e,r,t,n);break e;case 14:e=mw(null,e,r,Br(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Br(r,s),Zg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Br(r,s),_w(t,e,r,s,n);case 3:e:{if(zT(e),t===null)throw Error(J(387));r=e.pendingProps,i=e.memoizedState,s=i.element,mT(t,e),Nh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ll(Error(J(423)),e),e=vw(t,e,r,n,s);break e}else if(r!==s){s=ll(Error(J(424)),e),e=vw(t,e,r,n,s);break e}else for(Xn=Ui(e.stateNode.containerInfo.firstChild),Zn=e,pt=!0,Wr=null,n=pT(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(il(),r===s){e=Ys(t,e,n);break e}bn(t,e,r,n)}e=e.child}return e;case 5:return _T(e),t===null&&Gg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,zg(r,s)?o=null:i!==null&&zg(r,i)&&(e.flags|=32),BT(t,e),bn(t,e,o,n),e.child;case 6:return t===null&&Gg(e),null;case 13:return qT(t,e,n);case 4:return I_(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ol(e,null,r,n):bn(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Br(r,s),gw(t,e,r,s,n);case 7:return bn(t,e,e.pendingProps,n),e.child;case 8:return bn(t,e,e.pendingProps.children,n),e.child;case 12:return bn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,it(Ph,r._currentValue),r._currentValue=o,i!==null)if(Jr(i.value,o)){if(i.children===s.children&&!Vn.current){e=Ys(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Hs(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Qg(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(J(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Qg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}bn(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ja(e,n),s=Sr(s),r=r(s),e.flags|=1,bn(t,e,r,n),e.child;case 14:return r=e.type,s=Br(r,e.pendingProps),s=Br(r.type,s),mw(t,e,r,s,n);case 15:return $T(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Br(r,s),rh(t,e),e.tag=1,Fn(r)?(t=!0,kh(e)):t=!1,Ja(e,n),MT(e,r,s),Yg(e,r,s,n),em(null,e,r,!0,t,n);case 19:return HT(t,e,n);case 22:return UT(t,e,n)}throw Error(J(156,e.tag))};function aI(t,e){return Ob(t,e)}function oR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Er(t,e,n,r){return new oR(t,e,n,r)}function F_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function aR(t){if(typeof t=="function")return F_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===s_)return 11;if(t===i_)return 14}return 2}function Hi(t,e){var n=t.alternate;return n===null?(n=Er(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")F_(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Na:return Fo(n.children,s,i,e);case r_:o=8,s|=8;break;case Eg:return t=Er(12,n,e,s|2),t.elementType=Eg,t.lanes=i,t;case bg:return t=Er(13,n,e,s),t.elementType=bg,t.lanes=i,t;case Tg:return t=Er(19,n,e,s),t.elementType=Tg,t.lanes=i,t;case _b:return Tf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gb:o=10;break e;case mb:o=9;break e;case s_:o=11;break e;case i_:o=14;break e;case Ii:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=Er(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Fo(t,e,n,r){return t=Er(7,t,r,e),t.lanes=n,t}function Tf(t,e,n,r){return t=Er(22,t,r,e),t.elementType=_b,t.lanes=n,t.stateNode={isHidden:!1},t}function Kp(t,e,n){return t=Er(6,t,null,e),t.lanes=n,t}function Gp(t,e,n){return e=Er(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function lR(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kp(0),this.expirationTimes=kp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function $_(t,e,n,r,s,i,o,a,l){return t=new lR(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Er(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},T_(i),t}function cR(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lI(t){if(!t)return Ji;t=t._reactInternals;e:{if(ia(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Fn(n))return lT(t,n,e)}return e}function cI(t,e,n,r,s,i,o,a,l){return t=$_(n,r,!0,t,s,i,o,a,l),t.context=lI(null),n=t.current,r=Tn(),s=qi(n),i=Hs(r,s),i.callback=e??null,Bi(n,i,s),t.current.lanes=s,Su(t,s,r),$n(t,r),t}function If(t,e,n,r){var s=e.current,i=Tn(),o=qi(s);return n=lI(n),e.context===null?e.context=n:e.pendingContext=n,e=Hs(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bi(s,e,o),t!==null&&(Qr(t,s,o,i),eh(t,s,o)),o}function Uh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function U_(t,e){kw(t,e),(t=t.alternate)&&kw(t,e)}function uR(){return null}var uI=typeof reportError=="function"?reportError:function(t){console.error(t)};function B_(t){this._internalRoot=t}Sf.prototype.render=B_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));If(t,e,null,null)};Sf.prototype.unmount=B_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wo(function(){If(null,t,null,null)}),e[Qs]=null}};function Sf(t){this._internalRoot=t}Sf.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ub();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xi.length&&e!==0&&e<xi[n].priority;n++);xi.splice(n,0,t),n===0&&zb(t)}};function z_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Cw(){}function dR(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=Uh(o);i.call(u)}}var o=cI(e,r,t,0,null,!1,!1,"",Cw);return t._reactRootContainer=o,t[Qs]=o.current,eu(t.nodeType===8?t.parentNode:t),Wo(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=Uh(l);a.call(u)}}var l=$_(t,0,!1,null,null,!1,!1,"",Cw);return t._reactRootContainer=l,t[Qs]=l.current,eu(t.nodeType===8?t.parentNode:t),Wo(function(){If(e,l,n,r)}),l}function xf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Uh(o);a.call(l)}}If(e,o,t,s)}else o=dR(n,e,t,s,r);return Uh(o)}Fb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=mc(e.pendingLanes);n!==0&&(l_(e,n|1),$n(e,At()),!(Ve&6)&&(cl=At()+500,ro()))}break;case 13:Wo(function(){var r=Js(t,1);if(r!==null){var s=Tn();Qr(r,t,1,s)}}),U_(t,1)}};c_=function(t){if(t.tag===13){var e=Js(t,134217728);if(e!==null){var n=Tn();Qr(e,t,134217728,n)}U_(t,134217728)}};$b=function(t){if(t.tag===13){var e=qi(t),n=Js(t,e);if(n!==null){var r=Tn();Qr(n,t,e,r)}U_(t,e)}};Ub=function(){return He};Bb=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};Ng=function(t,e,n){switch(e){case"input":if(Ag(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=_f(r);if(!s)throw Error(J(90));yb(r),Ag(r,s)}}}break;case"textarea":Eb(t,n);break;case"select":e=n.value,e!=null&&Wa(t,!!n.multiple,e,!1)}};kb=L_;Cb=Wo;var hR={usingClientEntryPoint:!1,Events:[xu,Ma,_f,Ab,xb,L_]},lc={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fR={bundleType:lc.bundleType,version:lc.version,rendererPackageName:lc.rendererPackageName,rendererConfig:lc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jb(t),t===null?null:t.stateNode},findFiberByHostInstance:lc.findFiberByHostInstance||uR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dd.isDisabled&&Dd.supportsFiber)try{ff=Dd.inject(fR),ps=Dd}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hR;or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!z_(e))throw Error(J(200));return cR(t,e,null,n)};or.createRoot=function(t,e){if(!z_(t))throw Error(J(299));var n=!1,r="",s=uI;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=$_(t,1,!1,null,null,n,!1,r,s),t[Qs]=e.current,eu(t.nodeType===8?t.parentNode:t),new B_(e)};or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=jb(e),t=t===null?null:t.stateNode,t};or.flushSync=function(t){return Wo(t)};or.hydrate=function(t,e,n){if(!Af(e))throw Error(J(200));return xf(null,t,e,!0,n)};or.hydrateRoot=function(t,e,n){if(!z_(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=uI;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cI(e,null,t,1,n??null,s,!1,i,o),t[Qs]=e.current,eu(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Sf(e)};or.render=function(t,e,n){if(!Af(e))throw Error(J(200));return xf(null,t,e,!1,n)};or.unmountComponentAtNode=function(t){if(!Af(t))throw Error(J(40));return t._reactRootContainer?(Wo(function(){xf(null,null,t,!1,function(){t._reactRootContainer=null,t[Qs]=null})}),!0):!1};or.unstable_batchedUpdates=L_;or.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Af(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return xf(t,e,n,!1,r)};or.version="18.3.1-next-f1338f8080-20240426";function dI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dI)}catch(t){console.error(t)}}dI(),db.exports=or;var q_=db.exports;const pR=XE(q_),gR=YE({__proto__:null,default:pR},[q_]);var Rw=q_;yg.createRoot=Rw.createRoot,yg.hydrateRoot=Rw.hydrateRoot;var Pw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},mR=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},fI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,d=i>>2,p=(i&3)<<4|a>>4;let m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[d],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):mR(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||p==null)throw new _R;const m=i<<2|a>>4;if(r.push(m),u!==64){const y=a<<4&240|u>>2;if(r.push(y),p!==64){const I=u<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _R extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vR=function(t){const e=hI(t);return fI.encodeByteArray(e,!0)},Bh=function(t){return vR(t).replace(/\./g,"")},pI=function(t){try{return fI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=()=>yR().__FIREBASE_DEFAULTS__,ER=()=>{if(typeof process>"u"||typeof Pw>"u")return;const t=Pw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bR=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&pI(t[1]);return e&&JSON.parse(e)},kf=()=>{try{return wR()||ER()||bR()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gI=t=>{var e,n;return(n=(e=kf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},TR=t=>{const e=gI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},mI=()=>{var t;return(t=kf())===null||t===void 0?void 0:t.config},_I=t=>{var e;return(e=kf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IR=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Bh(JSON.stringify(n)),Bh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function xR(){var t;const e=(t=kf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function vI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function kR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function CR(){const t=hn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function RR(){return!xR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yI(){try{return typeof indexedDB=="object"}catch{return!1}}function wI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function PR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="FirebaseError";class ts extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=jR,Object.setPrototypeOf(this,ts.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oa.prototype.create)}}class oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?NR(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new ts(s,a,r)}}function NR(t,e){return t.replace(OR,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const OR=/\{\$([^}]+)}/g;function DR(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(jw(i)&&jw(o)){if(!cu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function jw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function yc(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LR(t,e){const n=new MR(t,e);return n.subscribe.bind(n)}class MR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");VR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Qp),s.error===void 0&&(s.error=Qp),s.complete===void 0&&(s.complete=Qp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function VR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Qp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FR=1e3,$R=2,UR=4*60*60*1e3,BR=.5;function Nw(t,e=FR,n=$R){const r=e*Math.pow(n,t),s=Math.round(BR*r*(Math.random()-.5)*2);return Math.min(UR,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new IR;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HR(e))try{this.getOrInitializeService({instanceIdentifier:xo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=xo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xo){return this.instances.has(e)}getOptions(e=xo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xo){return this.component?this.component.multipleInstances?e:xo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qR(t){return t===xo?void 0:t}function HR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const KR={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},GR=Oe.INFO,QR={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},JR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cf{constructor(e){this.name=e,this._logLevel=GR,this._logHandler=JR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const YR=(t,e)=>e.some(n=>t instanceof n);let Ow,Dw;function XR(){return Ow||(Ow=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZR(){return Dw||(Dw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const EI=new WeakMap,hm=new WeakMap,bI=new WeakMap,Jp=new WeakMap,H_=new WeakMap;function eP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Wi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&EI.set(n,t)}).catch(()=>{}),H_.set(e,t),e}function tP(t){if(hm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});hm.set(t,e)}let fm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Wi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nP(t){fm=t(fm)}function rP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Yp(this),e,...n);return bI.set(r,e.sort?e.sort():[e]),Wi(r)}:ZR().includes(t)?function(...e){return t.apply(Yp(this),e),Wi(EI.get(this))}:function(...e){return Wi(t.apply(Yp(this),e))}}function sP(t){return typeof t=="function"?rP(t):(t instanceof IDBTransaction&&tP(t),YR(t,XR())?new Proxy(t,fm):t)}function Wi(t){if(t instanceof IDBRequest)return eP(t);if(Jp.has(t))return Jp.get(t);const e=sP(t);return e!==t&&(Jp.set(t,e),H_.set(e,t)),e}const Yp=t=>H_.get(t);function TI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Wi(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Wi(o.result),l.oldVersion,l.newVersion,Wi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const iP=["get","getKey","getAll","getAllKeys","count"],oP=["put","add","delete","clear"],Xp=new Map;function Lw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Xp.get(e))return Xp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=oP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||iP.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Xp.set(e,i),i}nP(t=>({...t,get:(e,n,r)=>Lw(e,n)||t.get(e,n,r),has:(e,n)=>!!Lw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pm="@firebase/app",Mw="0.10.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs=new Cf("@firebase/app"),cP="@firebase/app-compat",uP="@firebase/analytics-compat",dP="@firebase/analytics",hP="@firebase/app-check-compat",fP="@firebase/app-check",pP="@firebase/auth",gP="@firebase/auth-compat",mP="@firebase/database",_P="@firebase/database-compat",vP="@firebase/functions",yP="@firebase/functions-compat",wP="@firebase/installations",EP="@firebase/installations-compat",bP="@firebase/messaging",TP="@firebase/messaging-compat",IP="@firebase/performance",SP="@firebase/performance-compat",AP="@firebase/remote-config",xP="@firebase/remote-config-compat",kP="@firebase/storage",CP="@firebase/storage-compat",RP="@firebase/firestore",PP="@firebase/vertexai-preview",jP="@firebase/firestore-compat",NP="firebase",OP="10.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gm="[DEFAULT]",DP={[pm]:"fire-core",[cP]:"fire-core-compat",[dP]:"fire-analytics",[uP]:"fire-analytics-compat",[fP]:"fire-app-check",[hP]:"fire-app-check-compat",[pP]:"fire-auth",[gP]:"fire-auth-compat",[mP]:"fire-rtdb",[_P]:"fire-rtdb-compat",[vP]:"fire-fn",[yP]:"fire-fn-compat",[wP]:"fire-iid",[EP]:"fire-iid-compat",[bP]:"fire-fcm",[TP]:"fire-fcm-compat",[IP]:"fire-perf",[SP]:"fire-perf-compat",[AP]:"fire-rc",[xP]:"fire-rc-compat",[kP]:"fire-gcs",[CP]:"fire-gcs-compat",[RP]:"fire-fst",[jP]:"fire-fst-compat",[PP]:"fire-vertex","fire-js":"fire-js",[NP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,LP=new Map,mm=new Map;function Vw(t,e){try{t.container.addComponent(e)}catch(n){Xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ts(t){const e=t.name;if(mm.has(e))return Xs.debug(`There were multiple attempts to register component ${e}.`),!1;mm.set(e,t);for(const n of zh.values())Vw(n,t);for(const n of LP.values())Vw(n,t);return!0}function aa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function fs(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ki=new oa("app","Firebase",MP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=OP;function II(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ki.create("bad-app-name",{appName:String(s)});if(n||(n=mI()),!n)throw Ki.create("no-options");const i=zh.get(s);if(i){if(cu(n,i.options)&&cu(r,i.config))return i;throw Ki.create("duplicate-app",{appName:s})}const o=new WR(s);for(const l of mm.values())o.addComponent(l);const a=new VP(n,r,o);return zh.set(s,a),a}function W_(t=gm){const e=zh.get(t);if(!e&&t===gm&&mI())return II();if(!e)throw Ki.create("no-app",{appName:t});return e}function Tr(t,e,n){var r;let s=(r=DP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xs.warn(a.join(" "));return}Ts(new Yr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FP="firebase-heartbeat-database",$P=1,uu="firebase-heartbeat-store";let Zp=null;function SI(){return Zp||(Zp=TI(FP,$P,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ki.create("idb-open",{originalErrorMessage:t.message})})),Zp}async function UP(t){try{const n=(await SI()).transaction(uu),r=await n.objectStore(uu).get(AI(t));return await n.done,r}catch(e){if(e instanceof ts)Xs.warn(e.message);else{const n=Ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xs.warn(n.message)}}}async function Fw(t,e){try{const r=(await SI()).transaction(uu,"readwrite");await r.objectStore(uu).put(e,AI(t)),await r.done}catch(n){if(n instanceof ts)Xs.warn(n.message);else{const r=Ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xs.warn(r.message)}}}function AI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=1024,zP=30*24*60*60*1e3;class qP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WP(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$w();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=zP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$w(),{heartbeatsToSend:r,unsentEntries:s}=HP(this._heartbeatsCache.heartbeats),i=Bh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Xs.warn(n),""}}}function $w(){return new Date().toISOString().substring(0,10)}function HP(t,e=BP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Uw(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Uw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class WP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yI()?wI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await UP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Fw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Uw(t){return Bh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){Ts(new Yr("platform-logger",e=>new aP(e),"PRIVATE")),Ts(new Yr("heartbeat",e=>new qP(e),"PRIVATE")),Tr(pm,Mw,t),Tr(pm,Mw,"esm2017"),Tr("fire-js","")}KP("");function K_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function xI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GP=xI,kI=new oa("auth","Firebase",xI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Cf("@firebase/auth");function QP(t,...e){qh.logLevel<=Oe.WARN&&qh.warn(`Auth (${xl}): ${t}`,...e)}function ah(t,...e){qh.logLevel<=Oe.ERROR&&qh.error(`Auth (${xl}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t,...e){throw G_(t,...e)}function ms(t,...e){return G_(t,...e)}function CI(t,e,n){const r=Object.assign(Object.assign({},GP()),{[e]:n});return new oa("auth","Firebase",r).create(e,{appName:t.name})}function Ws(t){return CI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function G_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kI.create(t,...e)}function ge(t,e,...n){if(!t)throw G_(e,...n)}function Us(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ah(e),new Error(e)}function Zs(t,e){t||Us(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JP(){return Bw()==="http:"||Bw()==="https:"}function Bw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JP()||vI()||"connection"in navigator)?navigator.onLine:!0}function XP(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zs(n>e,"Short delay should be less than long delay!"),this.isMobile=AR()||kR()}get(){return YP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e){Zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Us("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Us("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Us("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new Ru(3e4,6e4);function so(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function io(t,e,n,r,s={}){return PI(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Cu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),RI.fetch()(jI(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function PI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ZP),e);try{const s=new nj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ld(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Ld(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Ld(t,"user-disabled",o);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw CI(t,d,u);Xr(t,d)}}catch(s){if(s instanceof ts)throw s;Xr(t,"network-request-failed",{message:String(s)})}}async function Pu(t,e,n,r,s={}){const i=await io(t,e,n,r,s);return"mfaPendingCredential"in i&&Xr(t,"multi-factor-auth-required",{_serverResponse:i}),i}function jI(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Q_(t.config,s):`${t.config.apiScheme}://${s}`}function tj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nj{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ms(this.auth,"network-request-failed")),ej.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ld(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=ms(t,e,r);return s.customData._tokenResponse=n,s}function zw(t){return t!==void 0&&t.enterprise!==void 0}class rj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function sj(t,e){return io(t,"GET","/v2/recaptchaConfig",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ij(t,e){return io(t,"POST","/v1/accounts:delete",e)}async function NI(t,e){return io(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oj(t,e=!1){const n=Ht(t),r=await n.getIdToken(e),s=J_(r);ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Dc(eg(s.auth_time)),issuedAtTime:Dc(eg(s.iat)),expirationTime:Dc(eg(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function eg(t){return Number(t)*1e3}function J_(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ah("JWT malformed, contained fewer than 3 sections"),null;try{const s=pI(n);return s?JSON.parse(s):(ah("Failed to decode base64 JWT payload"),null)}catch(s){return ah("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function qw(t){const e=J_(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ts&&aj(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function aj({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dc(this.lastLoginAt),this.creationTime=Dc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hh(t){var e;const n=t.auth,r=await t.getIdToken(),s=await du(t,NI(n,{idToken:r}));ge(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?OI(i.providerUserInfo):[],a=uj(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new vm(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,p)}async function cj(t){const e=Ht(t);await Hh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function uj(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function OI(t){return t.map(e=>{var{providerId:n}=e,r=K_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e){const n=await PI(t,{},async()=>{const r=Cu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=jI(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",RI.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hj(t,e){return io(t,"POST","/v2/accounts:revokeToken",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=qw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await dj(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Xa;return r&&(ge(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ge(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ge(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xa,this.toJSON())}_performRefresh(){return Us("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Bs{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=K_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lj(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await du(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return oj(this,e)}reload(){return cj(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Bs(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Hh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fs(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await du(this,ij(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,d;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(a=n.tenantId)!==null&&a!==void 0?a:void 0,j=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,E=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:T,emailVerified:O,isAnonymous:B,providerData:R,stsTokenManager:k}=n;ge(T&&k,e,"internal-error");const w=Xa.fromJSON(this.name,k);ge(typeof T=="string",e,"internal-error"),Ei(p,e.name),Ei(m,e.name),ge(typeof O=="boolean",e,"internal-error"),ge(typeof B=="boolean",e,"internal-error"),Ei(y,e.name),Ei(I,e.name),Ei(A,e.name),Ei(j,e.name),Ei(x,e.name),Ei(E,e.name);const S=new Bs({uid:T,auth:e,email:m,emailVerified:O,displayName:p,isAnonymous:B,photoURL:I,phoneNumber:y,tenantId:A,stsTokenManager:w,createdAt:x,lastLoginAt:E});return R&&Array.isArray(R)&&(S.providerData=R.map(C=>Object.assign({},C))),j&&(S._redirectEventId=j),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new Xa;s.updateFromServerResponse(n);const i=new Bs({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Hh(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ge(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?OI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Xa;a.updateFromIdToken(r);const l=new Bs({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hw=new Map;function zs(t){Zs(t instanceof Function,"Expected a class definition");let e=Hw.get(t);return e?(Zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DI.type="NONE";const Ww=DI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lh(t,e,n){return`firebase:${t}:${e}:${n}`}class Za{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=lh(this.userKey,s.apiKey,i),this.fullPersistenceKey=lh("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bs._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Za(zs(Ww),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||zs(Ww);const o=lh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(o);if(d){const p=Bs._fromJSON(e,d);u!==i&&(a=p),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Za(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Za(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(FI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(UI(e))return"Blackberry";if(BI(e))return"Webos";if(MI(e))return"Safari";if((e.includes("chrome/")||VI(e))&&!e.includes("edge/"))return"Chrome";if($I(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function LI(t=hn()){return/firefox\//i.test(t)}function MI(t=hn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VI(t=hn()){return/crios\//i.test(t)}function FI(t=hn()){return/iemobile/i.test(t)}function $I(t=hn()){return/android/i.test(t)}function UI(t=hn()){return/blackberry/i.test(t)}function BI(t=hn()){return/webos/i.test(t)}function Y_(t=hn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fj(t=hn()){var e;return Y_(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function pj(){return CR()&&document.documentMode===10}function zI(t=hn()){return Y_(t)||$I(t)||BI(t)||UI(t)||/windows phone/i.test(t)||FI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qI(t,e=[]){let n;switch(t){case"Browser":n=Kw(hn());break;case"Worker":n=`${Kw(hn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${xl}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e={}){return io(t,"GET","/v2/passwordPolicy",so(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=6;class vj{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_j,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gw(this),this.idTokenSubscription=new Gw(this),this.beforeStateQueue=new gj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=zs(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Za.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await NI(this,{idToken:e}),r=await Bs._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(fs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Hh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=XP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fs(this.app))return Promise.reject(Ws(this));const n=e?Ht(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fs(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fs(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(zs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await mj(this),n=new vj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&zs(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await Za.create(this,[zs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&QP(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function la(t){return Ht(t)}class Gw{constructor(e){this.auth=e,this.observer=null,this.addObserver=LR(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wj(t){Rf=t}function HI(t){return Rf.loadJS(t)}function Ej(){return Rf.recaptchaEnterpriseScript}function bj(){return Rf.gapiScript}function Tj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Ij="recaptcha-enterprise",Sj="NO_RECAPTCHA";class Aj{constructor(e){this.type=Ij,this.auth=la(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{sj(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new rj(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;zw(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(Sj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&zw(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Ej();l.length!==0&&(l+=a),HI(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Qw(t,e,n,r=!1){const s=new Aj(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ym(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Qw(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Qw(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t,e){const n=aa(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(cu(i,e??{}))return s;Xr(s,"already-initialized")}return n.initialize({options:e})}function kj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(zs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Cj(t,e,n){const r=la(t);ge(r._canInitEmulator,r,"emulator-config-failed"),ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=WI(e),{host:o,port:a}=Rj(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Pj()}function WI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Rj(t){const e=WI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Jw(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Jw(o)}}}function Jw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Pj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Us("not implemented")}_getIdTokenResponse(e){return Us("not implemented")}_linkToIdToken(e,n){return Us("not implemented")}_getReauthenticationResolver(e){return Us("not implemented")}}async function jj(t,e){return io(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nj(t,e){return Pu(t,"POST","/v1/accounts:signInWithPassword",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oj(t,e){return Pu(t,"POST","/v1/accounts:signInWithEmailLink",so(t,e))}async function Dj(t,e){return Pu(t,"POST","/v1/accounts:signInWithEmailLink",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends X_{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new hu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new hu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,n,"signInWithPassword",Nj);case"emailLink":return Oj(e,{email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ym(e,r,"signUpPassword",jj);case"emailLink":return Dj(e,{idToken:n,email:this._email,oobCode:this._password});default:Xr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t,e){return Pu(t,"POST","/v1/accounts:signInWithIdp",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj="http://localhost";class Ko extends X_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ko(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=K_(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ko(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return el(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,el(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,el(e,n)}buildRequest(){const e={requestUri:Lj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Cu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Vj(t){const e=vc(yc(t)).link,n=e?vc(yc(e)).deep_link_id:null,r=vc(yc(t)).deep_link_id;return(r?vc(yc(r)).link:null)||r||n||e||t}class Z_{constructor(e){var n,r,s,i,o,a;const l=vc(yc(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,d=(r=l.oobCode)!==null&&r!==void 0?r:null,p=Mj((s=l.mode)!==null&&s!==void 0?s:null);ge(u&&d&&p,"argument-error"),this.apiKey=u,this.operation=p,this.code=d,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=Vj(e);try{return new Z_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.providerId=kl.PROVIDER_ID}static credential(e,n){return hu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Z_.parseLink(n);return ge(r,"argument-error"),hu._fromEmailAndCode(e,r.code,r.tenantId)}}kl.PROVIDER_ID="password";kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends KI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends ju{constructor(){super("facebook.com")}static credential(e){return Ko._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ko._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends ju{constructor(){super("github.com")}static credential(e){return Ko._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pi.credential(e.oauthAccessToken)}catch{return null}}}Pi.GITHUB_SIGN_IN_METHOD="github.com";Pi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends ju{constructor(){super("twitter.com")}static credential(e,n){return Ko._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ji.credential(n,r)}catch{return null}}}ji.TWITTER_SIGN_IN_METHOD="twitter.com";ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fj(t,e){return Pu(t,"POST","/v1/accounts:signUp",so(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Bs._fromIdTokenResponse(e,r,s),o=Yw(r);return new Go({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Yw(r);return new Go({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Yw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends ts{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Wh(e,n,r,s)}}function GI(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(t,i,e,r):i})}async function $j(t,e,n=!1){const r=await du(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Go._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uj(t,e,n=!1){const{auth:r}=t;if(fs(r.app))return Promise.reject(Ws(r));const s="reauthenticate";try{const i=await du(t,GI(r,s,e,t),n);ge(i.idToken,r,"internal-error");const o=J_(i.idToken);ge(o,r,"internal-error");const{sub:a}=o;return ge(t.uid===a,r,"user-mismatch"),Go._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Xr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(t,e,n=!1){if(fs(t.app))return Promise.reject(Ws(t));const r="signIn",s=await GI(t,r,e),i=await Go._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Bj(t,e){return QI(la(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JI(t){const e=la(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zj(t,e,n){if(fs(t.app))return Promise.reject(Ws(t));const r=la(t),o=await ym(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fj).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&JI(t),l}),a=await Go._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function qj(t,e,n){return fs(t.app)?Promise.reject(Ws(t)):Bj(Ht(t),kl.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&JI(t),r})}function Hj(t,e,n,r){return Ht(t).onIdTokenChanged(e,n,r)}function Wj(t,e,n){return Ht(t).beforeAuthStateChanged(e,n)}function YI(t,e,n,r){return Ht(t).onAuthStateChanged(e,n,r)}function Kj(t){return Ht(t).signOut()}const Kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=1e3,Qj=10;class ZI extends XI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);pj()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Qj):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Gj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZI.type="LOCAL";const Jj=ZI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS extends XI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}eS.type="SESSION";const tS=eS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Pf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await Yj(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=ev("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(){return window}function Zj(t){_s().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(){return typeof _s().WorkerGlobalScope<"u"&&typeof _s().importScripts=="function"}async function eN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function tN(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function nN(){return nS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS="firebaseLocalStorageDb",rN=1,Gh="firebaseLocalStorage",sS="fbase_key";class Nu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function jf(t,e){return t.transaction([Gh],e?"readwrite":"readonly").objectStore(Gh)}function sN(){const t=indexedDB.deleteDatabase(rS);return new Nu(t).toPromise()}function wm(){const t=indexedDB.open(rS,rN);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Gh,{keyPath:sS})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Gh)?e(r):(r.close(),await sN(),e(await wm()))})})}async function Xw(t,e,n){const r=jf(t,!0).put({[sS]:e,value:n});return new Nu(r).toPromise()}async function iN(t,e){const n=jf(t,!1).get(e),r=await new Nu(n).toPromise();return r===void 0?null:r.value}function Zw(t,e){const n=jf(t,!0).delete(e);return new Nu(n).toPromise()}const oN=800,aN=3;class iS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await wm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>aN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pf._getInstance(nN()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await eN(),!this.activeServiceWorker)return;this.sender=new Xj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||tN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await wm();return await Xw(e,Kh,"1"),await Zw(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Xw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>iN(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=jf(s,!1).getAll();return new Nu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iS.type="LOCAL";const lN=iS;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(t,e){return e?zs(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv extends X_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return el(e,this._buildIdpRequest())}_linkToIdToken(e,n){return el(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return el(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function uN(t){return QI(t.auth,new tv(t),t.bypassAuthState)}function dN(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),Uj(n,new tv(t),t.bypassAuthState)}async function hN(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),$j(n,new tv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uN;case"linkViaPopup":case"linkViaRedirect":return hN;case"reauthViaPopup":case"reauthViaRedirect":return dN;default:Xr(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN=new Ru(2e3,1e4);class qa extends oS{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,qa.currentPopupAction&&qa.currentPopupAction.cancel(),qa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=ev();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fN.get())};e()}}qa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN="pendingRedirect",ch=new Map;class gN extends oS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=ch.get(this.auth._key());if(!e){try{const r=await mN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}ch.set(this.auth._key(),e)}return this.bypassAuthState||ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function mN(t,e){const n=yN(e),r=vN(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _N(t,e){ch.set(t._key(),e)}function vN(t){return zs(t._redirectPersistence)}function yN(t){return lh(pN,t.config.apiKey,t.name)}async function wN(t,e,n=!1){if(fs(t.app))return Promise.reject(Ws(t));const r=la(t),s=cN(r,e),o=await new gN(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=10*60*1e3;class bN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!TN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!aS(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ms(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EN&&this.cachedEventUids.clear(),this.cachedEventUids.has(e0(e))}saveEventToCache(e){this.cachedEventUids.add(e0(e)),this.lastProcessedEventTime=Date.now()}}function e0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function aS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function TN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return aS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(t,e={}){return io(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,AN=/^https?/;async function xN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IN(t);for(const n of e)try{if(kN(n))return}catch{}Xr(t,"unauthorized-domain")}function kN(t){const e=_m(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!AN.test(n))return!1;if(SN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN=new Ru(3e4,6e4);function t0(){const t=_s().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function RN(t){return new Promise((e,n)=>{var r,s,i;function o(){t0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t0(),n(ms(t,"network-request-failed"))},timeout:CN.get()})}if(!((s=(r=_s().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=_s().gapi)===null||i===void 0)&&i.load)o();else{const a=Tj("iframefcb");return _s()[a]=()=>{gapi.load?o():n(ms(t,"network-request-failed"))},HI(`${bj()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw uh=null,e})}let uh=null;function PN(t){return uh=uh||RN(t),uh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=new Ru(5e3,15e3),NN="__/auth/iframe",ON="emulator/auth/iframe",DN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function MN(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Q_(e,ON):`https://${t.config.authDomain}/${NN}`,r={apiKey:e.apiKey,appName:t.name,v:xl},s=LN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Cu(r).slice(1)}`}async function VN(t){const e=await PN(t),n=_s().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:MN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=ms(t,"network-request-failed"),a=_s().setTimeout(()=>{i(o)},jN.get());function l(){_s().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},$N=500,UN=600,BN="_blank",zN="http://localhost";class n0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function qN(t,e,n,r=$N,s=UN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},FN),{width:r.toString(),height:s.toString(),top:i,left:o}),u=hn().toLowerCase();n&&(a=VI(u)?BN:n),LI(u)&&(e=e||zN,l.scrollbars="yes");const d=Object.entries(l).reduce((m,[y,I])=>`${m}${y}=${I},`,"");if(fj(u)&&a!=="_self")return HN(e||"",a),new n0(null);const p=window.open(e||"",a,d);ge(p,t,"popup-blocked");try{p.focus()}catch{}return new n0(p)}function HN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="__/auth/handler",KN="emulator/auth/handler",GN=encodeURIComponent("fac");async function r0(t,e,n,r,s,i){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:xl,eventId:s};if(e instanceof KI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DR(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof ju){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${GN}=${encodeURIComponent(l)}`:"";return`${QN(t)}?${Cu(a).slice(1)}${u}`}function QN({config:t}){return t.emulator?Q_(t,KN):`https://${t.authDomain}/${WN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="webStorageSupport";class JN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tS,this._completeRedirectFn=wN,this._overrideRedirectResult=_N}async _openPopup(e,n,r,s){var i;Zs((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await r0(e,n,r,_m(),s);return qN(e,o,ev())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await r0(e,n,r,_m(),s);return Zj(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Zs(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await VN(e),r=new bN(e);return n.register("authEvent",s=>(ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(tg,{type:tg},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[tg];o!==void 0&&n(!!o),Xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=xN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return zI()||MI()||Y_()}}const YN=JN;var s0="@firebase/auth",i0="1.7.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function eO(t){Ts(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ge(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qI(t)},u=new yj(r,s,i,l);return kj(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ts(new Yr("auth-internal",e=>{const n=la(e.getProvider("auth").getImmediate());return(r=>new XN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Tr(s0,i0,ZN(t)),Tr(s0,i0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=5*60,nO=_I("authIdTokenMaxAge")||tO;let o0=null;const rO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>nO)return;const s=n==null?void 0:n.token;o0!==s&&(o0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function sO(t=W_()){const e=aa(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xj(t,{popupRedirectResolver:YN,persistence:[lN,Jj,tS]}),r=_I("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=rO(i.toString());Wj(n,o,()=>o(n.currentUser)),Hj(n,a=>o(a))}}const s=gI("auth");return s&&Cj(n,`http://${s}`),n}function iO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}wj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=ms("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",iO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});eO("Browser");var oO="firebase",aO="10.13.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tr(oO,aO,"app");var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $o,lS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,w){function S(){}S.prototype=w.prototype,k.D=w.prototype,k.prototype=new S,k.prototype.constructor=k,k.C=function(C,N,V){for(var P=Array(arguments.length-2),me=2;me<arguments.length;me++)P[me-2]=arguments[me];return w.prototype[N].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(k,w,S){S||(S=0);var C=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)C[N]=w.charCodeAt(S++)|w.charCodeAt(S++)<<8|w.charCodeAt(S++)<<16|w.charCodeAt(S++)<<24;else for(N=0;16>N;++N)C[N]=w[S++]|w[S++]<<8|w[S++]<<16|w[S++]<<24;w=k.g[0],S=k.g[1],N=k.g[2];var V=k.g[3],P=w+(V^S&(N^V))+C[0]+3614090360&4294967295;w=S+(P<<7&4294967295|P>>>25),P=V+(N^w&(S^N))+C[1]+3905402710&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(S^V&(w^S))+C[2]+606105819&4294967295,N=V+(P<<17&4294967295|P>>>15),P=S+(w^N&(V^w))+C[3]+3250441966&4294967295,S=N+(P<<22&4294967295|P>>>10),P=w+(V^S&(N^V))+C[4]+4118548399&4294967295,w=S+(P<<7&4294967295|P>>>25),P=V+(N^w&(S^N))+C[5]+1200080426&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(S^V&(w^S))+C[6]+2821735955&4294967295,N=V+(P<<17&4294967295|P>>>15),P=S+(w^N&(V^w))+C[7]+4249261313&4294967295,S=N+(P<<22&4294967295|P>>>10),P=w+(V^S&(N^V))+C[8]+1770035416&4294967295,w=S+(P<<7&4294967295|P>>>25),P=V+(N^w&(S^N))+C[9]+2336552879&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(S^V&(w^S))+C[10]+4294925233&4294967295,N=V+(P<<17&4294967295|P>>>15),P=S+(w^N&(V^w))+C[11]+2304563134&4294967295,S=N+(P<<22&4294967295|P>>>10),P=w+(V^S&(N^V))+C[12]+1804603682&4294967295,w=S+(P<<7&4294967295|P>>>25),P=V+(N^w&(S^N))+C[13]+4254626195&4294967295,V=w+(P<<12&4294967295|P>>>20),P=N+(S^V&(w^S))+C[14]+2792965006&4294967295,N=V+(P<<17&4294967295|P>>>15),P=S+(w^N&(V^w))+C[15]+1236535329&4294967295,S=N+(P<<22&4294967295|P>>>10),P=w+(N^V&(S^N))+C[1]+4129170786&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^N&(w^S))+C[6]+3225465664&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^S&(V^w))+C[11]+643717713&4294967295,N=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(N^V))+C[0]+3921069994&4294967295,S=N+(P<<20&4294967295|P>>>12),P=w+(N^V&(S^N))+C[5]+3593408605&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^N&(w^S))+C[10]+38016083&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^S&(V^w))+C[15]+3634488961&4294967295,N=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(N^V))+C[4]+3889429448&4294967295,S=N+(P<<20&4294967295|P>>>12),P=w+(N^V&(S^N))+C[9]+568446438&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^N&(w^S))+C[14]+3275163606&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^S&(V^w))+C[3]+4107603335&4294967295,N=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(N^V))+C[8]+1163531501&4294967295,S=N+(P<<20&4294967295|P>>>12),P=w+(N^V&(S^N))+C[13]+2850285829&4294967295,w=S+(P<<5&4294967295|P>>>27),P=V+(S^N&(w^S))+C[2]+4243563512&4294967295,V=w+(P<<9&4294967295|P>>>23),P=N+(w^S&(V^w))+C[7]+1735328473&4294967295,N=V+(P<<14&4294967295|P>>>18),P=S+(V^w&(N^V))+C[12]+2368359562&4294967295,S=N+(P<<20&4294967295|P>>>12),P=w+(S^N^V)+C[5]+4294588738&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^N)+C[8]+2272392833&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^S)+C[11]+1839030562&4294967295,N=V+(P<<16&4294967295|P>>>16),P=S+(N^V^w)+C[14]+4259657740&4294967295,S=N+(P<<23&4294967295|P>>>9),P=w+(S^N^V)+C[1]+2763975236&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^N)+C[4]+1272893353&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^S)+C[7]+4139469664&4294967295,N=V+(P<<16&4294967295|P>>>16),P=S+(N^V^w)+C[10]+3200236656&4294967295,S=N+(P<<23&4294967295|P>>>9),P=w+(S^N^V)+C[13]+681279174&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^N)+C[0]+3936430074&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^S)+C[3]+3572445317&4294967295,N=V+(P<<16&4294967295|P>>>16),P=S+(N^V^w)+C[6]+76029189&4294967295,S=N+(P<<23&4294967295|P>>>9),P=w+(S^N^V)+C[9]+3654602809&4294967295,w=S+(P<<4&4294967295|P>>>28),P=V+(w^S^N)+C[12]+3873151461&4294967295,V=w+(P<<11&4294967295|P>>>21),P=N+(V^w^S)+C[15]+530742520&4294967295,N=V+(P<<16&4294967295|P>>>16),P=S+(N^V^w)+C[2]+3299628645&4294967295,S=N+(P<<23&4294967295|P>>>9),P=w+(N^(S|~V))+C[0]+4096336452&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~N))+C[7]+1126891415&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~S))+C[14]+2878612391&4294967295,N=V+(P<<15&4294967295|P>>>17),P=S+(V^(N|~w))+C[5]+4237533241&4294967295,S=N+(P<<21&4294967295|P>>>11),P=w+(N^(S|~V))+C[12]+1700485571&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~N))+C[3]+2399980690&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~S))+C[10]+4293915773&4294967295,N=V+(P<<15&4294967295|P>>>17),P=S+(V^(N|~w))+C[1]+2240044497&4294967295,S=N+(P<<21&4294967295|P>>>11),P=w+(N^(S|~V))+C[8]+1873313359&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~N))+C[15]+4264355552&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~S))+C[6]+2734768916&4294967295,N=V+(P<<15&4294967295|P>>>17),P=S+(V^(N|~w))+C[13]+1309151649&4294967295,S=N+(P<<21&4294967295|P>>>11),P=w+(N^(S|~V))+C[4]+4149444226&4294967295,w=S+(P<<6&4294967295|P>>>26),P=V+(S^(w|~N))+C[11]+3174756917&4294967295,V=w+(P<<10&4294967295|P>>>22),P=N+(w^(V|~S))+C[2]+718787259&4294967295,N=V+(P<<15&4294967295|P>>>17),P=S+(V^(N|~w))+C[9]+3951481745&4294967295,k.g[0]=k.g[0]+w&4294967295,k.g[1]=k.g[1]+(N+(P<<21&4294967295|P>>>11))&4294967295,k.g[2]=k.g[2]+N&4294967295,k.g[3]=k.g[3]+V&4294967295}r.prototype.u=function(k,w){w===void 0&&(w=k.length);for(var S=w-this.blockSize,C=this.B,N=this.h,V=0;V<w;){if(N==0)for(;V<=S;)s(this,k,V),V+=this.blockSize;if(typeof k=="string"){for(;V<w;)if(C[N++]=k.charCodeAt(V++),N==this.blockSize){s(this,C),N=0;break}}else for(;V<w;)if(C[N++]=k[V++],N==this.blockSize){s(this,C),N=0;break}}this.h=N,this.o+=w},r.prototype.v=function(){var k=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);k[0]=128;for(var w=1;w<k.length-8;++w)k[w]=0;var S=8*this.o;for(w=k.length-8;w<k.length;++w)k[w]=S&255,S/=256;for(this.u(k),k=Array(16),w=S=0;4>w;++w)for(var C=0;32>C;C+=8)k[S++]=this.g[w]>>>C&255;return k};function i(k,w){var S=a;return Object.prototype.hasOwnProperty.call(S,k)?S[k]:S[k]=w(k)}function o(k,w){this.h=w;for(var S=[],C=!0,N=k.length-1;0<=N;N--){var V=k[N]|0;C&&V==w||(S[N]=V,C=!1)}this.g=S}var a={};function l(k){return-128<=k&&128>k?i(k,function(w){return new o([w|0],0>w?-1:0)}):new o([k|0],0>k?-1:0)}function u(k){if(isNaN(k)||!isFinite(k))return p;if(0>k)return j(u(-k));for(var w=[],S=1,C=0;k>=S;C++)w[C]=k/S|0,S*=4294967296;return new o(w,0)}function d(k,w){if(k.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(k.charAt(0)=="-")return j(d(k.substring(1),w));if(0<=k.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(w,8)),C=p,N=0;N<k.length;N+=8){var V=Math.min(8,k.length-N),P=parseInt(k.substring(N,N+V),w);8>V?(V=u(Math.pow(w,V)),C=C.j(V).add(u(P))):(C=C.j(S),C=C.add(u(P)))}return C}var p=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(A(this))return-j(this).m();for(var k=0,w=1,S=0;S<this.g.length;S++){var C=this.i(S);k+=(0<=C?C:4294967296+C)*w,w*=4294967296}return k},t.toString=function(k){if(k=k||10,2>k||36<k)throw Error("radix out of range: "+k);if(I(this))return"0";if(A(this))return"-"+j(this).toString(k);for(var w=u(Math.pow(k,6)),S=this,C="";;){var N=O(S,w).g;S=x(S,N.j(w));var V=((0<S.g.length?S.g[0]:S.h)>>>0).toString(k);if(S=N,I(S))return V+C;for(;6>V.length;)V="0"+V;C=V+C}},t.i=function(k){return 0>k?0:k<this.g.length?this.g[k]:this.h};function I(k){if(k.h!=0)return!1;for(var w=0;w<k.g.length;w++)if(k.g[w]!=0)return!1;return!0}function A(k){return k.h==-1}t.l=function(k){return k=x(this,k),A(k)?-1:I(k)?0:1};function j(k){for(var w=k.g.length,S=[],C=0;C<w;C++)S[C]=~k.g[C];return new o(S,~k.h).add(m)}t.abs=function(){return A(this)?j(this):this},t.add=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0,N=0;N<=w;N++){var V=C+(this.i(N)&65535)+(k.i(N)&65535),P=(V>>>16)+(this.i(N)>>>16)+(k.i(N)>>>16);C=P>>>16,V&=65535,P&=65535,S[N]=P<<16|V}return new o(S,S[S.length-1]&-2147483648?-1:0)};function x(k,w){return k.add(j(w))}t.j=function(k){if(I(this)||I(k))return p;if(A(this))return A(k)?j(this).j(j(k)):j(j(this).j(k));if(A(k))return j(this.j(j(k)));if(0>this.l(y)&&0>k.l(y))return u(this.m()*k.m());for(var w=this.g.length+k.g.length,S=[],C=0;C<2*w;C++)S[C]=0;for(C=0;C<this.g.length;C++)for(var N=0;N<k.g.length;N++){var V=this.i(C)>>>16,P=this.i(C)&65535,me=k.i(N)>>>16,Je=k.i(N)&65535;S[2*C+2*N]+=P*Je,E(S,2*C+2*N),S[2*C+2*N+1]+=V*Je,E(S,2*C+2*N+1),S[2*C+2*N+1]+=P*me,E(S,2*C+2*N+1),S[2*C+2*N+2]+=V*me,E(S,2*C+2*N+2)}for(C=0;C<w;C++)S[C]=S[2*C+1]<<16|S[2*C];for(C=w;C<2*w;C++)S[C]=0;return new o(S,0)};function E(k,w){for(;(k[w]&65535)!=k[w];)k[w+1]+=k[w]>>>16,k[w]&=65535,w++}function T(k,w){this.g=k,this.h=w}function O(k,w){if(I(w))throw Error("division by zero");if(I(k))return new T(p,p);if(A(k))return w=O(j(k),w),new T(j(w.g),j(w.h));if(A(w))return w=O(k,j(w)),new T(j(w.g),w.h);if(30<k.g.length){if(A(k)||A(w))throw Error("slowDivide_ only works with positive integers.");for(var S=m,C=w;0>=C.l(k);)S=B(S),C=B(C);var N=R(S,1),V=R(C,1);for(C=R(C,2),S=R(S,2);!I(C);){var P=V.add(C);0>=P.l(k)&&(N=N.add(S),V=P),C=R(C,1),S=R(S,1)}return w=x(k,N.j(w)),new T(N,w)}for(N=p;0<=k.l(w);){for(S=Math.max(1,Math.floor(k.m()/w.m())),C=Math.ceil(Math.log(S)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),V=u(S),P=V.j(w);A(P)||0<P.l(k);)S-=C,V=u(S),P=V.j(w);I(V)&&(V=m),N=N.add(V),k=x(k,P)}return new T(N,k)}t.A=function(k){return O(this,k).h},t.and=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)&k.i(C);return new o(S,this.h&k.h)},t.or=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)|k.i(C);return new o(S,this.h|k.h)},t.xor=function(k){for(var w=Math.max(this.g.length,k.g.length),S=[],C=0;C<w;C++)S[C]=this.i(C)^k.i(C);return new o(S,this.h^k.h)};function B(k){for(var w=k.g.length+1,S=[],C=0;C<w;C++)S[C]=k.i(C)<<1|k.i(C-1)>>>31;return new o(S,k.h)}function R(k,w){var S=w>>5;w%=32;for(var C=k.g.length-S,N=[],V=0;V<C;V++)N[V]=0<w?k.i(V+S)>>>w|k.i(V+S+1)<<32-w:k.i(V+S);return new o(N,k.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,lS=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,$o=o}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var Md=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var cS,uS,wc,dS,dh,Em,hS,fS,pS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,_){return c==Array.prototype||c==Object.prototype||(c[g]=_.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Md=="object"&&Md];for(var g=0;g<c.length;++g){var _=c[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function s(c,g){if(g)e:{var _=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var U=c[b];if(!(U in _))break e;_=_[U]}c=c[c.length-1],b=_[c],g=g(b),g!=b&&g!=null&&e(_,c,{configurable:!0,writable:!0,value:g})}}function i(c,g){c instanceof String&&(c+="");var _=0,b=!1,U={next:function(){if(!b&&_<c.length){var q=_++;return{value:g(q,c[q]),done:!1}}return b=!0,{done:!0,value:void 0}}};return U[Symbol.iterator]=function(){return U},U}s("Array.prototype.values",function(c){return c||function(){return i(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function u(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function d(c,g,_){return c.call.apply(c.bind,arguments)}function p(c,g,_){if(!c)throw Error();if(2<arguments.length){var b=Array.prototype.slice.call(arguments,2);return function(){var U=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(U,b),c.apply(g,U)}}return function(){return c.apply(g,arguments)}}function m(c,g,_){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function y(c,g){var _=Array.prototype.slice.call(arguments,1);return function(){var b=_.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function I(c,g){function _(){}_.prototype=g.prototype,c.aa=g.prototype,c.prototype=new _,c.prototype.constructor=c,c.Qb=function(b,U,q){for(var Z=Array(arguments.length-2),De=2;De<arguments.length;De++)Z[De-2]=arguments[De];return g.prototype[U].apply(b,Z)}}function A(c){const g=c.length;if(0<g){const _=Array(g);for(let b=0;b<g;b++)_[b]=c[b];return _}return[]}function j(c,g){for(let _=1;_<arguments.length;_++){const b=arguments[_];if(l(b)){const U=c.length||0,q=b.length||0;c.length=U+q;for(let Z=0;Z<q;Z++)c[U+Z]=b[Z]}else c.push(b)}}class x{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function E(c){return/^[\s\xa0]*$/.test(c)}function T(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function O(c){return O[" "](c),c}O[" "]=function(){};var B=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function R(c,g,_){for(const b in c)g.call(_,c[b],b,c)}function k(c,g){for(const _ in c)g.call(void 0,c[_],_,c)}function w(c){const g={};for(const _ in c)g[_]=c[_];return g}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,g){let _,b;for(let U=1;U<arguments.length;U++){b=arguments[U];for(_ in b)c[_]=b[_];for(let q=0;q<S.length;q++)_=S[q],Object.prototype.hasOwnProperty.call(b,_)&&(c[_]=b[_])}}function N(c){var g=1;c=c.split(":");const _=[];for(;0<g&&c.length;)_.push(c.shift()),g--;return c.length&&_.push(c.join(":")),_}function V(c){a.setTimeout(()=>{throw c},0)}function P(){var c=ae;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class me{constructor(){this.h=this.g=null}add(g,_){const b=Je.get();b.set(g,_),this.h?this.h.next=b:this.g=b,this.h=b}}var Je=new x(()=>new Ye,c=>c.reset());class Ye{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let we,X=!1,ae=new me,de=()=>{const c=a.Promise.resolve(void 0);we=()=>{c.then(Ae)}};var Ae=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(_){V(_)}var g=Je;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}X=!1};function be(){this.s=this.s,this.C=this.C}be.prototype.s=!1,be.prototype.ma=function(){this.s||(this.s=!0,this.N())},be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Ue=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};a.addEventListener("test",_,g),a.removeEventListener("test",_,g)}catch{}return c}();function qe(c,g){if(H.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var _=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(B){e:{try{O(g.nodeName);var U=!0;break e}catch{}U=!1}U||(g=null)}}else _=="mouseover"?g=c.fromElement:_=="mouseout"&&(g=c.toElement);this.relatedTarget=g,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Xe[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&qe.aa.h.call(this)}}I(qe,H);var Xe={2:"touch",3:"pen",4:"mouse"};qe.prototype.h=function(){qe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var tt="closure_listenable_"+(1e6*Math.random()|0),jt=0;function Nt(c,g,_,b,U){this.listener=c,this.proxy=null,this.src=g,this.type=_,this.capture=!!b,this.ha=U,this.key=++jt,this.da=this.fa=!1}function cr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function se(c){this.src=c,this.g={},this.h=0}se.prototype.add=function(c,g,_,b,U){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var Z=tn(c,g,b,U);return-1<Z?(g=c[Z],_||(g.fa=!1)):(g=new Nt(g,this.src,q,!!b,U),g.fa=_,c.push(g)),g};function nt(c,g){var _=g.type;if(_ in c.g){var b=c.g[_],U=Array.prototype.indexOf.call(b,g,void 0),q;(q=0<=U)&&Array.prototype.splice.call(b,U,1),q&&(cr(g),c.g[_].length==0&&(delete c.g[_],c.h--))}}function tn(c,g,_,b){for(var U=0;U<c.length;++U){var q=c[U];if(!q.da&&q.listener==g&&q.capture==!!_&&q.ha==b)return U}return-1}var ns="closure_lm_"+(1e6*Math.random()|0),xs={};function Ot(c,g,_,b,U){if(Array.isArray(g)){for(var q=0;q<g.length;q++)Ot(c,g[q],_,b,U);return null}return _=zn(_),c&&c[tt]?c.K(g,_,u(b)?!!b.capture:!!b,U):ks(c,g,_,!1,b,U)}function ks(c,g,_,b,U,q){if(!g)throw Error("Invalid event type");var Z=u(U)?!!U.capture:!!U,De=rs(c);if(De||(c[ns]=De=new se(c)),_=De.add(g,_,b,Z,q),_.proxy)return _;if(b=xr(),_.proxy=b,b.src=c,b.listener=_,c.addEventListener)Ue||(U=Z),U===void 0&&(U=!1),c.addEventListener(g.toString(),b,U);else if(c.attachEvent)c.attachEvent(kr(g.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return _}function xr(){function c(_){return g.call(c.src,c.listener,_)}const g=li;return c}function Rn(c,g,_,b,U){if(Array.isArray(g))for(var q=0;q<g.length;q++)Rn(c,g[q],_,b,U);else b=u(b)?!!b.capture:!!b,_=zn(_),c&&c[tt]?(c=c.i,g=String(g).toString(),g in c.g&&(q=c.g[g],_=tn(q,_,b,U),-1<_&&(cr(q[_]),Array.prototype.splice.call(q,_,1),q.length==0&&(delete c.g[g],c.h--)))):c&&(c=rs(c))&&(g=c.g[g.toString()],c=-1,g&&(c=tn(g,_,b,U)),(_=-1<c?g[c]:null)&&pn(_))}function pn(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[tt])nt(g.i,c);else{var _=c.type,b=c.proxy;g.removeEventListener?g.removeEventListener(_,b,c.capture):g.detachEvent?g.detachEvent(kr(_),b):g.addListener&&g.removeListener&&g.removeListener(b),(_=rs(g))?(nt(_,c),_.h==0&&(_.src=null,g[ns]=null)):cr(c)}}}function kr(c){return c in xs?xs[c]:xs[c]="on"+c}function li(c,g){if(c.da)c=!0;else{g=new qe(g,this);var _=c.listener,b=c.ha||c.src;c.fa&&pn(c),c=_.call(b,g)}return c}function rs(c){return c=c[ns],c instanceof se?c:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function zn(c){return typeof c=="function"?c:(c[gn]||(c[gn]=function(g){return c.handleEvent(g)}),c[gn])}function ht(){be.call(this),this.i=new se(this),this.M=this,this.F=null}I(ht,be),ht.prototype[tt]=!0,ht.prototype.removeEventListener=function(c,g,_,b){Rn(this,c,g,_,b)};function Ze(c,g){var _,b=c.F;if(b)for(_=[];b;b=b.F)_.push(b);if(c=c.M,b=g.type||g,typeof g=="string")g=new H(g,c);else if(g instanceof H)g.target=g.target||c;else{var U=g;g=new H(b,c),C(g,U)}if(U=!0,_)for(var q=_.length-1;0<=q;q--){var Z=g.g=_[q];U=ot(Z,b,!0,g)&&U}if(Z=g.g=c,U=ot(Z,b,!0,g)&&U,U=ot(Z,b,!1,g)&&U,_)for(q=0;q<_.length;q++)Z=g.g=_[q],U=ot(Z,b,!1,g)&&U}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var _=c.g[g],b=0;b<_.length;b++)cr(_[b]);delete c.g[g],c.h--}}this.F=null},ht.prototype.K=function(c,g,_,b){return this.i.add(String(c),g,!1,_,b)},ht.prototype.L=function(c,g,_,b){return this.i.add(String(c),g,!0,_,b)};function ot(c,g,_,b){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var U=!0,q=0;q<g.length;++q){var Z=g[q];if(Z&&!Z.da&&Z.capture==_){var De=Z.listener,It=Z.ha||Z.src;Z.fa&&nt(c.i,Z),U=De.call(It,b)!==!1&&U}}return U&&!b.defaultPrevented}function mn(c,g,_){if(typeof c=="function")_&&(c=m(c,_));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(c,g||0)}function Cr(c){c.g=mn(()=>{c.g=null,c.i&&(c.i=!1,Cr(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class qn extends be{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Cr(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(c){be.call(this),this.h=c,this.g={}}I(Pn,be);var nn=[];function co(c){R(c.g,function(g,_){this.g.hasOwnProperty(_)&&pn(g)},c),c.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),co(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ss=a.JSON.stringify,pa=a.JSON.parse,$l=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function ci(){}ci.prototype.h=null;function Cs(c){return c.h||(c.h=c.i())}function uo(){}var Rr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pr(){H.call(this,"d")}I(Pr,H);function ur(){H.call(this,"c")}I(ur,H);var dr={},ui=null;function di(){return ui=ui||new ht}dr.La="serverreachability";function ho(c){H.call(this,dr.La,c)}I(ho,H);function hr(c){const g=di();Ze(g,new ho(g))}dr.STAT_EVENT="statevent";function Rs(c,g){H.call(this,dr.STAT_EVENT,c),this.stat=g}I(Rs,H);function ft(c){const g=di();Ze(g,new Rs(g,c))}dr.Ma="timingevent";function is(c,g){H.call(this,dr.Ma,c),this.size=g}I(is,H);function L(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},g)}function $(){this.g=!0}$.prototype.xa=function(){this.g=!1};function z(c,g,_,b,U,q){c.info(function(){if(c.g)if(q)for(var Z="",De=q.split("&"),It=0;It<De.length;It++){var je=De[It].split("=");if(1<je.length){var Ft=je[0];je=je[1];var $t=Ft.split("_");Z=2<=$t.length&&$t[1]=="type"?Z+(Ft+"="+je+"&"):Z+(Ft+"=redacted&")}}else Z=null;else Z=q;return"XMLHTTP REQ ("+b+") [attempt "+U+"]: "+g+`
`+_+`
`+Z})}function W(c,g,_,b,U,q,Z){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+U+"]: "+g+`
`+_+`
`+q+" "+Z})}function te(c,g,_,b){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+he(c,_)+(b?" "+b:"")})}function ie(c,g){c.info(function(){return"TIMEOUT: "+g})}$.prototype.info=function(){};function he(c,g){if(!c.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(c=0;c<_.length;c++)if(Array.isArray(_[c])){var b=_[c];if(!(2>b.length)){var U=b[1];if(Array.isArray(U)&&!(1>U.length)){var q=U[0];if(q!="noop"&&q!="stop"&&q!="close")for(var Z=1;Z<U.length;Z++)U[Z]=""}}}}return ss(_)}catch{return g}}var Y={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ce;function ue(){}I(ue,ci),ue.prototype.g=function(){return new XMLHttpRequest},ue.prototype.i=function(){return{}},ce=new ue;function xe(c,g,_,b){this.j=c,this.i=g,this.l=_,this.R=b||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ke}function ke(){this.i=null,this.g="",this.h=!1}var Me={},Te={};function at(c,g,_){c.L=1,c.v=Ps(gr(g)),c.m=_,c.P=!0,lt(c,null)}function lt(c,g){c.F=Date.now(),Hn(c),c.A=gr(c.v);var _=c.A,b=c.R;Array.isArray(b)||(b=[String(b)]),td(_.i,"t",b),c.C=0,_=c.j.J,c.h=new ke,c.g=Yl(c.j,_?g:null,!c.m),0<c.O&&(c.M=new qn(m(c.Y,c,c.g),c.O)),g=c.U,_=c.g,b=c.ca;var U="readystatechange";Array.isArray(U)||(U&&(nn[0]=U.toString()),U=nn);for(var q=0;q<U.length;q++){var Z=Ot(_,U[q],b||g.handleEvent,!1,g.h||g);if(!Z)break;g.g[Z.key]=Z}g=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),hr(),z(c.i,c.u,c.A,c.l,c.R,c.m)}xe.prototype.ca=function(c){c=c.target;const g=this.M;g&&Lr(c)==3?g.j():this.Y(c)},xe.prototype.Y=function(c){try{if(c==this.g)e:{const $t=Lr(this.g);var g=this.g.Ba();const vi=this.g.Z();if(!(3>$t)&&($t!=3||this.g&&(this.h.h||this.g.oa()||ad(this.g)))){this.J||$t!=4||g==7||(g==8||0>=vi?hr(3):hr(2)),pr(this);var _=this.g.Z();this.X=_;t:if(jr(this)){var b=ad(this.g);c="";var U=b.length,q=Lr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),Dt(this);var Z="";break t}this.h.i=new a.TextDecoder}for(g=0;g<U;g++)this.h.h=!0,c+=this.h.i.decode(b[g],{stream:!(q&&g==U-1)});b.length=0,this.h.g+=c,this.C=0,Z=this.h.g}else Z=this.g.oa();if(this.o=_==200,W(this.i,this.u,this.A,this.l,this.R,$t,_),this.o){if(this.T&&!this.K){t:{if(this.g){var De,It=this.g;if((De=It.g?It.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(De)){var je=De;break t}}je=null}if(_=je)te(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,os(this,_);else{this.o=!1,this.s=3,ft(12),_n(this),Dt(this);break e}}if(this.P){_=!0;let Kt;for(;!this.J&&this.C<Z.length;)if(Kt=fr(this,Z),Kt==Te){$t==4&&(this.s=4,ft(14),_=!1),te(this.i,this.l,null,"[Incomplete Response]");break}else if(Kt==Me){this.s=4,ft(15),te(this.i,this.l,Z,"[Invalid Chunk]"),_=!1;break}else te(this.i,this.l,Kt,null),os(this,Kt);if(jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$t!=4||Z.length!=0||this.h.h||(this.s=1,ft(16),_=!1),this.o=this.o&&_,!_)te(this.i,this.l,Z,"[Invalid Chunked Response]"),_n(this),Dt(this);else if(0<Z.length&&!this.W){this.W=!0;var Ft=this.j;Ft.g==this&&Ft.ba&&!Ft.M&&(Ft.j.info("Great, no buffering proxy detected. Bytes received: "+Z.length),Ql(Ft),Ft.M=!0,ft(11))}}else te(this.i,this.l,Z,null),os(this,Z);$t==4&&_n(this),this.o&&!this.J&&($t==4?hd(this.j,this):(this.o=!1,Hn(this)))}else _p(this.g),_==400&&0<Z.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),_n(this),Dt(this)}}}catch{}finally{}};function jr(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fr(c,g){var _=c.C,b=g.indexOf(`
`,_);return b==-1?Te:(_=Number(g.substring(_,b)),isNaN(_)?Me:(b+=1,b+_>g.length?Te:(g=g.slice(b,b+_),c.C=b+_,g)))}xe.prototype.cancel=function(){this.J=!0,_n(this)};function Hn(c){c.S=Date.now()+c.I,Nr(c,c.I)}function Nr(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=L(m(c.ba,c),g)}function pr(c){c.B&&(a.clearTimeout(c.B),c.B=null)}xe.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ie(this.i,this.A),this.L!=2&&(hr(),ft(17)),_n(this),this.s=2,Dt(this)):Nr(this,this.S-c)};function Dt(c){c.j.G==0||c.J||hd(c.j,c)}function _n(c){pr(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,co(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function os(c,g){try{var _=c.j;if(_.G!=0&&(_.g==c||Be(_.h,c))){if(!c.K&&Be(_.h,c)&&_.G==3){try{var b=_.Da.g.parse(g)}catch{b=null}if(Array.isArray(b)&&b.length==3){var U=b;if(U[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<c.F)Ea(_),ya(_);else break e;Gl(_),ft(18)}}else _.za=U[1],0<_.za-_.T&&37500>U[2]&&_.F&&_.v==0&&!_.C&&(_.C=L(m(_.Za,_),6e3));if(1>=Tt(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Mr(_,11)}else if((c.K||_.g==c)&&Ea(_),!E(g))for(U=_.Da.g.parse(g),g=0;g<U.length;g++){let je=U[g];if(_.T=je[0],je=je[1],_.G==2)if(je[0]=="c"){_.K=je[1],_.ia=je[2];const Ft=je[3];Ft!=null&&(_.la=Ft,_.j.info("VER="+_.la));const $t=je[4];$t!=null&&(_.Aa=$t,_.j.info("SVER="+_.Aa));const vi=je[5];vi!=null&&typeof vi=="number"&&0<vi&&(b=1.5*vi,_.L=b,_.j.info("backChannelRequestTimeoutMs_="+b)),b=_;const Kt=c.g;if(Kt){const _r=Kt.g?Kt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_r){var q=b.h;q.g||_r.indexOf("spdy")==-1&&_r.indexOf("quic")==-1&&_r.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(vn(q,q.h),q.h=null))}if(b.D){const Xl=Kt.g?Kt.g.getResponseHeader("X-HTTP-Session-Id"):null;Xl&&(b.ya=Xl,We(b.I,b.D,Xl))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-c.F,_.j.info("Handshake RTT: "+_.R+"ms")),b=_;var Z=c;if(b.qa=Jl(b,b.J?b.ia:null,b.W),Z.K){fo(b.h,Z);var De=Z,It=b.L;It&&(De.I=It),De.B&&(pr(De),Hn(De)),b.g=Z}else ud(b);0<_.i.length&&wa(_)}else je[0]!="stop"&&je[0]!="close"||Mr(_,7);else _.G==3&&(je[0]=="stop"||je[0]=="close"?je[0]=="stop"?Mr(_,7):Kl(_):je[0]!="noop"&&_.l&&_.l.ta(je),_.v=0)}}hr(4)}catch{}}var Wn=class{constructor(c,g){this.g=c,this.map=g}};function pe(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function et(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tt(c){return c.h?1:c.g?c.g.size:0}function Be(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function vn(c,g){c.g?c.g.add(g):c.h=g}function fo(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}pe.prototype.cancel=function(){if(this.i=ga(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function ga(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const _ of c.g.values())g=g.concat(_.D);return g}return A(c.i)}function dp(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var g=[],_=c.length,b=0;b<_;b++)g.push(c[b]);return g}g=[],_=0;for(b in c)g[_++]=c[b];return g}function hp(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var g=[];c=c.length;for(var _=0;_<c;_++)g.push(_);return g}g=[],_=0;for(const b in c)g[_++]=b;return g}}}function Ku(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var _=hp(c),b=dp(c),U=b.length,q=0;q<U;q++)g.call(void 0,b[q],_&&_[q],c)}var Gu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Kn(c,g){if(c){c=c.split("&");for(var _=0;_<c.length;_++){var b=c[_].indexOf("="),U=null;if(0<=b){var q=c[_].substring(0,b);U=c[_].substring(b+1)}else q=c[_];g(q,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function as(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof as){this.h=c.h,po(this,c.j),this.o=c.o,this.g=c.g,ma(this,c.s),this.l=c.l;var g=c.i,_=new ls;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),Qu(this,_),this.m=c.m}else c&&(g=String(c).match(Gu))?(this.h=!1,po(this,g[1]||"",!0),this.o=go(g[2]||""),this.g=go(g[3]||"",!0),ma(this,g[4]),this.l=go(g[5]||"",!0),Qu(this,g[6]||"",!0),this.m=go(g[7]||"")):(this.h=!1,this.i=new ls(null,this.h))}as.prototype.toString=function(){var c=[],g=this.j;g&&c.push(mo(g,Yu,!0),":");var _=this.g;return(_||g=="file")&&(c.push("//"),(g=this.o)&&c.push(mo(g,Yu,!0),"@"),c.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&c.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(mo(_,_.charAt(0)=="/"?Xu:fp,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",mo(_,ed)),c.join("")};function gr(c){return new as(c)}function po(c,g,_){c.j=_?go(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function ma(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function Qu(c,g,_){g instanceof ls?(c.i=g,nd(c.i,c.h)):(_||(g=mo(g,Zu)),c.i=new ls(g,c.h))}function We(c,g,_){c.i.set(g,_)}function Ps(c){return We(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function go(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function mo(c,g,_){return typeof c=="string"?(c=encodeURI(c).replace(g,Ju),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Ju(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Yu=/[#\/\?@]/g,fp=/[#\?:]/g,Xu=/[#\?]/g,Zu=/[#\?@]/g,ed=/#/g;function ls(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function Or(c){c.g||(c.g=new Map,c.h=0,c.i&&Kn(c.i,function(g,_){c.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=ls.prototype,t.add=function(c,g){Or(this),this.i=null,c=hi(this,c);var _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(g),this.h+=1,this};function _a(c,g){Or(c),g=hi(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function yn(c,g){return Or(c),g=hi(c,g),c.g.has(g)}t.forEach=function(c,g){Or(this),this.g.forEach(function(_,b){_.forEach(function(U){c.call(g,U,b,this)},this)},this)},t.na=function(){Or(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let b=0;b<g.length;b++){const U=c[b];for(let q=0;q<U.length;q++)_.push(g[b])}return _},t.V=function(c){Or(this);let g=[];if(typeof c=="string")yn(this,c)&&(g=g.concat(this.g.get(hi(this,c))));else{c=Array.from(this.g.values());for(let _=0;_<c.length;_++)g=g.concat(c[_])}return g},t.set=function(c,g){return Or(this),this.i=null,c=hi(this,c),yn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function td(c,g,_){_a(c,g),0<_.length&&(c.i=null,c.g.set(hi(c,g),A(_)),c.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var b=g[_];const q=encodeURIComponent(String(b)),Z=this.V(b);for(b=0;b<Z.length;b++){var U=q;Z[b]!==""&&(U+="="+encodeURIComponent(String(Z[b]))),c.push(U)}}return this.i=c.join("&")};function hi(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function nd(c,g){g&&!c.j&&(Or(c),c.i=null,c.g.forEach(function(_,b){var U=b.toLowerCase();b!=U&&(_a(this,b),td(this,U,_))},c)),c.j=g}function rd(c,g){const _=new $;if(a.Image){const b=new Image;b.onload=y(cs,_,"TestLoadImage: loaded",!0,g,b),b.onerror=y(cs,_,"TestLoadImage: error",!1,g,b),b.onabort=y(cs,_,"TestLoadImage: abort",!1,g,b),b.ontimeout=y(cs,_,"TestLoadImage: timeout",!1,g,b),a.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else g(!1)}function pp(c,g){const _=new $,b=new AbortController,U=setTimeout(()=>{b.abort(),cs(_,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:b.signal}).then(q=>{clearTimeout(U),q.ok?cs(_,"TestPingServer: ok",!0,g):cs(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(U),cs(_,"TestPingServer: error",!1,g)})}function cs(c,g,_,b,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),b(_)}catch{}}function gp(){this.g=new $l}function mp(c,g,_){const b=_||"";try{Ku(c,function(U,q){let Z=U;u(U)&&(Z=ss(U)),g.push(b+q+"="+encodeURIComponent(Z))})}catch(U){throw g.push(b+"type="+encodeURIComponent("_badmap")),U}}function _o(c){this.l=c.Ub||null,this.j=c.eb||!1}I(_o,ci),_o.prototype.g=function(){return new va(this.l,this.j)},_o.prototype.i=function(c){return function(){return c}}({});function va(c,g){ht.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(va,ht),t=va.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,js(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,js(this)),this.g&&(this.readyState=3,js(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ul(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ul(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?fi(this):js(this),this.readyState==3&&Ul(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,fi(this))},t.Qa=function(c){this.g&&(this.response=c,fi(this))},t.ga=function(){this.g&&fi(this)};function fi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,js(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=g.next();return c.join(`\r
`)};function js(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function sd(c){let g="";return R(c,function(_,b){g+=b,g+=":",g+=_,g+=`\r
`}),g}function Bl(c,g,_){e:{for(b in _){var b=!1;break e}b=!0}b||(_=sd(_),typeof c=="string"?_!=null&&encodeURIComponent(String(_)):We(c,g,_))}function ze(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ze,ht);var Dr=/^https?$/i,id=["POST","PUT"];t=ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,_,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ce.g(),this.v=this.o?Cs(this.o):Cs(ce),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(q){od(this,q);return}if(c=_||"",_=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var U in b)_.set(U,b[U]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const q of b.keys())_.set(q,b.get(q));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),U=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(id,g,void 0))||b||U||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,Z]of _)this.g.setRequestHeader(q,Z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hl(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){od(this,q)}};function od(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,zl(c),vo(c)}function zl(c){c.A||(c.A=!0,Ze(c,"complete"),Ze(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ze(this,"complete"),Ze(this,"abort"),vo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),vo(this,!0)),ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ql(this):this.bb())},t.bb=function(){ql(this)};function ql(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Lr(c)!=4||c.Z()!=2)){if(c.u&&Lr(c)==4)mn(c.Ea,0,c);else if(Ze(c,"readystatechange"),Lr(c)==4){c.h=!1;try{const Z=c.Z();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var b;if(b=Z===0){var U=String(c.D).match(Gu)[1]||null;!U&&a.self&&a.self.location&&(U=a.self.location.protocol.slice(0,-1)),b=!Dr.test(U?U.toLowerCase():"")}_=b}if(_)Ze(c,"complete"),Ze(c,"success");else{c.m=6;try{var q=2<Lr(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",zl(c)}}finally{vo(c)}}}}function vo(c,g){if(c.g){Hl(c);const _=c.g,b=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||Ze(c,"ready");try{_.onreadystatechange=b}catch{}}}function Hl(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Lr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Lr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),pa(g)}};function ad(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function _p(c){const g={};c=(c.g&&2<=Lr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(E(c[b]))continue;var _=N(c[b]);const U=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=g[U]||[];g[U]=q,q.push(_)}k(g,function(b){return b.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pi(c,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||g}function Wl(c){this.Aa=0,this.i=[],this.j=new $,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pi("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pi("baseRetryDelayMs",5e3,c),this.cb=pi("retryDelaySeedMs",1e4,c),this.Wa=pi("forwardChannelMaxRetries",2,c),this.wa=pi("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new pe(c&&c.concurrentRequestLimit),this.Da=new gp,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Wl.prototype,t.la=8,t.G=1,t.connect=function(c,g,_,b){ft(0),this.W=c,this.H=g||{},_&&b!==void 0&&(this.H.OSID=_,this.H.OAID=b),this.F=this.X,this.I=Jl(this,null,this.W),wa(this)};function Kl(c){if(ld(c),c.G==3){var g=c.U++,_=gr(c.I);if(We(_,"SID",c.K),We(_,"RID",g),We(_,"TYPE","terminate"),gi(c,_),g=new xe(c,c.j,g),g.L=2,g.v=Ps(gr(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=g.v,_=!0),_||(g.g=Yl(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Hn(g)}yo(c)}function ya(c){c.g&&(Ql(c),c.g.cancel(),c.g=null)}function ld(c){ya(c),c.u&&(a.clearTimeout(c.u),c.u=null),Ea(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function wa(c){if(!et(c.h)&&!c.s){c.s=!0;var g=c.Ga;we||de(),X||(we(),X=!0),ae.add(g,c),c.B=0}}function vp(c,g){return Tt(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=L(m(c.Ga,c,g),fd(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const U=new xe(this,this.j,c);let q=this.o;if(this.S&&(q?(q=w(q),C(q,this.S)):q=this.S),this.m!==null||this.O||(U.H=q,q=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var b=this.i[_];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(g+=b,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=cd(this,U,g),_=gr(this.I),We(_,"RID",c),We(_,"CVER",22),this.D&&We(_,"X-HTTP-Session-Id",this.D),gi(this,_),q&&(this.O?g="headers="+encodeURIComponent(String(sd(q)))+"&"+g:this.m&&Bl(_,this.m,q)),vn(this.h,U),this.Ua&&We(_,"TYPE","init"),this.P?(We(_,"$req",g),We(_,"SID","null"),U.T=!0,at(U,_,null)):at(U,_,g),this.G=2}}else this.G==3&&(c?mr(this,c):this.i.length==0||et(this.h)||mr(this))};function mr(c,g){var _;g?_=g.l:_=c.U++;const b=gr(c.I);We(b,"SID",c.K),We(b,"RID",_),We(b,"AID",c.T),gi(c,b),c.m&&c.o&&Bl(b,c.m,c.o),_=new xe(c,c.j,_,c.B+1),c.m===null&&(_.H=c.o),g&&(c.i=g.D.concat(c.i)),g=cd(c,_,1e3),_.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),vn(c.h,_),at(_,b,g)}function gi(c,g){c.H&&R(c.H,function(_,b){We(g,b,_)}),c.l&&Ku({},function(_,b){We(g,b,_)})}function cd(c,g,_){_=Math.min(c.i.length,_);var b=c.l?m(c.l.Na,c.l,c):null;e:{var U=c.i;let q=-1;for(;;){const Z=["count="+_];q==-1?0<_?(q=U[0].g,Z.push("ofs="+q)):q=0:Z.push("ofs="+q);let De=!0;for(let It=0;It<_;It++){let je=U[It].g;const Ft=U[It].map;if(je-=q,0>je)q=Math.max(0,U[It].g-100),De=!1;else try{mp(Ft,Z,"req"+je+"_")}catch{b&&b(Ft)}}if(De){b=Z.join("&");break e}}}return c=c.i.splice(0,_),g.D=c,b}function ud(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;we||de(),X||(we(),X=!0),ae.add(g,c),c.v=0}}function Gl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=L(m(c.Fa,c),fd(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,dd(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=L(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),ya(this),dd(this))};function Ql(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function dd(c){c.g=new xe(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=gr(c.qa);We(g,"RID","rpc"),We(g,"SID",c.K),We(g,"AID",c.T),We(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&We(g,"TO",c.ja),We(g,"TYPE","xmlhttp"),gi(c,g),c.m&&c.o&&Bl(g,c.m,c.o),c.L&&(c.g.I=c.L);var _=c.g;c=c.ia,_.L=1,_.v=Ps(gr(g)),_.m=null,_.P=!0,lt(_,c)}t.Za=function(){this.C!=null&&(this.C=null,ya(this),Gl(this),ft(19))};function Ea(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function hd(c,g){var _=null;if(c.g==g){Ea(c),Ql(c),c.g=null;var b=2}else if(Be(c.h,g))_=g.D,fo(c.h,g),b=1;else return;if(c.G!=0){if(g.o)if(b==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var U=c.B;b=di(),Ze(b,new is(b,_)),wa(c)}else ud(c);else if(U=g.s,U==3||U==0&&0<g.X||!(b==1&&vp(c,g)||b==2&&Gl(c)))switch(_&&0<_.length&&(g=c.h,g.i=g.i.concat(_)),U){case 1:Mr(c,5);break;case 4:Mr(c,10);break;case 3:Mr(c,6);break;default:Mr(c,2)}}}function fd(c,g){let _=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(_*=2),_*g}function Mr(c,g){if(c.j.info("Error code "+g),g==2){var _=m(c.fb,c),b=c.Xa;const U=!b;b=new as(b||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||po(b,"https"),Ps(b),U?rd(b.toString(),_):pp(b.toString(),_)}else ft(2);c.G=0,c.l&&c.l.sa(g),yo(c),ld(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function yo(c){if(c.G=0,c.ka=[],c.l){const g=ga(c.h);(g.length!=0||c.i.length!=0)&&(j(c.ka,g),j(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function Jl(c,g,_){var b=_ instanceof as?gr(_):new as(_);if(b.g!="")g&&(b.g=g+"."+b.g),ma(b,b.s);else{var U=a.location;b=U.protocol,g=g?g+"."+U.hostname:U.hostname,U=+U.port;var q=new as(null);b&&po(q,b),g&&(q.g=g),U&&ma(q,U),_&&(q.l=_),b=q}return _=c.D,g=c.ya,_&&g&&We(b,_,g),We(b,"VER",c.la),gi(c,b),b}function Yl(c,g,_){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new ze(new _o({eb:_})):new ze(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mi(){}t=mi.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function _i(){}_i.prototype.g=function(c,g){return new wn(c,g)};function wn(c,g){ht.call(this),this.g=new Wl(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!E(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!E(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new jn(this)}I(wn,ht),wn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){Kl(this.g)},wn.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.u&&(_={},_.__data__=ss(c),c=_);g.i.push(new Wn(g.Ya++,c)),g.G==3&&wa(g)},wn.prototype.N=function(){this.g.l=null,delete this.j,Kl(this.g),delete this.g,wn.aa.N.call(this)};function pd(c){Pr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const _ in g){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}I(pd,Pr);function gd(){ur.call(this),this.status=1}I(gd,ur);function jn(c){this.g=c}I(jn,mi),jn.prototype.ua=function(){Ze(this.g,"a")},jn.prototype.ta=function(c){Ze(this.g,new pd(c))},jn.prototype.sa=function(c){Ze(this.g,new gd)},jn.prototype.ra=function(){Ze(this.g,"b")},_i.prototype.createWebChannel=_i.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,pS=function(){return new _i},fS=function(){return di()},hS=dr,Em={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Y.NO_ERROR=0,Y.TIMEOUT=8,Y.HTTP_ERROR=6,dh=Y,_e.COMPLETE="complete",dS=_e,uo.EventType=Rr,Rr.OPEN="a",Rr.CLOSE="b",Rr.ERROR="c",Rr.MESSAGE="d",ht.prototype.listen=ht.prototype.K,wc=uo,uS=_o,ze.prototype.listenOnce=ze.prototype.L,ze.prototype.getLastError=ze.prototype.Ka,ze.prototype.getLastErrorCode=ze.prototype.Ba,ze.prototype.getStatus=ze.prototype.Z,ze.prototype.getResponseJson=ze.prototype.Oa,ze.prototype.getResponseText=ze.prototype.oa,ze.prototype.send=ze.prototype.ea,ze.prototype.setWithCredentials=ze.prototype.Ha,cS=ze}).apply(typeof Md<"u"?Md:typeof self<"u"?self:typeof window<"u"?window:{});const l0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ln.UNAUTHENTICATED=new ln(null),ln.GOOGLE_CREDENTIALS=new ln("google-credentials-uid"),ln.FIRST_PARTY=new ln("first-party-uid"),ln.MOCK_USER=new ln("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cl="10.13.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=new Cf("@firebase/firestore");function cc(){return Qo.logLevel}function le(t,...e){if(Qo.logLevel<=Oe.DEBUG){const n=e.map(nv);Qo.debug(`Firestore (${Cl}): ${t}`,...n)}}function ei(t,...e){if(Qo.logLevel<=Oe.ERROR){const n=e.map(nv);Qo.error(`Firestore (${Cl}): ${t}`,...n)}}function ul(t,...e){if(Qo.logLevel<=Oe.WARN){const n=e.map(nv);Qo.warn(`Firestore (${Cl}): ${t}`,...n)}}function nv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(t="Unexpected state"){const e=`FIRESTORE (${Cl}) INTERNAL ASSERTION FAILED: `+t;throw ei(e),new Error(e)}function Qe(t,e){t||ve()}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends ts{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ln.UNAUTHENTICATED))}shutdown(){}}class cO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class uO{constructor(e){this.t=e,this.currentUser=ln.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new vs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new vs,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new vs)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new gS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new ln(e)}}class dO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ln.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class hO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new dO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ln.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=i=>{i.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string"),this.R=n.token,new fO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=gO(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function Fe(t,e){return t<e?-1:t>e?1:0}function dl(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Vt.fromMillis(Date.now())}static fromDate(e){return Vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Vt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new Vt(0,0))}static max(){return new Ee(new Vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n,r){n===void 0?n=0:n>e.length&&ve(),r===void 0?r=e.length-n:r>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fu.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fu?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class st extends fu{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ne(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new st(n)}static emptyPath(){return new st([])}}const mO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends fu{construct(e,n,r){return new Jt(e,n,r)}static isValidIdentifier(e){return mO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Jt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ne(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ne(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new ne(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(st.fromString(e))}static fromName(e){return new fe(st.fromString(e).popFirst(5))}static empty(){return new fe(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new st(e.slice()))}}function _O(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Ee.fromTimestamp(r===1e9?new Vt(n+1,0):new Vt(n,r));return new Yi(s,fe.empty(),e)}function vO(t){return new Yi(t.readTime,t.key,-1)}class Yi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yi(Ee.min(),fe.empty(),-1)}static max(){return new Yi(Ee.max(),fe.empty(),-1)}}function yO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=fe.comparator(t.documentKey,e.documentKey),n!==0?n:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==wO)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(s=>s?Q.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(d=>{o[u]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new Q((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function bO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Du(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rv.oe=-1;function Nf(t){return t==null}function Qh(t){return t===0&&1/t==-1/0}function TO(t){return typeof t=="number"&&Number.isInteger(t)&&!Qh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rl(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function IO(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function _S(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){this.comparator=e,this.root=n||Qt.EMPTY}insert(e,n){return new Et(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vd(this.root,e,this.comparator,!0)}}class Vd{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Qt.RED,this.left=s??Qt.EMPTY,this.right=i??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Qt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Qt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Qt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Xt(this.comparator);return n.data=e,n}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Kr([])}unionWith(e){let n=new Xt(Jt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return dl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vS("Invalid base64 string: "+i):i}}(e);return new en(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new en(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}en.EMPTY_BYTE_STRING=new en("");const SO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xi(t){if(Qe(!!t),typeof t=="string"){let e=0;const n=SO.exec(t);if(Qe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:St(t.seconds),nanos:St(t.nanos)}}function St(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Jo(t){return typeof t=="string"?en.fromBase64String(t):en.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Of(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sv(t){const e=t.mapValue.fields.__previous_value__;return Of(e)?sv(e):e}function pu(t){const e=Xi(t.mapValue.fields.__local_write_time__.timestampValue);return new Vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e,n,r,s,i,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class gu{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new gu("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Of(t)?4:kO(t)?9007199254740991:xO(t)?10:11:ve()}function Is(t,e){if(t===e)return!0;const n=Yo(t);if(n!==Yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return pu(t).isEqual(pu(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Xi(s.timestampValue),a=Xi(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Jo(s.bytesValue).isEqual(Jo(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return St(s.geoPointValue.latitude)===St(i.geoPointValue.latitude)&&St(s.geoPointValue.longitude)===St(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return St(s.integerValue)===St(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=St(s.doubleValue),a=St(i.doubleValue);return o===a?Qh(o)===Qh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return dl(t.arrayValue.values||[],e.arrayValue.values||[],Is);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(c0(o)!==c0(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Is(o[l],a[l])))return!1;return!0}(t,e);default:return ve()}}function mu(t,e){return(t.values||[]).find(n=>Is(n,e))!==void 0}function hl(t,e){if(t===e)return 0;const n=Yo(t),r=Yo(e);if(n!==r)return Fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=St(i.integerValue||i.doubleValue),l=St(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return d0(t.timestampValue,e.timestampValue);case 4:return d0(pu(t),pu(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Jo(i),l=Jo(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Fe(a[u],l[u]);if(d!==0)return d}return Fe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Fe(St(i.latitude),St(o.latitude));return a!==0?a:Fe(St(i.longitude),St(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return h0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,d;const p=i.fields||{},m=o.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,I=(l=m.value)===null||l===void 0?void 0:l.arrayValue,A=Fe(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((d=I==null?void 0:I.values)===null||d===void 0?void 0:d.length)||0);return A!==0?A:h0(y,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Fd.mapValue&&o===Fd.mapValue)return 0;if(i===Fd.mapValue)return 1;if(o===Fd.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const m=Fe(l[p],d[p]);if(m!==0)return m;const y=hl(a[l[p]],u[d[p]]);if(y!==0)return y}return Fe(l.length,d.length)}(t.mapValue,e.mapValue);default:throw ve()}}function d0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const n=Xi(t),r=Xi(e),s=Fe(n.seconds,r.seconds);return s!==0?s:Fe(n.nanos,r.nanos)}function h0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=hl(n[s],r[s]);if(i)return i}return Fe(n.length,r.length)}function fl(t){return bm(t)}function bm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Xi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Jo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return fe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=bm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${bm(n.fields[o])}`;return s+"}"}(t.mapValue):ve()}function Jh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tm(t){return!!t&&"integerValue"in t}function iv(t){return!!t&&"arrayValue"in t}function f0(t){return!!t&&"nullValue"in t}function p0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hh(t){return!!t&&"mapValue"in t}function xO(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Lc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rl(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Lc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Lc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function kO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(e){this.value=e}static empty(){return new wr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Lc(n)}setAll(e){let n=Jt.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Lc(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());hh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];hh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Rl(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new wr(Lc(this.value))}}function yS(t){const e=[];return Rl(t.fields,(n,r)=>{const s=new Jt([n]);if(hh(r)){const i=yS(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Kr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new un(e,0,Ee.min(),Ee.min(),Ee.min(),wr.empty(),0)}static newFoundDocument(e,n,r,s){return new un(e,1,n,Ee.min(),r,s,0)}static newNoDocument(e,n){return new un(e,2,n,Ee.min(),Ee.min(),wr.empty(),0)}static newUnknownDocument(e,n){return new un(e,3,n,Ee.min(),Ee.min(),wr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n){this.position=e,this.inclusive=n}}function g0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=fe.comparator(fe.fromName(o.referenceValue),n.key):r=hl(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function m0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Is(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e,n="asc"){this.field=e,this.dir=n}}function CO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{}class Pt extends wS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new PO(e,n,r):n==="array-contains"?new OO(e,r):n==="in"?new DO(e,r):n==="not-in"?new LO(e,r):n==="array-contains-any"?new MO(e,r):new Pt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jO(e,r):new NO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hl(n,this.value)):n!==null&&Yo(this.value)===Yo(n)&&this.matchesComparison(hl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zr extends wS{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zr(e,n)}matches(e){return ES(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ES(t){return t.op==="and"}function bS(t){return RO(t)&&ES(t)}function RO(t){for(const e of t.filters)if(e instanceof Zr)return!1;return!0}function Im(t){if(t instanceof Pt)return t.field.canonicalString()+t.op.toString()+fl(t.value);if(bS(t))return t.filters.map(e=>Im(e)).join(",");{const e=t.filters.map(n=>Im(n)).join(",");return`${t.op}(${e})`}}function TS(t,e){return t instanceof Pt?function(r,s){return s instanceof Pt&&r.op===s.op&&r.field.isEqual(s.field)&&Is(r.value,s.value)}(t,e):t instanceof Zr?function(r,s){return s instanceof Zr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&TS(o,s.filters[a]),!0):!1}(t,e):void ve()}function IS(t){return t instanceof Pt?function(n){return`${n.field.canonicalString()} ${n.op} ${fl(n.value)}`}(t):t instanceof Zr?function(n){return n.op.toString()+" {"+n.getFilters().map(IS).join(" ,")+"}"}(t):"Filter"}class PO extends Pt{constructor(e,n,r){super(e,n,r),this.key=fe.fromName(r.referenceValue)}matches(e){const n=fe.comparator(e.key,this.key);return this.matchesComparison(n)}}class jO extends Pt{constructor(e,n){super(e,"in",n),this.keys=SS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class NO extends Pt{constructor(e,n){super(e,"not-in",n),this.keys=SS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>fe.fromName(r.referenceValue))}class OO extends Pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return iv(n)&&mu(n.arrayValue,this.value)}}class DO extends Pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&mu(this.value.arrayValue,n)}}class LO extends Pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!mu(this.value.arrayValue,n)}}class MO extends Pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!iv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function _0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new VO(t,e,n,r,s,i,o)}function ov(t){const e=ye(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Im(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fl(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fl(r)).join(",")),e.ue=n}return e.ue}function av(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!TS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m0(t.startAt,e.startAt)&&m0(t.endAt,e.endAt)}function Sm(t){return fe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FO(t,e,n,r,s,i,o,a){return new ca(t,e,n,r,s,i,o,a)}function lv(t){return new ca(t)}function v0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cv(t){return t.collectionGroup!==null}function tl(t){const e=ye(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Xt(Jt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new _u(i,r))}),n.has(Jt.keyField().canonicalString())||e.ce.push(new _u(Jt.keyField(),r))}return e.ce}function ys(t){const e=ye(t);return e.le||(e.le=AS(e,tl(t))),e.le}function $O(t){const e=ye(t);return e.he||(e.he=AS(e,t.explicitOrderBy)),e.he}function AS(t,e){if(t.limitType==="F")return _0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new _u(s.field,i)});const n=t.endAt?new pl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pl(t.startAt.position,t.startAt.inclusive):null;return _0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Am(t,e){const n=t.filters.concat([e]);return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yh(t,e,n){return new ca(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Df(t,e){return av(ys(t),ys(e))&&t.limitType===e.limitType}function xS(t){return`${ov(ys(t))}|lt:${t.limitType}`}function ka(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>IS(s)).join(", ")}]`),Nf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>fl(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>fl(s)).join(",")),`Target(${r})`}(ys(t))}; limitType=${t.limitType})`}function Lf(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):fe.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of tl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const u=g0(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,tl(r),s)||r.endAt&&!function(o,a,l){const u=g0(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,tl(r),s))}(t,e)}function UO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kS(t){return(e,n)=>{let r=!1;for(const s of tl(t)){const i=BO(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function BO(t,e,n){const r=t.field.isKeyField()?fe.comparator(e.key,n.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?hl(l,u):ve()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rl(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return _S(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new Et(fe.comparator);function ti(){return zO}const CS=new Et(fe.comparator);function Ec(...t){let e=CS;for(const n of t)e=e.insert(n.key,n);return e}function RS(t){let e=CS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Oo(){return Mc()}function PS(){return Mc()}function Mc(){return new Pl(t=>t.toString(),(t,e)=>t.isEqual(e))}const qO=new Et(fe.comparator),HO=new Xt(fe.comparator);function Pe(...t){let e=HO;for(const n of t)e=e.add(n);return e}const WO=new Xt(Fe);function KO(){return WO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Qh(e)?"-0":e}}function jS(t){return{integerValue:""+t}}function GO(t,e){return TO(e)?jS(e):uv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this._=void 0}}function QO(t,e,n){return t instanceof Xh?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Of(i)&&(i=sv(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof vu?OS(t,e):t instanceof yu?DS(t,e):function(s,i){const o=NS(s,i),a=y0(o)+y0(s.Pe);return Tm(o)&&Tm(s.Pe)?jS(a):uv(s.serializer,a)}(t,e)}function JO(t,e,n){return t instanceof vu?OS(t,e):t instanceof yu?DS(t,e):n}function NS(t,e){return t instanceof Zh?function(r){return Tm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Xh extends Mf{}class vu extends Mf{constructor(e){super(),this.elements=e}}function OS(t,e){const n=LS(e);for(const r of t.elements)n.some(s=>Is(s,r))||n.push(r);return{arrayValue:{values:n}}}class yu extends Mf{constructor(e){super(),this.elements=e}}function DS(t,e){let n=LS(e);for(const r of t.elements)n=n.filter(s=>!Is(s,r));return{arrayValue:{values:n}}}class Zh extends Mf{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function y0(t){return St(t.integerValue||t.doubleValue)}function LS(t){return iv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function YO(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof vu&&s instanceof vu||r instanceof yu&&s instanceof yu?dl(r.elements,s.elements,Is):r instanceof Zh&&s instanceof Zh?Is(r.Pe,s.Pe):r instanceof Xh&&s instanceof Xh}(t.transform,e.transform)}class XO{constructor(e,n){this.version=e,this.transformResults=n}}class ws{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ws}static exists(e){return new ws(void 0,e)}static updateTime(e){return new ws(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vf{}function MS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new FS(t.key,ws.none()):new Lu(t.key,t.data,ws.none());{const n=t.data,r=wr.empty();let s=new Xt(Jt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ua(t.key,r,new Kr(s.toArray()),ws.none())}}function ZO(t,e,n){t instanceof Lu?function(s,i,o){const a=s.value.clone(),l=E0(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ua?function(s,i,o){if(!fh(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=E0(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(VS(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Vc(t,e,n,r){return t instanceof Lu?function(i,o,a,l){if(!fh(i.precondition,o))return a;const u=i.value.clone(),d=b0(i.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ua?function(i,o,a,l){if(!fh(i.precondition,o))return a;const u=b0(i.fieldTransforms,l,o),d=o.data;return d.setAll(VS(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,a){return fh(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function eD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=NS(r.transform,s||null);i!=null&&(n===null&&(n=wr.empty()),n.set(r.field,i))}return n||null}function w0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&dl(r,s,(i,o)=>YO(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Lu extends Vf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ua extends Vf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function VS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function E0(t,e,n){const r=new Map;Qe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,JO(o,a,n[s]))}return r}function b0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,QO(i,o,e))}return r}class FS extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tD extends Vf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ZO(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Vc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=PS();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=MS(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&dl(this.mutations,e.mutations,(n,r)=>w0(n,r))&&dl(this.baseMutations,e.baseMutations,(n,r)=>w0(n,r))}}class dv{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Qe(e.mutations.length===r.length);let s=function(){return qO}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new dv(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,Le;function oD(t){switch(t){default:return ve();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function $S(t){if(t===void 0)return ei("GRPC error has no .code"),K.UNKNOWN;switch(t){case kt.OK:return K.OK;case kt.CANCELLED:return K.CANCELLED;case kt.UNKNOWN:return K.UNKNOWN;case kt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case kt.INTERNAL:return K.INTERNAL;case kt.UNAVAILABLE:return K.UNAVAILABLE;case kt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case kt.NOT_FOUND:return K.NOT_FOUND;case kt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case kt.ABORTED:return K.ABORTED;case kt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case kt.DATA_LOSS:return K.DATA_LOSS;default:return ve()}}(Le=kt||(kt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new $o([4294967295,4294967295],0);function T0(t){const e=aD().encode(t),n=new lS;return n.update(e),new Uint8Array(n.digest())}function I0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new $o([n,r],0),new $o([s,i],0)]}class hv{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new bc(`Invalid padding: ${n}`);if(r<0)throw new bc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new bc(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new bc(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=$o.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply($o.fromNumber(r)));return s.compare(lD)===1&&(s=new $o([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=T0(e),[r,s]=I0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hv(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=T0(e),[r,s]=I0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ff(Ee.min(),s,new Et(Fe),ti(),Pe())}}class Mu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Mu(r,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class US{constructor(e,n){this.targetId=e,this.me=n}}class BS{constructor(e,n,r=en.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class S0{constructor(){this.fe=0,this.ge=x0(),this.pe=en.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),r=Pe();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ve()}}),new Mu(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=x0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class cD{constructor(e){this.Le=e,this.Be=new Map,this.ke=ti(),this.qe=A0(),this.Qe=new Et(Fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Sm(i))if(r===0){const o=new fe(i.path);this.Ue(n,o,un.newNoDocument(o,Ee.min()))}else Qe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Jo(r).toUint8Array()}catch(l){if(l instanceof vS)return ul("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new hv(o,s,i)}catch(l){return ul(l instanceof bc?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Sm(a.target)){const l=new fe(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,un.newNoDocument(l,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=Pe();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ff(e,n,this.Qe,this.ke,r);return this.ke=ti(),this.qe=A0(),this.Qe=new Et(Fe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new S0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Xt(Fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new S0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function A0(){return new Et(fe.comparator)}function x0(){return new Et(fe.comparator)}const uD={asc:"ASCENDING",desc:"DESCENDING"},dD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hD={and:"AND",or:"OR"};class fD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function xm(t,e){return t.useProto3Json||Nf(e)?e:{value:e}}function ef(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pD(t,e){return ef(t,e.toTimestamp())}function Es(t){return Qe(!!t),Ee.fromTimestamp(function(n){const r=Xi(n);return new Vt(r.seconds,r.nanos)}(t))}function fv(t,e){return km(t,e).canonicalString()}function km(t,e){const n=function(s){return new st(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qS(t){const e=st.fromString(t);return Qe(JS(e)),e}function Cm(t,e){return fv(t.databaseId,e.path)}function ng(t,e){const n=qS(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new fe(WS(n))}function HS(t,e){return fv(t.databaseId,e)}function gD(t){const e=qS(t);return e.length===4?st.emptyPath():WS(e)}function Rm(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WS(t){return Qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function k0(t,e,n){return{name:Cm(t,e),fields:n.value.mapValue.fields}}function mD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(Qe(d===void 0||typeof d=="string"),en.fromBase64String(d||"")):(Qe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),en.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const d=u.code===void 0?K.UNKNOWN:$S(u.code);return new ne(d,u.message||"")}(o);n=new BS(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ng(t,r.document.name),i=Es(r.document.updateTime),o=r.document.createTime?Es(r.document.createTime):Ee.min(),a=new wr({mapValue:{fields:r.document.fields}}),l=un.newFoundDocument(s,i,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new ph(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ng(t,r.document),i=r.readTime?Es(r.readTime):Ee.min(),o=un.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ph([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ng(t,r.document),i=r.removedTargetIds||[];n=new ph([],i,s,null)}else{if(!("filter"in e))return ve();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new iD(s,i),a=r.targetId;n=new US(a,o)}}return n}function _D(t,e){let n;if(e instanceof Lu)n={update:k0(t,e.key,e.value)};else if(e instanceof FS)n={delete:Cm(t,e.key)};else if(e instanceof ua)n={update:k0(t,e.key,e.data),updateMask:AD(e.fieldMask)};else{if(!(e instanceof tD))return ve();n={verify:Cm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Xh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Zh)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ve()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:pD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ve()}(t,e.precondition)),n}function vD(t,e){return t&&t.length>0?(Qe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Es(s.updateTime):Es(i);return o.isEqual(Ee.min())&&(o=Es(i)),new XO(o,s.transformResults||[])}(n,e))):[]}function yD(t,e){return{documents:[HS(t,e.path)]}}function KS(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HS(t,s);const i=function(u){if(u.length!==0)return QS(Zr.create(u,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Ni(m.field),direction:TD(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=xm(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:s}}function wD(t,e,n,r){const{_t:s,parent:i}=KS(t,e),o={},a=[];let l=0;return n.forEach(u=>{const d="aggregate_"+l++;o[d]=u.alias,u.aggregateType==="count"?a.push({alias:d,count:{}}):u.aggregateType==="avg"?a.push({alias:d,avg:{field:Ni(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:d,sum:{field:Ni(u.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ut:o,parent:i}}function ED(t){let e=gD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Qe(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=GS(p);return m instanceof Zr&&bS(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(I){return new _u(Ca(I.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Nf(m)?null:m}(n.limit));let l=null;n.startAt&&(l=function(p){const m=!!p.before,y=p.values||[];return new pl(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,y=p.values||[];return new pl(y,m)}(n.endAt)),FO(e,s,o,i,a,"F",l,u)}function bD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ca(n.unaryFilter.field);return Pt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ca(n.unaryFilter.field);return Pt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ca(n.unaryFilter.field);return Pt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ca(n.unaryFilter.field);return Pt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(t):t.fieldFilter!==void 0?function(n){return Pt.create(Ca(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Zr.create(n.compositeFilter.filters.map(r=>GS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(t):ve()}function TD(t){return uD[t]}function ID(t){return dD[t]}function SD(t){return hD[t]}function Ni(t){return{fieldPath:t.canonicalString()}}function Ca(t){return Jt.fromServerFormat(t.fieldPath)}function QS(t){return t instanceof Pt?function(n){if(n.op==="=="){if(p0(n.value))return{unaryFilter:{field:Ni(n.field),op:"IS_NAN"}};if(f0(n.value))return{unaryFilter:{field:Ni(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p0(n.value))return{unaryFilter:{field:Ni(n.field),op:"IS_NOT_NAN"}};if(f0(n.value))return{unaryFilter:{field:Ni(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ni(n.field),op:ID(n.op),value:n.value}}}(t):t instanceof Zr?function(n){const r=n.getFilters().map(s=>QS(s));return r.length===1?r[0]:{compositeFilter:{op:SD(n.op),filters:r}}}(t):ve()}function AD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,r,s,i=Ee.min(),o=Ee.min(),a=en.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.ct=e}}function kD(t){const e=ED({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(){this.un=new RD}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Yi.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class RD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Xt(st.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Xt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new gl(0)}static kn(){return new gl(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(){this.changes=new Pl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Vc(r.mutation,s,Kr.empty(),Vt.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pe()){const s=Oo();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ec();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Oo();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ti();const o=Mc(),a=function(){return Mc()}();return n.forEach((l,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof ua)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Vc(d.mutation,u,d.mutation.getFieldMask(),Vt.now())):o.set(u.key,Kr.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,d)=>o.set(u,d)),n.forEach((u,d)=>{var p;return a.set(u,new jD(d,(p=o.get(u))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Mc();let s=new Et((o,a)=>o-a),i=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||Kr.empty();d=a.applyToLocalView(u,d),r.set(l,d);const p=(s.get(a.batchId)||Pe()).add(l);s=s.insert(a.batchId,p)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,p=PS();d.forEach(m=>{if(!i.has(m)){const y=MS(n.get(m),r.get(m));y!==null&&p.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return fe.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cv(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):Q.resolve(Oo());let a=-1,l=i;return o.next(u=>Q.forEach(u,(d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),i.get(d)?Q.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{l=l.insert(d,m)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Pe())).next(d=>({batchId:a,changes:RS(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new fe(n)).next(r=>{let s=Ec();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ec();return this.indexManager.getCollectionParents(e,i).next(a=>Q.forEach(a,l=>{const u=function(p,m){return new ca(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,un.newInvalidDocument(d)))});let a=Ec();return o.forEach((l,u)=>{const d=i.get(l);d!==void 0&&Vc(d.mutation,u,Kr.empty(),Vt.now()),Lf(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Es(s.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:kD(s.bundledQuery),readTime:Es(s.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.overlays=new Et(fe.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Oo();return Q.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const s=Oo(),i=n.length+1,o=new fe(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return Q.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Et((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Oo(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Oo(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=s)););return Q.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rD(n,r));let i=this.Ir.get(n);i===void 0&&(i=Pe(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.sessionToken=en.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.Tr=new Xt(Bt.Er),this.dr=new Xt(Bt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Bt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Bt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new fe(new st([])),r=new Bt(n,e),s=new Bt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new fe(new st([])),r=new Bt(n,e),s=new Bt(n,e+1);let i=Pe();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Bt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Bt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return fe.comparator(e.key,n.key)||Fe(e.wr,n.wr)}static Ar(e,n){return Fe(e.wr,n.wr)||fe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Xt(Bt.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Bt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return Q.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Bt(n,0),s=new Bt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),Q.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Xt(Fe);return n.forEach(s=>{const i=new Bt(s,0),o=new Bt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),Q.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;fe.isDocumentKey(i)||(i=i.child(""));const o=new Bt(new fe(i),0);let a=new Xt(Fe);return this.br.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.wr)),!0)},o),Q.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Qe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Q.forEach(n.mutations,s=>{const i=new Bt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Bt(n,0),s=this.br.firstAfterOrEqual(r);return Q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.Mr=e,this.docs=function(){return new Et(fe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():un.newInvalidDocument(n))}getEntries(e,n){let r=ti();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():un.newInvalidDocument(s))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ti();const o=n.path,a=new fe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||yO(vO(d),r)<=0||(s.has(d.key)||Lf(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return Q.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ve()}Or(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new FD(this)}getSize(e){return Q.resolve(this.size)}}class FD extends PD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.persistence=e,this.Nr=new Pl(n=>ov(n),av),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pv,this.targetCount=0,this.kr=gl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new gl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Q.waitFor(i).next(()=>s)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Q.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rv(0),this.Kr=!1,this.Kr=!0,this.$r=new LD,this.referenceDelegate=e(this),this.Ur=new $D(this),this.indexManager=new CD,this.remoteDocumentCache=function(s){return new VD(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xD(n),this.Gr=new OD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new MD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const s=new BD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return Q.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class BD extends EO{constructor(e){super(),this.currentSequenceNumber=e}}class gv{constructor(e){this.persistence=e,this.Jr=new pv,this.Yr=null}static Zr(e){return new gv(e)}get Xr(){if(this.Yr)return this.Yr;throw ve()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,r=>{const s=fe.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=Pe(),s=Pe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new mv(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return RR()?8:bO(hn())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new zD;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(cc()<=Oe.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",ka(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(cc()<=Oe.DEBUG&&le("QueryEngine","Query:",ka(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(cc()<=Oe.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",ka(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ys(n))):Q.resolve())}Yi(e,n){if(v0(n))return Q.resolve(null);let r=ys(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Yh(n,null,"F"),r=ys(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Pe(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Yh(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,r,s){return v0(n)||s.isEqual(Ee.min())?Q.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?Q.resolve(null):(cc()<=Oe.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ka(n)),this.rs(e,o,n,_O(s,-1)).next(a=>a))})}ts(e,n){let r=new Xt(kS(e));return n.forEach((s,i)=>{Lf(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return cc()<=Oe.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",ka(n)),this.Ji.getDocumentsMatchingQuery(e,n,Yi.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Et(Fe),this._s=new Pl(i=>ov(i),av),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ND(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function WD(t,e,n,r){return new HD(t,e,n,r)}async function YS(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Pe();for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of i){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function KD(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const p=u.batch,m=p.keys();let y=Q.resolve();return m.forEach(I=>{y=y.next(()=>d.getEntry(l,I)).next(A=>{const j=u.docVersions.get(I);Qe(j!==null),A.version.compareTo(j)<0&&(p.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),d.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Pe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function XS(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function GD(t,e){const n=ye(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,p)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(en.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(p,y),function(A,j,x){return A.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,y,d)&&a.push(n.Ur.updateTargetData(i,y))});let l=ti(),u=Pe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(QD(i,o,e.documentUpdates).next(d=>{l=d.Ps,u=d.Is})),!r.isEqual(Ee.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return Q.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.os=s,i))}function QD(t,e,n){let r=Pe(),s=Pe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ti();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ee.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):le("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function JD(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function YD(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,Q.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Mi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Pm(t,e,n){const r=ye(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Du(o))throw o;le("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function C0(t,e,n){const r=ye(t);let s=Ee.min(),i=Pe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,d){const p=ye(l),m=p._s.get(d);return m!==void 0?Q.resolve(p.os.get(m)):p.Ur.getTargetData(u,d)}(r,o,ys(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Ee.min(),n?i:Pe())).next(a=>(XD(r,UO(e),a),{documents:a,Ts:i})))}function XD(t,e,n){let r=t.us.get(e)||Ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class R0{constructor(){this.activeTargetIds=KO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ZD{constructor(){this.so=new R0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new R0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){le("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){le("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $d=null;function rg(){return $d===null?$d=function(){return 268435456+Math.round(2147483648*Math.random())}():$d++,"0x"+$d.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class rL extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=rg(),l=this.xo(n,r.toUriEncodedString());le("RestConnection",`Sending RPC '${n}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(n,l,u,s).then(d=>(le("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ul("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",l,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Cl}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=tL[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=rg();return new Promise((o,a)=>{const l=new cS;l.setWithCredentials(!0),l.listenOnce(dS.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case dh.NO_ERROR:const d=l.getResponseJson();le(on,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case dh.TIMEOUT:le(on,`RPC '${e}' ${i} timed out`),a(new ne(K.DEADLINE_EXCEEDED,"Request time out"));break;case dh.HTTP_ERROR:const p=l.getStatus();if(le(on,`RPC '${e}' ${i} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const I=function(j){const x=j.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(x)>=0?x:K.UNKNOWN}(y.status);a(new ne(I,y.message))}else a(new ne(K.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new ne(K.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{le(on,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);le(on,`RPC '${e}' ${i} sending request:`,s),l.send(n,"POST",u,r,15)})}Bo(e,n,r){const s=rg(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pS(),a=fS(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new uS({})),this.Oo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");le(on,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=o.createWebChannel(d,l);let m=!1,y=!1;const I=new nL({Io:j=>{y?le(on,`Not sending because RPC '${e}' stream ${s} is closed:`,j):(m||(le(on,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),le(on,`RPC '${e}' stream ${s} sending:`,j),p.send(j))},To:()=>p.close()}),A=(j,x,E)=>{j.listen(x,T=>{try{E(T)}catch(O){setTimeout(()=>{throw O},0)}})};return A(p,wc.EventType.OPEN,()=>{y||(le(on,`RPC '${e}' stream ${s} transport opened.`),I.yo())}),A(p,wc.EventType.CLOSE,()=>{y||(y=!0,le(on,`RPC '${e}' stream ${s} transport closed`),I.So())}),A(p,wc.EventType.ERROR,j=>{y||(y=!0,ul(on,`RPC '${e}' stream ${s} transport errored:`,j),I.So(new ne(K.UNAVAILABLE,"The operation could not be completed")))}),A(p,wc.EventType.MESSAGE,j=>{var x;if(!y){const E=j.data[0];Qe(!!E);const T=E,O=T.error||((x=T[0])===null||x===void 0?void 0:x.error);if(O){le(on,`RPC '${e}' stream ${s} received error:`,O);const B=O.status;let R=function(S){const C=kt[S];if(C!==void 0)return $S(C)}(B),k=O.message;R===void 0&&(R=K.INTERNAL,k="Unknown error status: "+B+" with message "+O.message),y=!0,I.So(new ne(R,k)),p.close()}else le(on,`RPC '${e}' stream ${s} received:`,E),I.bo(E)}}),A(a,hS.STAT_EVENT,j=>{j.stat===Em.PROXY?le(on,`RPC '${e}' stream ${s} detected buffering proxy`):j.stat===Em.NOPROXY&&le(on,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function sg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t){return new fD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&le("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e,n,r,s,i,o,a,l){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ZS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(ei(n.toString()),ei("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new ne(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return le("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(le("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class sL extends eA{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=mD(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ee.min():o.readTime?Es(o.readTime):Ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Rm(this.serializer),n.addTarget=function(i,o){let a;const l=o.target;if(a=Sm(l)?{documents:yD(i,l)}:{query:KS(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zS(i,o.resumeToken);const u=xm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ee.min())>0){a.readTime=ef(i,o.snapshotVersion.toTimestamp());const u=xm(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=bD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Rm(this.serializer),n.removeTarget=e,this.a_(n)}}class iL extends eA{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=vD(e.writeResults,e.commitTime),r=Es(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Rm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>_D(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,km(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ne(K.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,km(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(K.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ei(n),this.D_=!1):le("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{da(this)&&(le("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ye(l);u.L_.add(4),await Vu(u),u.q_.set("Unknown"),u.L_.delete(4),await Uf(u)}(this))})}),this.q_=new aL(r,s)}}async function Uf(t){if(da(t))for(const e of t.B_)await e(!0)}async function Vu(t){for(const e of t.B_)await e(!1)}function tA(t,e){const n=ye(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wv(n)?yv(n):jl(n).r_()&&vv(n,e))}function _v(t,e){const n=ye(t),r=jl(n);n.N_.delete(e),r.r_()&&nA(n,e),n.N_.size===0&&(r.r_()?r.o_():da(n)&&n.q_.set("Unknown"))}function vv(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}jl(t).A_(e)}function nA(t,e){t.Q_.xe(e),jl(t).R_(e)}function yv(t){t.Q_=new cD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),jl(t).start(),t.q_.v_()}function wv(t){return da(t)&&!jl(t).n_()&&t.N_.size>0}function da(t){return ye(t).L_.size===0}function rA(t){t.Q_=void 0}async function cL(t){t.q_.set("Online")}async function uL(t){t.N_.forEach((e,n)=>{vv(t,e)})}async function dL(t,e){rA(t),wv(t)?(t.q_.M_(e),yv(t)):t.q_.set("Unknown")}async function hL(t,e,n){if(t.q_.set("Online"),e instanceof BS&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){le("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tf(t,r)}else if(e instanceof ph?t.Q_.Ke(e):e instanceof US?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Ee.min()))try{const r=await XS(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=i.N_.get(u);d&&i.N_.set(u,d.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const d=i.N_.get(l);if(!d)return;i.N_.set(l,d.withResumeToken(en.EMPTY_BYTE_STRING,d.snapshotVersion)),nA(i,l);const p=new Mi(d.target,l,u,d.sequenceNumber);vv(i,p)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){le("RemoteStore","Failed to raise snapshot:",r),await tf(t,r)}}async function tf(t,e,n){if(!Du(e))throw e;t.L_.add(1),await Vu(t),t.q_.set("Offline"),n||(n=()=>XS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Uf(t)})}function sA(t,e){return e().catch(n=>tf(t,n,e))}async function Bf(t){const e=ye(t),n=Zi(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fL(e);)try{const s=await JD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,pL(e,s)}catch(s){await tf(e,s)}iA(e)&&oA(e)}function fL(t){return da(t)&&t.O_.length<10}function pL(t,e){t.O_.push(e);const n=Zi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function iA(t){return da(t)&&!Zi(t).n_()&&t.O_.length>0}function oA(t){Zi(t).start()}async function gL(t){Zi(t).p_()}async function mL(t){const e=Zi(t);for(const n of t.O_)e.m_(n.mutations)}async function _L(t,e,n){const r=t.O_.shift(),s=dv.from(r,e,n);await sA(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bf(t)}async function vL(t,e){e&&Zi(t).V_&&await async function(r,s){if(function(o){return oD(o)&&o!==K.ABORTED}(s.code)){const i=r.O_.shift();Zi(r).s_(),await sA(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bf(r)}}(t,e),iA(t)&&oA(t)}async function j0(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),le("RemoteStore","RemoteStore received new credentials");const r=da(n);n.L_.add(3),await Vu(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Uf(n)}async function yL(t,e){const n=ye(t);e?(n.L_.delete(2),await Uf(n)):e||(n.L_.add(2),await Vu(n),n.q_.set("Unknown"))}function jl(t){return t.K_||(t.K_=function(n,r,s){const i=ye(n);return i.w_(),new sL(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:cL.bind(null,t),Ro:uL.bind(null,t),mo:dL.bind(null,t),d_:hL.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wv(t)?yv(t):t.q_.set("Unknown")):(await t.K_.stop(),rA(t))})),t.K_}function Zi(t){return t.U_||(t.U_=function(n,r,s){const i=ye(n);return i.w_(),new iL(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:gL.bind(null,t),mo:vL.bind(null,t),f_:mL.bind(null,t),g_:_L.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Bf(t)):(await t.U_.stop(),t.O_.length>0&&(le("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Ev(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bv(t,e){if(ei("AsyncQueue",`${e}: ${t}`),Du(t))return new ne(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||fe.comparator(n.key,r.key):(n,r)=>fe.comparator(n.key,r.key),this.keyedMap=Ec(),this.sortedSet=new Et(this.comparator)}static emptySet(e){return new nl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof nl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new nl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this.W_=new Et(fe.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ve():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ml{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new ml(e,n,nl.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Df(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class EL{constructor(){this.queries=O0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ye(n),i=s.queries;s.queries=O0(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(r)})})(this,new ne(K.ABORTED,"Firestore shutting down"))}}function O0(){return new Pl(t=>xS(t),Df)}async function aA(t,e){const n=ye(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new wL,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=bv(o,`Initialization of query '${ka(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Tv(n)}async function lA(t,e){const n=ye(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function bL(t,e){const n=ye(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Tv(n)}function TL(t,e,n){const r=ye(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Tv(t){t.Y_.forEach(e=>{e.next()})}var jm,D0;(D0=jm||(jm={})).ea="default",D0.Cache="cache";class cA{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e){this.key=e}}class dA{constructor(e){this.key=e}}class IL{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=kS(e),this.Ra=new nl(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new N0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,p)=>{const m=s.get(d),y=Lf(this.query,p)?p:null,I=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let j=!1;m&&y?m.data.isEqual(y.data)?I!==A&&(r.track({type:3,doc:y}),j=!0):this.ga(m,y)||(r.track({type:2,doc:y}),j=!0,(l&&this.Aa(y,l)>0||u&&this.Aa(y,u)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),j=!0):m&&!y&&(r.track({type:1,doc:m}),j=!0,(l||u)&&(a=!0)),j&&(y?(o=o.add(y),i=A?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,p)=>function(y,I){const A=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return A(y)-A(I)}(d.type,p.type)||this.Aa(d.doc,p.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new ml(this.query,e.Ra,i,o,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new N0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new dA(r))}),this.da.forEach(r=>{e.has(r)||n.push(new uA(r))}),n}ba(e){this.Ta=e.Ts,this.da=Pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ml.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class SL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class AL{constructor(e){this.key=e,this.va=!1}}class xL{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Pl(a=>xS(a),Df),this.Ma=new Map,this.xa=new Set,this.Oa=new Et(fe.comparator),this.Na=new Map,this.La=new pv,this.Ba={},this.ka=new Map,this.qa=gl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function kL(t,e,n=!0){const r=_A(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await hA(r,e,n,!0),s}async function CL(t,e){const n=_A(t);await hA(n,e,!0,!1)}async function hA(t,e,n,r){const s=await YD(t.localStore,ys(e)),i=s.targetId,o=n?t.sharedClientState.addLocalQueryTarget(i):"not-current";let a;return r&&(a=await RL(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&tA(t.remoteStore,s),a}async function RL(t,e,n,r,s){t.Ka=(p,m,y)=>async function(A,j,x,E){let T=j.view.ma(x);T.ns&&(T=await C0(A.localStore,j.query,!1).then(({documents:k})=>j.view.ma(k,T)));const O=E&&E.targetChanges.get(j.targetId),B=E&&E.targetMismatches.get(j.targetId)!=null,R=j.view.applyChanges(T,A.isPrimaryClient,O,B);return M0(A,j.targetId,R.wa),R.snapshot}(t,p,m,y);const i=await C0(t.localStore,e,!0),o=new IL(e,i.Ts),a=o.ma(i.documents),l=Mu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);M0(t,n,u.wa);const d=new SL(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function PL(t,e,n){const r=ye(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Df(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Pm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_v(r.remoteStore,s.targetId),Nm(r,s.targetId)}).catch(Ou)):(Nm(r,s.targetId),await Pm(r.localStore,s.targetId,!0))}async function jL(t,e){const n=ye(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_v(n.remoteStore,r.targetId))}async function NL(t,e,n){const r=$L(t);try{const s=await function(o,a){const l=ye(o),u=Vt.now(),d=a.reduce((y,I)=>y.add(I.key),Pe());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=ti(),A=Pe();return l.cs.getEntries(y,d).next(j=>{I=j,I.forEach((x,E)=>{E.isValidDocument()||(A=A.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(y,I)).next(j=>{p=j;const x=[];for(const E of a){const T=eD(E,p.get(E.key).overlayedDocument);T!=null&&x.push(new ua(E.key,T,yS(T.value.mapValue),ws.exists(!0)))}return l.mutationQueue.addMutationBatch(y,u,x,a)}).next(j=>{m=j;const x=j.applyToLocalDocumentSet(p,A);return l.documentOverlayCache.saveOverlays(y,j.batchId,x)})}).then(()=>({batchId:m.batchId,changes:RS(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Et(Fe)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(r,s.batchId,n),await Fu(r,s.changes),await Bf(r.remoteStore)}catch(s){const i=bv(s,"Failed to persist write");n.reject(i)}}async function fA(t,e){const n=ye(t);try{const r=await GD(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Qe(o.va):s.removedDocuments.size>0&&(Qe(o.va),o.va=!1))}),await Fu(n,r,e)}catch(r){await Ou(r)}}function L0(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=ye(o);l.onlineState=a;let u=!1;l.queries.forEach((d,p)=>{for(const m of p.j_)m.Z_(a)&&(u=!0)}),u&&Tv(l)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function OL(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Et(fe.comparator);o=o.insert(i,un.newNoDocument(i,Ee.min()));const a=Pe().add(i),l=new Ff(Ee.min(),new Map,new Et(Fe),o,a);await fA(r,l),r.Oa=r.Oa.remove(i),r.Na.delete(e),Iv(r)}else await Pm(r.localStore,e,!1).then(()=>Nm(r,e,n)).catch(Ou)}async function DL(t,e){const n=ye(t),r=e.batch.batchId;try{const s=await KD(n.localStore,e);gA(n,r,null),pA(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fu(n,s)}catch(s){await Ou(s)}}async function LL(t,e,n){const r=ye(t);try{const s=await function(o,a){const l=ye(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(p=>(Qe(p!==null),d=p.keys(),l.mutationQueue.removeMutationBatch(u,p))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);gA(r,e,n),pA(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fu(r,s)}catch(s){await Ou(s)}}function pA(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function gA(t,e,n){const r=ye(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Nm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||mA(t,r)})}function mA(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_v(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Iv(t))}function M0(t,e,n){for(const r of n)r instanceof uA?(t.La.addReference(r.key,e),ML(t,r)):r instanceof dA?(le("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||mA(t,r.key)):ve()}function ML(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(le("SyncEngine","New document in limbo: "+n),t.xa.add(r),Iv(t))}function Iv(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new fe(st.fromString(e)),r=t.qa.next();t.Na.set(r,new AL(n)),t.Oa=t.Oa.insert(n,r),tA(t.remoteStore,new Mi(ys(lv(n.path)),r,"TargetPurposeLimboResolution",rv.oe))}}async function Fu(t,e,n){const r=ye(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,l)=>{o.push(r.Ka(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){s.push(u);const p=mv.Wi(l.targetId,u);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(l,u){const d=ye(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Q.forEach(u,m=>Q.forEach(m.$i,y=>d.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>Q.forEach(m.Ui,y=>d.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Du(p))throw p;le("LocalStore","Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const y=d.os.get(m),I=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(m,A)}}}(r.localStore,i))}async function VL(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){le("SyncEngine","User change. New user:",e.toKey());const r=await YS(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new ne(K.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fu(n,r.hs)}}function FL(t,e){const n=ye(t),r=n.Na.get(e);if(r&&r.va)return Pe().add(r.key);{let s=Pe();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function _A(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=fA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OL.bind(null,e),e.Ca.d_=bL.bind(null,e.eventManager),e.Ca.$a=TL.bind(null,e.eventManager),e}function $L(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LL.bind(null,e),e}class V0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=$f(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return WD(this.persistence,new qD,e.initialUser,this.serializer)}createPersistence(e){return new UD(gv.Zr,this.serializer)}createSharedClientState(e){return new ZD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class UL{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>L0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VL.bind(null,this.syncEngine),await yL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new EL}()}createDatastore(e){const n=$f(e.databaseInfo.databaseId),r=function(i){return new rL(i)}(e.databaseInfo);return function(i,o,a,l){return new oL(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new lL(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>L0(this.syncEngine,n,0),function(){return P0.D()?new P0:new eL}())}createSyncEngine(e,n){return function(s,i,o,a,l,u,d){const p=new xL(s,i,o,a,l,u);return d&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ye(s);le("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Vu(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):ei("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ln.UNAUTHENTICATED,this.clientId=mS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{le("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(le("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ne(K.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ig(t,e){t.asyncQueue.verifyOperationInProgress(),le("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await YS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function F0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await qL(t);le("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>j0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>j0(e.remoteStore,s)),t._onlineComponents=e}function zL(t){return t.name==="FirebaseError"?t.code===K.FAILED_PRECONDITION||t.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function qL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le("FirestoreClient","Using user provided OfflineComponentProvider");try{await ig(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!zL(n))throw n;ul("Error using user provided cache. Falling back to memory cache: "+n),await ig(t,new V0)}}else le("FirestoreClient","Using default OfflineComponentProvider"),await ig(t,new V0);return t._offlineComponents}async function Sv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le("FirestoreClient","Using user provided OnlineComponentProvider"),await F0(t,t._uninitializedComponentsProvider._online)):(le("FirestoreClient","Using default OnlineComponentProvider"),await F0(t,new UL))),t._onlineComponents}function HL(t){return Sv(t).then(e=>e.syncEngine)}function WL(t){return Sv(t).then(e=>e.datastore)}async function yA(t){const e=await Sv(t),n=e.eventManager;return n.onListen=kL.bind(null,e.syncEngine),n.onUnlisten=PL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=CL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=jL.bind(null,e.syncEngine),n}function KL(t,e,n={}){const r=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const d=new vA({next:m=>{o.enqueueAndForget(()=>lA(i,p));const y=m.docs.has(a);!y&&m.fromCache?u.reject(new ne(K.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&l&&l.source==="server"?u.reject(new ne(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new cA(lv(a.path),d,{includeMetadataChanges:!0,_a:!0});return aA(i,p)}(await yA(t),t.asyncQueue,e,n,r)),r.promise}function GL(t,e,n={}){const r=new vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const d=new vA({next:m=>{o.enqueueAndForget(()=>lA(i,p)),m.fromCache&&l.source==="server"?u.reject(new ne(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new cA(a,d,{includeMetadataChanges:!0,_a:!0});return aA(i,p)}(await yA(t),t.asyncQueue,e,n,r)),r.promise}function QL(t,e,n){const r=new vs;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await WL(t);r.resolve(async function(o,a,l){var u;const d=ye(o),{request:p,ut:m,parent:y}=wD(d.serializer,$O(a),l);d.connection.Fo||delete p.parent;const I=(await d.Lo("RunAggregationQuery",d.serializer.databaseId,y,p,1)).filter(j=>!!j.result);Qe(I.length===1);const A=(u=I[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(A).reduce((j,x)=>(j[m[x]]=A[x],j),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(t,e,n){if(!n)throw new ne(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JL(t,e,n,r){if(e===!0&&r===!0)throw new ne(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U0(t){if(!fe.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function B0(t){if(fe.isDocumentKey(t))throw new ne(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ve()}function ni(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zf(t);throw new ne(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wA((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ne(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ne(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ne(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lO;switch(r.type){case"firstParty":return new hO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ne(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$0.get(n);r&&(le("ComponentProvider","Removing Datastore"),$0.delete(n),r.terminate())}(this),Promise.resolve()}}function YL(t,e,n,r={}){var s;const i=(t=ni(t,qf))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ln.MOCK_USER;else{a=SR(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new ne(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ln(u)}t._authCredentials=new cO(new gS(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new oi(this.firestore,e,this._query)}}class Un{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Un(this.firestore,e,this._key)}}class Gi extends oi{constructor(e,n,r){super(e,n,lv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Un(this.firestore,null,new fe(e))}withConverter(e){return new Gi(this.firestore,e,this._path)}}function $u(t,e,...n){if(t=Ht(t),EA("collection","path",e),t instanceof qf){const r=st.fromString(e,...n);return B0(r),new Gi(t,null,r)}{if(!(t instanceof Un||t instanceof Gi))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return B0(r),new Gi(t.firestore,null,r)}}function es(t,e,...n){if(t=Ht(t),arguments.length===1&&(e=mS.newId()),EA("doc","path",e),t instanceof qf){const r=st.fromString(e,...n);return U0(r),new Un(t,null,new fe(r))}{if(!(t instanceof Un||t instanceof Gi))throw new ne(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return U0(r),new Un(t.firestore,t instanceof Gi?t.converter:null,new fe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new ZS(this,"async_queue_retry"),this.Eu=()=>{const n=sg();n&&le("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()};const e=sg();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;const n=sg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});const n=new vs;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}async Ru(){if(this.uu.length!==0){try{await this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!Du(e))throw e;le("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}}Au(e){const n=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ei("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Pu=!1,r))));return this.au=n,n}enqueueAfterDelay(e,n,r){this.du(),this.Tu.indexOf(e)>-1&&(n=0);const s=Ev.createAndSchedule(this,e,n,r,i=>this.Vu(i));return this.lu.push(s),s}du(){this.hu&&ve()}verifyOperationInProgress(){}async mu(){let e;do e=this.au,await e;while(e!==this.au)}fu(e){for(const n of this.lu)if(n.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.lu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){const n=this.lu.indexOf(e);this.lu.splice(n,1)}}class Nl extends qf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=function(){return new XL}(),this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||bA(this),this._firestoreClient.terminate()}}function ZL(t,e){const n=W_(),r="(default)",s=aa(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=TR("firestore");i&&YL(s,...i)}return s}function Hf(t){return t._firestoreClient||bA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function bA(t){var e,n,r;const s=t._freezeSettings(),i=function(a,l,u,d){return new AO(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,wA(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._firestoreClient=new BL(t._authCredentials,t._appCheckCredentials,t._queue,i),!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class t2{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _l(en.fromBase64String(e))}catch(n){throw new ne(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _l(en.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=/^__.*__$/;class r2{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ua(e,this.data,this.fieldMask,n,this.fieldTransforms):new Lu(e,this.data,n,this.fieldTransforms)}}function IA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class Cv{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.yu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new Cv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.vu(e),s}Cu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Su({path:r,Du:!1});return s.yu(),s}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return nf(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(IA(this.wu)&&n2.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}}class s2{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$f(e)}Nu(e,n,r,s=!1){return new Cv({wu:e,methodName:n,Ou:r,path:Jt.emptyPath(),Du:!1,xu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wf(t){const e=t._freezeSettings(),n=$f(t._databaseId);return new s2(t._databaseId,!!e.ignoreUndefinedProperties,n)}function SA(t,e,n,r,s,i={}){const o=t.Nu(i.merge||i.mergeFields?2:0,e,n,s);CA("Data must be an object, but it was:",o,r);const a=xA(r,o);let l,u;if(i.merge)l=new Kr(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const m=i2(e,p,n);if(!o.contains(m))throw new ne(K.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);a2(d,m)||d.push(m)}l=new Kr(d),u=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,u=o.fieldTransforms;return new r2(new wr(a),l,u)}function AA(t,e,n,r=!1){return Rv(n,t.Nu(r?4:3,e))}function Rv(t,e){if(kA(t=Ht(t)))return CA("Unsupported field value:",e,t),xA(t,e);if(t instanceof TA)return function(r,s){if(!IA(s.wu))throw s.Mu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Mu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=Rv(a,s.Fu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GO(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Vt.fromDate(r);return{timestampValue:ef(s.serializer,i)}}if(r instanceof Vt){const i=new Vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ef(s.serializer,i)}}if(r instanceof xv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof _l)return{bytesValue:zS(s.serializer,r._byteString)};if(r instanceof Un){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Mu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fv(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof kv)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Mu("VectorValues must only contain numeric values.");return uv(a.serializer,l)})}}}}}}(r,s);throw s.Mu(`Unsupported field value: ${zf(r)}`)}(t,e)}function xA(t,e){const n={};return _S(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rl(t,(r,s)=>{const i=Rv(s,e.bu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function kA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Vt||t instanceof xv||t instanceof _l||t instanceof Un||t instanceof TA||t instanceof kv)}function CA(t,e,n){if(!kA(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=zf(n);throw r==="an object"?e.Mu(t+" a custom object"):e.Mu(t+" "+r)}}function i2(t,e,n){if((e=Ht(e))instanceof Av)return e._internalPath;if(typeof e=="string")return RA(t,e);throw nf("Field path arguments must be of type string or ",t,!1,void 0,n)}const o2=new RegExp("[~\\*/\\[\\]]");function RA(t,e,n){if(e.search(o2)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Av(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nf(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new ne(K.INVALID_ARGUMENT,a+t+l)}function a2(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pv{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Un(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new l2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class l2 extends Pv{data(){return super.data()}}function jv(t,e){return typeof e=="string"?RA(t,e):e instanceof Av?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nv{}class Kf extends Nv{}function u2(t,e,...n){let r=[];e instanceof Nv&&r.push(e),r=r.concat(n),function(i){const o=i.filter(l=>l instanceof Dv).length,a=i.filter(l=>l instanceof Ov).length;if(o>1||o>0&&a>0)throw new ne(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ov extends Kf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ov(e,n,r)}_apply(e){const n=this._parse(e);return PA(e._query,n),new oi(e.firestore,e.converter,Am(e._query,n))}_parse(e){const n=Wf(e.firestore);return function(i,o,a,l,u,d,p){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new ne(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){H0(p,d);const y=[];for(const I of p)y.push(q0(l,i,I));m={arrayValue:{values:y}}}else m=q0(l,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||H0(p,d),m=AA(a,o,p,d==="in"||d==="not-in");return Pt.create(u,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Dv extends Nv{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dv(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Zr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)PA(o,l),o=Am(o,l)}(e._query,n),new oi(e.firestore,e.converter,Am(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lv extends Kf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lv(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ne(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _u(i,o)}(e._query,this._field,this._direction);return new oi(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ca(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function d2(t,e="asc"){const n=e,r=jv("orderBy",t);return Lv._create(r,n)}class Mv extends Kf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Mv(e,n,r)}_apply(e){return new oi(e.firestore,e.converter,Yh(e._query,this._limit,this._limitType))}}function h2(t){return Mv._create("limit",t,"F")}class Vv extends Kf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vv(e,n,r)}_apply(e){const n=p2(e,this.type,this._docOrFields,this._inclusive);return new oi(e.firestore,e.converter,function(s,i){return new ca(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function f2(...t){return Vv._create("startAfter",t,!1)}function p2(t,e,n,r){if(n[0]=Ht(n[0]),n[0]instanceof Pv)return function(i,o,a,l,u){if(!l)throw new ne(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const p of tl(i))if(p.field.isKeyField())d.push(Jh(o,l.key));else{const m=l.data.field(p.field);if(Of(m))throw new ne(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const y=p.field.canonicalString();throw new ne(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}d.push(m)}return new pl(d,u)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Wf(t.firestore);return function(o,a,l,u,d,p){const m=o.explicitOrderBy;if(d.length>m.length)throw new ne(K.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let I=0;I<d.length;I++){const A=d[I];if(m[I].field.isKeyField()){if(typeof A!="string")throw new ne(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof A}`);if(!cv(o)&&A.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${A}' contains a slash.`);const j=o.path.child(st.fromString(A));if(!fe.isDocumentKey(j))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${j}' is not because it contains an odd number of segments.`);const x=new fe(j);y.push(Jh(a,x))}else{const j=AA(l,u,A);y.push(j)}}return new pl(y,p)}(t._query,t.firestore._databaseId,s,e,n,r)}}function q0(t,e,n){if(typeof(n=Ht(n))=="string"){if(n==="")throw new ne(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cv(e)&&n.indexOf("/")!==-1)throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(st.fromString(n));if(!fe.isDocumentKey(r))throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Jh(t,new fe(r))}if(n instanceof Un)return Jh(t,n._key);throw new ne(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(n)}.`)}function H0(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PA(t,e){const n=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class g2{convertValue(e,n="none"){switch(Yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Jo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rl(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>St(o.doubleValue));return new kv(i)}convertGeoPoint(e){return new xv(St(e.latitude),St(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(pu(e));default:return null}}convertTimestamp(e){const n=Xi(e);return new Vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);Qe(JS(r));const s=new gu(r.get(1),r.get(3)),i=new fe(r.popFirst(5));return s.isEqual(n)||ei(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(t,e,n){let r;return r=t?t.toFirestore(e):e,r}function m2(){return new e2("count")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class NA extends Pv{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new gh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class gh extends NA{data(e={}){return super.data(e)}}class _2{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Tc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new gh(this._firestore,this._userDataWriter,r.key,r,new Tc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new gh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Tc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new gh(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Tc(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:v2(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function v2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t){t=ni(t,Un);const e=ni(t.firestore,Nl);return KL(Hf(e),t._key).then(n=>w2(e,t,n))}class Fv extends g2{constructor(e){super(),this.firestore=e}convertBytes(e){return new _l(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Un(this.firestore,null,n)}}function OA(t){t=ni(t,oi);const e=ni(t.firestore,Nl),n=Hf(e),r=new Fv(e);return c2(t._query),GL(n,t._query).then(s=>new _2(e,r,t,s))}function y2(t,e,n){t=ni(t,Un);const r=ni(t.firestore,Nl),s=jA(t.converter,e);return DA(r,[SA(Wf(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,ws.none())])}function $v(t,e){const n=ni(t.firestore,Nl),r=es(t),s=jA(t.converter,e);return DA(n,[SA(Wf(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ws.exists(!1))]).then(()=>r)}function DA(t,e){return function(r,s){const i=new vs;return r.asyncQueue.enqueueAndForget(async()=>NL(await HL(r),s,i)),i.promise}(Hf(t),e)}function w2(t,e,n){const r=n.docs.get(e._key),s=new Fv(t);return new NA(t,s,e._key,r,new Tc(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(t){return b2(t,{count:m2()})}function b2(t,e){const n=ni(t.firestore,Nl),r=Hf(n),s=IO(e,(i,o)=>new sD(o,i.aggregateType,i._internalFieldPath));return QL(r,t._query,s).then(i=>function(a,l,u){const d=new Fv(a);return new t2(l,d,u)}(n,t,i))}(function(e,n=!0){(function(s){Cl=s})(xl),Ts(new Yr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Nl(new uO(r.getProvider("auth-internal")),new pO(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ne(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gu(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Tr(l0,"4.7.1",e),Tr(l0,"4.7.1","esm2017")})();const LA="@firebase/installations",Uv="0.6.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=1e4,VA=`w:${Uv}`,FA="FIS_v2",T2="https://firebaseinstallations.googleapis.com/v1",I2=60*60*1e3,S2="installations",A2="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x2={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Xo=new oa(S2,A2,x2);function $A(t){return t instanceof ts&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA({projectId:t}){return`${T2}/projects/${t}/installations`}function BA(t){return{token:t.token,requestStatus:2,expiresIn:C2(t.expiresIn),creationTime:Date.now()}}async function zA(t,e){const r=(await e.json()).error;return Xo.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function qA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function k2(t,{refreshToken:e}){const n=qA(t);return n.append("Authorization",R2(e)),n}async function HA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function C2(t){return Number(t.replace("s","000"))}function R2(t){return`${FA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P2({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=UA(t),s=qA(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:FA,appId:t.appId,sdkVersion:VA},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await HA(()=>fetch(r,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:BA(u.authToken)}}else throw await zA("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2=/^[cdef][\w-]{21}$/,Om="";function O2(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=D2(t);return N2.test(n)?n:Om}catch{return Om}}function D2(t){return j2(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=new Map;function GA(t,e){const n=Gf(t);QA(n,e),L2(n,e)}function QA(t,e){const n=KA.get(t);if(n)for(const r of n)r(e)}function L2(t,e){const n=M2();n&&n.postMessage({key:t,fid:e}),V2()}let Do=null;function M2(){return!Do&&"BroadcastChannel"in self&&(Do=new BroadcastChannel("[Firebase] FID Change"),Do.onmessage=t=>{QA(t.data.key,t.data.fid)}),Do}function V2(){KA.size===0&&Do&&(Do.close(),Do=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2="firebase-installations-database",$2=1,Zo="firebase-installations-store";let og=null;function Bv(){return og||(og=TI(F2,$2,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zo)}}})),og}async function rf(t,e){const n=Gf(t),s=(await Bv()).transaction(Zo,"readwrite"),i=s.objectStore(Zo),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&GA(t,e.fid),e}async function JA(t){const e=Gf(t),r=(await Bv()).transaction(Zo,"readwrite");await r.objectStore(Zo).delete(e),await r.done}async function Qf(t,e){const n=Gf(t),s=(await Bv()).transaction(Zo,"readwrite"),i=s.objectStore(Zo),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&GA(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zv(t){let e;const n=await Qf(t.appConfig,r=>{const s=U2(r),i=B2(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Om?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function U2(t){const e=t||{fid:O2(),registrationStatus:0};return YA(e)}function B2(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Xo.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=z2(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:q2(t)}:{installationEntry:e}}async function z2(t,e){try{const n=await P2(t,e);return rf(t.appConfig,n)}catch(n){throw $A(n)&&n.customData.serverCode===409?await JA(t.appConfig):await rf(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function q2(t){let e=await W0(t.appConfig);for(;e.registrationStatus===1;)await WA(100),e=await W0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await zv(t);return r||n}return e}function W0(t){return Qf(t,e=>{if(!e)throw Xo.create("installation-not-found");return YA(e)})}function YA(t){return H2(t)?{fid:t.fid,registrationStatus:0}:t}function H2(t){return t.registrationStatus===1&&t.registrationTime+MA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W2({appConfig:t,heartbeatServiceProvider:e},n){const r=K2(t,n),s=k2(t,n),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:VA,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await HA(()=>fetch(r,a));if(l.ok){const u=await l.json();return BA(u)}else throw await zA("Generate Auth Token",l)}function K2(t,{fid:e}){return`${UA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qv(t,e=!1){let n;const r=await Qf(t.appConfig,i=>{if(!XA(i))throw Xo.create("not-registered");const o=i.authToken;if(!e&&J2(o))return i;if(o.requestStatus===1)return n=G2(t,e),i;{if(!navigator.onLine)throw Xo.create("app-offline");const a=X2(i);return n=Q2(t,a),a}});return n?await n:r.authToken}async function G2(t,e){let n=await K0(t.appConfig);for(;n.authToken.requestStatus===1;)await WA(100),n=await K0(t.appConfig);const r=n.authToken;return r.requestStatus===0?qv(t,e):r}function K0(t){return Qf(t,e=>{if(!XA(e))throw Xo.create("not-registered");const n=e.authToken;return Z2(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Q2(t,e){try{const n=await W2(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await rf(t.appConfig,r),n}catch(n){if($A(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await JA(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await rf(t.appConfig,r)}throw n}}function XA(t){return t!==void 0&&t.registrationStatus===2}function J2(t){return t.requestStatus===2&&!Y2(t)}function Y2(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+I2}function X2(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Z2(t){return t.requestStatus===1&&t.requestTime+MA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eM(t){const e=t,{installationEntry:n,registrationPromise:r}=await zv(e);return r?r.catch(console.error):qv(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tM(t,e=!1){const n=t;return await nM(n),(await qv(n,e)).token}async function nM(t){const{registrationPromise:e}=await zv(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t){if(!t||!t.options)throw ag("App Configuration");if(!t.name)throw ag("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ag(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ag(t){return Xo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="installations",sM="installations-internal",iM=t=>{const e=t.getProvider("app").getImmediate(),n=rM(e),r=aa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},oM=t=>{const e=t.getProvider("app").getImmediate(),n=aa(e,ZA).getImmediate();return{getId:()=>eM(n),getToken:s=>tM(n,s)}};function aM(){Ts(new Yr(ZA,iM,"PUBLIC")),Ts(new Yr(sM,oM,"PRIVATE"))}aM();Tr(LA,Uv);Tr(LA,Uv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf="analytics",lM="firebase_id",cM="origin",uM=60*1e3,dM="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn=new Cf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},er=new oa("analytics","Analytics",hM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t){if(!t.startsWith(Hv)){const e=er.create("invalid-gtag-resource",{gtagURL:t});return Bn.warn(e.message),""}return t}function ex(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function pM(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function gM(t,e){const n=pM("firebase-js-sdk-policy",{createScriptURL:fM}),r=document.createElement("script"),s=`${Hv}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function mM(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function _M(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await ex(n)).find(u=>u.measurementId===s);l&&await e[l.appId]}}catch(a){Bn.error(a)}t("config",s,i)}async function vM(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await ex(n);for(const l of o){const u=a.find(p=>p.measurementId===l),d=u&&e[u.appId];if(d)i.push(d);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){Bn.error(i)}}function yM(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await vM(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await _M(t,e,n,r,a,l)}else if(i==="consent"){const[a,l]=o;t("consent",a,l)}else if(i==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){Bn.error(a)}}return s}function wM(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=yM(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function EM(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Hv)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bM=30,TM=1e3;class IM{constructor(e={},n=TM){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const tx=new IM;function SM(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function AM(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:SM(r)},i=dM.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function xM(t,e=tx,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw er.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw er.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new RM;return setTimeout(async()=>{a.abort()},uM),nx({appId:r,apiKey:s,measurementId:i},o,a,e)}async function nx(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=tx){var i;const{appId:o,measurementId:a}=t;try{await kM(r,e)}catch(l){if(a)return Bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await AM(t);return s.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!CM(u)){if(s.deleteThrottleMetadata(o),a)return Bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const d=Number((i=u==null?void 0:u.customData)===null||i===void 0?void 0:i.httpStatus)===503?Nw(n,s.intervalMillis,bM):Nw(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+d,backoffCount:n+1};return s.setThrottleMetadata(o,p),Bn.debug(`Calling attemptFetch again in ${d} millis`),nx(t,p,r,s)}}function kM(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(er.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function CM(t){if(!(t instanceof ts)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class RM{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function PM(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(){if(yI())try{await wI()}catch(t){return Bn.warn(er.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Bn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function NM(t,e,n,r,s,i,o){var a;const l=xM(t);l.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&Bn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>Bn.error(y)),e.push(l);const u=jM().then(y=>{if(y)return r.getId()}),[d,p]=await Promise.all([l,u]);EM(i)||gM(i,d.measurementId),s("js",new Date);const m=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return m[cM]="firebase",m.update=!0,p!=null&&(m[lM]=p),s("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e){this.app=e}_delete(){return delete Fc[this.app.options.appId],Promise.resolve()}}let Fc={},G0=[];const Q0={};let lg="dataLayer",DM="gtag",J0,rx,Y0=!1;function LM(){const t=[];if(vI()&&t.push("This is a browser extension environment."),PR()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=er.create("invalid-analytics-context",{errorInfo:e});Bn.warn(n.message)}}function MM(t,e,n){LM();const r=t.options.appId;if(!r)throw er.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw er.create("no-api-key");if(Fc[r]!=null)throw er.create("already-exists",{id:r});if(!Y0){mM(lg);const{wrappedGtag:i,gtagCore:o}=wM(Fc,G0,Q0,lg,DM);rx=i,J0=o,Y0=!0}return Fc[r]=NM(t,G0,Q0,e,J0,lg,n),new OM(t)}function VM(t=W_()){t=Ht(t);const e=aa(t,sf);return e.isInitialized()?e.getImmediate():FM(t)}function FM(t,e={}){const n=aa(t,sf);if(n.isInitialized()){const s=n.getImmediate();if(cu(e,n.getOptions()))return s;throw er.create("already-initialized")}return n.initialize({options:e})}function $M(t,e,n,r){t=Ht(t),PM(rx,Fc[t.app.options.appId],e,n,r).catch(s=>Bn.error(s))}const X0="@firebase/analytics",Z0="0.10.7";function UM(){Ts(new Yr(sf,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return MM(r,s,n)},"PUBLIC")),Ts(new Yr("analytics-internal",t,"PRIVATE")),Tr(X0,Z0),Tr(X0,Z0,"esm2017");function t(e){try{const n=e.getProvider(sf).getImmediate();return{logEvent:(r,s,i)=>$M(n,r,s,i)}}catch(n){throw er.create("interop-component-reg-failed",{reason:n})}}}UM();const BM={apiKey:"AIzaSyDR27NVCQmVwVNZfNXVGpLKSsJj8f2Filg",authDomain:"darelom-students.firebaseapp.com",projectId:"darelom-students",storageBucket:"darelom-students.appspot.com",messagingSenderId:"993473208393",appId:"1:993473208393:web:294652795108cc161c5f98",measurementId:"G-1K85RQXZQ1"},zM=II(BM),An=ZL(),Uu=sO();VM(zM);/**
 * @remix-run/router v1.19.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _t(){return _t=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_t.apply(this,arguments)}var Ct;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ct||(Ct={}));const eE="popstate";function qM(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=ai(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),wu("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:ta(i))}function r(s,i){ea(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return WM(e,n,r,t)}function Se(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ea(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HM(){return Math.random().toString(36).substr(2,8)}function tE(t,e){return{usr:t.state,key:t.key,idx:e}}function wu(t,e,n,r){return n===void 0&&(n=null),_t({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ai(e):e,{state:n,key:e&&e.key||r||HM()})}function ta(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ai(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WM(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Ct.Pop,l=null,u=d();u==null&&(u=0,o.replaceState(_t({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function p(){a=Ct.Pop;let j=d(),x=j==null?null:j-u;u=j,l&&l({action:a,location:A.location,delta:x})}function m(j,x){a=Ct.Push;let E=wu(A.location,j,x);n&&n(E,j),u=d()+1;let T=tE(E,u),O=A.createHref(E);try{o.pushState(T,"",O)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;s.location.assign(O)}i&&l&&l({action:a,location:A.location,delta:1})}function y(j,x){a=Ct.Replace;let E=wu(A.location,j,x);n&&n(E,j),u=d();let T=tE(E,u),O=A.createHref(E);o.replaceState(T,"",O),i&&l&&l({action:a,location:A.location,delta:0})}function I(j){let x=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof j=="string"?j:ta(j);return E=E.replace(/ $/,"%20"),Se(x,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,x)}let A={get action(){return a},get location(){return t(s,o)},listen(j){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(eE,p),l=j,()=>{s.removeEventListener(eE,p),l=null}},createHref(j){return e(s,j)},createURL:I,encodeLocation(j){let x=I(j);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:y,go(j){return o.go(j)}};return A}var Ge;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ge||(Ge={}));const KM=new Set(["lazy","caseSensitive","path","id","index","children"]);function GM(t){return t.index===!0}function Eu(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,i)=>{let o=[...n,String(i)],a=typeof s.id=="string"?s.id:o.join("-");if(Se(s.index!==!0||!s.children,"Cannot specify children on an index route"),Se(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),GM(s)){let l=_t({},s,e(s),{id:a});return r[a]=l,l}else{let l=_t({},s,e(s),{id:a,children:void 0});return r[a]=l,s.children&&(l.children=Eu(s.children,e,o,r)),l}})}function Co(t,e,n){return n===void 0&&(n="/"),mh(t,e,n,!1)}function mh(t,e,n,r){let s=typeof e=="string"?ai(e):e,i=Ol(s.pathname||"/",n);if(i==null)return null;let o=sx(t);JM(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=aV(i);a=iV(o[l],u,r)}return a}function QM(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function sx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(Se(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=Ks([r,l.relativePath]),d=n.concat(l);i.children&&i.children.length>0&&(Se(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),sx(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:rV(u,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of ix(i.path))s(i,o,l)}),e}function ix(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ix(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function JM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:sV(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YM=/^:[\w-]+$/,XM=3,ZM=2,eV=1,tV=10,nV=-2,nE=t=>t==="*";function rV(t,e){let n=t.split("/"),r=n.length;return n.some(nE)&&(r+=nV),e&&(r+=ZM),n.filter(s=>!nE(s)).reduce((s,i)=>s+(YM.test(i)?XM:i===""?eV:tV),r)}function sV(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function iV(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",p=rE({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),m=l.route;if(!p&&u&&n&&!r[r.length-1].route.index&&(p=rE({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Ks([i,p.pathname]),pathnameBase:uV(Ks([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Ks([i,p.pathnameBase]))}return o}function rE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oV(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,d,p)=>{let{paramName:m,isOptional:y}=d;if(m==="*"){let A=a[p]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const I=a[p];return y&&!I?u[m]=void 0:u[m]=(I||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function oV(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ea(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aV(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ea(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ol(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function lV(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ai(t):t;return{pathname:n?n.startsWith("/")?n:cV(n,e):e,search:dV(r),hash:hV(s)}}function cV(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ox(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Jf(t,e){let n=ox(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Yf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ai(t):(s=_t({},t),Se(!s.pathname||!s.pathname.includes("?"),cg("?","pathname","search",s)),Se(!s.pathname||!s.pathname.includes("#"),cg("#","pathname","hash",s)),Se(!s.search||!s.search.includes("#"),cg("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=lV(s,a),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}const Ks=t=>t.join("/").replace(/\/\/+/g,"/"),uV=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),dV=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,hV=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class of{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Xf(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ax=["post","put","patch","delete"],fV=new Set(ax),pV=["get",...ax],gV=new Set(pV),mV=new Set([301,302,303,307,308]),_V=new Set([307,308]),ug={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vV={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},uc={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Wv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yV=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),lx="remix-router-transitions";function wV(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Se(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;s=$=>({hasErrorBoundary:L($)})}else s=yV;let i={},o=Eu(t.routes,s,void 0,i),a,l=t.basename||"/",u=t.unstable_dataStrategy||SV,d=t.unstable_patchRoutesOnMiss,p=_t({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),m=null,y=new Set,I=null,A=null,j=null,x=t.hydrationData!=null,E=Co(o,t.history.location,l),T=null;if(E==null&&!d){let L=En(404,{pathname:t.history.location.pathname}),{matches:$,route:z}=fE(o);E=$,T={[z.id]:L}}E&&!t.hydrationData&&hr(E,o,t.history.location.pathname).active&&(E=null);let O;if(E)if(E.some(L=>L.route.lazy))O=!1;else if(!E.some(L=>L.route.loader))O=!0;else if(p.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,$=t.hydrationData?t.hydrationData.errors:null,z=W=>W.route.loader?typeof W.route.loader=="function"&&W.route.loader.hydrate===!0?!1:L&&L[W.route.id]!==void 0||$&&$[W.route.id]!==void 0:!0;if($){let W=E.findIndex(te=>$[te.route.id]!==void 0);O=E.slice(0,W+1).every(z)}else O=E.every(z)}else O=t.hydrationData!=null;else if(O=!1,E=[],p.v7_partialHydration){let L=hr(null,o,t.history.location.pathname);L.active&&L.matches&&(E=L.matches)}let B,R={historyAction:t.history.action,location:t.history.location,matches:E,initialized:O,navigation:ug,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||T,fetchers:new Map,blockers:new Map},k=Ct.Pop,w=!1,S,C=!1,N=new Map,V=null,P=!1,me=!1,Je=[],Ye=new Set,we=new Map,X=0,ae=-1,de=new Map,Ae=new Set,be=new Map,H=new Map,Ue=new Set,qe=new Map,Xe=new Map,tt=new Map,jt=!1;function Nt(){if(m=t.history.listen(L=>{let{action:$,location:z,delta:W}=L;if(jt){jt=!1;return}ea(Xe.size===0||W!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let te=uo({currentLocation:R.location,nextLocation:z,historyAction:$});if(te&&W!=null){jt=!0,t.history.go(W*-1),Cs(te,{state:"blocked",location:z,proceed(){Cs(te,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),t.history.go(W)},reset(){let ie=new Map(R.blockers);ie.set(te,uc),nt({blockers:ie})}});return}return Ot($,z)}),n){VV(e,N);let L=()=>FV(e,N);e.addEventListener("pagehide",L),V=()=>e.removeEventListener("pagehide",L)}return R.initialized||Ot(Ct.Pop,R.location,{initialHydration:!0}),B}function cr(){m&&m(),V&&V(),y.clear(),S&&S.abort(),R.fetchers.forEach((L,$)=>qn($)),R.blockers.forEach((L,$)=>ci($))}function se(L){return y.add(L),()=>y.delete(L)}function nt(L,$){$===void 0&&($={}),R=_t({},R,L);let z=[],W=[];p.v7_fetcherPersist&&R.fetchers.forEach((te,ie)=>{te.state==="idle"&&(Ue.has(ie)?W.push(ie):z.push(ie))}),[...y].forEach(te=>te(R,{deletedFetchers:W,unstable_viewTransitionOpts:$.viewTransitionOpts,unstable_flushSync:$.flushSync===!0})),p.v7_fetcherPersist&&(z.forEach(te=>R.fetchers.delete(te)),W.forEach(te=>qn(te)))}function tn(L,$,z){var W,te;let{flushSync:ie}=z===void 0?{}:z,he=R.actionData!=null&&R.navigation.formMethod!=null&&qr(R.navigation.formMethod)&&R.navigation.state==="loading"&&((W=L.state)==null?void 0:W._isRedirect)!==!0,Y;$.actionData?Object.keys($.actionData).length>0?Y=$.actionData:Y=null:he?Y=R.actionData:Y=null;let _e=$.loaderData?dE(R.loaderData,$.loaderData,$.matches||[],$.errors):R.loaderData,ce=R.blockers;ce.size>0&&(ce=new Map(ce),ce.forEach((ke,Me)=>ce.set(Me,uc)));let ue=w===!0||R.navigation.formMethod!=null&&qr(R.navigation.formMethod)&&((te=L.state)==null?void 0:te._isRedirect)!==!0;a&&(o=a,a=void 0),P||k===Ct.Pop||(k===Ct.Push?t.history.push(L,L.state):k===Ct.Replace&&t.history.replace(L,L.state));let xe;if(k===Ct.Pop){let ke=N.get(R.location.pathname);ke&&ke.has(L.pathname)?xe={currentLocation:R.location,nextLocation:L}:N.has(L.pathname)&&(xe={currentLocation:L,nextLocation:R.location})}else if(C){let ke=N.get(R.location.pathname);ke?ke.add(L.pathname):(ke=new Set([L.pathname]),N.set(R.location.pathname,ke)),xe={currentLocation:R.location,nextLocation:L}}nt(_t({},$,{actionData:Y,loaderData:_e,historyAction:k,location:L,initialized:!0,navigation:ug,revalidation:"idle",restoreScrollPosition:ho(L,$.matches||R.matches),preventScrollReset:ue,blockers:ce}),{viewTransitionOpts:xe,flushSync:ie===!0}),k=Ct.Pop,w=!1,C=!1,P=!1,me=!1,Je=[]}async function ns(L,$){if(typeof L=="number"){t.history.go(L);return}let z=Dm(R.location,R.matches,l,p.v7_prependBasename,L,p.v7_relativeSplatPath,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:W,submission:te,error:ie}=sE(p.v7_normalizeFormMethod,!1,z,$),he=R.location,Y=wu(R.location,W,$&&$.state);Y=_t({},Y,t.history.encodeLocation(Y));let _e=$&&$.replace!=null?$.replace:void 0,ce=Ct.Push;_e===!0?ce=Ct.Replace:_e===!1||te!=null&&qr(te.formMethod)&&te.formAction===R.location.pathname+R.location.search&&(ce=Ct.Replace);let ue=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,xe=($&&$.unstable_flushSync)===!0,ke=uo({currentLocation:he,nextLocation:Y,historyAction:ce});if(ke){Cs(ke,{state:"blocked",location:Y,proceed(){Cs(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:Y}),ns(L,$)},reset(){let Me=new Map(R.blockers);Me.set(ke,uc),nt({blockers:Me})}});return}return await Ot(ce,Y,{submission:te,pendingError:ie,preventScrollReset:ue,replace:$&&$.replace,enableViewTransition:$&&$.unstable_viewTransition,flushSync:xe})}function xs(){if(Ze(),nt({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){Ot(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}Ot(k||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation})}}async function Ot(L,$,z){S&&S.abort(),S=null,k=L,P=(z&&z.startUninterruptedRevalidation)===!0,di(R.location,R.matches),w=(z&&z.preventScrollReset)===!0,C=(z&&z.enableViewTransition)===!0;let W=a||o,te=z&&z.overrideNavigation,ie=Co(W,$,l),he=(z&&z.flushSync)===!0,Y=hr(ie,W,$.pathname);if(Y.active&&Y.matches&&(ie=Y.matches),!ie){let{error:Te,notFoundMatches:at,route:lt}=Rr($.pathname);tn($,{matches:at,loaderData:{},errors:{[lt.id]:Te}},{flushSync:he});return}if(R.initialized&&!me&&PV(R.location,$)&&!(z&&z.submission&&qr(z.submission.formMethod))){tn($,{matches:ie},{flushSync:he});return}S=new AbortController;let _e=Ta(t.history,$,S.signal,z&&z.submission),ce;if(z&&z.pendingError)ce=[Ha(ie).route.id,{type:Ge.error,error:z.pendingError}];else if(z&&z.submission&&qr(z.submission.formMethod)){let Te=await ks(_e,$,z.submission,ie,Y.active,{replace:z.replace,flushSync:he});if(Te.shortCircuited)return;if(Te.pendingActionResult){let[at,lt]=Te.pendingActionResult;if(Jn(lt)&&Xf(lt.error)&&lt.error.status===404){S=null,tn($,{matches:Te.matches,loaderData:{},errors:{[at]:lt.error}});return}}ie=Te.matches||ie,ce=Te.pendingActionResult,te=dg($,z.submission),he=!1,Y.active=!1,_e=Ta(t.history,_e.url,_e.signal)}let{shortCircuited:ue,matches:xe,loaderData:ke,errors:Me}=await xr(_e,$,ie,Y.active,te,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,he,ce);ue||(S=null,tn($,_t({matches:xe||ie},hE(ce),{loaderData:ke,errors:Me})))}async function ks(L,$,z,W,te,ie){ie===void 0&&(ie={}),Ze();let he=LV($,z);if(nt({navigation:he},{flushSync:ie.flushSync===!0}),te){let ce=await Rs(W,$.pathname,L.signal);if(ce.type==="aborted")return{shortCircuited:!0};if(ce.type==="error"){let{boundaryId:ue,error:xe}=Pr($.pathname,ce);return{matches:ce.partialMatches,pendingActionResult:[ue,{type:Ge.error,error:xe}]}}else if(ce.matches)W=ce.matches;else{let{notFoundMatches:ue,error:xe,route:ke}=Rr($.pathname);return{matches:ue,pendingActionResult:[ke.id,{type:Ge.error,error:xe}]}}}let Y,_e=Ic(W,$);if(!_e.route.action&&!_e.route.lazy)Y={type:Ge.error,error:En(405,{method:L.method,pathname:$.pathname,routeId:_e.route.id})};else if(Y=(await zn("action",L,[_e],W))[0],L.signal.aborted)return{shortCircuited:!0};if(Mo(Y)){let ce;return ie&&ie.replace!=null?ce=ie.replace:ce=lE(Y.response.headers.get("Location"),new URL(L.url),l)===R.location.pathname+R.location.search,await gn(L,Y,{submission:z,replace:ce}),{shortCircuited:!0}}if(Lo(Y))throw En(400,{type:"defer-action"});if(Jn(Y)){let ce=Ha(W,_e.route.id);return(ie&&ie.replace)!==!0&&(k=Ct.Push),{matches:W,pendingActionResult:[ce.route.id,Y]}}return{matches:W,pendingActionResult:[_e.route.id,Y]}}async function xr(L,$,z,W,te,ie,he,Y,_e,ce,ue){let xe=te||dg($,ie),ke=ie||he||_E(xe),Me=!P&&(!p.v7_partialHydration||!_e);if(W){if(Me){let et=Rn(ue);nt(_t({navigation:xe},et!==void 0?{actionData:et}:{}),{flushSync:ce})}let pe=await Rs(z,$.pathname,L.signal);if(pe.type==="aborted")return{shortCircuited:!0};if(pe.type==="error"){let{boundaryId:et,error:Tt}=Pr($.pathname,pe);return{matches:pe.partialMatches,loaderData:{},errors:{[et]:Tt}}}else if(pe.matches)z=pe.matches;else{let{error:et,notFoundMatches:Tt,route:Be}=Rr($.pathname);return{matches:Tt,loaderData:{},errors:{[Be.id]:et}}}}let Te=a||o,[at,lt]=iE(t.history,R,z,ke,$,p.v7_partialHydration&&_e===!0,p.v7_skipActionErrorRevalidation,me,Je,Ye,Ue,be,Ae,Te,l,ue);if(ur(pe=>!(z&&z.some(et=>et.route.id===pe))||at&&at.some(et=>et.route.id===pe)),ae=++X,at.length===0&&lt.length===0){let pe=ss();return tn($,_t({matches:z,loaderData:{},errors:ue&&Jn(ue[1])?{[ue[0]]:ue[1].error}:null},hE(ue),pe?{fetchers:new Map(R.fetchers)}:{}),{flushSync:ce}),{shortCircuited:!0}}if(Me){let pe={};if(!W){pe.navigation=xe;let et=Rn(ue);et!==void 0&&(pe.actionData=et)}lt.length>0&&(pe.fetchers=pn(lt)),nt(pe,{flushSync:ce})}lt.forEach(pe=>{we.has(pe.key)&&nn(pe.key),pe.controller&&we.set(pe.key,pe.controller)});let jr=()=>lt.forEach(pe=>nn(pe.key));S&&S.signal.addEventListener("abort",jr);let{loaderResults:fr,fetcherResults:Hn}=await ht(R.matches,z,at,lt,L);if(L.signal.aborted)return{shortCircuited:!0};S&&S.signal.removeEventListener("abort",jr),lt.forEach(pe=>we.delete(pe.key));let Nr=pE([...fr,...Hn]);if(Nr){if(Nr.idx>=at.length){let pe=lt[Nr.idx-at.length].key;Ae.add(pe)}return await gn(L,Nr.result,{replace:Y}),{shortCircuited:!0}}let{loaderData:pr,errors:Dt}=uE(R,z,at,fr,ue,lt,Hn,qe);qe.forEach((pe,et)=>{pe.subscribe(Tt=>{(Tt||pe.done)&&qe.delete(et)})}),p.v7_partialHydration&&_e&&R.errors&&Object.entries(R.errors).filter(pe=>{let[et]=pe;return!at.some(Tt=>Tt.route.id===et)}).forEach(pe=>{let[et,Tt]=pe;Dt=Object.assign(Dt||{},{[et]:Tt})});let _n=ss(),os=pa(ae),Wn=_n||os||lt.length>0;return _t({matches:z,loaderData:pr,errors:Dt},Wn?{fetchers:new Map(R.fetchers)}:{})}function Rn(L){if(L&&!Jn(L[1]))return{[L[0]]:L[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function pn(L){return L.forEach($=>{let z=R.fetchers.get($.key),W=dc(void 0,z?z.data:void 0);R.fetchers.set($.key,W)}),new Map(R.fetchers)}function kr(L,$,z,W){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");we.has(L)&&nn(L);let te=(W&&W.unstable_flushSync)===!0,ie=a||o,he=Dm(R.location,R.matches,l,p.v7_prependBasename,z,p.v7_relativeSplatPath,$,W==null?void 0:W.relative),Y=Co(ie,he,l),_e=hr(Y,ie,he);if(_e.active&&_e.matches&&(Y=_e.matches),!Y){mn(L,$,En(404,{pathname:he}),{flushSync:te});return}let{path:ce,submission:ue,error:xe}=sE(p.v7_normalizeFormMethod,!0,he,W);if(xe){mn(L,$,xe,{flushSync:te});return}let ke=Ic(Y,ce);if(w=(W&&W.preventScrollReset)===!0,ue&&qr(ue.formMethod)){li(L,$,ce,ke,Y,_e.active,te,ue);return}be.set(L,{routeId:$,path:ce}),rs(L,$,ce,ke,Y,_e.active,te,ue)}async function li(L,$,z,W,te,ie,he,Y){Ze(),be.delete(L);function _e(Be){if(!Be.route.action&&!Be.route.lazy){let vn=En(405,{method:Y.formMethod,pathname:z,routeId:$});return mn(L,$,vn,{flushSync:he}),!0}return!1}if(!ie&&_e(W))return;let ce=R.fetchers.get(L);ot(L,MV(Y,ce),{flushSync:he});let ue=new AbortController,xe=Ta(t.history,z,ue.signal,Y);if(ie){let Be=await Rs(te,z,xe.signal);if(Be.type==="aborted")return;if(Be.type==="error"){let{error:vn}=Pr(z,Be);mn(L,$,vn,{flushSync:he});return}else if(Be.matches){if(te=Be.matches,W=Ic(te,z),_e(W))return}else{mn(L,$,En(404,{pathname:z}),{flushSync:he});return}}we.set(L,ue);let ke=X,Te=(await zn("action",xe,[W],te))[0];if(xe.signal.aborted){we.get(L)===ue&&we.delete(L);return}if(p.v7_fetcherPersist&&Ue.has(L)){if(Mo(Te)||Jn(Te)){ot(L,bi(void 0));return}}else{if(Mo(Te))if(we.delete(L),ae>ke){ot(L,bi(void 0));return}else return Ae.add(L),ot(L,dc(Y)),gn(xe,Te,{fetcherSubmission:Y});if(Jn(Te)){mn(L,$,Te.error);return}}if(Lo(Te))throw En(400,{type:"defer-action"});let at=R.navigation.location||R.location,lt=Ta(t.history,at,ue.signal),jr=a||o,fr=R.navigation.state!=="idle"?Co(jr,R.navigation.location,l):R.matches;Se(fr,"Didn't find any matches after fetcher action");let Hn=++X;de.set(L,Hn);let Nr=dc(Y,Te.data);R.fetchers.set(L,Nr);let[pr,Dt]=iE(t.history,R,fr,Y,at,!1,p.v7_skipActionErrorRevalidation,me,Je,Ye,Ue,be,Ae,jr,l,[W.route.id,Te]);Dt.filter(Be=>Be.key!==L).forEach(Be=>{let vn=Be.key,fo=R.fetchers.get(vn),ga=dc(void 0,fo?fo.data:void 0);R.fetchers.set(vn,ga),we.has(vn)&&nn(vn),Be.controller&&we.set(vn,Be.controller)}),nt({fetchers:new Map(R.fetchers)});let _n=()=>Dt.forEach(Be=>nn(Be.key));ue.signal.addEventListener("abort",_n);let{loaderResults:os,fetcherResults:Wn}=await ht(R.matches,fr,pr,Dt,lt);if(ue.signal.aborted)return;ue.signal.removeEventListener("abort",_n),de.delete(L),we.delete(L),Dt.forEach(Be=>we.delete(Be.key));let pe=pE([...os,...Wn]);if(pe){if(pe.idx>=pr.length){let Be=Dt[pe.idx-pr.length].key;Ae.add(Be)}return gn(lt,pe.result)}let{loaderData:et,errors:Tt}=uE(R,R.matches,pr,os,void 0,Dt,Wn,qe);if(R.fetchers.has(L)){let Be=bi(Te.data);R.fetchers.set(L,Be)}pa(Hn),R.navigation.state==="loading"&&Hn>ae?(Se(k,"Expected pending action"),S&&S.abort(),tn(R.navigation.location,{matches:fr,loaderData:et,errors:Tt,fetchers:new Map(R.fetchers)})):(nt({errors:Tt,loaderData:dE(R.loaderData,et,fr,Tt),fetchers:new Map(R.fetchers)}),me=!1)}async function rs(L,$,z,W,te,ie,he,Y){let _e=R.fetchers.get(L);ot(L,dc(Y,_e?_e.data:void 0),{flushSync:he});let ce=new AbortController,ue=Ta(t.history,z,ce.signal);if(ie){let Te=await Rs(te,z,ue.signal);if(Te.type==="aborted")return;if(Te.type==="error"){let{error:at}=Pr(z,Te);mn(L,$,at,{flushSync:he});return}else if(Te.matches)te=Te.matches,W=Ic(te,z);else{mn(L,$,En(404,{pathname:z}),{flushSync:he});return}}we.set(L,ce);let xe=X,Me=(await zn("loader",ue,[W],te))[0];if(Lo(Me)&&(Me=await fx(Me,ue.signal,!0)||Me),we.get(L)===ce&&we.delete(L),!ue.signal.aborted){if(Ue.has(L)){ot(L,bi(void 0));return}if(Mo(Me))if(ae>xe){ot(L,bi(void 0));return}else{Ae.add(L),await gn(ue,Me);return}if(Jn(Me)){mn(L,$,Me.error);return}Se(!Lo(Me),"Unhandled fetcher deferred data"),ot(L,bi(Me.data))}}async function gn(L,$,z){let{submission:W,fetcherSubmission:te,replace:ie}=z===void 0?{}:z;$.response.headers.has("X-Remix-Revalidate")&&(me=!0);let he=$.response.headers.get("Location");Se(he,"Expected a Location header on the redirect Response"),he=lE(he,new URL(L.url),l);let Y=wu(R.location,he,{_isRedirect:!0});if(n){let Me=!1;if($.response.headers.has("X-Remix-Reload-Document"))Me=!0;else if(Wv.test(he)){const Te=t.history.createURL(he);Me=Te.origin!==e.location.origin||Ol(Te.pathname,l)==null}if(Me){ie?e.location.replace(he):e.location.assign(he);return}}S=null;let _e=ie===!0||$.response.headers.has("X-Remix-Replace")?Ct.Replace:Ct.Push,{formMethod:ce,formAction:ue,formEncType:xe}=R.navigation;!W&&!te&&ce&&ue&&xe&&(W=_E(R.navigation));let ke=W||te;if(_V.has($.response.status)&&ke&&qr(ke.formMethod))await Ot(_e,Y,{submission:_t({},ke,{formAction:he}),preventScrollReset:w});else{let Me=dg(Y,W);await Ot(_e,Y,{overrideNavigation:Me,fetcherSubmission:te,preventScrollReset:w})}}async function zn(L,$,z,W){try{let te=await AV(u,L,$,z,W,i,s);return await Promise.all(te.map((ie,he)=>{if(NV(ie)){let Y=ie.result;return{type:Ge.redirect,response:CV(Y,$,z[he].route.id,W,l,p.v7_relativeSplatPath)}}return kV(ie)}))}catch(te){return z.map(()=>({type:Ge.error,error:te}))}}async function ht(L,$,z,W,te){let[ie,...he]=await Promise.all([z.length?zn("loader",te,z,$):[],...W.map(Y=>{if(Y.matches&&Y.match&&Y.controller){let _e=Ta(t.history,Y.path,Y.controller.signal);return zn("loader",_e,[Y.match],Y.matches).then(ce=>ce[0])}else return Promise.resolve({type:Ge.error,error:En(404,{pathname:Y.path})})})]);return await Promise.all([mE(L,z,ie,ie.map(()=>te.signal),!1,R.loaderData),mE(L,W.map(Y=>Y.match),he,W.map(Y=>Y.controller?Y.controller.signal:null),!0)]),{loaderResults:ie,fetcherResults:he}}function Ze(){me=!0,Je.push(...ur()),be.forEach((L,$)=>{we.has($)&&(Ye.add($),nn($))})}function ot(L,$,z){z===void 0&&(z={}),R.fetchers.set(L,$),nt({fetchers:new Map(R.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function mn(L,$,z,W){W===void 0&&(W={});let te=Ha(R.matches,$);qn(L),nt({errors:{[te.route.id]:z},fetchers:new Map(R.fetchers)},{flushSync:(W&&W.flushSync)===!0})}function Cr(L){return p.v7_fetcherPersist&&(H.set(L,(H.get(L)||0)+1),Ue.has(L)&&Ue.delete(L)),R.fetchers.get(L)||vV}function qn(L){let $=R.fetchers.get(L);we.has(L)&&!($&&$.state==="loading"&&de.has(L))&&nn(L),be.delete(L),de.delete(L),Ae.delete(L),Ue.delete(L),Ye.delete(L),R.fetchers.delete(L)}function Pn(L){if(p.v7_fetcherPersist){let $=(H.get(L)||0)-1;$<=0?(H.delete(L),Ue.add(L)):H.set(L,$)}else qn(L);nt({fetchers:new Map(R.fetchers)})}function nn(L){let $=we.get(L);Se($,"Expected fetch controller: "+L),$.abort(),we.delete(L)}function co(L){for(let $ of L){let z=Cr($),W=bi(z.data);R.fetchers.set($,W)}}function ss(){let L=[],$=!1;for(let z of Ae){let W=R.fetchers.get(z);Se(W,"Expected fetcher: "+z),W.state==="loading"&&(Ae.delete(z),L.push(z),$=!0)}return co(L),$}function pa(L){let $=[];for(let[z,W]of de)if(W<L){let te=R.fetchers.get(z);Se(te,"Expected fetcher: "+z),te.state==="loading"&&(nn(z),de.delete(z),$.push(z))}return co($),$.length>0}function $l(L,$){let z=R.blockers.get(L)||uc;return Xe.get(L)!==$&&Xe.set(L,$),z}function ci(L){R.blockers.delete(L),Xe.delete(L)}function Cs(L,$){let z=R.blockers.get(L)||uc;Se(z.state==="unblocked"&&$.state==="blocked"||z.state==="blocked"&&$.state==="blocked"||z.state==="blocked"&&$.state==="proceeding"||z.state==="blocked"&&$.state==="unblocked"||z.state==="proceeding"&&$.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+$.state);let W=new Map(R.blockers);W.set(L,$),nt({blockers:W})}function uo(L){let{currentLocation:$,nextLocation:z,historyAction:W}=L;if(Xe.size===0)return;Xe.size>1&&ea(!1,"A router only supports one blocker at a time");let te=Array.from(Xe.entries()),[ie,he]=te[te.length-1],Y=R.blockers.get(ie);if(!(Y&&Y.state==="proceeding")&&he({currentLocation:$,nextLocation:z,historyAction:W}))return ie}function Rr(L){let $=En(404,{pathname:L}),z=a||o,{matches:W,route:te}=fE(z);return ur(),{notFoundMatches:W,route:te,error:$}}function Pr(L,$){return{boundaryId:Ha($.partialMatches).route.id,error:En(400,{type:"route-discovery",pathname:L,message:$.error!=null&&"message"in $.error?$.error:String($.error)})}}function ur(L){let $=[];return qe.forEach((z,W)=>{(!L||L(W))&&(z.cancel(),$.push(W),qe.delete(W))}),$}function dr(L,$,z){if(I=L,j=$,A=z||null,!x&&R.navigation===ug){x=!0;let W=ho(R.location,R.matches);W!=null&&nt({restoreScrollPosition:W})}return()=>{I=null,j=null,A=null}}function ui(L,$){return A&&A(L,$.map(W=>QM(W,R.loaderData)))||L.key}function di(L,$){if(I&&j){let z=ui(L,$);I[z]=j()}}function ho(L,$){if(I){let z=ui(L,$),W=I[z];if(typeof W=="number")return W}return null}function hr(L,$,z){if(d)if(L){let W=L[L.length-1].route;if(W.path&&(W.path==="*"||W.path.endsWith("/*")))return{active:!0,matches:mh($,z,l,!0)}}else return{active:!0,matches:mh($,z,l,!0)||[]};return{active:!1,matches:null}}async function Rs(L,$,z){let W=L,te=W.length>0?W[W.length-1].route:null;for(;;){let ie=a==null,he=a||o;try{await IV(d,$,W,he,i,s,tt,z)}catch(ue){return{type:"error",error:ue,partialMatches:W}}finally{ie&&(o=[...o])}if(z.aborted)return{type:"aborted"};let Y=Co(he,$,l),_e=!1;if(Y){let ue=Y[Y.length-1].route;if(ue.index)return{type:"success",matches:Y};if(ue.path&&ue.path.length>0)if(ue.path==="*")_e=!0;else return{type:"success",matches:Y}}let ce=mh(he,$,l,!0);if(!ce||W.map(ue=>ue.route.id).join("-")===ce.map(ue=>ue.route.id).join("-"))return{type:"success",matches:_e?Y:null};if(W=ce,te=W[W.length-1].route,te.path==="*")return{type:"success",matches:W}}}function ft(L){i={},a=Eu(L,s,void 0,i)}function is(L,$){let z=a==null;ux(L,$,a||o,i,s),z&&(o=[...o],nt({}))}return B={get basename(){return l},get future(){return p},get state(){return R},get routes(){return o},get window(){return e},initialize:Nt,subscribe:se,enableScrollRestoration:dr,navigate:ns,fetch:kr,revalidate:xs,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:Cr,deleteFetcher:Pn,dispose:cr,getBlocker:$l,deleteBlocker:ci,patchRoutes:is,_internalFetchControllers:we,_internalActiveDeferreds:qe,_internalSetRoutes:ft},B}function EV(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Dm(t,e,n,r,s,i,o,a){let l,u;if(o){l=[];for(let p of e)if(l.push(p),p.route.id===o){u=p;break}}else l=e,u=e[e.length-1];let d=Yf(s||".",Jf(l,i),Ol(t.pathname,n)||t.pathname,a==="path");return s==null&&(d.search=t.search,d.hash=t.hash),(s==null||s===""||s===".")&&u&&u.route.index&&!Kv(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(d.pathname=d.pathname==="/"?n:Ks([n,d.pathname])),ta(d)}function sE(t,e,n,r){if(!r||!EV(r))return{path:n};if(r.formMethod&&!DV(r.formMethod))return{path:n,error:En(405,{method:r.formMethod})};let s=()=>({path:n,error:En(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),a=dx(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!qr(o))return s();let m=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((y,I)=>{let[A,j]=I;return""+y+A+"="+j+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:m}}}else if(r.formEncType==="application/json"){if(!qr(o))return s();try{let m=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:m,text:void 0}}}catch{return s()}}}Se(typeof FormData=="function","FormData is not available in this environment");let l,u;if(r.formData)l=Lm(r.formData),u=r.formData;else if(r.body instanceof FormData)l=Lm(r.body),u=r.body;else if(r.body instanceof URLSearchParams)l=r.body,u=cE(l);else if(r.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(r.body),u=cE(l)}catch{return s()}let d={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(qr(d.formMethod))return{path:n,submission:d};let p=ai(n);return e&&p.search&&Kv(p.search)&&l.append("index",""),p.search="?"+l,{path:ta(p),submission:d}}function bV(t,e){let n=t;if(e){let r=t.findIndex(s=>s.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function iE(t,e,n,r,s,i,o,a,l,u,d,p,m,y,I,A){let j=A?Jn(A[1])?A[1].error:A[1].data:void 0,x=t.createURL(e.location),E=t.createURL(s),T=A&&Jn(A[1])?A[0]:void 0,O=T?bV(n,T):n,B=A?A[1].statusCode:void 0,R=o&&B&&B>=400,k=O.filter((S,C)=>{let{route:N}=S;if(N.lazy)return!0;if(N.loader==null)return!1;if(i)return typeof N.loader!="function"||N.loader.hydrate?!0:e.loaderData[N.id]===void 0&&(!e.errors||e.errors[N.id]===void 0);if(TV(e.loaderData,e.matches[C],S)||l.some(me=>me===S.route.id))return!0;let V=e.matches[C],P=S;return oE(S,_t({currentUrl:x,currentParams:V.params,nextUrl:E,nextParams:P.params},r,{actionResult:j,actionStatus:B,defaultShouldRevalidate:R?!1:a||x.pathname+x.search===E.pathname+E.search||x.search!==E.search||cx(V,P)}))}),w=[];return p.forEach((S,C)=>{if(i||!n.some(Je=>Je.route.id===S.routeId)||d.has(C))return;let N=Co(y,S.path,I);if(!N){w.push({key:C,routeId:S.routeId,path:S.path,matches:null,match:null,controller:null});return}let V=e.fetchers.get(C),P=Ic(N,S.path),me=!1;m.has(C)?me=!1:u.has(C)?(u.delete(C),me=!0):V&&V.state!=="idle"&&V.data===void 0?me=a:me=oE(P,_t({currentUrl:x,currentParams:e.matches[e.matches.length-1].params,nextUrl:E,nextParams:n[n.length-1].params},r,{actionResult:j,actionStatus:B,defaultShouldRevalidate:R?!1:a})),me&&w.push({key:C,routeId:S.routeId,path:S.path,matches:N,match:P,controller:new AbortController})}),[k,w]}function TV(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function cx(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function oE(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function IV(t,e,n,r,s,i,o,a){let l=[e,...n.map(u=>u.route.id)].join("-");try{let u=o.get(l);u||(u=t({path:e,matches:n,patch:(d,p)=>{a.aborted||ux(d,p,r,s,i)}}),o.set(l,u)),u&&jV(u)&&await u}finally{o.delete(l)}}function ux(t,e,n,r,s){if(t){var i;let o=r[t];Se(o,"No route found to patch children into: routeId = "+t);let a=Eu(e,s,[t,"patch",String(((i=o.children)==null?void 0:i.length)||"0")],r);o.children?o.children.push(...a):o.children=a}else{let o=Eu(e,s,["patch",String(n.length||"0")],r);n.push(...o)}}async function aE(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];Se(s,"No route found in manifest");let i={};for(let o in r){let l=s[o]!==void 0&&o!=="hasErrorBoundary";ea(!l,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!KM.has(o)&&(i[o]=r[o])}Object.assign(s,i),Object.assign(s,_t({},e(s),{lazy:void 0}))}function SV(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function AV(t,e,n,r,s,i,o,a){let l=r.reduce((p,m)=>p.add(m.route.id),new Set),u=new Set,d=await t({matches:s.map(p=>{let m=l.has(p.route.id);return _t({},p,{shouldLoad:m,resolve:I=>(u.add(p.route.id),m?xV(e,n,p,i,o,I,a):Promise.resolve({type:Ge.data,result:void 0}))})}),request:n,params:s[0].params,context:a});return s.forEach(p=>Se(u.has(p.route.id),'`match.resolve()` was not called for route id "'+p.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),d.filter((p,m)=>l.has(s[m].route.id))}async function xV(t,e,n,r,s,i,o){let a,l,u=d=>{let p,m=new Promise((A,j)=>p=j);l=()=>p(),e.signal.addEventListener("abort",l);let y=A=>typeof d!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):d({request:e,params:n.params,context:o},...A!==void 0?[A]:[]),I;return i?I=i(A=>y(A)):I=(async()=>{try{return{type:"data",result:await y()}}catch(A){return{type:"error",result:A}}})(),Promise.race([I,m])};try{let d=n.route[t];if(n.route.lazy)if(d){let p,[m]=await Promise.all([u(d).catch(y=>{p=y}),aE(n.route,s,r)]);if(p!==void 0)throw p;a=m}else if(await aE(n.route,s,r),d=n.route[t],d)a=await u(d);else if(t==="action"){let p=new URL(e.url),m=p.pathname+p.search;throw En(405,{method:e.method,pathname:m,routeId:n.route.id})}else return{type:Ge.data,result:void 0};else if(d)a=await u(d);else{let p=new URL(e.url),m=p.pathname+p.search;throw En(404,{pathname:m})}Se(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(d){return{type:Ge.error,result:d}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function kV(t){let{result:e,type:n}=t;if(hx(e)){let u;try{let d=e.headers.get("Content-Type");d&&/\bapplication\/json\b/.test(d)?e.body==null?u=null:u=await e.json():u=await e.text()}catch(d){return{type:Ge.error,error:d}}return n===Ge.error?{type:Ge.error,error:new of(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:Ge.data,data:u,statusCode:e.status,headers:e.headers}}if(n===Ge.error){if(gE(e)){var r;if(e.data instanceof Error){var s;return{type:Ge.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status}}e=new of(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:Ge.error,error:e,statusCode:Xf(e)?e.status:void 0}}if(OV(e)){var i,o;return{type:Ge.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(gE(e)){var a,l;return{type:Ge.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Ge.data,data:e}}function CV(t,e,n,r,s,i){let o=t.headers.get("Location");if(Se(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!Wv.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=Dm(new URL(e.url),a,s,!0,o,i),t.headers.set("Location",o)}return t}function lE(t,e,n){if(Wv.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=Ol(s.pathname,n)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function Ta(t,e,n,r){let s=t.createURL(dx(e)).toString(),i={signal:n};if(r&&qr(r.formMethod)){let{formMethod:o,formEncType:a}=r;i.method=o.toUpperCase(),a==="application/json"?(i.headers=new Headers({"Content-Type":a}),i.body=JSON.stringify(r.json)):a==="text/plain"?i.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?i.body=Lm(r.formData):i.body=r.formData}return new Request(s,i)}function Lm(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function cE(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function RV(t,e,n,r,s,i){let o={},a=null,l,u=!1,d={},p=r&&Jn(r[1])?r[1].error:void 0;return n.forEach((m,y)=>{let I=e[y].route.id;if(Se(!Mo(m),"Cannot handle redirect results in processLoaderData"),Jn(m)){let A=m.error;p!==void 0&&(A=p,p=void 0),a=a||{};{let j=Ha(t,I);a[j.route.id]==null&&(a[j.route.id]=A)}o[I]=void 0,u||(u=!0,l=Xf(m.error)?m.error.status:500),m.headers&&(d[I]=m.headers)}else Lo(m)?(s.set(I,m.deferredData),o[I]=m.deferredData.data,m.statusCode!=null&&m.statusCode!==200&&!u&&(l=m.statusCode),m.headers&&(d[I]=m.headers)):(o[I]=m.data,m.statusCode&&m.statusCode!==200&&!u&&(l=m.statusCode),m.headers&&(d[I]=m.headers))}),p!==void 0&&r&&(a={[r[0]]:p},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:d}}function uE(t,e,n,r,s,i,o,a){let{loaderData:l,errors:u}=RV(e,n,r,s,a);for(let d=0;d<i.length;d++){let{key:p,match:m,controller:y}=i[d];Se(o!==void 0&&o[d]!==void 0,"Did not find corresponding fetcher result");let I=o[d];if(!(y&&y.signal.aborted))if(Jn(I)){let A=Ha(t.matches,m==null?void 0:m.route.id);u&&u[A.route.id]||(u=_t({},u,{[A.route.id]:I.error})),t.fetchers.delete(p)}else if(Mo(I))Se(!1,"Unhandled fetcher revalidation redirect");else if(Lo(I))Se(!1,"Unhandled fetcher deferred data");else{let A=bi(I.data);t.fetchers.set(p,A)}}return{loaderData:l,errors:u}}function dE(t,e,n,r){let s=_t({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):t[o]!==void 0&&i.route.loader&&(s[o]=t[o]),r&&r.hasOwnProperty(o))break}return s}function hE(t){return t?Jn(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ha(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function fE(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function En(t,e){let{pathname:n,routeId:r,method:s,type:i,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",i==="route-discovery"?l='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+o):s&&n&&r?l="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?l="defer() is not supported in actions":i==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",s&&n&&r?l="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(l='Invalid request method "'+s.toUpperCase()+'"')),new of(t||500,a,new Error(l),!0)}function pE(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Mo(n))return{result:n,idx:e}}}function dx(t){let e=typeof t=="string"?ai(t):t;return ta(_t({},e,{hash:""}))}function PV(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function jV(t){return typeof t=="object"&&t!=null&&"then"in t}function NV(t){return hx(t.result)&&mV.has(t.result.status)}function Lo(t){return t.type===Ge.deferred}function Jn(t){return t.type===Ge.error}function Mo(t){return(t&&t.type)===Ge.redirect}function gE(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function OV(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function hx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function DV(t){return gV.has(t.toLowerCase())}function qr(t){return fV.has(t.toLowerCase())}async function mE(t,e,n,r,s,i){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let u=t.find(p=>p.route.id===l.route.id),d=u!=null&&!cx(u,l)&&(i&&i[l.route.id])!==void 0;if(Lo(a)&&(s||d)){let p=r[o];Se(p,"Expected an AbortSignal for revalidating fetcher deferred result"),await fx(a,p,s).then(m=>{m&&(n[o]=m||n[o])})}}}async function fx(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Ge.data,data:t.deferredData.unwrappedData}}catch(s){return{type:Ge.error,error:s}}return{type:Ge.data,data:t.deferredData.data}}}function Kv(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Ic(t,e){let n=typeof e=="string"?ai(e).search:e.search;if(t[t.length-1].route.index&&Kv(n||""))return t[t.length-1];let r=ox(t);return r[r.length-1]}function _E(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:i,json:o}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function dg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function LV(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function dc(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function MV(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function bi(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function VV(t,e){try{let n=t.sessionStorage.getItem(lx);if(n){let r=JSON.parse(n);for(let[s,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function FV(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(lx,JSON.stringify(n))}catch(r){ea(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function af(){return af=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},af.apply(this,arguments)}const Zf=F.createContext(null),px=F.createContext(null),oo=F.createContext(null),Gv=F.createContext(null),As=F.createContext({outlet:null,matches:[],isDataRoute:!1}),gx=F.createContext(null);function $V(t,e){let{relative:n}=e===void 0?{}:e;Dl()||Se(!1);let{basename:r,navigator:s}=F.useContext(oo),{hash:i,pathname:o,search:a}=_x(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Ks([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Dl(){return F.useContext(Gv)!=null}function lr(){return Dl()||Se(!1),F.useContext(Gv).location}function mx(t){F.useContext(oo).static||F.useLayoutEffect(t)}function gt(){let{isDataRoute:t}=F.useContext(As);return t?eF():UV()}function UV(){Dl()||Se(!1);let t=F.useContext(Zf),{basename:e,future:n,navigator:r}=F.useContext(oo),{matches:s}=F.useContext(As),{pathname:i}=lr(),o=JSON.stringify(Jf(s,n.v7_relativeSplatPath)),a=F.useRef(!1);return mx(()=>{a.current=!0}),F.useCallback(function(u,d){if(d===void 0&&(d={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let p=Yf(u,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Ks([e,p.pathname])),(d.replace?r.replace:r.push)(p,d.state,d)},[e,r,o,i,t])}const BV=F.createContext(null);function zV(t){let e=F.useContext(As).outlet;return e&&F.createElement(BV.Provider,{value:t},e)}function fn(){let{matches:t}=F.useContext(As),e=t[t.length-1];return e?e.params:{}}function _x(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=F.useContext(oo),{matches:s}=F.useContext(As),{pathname:i}=lr(),o=JSON.stringify(Jf(s,r.v7_relativeSplatPath));return F.useMemo(()=>Yf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function qV(t,e,n,r){Dl()||Se(!1);let{navigator:s}=F.useContext(oo),{matches:i}=F.useContext(As),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=lr(),d;d=u;let p=d.pathname||"/",m=p;if(l!=="/"){let A=l.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let y=Co(t,{pathname:m});return QV(y&&y.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:Ks([l,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:Ks([l,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r)}function HV(){let t=ZV(),e=Xf(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:s},n):null,null)}const WV=F.createElement(HV,null);class KV extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(As.Provider,{value:this.props.routeContext},F.createElement(gx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GV(t){let{routeContext:e,match:n,children:r}=t,s=F.useContext(Zf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(As.Provider,{value:e},r)}function QV(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);d>=0||Se(!1),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let p=o[d];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(u=d),p.route.id){let{loaderData:m,errors:y}=n,I=p.route.loader&&m[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||I){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,p,m)=>{let y,I=!1,A=null,j=null;n&&(y=a&&p.route.id?a[p.route.id]:void 0,A=p.route.errorElement||WV,l&&(u<0&&m===0?(I=!0,j=null):u===m&&(I=!0,j=p.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,m+1)),E=()=>{let T;return y?T=A:I?T=j:p.route.Component?T=F.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=d,F.createElement(GV,{match:p,routeContext:{outlet:d,matches:x,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?F.createElement(KV,{location:n.location,revalidation:n.revalidation,component:A,error:y,children:E(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):E()},null)}var vx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(vx||{}),lf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lf||{});function JV(t){let e=F.useContext(Zf);return e||Se(!1),e}function YV(t){let e=F.useContext(px);return e||Se(!1),e}function XV(t){let e=F.useContext(As);return e||Se(!1),e}function yx(t){let e=XV(),n=e.matches[e.matches.length-1];return n.route.id||Se(!1),n.route.id}function ZV(){var t;let e=F.useContext(gx),n=YV(lf.UseRouteError),r=yx(lf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function eF(){let{router:t}=JV(vx.UseNavigateStable),e=yx(lf.UseNavigateStable),n=F.useRef(!1);return mx(()=>{n.current=!0}),F.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,af({fromRouteId:e},i)))},[t,e])}function vE(t){let{to:e,replace:n,state:r,relative:s}=t;Dl()||Se(!1);let{future:i,static:o}=F.useContext(oo),{matches:a}=F.useContext(As),{pathname:l}=lr(),u=gt(),d=Yf(e,Jf(a,i.v7_relativeSplatPath),l,s==="path"),p=JSON.stringify(d);return F.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:s}),[u,p,s,n,r]),null}function tF(t){return zV(t.context)}function $e(t){Se(!1)}function nF(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ct.Pop,navigator:i,static:o=!1,future:a}=t;Dl()&&Se(!1);let l=e.replace(/^\/*/,"/"),u=F.useMemo(()=>({basename:l,navigator:i,static:o,future:af({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=ai(r));let{pathname:d="/",search:p="",hash:m="",state:y=null,key:I="default"}=r,A=F.useMemo(()=>{let j=Ol(d,l);return j==null?null:{location:{pathname:j,search:p,hash:m,state:y,key:I},navigationType:s}},[l,d,p,m,y,I,s]);return A==null?null:F.createElement(oo.Provider,{value:u},F.createElement(Gv.Provider,{children:n,value:A}))}new Promise(()=>{});function Mm(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(r,s)=>{if(!F.isValidElement(r))return;let i=[...e,s];if(r.type===F.Fragment){n.push.apply(n,Mm(r.props.children,i));return}r.type!==$e&&Se(!1),!r.props.index||!r.props.children||Se(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Mm(r.props.children,i)),n.push(o)}),n}function rF(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:F.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:F.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:F.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.26.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bu(){return bu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bu.apply(this,arguments)}function sF(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function iF(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function oF(t,e){return t.button===0&&(!e||e==="_self")&&!iF(t)}function Vm(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function aF(t,e){let n=Vm(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const lF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],cF="6";try{window.__reactRouterVersion=cF}catch{}function uF(t,e){return wV({basename:void 0,future:bu({},void 0,{v7_prependBasename:!0}),history:qM({window:void 0}),hydrationData:dF(),routes:t,mapRouteProperties:rF,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function dF(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=bu({},e,{errors:hF(e.errors)})),e}function hF(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new of(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let o=new i(s.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(s.message);i.stack="",n[r]=i}}else n[r]=s;return n}const fF=F.createContext({isTransitioning:!1}),pF=F.createContext(new Map),gF="startTransition",yE=rk[gF],mF="flushSync",wE=gR[mF];function _F(t){yE?yE(t):t()}function hc(t){wE?wE(t):t()}let vF=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function yF(t){let{fallbackElement:e,router:n,future:r}=t,[s,i]=F.useState(n.state),[o,a]=F.useState(),[l,u]=F.useState({isTransitioning:!1}),[d,p]=F.useState(),[m,y]=F.useState(),[I,A]=F.useState(),j=F.useRef(new Map),{v7_startTransition:x}=r||{},E=F.useCallback(w=>{x?_F(w):w()},[x]),T=F.useCallback((w,S)=>{let{deletedFetchers:C,unstable_flushSync:N,unstable_viewTransitionOpts:V}=S;C.forEach(me=>j.current.delete(me)),w.fetchers.forEach((me,Je)=>{me.data!==void 0&&j.current.set(Je,me.data)});let P=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!V||P){N?hc(()=>i(w)):E(()=>i(w));return}if(N){hc(()=>{m&&(d&&d.resolve(),m.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let me=n.window.document.startViewTransition(()=>{hc(()=>i(w))});me.finished.finally(()=>{hc(()=>{p(void 0),y(void 0),a(void 0),u({isTransitioning:!1})})}),hc(()=>y(me));return}m?(d&&d.resolve(),m.skipTransition(),A({state:w,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(a(w),u({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,m,d,j,E]);F.useLayoutEffect(()=>n.subscribe(T),[n,T]),F.useEffect(()=>{l.isTransitioning&&!l.flushSync&&p(new vF)},[l]),F.useEffect(()=>{if(d&&o&&n.window){let w=o,S=d.promise,C=n.window.document.startViewTransition(async()=>{E(()=>i(w)),await S});C.finished.finally(()=>{p(void 0),y(void 0),a(void 0),u({isTransitioning:!1})}),y(C)}},[E,o,d,n.window]),F.useEffect(()=>{d&&o&&s.location.key===o.location.key&&d.resolve()},[d,m,s.location,o]),F.useEffect(()=>{!l.isTransitioning&&I&&(a(I.state),u({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}),A(void 0))},[l.isTransitioning,I]),F.useEffect(()=>{},[]);let O=F.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:w=>n.navigate(w),push:(w,S,C)=>n.navigate(w,{state:S,preventScrollReset:C==null?void 0:C.preventScrollReset}),replace:(w,S,C)=>n.navigate(w,{replace:!0,state:S,preventScrollReset:C==null?void 0:C.preventScrollReset})}),[n]),B=n.basename||"/",R=F.useMemo(()=>({router:n,navigator:O,static:!1,basename:B}),[n,O,B]),k=F.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return F.createElement(F.Fragment,null,F.createElement(Zf.Provider,{value:R},F.createElement(px.Provider,{value:s},F.createElement(pF.Provider,{value:j.current},F.createElement(fF.Provider,{value:l},F.createElement(nF,{basename:B,location:s.location,navigationType:s.historyAction,navigator:O,future:k},s.initialized||n.future.v7_partialHydration?F.createElement(wF,{routes:n.routes,future:n.future,state:s}):e))))),null)}const wF=F.memo(EF);function EF(t){let{routes:e,future:n,state:r}=t;return qV(e,void 0,r,n)}const bF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",TF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ke=F.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:d,unstable_viewTransition:p}=e,m=sF(e,lF),{basename:y}=F.useContext(oo),I,A=!1;if(typeof u=="string"&&TF.test(u)&&(I=u,bF))try{let T=new URL(window.location.href),O=u.startsWith("//")?new URL(T.protocol+u):new URL(u),B=Ol(O.pathname,y);O.origin===T.origin&&B!=null?u=B+O.search+O.hash:A=!0}catch{}let j=$V(u,{relative:s}),x=IF(u,{replace:o,state:a,target:l,preventScrollReset:d,relative:s,unstable_viewTransition:p});function E(T){r&&r(T),T.defaultPrevented||x(T)}return F.createElement("a",bu({},m,{href:I||j,onClick:A||i?r:E,ref:n,target:l}))});var EE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(EE||(EE={}));var bE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bE||(bE={}));function IF(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=gt(),u=lr(),d=_x(t,{relative:o});return F.useCallback(p=>{if(oF(p,n)){p.preventDefault();let m=r!==void 0?r:ta(u)===ta(d);l(t,{replace:m,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a})}},[u,l,d,r,s,n,t,i,o,a])}function SF(t){let e=F.useRef(Vm(t)),n=F.useRef(!1),r=lr(),s=F.useMemo(()=>aF(r.search,n.current?null:e.current),[r.search]),i=gt(),o=F.useCallback((a,l)=>{const u=Vm(typeof a=="function"?a(s):a);n.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var AF={exports:{}},In="top",rr="bottom",sr="right",Sn="left",ep="auto",Ll=[In,rr,sr,Sn],na="start",vl="end",wx="clippingParents",Qv="viewport",Ra="popper",Ex="reference",Fm=Ll.reduce(function(t,e){return t.concat([e+"-"+na,e+"-"+vl])},[]),Jv=[].concat(Ll,[ep]).reduce(function(t,e){return t.concat([e,e+"-"+na,e+"-"+vl])},[]),bx="beforeRead",Tx="read",Ix="afterRead",Sx="beforeMain",Ax="main",xx="afterMain",kx="beforeWrite",Cx="write",Rx="afterWrite",Px=[bx,Tx,Ix,Sx,Ax,xx,kx,Cx,Rx];function Ss(t){return t?(t.nodeName||"").toLowerCase():null}function ir(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ra(t){var e=ir(t).Element;return t instanceof e||t instanceof Element}function Ir(t){var e=ir(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Yv(t){if(typeof ShadowRoot>"u")return!1;var e=ir(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function xF(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!Ir(i)||!Ss(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?i.removeAttribute(o):i.setAttribute(o,a===!0?"":a)}))})}function kF(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,u){return l[u]="",l},{});!Ir(s)||!Ss(s)||(Object.assign(s.style,a),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const Xv={name:"applyStyles",enabled:!0,phase:"write",fn:xF,effect:kF,requires:["computeStyles"]};function bs(t){return t.split("-")[0]}var Uo=Math.max,cf=Math.min,yl=Math.round;function $m(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function jx(){return!/^((?!chrome|android).)*safari/i.test($m())}function wl(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&Ir(t)&&(s=t.offsetWidth>0&&yl(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&yl(r.height)/t.offsetHeight||1);var o=ra(t)?ir(t):window,a=o.visualViewport,l=!jx()&&n,u=(r.left+(l&&a?a.offsetLeft:0))/s,d=(r.top+(l&&a?a.offsetTop:0))/i,p=r.width/s,m=r.height/i;return{width:p,height:m,top:d,right:u+p,bottom:d+m,left:u,x:u,y:d}}function Zv(t){var e=wl(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Nx(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Yv(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function si(t){return ir(t).getComputedStyle(t)}function CF(t){return["table","td","th"].indexOf(Ss(t))>=0}function ao(t){return((ra(t)?t.ownerDocument:t.document)||window.document).documentElement}function tp(t){return Ss(t)==="html"?t:t.assignedSlot||t.parentNode||(Yv(t)?t.host:null)||ao(t)}function TE(t){return!Ir(t)||si(t).position==="fixed"?null:t.offsetParent}function RF(t){var e=/firefox/i.test($m()),n=/Trident/i.test($m());if(n&&Ir(t)){var r=si(t);if(r.position==="fixed")return null}var s=tp(t);for(Yv(s)&&(s=s.host);Ir(s)&&["html","body"].indexOf(Ss(s))<0;){var i=si(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function Bu(t){for(var e=ir(t),n=TE(t);n&&CF(n)&&si(n).position==="static";)n=TE(n);return n&&(Ss(n)==="html"||Ss(n)==="body"&&si(n).position==="static")?e:n||RF(t)||e}function ey(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function $c(t,e,n){return Uo(t,cf(e,n))}function PF(t,e,n){var r=$c(t,e,n);return r>n?n:r}function Ox(){return{top:0,right:0,bottom:0,left:0}}function Dx(t){return Object.assign({},Ox(),t)}function Lx(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var jF=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Dx(typeof e!="number"?e:Lx(e,Ll))};function NF(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=bs(n.placement),l=ey(a),u=[Sn,sr].indexOf(a)>=0,d=u?"height":"width";if(!(!i||!o)){var p=jF(s.padding,n),m=Zv(i),y=l==="y"?In:Sn,I=l==="y"?rr:sr,A=n.rects.reference[d]+n.rects.reference[l]-o[l]-n.rects.popper[d],j=o[l]-n.rects.reference[l],x=Bu(i),E=x?l==="y"?x.clientHeight||0:x.clientWidth||0:0,T=A/2-j/2,O=p[y],B=E-m[d]-p[I],R=E/2-m[d]/2+T,k=$c(O,R,B),w=l;n.modifiersData[r]=(e={},e[w]=k,e.centerOffset=k-R,e)}}function OF(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||Nx(e.elements.popper,s)&&(e.elements.arrow=s))}const Mx={name:"arrow",enabled:!0,phase:"main",fn:NF,effect:OF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function El(t){return t.split("-")[1]}var DF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function LF(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:yl(n*s)/s||0,y:yl(r*s)/s||0}}function IE(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,u=t.adaptive,d=t.roundOffsets,p=t.isFixed,m=o.x,y=m===void 0?0:m,I=o.y,A=I===void 0?0:I,j=typeof d=="function"?d({x:y,y:A}):{x:y,y:A};y=j.x,A=j.y;var x=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),T=Sn,O=In,B=window;if(u){var R=Bu(n),k="clientHeight",w="clientWidth";if(R===ir(n)&&(R=ao(n),si(R).position!=="static"&&a==="absolute"&&(k="scrollHeight",w="scrollWidth")),R=R,s===In||(s===Sn||s===sr)&&i===vl){O=rr;var S=p&&R===B&&B.visualViewport?B.visualViewport.height:R[k];A-=S-r.height,A*=l?1:-1}if(s===Sn||(s===In||s===rr)&&i===vl){T=sr;var C=p&&R===B&&B.visualViewport?B.visualViewport.width:R[w];y-=C-r.width,y*=l?1:-1}}var N=Object.assign({position:a},u&&DF),V=d===!0?LF({x:y,y:A},ir(n)):{x:y,y:A};if(y=V.x,A=V.y,l){var P;return Object.assign({},N,(P={},P[O]=E?"0":"",P[T]=x?"0":"",P.transform=(B.devicePixelRatio||1)<=1?"translate("+y+"px, "+A+"px)":"translate3d("+y+"px, "+A+"px, 0)",P))}return Object.assign({},N,(e={},e[O]=E?A+"px":"",e[T]=x?y+"px":"",e.transform="",e))}function MF(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:bs(e.placement),variation:El(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,IE(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,IE(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ty={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:MF,data:{}};var Ud={passive:!0};function VF(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=ir(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&u.forEach(function(d){d.addEventListener("scroll",n.update,Ud)}),a&&l.addEventListener("resize",n.update,Ud),function(){i&&u.forEach(function(d){d.removeEventListener("scroll",n.update,Ud)}),a&&l.removeEventListener("resize",n.update,Ud)}}const ny={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:VF,data:{}};var FF={left:"right",right:"left",bottom:"top",top:"bottom"};function _h(t){return t.replace(/left|right|bottom|top/g,function(e){return FF[e]})}var $F={start:"end",end:"start"};function SE(t){return t.replace(/start|end/g,function(e){return $F[e]})}function ry(t){var e=ir(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function sy(t){return wl(ao(t)).left+ry(t).scrollLeft}function UF(t,e){var n=ir(t),r=ao(t),s=n.visualViewport,i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;var u=jx();(u||!u&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a+sy(t),y:l}}function BF(t){var e,n=ao(t),r=ry(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=Uo(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Uo(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+sy(t),l=-r.scrollTop;return si(s||n).direction==="rtl"&&(a+=Uo(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}function iy(t){var e=si(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function Vx(t){return["html","body","#document"].indexOf(Ss(t))>=0?t.ownerDocument.body:Ir(t)&&iy(t)?t:Vx(tp(t))}function Uc(t,e){var n;e===void 0&&(e=[]);var r=Vx(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=ir(r),o=s?[i].concat(i.visualViewport||[],iy(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(Uc(tp(o)))}function Um(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function zF(t,e){var n=wl(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function AE(t,e,n){return e===Qv?Um(UF(t,n)):ra(e)?zF(e,n):Um(BF(ao(t)))}function qF(t){var e=Uc(tp(t)),n=["absolute","fixed"].indexOf(si(t).position)>=0,r=n&&Ir(t)?Bu(t):t;return ra(r)?e.filter(function(s){return ra(s)&&Nx(s,r)&&Ss(s)!=="body"}):[]}function HF(t,e,n,r){var s=e==="clippingParents"?qF(t):[].concat(e),i=[].concat(s,[n]),o=i[0],a=i.reduce(function(l,u){var d=AE(t,u,r);return l.top=Uo(d.top,l.top),l.right=cf(d.right,l.right),l.bottom=cf(d.bottom,l.bottom),l.left=Uo(d.left,l.left),l},AE(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Fx(t){var e=t.reference,n=t.element,r=t.placement,s=r?bs(r):null,i=r?El(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case In:l={x:o,y:e.y-n.height};break;case rr:l={x:o,y:e.y+e.height};break;case sr:l={x:e.x+e.width,y:a};break;case Sn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var u=s?ey(s):null;if(u!=null){var d=u==="y"?"height":"width";switch(i){case na:l[u]=l[u]-(e[d]/2-n[d]/2);break;case vl:l[u]=l[u]+(e[d]/2-n[d]/2);break}}return l}function bl(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,o=i===void 0?t.strategy:i,a=n.boundary,l=a===void 0?wx:a,u=n.rootBoundary,d=u===void 0?Qv:u,p=n.elementContext,m=p===void 0?Ra:p,y=n.altBoundary,I=y===void 0?!1:y,A=n.padding,j=A===void 0?0:A,x=Dx(typeof j!="number"?j:Lx(j,Ll)),E=m===Ra?Ex:Ra,T=t.rects.popper,O=t.elements[I?E:m],B=HF(ra(O)?O:O.contextElement||ao(t.elements.popper),l,d,o),R=wl(t.elements.reference),k=Fx({reference:R,element:T,strategy:"absolute",placement:s}),w=Um(Object.assign({},T,k)),S=m===Ra?w:R,C={top:B.top-S.top+x.top,bottom:S.bottom-B.bottom+x.bottom,left:B.left-S.left+x.left,right:S.right-B.right+x.right},N=t.modifiersData.offset;if(m===Ra&&N){var V=N[s];Object.keys(C).forEach(function(P){var me=[sr,rr].indexOf(P)>=0?1:-1,Je=[In,rr].indexOf(P)>=0?"y":"x";C[P]+=V[Je]*me})}return C}function WF(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?Jv:l,d=El(r),p=d?a?Fm:Fm.filter(function(I){return El(I)===d}):Ll,m=p.filter(function(I){return u.indexOf(I)>=0});m.length===0&&(m=p);var y=m.reduce(function(I,A){return I[A]=bl(t,{placement:A,boundary:s,rootBoundary:i,padding:o})[bs(A)],I},{});return Object.keys(y).sort(function(I,A){return y[I]-y[A]})}function KF(t){if(bs(t)===ep)return[];var e=_h(t);return[SE(t),e,SE(e)]}function GF(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,u=n.padding,d=n.boundary,p=n.rootBoundary,m=n.altBoundary,y=n.flipVariations,I=y===void 0?!0:y,A=n.allowedAutoPlacements,j=e.options.placement,x=bs(j),E=x===j,T=l||(E||!I?[_h(j)]:KF(j)),O=[j].concat(T).reduce(function(Ue,qe){return Ue.concat(bs(qe)===ep?WF(e,{placement:qe,boundary:d,rootBoundary:p,padding:u,flipVariations:I,allowedAutoPlacements:A}):qe)},[]),B=e.rects.reference,R=e.rects.popper,k=new Map,w=!0,S=O[0],C=0;C<O.length;C++){var N=O[C],V=bs(N),P=El(N)===na,me=[In,rr].indexOf(V)>=0,Je=me?"width":"height",Ye=bl(e,{placement:N,boundary:d,rootBoundary:p,altBoundary:m,padding:u}),we=me?P?sr:Sn:P?rr:In;B[Je]>R[Je]&&(we=_h(we));var X=_h(we),ae=[];if(i&&ae.push(Ye[V]<=0),a&&ae.push(Ye[we]<=0,Ye[X]<=0),ae.every(function(Ue){return Ue})){S=N,w=!1;break}k.set(N,ae)}if(w)for(var de=I?3:1,Ae=function(qe){var Xe=O.find(function(tt){var jt=k.get(tt);if(jt)return jt.slice(0,qe).every(function(Nt){return Nt})});if(Xe)return S=Xe,"break"},be=de;be>0;be--){var H=Ae(be);if(H==="break")break}e.placement!==S&&(e.modifiersData[r]._skip=!0,e.placement=S,e.reset=!0)}}const $x={name:"flip",enabled:!0,phase:"main",fn:GF,requiresIfExists:["offset"],data:{_skip:!1}};function xE(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function kE(t){return[In,sr,rr,Sn].some(function(e){return t[e]>=0})}function QF(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=bl(e,{elementContext:"reference"}),a=bl(e,{altBoundary:!0}),l=xE(o,r),u=xE(a,s,i),d=kE(l),p=kE(u);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:d,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":p})}const Ux={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:QF};function JF(t,e,n){var r=bs(t),s=[Sn,In].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[Sn,sr].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function YF(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,o=Jv.reduce(function(d,p){return d[p]=JF(p,e.rects,i),d},{}),a=o[e.placement],l=a.x,u=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=u),e.modifiersData[r]=o}const Bx={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:YF};function XF(t){var e=t.state,n=t.name;e.modifiersData[n]=Fx({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const oy={name:"popperOffsets",enabled:!0,phase:"read",fn:XF,data:{}};function ZF(t){return t==="x"?"y":"x"}function e$(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,u=n.rootBoundary,d=n.altBoundary,p=n.padding,m=n.tether,y=m===void 0?!0:m,I=n.tetherOffset,A=I===void 0?0:I,j=bl(e,{boundary:l,rootBoundary:u,padding:p,altBoundary:d}),x=bs(e.placement),E=El(e.placement),T=!E,O=ey(x),B=ZF(O),R=e.modifiersData.popperOffsets,k=e.rects.reference,w=e.rects.popper,S=typeof A=="function"?A(Object.assign({},e.rects,{placement:e.placement})):A,C=typeof S=="number"?{mainAxis:S,altAxis:S}:Object.assign({mainAxis:0,altAxis:0},S),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,V={x:0,y:0};if(R){if(i){var P,me=O==="y"?In:Sn,Je=O==="y"?rr:sr,Ye=O==="y"?"height":"width",we=R[O],X=we+j[me],ae=we-j[Je],de=y?-w[Ye]/2:0,Ae=E===na?k[Ye]:w[Ye],be=E===na?-w[Ye]:-k[Ye],H=e.elements.arrow,Ue=y&&H?Zv(H):{width:0,height:0},qe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ox(),Xe=qe[me],tt=qe[Je],jt=$c(0,k[Ye],Ue[Ye]),Nt=T?k[Ye]/2-de-jt-Xe-C.mainAxis:Ae-jt-Xe-C.mainAxis,cr=T?-k[Ye]/2+de+jt+tt+C.mainAxis:be+jt+tt+C.mainAxis,se=e.elements.arrow&&Bu(e.elements.arrow),nt=se?O==="y"?se.clientTop||0:se.clientLeft||0:0,tn=(P=N==null?void 0:N[O])!=null?P:0,ns=we+Nt-tn-nt,xs=we+cr-tn,Ot=$c(y?cf(X,ns):X,we,y?Uo(ae,xs):ae);R[O]=Ot,V[O]=Ot-we}if(a){var ks,xr=O==="x"?In:Sn,Rn=O==="x"?rr:sr,pn=R[B],kr=B==="y"?"height":"width",li=pn+j[xr],rs=pn-j[Rn],gn=[In,Sn].indexOf(x)!==-1,zn=(ks=N==null?void 0:N[B])!=null?ks:0,ht=gn?li:pn-k[kr]-w[kr]-zn+C.altAxis,Ze=gn?pn+k[kr]+w[kr]-zn-C.altAxis:rs,ot=y&&gn?PF(ht,pn,Ze):$c(y?ht:li,pn,y?Ze:rs);R[B]=ot,V[B]=ot-pn}e.modifiersData[r]=V}}const zx={name:"preventOverflow",enabled:!0,phase:"main",fn:e$,requiresIfExists:["offset"]};function t$(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function n$(t){return t===ir(t)||!Ir(t)?ry(t):t$(t)}function r$(t){var e=t.getBoundingClientRect(),n=yl(e.width)/t.offsetWidth||1,r=yl(e.height)/t.offsetHeight||1;return n!==1||r!==1}function s$(t,e,n){n===void 0&&(n=!1);var r=Ir(e),s=Ir(e)&&r$(e),i=ao(e),o=wl(t,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Ss(e)!=="body"||iy(i))&&(a=n$(e)),Ir(e)?(l=wl(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=sy(i))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function i$(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function o$(t){var e=i$(t);return Px.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function a$(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function l$(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var CE={placement:"bottom",modifiers:[],strategy:"absolute"};function RE(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function np(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?CE:s;return function(a,l,u){u===void 0&&(u=i);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},CE,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],m=!1,y={state:d,setOptions:function(x){var E=typeof x=="function"?x(d.options):x;A(),d.options=Object.assign({},i,d.options,E),d.scrollParents={reference:ra(a)?Uc(a):a.contextElement?Uc(a.contextElement):[],popper:Uc(l)};var T=o$(l$([].concat(r,d.options.modifiers)));return d.orderedModifiers=T.filter(function(O){return O.enabled}),I(),y.update()},forceUpdate:function(){if(!m){var x=d.elements,E=x.reference,T=x.popper;if(RE(E,T)){d.rects={reference:s$(E,Bu(T),d.options.strategy==="fixed"),popper:Zv(T)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(C){return d.modifiersData[C.name]=Object.assign({},C.data)});for(var O=0;O<d.orderedModifiers.length;O++){if(d.reset===!0){d.reset=!1,O=-1;continue}var B=d.orderedModifiers[O],R=B.fn,k=B.options,w=k===void 0?{}:k,S=B.name;typeof R=="function"&&(d=R({state:d,options:w,name:S,instance:y})||d)}}}},update:a$(function(){return new Promise(function(j){y.forceUpdate(),j(d)})}),destroy:function(){A(),m=!0}};if(!RE(a,l))return y;y.setOptions(u).then(function(j){!m&&u.onFirstUpdate&&u.onFirstUpdate(j)});function I(){d.orderedModifiers.forEach(function(j){var x=j.name,E=j.options,T=E===void 0?{}:E,O=j.effect;if(typeof O=="function"){var B=O({state:d,name:x,instance:y,options:T}),R=function(){};p.push(B||R)}})}function A(){p.forEach(function(j){return j()}),p=[]}return y}}var c$=np(),u$=[ny,oy,ty,Xv],d$=np({defaultModifiers:u$}),h$=[ny,oy,ty,Xv,Bx,$x,zx,Mx,Ux],f$=np({defaultModifiers:h$});const p$=Object.freeze(Object.defineProperty({__proto__:null,afterMain:xx,afterRead:Ix,afterWrite:Rx,applyStyles:Xv,arrow:Mx,auto:ep,basePlacements:Ll,beforeMain:Sx,beforeRead:bx,beforeWrite:kx,bottom:rr,clippingParents:wx,computeStyles:ty,createPopper:f$,createPopperBase:c$,createPopperLite:d$,detectOverflow:bl,end:vl,eventListeners:ny,flip:$x,hide:Ux,left:Sn,main:Ax,modifierPhases:Px,offset:Bx,placements:Jv,popper:Ra,popperGenerator:np,popperOffsets:oy,preventOverflow:zx,read:Tx,reference:Ex,right:sr,start:na,top:In,variationPlacements:Fm,viewport:Qv,write:Cx},Symbol.toStringTag,{value:"Module"})),g$=ZE(p$);/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r(g$)})(tr,function(n){function r(M){const f=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(M){for(const v in M)if(v!=="default"){const D=Object.getOwnPropertyDescriptor(M,v);Object.defineProperty(f,v,D.get?D:{enumerable:!0,get:()=>M[v]})}}return f.default=M,Object.freeze(f)}const s=r(n),i=new Map,o={set(M,f,v){i.has(M)||i.set(M,new Map);const D=i.get(M);D.has(f)||D.size===0?D.set(f,v):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(D.keys())[0]}.`)},get:(M,f)=>i.has(M)&&i.get(M).get(f)||null,remove(M,f){if(!i.has(M))return;const v=i.get(M);v.delete(f),v.size===0&&i.delete(M)}},a="transitionend",l=M=>(M&&window.CSS&&window.CSS.escape&&(M=M.replace(/#([^\s"#']+)/g,(f,v)=>`#${CSS.escape(v)}`)),M),u=M=>{M.dispatchEvent(new Event(a))},d=M=>!(!M||typeof M!="object")&&(M.jquery!==void 0&&(M=M[0]),M.nodeType!==void 0),p=M=>d(M)?M.jquery?M[0]:M:typeof M=="string"&&M.length>0?document.querySelector(l(M)):null,m=M=>{if(!d(M)||M.getClientRects().length===0)return!1;const f=getComputedStyle(M).getPropertyValue("visibility")==="visible",v=M.closest("details:not([open])");if(!v)return f;if(v!==M){const D=M.closest("summary");if(D&&D.parentNode!==v||D===null)return!1}return f},y=M=>!M||M.nodeType!==Node.ELEMENT_NODE||!!M.classList.contains("disabled")||(M.disabled!==void 0?M.disabled:M.hasAttribute("disabled")&&M.getAttribute("disabled")!=="false"),I=M=>{if(!document.documentElement.attachShadow)return null;if(typeof M.getRootNode=="function"){const f=M.getRootNode();return f instanceof ShadowRoot?f:null}return M instanceof ShadowRoot?M:M.parentNode?I(M.parentNode):null},A=()=>{},j=M=>{M.offsetHeight},x=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E=[],T=()=>document.documentElement.dir==="rtl",O=M=>{var f;f=()=>{const v=x();if(v){const D=M.NAME,G=v.fn[D];v.fn[D]=M.jQueryInterface,v.fn[D].Constructor=M,v.fn[D].noConflict=()=>(v.fn[D]=G,M.jQueryInterface)}},document.readyState==="loading"?(E.length||document.addEventListener("DOMContentLoaded",()=>{for(const v of E)v()}),E.push(f)):f()},B=(M,f=[],v=M)=>typeof M=="function"?M(...f):v,R=(M,f,v=!0)=>{if(!v)return void B(M);const D=(oe=>{if(!oe)return 0;let{transitionDuration:Ne,transitionDelay:mt}=window.getComputedStyle(oe);const Nn=Number.parseFloat(Ne),Gn=Number.parseFloat(mt);return Nn||Gn?(Ne=Ne.split(",")[0],mt=mt.split(",")[0],1e3*(Number.parseFloat(Ne)+Number.parseFloat(mt))):0})(f)+5;let G=!1;const ee=({target:oe})=>{oe===f&&(G=!0,f.removeEventListener(a,ee),B(M))};f.addEventListener(a,ee),setTimeout(()=>{G||u(f)},D)},k=(M,f,v,D)=>{const G=M.length;let ee=M.indexOf(f);return ee===-1?!v&&D?M[G-1]:M[0]:(ee+=v?1:-1,D&&(ee=(ee+G)%G),M[Math.max(0,Math.min(ee,G-1))])},w=/[^.]*(?=\..*)\.|.*/,S=/\..*/,C=/::\d+$/,N={};let V=1;const P={mouseenter:"mouseover",mouseleave:"mouseout"},me=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Je(M,f){return f&&`${f}::${V++}`||M.uidEvent||V++}function Ye(M){const f=Je(M);return M.uidEvent=f,N[f]=N[f]||{},N[f]}function we(M,f,v=null){return Object.values(M).find(D=>D.callable===f&&D.delegationSelector===v)}function X(M,f,v){const D=typeof f=="string",G=D?v:f||v;let ee=be(M);return me.has(ee)||(ee=M),[D,G,ee]}function ae(M,f,v,D,G){if(typeof f!="string"||!M)return;let[ee,oe,Ne]=X(f,v,D);f in P&&(oe=(bo=>function(Fr){if(!Fr.relatedTarget||Fr.relatedTarget!==Fr.delegateTarget&&!Fr.delegateTarget.contains(Fr.relatedTarget))return bo.call(this,Fr)})(oe));const mt=Ye(M),Nn=mt[Ne]||(mt[Ne]={}),Gn=we(Nn,oe,ee?v:null);if(Gn)return void(Gn.oneOff=Gn.oneOff&&G);const Vr=Je(oe,f.replace(w,"")),Ns=ee?function(Os,bo,Fr){return function ec(vd){const F1=Os.querySelectorAll(bo);for(let{target:To}=vd;To&&To!==this;To=To.parentNode)for(const $1 of F1)if($1===To)return Ue(vd,{delegateTarget:To}),ec.oneOff&&H.off(Os,vd.type,bo,Fr),Fr.apply(To,[vd])}}(M,v,oe):function(Os,bo){return function Fr(ec){return Ue(ec,{delegateTarget:Os}),Fr.oneOff&&H.off(Os,ec.type,bo),bo.apply(Os,[ec])}}(M,oe);Ns.delegationSelector=ee?v:null,Ns.callable=oe,Ns.oneOff=G,Ns.uidEvent=Vr,Nn[Vr]=Ns,M.addEventListener(Ne,Ns,ee)}function de(M,f,v,D,G){const ee=we(f[v],D,G);ee&&(M.removeEventListener(v,ee,!!G),delete f[v][ee.uidEvent])}function Ae(M,f,v,D){const G=f[v]||{};for(const[ee,oe]of Object.entries(G))ee.includes(D)&&de(M,f,v,oe.callable,oe.delegationSelector)}function be(M){return M=M.replace(S,""),P[M]||M}const H={on(M,f,v,D){ae(M,f,v,D,!1)},one(M,f,v,D){ae(M,f,v,D,!0)},off(M,f,v,D){if(typeof f!="string"||!M)return;const[G,ee,oe]=X(f,v,D),Ne=oe!==f,mt=Ye(M),Nn=mt[oe]||{},Gn=f.startsWith(".");if(ee===void 0){if(Gn)for(const Vr of Object.keys(mt))Ae(M,mt,Vr,f.slice(1));for(const[Vr,Ns]of Object.entries(Nn)){const Os=Vr.replace(C,"");Ne&&!f.includes(Os)||de(M,mt,oe,Ns.callable,Ns.delegationSelector)}}else{if(!Object.keys(Nn).length)return;de(M,mt,oe,ee,G?v:null)}},trigger(M,f,v){if(typeof f!="string"||!M)return null;const D=x();let G=null,ee=!0,oe=!0,Ne=!1;f!==be(f)&&D&&(G=D.Event(f,v),D(M).trigger(G),ee=!G.isPropagationStopped(),oe=!G.isImmediatePropagationStopped(),Ne=G.isDefaultPrevented());const mt=Ue(new Event(f,{bubbles:ee,cancelable:!0}),v);return Ne&&mt.preventDefault(),oe&&M.dispatchEvent(mt),mt.defaultPrevented&&G&&G.preventDefault(),mt}};function Ue(M,f={}){for(const[v,D]of Object.entries(f))try{M[v]=D}catch{Object.defineProperty(M,v,{configurable:!0,get:()=>D})}return M}function qe(M){if(M==="true")return!0;if(M==="false")return!1;if(M===Number(M).toString())return Number(M);if(M===""||M==="null")return null;if(typeof M!="string")return M;try{return JSON.parse(decodeURIComponent(M))}catch{return M}}function Xe(M){return M.replace(/[A-Z]/g,f=>`-${f.toLowerCase()}`)}const tt={setDataAttribute(M,f,v){M.setAttribute(`data-bs-${Xe(f)}`,v)},removeDataAttribute(M,f){M.removeAttribute(`data-bs-${Xe(f)}`)},getDataAttributes(M){if(!M)return{};const f={},v=Object.keys(M.dataset).filter(D=>D.startsWith("bs")&&!D.startsWith("bsConfig"));for(const D of v){let G=D.replace(/^bs/,"");G=G.charAt(0).toLowerCase()+G.slice(1,G.length),f[G]=qe(M.dataset[D])}return f},getDataAttribute:(M,f)=>qe(M.getAttribute(`data-bs-${Xe(f)}`))};class jt{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(f){return f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f}_mergeConfigObj(f,v){const D=d(v)?tt.getDataAttribute(v,"config"):{};return{...this.constructor.Default,...typeof D=="object"?D:{},...d(v)?tt.getDataAttributes(v):{},...typeof f=="object"?f:{}}}_typeCheckConfig(f,v=this.constructor.DefaultType){for(const[G,ee]of Object.entries(v)){const oe=f[G],Ne=d(oe)?"element":(D=oe)==null?`${D}`:Object.prototype.toString.call(D).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(ee).test(Ne))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${G}" provided type "${Ne}" but expected type "${ee}".`)}var D}}class Nt extends jt{constructor(f,v){super(),(f=p(f))&&(this._element=f,this._config=this._getConfig(v),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),H.off(this._element,this.constructor.EVENT_KEY);for(const f of Object.getOwnPropertyNames(this))this[f]=null}_queueCallback(f,v,D=!0){R(f,v,D)}_getConfig(f){return f=this._mergeConfigObj(f,this._element),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}static getInstance(f){return o.get(p(f),this.DATA_KEY)}static getOrCreateInstance(f,v={}){return this.getInstance(f)||new this(f,typeof v=="object"?v:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(f){return`${f}${this.EVENT_KEY}`}}const cr=M=>{let f=M.getAttribute("data-bs-target");if(!f||f==="#"){let v=M.getAttribute("href");if(!v||!v.includes("#")&&!v.startsWith("."))return null;v.includes("#")&&!v.startsWith("#")&&(v=`#${v.split("#")[1]}`),f=v&&v!=="#"?v.trim():null}return f?f.split(",").map(v=>l(v)).join(","):null},se={find:(M,f=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(f,M)),findOne:(M,f=document.documentElement)=>Element.prototype.querySelector.call(f,M),children:(M,f)=>[].concat(...M.children).filter(v=>v.matches(f)),parents(M,f){const v=[];let D=M.parentNode.closest(f);for(;D;)v.push(D),D=D.parentNode.closest(f);return v},prev(M,f){let v=M.previousElementSibling;for(;v;){if(v.matches(f))return[v];v=v.previousElementSibling}return[]},next(M,f){let v=M.nextElementSibling;for(;v;){if(v.matches(f))return[v];v=v.nextElementSibling}return[]},focusableChildren(M){const f=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(v=>`${v}:not([tabindex^="-"])`).join(",");return this.find(f,M).filter(v=>!y(v)&&m(v))},getSelectorFromElement(M){const f=cr(M);return f&&se.findOne(f)?f:null},getElementFromSelector(M){const f=cr(M);return f?se.findOne(f):null},getMultipleElementsFromSelector(M){const f=cr(M);return f?se.find(f):[]}},nt=(M,f="hide")=>{const v=`click.dismiss${M.EVENT_KEY}`,D=M.NAME;H.on(document,v,`[data-bs-dismiss="${D}"]`,function(G){if(["A","AREA"].includes(this.tagName)&&G.preventDefault(),y(this))return;const ee=se.getElementFromSelector(this)||this.closest(`.${D}`);M.getOrCreateInstance(ee)[f]()})},tn=".bs.alert",ns=`close${tn}`,xs=`closed${tn}`;class Ot extends Nt{static get NAME(){return"alert"}close(){if(H.trigger(this._element,ns).defaultPrevented)return;this._element.classList.remove("show");const f=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,f)}_destroyElement(){this._element.remove(),H.trigger(this._element,xs),this.dispose()}static jQueryInterface(f){return this.each(function(){const v=Ot.getOrCreateInstance(this);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f](this)}})}}nt(Ot,"close"),O(Ot);const ks='[data-bs-toggle="button"]';class xr extends Nt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(f){return this.each(function(){const v=xr.getOrCreateInstance(this);f==="toggle"&&v[f]()})}}H.on(document,"click.bs.button.data-api",ks,M=>{M.preventDefault();const f=M.target.closest(ks);xr.getOrCreateInstance(f).toggle()}),O(xr);const Rn=".bs.swipe",pn=`touchstart${Rn}`,kr=`touchmove${Rn}`,li=`touchend${Rn}`,rs=`pointerdown${Rn}`,gn=`pointerup${Rn}`,zn={endCallback:null,leftCallback:null,rightCallback:null},ht={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ze extends jt{constructor(f,v){super(),this._element=f,f&&Ze.isSupported()&&(this._config=this._getConfig(v),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return zn}static get DefaultType(){return ht}static get NAME(){return"swipe"}dispose(){H.off(this._element,Rn)}_start(f){this._supportPointerEvents?this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX):this._deltaX=f.touches[0].clientX}_end(f){this._eventIsPointerPenTouch(f)&&(this._deltaX=f.clientX-this._deltaX),this._handleSwipe(),B(this._config.endCallback)}_move(f){this._deltaX=f.touches&&f.touches.length>1?0:f.touches[0].clientX-this._deltaX}_handleSwipe(){const f=Math.abs(this._deltaX);if(f<=40)return;const v=f/this._deltaX;this._deltaX=0,v&&B(v>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(H.on(this._element,rs,f=>this._start(f)),H.on(this._element,gn,f=>this._end(f)),this._element.classList.add("pointer-event")):(H.on(this._element,pn,f=>this._start(f)),H.on(this._element,kr,f=>this._move(f)),H.on(this._element,li,f=>this._end(f)))}_eventIsPointerPenTouch(f){return this._supportPointerEvents&&(f.pointerType==="pen"||f.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ot=".bs.carousel",mn=".data-api",Cr="next",qn="prev",Pn="left",nn="right",co=`slide${ot}`,ss=`slid${ot}`,pa=`keydown${ot}`,$l=`mouseenter${ot}`,ci=`mouseleave${ot}`,Cs=`dragstart${ot}`,uo=`load${ot}${mn}`,Rr=`click${ot}${mn}`,Pr="carousel",ur="active",dr=".active",ui=".carousel-item",di=dr+ui,ho={ArrowLeft:nn,ArrowRight:Pn},hr={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Rs={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class ft extends Nt{constructor(f,v){super(f,v),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=se.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Pr&&this.cycle()}static get Default(){return hr}static get DefaultType(){return Rs}static get NAME(){return"carousel"}next(){this._slide(Cr)}nextWhenVisible(){!document.hidden&&m(this._element)&&this.next()}prev(){this._slide(qn)}pause(){this._isSliding&&u(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?H.one(this._element,ss,()=>this.cycle()):this.cycle())}to(f){const v=this._getItems();if(f>v.length-1||f<0)return;if(this._isSliding)return void H.one(this._element,ss,()=>this.to(f));const D=this._getItemIndex(this._getActive());if(D===f)return;const G=f>D?Cr:qn;this._slide(G,v[f])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(f){return f.defaultInterval=f.interval,f}_addEventListeners(){this._config.keyboard&&H.on(this._element,pa,f=>this._keydown(f)),this._config.pause==="hover"&&(H.on(this._element,$l,()=>this.pause()),H.on(this._element,ci,()=>this._maybeEnableCycle())),this._config.touch&&Ze.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const v of se.find(".carousel-item img",this._element))H.on(v,Cs,D=>D.preventDefault());const f={leftCallback:()=>this._slide(this._directionToOrder(Pn)),rightCallback:()=>this._slide(this._directionToOrder(nn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Ze(this._element,f)}_keydown(f){if(/input|textarea/i.test(f.target.tagName))return;const v=ho[f.key];v&&(f.preventDefault(),this._slide(this._directionToOrder(v)))}_getItemIndex(f){return this._getItems().indexOf(f)}_setActiveIndicatorElement(f){if(!this._indicatorsElement)return;const v=se.findOne(dr,this._indicatorsElement);v.classList.remove(ur),v.removeAttribute("aria-current");const D=se.findOne(`[data-bs-slide-to="${f}"]`,this._indicatorsElement);D&&(D.classList.add(ur),D.setAttribute("aria-current","true"))}_updateInterval(){const f=this._activeElement||this._getActive();if(!f)return;const v=Number.parseInt(f.getAttribute("data-bs-interval"),10);this._config.interval=v||this._config.defaultInterval}_slide(f,v=null){if(this._isSliding)return;const D=this._getActive(),G=f===Cr,ee=v||k(this._getItems(),D,G,this._config.wrap);if(ee===D)return;const oe=this._getItemIndex(ee),Ne=Vr=>H.trigger(this._element,Vr,{relatedTarget:ee,direction:this._orderToDirection(f),from:this._getItemIndex(D),to:oe});if(Ne(co).defaultPrevented||!D||!ee)return;const mt=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(oe),this._activeElement=ee;const Nn=G?"carousel-item-start":"carousel-item-end",Gn=G?"carousel-item-next":"carousel-item-prev";ee.classList.add(Gn),j(ee),D.classList.add(Nn),ee.classList.add(Nn),this._queueCallback(()=>{ee.classList.remove(Nn,Gn),ee.classList.add(ur),D.classList.remove(ur,Gn,Nn),this._isSliding=!1,Ne(ss)},D,this._isAnimated()),mt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return se.findOne(di,this._element)}_getItems(){return se.find(ui,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(f){return T()?f===Pn?qn:Cr:f===Pn?Cr:qn}_orderToDirection(f){return T()?f===qn?Pn:nn:f===qn?nn:Pn}static jQueryInterface(f){return this.each(function(){const v=ft.getOrCreateInstance(this,f);if(typeof f!="number"){if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f]()}}else v.to(f)})}}H.on(document,Rr,"[data-bs-slide], [data-bs-slide-to]",function(M){const f=se.getElementFromSelector(this);if(!f||!f.classList.contains(Pr))return;M.preventDefault();const v=ft.getOrCreateInstance(f),D=this.getAttribute("data-bs-slide-to");return D?(v.to(D),void v._maybeEnableCycle()):tt.getDataAttribute(this,"slide")==="next"?(v.next(),void v._maybeEnableCycle()):(v.prev(),void v._maybeEnableCycle())}),H.on(window,uo,()=>{const M=se.find('[data-bs-ride="carousel"]');for(const f of M)ft.getOrCreateInstance(f)}),O(ft);const is=".bs.collapse",L=`show${is}`,$=`shown${is}`,z=`hide${is}`,W=`hidden${is}`,te=`click${is}.data-api`,ie="show",he="collapse",Y="collapsing",_e=`:scope .${he} .${he}`,ce='[data-bs-toggle="collapse"]',ue={parent:null,toggle:!0},xe={parent:"(null|element)",toggle:"boolean"};class ke extends Nt{constructor(f,v){super(f,v),this._isTransitioning=!1,this._triggerArray=[];const D=se.find(ce);for(const G of D){const ee=se.getSelectorFromElement(G),oe=se.find(ee).filter(Ne=>Ne===this._element);ee!==null&&oe.length&&this._triggerArray.push(G)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ue}static get DefaultType(){return xe}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let f=[];if(this._config.parent&&(f=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(G=>G!==this._element).map(G=>ke.getOrCreateInstance(G,{toggle:!1}))),f.length&&f[0]._isTransitioning||H.trigger(this._element,L).defaultPrevented)return;for(const G of f)G.hide();const v=this._getDimension();this._element.classList.remove(he),this._element.classList.add(Y),this._element.style[v]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const D=`scroll${v[0].toUpperCase()+v.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he,ie),this._element.style[v]="",H.trigger(this._element,$)},this._element,!0),this._element.style[v]=`${this._element[D]}px`}hide(){if(this._isTransitioning||!this._isShown()||H.trigger(this._element,z).defaultPrevented)return;const f=this._getDimension();this._element.style[f]=`${this._element.getBoundingClientRect()[f]}px`,j(this._element),this._element.classList.add(Y),this._element.classList.remove(he,ie);for(const v of this._triggerArray){const D=se.getElementFromSelector(v);D&&!this._isShown(D)&&this._addAriaAndCollapsedClass([v],!1)}this._isTransitioning=!0,this._element.style[f]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Y),this._element.classList.add(he),H.trigger(this._element,W)},this._element,!0)}_isShown(f=this._element){return f.classList.contains(ie)}_configAfterMerge(f){return f.toggle=!!f.toggle,f.parent=p(f.parent),f}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const f=this._getFirstLevelChildren(ce);for(const v of f){const D=se.getElementFromSelector(v);D&&this._addAriaAndCollapsedClass([v],this._isShown(D))}}_getFirstLevelChildren(f){const v=se.find(_e,this._config.parent);return se.find(f,this._config.parent).filter(D=>!v.includes(D))}_addAriaAndCollapsedClass(f,v){if(f.length)for(const D of f)D.classList.toggle("collapsed",!v),D.setAttribute("aria-expanded",v)}static jQueryInterface(f){const v={};return typeof f=="string"&&/show|hide/.test(f)&&(v.toggle=!1),this.each(function(){const D=ke.getOrCreateInstance(this,v);if(typeof f=="string"){if(D[f]===void 0)throw new TypeError(`No method named "${f}"`);D[f]()}})}}H.on(document,te,ce,function(M){(M.target.tagName==="A"||M.delegateTarget&&M.delegateTarget.tagName==="A")&&M.preventDefault();for(const f of se.getMultipleElementsFromSelector(this))ke.getOrCreateInstance(f,{toggle:!1}).toggle()}),O(ke);const Me="dropdown",Te=".bs.dropdown",at=".data-api",lt="ArrowUp",jr="ArrowDown",fr=`hide${Te}`,Hn=`hidden${Te}`,Nr=`show${Te}`,pr=`shown${Te}`,Dt=`click${Te}${at}`,_n=`keydown${Te}${at}`,os=`keyup${Te}${at}`,Wn="show",pe='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',et=`${pe}.${Wn}`,Tt=".dropdown-menu",Be=T()?"top-end":"top-start",vn=T()?"top-start":"top-end",fo=T()?"bottom-end":"bottom-start",ga=T()?"bottom-start":"bottom-end",dp=T()?"left-start":"right-start",hp=T()?"right-start":"left-start",Ku={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Gu={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Kn extends Nt{constructor(f,v){super(f,v),this._popper=null,this._parent=this._element.parentNode,this._menu=se.next(this._element,Tt)[0]||se.prev(this._element,Tt)[0]||se.findOne(Tt,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ku}static get DefaultType(){return Gu}static get NAME(){return Me}toggle(){return this._isShown()?this.hide():this.show()}show(){if(y(this._element)||this._isShown())return;const f={relatedTarget:this._element};if(!H.trigger(this._element,Nr,f).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const v of[].concat(...document.body.children))H.on(v,"mouseover",A);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Wn),this._element.classList.add(Wn),H.trigger(this._element,pr,f)}}hide(){if(y(this._element)||!this._isShown())return;const f={relatedTarget:this._element};this._completeHide(f)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(f){if(!H.trigger(this._element,fr,f).defaultPrevented){if("ontouchstart"in document.documentElement)for(const v of[].concat(...document.body.children))H.off(v,"mouseover",A);this._popper&&this._popper.destroy(),this._menu.classList.remove(Wn),this._element.classList.remove(Wn),this._element.setAttribute("aria-expanded","false"),tt.removeDataAttribute(this._menu,"popper"),H.trigger(this._element,Hn,f)}}_getConfig(f){if(typeof(f=super._getConfig(f)).reference=="object"&&!d(f.reference)&&typeof f.reference.getBoundingClientRect!="function")throw new TypeError(`${Me.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return f}_createPopper(){if(s===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let f=this._element;this._config.reference==="parent"?f=this._parent:d(this._config.reference)?f=p(this._config.reference):typeof this._config.reference=="object"&&(f=this._config.reference);const v=this._getPopperConfig();this._popper=s.createPopper(f,this._menu,v)}_isShown(){return this._menu.classList.contains(Wn)}_getPlacement(){const f=this._parent;if(f.classList.contains("dropend"))return dp;if(f.classList.contains("dropstart"))return hp;if(f.classList.contains("dropup-center"))return"top";if(f.classList.contains("dropdown-center"))return"bottom";const v=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return f.classList.contains("dropup")?v?vn:Be:v?ga:fo}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(v=>Number.parseInt(v,10)):typeof f=="function"?v=>f(v,this._element):f}_getPopperConfig(){const f={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(tt.setDataAttribute(this._menu,"popper","static"),f.modifiers=[{name:"applyStyles",enabled:!1}]),{...f,...B(this._config.popperConfig,[f])}}_selectMenuItem({key:f,target:v}){const D=se.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(G=>m(G));D.length&&k(D,v,f===jr,!D.includes(v)).focus()}static jQueryInterface(f){return this.each(function(){const v=Kn.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f]()}})}static clearMenus(f){if(f.button===2||f.type==="keyup"&&f.key!=="Tab")return;const v=se.find(et);for(const D of v){const G=Kn.getInstance(D);if(!G||G._config.autoClose===!1)continue;const ee=f.composedPath(),oe=ee.includes(G._menu);if(ee.includes(G._element)||G._config.autoClose==="inside"&&!oe||G._config.autoClose==="outside"&&oe||G._menu.contains(f.target)&&(f.type==="keyup"&&f.key==="Tab"||/input|select|option|textarea|form/i.test(f.target.tagName)))continue;const Ne={relatedTarget:G._element};f.type==="click"&&(Ne.clickEvent=f),G._completeHide(Ne)}}static dataApiKeydownHandler(f){const v=/input|textarea/i.test(f.target.tagName),D=f.key==="Escape",G=[lt,jr].includes(f.key);if(!G&&!D||v&&!D)return;f.preventDefault();const ee=this.matches(pe)?this:se.prev(this,pe)[0]||se.next(this,pe)[0]||se.findOne(pe,f.delegateTarget.parentNode),oe=Kn.getOrCreateInstance(ee);if(G)return f.stopPropagation(),oe.show(),void oe._selectMenuItem(f);oe._isShown()&&(f.stopPropagation(),oe.hide(),ee.focus())}}H.on(document,_n,pe,Kn.dataApiKeydownHandler),H.on(document,_n,Tt,Kn.dataApiKeydownHandler),H.on(document,Dt,Kn.clearMenus),H.on(document,os,Kn.clearMenus),H.on(document,Dt,pe,function(M){M.preventDefault(),Kn.getOrCreateInstance(this).toggle()}),O(Kn);const as="backdrop",gr="show",po=`mousedown.bs.${as}`,ma={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Qu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class We extends jt{constructor(f){super(),this._config=this._getConfig(f),this._isAppended=!1,this._element=null}static get Default(){return ma}static get DefaultType(){return Qu}static get NAME(){return as}show(f){if(!this._config.isVisible)return void B(f);this._append();const v=this._getElement();this._config.isAnimated&&j(v),v.classList.add(gr),this._emulateAnimation(()=>{B(f)})}hide(f){this._config.isVisible?(this._getElement().classList.remove(gr),this._emulateAnimation(()=>{this.dispose(),B(f)})):B(f)}dispose(){this._isAppended&&(H.off(this._element,po),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const f=document.createElement("div");f.className=this._config.className,this._config.isAnimated&&f.classList.add("fade"),this._element=f}return this._element}_configAfterMerge(f){return f.rootElement=p(f.rootElement),f}_append(){if(this._isAppended)return;const f=this._getElement();this._config.rootElement.append(f),H.on(f,po,()=>{B(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(f){R(f,this._getElement(),this._config.isAnimated)}}const Ps=".bs.focustrap",go=`focusin${Ps}`,mo=`keydown.tab${Ps}`,Ju="backward",Yu={autofocus:!0,trapElement:null},fp={autofocus:"boolean",trapElement:"element"};class Xu extends jt{constructor(f){super(),this._config=this._getConfig(f),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Yu}static get DefaultType(){return fp}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),H.off(document,Ps),H.on(document,go,f=>this._handleFocusin(f)),H.on(document,mo,f=>this._handleKeydown(f)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,H.off(document,Ps))}_handleFocusin(f){const{trapElement:v}=this._config;if(f.target===document||f.target===v||v.contains(f.target))return;const D=se.focusableChildren(v);D.length===0?v.focus():this._lastTabNavDirection===Ju?D[D.length-1].focus():D[0].focus()}_handleKeydown(f){f.key==="Tab"&&(this._lastTabNavDirection=f.shiftKey?Ju:"forward")}}const Zu=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ed=".sticky-top",ls="padding-right",Or="margin-right";class _a{constructor(){this._element=document.body}getWidth(){const f=document.documentElement.clientWidth;return Math.abs(window.innerWidth-f)}hide(){const f=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ls,v=>v+f),this._setElementAttributes(Zu,ls,v=>v+f),this._setElementAttributes(ed,Or,v=>v-f)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ls),this._resetElementAttributes(Zu,ls),this._resetElementAttributes(ed,Or)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(f,v,D){const G=this.getWidth();this._applyManipulationCallback(f,ee=>{if(ee!==this._element&&window.innerWidth>ee.clientWidth+G)return;this._saveInitialAttribute(ee,v);const oe=window.getComputedStyle(ee).getPropertyValue(v);ee.style.setProperty(v,`${D(Number.parseFloat(oe))}px`)})}_saveInitialAttribute(f,v){const D=f.style.getPropertyValue(v);D&&tt.setDataAttribute(f,v,D)}_resetElementAttributes(f,v){this._applyManipulationCallback(f,D=>{const G=tt.getDataAttribute(D,v);G!==null?(tt.removeDataAttribute(D,v),D.style.setProperty(v,G)):D.style.removeProperty(v)})}_applyManipulationCallback(f,v){if(d(f))v(f);else for(const D of se.find(f,this._element))v(D)}}const yn=".bs.modal",td=`hide${yn}`,hi=`hidePrevented${yn}`,nd=`hidden${yn}`,rd=`show${yn}`,pp=`shown${yn}`,cs=`resize${yn}`,gp=`click.dismiss${yn}`,mp=`mousedown.dismiss${yn}`,_o=`keydown.dismiss${yn}`,va=`click${yn}.data-api`,Ul="modal-open",fi="show",js="modal-static",sd={backdrop:!0,focus:!0,keyboard:!0},Bl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ze extends Nt{constructor(f,v){super(f,v),this._dialog=se.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new _a,this._addEventListeners()}static get Default(){return sd}static get DefaultType(){return Bl}static get NAME(){return"modal"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||this._isTransitioning||H.trigger(this._element,rd,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Ul),this._adjustDialog(),this._backdrop.show(()=>this._showElement(f)))}hide(){this._isShown&&!this._isTransitioning&&(H.trigger(this._element,td).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(fi),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){H.off(window,yn),H.off(this._dialog,yn),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new We({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Xu({trapElement:this._element})}_showElement(f){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const v=se.findOne(".modal-body",this._dialog);v&&(v.scrollTop=0),j(this._element),this._element.classList.add(fi),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,H.trigger(this._element,pp,{relatedTarget:f})},this._dialog,this._isAnimated())}_addEventListeners(){H.on(this._element,_o,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),H.on(window,cs,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),H.on(this._element,mp,f=>{H.one(this._element,gp,v=>{this._element===f.target&&this._element===v.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Ul),this._resetAdjustments(),this._scrollBar.reset(),H.trigger(this._element,nd)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(H.trigger(this._element,hi).defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,v=this._element.style.overflowY;v==="hidden"||this._element.classList.contains(js)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(js),this._queueCallback(()=>{this._element.classList.remove(js),this._queueCallback(()=>{this._element.style.overflowY=v},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const f=this._element.scrollHeight>document.documentElement.clientHeight,v=this._scrollBar.getWidth(),D=v>0;if(D&&!f){const G=T()?"paddingLeft":"paddingRight";this._element.style[G]=`${v}px`}if(!D&&f){const G=T()?"paddingRight":"paddingLeft";this._element.style[G]=`${v}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(f,v){return this.each(function(){const D=ze.getOrCreateInstance(this,f);if(typeof f=="string"){if(D[f]===void 0)throw new TypeError(`No method named "${f}"`);D[f](v)}})}}H.on(document,va,'[data-bs-toggle="modal"]',function(M){const f=se.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&M.preventDefault(),H.one(f,rd,D=>{D.defaultPrevented||H.one(f,nd,()=>{m(this)&&this.focus()})});const v=se.findOne(".modal.show");v&&ze.getInstance(v).hide(),ze.getOrCreateInstance(f).toggle(this)}),nt(ze),O(ze);const Dr=".bs.offcanvas",id=".data-api",od=`load${Dr}${id}`,zl="show",ql="showing",vo="hiding",Hl=".offcanvas.show",Lr=`show${Dr}`,ad=`shown${Dr}`,_p=`hide${Dr}`,pi=`hidePrevented${Dr}`,Wl=`hidden${Dr}`,Kl=`resize${Dr}`,ya=`click${Dr}${id}`,ld=`keydown.dismiss${Dr}`,wa={backdrop:!0,keyboard:!0,scroll:!1},vp={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class mr extends Nt{constructor(f,v){super(f,v),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return wa}static get DefaultType(){return vp}static get NAME(){return"offcanvas"}toggle(f){return this._isShown?this.hide():this.show(f)}show(f){this._isShown||H.trigger(this._element,Lr,{relatedTarget:f}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new _a().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(ql),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(zl),this._element.classList.remove(ql),H.trigger(this._element,ad,{relatedTarget:f})},this._element,!0))}hide(){this._isShown&&(H.trigger(this._element,_p).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(vo),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(zl,vo),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new _a().reset(),H.trigger(this._element,Wl)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const f=!!this._config.backdrop;return new We({className:"offcanvas-backdrop",isVisible:f,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:f?()=>{this._config.backdrop!=="static"?this.hide():H.trigger(this._element,pi)}:null})}_initializeFocusTrap(){return new Xu({trapElement:this._element})}_addEventListeners(){H.on(this._element,ld,f=>{f.key==="Escape"&&(this._config.keyboard?this.hide():H.trigger(this._element,pi))})}static jQueryInterface(f){return this.each(function(){const v=mr.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f](this)}})}}H.on(document,ya,'[data-bs-toggle="offcanvas"]',function(M){const f=se.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this))return;H.one(f,Wl,()=>{m(this)&&this.focus()});const v=se.findOne(Hl);v&&v!==f&&mr.getInstance(v).hide(),mr.getOrCreateInstance(f).toggle(this)}),H.on(window,od,()=>{for(const M of se.find(Hl))mr.getOrCreateInstance(M).show()}),H.on(window,Kl,()=>{for(const M of se.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(M).position!=="fixed"&&mr.getOrCreateInstance(M).hide()}),nt(mr),O(mr);const gi={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},cd=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ud=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Gl=(M,f)=>{const v=M.nodeName.toLowerCase();return f.includes(v)?!cd.has(v)||!!ud.test(M.nodeValue):f.filter(D=>D instanceof RegExp).some(D=>D.test(v))},Ql={allowList:gi,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},dd={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Ea={entry:"(string|element|function|null)",selector:"(string|element)"};class hd extends jt{constructor(f){super(),this._config=this._getConfig(f)}static get Default(){return Ql}static get DefaultType(){return dd}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(f=>this._resolvePossibleFunction(f)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(f){return this._checkContent(f),this._config.content={...this._config.content,...f},this}toHtml(){const f=document.createElement("div");f.innerHTML=this._maybeSanitize(this._config.template);for(const[G,ee]of Object.entries(this._config.content))this._setContent(f,ee,G);const v=f.children[0],D=this._resolvePossibleFunction(this._config.extraClass);return D&&v.classList.add(...D.split(" ")),v}_typeCheckConfig(f){super._typeCheckConfig(f),this._checkContent(f.content)}_checkContent(f){for(const[v,D]of Object.entries(f))super._typeCheckConfig({selector:v,entry:D},Ea)}_setContent(f,v,D){const G=se.findOne(D,f);G&&((v=this._resolvePossibleFunction(v))?d(v)?this._putElementInTemplate(p(v),G):this._config.html?G.innerHTML=this._maybeSanitize(v):G.textContent=v:G.remove())}_maybeSanitize(f){return this._config.sanitize?function(v,D,G){if(!v.length)return v;if(G&&typeof G=="function")return G(v);const ee=new window.DOMParser().parseFromString(v,"text/html"),oe=[].concat(...ee.body.querySelectorAll("*"));for(const Ne of oe){const mt=Ne.nodeName.toLowerCase();if(!Object.keys(D).includes(mt)){Ne.remove();continue}const Nn=[].concat(...Ne.attributes),Gn=[].concat(D["*"]||[],D[mt]||[]);for(const Vr of Nn)Gl(Vr,Gn)||Ne.removeAttribute(Vr.nodeName)}return ee.body.innerHTML}(f,this._config.allowList,this._config.sanitizeFn):f}_resolvePossibleFunction(f){return B(f,[this])}_putElementInTemplate(f,v){if(this._config.html)return v.innerHTML="",void v.append(f);v.textContent=f.textContent}}const fd=new Set(["sanitize","allowList","sanitizeFn"]),Mr="fade",yo="show",Jl=".modal",Yl="hide.bs.modal",mi="hover",_i="focus",wn={AUTO:"auto",TOP:"top",RIGHT:T()?"left":"right",BOTTOM:"bottom",LEFT:T()?"right":"left"},pd={allowList:gi,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},gd={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class jn extends Nt{constructor(f,v){if(s===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(f,v),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return pd}static get DefaultType(){return gd}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),H.off(this._element.closest(Jl),Yl,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const f=H.trigger(this._element,this.constructor.eventName("show")),v=(I(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(f.defaultPrevented||!v)return;this._disposePopper();const D=this._getTipElement();this._element.setAttribute("aria-describedby",D.getAttribute("id"));const{container:G}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(G.append(D),H.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(D),D.classList.add(yo),"ontouchstart"in document.documentElement)for(const ee of[].concat(...document.body.children))H.on(ee,"mouseover",A);this._queueCallback(()=>{H.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!H.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(yo),"ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))H.off(f,"mouseover",A);this._activeTrigger.click=!1,this._activeTrigger[_i]=!1,this._activeTrigger[mi]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),H.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(f){const v=this._getTemplateFactory(f).toHtml();if(!v)return null;v.classList.remove(Mr,yo),v.classList.add(`bs-${this.constructor.NAME}-auto`);const D=(G=>{do G+=Math.floor(1e6*Math.random());while(document.getElementById(G));return G})(this.constructor.NAME).toString();return v.setAttribute("id",D),this._isAnimated()&&v.classList.add(Mr),v}setContent(f){this._newContent=f,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(f){return this._templateFactory?this._templateFactory.changeContent(f):this._templateFactory=new hd({...this._config,content:f,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(f){return this.constructor.getOrCreateInstance(f.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Mr)}_isShown(){return this.tip&&this.tip.classList.contains(yo)}_createPopper(f){const v=B(this._config.placement,[this,f,this._element]),D=wn[v.toUpperCase()];return s.createPopper(this._element,f,this._getPopperConfig(D))}_getOffset(){const{offset:f}=this._config;return typeof f=="string"?f.split(",").map(v=>Number.parseInt(v,10)):typeof f=="function"?v=>f(v,this._element):f}_resolvePossibleFunction(f){return B(f,[this._element])}_getPopperConfig(f){const v={placement:f,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:D=>{this._getTipElement().setAttribute("data-popper-placement",D.state.placement)}}]};return{...v,...B(this._config.popperConfig,[v])}}_setListeners(){const f=this._config.trigger.split(" ");for(const v of f)if(v==="click")H.on(this._element,this.constructor.eventName("click"),this._config.selector,D=>{this._initializeOnDelegatedTarget(D).toggle()});else if(v!=="manual"){const D=v===mi?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),G=v===mi?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");H.on(this._element,D,this._config.selector,ee=>{const oe=this._initializeOnDelegatedTarget(ee);oe._activeTrigger[ee.type==="focusin"?_i:mi]=!0,oe._enter()}),H.on(this._element,G,this._config.selector,ee=>{const oe=this._initializeOnDelegatedTarget(ee);oe._activeTrigger[ee.type==="focusout"?_i:mi]=oe._element.contains(ee.relatedTarget),oe._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},H.on(this._element.closest(Jl),Yl,this._hideModalHandler)}_fixTitle(){const f=this._element.getAttribute("title");f&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",f),this._element.setAttribute("data-bs-original-title",f),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(f,v){clearTimeout(this._timeout),this._timeout=setTimeout(f,v)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(f){const v=tt.getDataAttributes(this._element);for(const D of Object.keys(v))fd.has(D)&&delete v[D];return f={...v,...typeof f=="object"&&f?f:{}},f=this._mergeConfigObj(f),f=this._configAfterMerge(f),this._typeCheckConfig(f),f}_configAfterMerge(f){return f.container=f.container===!1?document.body:p(f.container),typeof f.delay=="number"&&(f.delay={show:f.delay,hide:f.delay}),typeof f.title=="number"&&(f.title=f.title.toString()),typeof f.content=="number"&&(f.content=f.content.toString()),f}_getDelegateConfig(){const f={};for(const[v,D]of Object.entries(this._config))this.constructor.Default[v]!==D&&(f[v]=D);return f.selector=!1,f.trigger="manual",f}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(f){return this.each(function(){const v=jn.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f]()}})}}O(jn);const c={...jn.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},g={...jn.DefaultType,content:"(null|string|element|function)"};class _ extends jn{static get Default(){return c}static get DefaultType(){return g}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(f){return this.each(function(){const v=_.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f]()}})}}O(_);const b=".bs.scrollspy",U=`activate${b}`,q=`click${b}`,Z=`load${b}.data-api`,De="active",It="[href]",je=".nav-link",Ft=`${je}, .nav-item > ${je}, .list-group-item`,$t={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},vi={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Kt extends Nt{constructor(f,v){super(f,v),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return $t}static get DefaultType(){return vi}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const f of this._observableSections.values())this._observer.observe(f)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(f){return f.target=p(f.target)||document.body,f.rootMargin=f.offset?`${f.offset}px 0px -30%`:f.rootMargin,typeof f.threshold=="string"&&(f.threshold=f.threshold.split(",").map(v=>Number.parseFloat(v))),f}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(H.off(this._config.target,q),H.on(this._config.target,q,It,f=>{const v=this._observableSections.get(f.target.hash);if(v){f.preventDefault();const D=this._rootElement||window,G=v.offsetTop-this._element.offsetTop;if(D.scrollTo)return void D.scrollTo({top:G,behavior:"smooth"});D.scrollTop=G}}))}_getNewObserver(){const f={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(v=>this._observerCallback(v),f)}_observerCallback(f){const v=oe=>this._targetLinks.get(`#${oe.target.id}`),D=oe=>{this._previousScrollData.visibleEntryTop=oe.target.offsetTop,this._process(v(oe))},G=(this._rootElement||document.documentElement).scrollTop,ee=G>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=G;for(const oe of f){if(!oe.isIntersecting){this._activeTarget=null,this._clearActiveClass(v(oe));continue}const Ne=oe.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(ee&&Ne){if(D(oe),!G)return}else ee||Ne||D(oe)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const f=se.find(It,this._config.target);for(const v of f){if(!v.hash||y(v))continue;const D=se.findOne(decodeURI(v.hash),this._element);m(D)&&(this._targetLinks.set(decodeURI(v.hash),v),this._observableSections.set(v.hash,D))}}_process(f){this._activeTarget!==f&&(this._clearActiveClass(this._config.target),this._activeTarget=f,f.classList.add(De),this._activateParents(f),H.trigger(this._element,U,{relatedTarget:f}))}_activateParents(f){if(f.classList.contains("dropdown-item"))se.findOne(".dropdown-toggle",f.closest(".dropdown")).classList.add(De);else for(const v of se.parents(f,".nav, .list-group"))for(const D of se.prev(v,Ft))D.classList.add(De)}_clearActiveClass(f){f.classList.remove(De);const v=se.find(`${It}.${De}`,f);for(const D of v)D.classList.remove(De)}static jQueryInterface(f){return this.each(function(){const v=Kt.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f]()}})}}H.on(window,Z,()=>{for(const M of se.find('[data-bs-spy="scroll"]'))Kt.getOrCreateInstance(M)}),O(Kt);const _r=".bs.tab",Xl=`hide${_r}`,w1=`hidden${_r}`,E1=`show${_r}`,b1=`shown${_r}`,T1=`click${_r}`,I1=`keydown${_r}`,S1=`load${_r}`,A1="ArrowLeft",gy="ArrowRight",x1="ArrowUp",my="ArrowDown",yp="Home",_y="End",wo="active",vy="fade",wp="show",yy=".dropdown-toggle",Ep=`:not(${yy})`,wy='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',bp=`.nav-link${Ep}, .list-group-item${Ep}, [role="tab"]${Ep}, ${wy}`,k1=`.${wo}[data-bs-toggle="tab"], .${wo}[data-bs-toggle="pill"], .${wo}[data-bs-toggle="list"]`;class Eo extends Nt{constructor(f){super(f),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),H.on(this._element,I1,v=>this._keydown(v)))}static get NAME(){return"tab"}show(){const f=this._element;if(this._elemIsActive(f))return;const v=this._getActiveElem(),D=v?H.trigger(v,Xl,{relatedTarget:f}):null;H.trigger(f,E1,{relatedTarget:v}).defaultPrevented||D&&D.defaultPrevented||(this._deactivate(v,f),this._activate(f,v))}_activate(f,v){f&&(f.classList.add(wo),this._activate(se.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.removeAttribute("tabindex"),f.setAttribute("aria-selected",!0),this._toggleDropDown(f,!0),H.trigger(f,b1,{relatedTarget:v})):f.classList.add(wp)},f,f.classList.contains(vy)))}_deactivate(f,v){f&&(f.classList.remove(wo),f.blur(),this._deactivate(se.getElementFromSelector(f)),this._queueCallback(()=>{f.getAttribute("role")==="tab"?(f.setAttribute("aria-selected",!1),f.setAttribute("tabindex","-1"),this._toggleDropDown(f,!1),H.trigger(f,w1,{relatedTarget:v})):f.classList.remove(wp)},f,f.classList.contains(vy)))}_keydown(f){if(![A1,gy,x1,my,yp,_y].includes(f.key))return;f.stopPropagation(),f.preventDefault();const v=this._getChildren().filter(G=>!y(G));let D;if([yp,_y].includes(f.key))D=v[f.key===yp?0:v.length-1];else{const G=[gy,my].includes(f.key);D=k(v,f.target,G,!0)}D&&(D.focus({preventScroll:!0}),Eo.getOrCreateInstance(D).show())}_getChildren(){return se.find(bp,this._parent)}_getActiveElem(){return this._getChildren().find(f=>this._elemIsActive(f))||null}_setInitialAttributes(f,v){this._setAttributeIfNotExists(f,"role","tablist");for(const D of v)this._setInitialAttributesOnChild(D)}_setInitialAttributesOnChild(f){f=this._getInnerElement(f);const v=this._elemIsActive(f),D=this._getOuterElement(f);f.setAttribute("aria-selected",v),D!==f&&this._setAttributeIfNotExists(D,"role","presentation"),v||f.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(f,"role","tab"),this._setInitialAttributesOnTargetPanel(f)}_setInitialAttributesOnTargetPanel(f){const v=se.getElementFromSelector(f);v&&(this._setAttributeIfNotExists(v,"role","tabpanel"),f.id&&this._setAttributeIfNotExists(v,"aria-labelledby",`${f.id}`))}_toggleDropDown(f,v){const D=this._getOuterElement(f);if(!D.classList.contains("dropdown"))return;const G=(ee,oe)=>{const Ne=se.findOne(ee,D);Ne&&Ne.classList.toggle(oe,v)};G(yy,wo),G(".dropdown-menu",wp),D.setAttribute("aria-expanded",v)}_setAttributeIfNotExists(f,v,D){f.hasAttribute(v)||f.setAttribute(v,D)}_elemIsActive(f){return f.classList.contains(wo)}_getInnerElement(f){return f.matches(bp)?f:se.findOne(bp,f)}_getOuterElement(f){return f.closest(".nav-item, .list-group-item")||f}static jQueryInterface(f){return this.each(function(){const v=Eo.getOrCreateInstance(this);if(typeof f=="string"){if(v[f]===void 0||f.startsWith("_")||f==="constructor")throw new TypeError(`No method named "${f}"`);v[f]()}})}}H.on(document,T1,wy,function(M){["A","AREA"].includes(this.tagName)&&M.preventDefault(),y(this)||Eo.getOrCreateInstance(this).show()}),H.on(window,S1,()=>{for(const M of se.find(k1))Eo.getOrCreateInstance(M)}),O(Eo);const yi=".bs.toast",C1=`mouseover${yi}`,R1=`mouseout${yi}`,P1=`focusin${yi}`,j1=`focusout${yi}`,N1=`hide${yi}`,O1=`hidden${yi}`,D1=`show${yi}`,L1=`shown${yi}`,Ey="hide",md="show",_d="showing",M1={animation:"boolean",autohide:"boolean",delay:"number"},V1={animation:!0,autohide:!0,delay:5e3};class Zl extends Nt{constructor(f,v){super(f,v),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return V1}static get DefaultType(){return M1}static get NAME(){return"toast"}show(){H.trigger(this._element,D1).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Ey),j(this._element),this._element.classList.add(md,_d),this._queueCallback(()=>{this._element.classList.remove(_d),H.trigger(this._element,L1),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(H.trigger(this._element,N1).defaultPrevented||(this._element.classList.add(_d),this._queueCallback(()=>{this._element.classList.add(Ey),this._element.classList.remove(_d,md),H.trigger(this._element,O1)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(md),super.dispose()}isShown(){return this._element.classList.contains(md)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(f,v){switch(f.type){case"mouseover":case"mouseout":this._hasMouseInteraction=v;break;case"focusin":case"focusout":this._hasKeyboardInteraction=v}if(v)return void this._clearTimeout();const D=f.relatedTarget;this._element===D||this._element.contains(D)||this._maybeScheduleHide()}_setListeners(){H.on(this._element,C1,f=>this._onInteraction(f,!0)),H.on(this._element,R1,f=>this._onInteraction(f,!1)),H.on(this._element,P1,f=>this._onInteraction(f,!0)),H.on(this._element,j1,f=>this._onInteraction(f,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(f){return this.each(function(){const v=Zl.getOrCreateInstance(this,f);if(typeof f=="string"){if(v[f]===void 0)throw new TypeError(`No method named "${f}"`);v[f](this)}})}}return nt(Zl),O(Zl),{Alert:Ot,Button:xr,Carousel:ft,Collapse:ke,Dropdown:Kn,Modal:ze,Offcanvas:mr,Popover:_,ScrollSpy:Kt,Tab:Eo,Toast:Zl,Tooltip:jn}})})(AF);const m$=()=>h.jsx("header",{className:"header text-center border-bottom py-3",children:h.jsx("h1",{className:"fw-bold",children:h.jsx(Ke,{to:"/",className:"text-dark",children:"منصة طلاب دار العلوم"})})}),_$=()=>h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"subheader bg-dark text-light fs-6",style:{padding:"11px 0"},children:h.jsxs("div",{className:"container-xl text-center",children:["إعلامات وتحديثات المنصة: ",h.jsx("a",{href:"https://t.me/darelom_students",children:"قناة التليجرام."})]})}),h.jsx("div",{className:"subheader bg-dark border-top text-light fs-6",style:{padding:"11px 0"},children:h.jsxs("div",{className:"container-xl text-center",children:["يمكنكم الآن الاطلاع على ","",h.jsx(Ke,{to:"/degrees_analytics/2025",children:"تحليل نتائج الطلاب للعام الدراسي 2025."})]})})]}),v$=()=>h.jsx("footer",{className:"footer bg-black py-4",children:h.jsxs("div",{className:"container text-center text-light",children:[h.jsxs("div",{className:"d-flex flex-wrap gap-4 gap-sm-5",children:[h.jsxs(Bd,{title:"روابط هامة",children:[h.jsxs(ct,{children:[h.jsx("span",{children:"للإبلاغ عن خطأ: "}),h.jsx(Ke,{to:"/send_problem",children:"أبلغنا من هنا"}),"."]}),h.jsxs(ct,{children:[h.jsx("span",{children:"لاقتراح تعديلات: "}),h.jsx(Ke,{to:"/send_suggestion",children:"اقترح من هنا"}),"."]}),h.jsxs(ct,{children:[h.jsx("span",{children:"إعلامات المنصة: "}),h.jsx("a",{href:"https://t.me/darelom_students",children:"قناة التليجرام"}),"."]}),h.jsx(ct,{children:h.jsx("a",{href:"https://github.com/iabdwahab/darelom-students",children:"ملفات المشروع على GitHub."})})]}),h.jsxs(Bd,{title:"أرشيف نتائج الأعوام",children:[h.jsx(ct,{children:h.jsx(Ke,{to:"/degrees/grade_1/2023_24",children:"الفرقة الأولى / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/degrees/grade_2/2023_24",children:"الفرقة الثانية / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/degrees/grade_3/2023_24",children:"الفرقة الثالثة / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/degrees/grade_4/2023_24",children:"الفرقة الرابعة / 2024."})})]}),h.jsxs(Bd,{title:"أرشيف نتائج الفصول",children:[h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_1/term_1/2024",children:"الفرقة الأولى / الفصل الأول / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_1/term_2/2024",children:"الفرقة الأولى / الفصل الثاني / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_1/term_1/2025",children:"الفرقة الأولى / الفصل الأول / 2025."})}),h.jsx("hr",{}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_2/term_1/2024",children:"الفرقة الثانية / الفصل الأول / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_2/term_2/2024",children:"الفرقة الثانية / الفصل الثاني / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_2/term_1/2025",children:"الفرقة الثانية / الفصل الأول / 2025."})}),h.jsx("hr",{}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_3/term_1/2024",children:"الفرقة الثالثة / الفصل الأول / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_3/term_2/2024",children:"الفرقة الثالثة / الفصل الثاني / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_3/term_1/2025",children:"الفرقة الثالثة / الفصل الأول / 2025."})}),h.jsx("hr",{}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_4/term_1/2024",children:"الفرقة الرابعة / الفصل الأول / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_4/term_2/2024",children:"الفرقة الرابعة / الفصل الثاني / 2024."})}),h.jsx(ct,{children:h.jsx(Ke,{to:"/ranking/grade_4/term_1/2025",children:"الفرقة الرابعة / الفصل الأول / 2025."})})]}),h.jsxs(Bd,{title:"حسابات مطور المنصة",children:[h.jsx(ct,{children:h.jsx("a",{href:"https://iabdwahab.github.io",children:"معرض الأعمال."})}),h.jsx(ct,{children:h.jsx("a",{href:"https://wa.me/+201280552925",children:"WhatsApp."})}),h.jsx(ct,{children:h.jsx("a",{href:"http://t.me/iabdwahab",children:"Telegram."})}),h.jsx(ct,{children:h.jsx("a",{href:"https://www.linkedin.com/in/iabdwahab/",children:"LinkedIn."})}),h.jsx(ct,{children:h.jsx("a",{href:"https://github.com/iabdwahab",children:"GitHub."})})]})]}),h.jsx("hr",{}),h.jsxs("p",{className:"m-0",children:[h.jsx("span",{children:"تم إنشاء المنصة بواسطة: "}),h.jsx("span",{className:"text-warning",children:"طلاب الدفعة 153."})]})]})});function Bd({title:t,children:e}){return h.jsxs("div",{className:"text-end",children:[h.jsxs("h4",{className:"mb-3",children:[t,":"]}),e]})}function ct({children:t}){return h.jsxs("p",{className:"m-0",children:["- ",t]})}const y$=()=>{const{pathname:t}=lr();F.useEffect(()=>{window.scrollTo(0,0)},[t])},w$=()=>{const[t,e]=F.useState(localStorage.getItem("theme")||"light");function n(){document.documentElement.getAttribute("data-bs-theme")==="dark"?(document.documentElement.setAttribute("data-bs-theme","light"),localStorage.setItem("theme","light"),e("light")):(document.documentElement.setAttribute("data-bs-theme","dark"),localStorage.setItem("theme","dark"),e("dark"))}return h.jsx("button",{className:"btn btn-primary w-100 mt-2 p-2",onClick:n,children:t==="light"?"الوضع الداكن [لوليد]":"الوضع العادي [ليس لوليد]"})},E$=()=>{const t=gt(),e=JSON.parse(localStorage.getItem("loggedinUser")),n=JSON.parse(localStorage.getItem("loggedinUserInfo"));async function r(){await Kj(Uu),localStorage.setItem("loggedinUser",null),localStorage.setItem("loggedinUserInfo",null),t("/")}return h.jsx("div",{className:"border-bottom",children:h.jsxs("div",{className:"container-xl py-3",children:[e&&h.jsx(h.Fragment,{children:h.jsxs("p",{className:"fs-4",children:[h.jsx("span",{children:"أهلًا، "}),h.jsxs("span",{className:"fw-bold",children:[n.name,"!"]})]})}),n?h.jsxs("div",{className:"d-flex gap-2",children:[h.jsxs("button",{className:`btn btn-primary w-100 p-2 ${!(n!=null&&n.write_permission)&&"disabled"}`,onClick:()=>t(`/${n==null?void 0:n.grade}/send_question_selector`),children:["أضف سؤالًا ",!(n!=null&&n.write_permission)&&"[تتم مراجعة حسابك]"]}),h.jsx("button",{className:"btn btn-danger w-100 p-2",onClick:r,children:"تسجيل الخروج"})]}):h.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t("signin"),children:"تسجيل الدخول"}),h.jsx(w$,{})]})})},Wt=({hasText:t=!0})=>h.jsxs("div",{className:"d-block text-center py-4",children:[h.jsx("div",{className:"spinner-border text-primary",role:"status",children:h.jsx("span",{className:"sr-only d-none",children:"..."})}),t?h.jsx("p",{className:"fw-bold fs-5 mt-2",children:"صلِّ علَى النَّبِيِّ."}):""]}),b$=()=>{const[t,e]=F.useState(!0);return F.useEffect(()=>{YI(Uu,()=>{e(!1)})},[]),h.jsxs("div",{className:"d-flex flex-column min-vh-100",children:[h.jsx(m$,{}),h.jsx(_$,{}),h.jsx(E$,{}),h.jsx("div",{className:"container-xl flex-grow-1 py-3",children:h.jsx("div",{children:t?h.jsx(Wt,{}):h.jsx(tF,{})})}),h.jsx(v$,{}),h.jsx(y$,{})]})},T$=({currentStepIndex:t,setCurrentStepIndex:e,selections:n,setSelections:r})=>{function s(){t>0&&(e(t-1),r(n.slice(0,n.length-1)))}const i=t===0;return h.jsx("button",{className:`btn btn-danger ${i?"d-none":"d-block"}`,onClick:s,children:"رجوع"})},I$=({option:t,stepsList:e,currentStepIndex:n,setCurrentStepIndex:r,selections:s,setSelections:i})=>{const o=gt();function a(){if(t.option_data==="test_yourself")return o("/test_yourself");n<e.length-1&&t.will_next?(r(n+1),i([...s,t.option_data])):o(`${s.join("/")}/${t.option_data}`)}const l=`${t.option_text}`;return h.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:a,children:l})},S$=({stepsList:t})=>{var a,l;const e=lr(),[n,r]=F.useState(((a=e.state)==null?void 0:a.initialStepIndex)||0),[s,i]=F.useState(((l=e.state)==null?void 0:l.selections)||[]),o=t[n];return h.jsxs("div",{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:o.title}),h.jsx(T$,{currentStepIndex:n,setCurrentStepIndex:r,selections:s,setSelections:i})]}),h.jsx("div",{className:"row g-2 my-2",children:o.options.map((u,d)=>{var p;if(n===0||(p=u.availableAt)!=null&&p.includes(s[0]))return h.jsx("div",{className:"col-sm-6",children:h.jsx(I$,{option:u,stepsList:t,currentStepIndex:n,setCurrentStepIndex:r,selections:s,setSelections:i})},d)})})]})},Cn=({children:t,fontSize:e,py:n})=>h.jsx("h2",{className:`fs-${e||4} py-${n||2} fw-medium bg-dark text-center text-light`,children:t}),A$=()=>h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{scope:"col",children:"#"}),h.jsx("th",{scope:"col",children:"الاسم"}),h.jsx("th",{scope:"col",className:"text-center",children:"النسبة"})]})}),eo="https://iabdwahab.github.io";async function x$(){return await(await fetch(`${eo}/darelom-students-data/top_degrees.json`)).json()}const k$=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0);return F.useEffect(()=>{async function s(){let i;i=await x$(),e(i),r(!1)}s()},[]),h.jsxs("div",{className:"top-students",children:[h.jsx(Cn,{children:"أوائل الفرق"}),n?h.jsx(Wt,{}):h.jsx("div",{className:"row g-2 mt-1",children:t.map((s,i)=>h.jsxs("div",{className:"border-secondary-subtle rounded-2 py-1 my-0 col-lg-6",children:[h.jsx("h3",{className:"fs-5 bg-dark text-light p-2 my-0",children:s.grade_ar_name}),h.jsxs("table",{className:"table table-striped border",children:[h.jsx(A$,{}),h.jsx(C$,{gradeDegree:s})]}),h.jsx(Ke,{to:`degrees/${s.grade}/2024_25`,className:"d-block my-2 btn btn-primary fw-bold",children:"عرض القائمة كاملة"})]},i))})]})};function C$({gradeDegree:t}){return h.jsx("tbody",{children:t.list.map((e,n)=>h.jsx(R$,{student:e,grade:t.grade},n))})}function R$({student:t,grade:e}){const n=gt();return h.jsxs("tr",{className:"degree_tr-linked",onClick:()=>n(`/degrees/${e}/2024_25/${t.id}`),children:[h.jsx("th",{scope:"row",children:t.rank}),h.jsx("td",{children:t.name}),h.jsxs("td",{className:"text-center",children:["%",t.total_percentage]})]})}const P$=[{title:"اختر الفرقة:",options:[{option_text:"الفرقة الأولى",option_data:"grade_1",will_next:!0,available:!0},{option_text:"الفرقة الثانية",option_data:"grade_2",will_next:!0,available:!0},{option_text:"الفرقة الثالثة",option_data:"grade_3",will_next:!0,available:!0},{option_text:"الفرقة الرابعة",option_data:"grade_4",will_next:!0,available:!0},{option_text:"مواد مشتركة",option_data:"general_subjects",will_next:!1,available:!0}]},{title:"عم تبحث؟",options:[{option_text:"جدول المحاضرات",option_data:"schedule",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"كتب دراسية",option_data:"books",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"تسجيلات محاضرات",option_data:"lectures_recordings",will_next:!0,availableAt:["grade_1","grade_2","grade_3"]},{option_text:"اختبر نفسك - أسئلة الطلاب",option_data:"test_yourself_students",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"اختبر نفسك [نسخة تجريبية]",option_data:"test_yourself",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"مصادر إضافية",option_data:"more_resources",will_next:!0,availableAt:["grade_2"]},{option_text:"شروحات",option_data:"explanations",will_next:!1,availableAt:[]},{option_text:"امتحانات الأعوام السابقة",option_data:"final_exams",will_next:!0,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]},{title:"اختر الفصل الدراسي:",options:[{option_text:"الفصل الدراسي الأول",option_data:"term_1",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]},{option_text:"الفصل الدراسي الثاني",option_data:"term_2",will_next:!1,availableAt:["grade_1","grade_2","grade_3","grade_4"]}]}],j$=()=>h.jsxs(h.Fragment,{children:[h.jsx(S$,{stepsList:P$}),h.jsx(k$,{})]});async function N$(t,e){const r=await(await fetch(`${eo}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();return r.degrees.sort((s,i)=>i.total-s.total),{degrees:r.degrees,studentsCount:r.degrees.length}}async function O$(t){const e=await OA(t),n=e.docs.map(s=>s.data()),r=e.docs[e.docs.length-1];return{degreesData:n,lastStudentData:r}}async function D$(t){return(await E2(t)).data().count}function xt(t){return{grade_1:"الفرقة الأولى",grade_2:"الفرقة الثانية",grade_3:"الفرقة الثالثة",grade_4:"الفرقة الرابعة",term_1:"الفصل الدراسي الأول",term_2:"الفصل الدراسي الثاني",nahw:"النحو",sarf:"الصرف",english:"إنجليزي",elm_allugha:"علم اللغة",albalagha:"البلاغة",adab_gahily:"أدب جاهلي",falsafa:"فلسفة",seera_khoalfaa:"السيرة وتاريخ الخلفاء",quran_ebadat:"القرآن والعبادات",naqd_qadim:"نقد أدبي قديم",nsoos_gahilya:"نصوص جاهلية",farsy:"فارسي",ebry:"عبري",riyadat_aamal:"ريادة أعمال",nazm_oslobiya:"النظم والأسلوبية",quran_ahwal:"القرآن الكريم والأحوال الشخصية",adab_islamy_omawy:"أدب إسلامي وأموي",arood:"العَروض",mawarith:"مواريث",maajim_aswat:"المعاجم وعلم الأصوات",balaghat_quran:"بلاغة القرآن",qaet_bahth:"قاعة البحث",nsoos_islamya_omawya:"نصوص إسلامية وأموية",tareekh_omawy_abasy:"تاريخ أموي وعباسي",aqida:"العقيدة",adab_moqaran:"أدب مقارن",adab_abasy_andalusy:"أدب عباسي وأندلسي",olom_quran:"علوم القرآن",tareekh_misr:"تاريخ مصر الحديث",tafseer:"تفسير",elm_kalam:"علم الكلام",nsoos_abasya_andalusya:"نصوص عباسية وأندلسية",ittijahat_lughawiya:"اتجاهات لغوية",adab_hadith:"أدب حديث",hadara_nozom:"حضارة ونظم",tasawof:"تصوف",osool_fiqh:"أصول فقه",horoob_salibiya:"حروب صليبيبة",nsoos_haditha:"نصوص أدبية حديثة",naqd_hadith:"نقد أدبي حديث",mojalad_tasgilat:"مجلد مجمع للمواد",groupped_channel:"قناة تجمع المواد"}[t]}const L$=({student:t,grade:e,year:n})=>{let{id:r,name:s,rank:i,total:o,total_percentage:a}=t;const l=gt(),u=s==="مريم سمير أحمد عبدالصمد";function d(){u||l(`/degrees/${e}/${n}/${t.id}`)}return u&&(r="محجوب",s="محجوب"),h.jsxs("tr",{className:"degree_tr-linked",onClick:d,children:[h.jsx("th",{scope:"row",className:"text-center",children:i}),h.jsx("td",{className:"text-center",children:r}),h.jsx("td",{style:{whiteSpace:"nowrap"},children:s}),h.jsx("td",{className:"text-center",children:o}),h.jsxs("td",{className:"text-center",children:["%",a]})]})},qx=()=>{const t=[{isCentered:!0,text:"#"},{isCentered:!0,text:"رقم الجلوس"},{isCentered:!1,text:"الاسم"},{isCentered:!0,text:"الإجمالي"},{isCentered:!0,text:"النسبة"}];return h.jsx("thead",{children:h.jsx("tr",{children:t.map((e,n)=>h.jsx("th",{scope:"col",className:`${e.isCentered&&"text-center"}`,children:e.text},n))})})},Hx=({studentsCount:t})=>{const e=h.jsx("span",{className:"fw-bold",children:t||"غير محدد"});return h.jsxs("h3",{className:"py-2 fs-4",children:["عدد الطلاب: ",e,"."]})},M$=({degreesCollection:t,lastStudent:e,setDataAndHideLoaderFirestore:n})=>{function r(){const s=u2(t,d2("rank","asc"),f2(e),h2(40));n(s)}return h.jsx("button",{className:"btn btn-primary w-100",onClick:r,children:"عرض المزيد"})},V$=()=>h.jsx("h3",{className:"fw-bold text-center fs-5",children:"انتهت النتائج."}),Ml=()=>h.jsx("button",{className:"btn btn-primary w-100 disabled",children:h.jsx("div",{className:"spinner-border spinner-border-sm",role:"status"})}),F$=()=>{const{grade:t}=fn(),e=gt(),n=F.useRef(null),[r,s]=F.useState(!1);return F.useEffect(()=>{const i=n.current;i.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();try{s(!0);const a=i["student_id-input"].value;if(i.checkValidity()){const l=es(An,`${t}/degrees/2023_24`,a);(await ri(l)).exists()?e(`${a}`):i.classList.add("was-validated"),n.current.reset()}else i.classList.add("was-validated")}catch(a){console.log(a.message)}finally{s(!1)}})},[]),h.jsxs("form",{className:"row g-3 mt-0 needs-validation",noValidate:!0,ref:n,children:[h.jsx("p",{className:"mb-2 fw-bold",children:"ابحث برقم الجلوس:"}),h.jsxs("div",{className:"col-12 col-sm-10 m-0 mb-2",children:[h.jsx("input",{type:"text",className:"form-control py-2",id:"student_id-input",placeholder:"رقم الجلوس",minLength:5,maxLength:5,required:!0}),h.jsx("div",{className:"invalid-feedback",children:"رقم الجلوس غير موجود."})]}),h.jsx("div",{className:"col-12 col-sm-2 m-0",children:r?h.jsx(Ml,{}):h.jsx("button",{type:"submit",className:"btn btn-primary mb-3 py-2 w-100",children:"ابحث"})})]})};function PE(t,e){if(t.length)if(e==="duplicated"){t.sort((s,i)=>i.total-s.total);let n=1,r=t[0].total;for(let s=0;s<t.length;s++)t[s].total!==r&&(n=n+1,r=t[s].total),t[s].rank=n}else for(let n=0;n<t.length;n++)t[n].rank=n+1}const $$=()=>{const[t,e]=F.useState([]),[n,r]=F.useState(!0),{grade:s,year:i}=fn(),[o,a]=F.useState(null),[l,u]=F.useState(null),[d,p]=F.useState(!1),[m,y]=F.useState("normal"),I=F.useRef(null),{pathname:A}=lr(),[j,x]=SF(),E=$u(An,`${s}/degrees/${i}`);async function T(R){const k=await D$(E),{degreesData:w,lastStudentData:S}=await O$(R);a(k),e([...t,...w]),u(S),S.data().rank===k&&p(!0),r(!1)}async function O(){const R=await N$(s,i);e(R.degrees),a(R.degrees.length),r(!1),p(!0)}function B(R){y(R.target.value),PE(t,R.target.value),x({sortMethod:R.target.value})}return F.useEffect(()=>{O(),I.current&&(I.current.value="normal")},[A]),PE(t,j.get("sortMethod")||"normal"),h.jsxs("div",{children:[h.jsxs(Cn,{fontSize:3,py:3,children:["ترتيب نتائج ",xt(s)," ",i.split("_").join("/")]}),h.jsx(Hx,{studentsCount:o}),h.jsx(F$,{}),h.jsxs("div",{className:"d-flex flex-column gap-2 mb-4",children:[h.jsx("h5",{children:"طريقة الترتيب:"}),h.jsxs("select",{ref:I,onChange:B,className:"form-select w-100","aria-label":"Default select example",style:{width:"100%",maxWidth:"400px"},children:[h.jsx("option",{value:"normal",defaultValue:!0,children:"الرتيب العادي"}),h.jsx("option",{value:"duplicated",children:"باعتبار المركز المكرر"})]})]}),h.jsxs("div",{className:"table-responsive border",children:[h.jsxs("table",{className:"table table-striped table-bordered",children:[h.jsx(qx,{}),h.jsx("tbody",{children:t.map(R=>h.jsx(L$,{student:R,grade:s,year:i},R.id))})]}),n&&h.jsx(Wt,{})]}),h.jsx("div",{className:"mt-3 mb-1",children:d?h.jsx(V$,{}):h.jsx(M$,{degreesCollection:E,lastStudent:l,setDataAndHideLoaderFirestore:T})})]})},U$="modulepreload",B$=function(t){return"/darelom-students/"+t},jE={},zu=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.all(n.map(a=>{if(a=B$(a),a in jE)return;jE[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":U$,l||(d.as="script",d.crossOrigin=""),d.href=a,o&&d.setAttribute("nonce",o),document.head.appendChild(d),l)return new Promise((p,m)=>{d.addEventListener("load",p),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},z$=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zu(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class ay extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class q$ extends ay{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class H$ extends ay{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class W$ extends ay{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Bm;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Bm||(Bm={}));var K$=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class G${constructor(e,{headers:n={},customFetch:r,region:s=Bm.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=z$(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var r;return K$(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=n;let a={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(I=>{throw new q$(I)}),p=d.headers.get("x-relay-error");if(p&&p==="true")throw new H$(d);if(!d.ok)throw new W$(d);let m=((r=d.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return m==="application/json"?y=yield d.json():m==="application/octet-stream"?y=yield d.blob():m==="text/event-stream"?y=d:m==="multipart/form-data"?y=yield d.formData():y=yield d.text(),{data:y,error:null}}catch(s){return{data:null,error:s}}})}}var Ln={},ly={},rp={},qu={},sp={},ip={},Q$=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tl=Q$();const J$=Tl.fetch,Wx=Tl.fetch.bind(Tl),Kx=Tl.Headers,Y$=Tl.Request,X$=Tl.Response,Vl=Object.freeze(Object.defineProperty({__proto__:null,Headers:Kx,Request:Y$,Response:X$,default:Wx,fetch:J$},Symbol.toStringTag,{value:"Module"})),Z$=ZE(Vl);var op={};Object.defineProperty(op,"__esModule",{value:!0});let e4=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};op.default=e4;var Gx=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ip,"__esModule",{value:!0});const t4=Gx(Z$),n4=Gx(op);let r4=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=t4.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,n){return this.headers=Object.assign({},this.headers),this.headers[e]=n,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,a,l;let u=null,d=null,p=null,m=i.status,y=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=x:d=JSON.parse(x))}const A=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),j=(a=i.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");A&&j&&j.length>1&&(p=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,p=null,m=406,y="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const A=await i.text();try{u=JSON.parse(A),Array.isArray(u)&&i.status===404&&(d=[],u=null,m=200,y="OK")}catch{i.status===404&&A===""?(m=204,y="No Content"):u={message:A}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,m=200,y="OK"),u&&this.shouldThrowOnError)throw new n4.default(u)}return{error:u,data:d,count:p,status:m,statusText:y}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,a,l;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(a=i==null?void 0:i.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=i==null?void 0:i.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,n)}returns(){return this}overrideTypes(){return this}};ip.default=r4;var s4=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sp,"__esModule",{value:!0});const i4=s4(ip);let o4=class extends i4.default{select(e){let n=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!n?"":(s==='"'&&(n=!n),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${e}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:r=n}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,n,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var a;const l=[e?"analyze":null,n?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};sp.default=o4;var a4=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qu,"__esModule",{value:!0});const l4=a4(sp);let c4=class extends l4.default{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const r=Array.from(new Set(n)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${n}`),this}match(e){return Object.entries(e).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(e,n,r){return this.url.searchParams.append(e,`not.${n}.${r}`),this}or(e,{foreignTable:n,referencedTable:r=n}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,n,r){return this.url.searchParams.append(e,`${n}.${r}`),this}};qu.default=c4;var u4=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rp,"__esModule",{value:!0});const fc=u4(qu);let d4=class{constructor(e,{headers:n={},schema:r,fetch:s}){this.url=e,this.headers=n,this.schema=r,this.fetch=s}select(e,{head:n=!1,count:r}={}){const s=n?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),r&&(this.headers.Prefer=`count=${r}`),new fc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),n&&i.push(`count=${n}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){const a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new fc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const o="POST",a=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const l=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new fc.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),this.headers.Prefer=s.join(","),new fc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new fc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};rp.default=d4;var ap={},lp={};Object.defineProperty(lp,"__esModule",{value:!0});lp.version=void 0;lp.version="0.0.0-automated";Object.defineProperty(ap,"__esModule",{value:!0});ap.DEFAULT_HEADERS=void 0;const h4=lp;ap.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${h4.version}`};var Qx=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ly,"__esModule",{value:!0});const f4=Qx(rp),p4=Qx(qu),g4=ap;let m4=class Jx{constructor(e,{headers:n={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},g4.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=s}from(e){const n=new URL(`${this.url}/${e}`);return new f4.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Jx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:r=!1,get:s=!1,count:i}={}){let o;const a=new URL(`${this.url}/rpc/${e}`);let l;r||s?(o=r?"HEAD":"GET",Object.entries(n).filter(([d,p])=>p!==void 0).map(([d,p])=>[d,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([d,p])=>{a.searchParams.append(d,p)})):(o="POST",l=n);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new p4.default({method:o,url:a,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};ly.default=m4;var Fl=tr&&tr.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.PostgrestError=Ln.PostgrestBuilder=Ln.PostgrestTransformBuilder=Ln.PostgrestFilterBuilder=Ln.PostgrestQueryBuilder=Ln.PostgrestClient=void 0;const Yx=Fl(ly);Ln.PostgrestClient=Yx.default;const Xx=Fl(rp);Ln.PostgrestQueryBuilder=Xx.default;const Zx=Fl(qu);Ln.PostgrestFilterBuilder=Zx.default;const e1=Fl(sp);Ln.PostgrestTransformBuilder=e1.default;const t1=Fl(ip);Ln.PostgrestBuilder=t1.default;const n1=Fl(op);Ln.PostgrestError=n1.default;var _4=Ln.default={PostgrestClient:Yx.default,PostgrestQueryBuilder:Xx.default,PostgrestFilterBuilder:Zx.default,PostgrestTransformBuilder:e1.default,PostgrestBuilder:t1.default,PostgrestError:n1.default};const{PostgrestClient:v4,PostgrestQueryBuilder:hB,PostgrestFilterBuilder:fB,PostgrestTransformBuilder:pB,PostgrestBuilder:gB,PostgrestError:mB}=_4;function y4(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const w4=y4(),E4="2.11.15",b4=`realtime-js/${E4}`,T4="1.0.0",r1=1e4,I4=1e3;var Bc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Bc||(Bc={}));var an;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(an||(an={}));var Hr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Hr||(Hr={}));var zm;(function(t){t.websocket="websocket"})(zm||(zm={}));var Ro;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ro||(Ro={}));class S4{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),i=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+s));o=o+s;const l=r.decode(e.slice(o,o+i));o=o+i;const u=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:u}}}class s1{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var rt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(rt||(rt={}));const NE=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,o)=>(i[o]=A4(o,t,e,s),i),{})},A4=(t,e,n,r)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=n[t];return i&&!r.includes(i)?i1(i,o):qm(o)},i1=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return R4(e,n)}switch(t){case rt.bool:return x4(e);case rt.float4:case rt.float8:case rt.int2:case rt.int4:case rt.int8:case rt.numeric:case rt.oid:return k4(e);case rt.json:case rt.jsonb:return C4(e);case rt.timestamp:return P4(e);case rt.abstime:case rt.date:case rt.daterange:case rt.int4range:case rt.int8range:case rt.money:case rt.reltime:case rt.text:case rt.time:case rt.timestamptz:case rt.timetz:case rt.tsrange:case rt.tstzrange:return qm(e);default:return qm(e)}},qm=t=>t,x4=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},k4=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},C4=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},R4=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let i;const o=t.slice(1,n);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>i1(e,a))}return t},P4=t=>typeof t=="string"?t.replace(" ","T"):t,o1=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class hg{constructor(e,n,r={},s=r1){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var OE;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(OE||(OE={}));class zc{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=zc.syncState(this.state,s,i,o),this.pendingDiffs.forEach(l=>{this.state=zc.syncDiff(this.state,l,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=zc.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const i=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(i,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const p=i[u];if(p){const m=d.map(j=>j.presence_ref),y=p.map(j=>j.presence_ref),I=d.filter(j=>y.indexOf(j.presence_ref)<0),A=p.filter(j=>m.indexOf(j.presence_ref)<0);I.length>0&&(a[u]=I),A.length>0&&(l[u]=A)}else a[u]=d}),this.syncDiff(i,{joins:a,leaves:l},r,s)}static syncDiff(e,n,r,s){const{joins:i,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(a,l)=>{var u;const d=(u=e[a])!==null&&u!==void 0?u:[];if(e[a]=this.cloneDeep(l),d.length>0){const p=e[a].map(y=>y.presence_ref),m=d.filter(y=>p.indexOf(y.presence_ref)<0);e[a].unshift(...m)}r(a,d,l)}),this.map(o,(a,l)=>{let u=e[a];if(!u)return;const d=l.map(p=>p.presence_ref);u=u.filter(p=>d.indexOf(p.presence_ref)<0),e[a]=u,s(a,u,l),u.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var DE;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(DE||(DE={}));var LE;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(LE||(LE={}));var Ms;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ms||(Ms={}));class cy{constructor(e,n={config:{}},r){this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=an.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new hg(this,Hr.join,this.params,this.timeout),this.rejoinTimer=new s1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=an.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=an.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=an.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=an.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Hr.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new zc(this),this.broadcastEndpointURL=o1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,n=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==an.closed){const{config:{broadcast:i,presence:o,private:a}}=this.params;this._onError(d=>e==null?void 0:e(Ms.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Ms.CLOSED));const l={},u={broadcast:i,presence:o,postgres_changes:(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&s!==void 0?s:[],private:a};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},l)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var p;if(this.socket.setAuth(),d===void 0){e==null||e(Ms.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,y=(p=m==null?void 0:m.length)!==null&&p!==void 0?p:0,I=[];for(let A=0;A<y;A++){const j=m[A],{filter:{event:x,schema:E,table:T,filter:O}}=j,B=d&&d[A];if(B&&B.event===x&&B.schema===E&&B.table===T&&B.filter===O)I.push(Object.assign(Object.assign({},j),{id:B.id}));else{this.unsubscribe(),this.state=an.errored,e==null||e(Ms.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,e&&e(Ms.SUBSCRIBED);return}}).receive("error",d=>{this.state=an.errored,e==null||e(Ms.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ms.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this._on(e,n,r)}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=an.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Hr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new hg(this,Hr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,n,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(i),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new hg(this,e,n,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:u,join:d}=Hr;if(r&&[a,l,u,d].indexOf(o)>=0&&r!==this._joinRef())return;let m=this._onMessage(o,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(y=>{var I,A,j;return((I=y.filter)===null||I===void 0?void 0:I.event)==="*"||((j=(A=y.filter)===null||A===void 0?void 0:A.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(y=>y.callback(m,r)):(i=this.bindings[o])===null||i===void 0||i.filter(y=>{var I,A,j,x,E,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in y){const O=y.id,B=(I=y.filter)===null||I===void 0?void 0:I.event;return O&&((A=n.ids)===null||A===void 0?void 0:A.includes(O))&&(B==="*"||(B==null?void 0:B.toLocaleLowerCase())===((j=n.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const O=(E=(x=y==null?void 0:y.filter)===null||x===void 0?void 0:x.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return O==="*"||O===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===o}).map(y=>{if(typeof m=="object"&&"ids"in m){const I=m.data,{schema:A,table:j,commit_timestamp:x,type:E,errors:T}=I;m=Object.assign(Object.assign({},{schema:A,table:j,commit_timestamp:x,eventType:E,new:{},old:{},errors:T}),this._getPayloadRecords(I))}y.callback(m,r)})}_isClosed(){return this.state===an.closed}_isJoined(){return this.state===an.joined}_isJoining(){return this.state===an.joining}_isLeaving(){return this.state===an.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),i={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&cy.isEqual(s.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Hr.close,{},e)}_onError(e){this._on(Hr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=an.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=NE(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=NE(e.columns,e.old_record)),n}}const ME=()=>{},j4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class N4{constructor(e,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=r1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ME,this.ref=0,this.logger=ME,this.conn=null,this.sendBuffer=[],this.serializer=new S4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...a)=>zu(async()=>{const{default:l}=await Promise.resolve().then(()=>Vl);return{default:l}},void 0).then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${e}/${zm.websocket}`,this.httpEndpoint=o1(e),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const s=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(i,o)=>o(JSON.stringify(i)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new s1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=w4),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:T4}))}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Bc.connecting:return Ro.Connecting;case Bc.open:return Ro.Open;case Bc.closing:return Ro.Closing;default:return Ro.Closed}}isConnected(){return this.connectionState()===Ro.Open}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new cy(`realtime:${e}`,n,this);return this.channels.push(i),i}}push(e){const{topic:n,event:r,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let n=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:b4};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Hr.access_token,{access_token:n})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(I4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:r,event:s,payload:i,ref:o}=n;r==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${r} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(a=>a._isMember(r)).forEach(a=>a._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(a=>a(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Hr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([j4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class uy extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ut(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class O4 extends uy{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Hm extends uy{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var D4=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const a1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zu(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},L4=()=>D4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield zu(()=>Promise.resolve().then(()=>Vl),void 0)).Response:Response}),Wm=t=>{if(Array.isArray(t))return t.map(n=>Wm(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Wm(r)}),e};var ha=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const fg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),M4=(t,e,n)=>ha(void 0,void 0,void 0,function*(){const r=yield L4();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{e(new O4(fg(s),t.status||500))}).catch(s=>{e(new Hm(fg(s),s))}):e(new Hm(fg(t),t))}),V4=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r&&(s.body=JSON.stringify(r)),Object.assign(Object.assign({},s),n))};function Hu(t,e,n,r,s,i){return ha(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,V4(e,r,s,i)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>M4(l,a,r))})})}function uf(t,e,n,r){return ha(this,void 0,void 0,function*(){return Hu(t,"GET",e,n,r)})}function Ai(t,e,n,r,s){return ha(this,void 0,void 0,function*(){return Hu(t,"POST",e,r,s,n)})}function F4(t,e,n,r,s){return ha(this,void 0,void 0,function*(){return Hu(t,"PUT",e,r,s,n)})}function $4(t,e,n,r){return ha(this,void 0,void 0,function*(){return Hu(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function l1(t,e,n,r,s){return ha(this,void 0,void 0,function*(){return Hu(t,"DELETE",e,r,s,n)})}var On=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const U4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},VE={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class B4{constructor(e,n={},r,s){this.url=e,this.headers=n,this.bucketId=r,this.fetch=a1(s)}uploadOrUpdate(e,n,r,s){return On(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},VE),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),l&&i.append("metadata",this.encodeMetadata(l))):(i=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const u=this._removeEmptyFolders(n),d=this._getFinalPath(u),p=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{})),m=yield p.json();return p.ok?{data:{path:u,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(i){if(Ut(i))return{data:null,error:i};throw i}})}upload(e,n,r){return On(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return On(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:VE.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",u.cacheControl)):(l=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const p=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:d}),m=yield p.json();return p.ok?{data:{path:i,fullPath:m.Key},error:null}:{data:null,error:m}}catch(l){if(Ut(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return On(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const i=yield Ai(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new uy("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}update(e,n,r){return On(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return On(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}copy(e,n,r){return On(this,void 0,void 0,function*(){try{return{data:{path:(yield Ai(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return On(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ai(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return On(this,void 0,void 0,function*(){try{const s=yield Ai(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}download(e,n){return On(this,void 0,void 0,function*(){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield uf(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(Ut(a))return{data:null,error:a};throw a}})}info(e){return On(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield uf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Wm(r),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}exists(e){return On(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield $4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Ut(r)&&r instanceof Hm){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],i=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";i!==""&&s.push(i);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&s.push(l);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${u}`)}}}remove(e){return On(this,void 0,void 0,function*(){try{return{data:yield l1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}list(e,n,r){return On(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},U4),n),{prefix:e||""});return{data:yield Ai(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Ut(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const z4="2.7.1",q4={"X-Client-Info":`storage-js/${z4}`};var Ia=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class H4{constructor(e,n={},r){this.url=e,this.headers=Object.assign(Object.assign({},q4),n),this.fetch=a1(r)}listBuckets(){return Ia(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ut(e))return{data:null,error:e};throw e}})}getBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield uf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return Ia(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}updateBucket(e,n){return Ia(this,void 0,void 0,function*(){try{return{data:yield F4(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Ut(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield Ai(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}deleteBucket(e){return Ia(this,void 0,void 0,function*(){try{return{data:yield l1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Ut(n))return{data:null,error:n};throw n}})}}class W4 extends H4{constructor(e,n={},r){super(e,n,r)}from(e){return new B4(this.url,this.headers,e,this.fetch)}}const K4="2.50.2";let Sc="";typeof Deno<"u"?Sc="deno":typeof document<"u"?Sc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Sc="react-native":Sc="node";const G4={"X-Client-Info":`supabase-js-${Sc}/${K4}`},Q4={headers:G4},J4={schema:"public"},Y4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},X4={};var Z4=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};const eU=t=>{let e;return t?e=t:typeof fetch>"u"?e=Wx:e=fetch,(...n)=>e(...n)},tU=()=>typeof Headers>"u"?Kx:Headers,nU=(t,e,n)=>{const r=eU(n),s=tU();return(i,o)=>Z4(void 0,void 0,void 0,function*(){var a;const l=(a=yield e())!==null&&a!==void 0?a:t;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",t),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),r(i,Object.assign(Object.assign({},o),{headers:u}))})};var rU=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};function sU(t){return t.endsWith("/")?t:t+"/"}function iU(t,e){var n,r;const{db:s,auth:i,realtime:o,global:a}=t,{db:l,auth:u,realtime:d,global:p}=e,m={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},p),a),{headers:Object.assign(Object.assign({},(n=p==null?void 0:p.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>rU(this,void 0,void 0,function*(){return""})};return t.accessToken?m.accessToken=t.accessToken:delete m.accessToken,m}const c1="2.70.0",Pa=30*1e3,Km=3,pg=Km*Pa,oU="http://localhost:9999",aU="supabase.auth.token",lU={"X-Client-Info":`gotrue-js/${c1}`},Gm="X-Supabase-Api-Version",u1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},cU=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,uU=6e5;class dy extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class dU extends dy{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function hU(t){return Ie(t)&&t.name==="AuthApiError"}class d1 extends dy{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class lo extends dy{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Ti extends lo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function fU(t){return Ie(t)&&t.name==="AuthSessionMissingError"}class zd extends lo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class qd extends lo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hd extends lo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function pU(t){return Ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class FE extends lo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Qm extends lo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function gg(t){return Ie(t)&&t.name==="AuthRetryableFetchError"}class $E extends lo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class qc extends lo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const df="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),UE=` 	
\r=`.split(""),gU=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<UE.length;e+=1)t[UE[e].charCodeAt(0)]=-2;for(let e=0;e<df.length;e+=1)t[df[e].charCodeAt(0)]=e;return t})();function BE(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(df[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(df[r]),e.queuedBits-=6}}function h1(t,e,n){const r=gU[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function zE(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{vU(o,r,n)};for(let o=0;o<t.length;o+=1)h1(t.charCodeAt(o),s,i);return e.join("")}function mU(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function _U(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}mU(r,e)}}function vU(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function yU(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)h1(t.charCodeAt(s),n,r);return new Uint8Array(e)}function wU(t){const e=[];return _U(t,n=>e.push(n)),new Uint8Array(e)}function EU(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>BE(s,n,r)),BE(null,n,r),e.join("")}function bU(t){return Math.round(Date.now()/1e3)+t}function TU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Ur=()=>typeof window<"u"&&typeof document<"u",Io={tested:!1,writable:!1},Hc=()=>{if(!Ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Io.tested)return Io.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Io.tested=!0,Io.writable=!0}catch{Io.tested=!0,Io.writable=!1}return Io.writable};function IU(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const f1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>zu(async()=>{const{default:r}=await Promise.resolve().then(()=>Vl);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},SU=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",p1=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Wd=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Kd=async(t,e)=>{await t.removeItem(e)};class cp{constructor(){this.promise=new cp.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}cp.promiseConstructor=Promise;function mg(t){const e=t.split(".");if(e.length!==3)throw new qc("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!cU.test(e[r]))throw new qc("JWT not in base64url format");return{header:JSON.parse(zE(e[0])),payload:JSON.parse(zE(e[1])),signature:yU(e[2]),raw:{header:e[0],payload:e[1]}}}async function AU(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function xU(t,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){r(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function kU(t){return("0"+t.toString(16)).substr(-2)}function CU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let i=0;i<56;i++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,kU).join("")}async function RU(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function PU(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await RU(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sa(t,e,n=!1){const r=CU();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await p1(t,`${e}-code-verifier`,s);const i=await PU(r);return[i,r===i?"plain":"s256"]}const jU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function NU(t){const e=t.headers.get(Gm);if(!e||!e.match(jU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function OU(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function DU(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const LU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Aa(t){if(!LU.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var MU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};const ko=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),VU=[502,503,504];async function qE(t){var e;if(!SU(t))throw new Qm(ko(t),0);if(VU.includes(t.status))throw new Qm(ko(t),t.status);let n;try{n=await t.json()}catch(i){throw new d1(ko(i),i)}let r;const s=NU(t);if(s&&s.getTime()>=u1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new $E(ko(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ti}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new $E(ko(n),t.status,n.weak_password.reasons);throw new dU(ko(n),t.status||500,r)}const FU=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function Ce(t,e,n,r){var s;const i=Object.assign({},r==null?void 0:r.headers);i[Gm]||(i[Gm]=u1["2024-01-01"].name),r!=null&&r.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const o=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await $U(t,e,n+a,{headers:i,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function $U(t,e,n,r,s,i){const o=FU(e,r,s,i);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new Qm(ko(l),0)}if(a.ok||await qE(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await qE(l)}}function Ds(t){var e;let n=null;qU(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=bU(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function HE(t){const e=Ds(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Oi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function UU(t){return{data:t,error:null}}function BU(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i}=t,o=MU(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:i},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function zU(t){return t}function qU(t){return t.access_token&&t.refresh_token&&t.expires_in}const _g=["global","local","others"];var HU=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class WU{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=f1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n=_g[0]){if(_g.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_g.join(", ")}`);try{return await Ce(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Ce(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Oi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=HU(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await Ce(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:BU,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ie(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ce(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Oi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,i,o,a,l;try{const u={nextPage:null,lastPage:0,total:0},d=await Ce(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:zU});if(d.error)throw d.error;const p=await d.json(),m=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,y=(l=(a=d.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return y.length>0&&(y.forEach(I=>{const A=parseInt(I.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(I.split(";")[1].split("=")[1]);u[`${j}Page`]=A}),u.total=parseInt(m)),{data:Object.assign(Object.assign({},p),u),error:null}}catch(u){if(Ie(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){Aa(e);try{return await Ce(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Oi})}catch(n){if(Ie(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Aa(e);try{return await Ce(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Oi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Aa(e);try{return await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Oi})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Aa(e.userId);try{const{data:n,error:r}=await Ce(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Aa(e.userId),Aa(e.id);try{return{data:await Ce(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}}const KU={getItem:t=>Hc()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Hc()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Hc()&&globalThis.localStorage.removeItem(t)}};function WE(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}function GU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const xa={debug:!!(globalThis&&Hc()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class g1 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class QU extends g1{}async function JU(t,e,n){xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),xa.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw xa.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new QU(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(xa.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}GU();const YU={url:oU,storageKey:aU,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:lU,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function KE(t,e,n){return await n()}class Tu{constructor(e){var n,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Tu.nextInstanceID,Tu.nextInstanceID+=1,this.instanceID>0&&Ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},YU),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new WU({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=f1(s.fetch),this.lock=s.lock||KE,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ur()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=JU:this.lock=KE,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Hc()?this.storage=KU:(this.memoryStorage={},this.storage=WE(this.memoryStorage)):(this.memoryStorage={},this.storage=WE(this.memoryStorage)),Ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${c1}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=IU(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Ur()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(n,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),pU(i)){const l=(e=i.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ie(n)?{error:n}:{error:new d1("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ds}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var n,r,s;try{let i;if("email"in e){const{email:d,password:p,options:m}=e;let y=null,I=null;this.flowType==="pkce"&&([y,I]=await Sa(this.storage,this.storageKey)),i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:p,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:y,code_challenge_method:I},xform:Ds})}else if("phone"in e){const{phone:d,password:p,options:m}=e;i=await Ce(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:p,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(s=m==null?void 0:m.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Ds})}else throw new qd("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let n;if("email"in e){const{email:i,password:o,options:a}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:HE})}else if("phone"in e){const{phone:i,password:o,options:a}=e;n=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:HE})}else throw new qd("You must provide either an email or phone number and a password");const{data:r,error:s}=n;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new zd}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;if(n==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(e){var n,r,s,i,o,a,l,u,d,p,m,y;let I,A;if("message"in e)I=e.message,A=e.signature;else{const{chain:j,wallet:x,statement:E,options:T}=e;let O;if(Ur())if(typeof x=="object")O=x;else{const R=window;if("solana"in R&&typeof R.solana=="object"&&("signIn"in R.solana&&typeof R.solana.signIn=="function"||"signMessage"in R.solana&&typeof R.solana.signMessage=="function"))O=R.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");O=x}const B=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in O&&O.signIn){const R=await O.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:B.host,uri:B.href}),E?{statement:E}:null));let k;if(Array.isArray(R)&&R[0]&&typeof R[0]=="object")k=R[0];else if(R&&typeof R=="object"&&"signedMessage"in R&&"signature"in R)k=R;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)I=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),A=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in O)||typeof O.signMessage!="function"||!("publicKey"in O)||typeof O!="object"||!O.publicKey||!("toBase58"in O.publicKey)||typeof O.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");I=[`${B.host} wants you to sign in with your Solana account:`,O.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${B.href}`,`Issued At: ${(s=(r=T==null?void 0:T.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=T==null?void 0:T.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((o=T==null?void 0:T.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((a=T==null?void 0:T.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((l=T==null?void 0:T.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((u=T==null?void 0:T.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((p=(d=T==null?void 0:T.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||p===void 0)&&p.length?["Resources",...T.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const R=await O.signMessage(new TextEncoder().encode(I),"utf8");if(!R||!(R instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=R}}try{const{data:j,error:x}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:I,signature:EU(A)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Ds});if(x)throw x;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new zd}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:x})}catch(j){if(Ie(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const n=await Wd(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:i,error:o}=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Ds});if(await Kd(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new zd}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Ie(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:i,nonce:o}=e,a=await Ce(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Ds}),{data:l,error:u}=a;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new zd}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,s,i,o;try{if("email"in e){const{email:a,options:l}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Sa(this.storage,this.storageKey));const{error:p}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in e){const{phone:a,options:l}=e,{data:u,error:d}=await Ce(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=l==null?void 0:l.data)!==null&&s!==void 0?s:{},create_user:(i=l==null?void 0:l.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new qd("You must provide either an email or phone number.")}catch(a){if(Ie(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let s,i;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await Ce(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ds});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(Ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var n,r,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Sa(this.storage,this.storageKey)),await Ce(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:UU})}catch(i){if(Ie(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ti;const{error:s}=await Ce(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:o}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:o,error:a}=await Ce(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new qd("You must provide either an email or phone number and a type")}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Wd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<pg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Oi}):await this._useSession(async n=>{var r,s,i;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ti}:await Ce(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Oi})})}catch(n){if(Ie(n))return fU(n)&&(await this._removeSession(),await Kd(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Ti;const o=s.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await Sa(this.storage,this.storageKey));const{data:u,error:d}=await Ce(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:Oi});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(Ie(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ti;const n=Date.now()/1e3;let r=n,s=!0,i=null;const{payload:o}=mg(e.access_token);if(o.exp&&(r=o.exp,s=r<=n),s){const{session:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(n){if(Ie(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ti;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(Ie(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Ur())throw new Hd("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hd(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new FE("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hd("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new FE("No code detected.");const{data:E,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const O=new URL(window.location.href);return O.searchParams.delete("code"),window.history.replaceState(window.history.state,"",O.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:l,token_type:u}=e;if(!i||!a||!o||!u)throw new Hd("No session defined in URL");const d=Math.round(Date.now()/1e3),p=parseInt(a);let m=d+p;l&&(m=parseInt(l));const y=m-d;y*1e3<=Pa&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${p}s`);const I=m-p;d-I>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",I,m,d):d-I<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",I,m,d);const{data:A,error:j}=await this._getUser(i);if(j)throw j;const x={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:p,expires_at:m,refresh_token:o,token_type:u,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(Ie(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Wd(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{error:i};const o=(r=s.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(hU(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Kd(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=TU(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:i},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await Sa(this.storage,this.storageKey,!0));try{return await Ce(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(i){if(Ie(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:r,error:s}=await this._useSession(async i=>{var o,a,l,u,d;const{data:p,error:m}=i;if(m)throw m;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await Ce(this.fetch,"GET",y,{headers:this.headers,jwt:(d=(u=p.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ur()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(Ie(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)throw o;return await Ce(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await xU(async s=>(s>0&&await AU(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await Ce(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ds})),(s,i)=>{const o=200*Math.pow(2,s);return i&&gg(i)&&Date.now()+o-r<Pa})}catch(r){if(this._debug(n,"error",r),Ie(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Ur()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await Wd(this.storage,this.storageKey);if(this._debug(n,"session from storage",r),!this._isValidSession(r)){this._debug(n,"session is not valid"),r!==null&&await this._removeSession();return}const s=((e=r.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<pg;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${pg}s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:i}=await this._callRefreshToken(r.refresh_token);i&&(console.error(i),gg(i)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(n,"error",r),console.error(r);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ti;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new cp;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ti;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Ie(i)){const o={session:null,error:i};return gg(i)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){i.push(l)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await p1(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Kd(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ur()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Pa);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/Pa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Pa}ms, refresh threshold is ${Km} ticks`),s<=Km&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof g1)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,o]=await Sa(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(r!=null&&r.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ce(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:i,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:u}=await Ce(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((s=l==null?void 0:l.totp)===null||s===void 0)&&s.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;if(i)return{data:null,error:i};const{data:o,error:a}=await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:i}=n;return i?{data:null,error:i}:await Ce(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(e==null?void 0:e.factors)||[],s=r.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=r.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=mg(s.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=s.user.factors)===null||n===void 0?void 0:n.filter(p=>p.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(o=>o.kid===e);if(r||(r=this.jwks.keys.find(o=>o.kid===e),r&&this.jwks_cached_at+uU>Date.now()))return r;const{data:s,error:i}=await Ce(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new qc("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(o=>o.kid===e),!r)throw new qc("No matching signing key found in JWKS");return r}async getClaims(e,n={keys:[]}){try{let r=e;if(!r){const{data:y,error:I}=await this.getSession();if(I||!y.session)return{data:null,error:I};r=y.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:l}}=mg(r);if(OU(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:y}=await this.getUser(r);if(y)throw y;return{data:{claims:i,header:s,signature:o},error:null}}const u=DU(s.alg),d=await this.fetchJwk(s.kid,n),p=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,p,o,wU(`${a}.${l}`)))throw new qc("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}}}Tu.nextInstanceID=0;const XU=Tu;class ZU extends XU{constructor(e){super(e)}}var e3=function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(d){try{u(r.next(d))}catch(p){o(p)}}function l(d){try{u(r.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):s(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})};class t3{constructor(e,n,r){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const a=sU(e),l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,d={db:J4,realtime:X4,auth:Object.assign(Object.assign({},Y4),{storageKey:u}),global:Q4},p=iU(r??{},d);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=p.global.headers)!==null&&i!==void 0?i:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(m,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=p.auth)!==null&&o!==void 0?o:{},this.headers,p.global.fetch),this.fetch=nU(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new v4(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),p.accessToken||this._listenForAuthEvents()}get functions(){return new G$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new W4(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return e3(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,storageKey:i,flowType:o,lock:a,debug:l},u,d){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ZU({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:i,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,flowType:o,lock:a,debug:l,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new N4(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const n3=(t,e,n)=>new t3(t,e,n),r3="https://tilyikrjfydofqprandn.supabase.co",s3="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRpbHlpa3JqZnlkb2ZxcHJhbmRuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTEzMzU3NzksImV4cCI6MjA2NjkxMTc3OX0.dATkafpW2h3BF59iipyHtb8SQQaIqu_I5gycuHu15_k",hy=n3(r3,s3);function i3(){const{grade:t,term:e,year:n}=fn(),[r,s]=F.useState([]),[i,o]=F.useState(!0),[a,l]=F.useState(!1),u=gt(),{pathname:d}=lr();return F.useEffect(()=>{async function p(m,y,I){m=m.split("_")[1],y=y.split("_")[1];try{o(!0),l(!1);const{data:A,error:j}=await hy.from("degrees").select("student_id, name, seat_number, total_degree, rank").eq("grade",m).eq("term",y).eq("year",I).order("rank",{ascending:!0});A!=null&&A.length||l(!0),s(A),o(!1)}catch(A){console.log(A),l(!0)}}t&&e&&n&&p(t,e,n)},[d]),i?h.jsx(Wt,{}):a?h.jsx("main",{children:h.jsx("h2",{className:"text-center py-5",children:"عذرًا؛ يبدو أن هناك خطأ. يرجى مراجعة رابط الصفحة."})}):h.jsxs("main",{children:[h.jsxs(Cn,{fontSize:3,py:3,children:["ترتيب نتائج ",xt(t)," - ",xt(e)," - ",n==null?void 0:n.split("_").join("/"),"."]}),h.jsx(Hx,{studentsCount:r.length}),h.jsxs("div",{className:"table-responsive border mt-2",children:[h.jsxs("table",{className:"table table-striped table-bordered",children:[h.jsx(qx,{}),h.jsx("tbody",{children:r.map(p=>{const m=p.name==="مريم سمير أحمد عبدالصمد";return console.log(m&&p.seat_number),h.jsxs("tr",{className:"degree_tr-linked",onClick:()=>{!m&&u(`/students/${p.student_id}`)},children:[h.jsx("th",{scope:"row",className:"text-center",children:p.rank}),h.jsx("td",{className:"text-center",children:m?"محجوب":p.seat_number}),h.jsx("td",{style:{whiteSpace:"nowrap"},children:m?"محجوب":p.name}),h.jsx("td",{className:"text-center",children:p.total_degree.total}),h.jsxs("td",{className:"text-center",children:["%",p.total_degree.percentage]})]},p.seat_number)})})]}),i&&h.jsx(Wt,{})]})]})}const o3=({subject:t,student:e,index:n})=>{const r=e.degrees[n],s=r>=50?"bg-success":"bg-danger";return h.jsxs("tr",{children:[h.jsx("th",{scope:"row",children:t.name},n),h.jsx("td",{className:`text-center text-light ${s}`,children:r})]})},a3=()=>{},l3=({title:t,value:e})=>h.jsxs("h4",{className:"mb-1",children:[h.jsxs("span",{className:"fw-bold text-primary",children:[t,": "]}),h.jsxs("span",{children:[e,"."]})]}),c3=({student:t})=>{const e=[{title:"الاسم",value:t.name},{title:"رقم الجلوس",value:t.id},{title:"الترتيب",value:t.rank},{title:"التقدير",value:t.total_grade}];return h.jsx("div",{children:e.map((n,r)=>h.jsx(l3,{title:n.title,value:n.value},r))})};async function u3(t,e,n,r){const i=await(await fetch(`${eo}/darelom-students-data/degrees/${e}/degrees_${t}.json`)).json();let o;return i.degrees.forEach(a=>{a.id==n&&(o=a)}),r(i.subjects),o}const d3=()=>{const{grade:t,year:e,studentId:n}=fn(),[r,s]=F.useState({}),[i,o]=F.useState([]),[a,l]=F.useState(!0);return F.useEffect(()=>{async function u(){let d;d=await u3(t,e,n,o),s(d),l(!1)}u()},[]),(r==null?void 0:r.name)==="مريم سمير أحمد عبدالصمد"?h.jsx("h2",{className:"text-center py-4",children:"عذرًا؛ البيانات غير متاحة."}):h.jsxs(h.Fragment,{children:[h.jsx(Cn,{fontSize:3,children:"نتائج المواد"}),a?h.jsx(Wt,{}):h.jsxs("div",{className:"mt-3",children:[h.jsx(c3,{student:r}),h.jsxs("table",{className:"table table-striped border table-bordered mt-4",children:[h.jsx(a3,{}),h.jsx("tbody",{children:i.map((u,d)=>h.jsx(o3,{subject:u,student:r,index:d},d))})]})]})]})},h3=()=>h.jsxs("div",{className:"min-vh-100 d-flex flex-column gap-4 justify-content-center align-items-center",children:[h.jsx("h1",{children:"الصفحة غير موجودة."}),h.jsx(Ke,{to:"/",className:"btn btn-primary",children:"الصفحة الرئيسية"})]}),fy=({grade:t,backFrom:e})=>{const n=gt();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return h.jsx("button",{className:"btn btn-danger",onClick:r,children:"رجوع"})};function qs({text:t,color:e,widthPercentage:n,onClick:r}){return h.jsx("button",{className:`btn btn-${e||"primary"} w-${n||"100"} p-2`,onClick:r,children:t})}const m1=({pdf:t})=>{const e=gt(),[n,r]=F.useState(!1);function s(){window.location.href=`https://drive.google.com/uc?export=download&id=${t.book_gdrive_id}`}function i(){e(`/book/${t.book_gdrive_id}`,{state:{book_name:t.book_name}})}return n?h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(qs,{text:"استعراض",color:"success",onClick:i}),h.jsx(qs,{text:"تحميل",onClick:s}),h.jsx(qs,{text:"إلغاء",color:"danger",onClick:()=>r(!1)})]}):h.jsx(qs,{text:t.book_name,onClick:()=>r(!0)})},fa=()=>{const t=gt();function e(){t("/")}return h.jsx("button",{className:"btn btn-danger",onClick:e,children:"القائمة الرئيسية"})},f3=()=>{const{grade:t,term:e}=fn(),[n,r]=F.useState([]),[s,i]=F.useState(!0);return F.useEffect(()=>{fetch(`${eo}/darelom-students-data/books/2023_24/books_${t}.json`).then(o=>o.json()).then(o=>{r(o[e]),i(!1)})},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[h.jsx("h2",{children:"اختر كتابًا:"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(fy,{grade:t,backFrom:"books"}),h.jsx(fa,{})]})]}),h.jsxs(Cn,{children:[xt(t)," - ",xt(e)]}),s?h.jsx(Wt,{}):h.jsx("div",{className:"row g-2 my-2",children:n.map((o,a)=>h.jsx("div",{className:"col-sm-6",children:h.jsx(m1,{pdf:o})},a))})]})};function p3(){const t="btn btn-danger p-2 px-5 w-100",e=gt();function n(){e(-1)}return h.jsx("button",{className:t,onClick:n,children:"رجوع"})}const g3=({bookId:t,isIframeLoading:e,setIsIframeLoading:n})=>{const r=`https://drive.google.com/file/d/${t}/preview`,s=`${e&&"d-none"} w-100`,i={height:"500px"};function o(){n(!1)}return h.jsx("iframe",{src:r,onLoad:o,className:s,style:i})},m3=({bookId:t})=>{const e="btn btn-primary p-2 px-5 w-100";function n(){window.location.href=`https://drive.google.com/uc?export=download&id=${t}`}return h.jsx("button",{className:e,onClick:n,children:"تحميل"})},GE=({children:t})=>h.jsx("div",{className:"col-md-auto col-6",children:t}),QE=()=>{var i;const{bookId:t}=fn(),n=(i=lr().state)==null?void 0:i.book_name,[r,s]=F.useState(!0);return h.jsxs(h.Fragment,{children:[h.jsxs(Cn,{children:['"',n,'".']}),h.jsxs("div",{className:"my-2 d-flex justify-content-end row gx-2",children:[h.jsx(GE,{children:h.jsx(m3,{bookId:t})}),h.jsx(GE,{children:h.jsx(p3,{})})]}),r&&h.jsx(Wt,{}),h.jsx(g3,{bookId:t,isIframeLoading:r,setIsIframeLoading:s})]})},_3=({currentQuestionIndex:t,questionsLength:e})=>{const n=t+1;return h.jsx("div",{className:"d-flex justify-content-between ",children:h.jsxs("p",{className:"mb-0",children:["السؤال",h.jsxs("span",{className:"fw-bold",children:[" ",n," "]}),"من",h.jsxs("span",{className:"fw-bold",children:[" ",e]}),"."]})})},v3=({questionText:t})=>h.jsx("h3",{className:"bg-black text-light p-2 py-3 text-center my-4 rounded-2 lh-base",children:t});function y3({currentQuestionIndex:t,setCurrentQuestionIndex:e,setIsAnswered:n,answerButtons:r}){function s(){n(!1),e(t+1),r.forEach(i=>{i.disabled=!1,i.classList.remove("btn-danger","btn-success")})}return h.jsx(qs,{text:"التالي",onClick:s})}function w3({questionsLength:t,score:e}){const n=gt();function r(){n("/test_yourself/test_result",{state:{result:e,fullMark:t}})}return h.jsx(qs,{text:"عرض النتيجة",onClick:r})}const E3=({children:t})=>h.jsx("div",{className:"modal-header",children:h.jsx("h5",{className:"modal-title text-center w-100",children:t})}),b3=({children:t})=>h.jsx("div",{className:"modal-body pb-1",children:h.jsx("p",{className:"text-center fw-bold",children:t})}),T3=({children:t})=>h.jsx("div",{className:"modal-footer border-0 pt-0",children:t}),I3=({setIsModalOpen:t,answerReason:e})=>h.jsx("div",{className:"modal d-block bg-black bg-opacity-75",tabIndex:"-1",children:h.jsx("div",{className:"modal-dialog modal-dialog-centered",children:h.jsxs("div",{className:"modal-content",children:[h.jsx(E3,{children:'"وَقُل رَّبِّ زِدْنِي عِِلْمًا"'}),h.jsx(b3,{children:e||"للأسف، لا يوجد تعليل لهذه الإجابة حاليًا."}),h.jsx(T3,{children:h.jsx(qs,{text:"إغلاق",color:"danger",onClick:()=>t(!1)})})]})})}),S3=({setIsModalOpen:t})=>h.jsx(qs,{text:"عرض التعليل",onClick:()=>t(!0)});function A3(t,e,n,r,s,i,o,a){function l(){r.current.forEach(p=>{p.disabled=!0}),d.disabled=!1}n(!0);const u=r.current[i[s].question_answer],d=t.target;e==i[s].question_answer?(d.classList.add("btn-success"),o(a+1),l()):(l(),d.classList.add("btn-danger"),u.classList.add("btn-success"))}const vg=()=>{var O,B,R,k,w,S;const{grade:t,term:e,subject:n}=fn(),[r,s]=F.useState(!1),[i,o]=F.useState(((O=location.state)==null?void 0:O.currentQuestionIndex)||0),[a,l]=F.useState(0),[u,d]=F.useState([]),[p,m]=F.useState(!1),y=F.useRef([]),[I,A]=F.useState(!0),x=lr().pathname;function E(C){OA($u(An,C)).then(N=>{const V=[];N.docs.forEach(P=>{V.push(P.data())}),d(V),A(!1)})}F.useEffect(()=>{x=="/test_yourself/sended_questions"?E("test_yourself/sended_questions"):x==`/${t}/${e}/${n}/test_yourself_students`?E(`${t}/test_yourself_students/questions/${e}/${n}`):fetch(`${eo}/darelom-students-data/questions/test_questions.json`).then(C=>C.json()).then(C=>{d(C),A(!1)})},[]);const T=i>=u.length-1;return h.jsxs(h.Fragment,{children:[h.jsx(Cn,{fontSize:"2",children:"اختبر نفسك"}),I?h.jsx(Wt,{}):u.length?h.jsxs("div",{className:"mt-2",children:[h.jsx(_3,{currentQuestionIndex:i,questionsLength:u.length,creatorName:(R=(B=u[i])==null?void 0:B.question_creator)==null?void 0:R.name}),h.jsx(v3,{questionText:(k=u[i])==null?void 0:k.question_text}),h.jsx("div",{className:"row g-2",children:(w=u[i])==null?void 0:w.question_options.map((C,N)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100 p-2",ref:V=>y.current[N]=V,onClick:V=>A3(V,N,s,y,i,u,l,a),children:C})},N))}),h.jsx("hr",{}),h.jsxs("div",{className:"mt-3 d-flex gap-2",children:[r&&T?h.jsx(w3,{questionsLength:u.length,score:a}):r&&!T&&h.jsx(y3,{currentQuestionIndex:i,setCurrentQuestionIndex:o,setIsAnswered:s,answerButtons:y.current}),r&&h.jsx(S3,{setIsModalOpen:m})]}),p&&h.jsx(I3,{setIsModalOpen:m,answerReason:(S=u[i])==null?void 0:S.answer_reason})]}):h.jsx("p",{className:"text-center fs-2 fw-bold my-2",children:"لا أسئلة حتى الآن."})]})},x3=()=>{const t=lr(),{result:e,fullMark:n}=t.state;return h.jsxs(h.Fragment,{children:[h.jsx("h2",{children:"نتيجتك هي:"}),h.jsxs("p",{className:"text-center fs-1",children:[h.jsxs("span",{className:"fw-bold",children:[e," "]}),"من",h.jsxs("span",{className:"fw-bold",children:[" ",n]}),"."]})]})},k3=()=>{const t=gt(),{grade:e,term:n}=fn(),[r,s]=F.useState([]),[i,o]=F.useState(!0);return F.useEffect(()=>{async function a(){var d;const u=(d=(await ri(es(An,`${e}/test_yourself_students/questions`,n))).data())==null?void 0:d.subjects;s(u),o(!1)}a()},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:"اختر مادة:"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(fy,{grade:e,backFrom:"test_yourself_students"}),h.jsx(fa,{})]})]}),i?h.jsx(Wt,{}):h.jsx("div",{className:"row g-2 my-2",children:r==null?void 0:r.map((a,l)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/${a}/test_yourself_students`),children:xt(a)})},l))})]})},C3=()=>h.jsxs("div",{className:"row g-2",children:[h.jsx("div",{className:"col-sm-6",children:h.jsx(Ke,{to:"term_1",className:"btn btn-primary w-100",children:"الفصل الدراسي الأول"})}),h.jsx("div",{className:"col-sm-6",children:h.jsx(Ke,{to:"term_2",className:"btn btn-primary w-100",children:"الفصل الدراسي الثاني"})})]}),R3=()=>{const t=gt(),[e,n]=F.useState(!0),{grade:r,term:s}=fn(),[i,o]=F.useState([]);return F.useEffect(()=>{ri(es(An,`${r}/test_yourself_students/questions/${s}`)).then(a=>{o(a.data().subjects),n(!1)})},[]),h.jsx(h.Fragment,{children:e?h.jsx(Wt,{}):h.jsx("div",{className:"row g-2",children:i.map((a,l)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100 p-2",onClick:()=>t(`/${r}/${s}/${a}/send_question`),children:xt(a)})},l))})})},_1=({formRef:t,children:e})=>h.jsx("form",{className:"mx-auto mt-3 needs-validation",noValidate:!0,style:{maxWidth:"480px"},ref:t,children:e}),Yn=({field:t,marginBottom:e=3})=>h.jsx("div",{className:`mb-${e}`,children:t}),v1=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{htmlFor:"email-input",className:"form-label fw-bold",children:"البريد الإلكتروني:"}),h.jsx("input",{type:"email",className:"form-control",pattern:"^[^@]+@[^@]+\\.[^@]{2,}$",id:"email-input",placeholder:"folan.alfolany@gmail.com","aria-describedby":"emailHelp",required:!0}),h.jsx("div",{className:"invalid-feedback",children:"يرجى إدخال بريد إلكتروني صحيح."})]}),y1=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{htmlFor:"password-input",className:"form-label fw-bold",children:"كلمة المرور:"}),h.jsx("input",{type:"password",placeholder:"_____",minLength:"6",className:"form-control",id:"password-input",autoComplete:"off",required:!0}),h.jsx("div",{className:"invalid-feedback",children:"كلمة المرور يجب أن تتكون من 6 أحرف على الأقل."})]}),P3=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{htmlFor:"name-input",className:"form-label fw-bold",children:"الاسم:"}),h.jsx("input",{type:"text",className:"form-control",minLength:3,id:"name-input",placeholder:"فلان الفلاني",required:!0}),h.jsx("div",{className:"invalid-feedback",children:"الاسم يجب أن يتكون من 3 أحرف على الأقل."})]}),j3=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"fw-bold",children:"اختر فرقتك:"}),h.jsxs("select",{className:"form-select mt-2",id:"grade-input",required:!0,children:[h.jsx("option",{value:"grade_1",children:"الفرقة الأولى"}),h.jsx("option",{value:"grade_2",children:"الفرقة الثانية"}),h.jsx("option",{value:"grade_3",children:"الفرقة الثالثة"}),h.jsx("option",{value:"grade_4",children:"الفرقة الرابعة"})]}),h.jsx("div",{className:"invalid-feedback",children:"يجب تحديد فرقتك."})]}),Wu=({text:t})=>h.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-bold",children:t}),up=({label:t,placeholder:e,invalidFeedback:n,minLength:r=10,rows:s=4,fontSize:i=5,id:o="textarea-field"})=>h.jsxs(h.Fragment,{children:[h.jsx("label",{className:`fw-bold fs-${i} mb-1`,htmlFor:o,children:t}),h.jsx("textarea",{className:"form-control",id:o,rows:s,placeholder:e,minLength:r,required:!0}),h.jsx("div",{className:"invalid-feedback",children:n})]}),N3=()=>{const t=gt(),[e,n]=F.useState(!1),[r,s]=F.useState(!1),i=F.useRef(null);return F.useEffect(()=>{const o=i.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{s(!0);const l=a.target["name-input"].value,u=a.target["email-input"].value,d=a.target["grade-input"].value,p=a.target["password-input"].value,m=a.target["textarea-field"].value,I=(await zj(Uu,u,p)).user.uid;await y2(es(An,"users",I),{name:l,email:u,grade:d,uid:I,message:m,write_permission:!1}),t("/")}catch(l){console.log(l.code),n(!0)}finally{s(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),h.jsxs("div",{children:[h.jsx(Cn,{children:"إنشاء حساب جديد"}),h.jsxs(_1,{formRef:i,children:[h.jsx(Yn,{field:h.jsx(P3,{})}),h.jsx(Yn,{field:h.jsx(v1,{})}),h.jsx(Yn,{field:h.jsx(j3,{})}),h.jsx(Yn,{field:h.jsx(up,{placeholder:"اكتب رسالة مراعيًا علامات الترقيم.",label:"اكتب رسالة مستخدمًا علامات الترقيم:",fontSize:6,minLength:100,invalidFeedback:"الرسالة يجب أن تتكون من 100 حرف على الأقل."})}),h.jsx(Yn,{field:h.jsx(y1,{})}),r?h.jsx(Ml,{}):h.jsx(Wu,{text:"إنشاء حساب جديد"}),e&&h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل التسجيل."})]})]})},Gd=()=>{const t=gt(),[e,n]=F.useState(!1),[r,s]=F.useState(!1),i=F.useRef(null);return F.useEffect(()=>{const o=i.current;o.addEventListener("submit",async a=>{if(a.preventDefault(),a.stopPropagation(),o.checkValidity())try{s(!0);const l=a.target["email-input"].value,u=a.target["password-input"].value;await qj(Uu,l,u),t("/")}catch(l){console.log(l.code),n(!0)}finally{s(!1),setTimeout(()=>{n(!1)},3e3)}else o.classList.add("was-validated")})},[]),h.jsxs("div",{children:[h.jsx(Cn,{children:"تسجيل الدخول"}),h.jsxs(_1,{formRef:i,children:[h.jsx(Yn,{field:h.jsx(v1,{})}),h.jsx(Yn,{field:h.jsx(y1,{})}),r?h.jsx(Ml,{}):h.jsx(Wu,{text:"تسجيل الدخول"}),e&&h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل التسجيل."})]}),h.jsxs("p",{className:"text-center mt-2 fw-bold",children:["هل تريد إنشاء حساب؟ ",h.jsx(Ke,{to:"/signup",children:"إنشاء حساب"}),"."]})]})},py=({formRef:t,children:e})=>h.jsx("form",{className:"mt-3 needs-validation",noValidate:!0,ref:t,children:e}),O3=({optionsRef:t})=>{const e=["الأول","الثاني","الثالث","الرابع"];return h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"fw-bold fs-5 mb-1",children:"الاختيارات:"}),h.jsx("div",{className:"row g-2",children:e.map((n,r)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("input",{type:"text",className:"form-control",placeholder:`الاختيار ${n}.`,ref:s=>t.current[r]=s,required:!0})},r))})]})},D3=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"fw-bold fs-5 mb-1",children:"رقم الاختيار الصحيح:"}),h.jsxs("select",{className:"form-control",id:"options-input",children:[h.jsx("option",{value:"0",children:"1"}),h.jsx("option",{value:"1",children:"2"}),h.jsx("option",{value:"2",children:"3"}),h.jsx("option",{value:"3",children:"4"})]})]}),L3=()=>h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"fw-bold fs-5 mb-1",children:"التعليل:"}),h.jsx("input",{type:"text",className:"form-control",placeholder:"اكتب التعليل.",id:"answer-reason-input"})]}),M3=()=>h.jsx(up,{placeholder:"اكتب نص السؤال هنا.",label:"نص السؤال:",invalidFeedback:"نص السؤال يجب أن يتكون من 10 أحرف على الأقل."}),V3=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),{grade:s,term:i,subject:o}=fn(),a=F.useRef([]),l=F.useRef(null);return F.useEffect(()=>{const u=l.current;u.addEventListener("submit",async d=>{d.preventDefault(),d.stopPropagation();const p=u["textarea-field"].value,m=[],y=Number(u["options-input"].value),I=u["answer-reason-input"].value;if(a.current.forEach(A=>{m.push(A.value)}),u.checkValidity())try{e(!0);const{name:A,uid:j}=JSON.parse(localStorage.getItem("loggedinUserInfo"));await $v($u(An,`${s}/test_yourself_students/questions/${i}/${o}`),{question_text:p,question_answer:y,question_options:m,answer_reason:I,question_creator:{name:A,uid:j}}),l.current.reset(),u.classList.remove("was-validated"),r("success")}catch(A){console.log(A.code),u.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else u.classList.add("was-validated")})},[]),h.jsxs(h.Fragment,{children:[h.jsx(Cn,{children:"أرسل سؤالًا [تجريبية]"}),h.jsxs("p",{className:"text-center mt-2 fw-bold",children:[`${xt(s)} - ${xt(i)} - ${xt(o)}`,"."]}),h.jsxs(py,{formRef:l,children:[h.jsx(Yn,{field:h.jsx(M3,{})}),h.jsx(Yn,{field:h.jsx(O3,{optionsRef:a})}),h.jsx(Yn,{field:h.jsx(D3,{})}),h.jsx(Yn,{field:h.jsx(L3,{})}),t?h.jsx(Ml,{}):h.jsx(Wu,{text:"أرسل السؤال"})]}),n==="initial"?null:n==="success"?h.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"تم الإرسال بنجاح."}):h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل الإرسال."})]})},F3=()=>h.jsx(up,{placeholder:"اكتب اقتراحك هنا.",label:"الاقتراح:",invalidFeedback:"نص الاقتراح يجب أن يتكون من 10 أحرف على الأقل.",rows:7}),$3=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),s=F.useRef(null);return F.useEffect(()=>{const i=s.current;i.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation();const a=i["textarea-field"].value;if(i.checkValidity())try{e(!0),await $v($u(An,"suggestions"),{suggestion:a}),s.current.reset(),i.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),i.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else i.classList.add("was-validated")})},[]),h.jsxs(h.Fragment,{children:[h.jsx(Cn,{children:"إرسال اقتراح"}),h.jsxs(py,{formRef:s,children:[h.jsx(Yn,{field:h.jsx(F3,{})}),t?h.jsx(Ml,{}):h.jsx(Wu,{text:"أرسل الاقتراح"})]}),n==="initial"?null:n==="success"?h.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"تم الإرسال بنجاح."}):h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل الإرسال."})]})},U3=()=>h.jsx(up,{placeholder:"اكتب المشكلة بالتفصيل، وإن كانت المشكلة خاصة بصفحة بعينها؛ أرسل الرابط.",label:"المشكلة:",invalidFeedback:"نص المشكلة يجب أن يتكون من 10 أحرف على الأقل.",rows:7}),B3=()=>{const[t,e]=F.useState(!1),[n,r]=F.useState("initial"),s=F.useRef(null);return F.useEffect(()=>{const i=s.current;i.addEventListener("submit",async o=>{o.preventDefault(),o.stopPropagation(),console.log("s");const a=i["textarea-field"].value;if(i.checkValidity())try{e(!0),await $v($u(An,"problems"),{problem:a}),s.current.reset(),i.classList.remove("was-validated"),r("success")}catch(l){console.log(l.code),i.classList.add("was-validated"),r("failed")}finally{e(!1),setTimeout(()=>{r("initial")},3e3)}else i.classList.add("was-validated")})},[]),h.jsxs(h.Fragment,{children:[h.jsx(Cn,{children:"الإبلاغ عن مشكلة"}),h.jsxs(py,{formRef:s,children:[h.jsx(Yn,{field:h.jsx(U3,{})}),t?h.jsx(Ml,{}):h.jsx(Wu,{text:"أرسل المشكلة"})]}),n==="initial"?null:n==="success"?h.jsx("p",{className:"text-center my-2 p-2 bg-success text-light fw-bold",children:"تم الإرسال بنجاح."}):h.jsx("p",{className:"text-center my-2 p-2 bg-danger text-light fw-bold",children:"فشل الإرسال."})]})},z3=()=>async(t,e)=>{try{const r=await(await fetch(t)).blob(),s=URL.createObjectURL(r),i=document.createElement("a");i.href=s,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(s)}catch(n){console.log(n)}},q3=()=>{const{grade:t}=fn(),[e,n]=F.useState(!1),[r,s]=F.useState(!0);let i="",o;t==="exams_schedule"?(i=`${eo}/darelom-students-data/schedule/exams_schedule.jpg`,o="جدول امتحانات الفصل الدراسي الثاني 2025"):(i=`${eo}/darelom-students-data/schedule/${t}.jpg`,o=`جدول محاضرات ${xt(t)}`);const a=z3();function l(){n(!1),s(!1)}function u(){n(!0),s(!1)}return h.jsxs("div",{className:"container",children:[r?h.jsx(Wt,{}):h.jsx(h.Fragment,{children:!e&&h.jsx(h.Fragment,{children:h.jsxs("p",{className:"text-center fw-bold fs-5",children:["عذرًا، جدول ",xt(t)," ليس لدينا بعد."]})})}),h.jsxs("div",{className:`d-${e?"block":"none"}`,children:[h.jsx("img",{src:i,className:"w-100",alt:"Schecule",onError:l,onLoad:u}),h.jsx("button",{className:"btn btn-primary w-100 mt-3",onClick:()=>a(i,o),children:"تحميل الجدول"})]})]})},H3=({grade:t,backFrom:e})=>{const n=gt();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return h.jsx("button",{className:"btn btn-danger",onClick:r,children:"رجوع"})},W3=()=>{const{grade:t,term:e}=fn(),[n,r]=F.useState({}),[s,i]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{ri(es(An,`${t}/lectures_recordings`)).then(l=>{var d;const u=(d=l.data())==null?void 0:d[e];if(u&&Object.keys(u).length){const p=Object.keys(u);if(p.includes("mojalad_tasgilat")){const m=["mojalad_tasgilat",...p.filter(y=>y!=="mojalad_tasgilat")];i(m)}else i(p);r(u)}a(!1)})},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[h.jsx("h2",{children:"اختر مادة:"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(H3,{grade:t,backFrom:"lectures_recordings"}),h.jsx(fa,{})]})]}),h.jsxs(Cn,{children:[xt(t)," - ",xt(e)]}),o?h.jsx(Wt,{}):h.jsx(h.Fragment,{children:Object.keys(n).length?h.jsx("div",{className:"row g-2 my-2",children:s.map((l,u)=>h.jsx("div",{className:"col-sm-6",children:h.jsx(qs,{text:xt(l),onClick:()=>window.location.href=n[l]})},u))}):h.jsx("p",{className:"text-center fw-bold mt-4 fs-4",children:"عذرًا، لا تتوفر تسجيلات."})})]})},K3=()=>{const t=gt(),{grade:e,term:n}=fn(),[r,s]=F.useState([]),[i,o]=F.useState(!0);return F.useEffect(()=>{async function a(){var d;const u=((d=(await ri(es(An,`${e}/more_resources/`))).data())==null?void 0:d[n])||[];s(u),o(!1)}a()},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:"اختر مادة:"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(fy,{grade:e,backFrom:"more_resources"}),h.jsx(fa,{})]})]}),i?h.jsx(Wt,{}):h.jsx("div",{className:"row g-2 my-2",children:r!=null&&r.length?r==null?void 0:r.map((a,l)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/${e}/${n}/more_resources/${a}`),children:xt(a)})},l)):h.jsx("p",{className:"fw-bold text-center fs-3",children:"عذرًا، لا يوجد مصادر."})})]})},JE=()=>{const t=gt(),{grade:e,term:n,subject:r}=fn(),[s,i]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{async function l(){var p;let u;e?u=await ri(es(An,`${e}/more_resources/${n}/${r}`)):u=await ri(es(An,`general_subjects/${r}`));const d=((p=u.data())==null?void 0:p.resources)||[];i(d),a(!1)}l()},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:"اختر شيئًا:"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx("button",{className:"btn btn-danger",onClick:()=>t(-1),children:"رجوع"}),h.jsx(fa,{})]})]}),o?h.jsx(Wt,{}):h.jsx("div",{className:"row g-2 my-2",children:s!=null&&s.length?s==null?void 0:s.map((l,u)=>h.jsx("div",{className:"col-sm-6",children:h.jsx(Ke,{className:"btn btn-primary w-100",to:l!=null&&l.isBook?`/book/${l.link}`:l.link,state:{book_name:l.title},children:l.title})},u)):h.jsx("p",{className:"fw-bold text-center fs-3",children:"عذرًا، لا شيء هنا."})})]})},G3=({grade:t,backFrom:e})=>{const n=gt();function r(){n("/",{state:{selections:[t,e],initialStepIndex:2}})}return h.jsx("button",{className:"btn btn-danger",onClick:r,children:"رجوع"})},Q3=()=>{const[t,e]=F.useState(!1),{grade:n,term:r}=fn(),[s,i]=F.useState([]),[o,a]=F.useState(!0);return F.useEffect(()=>{fetch(`${eo}/darelom-students-data/final_exams/final_exams_${n}.json`).then(l=>l.json()).then(l=>{l[r].length?(i(l[r]),a(!1)):t(!0)}).catch(l=>{e(!0)})},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center mb-3",children:[h.jsx("h2",{children:"اختر امتحانًا:"}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(G3,{grade:n,backFrom:"final_exams"}),h.jsx(fa,{})]})]}),h.jsxs(Cn,{children:[xt(n)," - ",xt(r)]}),t?h.jsx("p",{className:"fw-bold text-center fs-4 mt-4",children:"عذرًا، لا توجد امتحانات."}):o?h.jsx(Wt,{}):h.jsx("div",{className:"row g-2 my-2",children:s.map((l,u)=>h.jsx("div",{className:"col-sm-6",children:h.jsx(m1,{pdf:l})},u))})]})},J3=()=>{const t=gt(),[e,n]=F.useState([]),[r,s]=F.useState(!0);return F.useEffect(()=>{async function i(){var l;const a=(l=(await ri(es(An,"general_subjects","subjects"))).data())==null?void 0:l.ids;n(a),s(!1)}i()},[]),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-content-center",children:[h.jsx("h2",{children:"اختر مادة:"}),h.jsx("div",{className:"d-flex gap-2",children:h.jsx(fa,{})})]}),r?h.jsx(Wt,{}):h.jsx("div",{className:"row g-2 my-2",children:e==null?void 0:e.map((i,o)=>h.jsx("div",{className:"col-sm-6",children:h.jsx("button",{className:"btn btn-primary w-100",onClick:()=>t(`/general_subjects/${i}`),children:xt(i)})},o))})]})};function Y3(t){let e=0,n=0;return t.map(s=>s.degrees).flat().forEach(s=>{s.isCalculatedInTotal&&(e+=s.finalDegree,s.degree.startsWith("/")?n+=Number(s.degree.slice(1)):isNaN(Number(s.degree))||(n+=Number(s.degree)))}),{max:e,total:n}}function X3(){const[t,e]=F.useState({name:"",totalDegree:{max:0,total:0},firstGradeInPlatform:2024}),[n,r]=F.useState({}),[s,i]=F.useState(!1),[o,a]=F.useState(!1),{student_id:l}=fn(),u=F.useRef(null);F.useEffect(()=>{i(!0),d()},[l]);async function d(){const{data:p,error:m}=await hy.from("degrees").select("*").eq("student_id",l).order("grade",{ascending:!0}).order("term",{ascending:!0});if(p&&p.length){e({name:p[0].name,totalDegree:Y3(p),firstGradeInPlatform:p[0].grade});const y={};p.forEach(I=>{y[I.grade]||(y[I.grade]=[]),y[I.grade].push(I)}),r(y),a(!1)}else a(!0);i(!1)}return s?h.jsx(Wt,{}):o?h.jsxs("main",{children:[h.jsxs("div",{className:"alert alert-danger text-center my-5",children:["عذرًا؛ لم يتم العثور على بيانات الطالب في قاعدة البيانات. يرجى التأكد من"," ",h.jsx("button",{type:"button",className:"text-decoration-underline p-0 m-0 align-baseline",style:{color:"rgb(110 168 254)",fontSize:"1em",verticalAlign:"middle",background:"none",border:"none"},"data-bs-toggle":"modal","data-bs-target":"#idInfoModal",tabIndex:0,"aria-label":"ما هو الرقم التعريفي؟",children:"الرقم التعريفي"}),"، أو ",h.jsx(Ke,{to:"/send_problem",children:"أبلغنا عن مشكلة"}),". يمكنك الذهاب إلى"," ",h.jsx(Ke,{to:"/find_student",children:"صفحة البحث عن الطالب"}),"."]}),h.jsx("div",{className:"modal fade",id:"idInfoModal",tabIndex:-1,"aria-labelledby":"idInfoModalLabel","aria-hidden":"true",children:h.jsx("div",{className:"modal-dialog",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("div",{className:"modal-header",children:h.jsx("h5",{className:"modal-title",id:"idInfoModalLabel",children:"ما هو الرقم التعريفي؟"})}),h.jsxs("div",{className:"modal-body text-end",children:["الرقم التعريفي هو رقم جلوس أول فرقة التحق بها الطالب + العام الدراسي، وهذا يعني -افتراضًا-:",h.jsx("br",{}),h.jsx("br",{}),'- إذا كان الطالب بدأ من الفرقة الأولى عام 2024، وكان رقم جلوسه: "12345"؛ فإن رقمه التعريفي: "123452024".',h.jsx("br",{}),h.jsx("br",{}),'- إذا كان الطالب مُحَوَّلًا أو بدأ من فرقة أعلى، وكان رقم جلوسه: "34567"، وبدأ من العام الدراسي 2025؛ فإن رقمه التعريفي: "345672025".',h.jsx("br",{}),h.jsx("br",{}),'- الدرجات المتوفرة في المنصة تبدأ من العام الدراسي 2024، لذلك تم استخدام رقم جلوس هذا العام لجميع الفرق في إنشاء الرقم التعريفي، فإن كان الطالب في هذا العام في الفرقة الثالثة وكان رقم جلوسه "34567"؛ فإن رقمه التعريفي "345672024".']}),h.jsx("div",{className:"modal-footer",children:h.jsx("button",{type:"button",className:"btn btn-danger w-100","data-bs-dismiss":"modal",children:"إغلاق"})})]})})})]}):l==="201252024"?h.jsx("h2",{className:"text-center py-4",children:"عذرًا؛ البيانات غير متاحة."}):h.jsxs("main",{children:[h.jsxs("section",{className:"d-grid gap-1",children:[t.firstGradeInPlatform>1&&h.jsxs("span",{className:"fs-6 text-danger mb-3",children:["* تم جمع البيانات بداية من ",xt(`grade_${t.firstGradeInPlatform}`),"."]}),h.jsxs("h4",{className:"mb-1",children:[h.jsx("span",{className:"fw-bold text-primary",children:"الاسم: "}),h.jsxs("span",{children:[t.name,"."]})]}),h.jsxs("h4",{className:"mb-1",children:[h.jsx("span",{className:"fw-bold text-primary",children:"الرقم التعريفي: "}),h.jsxs("span",{children:[l,"."]})]}),h.jsxs("h4",{className:"mb-1",children:[h.jsx("span",{className:"fw-bold text-primary",children:"النتيجة الإجمالية: "}),h.jsxs("span",{className:"fs-5",children:[t.totalDegree.total,"/",t.totalDegree.max," ",h.jsxs("span",{className:"fs-6",children:["(",(t.totalDegree.total*100/t.totalDegree.max).toFixed(2),"%)."]})]})]})]}),h.jsx("div",{className:"accordion mt-4",id:"gradesAccordion",ref:u,children:Object.entries(n).map(([p,m],y)=>h.jsxs("div",{className:"accordion-item",children:[h.jsx("h2",{className:"accordion-header",id:`heading${p}`,children:h.jsx("button",{className:`accordion-button ${y!==0?"collapsed":""}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${p}`,"aria-expanded":y===0,"aria-controls":`collapse${p}`,children:xt(`grade_${p}`)})}),h.jsx("div",{id:`collapse${p}`,className:`accordion-collapse collapse ${y===0?"show":""}`,"aria-labelledby":`heading${p}`,"data-bs-parent":"#gradesAccordion",children:h.jsx("div",{className:"accordion-body",children:m.map(I=>h.jsx("div",{className:"mb-4",children:h.jsxs("div",{className:"table-responsive border-secondary-subtle rounded-2 py-1 my-0 ",children:[h.jsxs("div",{className:"mb-4",children:[h.jsxs("h4",{className:"mb-1 fs-5",children:[h.jsx("span",{className:"fw-bold text-primary",children:"الفصل الدراسي: "}),h.jsxs("span",{children:[I.term,"."]})]}),h.jsxs("h4",{className:"mb-1 fs-5",children:[h.jsx("span",{className:"fw-bold text-primary",children:"العام الدراسي: "}),h.jsxs("span",{children:[I.year,"."]})]}),h.jsxs("h4",{className:"mb-1 fs-5",children:[h.jsx("span",{className:"fw-bold text-primary",children:"النتيجة: "}),h.jsxs("span",{className:"fs-5",children:[I.total_degree.total," ",h.jsxs("span",{className:"fs-6",children:["(",I.total_degree.percentage,"%)"]}),"."]})]}),h.jsxs("h4",{className:"mb-1 fs-5",children:[h.jsx("span",{className:"fw-bold text-primary",children:"المركز: "}),h.jsxs("span",{className:"fs-5",children:[I.rank,"#."]})]})]}),h.jsxs("table",{className:"table table-striped border",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{className:"bg-dark text-white border-start py-2",children:"المادة"}),h.jsx("th",{className:"text-center bg-dark text-white py-2",children:"الدرجة"})]})}),h.jsx("tbody",{children:I.degrees.map((A,j)=>{const x=A.name||A.id;let E=A.degree;typeof E=="string"&&E.startsWith("/")&&(E=E.slice(1));const O=parseInt(E,10)>=50?"text-bg-success":"text-bg-danger";return h.jsxs("tr",{children:[h.jsx("td",{className:"fw-bold",children:x}),h.jsx("td",{className:`${O} text-center`,children:E})]},j)})})]})]})},I.term))})})]},p))})]})}function Z3(){const[t,e]=F.useState(""),[n,r]=F.useState(!1),[s,i]=F.useState(null),o=gt(),a=async l=>{if(l.preventDefault(),r(!0),i(null),!/^\d{9}$/.test(t)){i("الرقم التعريفي يجب أن يتكون من 9 أرقام بالضبط."),r(!1);return}try{const u=parseInt(t,10),{data:d,error:p}=await hy.from("degrees").select("student_id").eq("student_id",u).limit(1);if(p)throw p;d&&d.length>0?o(`/students/${u}`):i("لم يتم العثور على الطالب. يرجى التأكد من الرقم التعريفي والمحاولة مرة أخرى.")}catch(u){i("حدث خطأ أثناء البحث. يرجى المحاولة مرة أخرى."),console.error("Error searching for student:",u)}finally{r(!1)}};return h.jsx("main",{className:"container",children:h.jsx("div",{className:"row justify-content-center",children:h.jsx("div",{children:h.jsx("div",{className:" shadow-sm",children:h.jsxs("div",{className:"card-body",children:[h.jsx(Cn,{children:"البحث عن بيانات الطالب"}),h.jsxs("form",{onSubmit:a,className:"col-md-6 mx-auto",children:[h.jsxs("div",{className:"my-3",children:[h.jsxs("label",{htmlFor:"studentId",className:"form-label d-flex align-items-center gap-1",children:["الرقم التعريفي:",h.jsx("button",{type:"button",className:"btn btn-sm",style:{fontSize:"1.2em",verticalAlign:"middle",padding:0,lineHeight:1},"data-bs-toggle":"modal","data-bs-target":"#idInfoModal",tabIndex:-1,"aria-label":"ما هو الرقم التعريفي؟",children:h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"size-6",style:{width:"25px",height:"25px",transform:"scaleX(-1)"},children:h.jsx("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm11.378-3.917c-.89-.777-2.366-.777-3.255 0a.75.75 0 0 1-.988-1.129c1.454-1.272 3.776-1.272 5.23 0 1.513 1.324 1.513 3.518 0 4.842a3.75 3.75 0 0 1-.837.552c-.676.328-1.028.774-1.028 1.152v.75a.75.75 0 0 1-1.5 0v-.75c0-1.279 1.06-2.107 1.875-2.502.182-.088.351-.199.503-.331.83-.727.83-1.857 0-2.584ZM12 18a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"})})})]}),h.jsx("div",{className:"modal fade",id:"idInfoModal",tabIndex:-1,"aria-labelledby":"idInfoModalLabel","aria-hidden":"true",children:h.jsx("div",{className:"modal-dialog",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("div",{className:"modal-header",children:h.jsx("h5",{className:"modal-title",id:"idInfoModalLabel",children:"ما هو الرقم التعريفي؟"})}),h.jsxs("div",{className:"modal-body",children:["الرقم التعريفي هو رقم جلوس أول فرقة التحق بها الطالب + العام الدراسي، وهذا يعني -افتراضًا-:",h.jsx("br",{}),h.jsx("br",{}),'- إذا كان الطالب بدأ من الفرقة الأولى عام 2024، وكان رقم جلوسه: "12345"؛ فإن رقمه التعريفي: "123452024".',h.jsx("br",{}),h.jsx("br",{}),'- إذا كان الطالب مُحَوَّلًا أو بدأ من فرقة أعلى، وكان رقم جلوسه: "34567"، وبدأ من العام الدراسي 2025؛ فإن رقمه التعريفي: "345672025".',h.jsx("br",{}),h.jsx("br",{}),'- الدرجات المتوفرة في المنصة تبدأ من العام الدراسي 2024، لذلك تم استخدام رقم جلوس هذا العام لجميع الفرق في إنشاء الرقم التعريفي، فإن كان الطالب في هذا العام في الفرقة الثالثة وكان رقم جلوسه "34567"؛ فإن رقمه التعريفي "345672024".']}),h.jsx("div",{className:"modal-footer",children:h.jsx("button",{type:"button",className:"btn btn-danger w-100","data-bs-dismiss":"modal",children:"إغلاق"})})]})})}),h.jsx("input",{type:"number",className:"form-control",id:"studentId",placeholder:"123456789",value:t,onChange:l=>{l.target.value.length<=9&&e(l.target.value)},required:!0})]}),s&&h.jsx("div",{className:"alert alert-danger",children:s}),h.jsx("button",{type:"submit",className:"btn btn-primary w-100",disabled:n,children:n?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),h.jsx("span",{className:"visually-hidden",children:"Loading..."})]}):"بحث"})]})]})})})})})}function eB(){const t=[{grade:"الأولى",subjects_analytics:[{subject_name:"قاعة البحث والمكتبة (النحو واللغة)",subject_students:{subject_students_count:435,subject_succeed_students_count:403,subject_succeed_students_percentage:"92.64"},subject_degree:{total_degree:31282,average_degree:"71.91"}},{subject_name:"ريادة الأعمال",subject_students:{subject_students_count:435,subject_succeed_students_count:425,subject_succeed_students_percentage:"97.70"},subject_degree:{total_degree:31332,average_degree:"72.03"}},{subject_name:"النحو2",subject_students:{subject_students_count:435,subject_succeed_students_count:353,subject_succeed_students_percentage:"81.15"},subject_degree:{total_degree:25644,average_degree:"58.95"}},{subject_name:"تدربيات لغوية",subject_students:{subject_students_count:435,subject_succeed_students_count:412,subject_succeed_students_percentage:"94.71"},subject_degree:{total_degree:34904,average_degree:"80.24"}},{subject_name:"الأدب فى عصر صدر الإسلام وبنى أمية",subject_students:{subject_students_count:435,subject_succeed_students_count:357,subject_succeed_students_percentage:"82.07"},subject_degree:{total_degree:25122,average_degree:"57.75"}},{subject_name:"اللغات السامية والشرقية",subject_students:{subject_students_count:435,subject_succeed_students_count:376,subject_succeed_students_percentage:"86.44"},subject_degree:{total_degree:28866,average_degree:"66.36"}},{subject_name:"التاريخ الأموى والعباسى",subject_students:{subject_students_count:435,subject_succeed_students_count:406,subject_succeed_students_percentage:"93.33"},subject_degree:{total_degree:32239,average_degree:"74.11"}},{subject_name:"النظم والأسلوبية",subject_students:{subject_students_count:435,subject_succeed_students_count:366,subject_succeed_students_percentage:"84.14"},subject_degree:{total_degree:26398,average_degree:"60.69"}},{subject_name:"العقيدة والمنطق ومناهج البحث",subject_students:{subject_students_count:435,subject_succeed_students_count:363,subject_succeed_students_percentage:"83.45"},subject_degree:{total_degree:24676,average_degree:"56.73"}},{subject_name:"القران الكريم والأحول الشخصية",subject_students:{subject_students_count:435,subject_succeed_students_count:396,subject_succeed_students_percentage:"91.03"},subject_degree:{total_degree:28663,average_degree:"65.89"}},{subject_name:"نصوص من الأدب الإسلامى والأموى",subject_students:{subject_students_count:435,subject_succeed_students_count:374,subject_succeed_students_percentage:"85.98"},subject_degree:{total_degree:25702,average_degree:"59.09"}},{subject_name:"المعاجم وعلم الأصوات",subject_students:{subject_students_count:435,subject_succeed_students_count:401,subject_succeed_students_percentage:"92.18"},subject_degree:{total_degree:31956,average_degree:"73.46"}},{subject_name:"بلاغة القرآن",subject_students:{subject_students_count:435,subject_succeed_students_count:381,subject_succeed_students_percentage:"87.59"},subject_degree:{total_degree:29567,average_degree:"67.97"}},{subject_name:"الصرف والعروض1",subject_students:{subject_students_count:435,subject_succeed_students_count:358,subject_succeed_students_percentage:"82.30"},subject_degree:{total_degree:26885,average_degree:"61.80"}},{subject_name:"اللغة الأوربية",subject_students:{subject_students_count:435,subject_succeed_students_count:378,subject_succeed_students_percentage:"86.90"},subject_degree:{total_degree:27527,average_degree:"63.28"}}]},{grade:"الثانية",subjects_analytics:[{subject_name:"قاعة البحث والمكتبة (النحو واللغة)",subject_students:{subject_students_count:435,subject_succeed_students_count:403,subject_succeed_students_percentage:"92.64"},subject_degree:{total_degree:31282,average_degree:"71.91"}},{subject_name:"ريادة الأعمال",subject_students:{subject_students_count:435,subject_succeed_students_count:425,subject_succeed_students_percentage:"97.70"},subject_degree:{total_degree:31332,average_degree:"72.03"}},{subject_name:"النحو2",subject_students:{subject_students_count:435,subject_succeed_students_count:353,subject_succeed_students_percentage:"81.15"},subject_degree:{total_degree:25644,average_degree:"58.95"}},{subject_name:"تدربيات لغوية",subject_students:{subject_students_count:435,subject_succeed_students_count:412,subject_succeed_students_percentage:"94.71"},subject_degree:{total_degree:34904,average_degree:"80.24"}},{subject_name:"الأدب فى عصر صدر الإسلام وبنى أمية",subject_students:{subject_students_count:435,subject_succeed_students_count:357,subject_succeed_students_percentage:"82.07"},subject_degree:{total_degree:25122,average_degree:"57.75"}},{subject_name:"اللغات السامية والشرقية",subject_students:{subject_students_count:435,subject_succeed_students_count:376,subject_succeed_students_percentage:"86.44"},subject_degree:{total_degree:28866,average_degree:"66.36"}},{subject_name:"التاريخ الأموى والعباسى",subject_students:{subject_students_count:435,subject_succeed_students_count:406,subject_succeed_students_percentage:"93.33"},subject_degree:{total_degree:32239,average_degree:"74.11"}},{subject_name:"النظم والأسلوبية",subject_students:{subject_students_count:435,subject_succeed_students_count:366,subject_succeed_students_percentage:"84.14"},subject_degree:{total_degree:26398,average_degree:"60.69"}},{subject_name:"العقيدة والمنطق ومناهج البحث",subject_students:{subject_students_count:435,subject_succeed_students_count:363,subject_succeed_students_percentage:"83.45"},subject_degree:{total_degree:24676,average_degree:"56.73"}},{subject_name:"القران الكريم والأحول الشخصية",subject_students:{subject_students_count:435,subject_succeed_students_count:396,subject_succeed_students_percentage:"91.03"},subject_degree:{total_degree:28663,average_degree:"65.89"}},{subject_name:"نصوص من الأدب الإسلامى والأموى",subject_students:{subject_students_count:435,subject_succeed_students_count:374,subject_succeed_students_percentage:"85.98"},subject_degree:{total_degree:25702,average_degree:"59.09"}},{subject_name:"المعاجم وعلم الأصوات",subject_students:{subject_students_count:435,subject_succeed_students_count:401,subject_succeed_students_percentage:"92.18"},subject_degree:{total_degree:31956,average_degree:"73.46"}},{subject_name:"بلاغة القرآن",subject_students:{subject_students_count:435,subject_succeed_students_count:381,subject_succeed_students_percentage:"87.59"},subject_degree:{total_degree:29567,average_degree:"67.97"}},{subject_name:"الصرف والعروض1",subject_students:{subject_students_count:435,subject_succeed_students_count:358,subject_succeed_students_percentage:"82.30"},subject_degree:{total_degree:26885,average_degree:"61.80"}},{subject_name:"اللغة الأوربية",subject_students:{subject_students_count:435,subject_succeed_students_count:378,subject_succeed_students_percentage:"86.90"},subject_degree:{total_degree:27527,average_degree:"63.28"}}]},{grade:"الثالثة",subjects_analytics:[{subject_name:"اللغة العبرية/اللغة الفارسية",subject_students:{subject_students_count:612,subject_succeed_students_count:414,subject_succeed_students_percentage:"67.65"},subject_degree:{total_degree:33216,average_degree:"54.27"}},{subject_name:"اللغة الأوربية",subject_students:{subject_students_count:612,subject_succeed_students_count:463,subject_succeed_students_percentage:"75.65"},subject_degree:{total_degree:36086,average_degree:"58.96"}},{subject_name:"قاعة البحث والمكتبة(الأدب والنقد)",subject_students:{subject_students_count:575,subject_succeed_students_count:490,subject_succeed_students_percentage:"85.22"},subject_degree:{total_degree:40473,average_degree:"70.39"}},{subject_name:"القضايا المجتمعية",subject_students:{subject_students_count:367,subject_succeed_students_count:356,subject_succeed_students_percentage:"97.00"},subject_degree:{total_degree:26718,average_degree:"72.80"}},{subject_name:"النحو3",subject_students:{subject_students_count:612,subject_succeed_students_count:407,subject_succeed_students_percentage:"66.50"},subject_degree:{total_degree:29667,average_degree:"48.48"}},{subject_name:"الصرف والعروض2",subject_students:{subject_students_count:612,subject_succeed_students_count:410,subject_succeed_students_percentage:"66.99"},subject_degree:{total_degree:30766,average_degree:"50.27"}},{subject_name:"الأدب العباسى والاندلسى",subject_students:{subject_students_count:612,subject_succeed_students_count:415,subject_succeed_students_percentage:"67.81"},subject_degree:{total_degree:30677,average_degree:"50.13"}},{subject_name:"نصوص أدبية من العصر العباسى والأندلسى",subject_students:{subject_students_count:612,subject_succeed_students_count:438,subject_succeed_students_percentage:"71.57"},subject_degree:{total_degree:36515,average_degree:"59.67"}},{subject_name:"علم الدلالة وعلم اللغة الحاسوبي",subject_students:{subject_students_count:575,subject_succeed_students_count:433,subject_succeed_students_percentage:"75.30"},subject_degree:{total_degree:30442,average_degree:"52.94"}},{subject_name:"الأدب المقارن ونظرية الأدب",subject_students:{subject_students_count:612,subject_succeed_students_count:426,subject_succeed_students_percentage:"69.61"},subject_degree:{total_degree:31450,average_degree:"51.39"}},{subject_name:"علوم القرآن والسنة",subject_students:{subject_students_count:612,subject_succeed_students_count:448,subject_succeed_students_percentage:"73.20"},subject_degree:{total_degree:34668,average_degree:"56.65"}},{subject_name:"التفسير والحديث",subject_students:{subject_students_count:612,subject_succeed_students_count:447,subject_succeed_students_percentage:"73.04"},subject_degree:{total_degree:32153,average_degree:"52.54"}},{subject_name:"علم الكلام والفلسفة الإسلامية",subject_students:{subject_students_count:612,subject_succeed_students_count:423,subject_succeed_students_percentage:"69.12"},subject_degree:{total_degree:29500,average_degree:"48.20"}},{subject_name:"تاريخ مصر الإسلامية والمغرب والأندلس",subject_students:{subject_students_count:612,subject_succeed_students_count:410,subject_succeed_students_percentage:"66.99"},subject_degree:{total_degree:28216,average_degree:"46.10"}},{subject_name:"تدربيات أدبية",subject_students:{subject_students_count:612,subject_succeed_students_count:495,subject_succeed_students_percentage:"80.88"},subject_degree:{total_degree:40195,average_degree:"65.68"}}]},{grade:"الرابعة",subjects_analytics:[{subject_name:"النحو4",subject_students:{subject_students_count:1030,subject_succeed_students_count:558,subject_succeed_students_percentage:"54.17"},subject_degree:{total_degree:42274,average_degree:"41.04"}},{subject_name:"اللغة الأوربية والترجمة 4",subject_students:{subject_students_count:789,subject_succeed_students_count:670,subject_succeed_students_percentage:"84.92"},subject_degree:{total_degree:46817,average_degree:"59.34"}},{subject_name:"الصرف والقافية",subject_students:{subject_students_count:1030,subject_succeed_students_count:532,subject_succeed_students_percentage:"51.65"},subject_degree:{total_degree:40616,average_degree:"39.43"}},{subject_name:"الاتجاهات اللغوية الحديثة وقضايا العربية المعاصرة",subject_students:{subject_students_count:789,subject_succeed_students_count:561,subject_succeed_students_percentage:"71.10"},subject_degree:{total_degree:40812,average_degree:"51.73"}},{subject_name:"الأدب العربى الحديث",subject_students:{subject_students_count:1030,subject_succeed_students_count:567,subject_succeed_students_percentage:"55.05"},subject_degree:{total_degree:41078,average_degree:"39.88"}},{subject_name:"الحروب الصلبيية وت.الشرق الاسلامى",subject_students:{subject_students_count:1030,subject_succeed_students_count:571,subject_succeed_students_percentage:"55.44"},subject_degree:{total_degree:41444,average_degree:"40.24"}},{subject_name:"التصوف والفكر الإسلامى الحديث",subject_students:{subject_students_count:1030,subject_succeed_students_count:703,subject_succeed_students_percentage:"68.25"},subject_degree:{total_degree:49856,average_degree:"48.40"}},{subject_name:"أصول الفقه",subject_students:{subject_students_count:789,subject_succeed_students_count:573,subject_succeed_students_percentage:"72.62"},subject_degree:{total_degree:39914,average_degree:"50.59"}},{subject_name:"تدريبات بلاغية",subject_students:{subject_students_count:789,subject_succeed_students_count:707,subject_succeed_students_percentage:"89.61"},subject_degree:{total_degree:52675,average_degree:"66.76"}},{subject_name:"الحضارة والنظم الإسلامية",subject_students:{subject_students_count:1030,subject_succeed_students_count:580,subject_succeed_students_percentage:"56.31"},subject_degree:{total_degree:42662,average_degree:"41.42"}},{subject_name:"اللغة (العبرية/الفارسية) والترجمة",subject_students:{subject_students_count:789,subject_succeed_students_count:645,subject_succeed_students_percentage:"81.75"},subject_degree:{total_degree:48101,average_degree:"60.96"}},{subject_name:"نصوص من الأدب العربي الحديث",subject_students:{subject_students_count:789,subject_succeed_students_count:564,subject_succeed_students_percentage:"71.48"},subject_degree:{total_degree:39627,average_degree:"50.22"}},{subject_name:"النقد الأدبي الحديث",subject_students:{subject_students_count:789,subject_succeed_students_count:602,subject_succeed_students_percentage:"76.30"},subject_degree:{total_degree:41405,average_degree:"52.48"}},{subject_name:"قاعة البحث والمكتبة العلوم الإسلامية",subject_students:{subject_students_count:789,subject_succeed_students_count:696,subject_succeed_students_percentage:"88.21"},subject_degree:{total_degree:52815,average_degree:"66.94"}}]}];return h.jsxs("main",{className:"container-fluid py-3",dir:"rtl",children:[h.jsxs("div",{className:"text-center mx-auto border-bottom  px-5 mb-5",style:{width:"fit-content"},children:[h.jsx("h2",{children:"تحليل نتائج الطلاب للعام الدراسي 2025"}),h.jsx("p",{className:"text-danger mt-1",children:"[ميزة تجربيبة]"})]}),h.jsx("div",{children:h.jsx("p",{className:"my-4",children:"- يرجى الانتباه إلى أن بعض المواد في الفرقة الرابعة يشترك فيها طلاب اللائحة الجديدة مع طلاب اللائحة القديمة، وأغلب طلاب اللائحة القديمة لا يحضرون الامتحانات، أو نتائجهم تكون ضعيفة بعض الشيء؛ فيوثر هذا الأمر على النتيجة الإجمالية."})}),h.jsx("div",{className:"accordion",id:"gradesAccordion",children:t.map((e,n)=>h.jsxs("div",{className:"accordion-item mb-3 border",children:[h.jsx("h2",{className:"accordion-header",id:`heading${n}`,children:h.jsxs("button",{className:`accordion-button ${n!==0?"collapsed":""}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${n}`,"aria-expanded":n===0,"aria-controls":`collapse${n}`,children:[h.jsxs("span",{className:"fw-bold fs-5",children:["📊 إحصائيات المواد - الفرقة ",e.grade]}),h.jsxs("span",{className:"badge mx-2 bg-primary ms-2",children:[e.subjects_analytics.length," مادة"]})]})}),h.jsx("div",{id:`collapse${n}`,className:`accordion-collapse collapse ${n===0?"show":""}`,"aria-labelledby":`heading${n}`,"data-bs-parent":"#gradesAccordion",children:h.jsx("div",{className:"accordion-body",children:h.jsx("div",{className:"row g-4",children:e.subjects_analytics.map((r,s)=>{const i=parseFloat(r.subject_students.subject_succeed_students_percentage);let o="bg-danger";return i>=85?o="bg-success":i>=70&&(o="bg-info"),h.jsx("div",{className:"col-md-6 col-lg-4",children:h.jsx("div",{className:"card shadow-sm h-100 subject-card",children:h.jsxs("div",{className:"card-body d-flex flex-column justify-content-between",children:[h.jsx("h5",{className:"card-title fw-bold mb-3",children:r.subject_name}),h.jsx("table",{className:"table table-sm table-borderless mb-3",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{children:"📌 عدد الطلاب:"}),h.jsx("td",{className:"text-end fw-bold",children:r.subject_students.subject_students_count})]}),h.jsxs("tr",{children:[h.jsx("td",{children:"✅ الناجحون:"}),h.jsx("td",{className:"text-end fw-bold text-success",children:r.subject_students.subject_succeed_students_count})]}),h.jsxs("tr",{children:[h.jsx("td",{children:"📈 نسبة الناجحين:"}),h.jsxs("td",{className:"text-end fw-bold",children:[i,"%"]})]}),h.jsxs("tr",{children:[h.jsx("td",{children:"⚖️ متوسط الدرجات:"}),h.jsx("td",{className:"text-end fw-bold",children:r.subject_degree.average_degree})]})]})}),h.jsx("div",{className:"progress",style:{height:"20px"},children:h.jsxs("div",{className:`progress-bar ${o}`,role:"progressbar",style:{width:`${i}%`},"aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100,children:[i,"%"]})})]})})},s)})})})})]},n))}),h.jsx("style",{children:`
        .subject-card:hover {
          transform: translateY(-5px);
          transition: 0.3s ease;
        }
      `})]})}function tB(){const[t,e]=F.useState(null),[n,r]=F.useState(JSON.parse(localStorage.getItem("loggedInUserInfo")));F.useEffect(()=>{YI(Uu,async i=>{if(i){const a=(await ri(es(An,`users/${i.uid}`))).data();localStorage.setItem("loggedinUserInfo",JSON.stringify(a)),r(a)}else localStorage.setItem("loggedinUserInfo",JSON.stringify(null)),r(null);e(i),localStorage.setItem("loggedinUser",JSON.stringify(i))})},[]);const s=uF(Mm(h.jsx(h.Fragment,{children:h.jsxs($e,{path:"/",element:h.jsx(b$,{}),errorElement:h.jsx(h3,{}),children:[h.jsx($e,{path:"/",element:h.jsx(j$,{})}),h.jsx($e,{path:"/degrees/:grade/:year",element:h.jsx($$,{})}),h.jsx($e,{path:"/degrees/:grade/:year/:studentId",element:h.jsx(d3,{})}),h.jsx($e,{path:"/ranking/:grade/:term/:year",element:h.jsx(i3,{})}),h.jsx($e,{path:":grade/books/:term",element:h.jsx(f3,{})}),h.jsx($e,{path:"/book/:bookId",element:h.jsx(QE,{})}),h.jsx($e,{path:":grade/final_exams/:term",element:h.jsx(Q3,{})}),h.jsx($e,{path:"/final_exam/:examId",element:h.jsx(QE,{})}),h.jsx($e,{path:":grade/more_resources/:term",element:h.jsx(K3,{})}),h.jsx($e,{path:":grade/:term/more_resources/:subject",element:h.jsx(JE,{})}),h.jsx($e,{path:"/general_subjects",element:h.jsx(J3,{})}),h.jsx($e,{path:"/general_subjects/:subject",element:h.jsx(JE,{})}),h.jsx($e,{path:"/test_yourself",element:h.jsx(vg,{})})," ",h.jsx($e,{path:"/test_yourself/test_result",element:h.jsx(x3,{})}),h.jsx($e,{path:":grade/test_yourself_students/:term",element:h.jsx(k3,{})}),h.jsx($e,{path:"/test_yourself/sended_questions",element:h.jsx(vg,{})}),h.jsx($e,{path:"/:grade/:term/:subject/test_yourself_students",element:h.jsx(vg,{})}),h.jsx($e,{path:"/:grade/send_question_selector",element:n!=null&&n.write_permission?h.jsx(C3,{}):h.jsx(Gd,{})}),h.jsx($e,{path:"/:grade/send_question_selector/:term",element:n!=null&&n.write_permission?h.jsx(R3,{}):h.jsx(Gd,{})}),h.jsx($e,{path:"/:grade/:term/:subject/send_question",element:n!=null&&n.write_permission?h.jsx(V3,{}):h.jsx(Gd,{})}),h.jsx($e,{path:"/signup",element:t?h.jsx(vE,{to:"/"}):h.jsx(N3,{})}),h.jsx($e,{path:"/signin",element:t?h.jsx(vE,{to:"/"}):h.jsx(Gd,{})}),h.jsx($e,{path:"/send_suggestion",element:h.jsx($3,{})}),h.jsx($e,{path:"/send_problem",element:h.jsx(B3,{})}),h.jsx($e,{path:"/:grade/schedule",element:h.jsx(q3,{})}),h.jsx($e,{path:"/:grade/lectures_recordings/:term",element:h.jsx(W3,{})}),h.jsx($e,{path:"/students/:student_id",element:h.jsx(X3,{})}),h.jsx($e,{path:"/find_student",element:h.jsx(Z3,{})}),h.jsx($e,{path:"/degrees_analytics/2025",element:h.jsx(eB,{})})]})})));return h.jsx(yF,{router:s})}yg.createRoot(document.getElementById("root")).render(h.jsx(tB,{}));document.documentElement.setAttribute("data-bs-theme",localStorage.getItem("theme")||"light");
